//================================================================================================================
//================================================================================================================
//
//
//					AEons Of Death v6: Class 1 weapons
//
//
//================================================================================================================
//================================================================================================================

//==================================================================================
//==================================================================================

//==================================================================================
//==================================================================================

Actor AEoDHandGrenadeItem : CustomInventory 6019
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL
	Scale 0.5
	Inventory.Amount 1
	Inventory.PickupMessage "You got a Hand Grenade!"
	Inventory.PickupSound "misc/w_pkup"
	States
	{
	Spawn:
		R013 Y -1
		Loop
	Pickup:
		TNT1 A 0 A_JumpIfInventory("AEoDHandGrenade",1,"Ammo")
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",1) <= 0,"Nothing")
		TNT1 A 0 A_GiveInventory("Weapon1Count",1)
		TNT1 A 0 A_GiveInventory("HandGrenadeDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDHandGrenade",1)
		TNT1 A 0 	
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDHandGrenade",1,"Ammo")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		
		TNT1 A 0 ACS_NamedExecute("s798",0,1,1,0)
		Fail
	Ammo:
		TNT1 A 0 A_GiveInventory("AEGrenade",1)
		Stop
	}
}

Actor AEoDHandGrenade : Weapon // 6019
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL
	+WEAPON.CHEATNOTWEAPON
	+WEAPON.NOALERT
	Weapon.AmmoType1 "AEGrenade"
	Weapon.AmmoType2 "AEGrenade"
	Weapon.AmmoGive1 1
	Weapon.AmmoUse1 1
	Weapon.AmmoUse2 2
	Weapon.SelectionOrder 29000
	Inventory.PickupMessage "You got a Hand Grenade!"
	Inventory.PickupSound "misc/w_pkup"
	weapon.upsound "weapons/draw"
	Tag "Hand Grenade"
	Scale 0.5
	States
	{
	Spawn:
		R013 Y -1
		Loop
	Ready: 
		R013 A 1 A_WeaponReady
		Loop
	ReadyEmpty:
		TNT1 AAAAAA 0 A_CheckReload
		Goto Deselect
	Deselect:	
		R013 A 0 A_JumpIfInventory("AEGrenade",1,2)
		TNT1 A 0
		"----" A 1 A_Lower
		"----" AA 0 A_Lower
		Loop
	Select:
		TNT1 A 0 	
		TNT1 A 0 A_TakeInventory("TNTThrowForce",999) 
		R013 A 1 A_Raise
		TNT1 AA 0 A_Raise
		Loop
	Fire:
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",1,9)
		R013 BCD 2
		R013 E 2 A_PlaySound("reilsss/weapons/handGrenadetick", CHAN_WEAPON, 1.0, 0)
		R013 FGHH 2
		TNT1 A 2 A_GunFlash
	HoldingLoop:
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",16,2)
		TNT1 A 0 A_GiveInventory("TNTThrowForce",1)
		TNT1 A 2
		TNT1 A 0 A_Refire("HoldingLoop")
		R013 I 2
		R013 J 0 A_PlaySound("reilsss/weapons/handGrenadethrow", CHAN_WEAPON, 1.0, 0)
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",16,"ThrowGrenadeG")
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",15,"ThrowGrenadeG")
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",14,"ThrowGrenadeF")
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",13,"ThrowGrenadeE")
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",12,"ThrowGrenadeD")
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",11,"ThrowGrenadeC")
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",10,"ThrowGrenadeB")
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",9,"ThrowGrenadeA")
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",8,"ThrowGrenade9")
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",7,"ThrowGrenade8")
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",6,"ThrowGrenade7")
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",5,"ThrowGrenade6")
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",4,"ThrowGrenade5")
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",3,"ThrowGrenade4")
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",2,"ThrowGrenade3")
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",1,"ThrowGrenade2")
	ThrowGrenade1:
		R013 J 0 A_FireCustomMissile("ThrownGrenade1",0,1,8,0)
		Goto EndThrow
	ThrowGrenade2:
		R013 J 0 A_FireCustomMissile("ThrownGrenade2",0,1,8,0)
		Goto EndThrow
	ThrowGrenade3:
		R013 J 0 A_FireCustomMissile("ThrownGrenade3",0,1,8,0)
		Goto EndThrow
	ThrowGrenade4:
		R013 J 0 A_FireCustomMissile("ThrownGrenade4",0,1,8,0)
		Goto EndThrow
	ThrowGrenade5:
		R013 J 0 A_FireCustomMissile("ThrownGrenade5",0,1,8,0)
		Goto EndThrow
	ThrowGrenade6:
		R013 J 0 A_FireCustomMissile("ThrownGrenade6",0,1,8,0)
		Goto EndThrow
	ThrowGrenade7:
		R013 J 0 A_FireCustomMissile("ThrownGrenade7",0,1,8,0)
		Goto EndThrow
	ThrowGrenade8:
		R013 J 0 A_FireCustomMissile("ThrownGrenade8",0,1,8,0)
		Goto EndThrow
	ThrowGrenade9:
		R013 J 0 A_FireCustomMissile("ThrownGrenade9",0,1,8,0)
		Goto EndThrow
	ThrowGrenadeA:
		R013 J 0 A_FireCustomMissile("ThrownGrenadeA",0,1,8,0)
		Goto EndThrow
	ThrowGrenadeB:
		R013 J 0 A_FireCustomMissile("ThrownGrenadeB",0,1,8,0)
		Goto EndThrow
	ThrowGrenadeC:
		R013 J 0 A_FireCustomMissile("ThrownGrenadeC",0,1,8,0)
		Goto EndThrow
	ThrowGrenadeD:
		R013 J 0 A_FireCustomMissile("ThrownGrenadeD",0,1,8,0)
		Goto EndThrow
	ThrowGrenadeE:
		R013 J 0 A_FireCustomMissile("ThrownGrenadeE",0,1,8,0)
		Goto EndThrow
	ThrowGrenadeF:
		R013 J 0 A_FireCustomMissile("ThrownGrenadeF",0,1,8,0)
		Goto EndThrow
	ThrowGrenadeG:
		R013 J 0 A_FireCustomMissile("ThrownGrenadeG",0,1,8,0)
		Goto EndThrow
	Altfire:
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",1,9)
		R013 BCD 2
		R013 E 2 A_PlaySound("reilsss/weapons/handGrenadetick", CHAN_WEAPON, 1.0, 0)
		R013 FGHH 2
		TNT1 A 2 A_GunFlash
		TNT1 A 0 A_ReFire("HoldingLoopAlt")
	HoldingLoopAlt:
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",16,2)
		TNT1 A 0 A_GiveInventory("TNTThrowForce",1)
		TNT1 A 2
		TNT1 A 0 A_Refire("HoldingLoopAlt")
		R013 I 2
		R013 J 0 A_PlaySound("reilsss/weapons/handGrenadethrow", CHAN_WEAPON, 1.0, 0)
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",16,"ThrowNapalmG")
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",15,"ThrowNapalmG")
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",14,"ThrowNapalmF")
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",13,"ThrowNapalmE")
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",12,"ThrowNapalmD")
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",11,"ThrowNapalmC")
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",10,"ThrowNapalmB")
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",9,"ThrowNapalmA")
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",8,"ThrowNapalm9")
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",7,"ThrowNapalm8")
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",6,"ThrowNapalm7")
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",5,"ThrowNapalm6")
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",4,"ThrowNapalm5")
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",3,"ThrowNapalm4")
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",2,"ThrowNapalm3")
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",1,"ThrowNapalm2")
	ThrowNapalm1:
		R013 J 0 A_FireCustomMissile("ThrownNapalmGrenade1",0,1,8,0)
		Goto EndThrow
	ThrowNapalm2:
		R013 J 0 A_FireCustomMissile("ThrownNapalmGrenade2",0,1,8,0)
		Goto EndThrow
	ThrowNapalm3:
		R013 J 0 A_FireCustomMissile("ThrownNapalmGrenade3",0,1,8,0)
		Goto EndThrow
	ThrowNapalm4:
		R013 J 0 A_FireCustomMissile("ThrownNapalmGrenade4",0,1,8,0)
		Goto EndThrow
	ThrowNapalm5:
		R013 J 0 A_FireCustomMissile("ThrownNapalmGrenade5",0,1,8,0)
		Goto EndThrow
	ThrowNapalm6:
		R013 J 0 A_FireCustomMissile("ThrownNapalmGrenade6",0,1,8,0)
		Goto EndThrow
	ThrowNapalm7:
		R013 J 0 A_FireCustomMissile("ThrownNapalmGrenade7",0,1,8,0)
		Goto EndThrow
	ThrowNapalm8:
		R013 J 0 A_FireCustomMissile("ThrownNapalmGrenade8",0,1,8,0)
		Goto EndThrow
	ThrowNapalm9:
		R013 J 0 A_FireCustomMissile("ThrownNapalmGrenade9",0,1,8,0)
		Goto EndThrow
	ThrowNapalmA:
		R013 J 0 A_FireCustomMissile("ThrownNapalmGrenadeA",0,1,8,0)
		Goto EndThrow
	ThrowNapalmB:
		R013 J 0 A_FireCustomMissile("ThrownNapalmGrenadeB",0,1,8,0)
		Goto EndThrow
	ThrowNapalmC:
		R013 J 0 A_FireCustomMissile("ThrownNapalmGrenadeC",0,1,8,0)
		Goto EndThrow
	ThrowNapalmD:
		R013 J 0 A_FireCustomMissile("ThrownNapalmGrenadeD",0,1,8,0)
		Goto EndThrow
	ThrowNapalmE:
		R013 J 0 A_FireCustomMissile("ThrownNapalmGrenadeE",0,1,8,0)
		Goto EndThrow
	ThrowNapalmF:
		R013 J 0 A_FireCustomMissile("ThrownNapalmGrenadeF",0,1,8,0)
		Goto EndThrow
	ThrowNapalmG:
		R013 J 0 A_FireCustomMissile("ThrownNapalmGrenadeG",0,1,8,0)
		Goto EndThrow		
	EndThrow:
		R013 J 0 A_TakeInventory("TNTThrowForce",999999)
		R013 JKLMNOPQ 1
		TNT1 A 10
		R013 XWVUTS 1
		Goto Ready
	Flash:
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",16,32)
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",15,30)
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",14,28)
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",13,26)
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",12,24)
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",11,22)
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",10,20)
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",9,18)
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",8,16)
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",7,14)
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",6,12)
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",5,10)
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",4,8)
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",3,6)
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",2,4)
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",1,2)
		TNT1 A 0
		Stop
		DYNG A 2 Bright
		Loop
		DYNG B 2 Bright
		Loop
		DYNG C 2 Bright
		Loop
		DYNG D 2 Bright
		Loop
		DYNG E 2 Bright
		Loop
		DYNG F 2 Bright
		Loop
		DYNG G 2 Bright
		Loop
		DYNG H 2 Bright
		Loop
		DYNG I 2 Bright
		Loop
		DYNG J 2 Bright
		Loop
		DYNG K 2 Bright
		Loop
		DYNG L 2 Bright
		Loop
		DYNG M 2 Bright
		Loop
		DYNG N 2 Bright
		Loop
		DYNG O 2 Bright
		Loop
		DYNG P 2 Bright
		Loop
	}
}

Actor HandGrenadeExplosionSmoke
{
	Projectile
	+NOCLIP
	+NOGRAVITY
	Height 6
	Radius 8
	Mass 1
	Speed 0
	Renderstyle Add
	Scale 1.2
	States
	{
	Spawn:
		PUF5 ABCDEFGHIJKLMNOP 2 A_FadeOut(0.04)
		Wait
	}
}

Actor HandGrenadeBitWeak
{
	PROJECTILE
	-NOGRAVITY
	+STRIFEDAMAGE
	+ROCKETTRAIL
	+DOOMBOUNCE 
	+CANBOUNCEWATER
	+DONTSPLASH
	+RIPPER	RipperLevel 1
	+FORCERADIUSDMG
	+NODAMAGETHRUST
	+BLOODLESSIMPACT
	Mass 5
	Radius 8
	Height 12
	Speed 10
	Damage (random(1,2))
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 ThrustThingZ(0,random(20,30),0,1)
		WRBL P 1 Bright A_Explode(random(1,2),8)
		Goto Spawn+2
	Death:
		WRBL PPPPPPPP 5 Bright
		Stop
	}
}

Actor HandGrenadeBitWeak2 : HandGrenadeBitWeak { Speed 15 }

Actor HandGrenadeBitWeak3 : HandGrenadeBitWeak { Speed 20 }

Actor ThrownGrenade1
{
	PROJECTILE
	-NOGRAVITY
	+CANBOUNCEWATER
	+FORCERADIUSDMG
	+EXTREMEDEATH
	Radius 5
	Height 5
	Speed 6
	Damage 10
	BounceType "Hexen"
	BounceFactor 0.6
	BounceCount 6
	BounceSound "postal2/weapons/grenade_bounce_lowvol"
	Scale 0.25
	Gravity 0.65
	States
	{
	Spawn:
		TNT1 A 0 
		TNT1 A 0 ThrustThingZ(0,random(10,12),0,1)
		TNT1 A 0 A_AlertMonsters
		HGN1 ABCDEF 2
		Goto Spawn+3
	Death:
		TNT1 A 0 A_PlaySound("reilsss/weapons/handGrenadeexplosion1")
		EXP3 A 1 Bright A_Explode(250,140,1)
		EXP3 AAAAAAA 0 A_CustomMissile("HandGrenadeBitWeak", 8, 0, random(0,359))
		EXP3 AAAAAAA 0 A_CustomMissile("HandGrenadeBitWeak2", 8, 0, random(0,359))
		EXP3 AAAAAAA 0 A_CustomMissile("HandGrenadeBitWeak3", 8, 0, random(0,359))
		TNT1 A 10 A_SpawnItemEx("NewExplosionMedium",0,0,0,0,0,0,0)
		Stop
	}
}

Actor ThrownGrenade2 : ThrownGrenade1 { Speed 7 }

Actor ThrownGrenade3 : ThrownGrenade1 { Speed 9 }

Actor ThrownGrenade4 : ThrownGrenade1
{
	Speed 10
	States
	{
	Spawn:
		TNT1 A 0 
		TNT1 A 0 ThrustThingZ(0,random(12,14),0,1)
		TNT1 A 0 A_AlertMonsters
		HGN1 ABCDEF 2
		Goto Spawn+3
	}
}

Actor ThrownGrenade5 : ThrownGrenade4 { Speed 12 }

Actor ThrownGrenade6 : ThrownGrenade4 { Speed 13 }

Actor ThrownGrenade7 : ThrownGrenade4
{
	Speed 15
	States
	{
	Spawn:
		TNT1 A 0 
		TNT1 A 0 ThrustThingZ(0,random(14,16),0,1)
		TNT1 A 0 A_AlertMonsters
		HGN1 ABCDEF 2
		Goto Spawn+3
	}
}

Actor ThrownGrenade8 : ThrownGrenade7 { Speed 16 }

Actor ThrownGrenade9 : ThrownGrenade7 { Speed 18 }

Actor ThrownGrenadeA : ThrownGrenade7
{
	Speed 19
	States
	{
	Spawn:
		TNT1 A 0 
		TNT1 A 0 ThrustThingZ(0,random(16,18),0,1)
		TNT1 A 0 A_AlertMonsters
		HGN1 ABCDEF 2
		Goto Spawn+3
	}
}

Actor ThrownGrenadeB : ThrownGrenadeA { Speed 21 }

Actor ThrownGrenadeC : ThrownGrenadeA { Speed 22 }

Actor ThrownGrenadeD : ThrownGrenadeA
{
	Speed 24
	States
	{
	Spawn:
		TNT1 A 0 
		TNT1 A 0 ThrustThingZ(0,random(18,20),0,1)
		TNT1 A 0 A_AlertMonsters
		HGN1 ABCDEF 2
		Goto Spawn+3
	}
}

Actor ThrownGrenadeE : ThrownGrenadeD { Speed 25 }

Actor ThrownGrenadeF : ThrownGrenadeD { Speed 27 }

Actor ThrownGrenadeG : ThrownGrenadeD { Speed 28 }

Actor GrenadeNapalm : HereticImpBall
{
	-NOGRAVITY
	+ROCKETTRAIL
	+RIPPER	RipperLevel 1
	+FIREDAMAGE
	Speed 7
	Radius 2
	Height 2
	Damage (1)
	+BLOODLESSIMPACT
	Scale 0.75
	States
	{
	Spawn:
		FX10 ABC 6 Bright
		Loop
	Death:
		TNT1 A 1 A_SpawnItemEx("NapalmGrenadeFire",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION,0)
		Stop
	}
}

Actor NapalmGrenadeFire
{
	var int user_count;
	Radius 8
	Height 40
	PROJECTILE
	DamageType Fire
	DONTHURTSHOOTER
	-NOGRAVITY
	+LOWGRAVITY
	+NOEXPLODEFLOOR
	+NODAMAGETHRUST
	+THRUGHOST
	+DONTSPLASH
	+FORCERADIUSDMG
	+PAINLESS
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 Bright A_Playsound("weapons/onfire",6,0.6,1)
		TNT1 A 0 A_Jump(220,2)
		TNT1 A 0 A_ChangeFlag("PAINLESS",1)	//some of the flames will make the actors enter pain state
	Looper:
		TNT1 A 3 Bright A_Explode(random(1,7),12)
		TNT1 A 0 A_SpawnItemEx("IncendiaryFlamelet1",random(-10,10),random(-10,10),random(0,15),0,0,frandom(0.2,1.8),0,SXF_NOCHECKPOSITION,128)
		TNT1 A 0 A_SetUserVar("user_count",user_count+1)
		TNT1 A 0 A_JumpIf(user_count>=12,"Ender")	//12*3 tics, 36 tics = aprox 1 second
		Loop
	Ender:
		TNT1 A 0 A_SetUserVar("user_count",0)
		TNT1 A 1 A_Jump(196,"Looper")
		TNT1 A 6
		Stop
	}
}

Actor ThrownNapalmGrenade1
{
	PROJECTILE
	-NOGRAVITY
	+CANBOUNCEWATER
	+FORCERADIUSDMG
	+EXTREMEDEATH
	Radius 5
	Height 5
	Speed 6
	Damage 10
	BounceType "Hexen"
	BounceFactor 0.6
	BounceCount 6
	BounceSound "postal2/weapons/grenade_bounce_lowvol"
	Scale 0.25
	Gravity 0.65
	States
	{
	Spawn:
		TNT1 A 0 
		TNT1 A 0 ThrustThingZ(0,random(10,12),0,1)
		TNT1 A 0 A_AlertMonsters
		HGN1 ABCDEF 2
		Goto Spawn+3
	Death:
		TNT1 A 0 A_PlaySound("reilsss/weapons/handGrenadeexplosion2")
		HGN1 A 1 A_Explode(80,80,1)
		TNT1 A 0 A_SpawnItemEx("NewExplosionMedium",0,0,0,0,0,0,0)
		TNT1 AAAAAAAAAAAAAAAAAAAAAAAA 0 A_SpawnItemEx("Q2RocketExtra",0,0,1,random(1,2),0,random(2,4),random(1,360),SXF_NOCHECKPOSITION,0)
		TNT1 AAAAAAAAAAAAAAAAAAAAAAAA 0 A_SpawnItemEx("GrenadeNapalm",0,0,0,random(1,3),0,random(8,12),random(1,360),SXF_NOCHECKPOSITION,0)
		Stop
	}
}

Actor ThrownNapalmGrenade2 : ThrownNapalmGrenade1 { Speed 7 }

Actor ThrownNapalmGrenade3 : ThrownNapalmGrenade1 { Speed 9 }

Actor ThrownNapalmGrenade4 : ThrownNapalmGrenade1
{
	Speed 10
	States
	{
	Spawn:
		TNT1 A 0 
		TNT1 A 0 ThrustThingZ(0,random(12,14),0,1)
		TNT1 A 0 A_AlertMonsters
		HGN1 ABCDEF 2
		Goto Spawn+3
	}
}

Actor ThrownNapalmGrenade5 : ThrownNapalmGrenade4 { Speed 12 }

Actor ThrownNapalmGrenade6 : ThrownNapalmGrenade4 { Speed 13 }

Actor ThrownNapalmGrenade7 : ThrownNapalmGrenade4
{
	Speed 15
	States
	{
	Spawn:
		TNT1 A 0 
		TNT1 A 0 ThrustThingZ(0,random(14,16),0,1)
		TNT1 A 0 A_AlertMonsters
		HGN1 ABCDEF 2
		Goto Spawn+3
	}
}

Actor ThrownNapalmGrenade8 : ThrownNapalmGrenade7 { Speed 16 }

Actor ThrownNapalmGrenade9 : ThrownNapalmGrenade7 { Speed 18 }

Actor ThrownNapalmGrenadeA : ThrownNapalmGrenade7
{
	Speed 19
	States
	{
	Spawn:
		TNT1 A 0 
		TNT1 A 0 ThrustThingZ(0,random(16,18),0,1)
		TNT1 A 0 A_AlertMonsters
		HGN1 ABCDEF 2
		Goto Spawn+3
	}
}

Actor ThrownNapalmGrenadeB : ThrownNapalmGrenadeA { Speed 21 }

Actor ThrownNapalmGrenadeC : ThrownNapalmGrenadeA { Speed 22 }

Actor ThrownNapalmGrenadeD : ThrownNapalmGrenadeA
{
	Speed 24
	States
	{
	Spawn:
		TNT1 A 0 
		TNT1 A 0 ThrustThingZ(0,random(18,20),0,1)
		TNT1 A 0 A_AlertMonsters
		HGN1 ABCDEF 2
		Goto Spawn+3
	}
}

Actor ThrownNapalmGrenadeE : ThrownNapalmGrenadeD { Speed 25 }

Actor ThrownNapalmGrenadeF : ThrownNapalmGrenadeD { Speed 27 }

Actor ThrownNapalmGrenadeG : ThrownNapalmGrenadeD { Speed 28 }

Actor HandGrenadeDrop : CustomInventory
{
	Inventory.MaxAmount 1
	States
	{
	Use:
		TNT1 A 0
		TNT1 A 0 A_SpawnItemEx("DroppedHandGrenade",0,0,32,8,0,0,0,SXF_NOCHECKPOSITION,0)
		Stop
	}
}

Actor DroppedHandGrenade
{
	Radius 16
	Height 20
	Scale 0.5
	States
	{
	Spawn:
		R013 Y 15
		TNT1 A 0 A_SpawnItemEx("AEoDHandGrenadeNoAmmo",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER,0)
		Stop
	}
}

Actor AEoDHandGrenadeNoAmmo : AEoDHandGrenadeItem
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL
	Scale 0.5
	Inventory.Amount 1
	Inventory.PickupMessage "You got a hand Grenade!"
	Inventory.PickupSound "misc/w_pkup"
	States
	{
	Spawn:
		R013 Y -1
		Loop
	Pickup:
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",1) <= 0,"Nothing")
		TNT1 A 0 A_JumpIfInventory("AEGrenade",1,"Ammo")
		TNT1 A 0 A_JumpIfInventory("AEoDHandGrenade",1,2)
		TNT1 A 0 A_GiveInventory("Weapon1Count",1)
		TNT1 A 0 A_GiveInventory("HandGrenadeDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDHandGrenade",1)
		TNT1 A 0 A_TakeInventory("AEGrenade",1)
		TNT1 A 0 	
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDHandGrenade",1,"Ammo")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		
		TNT1 A 0 ACS_NamedExecute("s798",0,1,1,0)
		Fail
	Ammo:
		TNT1 A 0 A_TakeInventory("AEGrenade",1)
		TNT1 A 0 A_JumpIfInventory("AEoDHandGrenade",1,2)
		TNT1 A 0 A_GiveInventory("Weapon1Count",1)
		TNT1 A 0 A_GiveInventory("HandGrenadeDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDHandGrenade",1)
		Stop
	}
}

//==================================================================================
//==================================================================================

//==================================================================================
//==================================================================================
Actor AEoDStickyMineItem : CustomInventory 6023
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL
	Scale 0.7
	Inventory.Amount 1
	Inventory.PickupMessage "You found some Sticky Mines!"
	Inventory.PickupSound "misc/w_pkup"
	States
	{
	Spawn:
		R014 F -1
		Loop
	Pickup:
		TNT1 A 0 A_JumpIfInventory("AEoDStickyMine",1,"Ammo")
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",1) <= 0,"Nothing")
		TNT1 A 0 A_GiveInventory("Weapon1Count",1)
		TNT1 A 0 A_GiveInventory("StickyMineDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDStickyMine",1)
		TNT1 A 0 	
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDStickyMine",1,"Ammo")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		
		TNT1 A 0 ACS_NamedExecute("s798",0,1,2,0)
		Fail
	Ammo:
		TNT1 A 0 A_GiveInventory("AEGrenade",8)
		Stop
	}
}

Actor AEoDStickyMine : Weapon // 6023
{
	+FLOORCLIP
	+WEAPON.NOALERT
	+INVENTORY.IGNORESKILL
	Weapon.AmmoType1 "AEGrenade"
	Weapon.AmmoGive1 8
	Weapon.AmmoUse1 1
	Weapon.SelectionOrder 28500
	Inventory.PickupMessage "You found some Sticky Mines!"
	Inventory.PickupSound "misc/w_pkup"
	weapon.upsound "weapons/draw"
	Tag "Sticky mine"
	Scale 0.7
	States
	{
	Spawn:
		R014 F -1
		Loop
	Deselect: 
		R014 B 1 A_Lower
		R014 BB 0 A_Lower
		Goto Deselect
	Select:
		"----" A 0 A_TakeInventory("TNTThrowForce",999999999) 
		R014 A 0 A_JumpIfInventory("StickyMineFireMode",1,"SelLoop")
		R014 B 0 
	SelLoop:
		"----" A 1 A_Raise
		"----" AA 0 A_Raise
		Loop
	Ready:
		TNT1 A 0 A_JumpIfInventory("StickyMineFireMode",1,"Ready2")
		R014 B 1 A_WeaponReady
		Goto Ready
	Ready2:
		TNT1 A 0 A_JumpIfInventory("StickyMineFireMode",1,1)
		Goto Ready
		R014 A 1 A_WeaponReady
		Goto Ready2
	Fire:
		TNT1 A 0 A_JumpIfNoAmmo("Ready")
		TNT1 A 0 A_JumpIfInventory("StickyMineFireMode",1,"Sticky")
	Mine:
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",1,"Hold")
		R014 GHII 2
		TNT1 A 0 A_GunFlash
	Hold:
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",16,2)
		TNT1 A 0 A_GiveInventory("TNTThrowForce",1)
		TNT1 A 2
		TNT1 A 0 A_Refire
		R013 I 2
		R013 J 0 A_PlayWeaponSound("reilsss/weapons/stickyminethrow")
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",16,"ThrowMineG")
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",15,"ThrowMineG")
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",14,"ThrowMineF")
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",13,"ThrowMineE")
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",12,"ThrowMineD")
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",11,"ThrowMineC")
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",10,"ThrowMineB")
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",9,"ThrowMineA")
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",8,"ThrowMine9")
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",7,"ThrowMine8")
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",6,"ThrowMine7")
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",5,"ThrowMine6")
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",4,"ThrowMine5")
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",3,"ThrowMine4")
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",2,"ThrowMine3")
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",1,"ThrowMine2")
		Goto ThrowMine1
	ThrowMine1:
		R013 J 0 A_FireCustomMissile("ThrownMine1",0,1,8,0)
		Goto EndThrow
	ThrowMine2:
		R013 J 0 A_FireCustomMissile("ThrownMine2",0,1,8,0)
		Goto EndThrow
	ThrowMine3:
		R013 J 0 A_FireCustomMissile("ThrownMine3",0,1,8,0)
		Goto EndThrow
	ThrowMine4:
		R013 J 0 A_FireCustomMissile("ThrownMine4",0,1,8,0)
		Goto EndThrow
	ThrowMine5:
		R013 J 0 A_FireCustomMissile("ThrownMine5",0,1,8,0)
		Goto EndThrow
	ThrowMine6:
		R013 J 0 A_FireCustomMissile("ThrownMine6",0,1,8,0)
		Goto EndThrow
	ThrowMine7:
		R013 J 0 A_FireCustomMissile("ThrownMine7",0,1,8,0)
		Goto EndThrow
	ThrowMine8:
		R013 J 0 A_FireCustomMissile("ThrownMine8",0,1,8,0)
		Goto EndThrow
	ThrowMine9:
		R013 J 0 A_FireCustomMissile("ThrownMine9",0,1,8,0)
		Goto EndThrow
	ThrowMineA:
		R013 J 0 A_FireCustomMissile("ThrownMineA",0,1,8,0)
		Goto EndThrow
	ThrowMineB:
		R013 J 0 A_FireCustomMissile("ThrownMineB",0,1,8,0)
		Goto EndThrow
	ThrowMineC:
		R013 J 0 A_FireCustomMissile("ThrownMineC",0,1,8,0)
		Goto EndThrow
	ThrowMineD:
		R013 J 0 A_FireCustomMissile("ThrownMineD",0,1,8,0)
		Goto EndThrow
	ThrowMineE:
		R013 J 0 A_FireCustomMissile("ThrownMineE",0,1,8,0)
		Goto EndThrow
	ThrowMineF:
		R013 J 0 A_FireCustomMissile("ThrownMineF",0,1,8,0)
		Goto EndThrow
	ThrowMineG:
		R013 J 0 A_FireCustomMissile("ThrownMineG",0,1,8,0)
		Goto EndThrow
	EndThrow:
		R013 J 0 A_TakeInventory("TNTThrowForce",999999)
		R013 JKLMNOPQ 1
		TNT1 A 10
		R014 NOP 2
		Goto Ready
	Sticky:
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",1,5)
		R014 JLMM 2
		TNT1 A 0 A_GunFlash
	StickyHold:
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",16,2)
		TNT1 A 0 A_GiveInventory("TNTThrowForce",1)
		TNT1 A 2
		TNT1 A 0 A_Refire("StickyHold")
		R013 I 2
		R013 J 0 A_PlayWeaponSound("reilsss/weapons/stickyminethrow")
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",16,"ThrowStickyG")
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",15,"ThrowStickyG")
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",14,"ThrowStickyF")
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",13,"ThrowStickyE")
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",12,"ThrowStickyD")
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",11,"ThrowStickyC")
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",10,"ThrowStickyB")
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",9,"ThrowStickyA")
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",8,"ThrowSticky9")
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",7,"ThrowSticky8")
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",6,"ThrowSticky7")
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",5,"ThrowSticky6")
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",4,"ThrowSticky5")
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",3,"ThrowSticky4")
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",2,"ThrowSticky3")
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",1,"ThrowSticky2")
	ThrowSticky1:
		R013 J 0 A_FireCustomMissile("ThrownSticky1",0,1,8,0)
		Goto EndThrow
	ThrowSticky2:
		R013 J 0 A_FireCustomMissile("ThrownSticky2",0,1,8,0)
		Goto EndThrow
	ThrowSticky3:
		R013 J 0 A_FireCustomMissile("ThrownSticky3",0,1,8,0)
		Goto EndThrow
	ThrowSticky4:
		R013 J 0 A_FireCustomMissile("ThrownSticky4",0,1,8,0)
		Goto EndThrow
	ThrowSticky5:
		R013 J 0 A_FireCustomMissile("ThrownSticky5",0,1,8,0)
		Goto EndThrow
	ThrowSticky6:
		R013 J 0 A_FireCustomMissile("ThrownSticky6",0,1,8,0)
		Goto EndThrow
	ThrowSticky7:
		R013 J 0 A_FireCustomMissile("ThrownSticky7",0,1,8,0)
		Goto EndThrow
	ThrowSticky8:
		R013 J 0 A_FireCustomMissile("ThrownSticky8",0,1,8,0)
		Goto EndThrow
	ThrowSticky9:
		R013 J 0 A_FireCustomMissile("ThrownSticky9",0,1,8,0)
		Goto EndThrow
	ThrowStickyA:
		R013 J 0 A_FireCustomMissile("ThrownStickyA",0,1,8,0)
		Goto EndThrow
	ThrowStickyB:
		R013 J 0 A_FireCustomMissile("ThrownStickyB",0,1,8,0)
		Goto EndThrow
	ThrowStickyC:
		R013 J 0 A_FireCustomMissile("ThrownStickyC",0,1,8,0)
		Goto EndThrow
	ThrowStickyD:
		R013 J 0 A_FireCustomMissile("ThrownStickyD",0,1,8,0)
		Goto EndThrow
	ThrowStickyE:
		R013 J 0 A_FireCustomMissile("ThrownStickyE",0,1,8,0)
		Goto EndThrow
	ThrowStickyF:
		R013 J 0 A_FireCustomMissile("ThrownStickyF",0,1,8,0)
		Goto EndThrow
	ThrowStickyG:
		R013 J 0 A_FireCustomMissile("ThrownStickyG",0,1,8,0)
		Goto EndThrow
	AltFire:
		BFGN E 0 A_JumpIfInventory("StickyMineFireMode",1,"AltFire2")	
	AltFire1:
		TNT1 A 0 A_GiveInventory("StickyMineFireMode",1)
		R014 B 8
		TNT1 A 0 A_PlaySound("reilsss/weapons/stickymineclick", CHAN_WEAPON, 1.0, 0)
		R014 A 8
		Goto Ready
	AltFire2:
		TNT1 A 0 A_TakeInventory("StickyMineFireMode",1) 
		TNT1 A 0 A_StopSound(6)
		R014 A 8
		TNT1 A 0 A_PlaySound("reilsss/weapons/stickymineclick", CHAN_WEAPON, 1.0, 0)
		R014 B 8
		Goto Ready
	Flash:
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",16,32)
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",15,30)
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",14,28)
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",13,26)
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",12,24)
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",11,22)
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",10,20)
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",9,18)
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",8,16)
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",7,14)
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",6,12)
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",5,10)
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",4,8)
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",3,6)
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",2,4)
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",1,2)
		TNT1 A 0
		Stop
		DYNG A 2 Bright
		Loop
		DYNG B 2 Bright
		Loop
		DYNG C 2 Bright
		Loop
		DYNG D 2 Bright
		Loop
		DYNG E 2 Bright
		Loop
		DYNG F 2 Bright
		Loop
		DYNG G 2 Bright
		Loop
		DYNG H 2 Bright
		Loop
		DYNG I 2 Bright
		Loop
		DYNG J 2 Bright
		Loop
		DYNG K 2 Bright
		Loop
		DYNG L 2 Bright
		Loop
		DYNG M 2 Bright
		Loop
		DYNG N 2 Bright
		Loop
		DYNG O 2 Bright
		Loop
		DYNG P 2 Bright
		Loop
	} 
}

Actor StickyMineFireMode : Inventory {}

Actor HandMineExplosionSmoke
{
	Projectile
	+NOCLIP
	+NOGRAVITY
	Height 6
	Radius 8
	Mass 1
	Speed 0
	Renderstyle Add
	Scale 1.2
	States
	{
	Spawn:
		PUF5 ABCDEFGHIJKLMNOP 2 A_FadeOut(0.04)
		Wait
	}
}

Actor ThrownMine1
{
	Projectile
	-NOGRAVITY
	+CANBOUNCEWATER
	+EXTREMEDEATH
	+FORCERADIUSDMG
	BounceType "Hexen"
	BounceFactor 0.6
	BounceCount 6
	Gravity 0.65
	Radius 5
	Height 5
	Speed 6
	Damage 15
	BounceSound "reilsss/weapons/handMinebounce"
	Scale 0.4
	States
	{
	Spawn:
		TNT1 A 0 NoDelay ThrustThingZ(0,random(10,12),0,1)
	S2:
		TNT1 A 0 A_AlertMonsters
	S3:
		R014 C 2
		Loop
	Death:
		TNT1 A 0 A_PlaySound("reilsss/weapons/stickymineexplode")
		EXP3 A 0 Bright A_Explode(250,140,1)
		TNT1 A 10 A_SpawnItemEx("NewExplosionMedium",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		Stop
	}
}


Actor ThrownMine2 : ThrownMine1 { Speed 7 }

Actor ThrownMine3 : ThrownMine1 { Speed 9 }

Actor ThrownMine4 : ThrownMine1
{
	Speed 10
	States
	{
	Spawn:
		TNT1 A 0 NoDelay ThrustThingZ(0,random(12,14),0,1)
		Goto "Super::S2"
	}
}

Actor ThrownMine5 : ThrownMine1 { Speed 12 }

Actor ThrownMine6 : ThrownMine1 { Speed 13 }

Actor ThrownMine7 : ThrownMine1
{
	Speed 15
	States
	{
	Spawn:
		TNT1 A 0 NoDelay ThrustThingZ(0,random(14,16),0,1)
		Goto "Super::S2"
	}
}

Actor ThrownMine8 : ThrownMine1 { Speed 16 }

Actor ThrownMine9 : ThrownMine1 { Speed 18 }

Actor ThrownMineA : ThrownMine1
{
	Speed 19
	States
	{
	Spawn:
		TNT1 A 0 NoDelay ThrustThingZ(0,random(16,18),0,1)
		Goto "Super::S2"
	}
}

Actor ThrownMineB : ThrownMine1 { Speed 21 }

Actor ThrownMineC : ThrownMine1 { Speed 22 }

Actor ThrownMineD : ThrownMine1
{
	Speed 24
	States
	{
	Spawn:
		TNT1 A 0 NoDelay ThrustThingZ(0,random(18,20),0,1)
		R014 C 2 
		Goto Spawn+2
	}
}

Actor ThrownMineE : ThrownMine1 { Speed 25 }

Actor ThrownMineF : ThrownMine1 { Speed 27 }

Actor ThrownMineG : ThrownMine1 { Speed 28 }

Actor ThrownSticky1
{
	Projectile
	+Shootable //So alt fire works.
	//+SeekerMissile //So A_Fire works.
	+HITTRACER
	+DontSplash
	+ForceRadiusDmg
	+EXTREMEDEATH
	+DontFall //Stops it from falling after sticking to targets.
	-NOGRAVITY
	Gravity 0.65
	Health 1
	Radius 5
	Height 5
	Speed 6
	Damage 0
	RenderStyle Translucent
	Scale 0.4
	States
	{
	Spawn:
		TNT1 A 0 NoDelay ThrustThingZ(0,random(10,12),0,1)
	S2:
		TNT1 A 0 A_AlertMonsters
	S3:
		R014 DE 2
		Loop
	Death:
		R014 D 0 A_ChangeFlag("THRUACTORS",1)
		R014 D 0 A_NoGravity
		R014 D 60
		TNT1 A 0 A_PlaySound("reilsss/weapons/stickymineexplode")
		TNT1 A 0 Bright A_Explode(250,140,1)
		TNT1 A 10 A_SpawnItemEx("NewExplosionMedium",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		Stop
	Stickening:
		R014 DDDDDDDDDDDDDDDDDDDDDDDDDDDDDD 1 Bright A_Warp(AAPTR_TRACER,0,0,32,0,WARPF_COPYINTERPOLATION|WARPF_NOCHECKPOSITION)
		R014 DDDDDDDDDDDDDDDDDDDDDDDDDDDDDD 1 Bright A_Warp(AAPTR_TRACER,0,0,32,0,WARPF_COPYINTERPOLATION|WARPF_NOCHECKPOSITION)
		Goto Explode
	XDeath:
		TNT1 A 0 A_ChangeFlag("THRUACTORS",1)
		TNT1 A 0 A_Stop		
		TNT1 A 0 A_NoGravity
		Goto Stickening
	Explode:
		TNT1 A 0 A_PlaySound("reilsss/weapons/stickymineexplode")
		TNT1 A 0 Bright A_Explode(250,140,1)
		TNT1 A 10 A_SpawnItemEx("NewExplosionMedium",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		Stop
	}
}

Actor ThrownSticky2 : ThrownSticky1 { Speed 7 }

Actor ThrownSticky3 : ThrownSticky1 { Speed 9 }

Actor ThrownSticky4 : ThrownSticky1
{
	Speed 10
	States
	{
	Spawn:
		TNT1 A 0 NoDelay ThrustThingZ(0,random(12,14),0,1)
		Goto "Super::S2"
	}
}

Actor ThrownSticky5 : ThrownSticky1 { Speed 12 }

Actor ThrownSticky6 : ThrownSticky1 { Speed 13 }

Actor ThrownSticky7 : ThrownSticky1
{
	Speed 15
	States
	{
	Spawn:
		TNT1 A 0 ThrustThingZ(0,random(14,16),0,1)
		Goto "Super::S2"
	}
}

Actor ThrownSticky8 : ThrownSticky1 { Speed 16 }

Actor ThrownSticky9 : ThrownSticky1 { Speed 18 }

Actor ThrownStickyA : ThrownSticky1
{
	Speed 19
	States
	{
	Spawn:
		TNT1 A 0 NoDelay ThrustThingZ(0,random(16,18),0,1)
		Goto "Super::S2"
	}
}

Actor ThrownStickyB : ThrownSticky1 { Speed 21 }

Actor ThrownStickyC : ThrownSticky1 { Speed 22 }

Actor ThrownStickyD : ThrownSticky1
{
	Speed 24
	States
	{
	Spawn:
		TNT1 A 0 NoDelay ThrustThingZ(0,random(18,20),0,1)
		Goto "Super::S2"
	}
}

Actor ThrownStickyE : ThrownSticky1 { Speed 25 }

Actor ThrownStickyF : ThrownSticky1 { Speed 27 }

Actor ThrownStickyG : ThrownSticky1 { Speed 28 }

Actor StickyMineDrop : CustomInventory
{
	Inventory.MaxAmount 1
	States
	{
	Use:
		TNT1 A 0
		TNT1 A 0 A_StopSound(6)
		TNT1 A 0 A_SpawnItemEx("DroppedStickyMine",0,0,32,8,0,0,0,SXF_NOCHECKPOSITION,0)
		Stop
	}
}

Actor DroppedStickyMine
{
	Radius 16
	Height 20
	Scale 0.7
	States
	{
	Spawn:
		R014 F 15
		TNT1 A 0 A_SpawnItemEx("AEoDStickyMineNoAmmo",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER,0)
		Stop
	}
}

Actor AEoDStickyMineNoAmmo : AEoDStickyMineItem
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL
	Scale 0.7
	Inventory.Amount 1
	Inventory.PickupMessage "You found some Sticky Mines!"
	Inventory.PickupSound "misc/w_pkup"
	States
	{
	Spawn:
		R014 F -1
		Loop
	Pickup:
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",1) <= 0,"Nothing")
		TNT1 A 0 A_JumpIfInventory("AEGrenade",8,"Ammo")
		TNT1 A 0 A_JumpIfInventory("AEoDStickyMine",1,2)
		TNT1 A 0 A_GiveInventory("Weapon1Count",1)
		TNT1 A 0 A_GiveInventory("StickyMineDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDStickyMine",1)
		TNT1 A 0 A_TakeInventory("AEGrenade",8)
		TNT1 A 0 	
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDStickyMine",1,"Ammo")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		
		TNT1 A 0 ACS_NamedExecute("s798",0,1,2,0)
		Fail
	Ammo:
		TNT1 A 0 A_TakeInventory("AEGrenade",8)
		TNT1 A 0 A_JumpIfInventory("AEoDStickyMine",1,2)
		TNT1 A 0 A_GiveInventory("Weapon1Count",1)
		TNT1 A 0 A_GiveInventory("StickyMineDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDStickyMine",1)
		Stop
	}
}

//==================================================================================
//==================================================================================

//==================================================================================
//==================================================================================

// [Ms] This weapon has very bad energy in it. 
// Rename "BoneStaff" items to "NecromanticBoneStaff" to prevent future corruption.

Actor AEoDBoneStaffItem : CustomInventory 6035
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL
	Scale 0.5
	Inventory.Amount 1
	Inventory.PickupMessage "You found the Necromantic Bone Staff!"
	Inventory.PickupSound "pickuppiece"
	States
	{
	Spawn:
		NBSP A -1
		Loop
	Pickup:
		TNT1 A 0 A_JumpIfInventory("AEoDBoneStaff",1,"Ammo")
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",1) <= 0,"Nothing")
		TNT1 A 0 A_GiveInventory("Weapon1Count",1)
		TNT1 A 0 A_GiveInventory("BoneStaffDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDBoneStaff",1)
		TNT1 A 0 	
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDBoneStaff",1,"Ammo")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		
		TNT1 A 0 ACS_NamedExecute("s798",0,1,8,0)
		Fail
	Ammo:
		TNT1 A 0 A_GiveInventory("AEoDBoneStaff",1)
		Stop
	}
}

Actor AEoDBoneStaff : Weapon // 6035
{
	+FLOORCLIP
	+WEAPON.CHEATNOTWEAPON
	+INVENTORY.IGNORESKILL
	Weapon.AmmoType1 "DarkMana"
	Weapon.AmmoType2 "DarkMana"
	Weapon.AmmoGive1 6
	Weapon.AmmoUse1 1
	Weapon.AmmoUse2 2
	Weapon.SelectionOrder 31337	// I totally mean it.
	Inventory.PickupMessage "You found the Necromantic Bone Staff!"
	Inventory.PickupSound "pickuppiece"
	Weapon.UpSound "weapons/draw"
	Tag "Necromantic Bone Staff"
	Scale 0.5
	States 
	{ 
	Spawn: 
		NBSP A -1 
		Loop
	Ready: 
		NBSR A 1 A_WeaponReady 
		Loop
	Deselect: 
		TNT1 A 0 	
		NBSR A 1 A_Lower 
		TNT1 AA 0 A_Lower
		Loop
	Select: 
		TNT1 A 0 	
		NBSR A 1 A_Raise 
		TNT1 AA 0 A_Raise
		Loop 
	Fire: 
		NBSR A 0 A_JumpIfNoAmmo(1) 
		NBSR ABCD 2 
		NBSR E 0 A_SetBlend("03 00 00",0.25,30)
		NBSR E 2 A_PlaySound("weapons/vilesht2", CHAN_WEAPON, 1.0, 0)
		NBSR F 10 A_FireCustomMissile("Vilefake2", 0, 1, 0, 0) 
		NBSR EDCBA 2
		Goto Ready 
	AltFire: 
		NBSR ABCDE 2
		NBSR E 0 A_JumpIfNoAmmo(1)
		NBSR E 0 A_SetBlend("Black",0.75,30)
		NBSR E 0 A_Playsound("bonestaff/altfire")
		TNT1 A 0 A_FireCustomMissile("AmmoUser",0,1,0,0)
		TNT1 A 0 A_SpawnItemEx("BoneStaffDarkness",0,0,32,20,0,0,0,SXF_NOCHECKPOSITION,0)
		TNT1 A 0 A_SpawnItemEx("BoneStaffDarkness",0,0,32,20,0,0,5,SXF_NOCHECKPOSITION,0)
		TNT1 A 0 A_SpawnItemEx("BoneStaffDarkness",0,0,32,20,0,0,10,SXF_NOCHECKPOSITION,0)
		TNT1 A 0 A_SpawnItemEx("BoneStaffDarkness",0,0,32,20,0,0,15,SXF_NOCHECKPOSITION,0)
		TNT1 A 0 A_SpawnItemEx("BoneStaffDarkness",0,0,32,20,0,0,20,SXF_NOCHECKPOSITION,0)
		TNT1 A 0 A_SpawnItemEx("BoneStaffDarkness",0,0,32,20,0,0,25,SXF_NOCHECKPOSITION,0)
		TNT1 A 0 A_SpawnItemEx("BoneStaffDarkness",0,0,32,20,0,0,30,SXF_NOCHECKPOSITION,0)
		TNT1 A 0 A_SpawnItemEx("BoneStaffDarkness",0,0,32,20,0,0,35,SXF_NOCHECKPOSITION,0)
		TNT1 A 0 A_SpawnItemEx("BoneStaffDarkness",0,0,32,20,0,0,40,SXF_NOCHECKPOSITION,0)
		TNT1 A 0 A_SpawnItemEx("BoneStaffDarkness",0,0,32,20,0,0,45,SXF_NOCHECKPOSITION,0)
		TNT1 A 0 A_SpawnItemEx("BoneStaffDarkness",0,0,32,20,0,0,50,SXF_NOCHECKPOSITION,0)
		TNT1 A 0 A_SpawnItemEx("BoneStaffDarkness",0,0,32,20,0,0,55,SXF_NOCHECKPOSITION,0)
		TNT1 A 0 A_SpawnItemEx("BoneStaffDarkness",0,0,32,20,0,0,60,SXF_NOCHECKPOSITION,0)
		TNT1 A 0 A_SpawnItemEx("BoneStaffDarkness",0,0,32,20,0,0,65,SXF_NOCHECKPOSITION,0)
		TNT1 A 0 A_SpawnItemEx("BoneStaffDarkness",0,0,32,20,0,0,70,SXF_NOCHECKPOSITION,0)
		TNT1 A 0 A_SpawnItemEx("BoneStaffDarkness",0,0,32,20,0,0,75,SXF_NOCHECKPOSITION,0)
		TNT1 A 0 A_SpawnItemEx("BoneStaffDarkness",0,0,32,20,0,0,80,SXF_NOCHECKPOSITION,0)
		TNT1 A 0 A_SpawnItemEx("BoneStaffDarkness",0,0,32,20,0,0,85,SXF_NOCHECKPOSITION,0)
		TNT1 A 0 A_SpawnItemEx("BoneStaffDarkness",0,0,32,20,0,0,90,SXF_NOCHECKPOSITION,0)
		TNT1 A 0 A_SpawnItemEx("BoneStaffDarkness",0,0,32,20,0,0,95,SXF_NOCHECKPOSITION,0)
		TNT1 A 0 A_SpawnItemEx("BoneStaffDarkness",0,0,32,20,0,0,100,SXF_NOCHECKPOSITION,0)
		TNT1 A 0 A_SpawnItemEx("BoneStaffDarkness",0,0,32,20,0,0,105,SXF_NOCHECKPOSITION,0)
		TNT1 A 0 A_SpawnItemEx("BoneStaffDarkness",0,0,32,20,0,0,110,SXF_NOCHECKPOSITION,0)
		TNT1 A 0 A_SpawnItemEx("BoneStaffDarkness",0,0,32,20,0,0,115,SXF_NOCHECKPOSITION,0)
		TNT1 A 0 A_SpawnItemEx("BoneStaffDarkness",0,0,32,20,0,0,120,SXF_NOCHECKPOSITION,0)
		TNT1 A 0 A_SpawnItemEx("BoneStaffDarkness",0,0,32,20,0,0,125,SXF_NOCHECKPOSITION,0)
		TNT1 A 0 A_SpawnItemEx("BoneStaffDarkness",0,0,32,20,0,0,130,SXF_NOCHECKPOSITION,0)
		TNT1 A 0 A_SpawnItemEx("BoneStaffDarkness",0,0,32,20,0,0,135,SXF_NOCHECKPOSITION,0)
		TNT1 A 0 A_SpawnItemEx("BoneStaffDarkness",0,0,32,20,0,0,140,SXF_NOCHECKPOSITION,0)
		TNT1 A 0 A_SpawnItemEx("BoneStaffDarkness",0,0,32,20,0,0,145,SXF_NOCHECKPOSITION,0)
		TNT1 A 0 A_SpawnItemEx("BoneStaffDarkness",0,0,32,20,0,0,150,SXF_NOCHECKPOSITION,0)
		TNT1 A 0 A_SpawnItemEx("BoneStaffDarkness",0,0,32,20,0,0,155,SXF_NOCHECKPOSITION,0)
		TNT1 A 0 A_SpawnItemEx("BoneStaffDarkness",0,0,32,20,0,0,160,SXF_NOCHECKPOSITION,0)
		TNT1 A 0 A_SpawnItemEx("BoneStaffDarkness",0,0,32,20,0,0,165,SXF_NOCHECKPOSITION,0)
		TNT1 A 0 A_SpawnItemEx("BoneStaffDarkness",0,0,32,20,0,0,170,SXF_NOCHECKPOSITION,0)
		TNT1 A 0 A_SpawnItemEx("BoneStaffDarkness",0,0,32,20,0,0,175,SXF_NOCHECKPOSITION,0)
		TNT1 A 0 A_SpawnItemEx("BoneStaffDarkness",0,0,32,20,0,0,180,SXF_NOCHECKPOSITION,0)
		TNT1 A 0 A_SpawnItemEx("BoneStaffDarkness",0,0,32,20,0,0,185,SXF_NOCHECKPOSITION,0)
		TNT1 A 0 A_SpawnItemEx("BoneStaffDarkness",0,0,32,20,0,0,190,SXF_NOCHECKPOSITION,0)
		TNT1 A 0 A_SpawnItemEx("BoneStaffDarkness",0,0,32,20,0,0,195,SXF_NOCHECKPOSITION,0)
		TNT1 A 0 A_SpawnItemEx("BoneStaffDarkness",0,0,32,20,0,0,200,SXF_NOCHECKPOSITION,0)
		TNT1 A 0 A_SpawnItemEx("BoneStaffDarkness",0,0,32,20,0,0,205,SXF_NOCHECKPOSITION,0)
		TNT1 A 0 A_SpawnItemEx("BoneStaffDarkness",0,0,32,20,0,0,210,SXF_NOCHECKPOSITION,0)
		TNT1 A 0 A_SpawnItemEx("BoneStaffDarkness",0,0,32,20,0,0,215,SXF_NOCHECKPOSITION,0)
		TNT1 A 0 A_SpawnItemEx("BoneStaffDarkness",0,0,32,20,0,0,220,SXF_NOCHECKPOSITION,0)
		TNT1 A 0 A_SpawnItemEx("BoneStaffDarkness",0,0,32,20,0,0,225,SXF_NOCHECKPOSITION,0)
		TNT1 A 0 A_SpawnItemEx("BoneStaffDarkness",0,0,32,20,0,0,230,SXF_NOCHECKPOSITION,0)
		TNT1 A 0 A_SpawnItemEx("BoneStaffDarkness",0,0,32,20,0,0,235,SXF_NOCHECKPOSITION,0)
		TNT1 A 0 A_SpawnItemEx("BoneStaffDarkness",0,0,32,20,0,0,240,SXF_NOCHECKPOSITION,0)
		TNT1 A 0 A_SpawnItemEx("BoneStaffDarkness",0,0,32,20,0,0,245,SXF_NOCHECKPOSITION,0)
		TNT1 A 0 A_SpawnItemEx("BoneStaffDarkness",0,0,32,20,0,0,250,SXF_NOCHECKPOSITION,0)
		TNT1 A 0 A_SpawnItemEx("BoneStaffDarkness",0,0,32,20,0,0,255,SXF_NOCHECKPOSITION,0)
		TNT1 A 0 A_SpawnItemEx("BoneStaffDarkness",0,0,32,20,0,0,260,SXF_NOCHECKPOSITION,0)
		TNT1 A 0 A_SpawnItemEx("BoneStaffDarkness",0,0,32,20,0,0,265,SXF_NOCHECKPOSITION,0)
		TNT1 A 0 A_SpawnItemEx("BoneStaffDarkness",0,0,32,20,0,0,270,SXF_NOCHECKPOSITION,0)
		TNT1 A 0 A_SpawnItemEx("BoneStaffDarkness",0,0,32,20,0,0,275,SXF_NOCHECKPOSITION,0)
		TNT1 A 0 A_SpawnItemEx("BoneStaffDarkness",0,0,32,20,0,0,280,SXF_NOCHECKPOSITION,0)
		TNT1 A 0 A_SpawnItemEx("BoneStaffDarkness",0,0,32,20,0,0,285,SXF_NOCHECKPOSITION,0)
		TNT1 A 0 A_SpawnItemEx("BoneStaffDarkness",0,0,32,20,0,0,290,SXF_NOCHECKPOSITION,0)
		TNT1 A 0 A_SpawnItemEx("BoneStaffDarkness",0,0,32,20,0,0,295,SXF_NOCHECKPOSITION,0)
		TNT1 A 0 A_SpawnItemEx("BoneStaffDarkness",0,0,32,20,0,0,300,SXF_NOCHECKPOSITION,0)
		TNT1 A 0 A_SpawnItemEx("BoneStaffDarkness",0,0,32,20,0,0,305,SXF_NOCHECKPOSITION,0)
		TNT1 A 0 A_SpawnItemEx("BoneStaffDarkness",0,0,32,20,0,0,310,SXF_NOCHECKPOSITION,0)
		TNT1 A 0 A_SpawnItemEx("BoneStaffDarkness",0,0,32,20,0,0,315,SXF_NOCHECKPOSITION,0)
		TNT1 A 0 A_SpawnItemEx("BoneStaffDarkness",0,0,32,20,0,0,320,SXF_NOCHECKPOSITION,0)
		TNT1 A 0 A_SpawnItemEx("BoneStaffDarkness",0,0,32,20,0,0,325,SXF_NOCHECKPOSITION,0)
		TNT1 A 0 A_SpawnItemEx("BoneStaffDarkness",0,0,32,20,0,0,330,SXF_NOCHECKPOSITION,0)
		TNT1 A 0 A_SpawnItemEx("BoneStaffDarkness",0,0,32,20,0,0,335,SXF_NOCHECKPOSITION,0)
		TNT1 A 0 A_SpawnItemEx("BoneStaffDarkness",0,0,32,20,0,0,340,SXF_NOCHECKPOSITION,0)
		TNT1 A 0 A_SpawnItemEx("BoneStaffDarkness",0,0,32,20,0,0,345,SXF_NOCHECKPOSITION,0)
		TNT1 A 0 A_SpawnItemEx("BoneStaffDarkness",0,0,32,20,0,0,350,SXF_NOCHECKPOSITION,0)
		TNT1 A 0 A_SpawnItemEx("BoneStaffDarkness",0,0,32,20,0,0,355,SXF_NOCHECKPOSITION,0)
		NBSR F 25 
		NBSR EDCBA 2
		Goto Ready
	} 
}

Actor BoneStaffDarkness
{
	+RIPPER	RipperLevel 1
	+BLOODLESSIMPACT
	+DONTREFLECT
	PROJECTILE
	DamageType "Unholy"
	Translation "80:96=0:0"
	Mass 1
	Radius 8
	Height 6
	Speed 20
	Damage 5
	Scale 0.4
	States
	{
	Spawn:
		NOVA AABBCCDDEEFFGGHH 1 A_CustomMissile("BoneStaffDarknessTrail",0,0,0)
		Stop
	Death:
		TNT1 A 0
		Stop
	}
}

Actor BoneStaffDarknessTrail
{
	Projectile
	+NOINTERACTION
	Speed 0
	Translation "80:96=0:0"
	Scale 0.38
	States
	{
	Spawn:
		NOVA ABCDEFGH 2 A_FadeOut
		Wait
	}
}

Actor Vilefake2
{
	PROJECTILE
	+FRIENDLY
	+NOCLIP
	+DONTSPLASH
	+FORCERADIUSDMG
	Radius 50
	Height 5
	Speed 7
	RENDERSTYLE NONE
	States
	{
	Spawn:
		TNT1 A 0
		PLAY AAAAA 6 A_VileChase
		Stop
	Death:
		Play A 1
		Stop
	Heal:
		Play A 1
		Stop 
	}
}

Actor Vilefake
{
	PROJECTILE
	+FRIENDLY
	+DONTSPLASH
	+NOCLIP
	+FLOORHUGGER
	Speed 20
	Radius 50
	Height 5
	RENDERSTYLE NONE
	States
	{
	Spawn:
		PLAY AAAAAAAAAAAA 6 A_VileChase
		Stop
	Death:
		PLAY A 1
		Stop
	Heal:
		Play A 1
		Stop
	}
}

Actor BoneStaffDrop : CustomInventory
{
	Inventory.MaxAmount 1
	States
	{
	Use:
		TNT1 A 0
		TNT1 A 0 A_SpawnItemEx("DroppedBoneStaff",0,0,32,8,0,0,0,SXF_NOCHECKPOSITION,0)
		Stop
	}
}

Actor DroppedBoneStaff
{
	Radius 16
	Height 20
	Scale 0.5
	States
	{
	Spawn:
		NBSP A 15
		TNT1 A 0 A_SpawnItemEx("AEoDBoneStaffNoAmmo",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER,0)
		Stop
	}
}

Actor AEoDBoneStaffNoAmmo : AEoDBoneStaffItem
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL
	Scale 0.5
	Inventory.Amount 1
	Inventory.PickupMessage "You found the Necromantic Bone Staff!"
	Inventory.PickupSound "pickuppiece"
	States
	{
	Spawn:
		NBSP A -1
		Loop
	Pickup:
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",1) <= 0,"Nothing")
		TNT1 A 0 A_JumpIfInventory("DarkMana",6,"Ammo")
		TNT1 A 0 A_JumpIfInventory("AEoDBoneStaff",1,2)
		TNT1 A 0 A_GiveInventory("Weapon1Count",1)
		TNT1 A 0 A_GiveInventory("BoneStaffDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDBoneStaff",1)
		TNT1 A 0 A_TakeInventory("DarkMana",6)
		TNT1 A 0 	
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDBoneStaff",1,"Ammo")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		
		TNT1 A 0 ACS_NamedExecute("s798",0,1,8,0)
		Fail
	Ammo:
		TNT1 A 0 A_TakeInventory("DarkMana",6)
		TNT1 A 0 A_JumpIfInventory("AEoDBoneStaff",1,2)
		TNT1 A 0 A_GiveInventory("Weapon1Count",1)
		TNT1 A 0 A_GiveInventory("BoneStaffDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDBoneStaff",1)
		Stop
	}
}

//==================================================================================
//==================================================================================

//==================================================================================
//==================================================================================

Actor AEoDTNTBunnyItem : CustomInventory 6050
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL
	Inventory.Amount 1
	Inventory.PickupMessage "Run Bunny, Run!"
	Inventory.PickupSound "misc/w_pkup"
	States
	{
	Spawn:
		W008 H -1
		Loop
	Pickup:
		TNT1 A 0 A_JumpIfInventory("AEoDTNTBunny",1,"Ammo")
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",1) <= 0,"Nothing")
		TNT1 A 0 A_GiveInventory("Weapon1Count",1)
		TNT1 A 0 A_GiveInventory("TNTBunnyDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDTNTBunny",1)
		TNT1 A 0 	
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDTNTBunny",1,"Ammo")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		
		TNT1 A 0 ACS_NamedExecute("s798",0,1,161,0)
		Fail
	Ammo:
		TNT1 A 0 A_GiveInventory("BunnyAmmo",1)
		Stop
	}
}

Actor AEoDTNTBunny : Weapon // 6050
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL
	Weapon.AmmoType1 "BunnyAmmo"
	Weapon.AmmoType2 "BunnyAmmo"
	Weapon.AmmoGive1 1
	Weapon.AmmoUse1 1
	Weapon.AmmoUse2 1
	Weapon.SelectionOrder 31666
	+WEAPON.NOALERT
	Inventory.PickupMessage "Run Bunny, Run!"
	Inventory.PickupSound "misc/w_pkup"
	weapon.upsound "weapons/draw"
	Tag "Explosive Bunnies"
	States
	{
	Spawn:
		W008 H -1
		Loop
	Ready:
		W008 A 0 A_CheckReload
		W008 A 0 A_Jump(16,11) 
		W008 A 75 A_WeaponReady
		W008 BCB 5 A_WeaponReady
		W008 A 200 A_WeaponReady
		W008 BCBCB 5 A_WeaponReady
		Loop
		W008 A 100 A_WeaponReady
		W008 B 5 A_WeaponReady
		W008 C 450 A_WeaponReady
		W008 B 5 A_WeaponReady
		Loop
	Deselect:
		TNT1 A 0 	
		W008 A 1 A_Lower
		TNT1 AA 0 A_Lower
		Loop
	Select:
		TNT1 A 0 	
		W008 A 1 A_Raise
		TNT1 AA 0 A_Raise
		Loop
	Fire:
		W008 DEF 5
		W008 G 10 A_FireCustomMissile("BunnyEgg",0,1,0,0)
		Goto Ready
	AltFire:
		TNT1 A 0 A_JumpIfInventory("BunnyAmmo",2,"AltSuccess")
		Goto Fire
	AltSuccess:
		W008 DEF 5 
		TNT1 A 0 A_TakeInventory("BunnyAmmo",1)
		W008 G 10 A_FireCustomMissile("BunnyEgg2",0,1,0,0)
		Goto Ready
	}
}

Actor BunnyEgg
{
	+FLOORHUGGER
	Speed 5
	Radius 15
	Damage 0
	DeathSound NONE
	RENDERSTYLE NONE
	States
	{
	Spawn:
		PLSS A 0
		PLSS A 1 A_SpawnItem("Bunny",1,0,0)
		Stop
	Death:
		PLSS A 1
		Stop
	}
}

Actor BunnyEgg2 : BunnyEgg
{
	Speed 15
	States
	{
	Spawn:
		PLSS A 0
		PLSS A 1 A_SpawnItem("NapalmBunny",1,0,0)
		Stop
	Death:
		PLSS A 1
		Stop
	}
}

Actor Bunny
{
	+FRIENDLY
	+LOOKALLAROUND
	+NOBLOCKMONST
	+EXTREMEDEATH
	+FORCERADIUSDMG
	+FLOORCLIP
	Mass 30
	Damage 20
	Radius 10
	Height 20
	Speed 12
	States
	{
	Spawn:
		BUNN AAAA 2 A_Look
		Loop
	See:
		BUNN AABB 2 A_Chase
		BUNN B 0 A_JumpIfInventory("BunnyLimit",800,"Death")
		BUNN B 0 A_GiveInventory("BunnyLimit",1)
		BUNN CCDD 2 A_Chase
		BUNN B 0 A_JumpIfInventory("BunnyLimit",800,"Death")
		BUNN B 0 A_GiveInventory("BunnyLimit",1)
		Loop
	Melee:
		BUNN A 0 Bright A_UnsetShootable
		BUNN A 0 Bright 
		BUNN A 0 Bright A_SetShootable
		BUNN A 0 Bright A_Die
		Wait
	Death:
		TNT1 A 0 A_AlertMonsters
		EXPL A 0 A_Die
		TNT1 A 0 A_PlaySound("weapons/rockexplo")
		TNT1 AAAAA 0 A_TossGib
		TNT1 A 0 A_SpawnItemEx("NewExplosionMedium",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		TNT1 A 2 Bright A_Explode(random(400,900),96,1)
		TNT1 A 2 Bright A_Fall
		Stop
	}
}

Actor NapalmBunny : Bunny
{
	States
	{
	Death:
		EXPL A 0 A_Die
		TNT1 A 0 A_PlaySound("weapons/rockexplo")
		TNT1 AAAAA 0 A_TossGib
		TNT1 A 0 A_SpawnItemEx("NewExplosionMedium",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		TNT1 AAAAAAAAAAAAAAAAAAAAAAAA 0 A_SpawnItemEx("Napalm",0,0,0,random(1,3),0,random(8,12),random(1,360),SXF_NOCHECKPOSITION,0)
		TNT1 A 0 Bright A_Explode(512,96,1)
		TNT1 A 10 Bright A_Fall
		Stop
	}
}

Actor BunnyLimit : Inventory { Inventory.MaxAmount 800 }

Actor TNTBunnyDrop : CustomInventory
{
	Inventory.MaxAmount 1
	States
	{
	Use:
		TNT1 A 0
		TNT1 A 0 A_SpawnItemEx("DroppedTNTBunny",0,0,32,8,0,0,0,SXF_NOCHECKPOSITION,0)
		Stop
	}
}

Actor DroppedTNTBunny
{
	Radius 16
	Height 20
	States
	{
	Spawn:
		W008 H 15
		TNT1 A 0 A_SpawnItemEx("AEoDTNTBunnyNoAmmo",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER,0)
		Stop
	}
}

Actor AEoDTNTBunnyNoAmmo : AEoDTNTBunnyItem
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL
	Inventory.Amount 1
	Inventory.PickupMessage "Run Bunny, Run!"
	Inventory.PickupSound "misc/w_pkup"
	States
	{
	Spawn:
		W008 H -1
		Loop
	Pickup:
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",1) <= 0,"Nothing")
		TNT1 A 0 A_JumpIfInventory("BunnyAmmo",1,"Ammo")
		TNT1 A 0 A_JumpIfInventory("AEoDTNTBunny",1,2)
		TNT1 A 0 A_GiveInventory("Weapon1Count",1)
		TNT1 A 0 A_GiveInventory("TNTBunnyDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDTNTBunny",1)
		TNT1 A 0 A_TakeInventory("BunnyAmmo",1)
		TNT1 A 0 	
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDTNTBunny",1,"Ammo")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		
		TNT1 A 0 ACS_NamedExecute("s798",0,1,161,0)
		Fail
	Ammo:
		TNT1 A 0 A_TakeInventory("BunnyAmmo",1)
		TNT1 A 0 A_JumpIfInventory("AEoDTNTBunny",1,2)
		TNT1 A 0 A_GiveInventory("Weapon1Count",1)
		TNT1 A 0 A_GiveInventory("TNTBunnyDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDTNTBunny",1)
		Stop
	}
}

//==================================================================================
//==================================================================================

//==================================================================================
//==================================================================================

Actor AEoDTNTItem : CustomInventory 6121
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL
	Scale 0.15
	Inventory.Amount 1
	Inventory.PickupSound "BloodShotgun/Pickup"
	Inventory.PickupMessage "Picked up the Zippo lighter."
	States
	{
	Spawn:
		ZIPL A -1
		Loop
	Pickup:
		TNT1 A 0 A_JumpIfInventory("AEoDTNT",1,"Ammo")
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",1) <= 0,"Nothing")
		TNT1 A 0 A_GiveInventory("Weapon1Count",1)
		TNT1 A 0 A_GiveInventory("TNTDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDTNT",1)
		TNT1 A 0 	
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDTNT",1,"Ammo")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		
		TNT1 A 0 ACS_NamedExecute("s798",0,1,6,0)
		Fail
	Ammo:
		TNT1 A 0 A_GiveInventory("AEGrenade",1)
		Stop
	}
}

// [MC] I overhauled the code on this weapon big time. Cleaned it right the
// fuck out. Lets keep it this way. There's no reason to be going through
// what feels like an encyclopedia lengthed piece of code because someone
// didn't know what state jumps are for, let along how much easier it is to
// jump to STATE LABELS instead of OFFSETS. I hope I never have to do this
// again but this time I felt obliged to.

Actor AEoDTNT : Weapon // 6121
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL
	Weapon.AmmoType "AEGrenade"
	Weapon.AmmoType2 "AEGrenade"
	Weapon.AmmoGive1 1
	Weapon.AmmoUse 1
	Weapon.AmmoUse2 1
	Weapon.SelectionOrder 30500
	+WEAPON.NOAUTOAIM
	Scale 0.15
	Inventory.PickupSound "BloodShotgun/Pickup"
	Inventory.PickupMessage "Picked up the Zippo lighter."
	Tag "TNT"
	States
	{
	Spawn:
		ZIPL A 10
		Loop
	Ready:
		DYN1 A 1 A_TakeInventory("TNTThrowForce",10000)
		DYN1 B 1 A_TakeInventory("TNTCheck",10000)
		DYN1 C 1 A_PlayWeaponSound("weapons/tnt/zippotop")
		DYN1 D 1 
		DYN1 E 2 
		DYN1 F 1 A_PlayWeaponSound("weapons/tnt/zippolight")
		DYN1 GH 1 Bright
	ReadyLoop:
		DYN1 IIIIJJJJKKKK 1 Bright A_WeaponReady
		Loop
	Deselect:
		DYN1 L 0 A_TakeInventory("TNTCheck",10000)
		DYN1 L 0 A_TakeInventory("TNTThrowForce",10000)
		DYN1 LM 1 Bright A_Lower
		DYN1 N 1 A_PlayWeaponSound("weapons/tnt/zippotop")
		DYN1 OPQ 1 A_Lower
	DesLoop:
		TNT1 A 1 A_Lower
		TNT1 AA 0 A_Lower
		Loop
	DesNoAmmo:
		DY1T M 1 A_Lower
	DesNoLoop:
		"----" A 0 A_Lower
		"----" AA 0 A_Lower
		Loop
	Select:
		DYN1 L 0 A_TakeInventory("TNTCheck",10000)
		DYN1 L 0 A_TakeInventory("TNTThrowForce",999999)
	SelLoop:
		TNT1 AA 0 A_Raise
		Loop
	AltFire:
		DY1L A 0 A_GiveInventory("TNTAltToken",1)
		Goto Cont
	Fire:
		DY1L A 0 A_TakeInventory("TNTAltToken",10000)
	Cont:
		DY1L A 0 Bright A_JumpIfInventory("TNTCheck",1,6)
		DY1L A 2 Bright
		DY1L B 2 Bright A_PlaySoundEx("weapons/tnt/fuse","Weapon",1,0)
		DY1L CD 2 Bright
		DY1F A 0 A_GiveInventory("TNTCheck",1)
		DY1F A 0 A_GiveInventory("TNTThrowForce",1)
		DY1F A 2 Bright A_GunFlash
		DY1F A 0 Bright A_ReFire("Hold1")
		Goto PreEndFire
	Hold1:
		DY1F A 2 Bright A_GiveInventory("TNTThrowForce",1)
		DY1F A 0 Bright A_Refire("Hold2")	Goto PreEndFire
	Hold2:
		DY1F B 2 Bright A_GiveInventory("TNTThrowForce",1)
		DY1F B 0 Bright A_Refire("Hold3")	Goto PreEndFire
	Hold3:
		DY1F B 2 Bright A_GiveInventory("TNTThrowForce",1)
		DY1F B 0 Bright A_Refire("Hold4")	Goto PreEndFire
	Hold4:
		DY1F C 2 Bright A_GiveInventory("TNTThrowForce",1)
		DY1F C 0 Bright A_Refire("Hold5")	Goto PreEndFire
	Hold5:
		DY1F C 2 Bright A_GiveInventory("TNTThrowForce",1)
		DY1F C 0 Bright A_Refire("Hold6")	Goto PreEndFire
	Hold6:
		DY1F D 2 Bright A_GiveInventory("TNTThrowForce",1)
		DY1F D 0 Bright A_Refire("Hold7")	Goto PreEndFire
	Hold7:
		DY1F D 2 Bright A_GiveInventory("TNTThrowForce",1)
		DY1F D 0 Bright A_Refire("Hold8")	Goto PreEndFire
	Hold8:
		DY1F E 2 Bright A_GiveInventory("TNTThrowForce",1)
		DY1F E 0 Bright A_Refire("Hold9")	Goto PreEndFire
	Hold9:
		DY1F E 2 Bright A_GiveInventory("TNTThrowForce",1)
		DY1F E 0 Bright A_Refire("Hold10")	Goto PreEndFire
	Hold10:
		DY1F F 2 Bright A_GiveInventory("TNTThrowForce",1)
		DY1F F 0 Bright A_Refire("Hold11")	Goto PreEndFire
	Hold11:
		DY1F F 2 Bright A_GiveInventory("TNTThrowForce",1)
		DY1F F 0 Bright A_Refire("Hold12")	Goto PreEndFire
	Hold12:
		DY1F G 2 Bright A_GiveInventory("TNTThrowForce",1)
		DY1F G 0 Bright A_Refire("Hold13")	Goto PreEndFire
	Hold13:
		DY1F G 2 Bright A_GiveInventory("TNTThrowForce",1)
		DY1F G 0 Bright A_Refire("Hold14")	Goto PreEndFire
	Hold14:
		DY1F H 2 Bright A_GiveInventory("TNTThrowForce",1)
		DY1F H 0 Bright A_Refire("Hold15")	Goto PreEndFire
	Hold15:
		DY1F H 2 Bright A_GiveInventory("TNTThrowForce",1)
		DY1F H 0 Bright A_Refire("HoldA")	Goto PreEndFire
	Throw1:
		DY1T G 0 A_JumpIfInventory("TNTAltToken",1,2)
		DY1T G 2 Bright A_FireCustomMissile("PlayerTNT1",0,1,8,0)		Goto EndOfFire
		DY1T G 2 Bright A_FireCustomMissile("PlayerTNTTimed1",0,1,8,0)	Goto EndOfFire
	Throw2:
		DY1T G 0 A_JumpIfInventory("TNTAltToken",1,2)
		DY1T G 2 Bright A_FireCustomMissile("PlayerTNT2",0,1,8,0)		Goto EndOfFire
		DY1T G 2 Bright A_FireCustomMissile("PlayerTNTTimed2",0,1,8,0)	Goto EndOfFire
	Throw3:
		DY1T G 0 A_JumpIfInventory("TNTAltToken",1,2)
		DY1T G 2 Bright A_FireCustomMissile("PlayerTNT3",0,1,8,0)		Goto EndOfFire
		DY1T G 2 Bright A_FireCustomMissile("PlayerTNTTimed3",0,1,8,0)	Goto EndOfFire
	Throw4:
		DY1T G 0 A_JumpIfInventory("TNTAltToken",1,2)
		DY1T G 2 Bright A_FireCustomMissile("PlayerTNT4",0,1,8,0)		Goto EndOfFire
		DY1T G 2 Bright A_FireCustomMissile("PlayerTNTTimed4",0,1,8,0)	Goto EndOfFire
	Throw5:
		DY1T G 0 A_JumpIfInventory("TNTAltToken",1,2)
		DY1T G 2 Bright A_FireCustomMissile("PlayerTNT5",0,1,8,0)		Goto EndOfFire
		DY1T G 2 Bright A_FireCustomMissile("PlayerTNTTimed5",0,1,8,0)	Goto EndOfFire
	Throw6:
		DY1T G 0 A_JumpIfInventory("TNTAltToken",1,2)
		DY1T G 2 Bright A_FireCustomMissile("PlayerTNT6",0,1,8,0)		Goto EndOfFire
		DY1T G 2 Bright A_FireCustomMissile("PlayerTNTTimed6",0,1,8,0)	Goto EndOfFire
	Throw7:
		DY1T G 0 A_JumpIfInventory("TNTAltToken",1,2)
		DY1T G 2 Bright A_FireCustomMissile("PlayerTNT7",0,1,8,0)		Goto EndOfFire
		DY1T G 2 Bright A_FireCustomMissile("PlayerTNTTimed7",0,1,8,0)	Goto EndOfFire
	Throw8:
		DY1T G 0 A_JumpIfInventory("TNTAltToken",1,2)
		DY1T G 2 Bright A_FireCustomMissile("PlayerTNT8",0,1,8,0)		Goto EndOfFire
		DY1T G 2 Bright A_FireCustomMissile("PlayerTNTTimed8",0,1,8,0)	Goto EndOfFire
	Throw9:
		DY1T G 0 A_JumpIfInventory("TNTAltToken",1,2)
		DY1T G 2 Bright A_FireCustomMissile("PlayerTNT9",0,1,8,0)		Goto EndOfFire
		DY1T G 2 Bright A_FireCustomMissile("PlayerTNTTimed9",0,1,8,0)	Goto EndOfFire
	ThrowA:
		DY1T G 0 A_JumpIfInventory("TNTAltToken",1,2)
		DY1T G 2 Bright A_FireCustomMissile("PlayerTNTA",0,1,8,0)		Goto EndOfFire
		DY1T G 2 Bright A_FireCustomMissile("PlayerTNTTimedA",0,1,8,0)	Goto EndOfFire
	ThrowB:
		DY1T G 0 A_JumpIfInventory("TNTAltToken",1,2)
		DY1T G 2 Bright A_FireCustomMissile("PlayerTNTB",0,1,8,0)		Goto EndOfFire
		DY1T G 2 Bright A_FireCustomMissile("PlayerTNTTimedB",0,1,8,0)	Goto EndOfFire
	ThrowC:
		DY1T G 0 A_JumpIfInventory("TNTAltToken",1,2)
		DY1T G 2 Bright A_FireCustomMissile("PlayerTNTC",0,1,8,0)		Goto EndOfFire
		DY1T G 2 Bright A_FireCustomMissile("PlayerTNTTimedC",0,1,8,0)	Goto EndOfFire
	ThrowD:
		DY1T G 0 A_JumpIfInventory("TNTAltToken",1,2)
		DY1T G 2 Bright A_FireCustomMissile("PlayerTNTD",0,1,8,0)		Goto EndOfFire
		DY1T G 2 Bright A_FireCustomMissile("PlayerTNTTimedD",0,1,8,0)	Goto EndOfFire
	ThrowE:
		DY1T G 0 A_JumpIfInventory("TNTAltToken",1,2)
		DY1T G 2 Bright A_FireCustomMissile("PlayerTNTE",0,1,8,0)		Goto EndOfFire
		DY1T G 2 Bright A_FireCustomMissile("PlayerTNTTimedE",0,1,8,0)	Goto EndOfFire	
	ThrowF:
		DY1T G 0 A_JumpIfInventory("TNTAltToken",1,2)
		DY1T G 2 Bright A_FireCustomMissile("PlayerTNTF",0,1,8,0)		Goto EndOfFire
		DY1T G 2 Bright A_FireCustomMissile("PlayerTNTTimedF",0,1,8,0)	Goto EndOfFire
	ThrowG:
		DY1T G 0 A_JumpIfInventory("TNTAltToken",1,2)
		DY1T G 2 Bright A_FireCustomMissile("PlayerTNTG",0,1,8,0)		Goto EndOfFire
		DY1T G 2 Bright A_FireCustomMissile("PlayerTNTTimedG",0,1,8,0)	Goto EndOfFire
	PreEndFire:
		DY1T A 2 Bright
		DY1T B 5 Bright
		DY1T CDEF 2 Bright
		DY1T G 0 Bright A_PlayWeaponSound("caleb/tnt")
		"----" A 0 A_JumpIfInventory("TNTThrowForce",16,"ThrowG")
		"----" A 0 A_JumpIfInventory("TNTThrowForce",15,"ThrowF")
		"----" A 0 A_JumpIfInventory("TNTThrowForce",14,"ThrowE")
		"----" A 0 A_JumpIfInventory("TNTThrowForce",13,"ThrowD")
		"----" A 0 A_JumpIfInventory("TNTThrowForce",12,"ThrowC")
		"----" A 0 A_JumpIfInventory("TNTThrowForce",11,"ThrowB")
		"----" A 0 A_JumpIfInventory("TNTThrowForce",10,"ThrowA")
		"----" A 0 A_JumpIfInventory("TNTThrowForce",9,"Throw9")
		"----" A 0 A_JumpIfInventory("TNTThrowForce",8,"Throw8")
		"----" A 0 A_JumpIfInventory("TNTThrowForce",7,"Throw7")
		"----" A 0 A_JumpIfInventory("TNTThrowForce",6,"Throw6")
		"----" A 0 A_JumpIfInventory("TNTThrowForce",5,"Throw5")
		"----" A 0 A_JumpIfInventory("TNTThrowForce",4,"Throw4")
		"----" A 0 A_JumpIfInventory("TNTThrowForce",3,"Throw3")
		"----" A 0 A_JumpIfInventory("TNTThrowForce",2,"Throw2")
		"----" A 0 A_JumpIfInventory("TNTThrowForce",1,"Throw1")
		Goto Throw1		
	EndOfFire:
		DY1T H 0 A_TakeInventory("TNTAltToken",10000)
		DY1T H 0 A_TakeInventory("TNTThrowForce",999999)
		DY1T H 0 A_TakeInventory("TNTCheck",10000)
		DY1T HIJKL 2 Bright
		DY1T M 0 A_JumpIfNoAmmo("DesNoAmmo")		
		DY1T MNOPQRS 2 Bright
		Goto Ready+8
	HoldA:
		DY1F I 4 Bright
		DY1F I 0 A_ReFire("HoldB")	Goto PreEndFire
	HoldB:
		DY1F J 4 Bright
		DY1F J 0 A_ReFire("HoldC")	Goto PreEndFire
	HoldC:	
		DY1F K 4 Bright 
		DY1F K 0 A_ReFire("HoldD")	Goto PreEndFire
	HoldD:
		DY1F L 4 Bright 
		DY1F L 0 A_ReFire("HoldE")	Goto PreEndFire
	HoldE:
		DY1F M 4 Bright 
		DY1F M 0 A_ReFire("HoldF")	Goto PreEndFire
	HoldF:
		DY1F N 4 Bright 
		DY1F N 0 A_ReFire("HoldG")	Goto PreEndFire
	HoldG:
		DY1F O 4 Bright 
		DY1F O 0 A_ReFire("HoldH")	Goto PreEndFire
	HoldH:
		DY1F P 4 Bright
		DY1F P 0 A_ReFire("HoldI")	Goto PreEndFire
	HoldI:
		DY1F Q 4 Bright
		DY1F Q 0 A_ReFire("HoldJ")	Goto PreEndFire
	HoldJ:
		DY1F R 4 Bright
		DY1F R 0 A_ReFire("HoldK")	Goto PreEndFire
	HoldK:
		DY1F S 4 Bright
		DY1F S 0 A_ReFire("HoldL")	Goto PreEndFire
	HoldL:
		DY1F T 4 Bright
		DY1F T 0 A_ReFire("HoldM")	Goto PreEndFire
	HoldM:
		DY1F U 4 Bright
		DY1F U 0 A_ReFire("HoldN")	Goto PreEndFire
	HoldN:
		DY1F V 4 Bright
		DY1F V 0 A_ReFire("HoldO")	Goto PreEndFire
	HoldO:
		DY1F W 4 Bright
		DY1F W 0 A_ReFire("HoldP")	Goto PreEndFire
	HoldP:
		DY1F X 4 Bright
		DY1F X 0 A_ReFire("HoldQ")	Goto PreEndFire
	HoldQ:
		DY1F Y 4 Bright
		DY1F Y 0 A_ReFire("Overheld")	Goto PreEndFire
	Overheld:
		TNT1 A 0 A_StopSoundEx("Weapon")
		TNT1 A 0 A_TakeInventory("TNTCheck",10000)
		TNT1 A 0 A_TakeInventory("TNTThrowForce",999999)
		TNT1 A 20 Bright A_FireCustomMissile("PlayerTNToops",0,1,0,0)
		Goto Ready
	Flash:
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",16,32)
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",15,30)
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",14,28)
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",13,26)
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",12,24)
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",11,22)
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",10,20)
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",9,18)
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",8,16)
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",7,14)
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",6,12)
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",5,10)
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",4,8)
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",3,6)
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",2,4)
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",1,2)
		TNT1 A 0
		Stop
		DYNG A 2 Bright
		Loop
		DYNG B 2 Bright
		Loop
		DYNG C 2 Bright
		Loop
		DYNG D 2 Bright
		Loop
		DYNG E 2 Bright
		Loop
		DYNG F 2 Bright
		Loop
		DYNG G 2 Bright
		Loop
		DYNG H 2 Bright
		Loop
		DYNG I 2 Bright
		Loop
		DYNG J 2 Bright
		Loop
		DYNG K 2 Bright
		Loop
		DYNG L 2 Bright
		Loop
		DYNG M 2 Bright
		Loop
		DYNG N 2 Bright
		Loop
		DYNG O 2 Bright
		Loop
		DYNG P 2 Bright
		Loop
	}
}

Actor TNTAltToken : Inventory { }

Actor SuperRocketBit2I : SuperRocketBit
{
	Damage 0
	+BLOODLESSIMPACT
}

Actor PlayerTNT1
{
	Speed 6
	Radius 8
	Height 8
	Scale 0.5
	Damage 16
	Gravity 0.65
	PROJECTILE
	+GRENADETRAIL
	-NOGRAVITY
	+FORCERADIUSDMG
	+EXTREMEDEATH
	DeathSound "caleb/tnt/explode"
	States
	{
	Spawn:
		TNT1 A 0 
		TNT1 A 0 ThrustThingZ(0,random(10,12),0,1)
		TNT4 C 0 A_PlaySoundEx("weapons/tnt/fuse","Voice",1,-1)
		TNT4 CDEFGHIJ 3 Bright 
		Goto Spawn+3
	Death:
		TNT1 A 0 A_StopSoundEx("Voice") 
		TNT1 A 0 A_Scream
		FRME A 0 Bright A_Explode(300,140,1)
		TNT1 A 0 A_SpawnItemEx("NewExplosionMedium",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		EXPL A 0 A_CustomMissile("SuperRocketBit2I",0,0,45)
		EXPL A 0 A_CustomMissile("SuperRocketBit2I",0,0,90)
		EXPL A 0 A_CustomMissile("SuperRocketBit2I",0,0,0)
		EXPL A 0 A_CustomMissile("SuperRocketBit2I",0,0,135)
		EXPL A 0 A_CustomMissile("SuperRocketBit2I",0,0,180)
		EXPL A 0 A_CustomMissile("SuperRocketBit2I",0,0,225)
		EXPL A 0 A_CustomMissile("SuperRocketBit2I",0,0,270)
		EXPL A 0 A_CustomMissile("SuperRocketBit2I",0,0,315)
		EXPL A 0 A_CustomMissile("SuperRocketBit2I",0,0,66)
		EXPL A 0 A_CustomMissile("SuperRocketBit2I",0,0,155)
		EXPL A 0 A_CustomMissile("SuperRocketBit2I",0,0,245)
		TNT1 A 10 
		Stop
	}
}

Actor PlayerTNT2 : PlayerTNT1 { Speed 7 }

Actor PlayerTNT3 : PlayerTNT1 { Speed 9 }

Actor PlayerTNT4 : PlayerTNT1
{
	Speed 10
	States
	{
	Spawn:
		TNT1 A 0 
		TNT1 A 0 ThrustThingZ(0,random(12,14),0,1)
		TNT4 CDEFGHIJ 3 Bright 
		Goto Spawn+2
	}
}

Actor PlayerTNT5 : PlayerTNT4 { Speed 12 }

Actor PlayerTNT6 : PlayerTNT4 { Speed 13 }

Actor PlayerTNT7 : PlayerTNT1
{
	Speed 15
	States
	{
	Spawn:
		TNT1 A 0 
		TNT1 A 0 ThrustThingZ(0,random(14,16),0,1)
		TNT4 CDEFGHIJ 3 Bright 
		Goto Spawn+2
	}
}

Actor PlayerTNT8 : PlayerTNT1 { Speed 16 }

Actor PlayerTNT9 : PlayerTNT1 { Speed 18 }

Actor PlayerTNTA : PlayerTNT1
{
	Speed 19
	States
	{
	Spawn:
		TNT1 A 0 
		TNT1 A 0 ThrustThingZ(0,random(16,18),0,1)
		TNT4 CDEFGHIJ 3 Bright 
		Goto Spawn+2
	}
}

Actor PlayerTNTB : PlayerTNT1 { Speed 21 }

Actor PlayerTNTC : PlayerTNT1 { Speed 22 }

Actor PlayerTNTD : PlayerTNT1
{
	Speed 24
	States
	{
	Spawn:
		TNT1 A 0 
		TNT1 A 0 ThrustThingZ(0,random(18,20),0,1)
		TNT4 CDEFGHIJ 3 Bright 
		Goto Spawn+2
	}
}

Actor PlayerTNTE : PlayerTNT1 { Speed 25 }

Actor PlayerTNTF : PlayerTNT1 { Speed 27 }

Actor PlayerTNTG : PlayerTNT1 { Speed 28 }

Actor PlayerTNTTimed
{
	Speed 0
	Radius 8
	Height 8
	Health 10
	Scale 0.5
	Damage 16
	ReactionTime 70
	+EXTREMEDEATH
	+SHOOTABLE
	+NOBLOOD
	+FORCERADIUSDMG
	-COUNTKILL
	DeathSound "caleb/tnt/explode"
	States
	{
	Spawn:
		TNT4 K 0 A_PlaySoundEx("weapons/tnt/fuse","Voice",1,-1)
		TNT4 KKKLLLMMMKKKLLLMMM 1 A_CountDown
		Goto Spawn+1
	Death:
		TNT1 A 0 A_StopSoundEx("Voice")
		TNT1 A 0 A_Scream
		FRME A 0 Bright A_Explode(300,140,1)
		TNT1 A 0 A_SpawnItemEx("NewExplosionMedium",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		EXPL A 0 A_CustomMissile("SuperRocketBit2I",0,0,45)
		EXPL A 0 A_CustomMissile("SuperRocketBit2I",0,0,90)
		EXPL A 0 A_CustomMissile("SuperRocketBit2I",0,0,0)
		EXPL A 0 A_CustomMissile("SuperRocketBit2I",0,0,135)
		EXPL A 0 A_CustomMissile("SuperRocketBit2I",0,0,180)
		EXPL A 0 A_CustomMissile("SuperRocketBit2I",0,0,225)
		EXPL A 0 A_CustomMissile("SuperRocketBit2I",0,0,270)
		EXPL A 0 A_CustomMissile("SuperRocketBit2I",0,0,315)
		EXPL A 0 A_CustomMissile("SuperRocketBit2I",0,0,66)
		EXPL A 0 A_CustomMissile("SuperRocketBit2I",0,0,155)
		EXPL A 0 A_CustomMissile("SuperRocketBit2I",0,0,245)
		TNT1 A 10 
		Stop
	}
}

Actor PlayerTNTTimed1
{
	Speed 6
	Radius 8
	Height 8
	Scale 0.5
	Damage 0
	Gravity 0.65
	PROJECTILE
	+GRENADETRAIL
	-NOGRAVITY
	+EXTREMEDEATH
	+HEXENBOUNCE
	+BOUNCEONACTORS
	+CANBOUNCEWATER
	+PAINLESS
	BounceFactor 0.4
	BounceCount 6
	States
	{
	Spawn:
		TNT1 A 0 
		TNT1 A 0 ThrustThingZ(0,random(10,15),0,1)
		TNT4 C 0 A_PlaySoundEx("weapons/tnt/fuse","Voice",1,-1)
		TNT4 CDEFGHIJ 3 Bright 
		Goto Spawn+3
	Death:
		TNT1 A 0 A_SpawnItemEx("PlayerTNTTimed",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION,0)
		Stop
	}
}

Actor PlayerTNTTimed2 : PlayerTNTTimed1 { Speed 7 }

Actor PlayerTNTTimed3 : PlayerTNTTimed1 { Speed 9 }

Actor PlayerTNTTimed4 : PlayerTNTTimed1
{
	Speed 10
	States
	{
	Spawn:
		TNT1 A 0 
		TNT1 A 0 ThrustThingZ(0,random(12,14),0,1)
		TNT4 CDEFGHIJ 3 Bright 
		Goto Spawn+2
	}
}

Actor PlayerTNTTimed5 : PlayerTNTTimed4 { Speed 12 }

Actor PlayerTNTTimed6 : PlayerTNTTimed4 { Speed 13 }

Actor PlayerTNTTimed7 : PlayerTNTTimed1
{
	Speed 15
	States
	{
	Spawn:
		TNT1 A 0 
		TNT1 A 0 ThrustThingZ(0,random(14,16),0,1)
		TNT4 CDEFGHIJ 3 Bright 
		Goto Spawn+2
	}
}

Actor PlayerTNTTimed8 : PlayerTNTTimed7 { Speed 16 }

Actor PlayerTNTTimed9 : PlayerTNTTimed7 { Speed 18 }

Actor PlayerTNTTimedA : PlayerTNTTimed1
{
	Speed 19
	States
	{
	Spawn:
		TNT1 A 0 
		TNT1 A 0 ThrustThingZ(0,random(16,18),0,1)
		TNT4 CDEFGHIJ 3 Bright 
		Goto Spawn+2
	}
}

Actor PlayerTNTTimedB : PlayerTNTTimedA { Speed 21 }

Actor PlayerTNTTimedC : PlayerTNTTimedA { Speed 22 }

Actor PlayerTNTTimedD : PlayerTNTTimed1
{
	Speed 24
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 ThrustThingZ(0,random(18,20),0,1)
		TNT4 CDEFGHIJ 3 Bright 
		Goto Spawn+2
	}
}

Actor PlayerTNTTimedE : PlayerTNTTimedD { Speed 25 }

Actor PlayerTNTTimedF : PlayerTNTTimedD { Speed 27 }

Actor PlayerTNTTimedG : PlayerTNTTimedD { Speed 28 }

Actor PlayerTNToops
{
	Speed 0
	Radius 8
	Height 8
	Scale 0.5
	Damage 16
	Gravity 0.5
	PROJECTILE
	+GRENADETRAIL
	-NOGRAVITY
	+EXTREMEDEATH
	+FORCERADIUSDMG
	States
	{
	Spawn:
		TNT1 A 0 
		Goto Death
	Death:
		TNT1 A 0 A_PLaySoundEx("caleb/tnt/explode","SoundSlot5")
		FRME A 0 Bright A_Explode(800,140,1)
		TNT1 A 0 A_SpawnItemEx("NewExplosionMedium",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		EXPL A 0 A_CustomMissile("SuperRocketBit2I",0,0,45)
		EXPL A 0 A_CustomMissile("SuperRocketBit2I",0,0,90)
		EXPL A 0 A_CustomMissile("SuperRocketBit2I",0,0,0)
		EXPL A 0 A_CustomMissile("SuperRocketBit2I",0,0,135)
		EXPL A 0 A_CustomMissile("SuperRocketBit2I",0,0,180)
		EXPL A 0 A_CustomMissile("SuperRocketBit2I",0,0,225)
		EXPL A 0 A_CustomMissile("SuperRocketBit2I",0,0,270)
		EXPL A 0 A_CustomMissile("SuperRocketBit2I",0,0,315)
		EXPL A 0 A_CustomMissile("SuperRocketBit2I",0,0,66)
		EXPL A 0 A_CustomMissile("SuperRocketBit2I",0,0,155)
		EXPL A 0 A_CustomMissile("SuperRocketBit2I",0,0,245)
		TNT1 A 10 
		Stop
	}
}

Actor TNTCheck : Inventory {}

Actor TNTThrowForce : Inventory { Inventory.MaxAmount 16 }

Actor TNTDrop : CustomInventory
{
	Inventory.MaxAmount 1
	States
	{
	Use:
		TNT1 A 0
		TNT1 A 0 A_SpawnItemEx("DroppedTNT",0,0,32,8,0,0,0,SXF_NOCHECKPOSITION,0)
		Stop
	}
}

Actor DroppedTNT
{
	Radius 16
	Height 20
	Scale 0.15
	States
	{
	Spawn:
		ZIPL A 15
		TNT1 A 0 A_SpawnItemEx("AEoDTNTNoAmmo",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER,0)
		Stop
	}
}

Actor AEoDTNTNoAmmo : AEoDTNTItem
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL
	Scale 0.15
	Inventory.Amount 1
	Inventory.PickupSound "BloodShotgun/Pickup"
	Inventory.PickupMessage "Picked up the Zippo lighter."
	States
	{
	Spawn:
		ZIPL A -1
		Loop
	Pickup:
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",1) <= 0,"Nothing")
		TNT1 A 0 A_JumpIfInventory("AEGrenade",1,"Ammo")
		TNT1 A 0 A_JumpIfInventory("AEoDTNT",1,2)
		TNT1 A 0 A_GiveInventory("Weapon1Count",1)
		TNT1 A 0 A_GiveInventory("TNTDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDTNT",1)
		TNT1 A 0 A_TakeInventory("AEGrenade",1)
		TNT1 A 0 	
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDTNT",1,"Ammo")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		
		TNT1 A 0 ACS_NamedExecute("s798",0,1,6,0)
		Fail
	Ammo:
		TNT1 A 0 A_TakeInventory("AEGrenade",1)
		TNT1 A 0 A_JumpIfInventory("AEoDTNT",1,2)
		TNT1 A 0 A_GiveInventory("Weapon1Count",1)
		TNT1 A 0 A_GiveInventory("TNTDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDTNT",1)
		Stop
	}
}

//==================================================================================
//==================================================================================

//==================================================================================
//==================================================================================

Actor AEoDRemoteDetonatorItem : CustomInventory 6119
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL
	Scale 0.35
	Inventory.Amount 1
	Inventory.PickupSound "BloodShotgun/Pickup"
	Inventory.PickupMessage "Picked up the remote detonator."
	States
	{
	Spawn:
		REMD A -1
		Loop
	Pickup:
		TNT1 A 0 A_JumpIfInventory("AEoDRemoteDetonator",1,"Ammo")
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",1) <= 0,"Nothing")
		TNT1 A 0 A_GiveInventory("Weapon1Count",1)
		TNT1 A 0 A_GiveInventory("RemoteDetonatorDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDRemoteDetonator",1)
		TNT1 A 0 	
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDRemoteDetonator",1,"Ammo")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		
		TNT1 A 0 ACS_NamedExecute("s798",0,1,5,0)
		Fail
	Ammo:
		TNT1 A 0 A_GiveInventory("AEGrenade",1)
		Stop
	}
}

Actor AEoDRemoteDetonator : Weapon // 6119
{
	+FLOORCLIP
	+WEAPON.CHEATNOTWEAPON
	+INVENTORY.IGNORESKILL
	Weapon.AmmoType "AEGrenade"
	Weapon.AmmoType2 "AEGrenade"
	Weapon.AmmoGive1 1
	Weapon.AmmoUse 1
	Weapon.AmmoUse2 1
	Weapon.SelectionOrder 29500
	+WEAPON.AMMO_OPTIONAL
	+WEAPON.ALT_AMMO_OPTIONAL
	+WEAPON.NOAUTOAIM
	Scale 0.35
	Inventory.PickupSound "BloodShotgun/Pickup"
	Weapon.UpSound "weapons/tnt/select"
	Inventory.PickupMessage "Picked up the remote detonator."
	Tag "Remote detonator"
	States
	{
	Spawn:
		REMD A 10
		Loop
	Ready:
		TNT1 A 1 A_TakeInventory("TNTThrowForce",100000)
		DYN2 A 0 A_JumpIfInventory("AEGrenade",1,1)
		Goto Ready+7
	ReadyUp:
		DYN2 A 0 A_JumpIfInventory("TNTRemoteReady",1,5)
		DYN2 ABCD 1
		Goto R2
	ReadyRemoteUp:
		DYN2 MNOP 1
	ReadyNoAmmo:
		DYN2 Q 0 A_JumpIfInventory("TNTAmmo",1,"R1")
		DYN2 Q 0 A_JumpIfInventory("AEGrenade",1,"R3")
		DYN2 Q 1 A_WeaponReady
		DYN2 Q 0 A_JumpIfInventory("AEGrenade",1,"R3")
		DYN2 Q 1 A_WeaponReady
		DYN2 R 0 A_JumpIfInventory("AEGrenade",1,"R3")
		DYN2 R 1 A_WeaponReady
		DYN2 R 0 A_JumpIfInventory("AEGrenade",1,"R3")
		DYN2 R 1 A_WeaponReady
		DYN2 S 0 A_JumpIfInventory("AEGrenade",1,"R3")
		DYN2 S 1 A_WeaponReady
		DYN2 S 0 A_JumpIfInventory("AEGrenade",1,"R3")
		DYN2 S 1 A_WeaponReady
		DYN2 T 0 A_JumpIfInventory("AEGrenade",1,"R3")
		DYN2 T 1 A_WeaponReady
		DYN2 T 0 A_JumpIfInventory("AEGrenade",1,"R3")
		DYN2 T 1 A_WeaponReady
		DYN2 S 0 A_JumpIfInventory("AEGrenade",1,"R3")
		DYN2 S 1 A_WeaponReady
		DYN2 S 0 A_JumpIfInventory("AEGrenade",1,"R3")
		DYN2 S 1 A_WeaponReady
		DYN2 R 0 A_JumpIfInventory("AEGrenade",1,"R3")
		DYN2 R 1 A_WeaponReady
		DYN2 R 0 A_JumpIfInventory("AEGrenade",1,"R3")
		DYN2 R 1 A_WeaponReady
		Loop
	R1: //No TNT
		DYN2 QQRRSSTTSSRR 2 A_WeaponReady
		Loop
	R2: //With TNT
		DYN2 EEFFGGHHGGFF 2 A_WeaponReady
		Loop
	R3: //Raise TNT
		DY2T N 0 A_GiveInventory("TNTAmmo",1)
		DY2T NOPQ 2
		Goto R2
	Deselect:
		DYN2 I 0 A_JumpIfInventory("AEGrenade",1,1)
		Goto Deselect+10
		
		DYN2 I 0 A_JumpIfInventory("TNTRemoteReady",1,8)
		DYN2 I 0 A_TakeInventory("TNTThrowForce",999999)
		DYN2 IJKL 1 A_Lower
		TNT1 A 0 	
		TNT1 A 1 A_Lower
		TNT1 A 0 A_Lower
		Goto Deselect+7
		
		DYN2 PONM 1 A_Lower
		TNT1 A 0 	
		TNT1 A 1 A_Lower
		TNT1 A 0 A_Lower
		Goto Deselect+14
	Select:
		DYN2 A 0 A_TakeInventory("TNTThrowForce",999999)
		TNT1 A 0 A_GiveInventory("TNTAmmo",1)
		TNT1 A 0 A_JumpIfInventory("AEGrenade",1,2)
		TNT1 A 0 A_TakeInventory("TNTAmmo",1)
		DYN2 M 1 	
		TNT1 AA 0 A_Raise
		Goto Select+4
	Fire:
		DYN2 E 0 A_GiveInventory("TNTRemoteToken",1)
		DYN2 E 0 A_JumpIfInventory("TNTRemoteReady",1,"Detonate")
		DYN2 E 0 A_JumpIfInventory("AEGrenade",1,1)
		Goto ReadyRemoteUp
		DYN2 E 0 A_GiveInventory("TNTThrowForce",1)
		DYN2 E 2 A_GunFlash
		DYN2 E 0 A_ReFire
		Goto EndFire
		
	EndFire:
		DY2T A 2
		DY2T B 5
		DY2T CDEF 2
		DY2T G 0 A_PlayWeaponSound("caleb/tnt")
		DYN2 E 0 A_JumpIfInventory("TNTThrowForce",16,"ThrowG")
		DYN2 E 0 A_JumpIfInventory("TNTThrowForce",15,"ThrowF")
		DYN2 E 0 A_JumpIfInventory("TNTThrowForce",14,"ThrowE")
		DYN2 E 0 A_JumpIfInventory("TNTThrowForce",13,"ThrowD")
		DYN2 E 0 A_JumpIfInventory("TNTThrowForce",12,"ThrowC")
		DYN2 E 0 A_JumpIfInventory("TNTThrowForce",11,"ThrowB")
		DYN2 E 0 A_JumpIfInventory("TNTThrowForce",10,"ThrowA")
		DYN2 E 0 A_JumpIfInventory("TNTThrowForce",9,"Throw9")
		DYN2 E 0 A_JumpIfInventory("TNTThrowForce",8,"Throw8")
		DYN2 E 0 A_JumpIfInventory("TNTThrowForce",7,"Throw7")
		DYN2 E 0 A_JumpIfInventory("TNTThrowForce",6,"Throw6")
		DYN2 E 0 A_JumpIfInventory("TNTThrowForce",5,"Throw5")
		DYN2 E 0 A_JumpIfInventory("TNTThrowForce",4,"Throw4")
		DYN2 E 0 A_JumpIfInventory("TNTThrowForce",3,"Throw3")
		DYN2 E 0 A_JumpIfInventory("TNTThrowForce",2,"Throw2")
		Goto Throw1
	Throw1:		
		DY2T G 2 A_FireCustomMissile("PlayerTNTRemote1",0,1,8,0)	Goto EndFire2
	Throw2:
		DY2T G 2 A_FireCustomMissile("PlayerTNTRemote2",0,1,8,0)	Goto EndFire2
	Throw3:		
		DY2T G 2 A_FireCustomMissile("PlayerTNTRemote3",0,1,8,0)	Goto EndFire2
	Throw4:
		DY2T G 2 A_FireCustomMissile("PlayerTNTRemote4",0,1,8,0)	Goto EndFire2
	Throw5:		
		DY2T G 2 A_FireCustomMissile("PlayerTNTRemote5",0,1,8,0)	Goto EndFire2
	Throw6:
		DY2T G 2 A_FireCustomMissile("PlayerTNTRemote6",0,1,8,0)	Goto EndFire2
	Throw7:		
		DY2T G 2 A_FireCustomMissile("PlayerTNTRemote7",0,1,8,0)	Goto EndFire2
	Throw8:
		DY2T G 2 A_FireCustomMissile("PlayerTNTRemote8",0,1,8,0)	Goto EndFire2
	Throw9:		
		DY2T G 2 A_FireCustomMissile("PlayerTNTRemote9",0,1,8,0)	Goto EndFire2
	ThrowA:
		DY2T G 2 A_FireCustomMissile("PlayerTNTRemoteA",0,1,8,0)	Goto EndFire2
	ThrowB:		
		DY2T G 2 A_FireCustomMissile("PlayerTNTRemoteB",0,1,8,0)	Goto EndFire2
	ThrowC:
		DY2T G 2 A_FireCustomMissile("PlayerTNTRemoteC",0,1,8,0)	Goto EndFire2
	ThrowD:		
		DY2T G 2 A_FireCustomMissile("PlayerTNTRemoteD",0,1,8,0)	Goto EndFire2
	ThrowE:
		DY2T G 2 A_FireCustomMissile("PlayerTNTRemoteE",0,1,8,0)	Goto EndFire2
	ThrowF:		
		DY2T G 2 A_FireCustomMissile("PlayerTNTRemoteF",0,1,8,0)	Goto EndFire2
	ThrowG:
		DY2T G 2 A_FireCustomMissile("PlayerTNTRemoteG",0,1,8,0)	Goto EndFire2
	Hold1:
		DYN2 G 0 A_JumpIfInventory("TNTThrowForce",16,2)
		"----" A 0 A_GiveInventory("TNTThrowForce",1)
		"----" A 2
		"----" A 0 A_Refire("Hold2")
		Goto EndFire
	Hold2:
		DYN2 H 0 A_JumpIfInventory("TNTThrowForce",16,2)
		"----" A 0 A_GiveInventory("TNTThrowForce",1)
		"----" A 2
		"----" A 0 A_Refire("Hold3")
		Goto EndFire
	Hold3:
		DYN2 G 0 A_JumpIfInventory("TNTThrowForce",16,2)
		"----" A 0 A_GiveInventory("TNTThrowForce",1)
		"----" A 2
		"----" A 0 A_Refire("Hold4")
		Goto EndFire
	Hold4:
		DYN2 F 0 A_JumpIfInventory("TNTThrowForce",16,2)
		"----" A 0 A_GiveInventory("TNTThrowForce",1)
		"----" A 2
		"----" A 0 A_Refire("Hold5")
		Goto EndFire
	Hold5:
		DYN2 E 0 A_JumpIfInventory("TNTThrowForce",16,2)
		"----" A 0 A_GiveInventory("TNTThrowForce",1)
		"----" A 2
		"----" A 0 A_Refire("Hold6")
		Goto EndFire
	Hold6:
		DYN2 F 0 A_JumpIfInventory("TNTThrowForce",16,2)
		"----" A 0 A_GiveInventory("TNTThrowForce",1)
		"----" A 2
		"----" A 0 A_Refire("Hold1")
		Goto EndFire
	EndFire2:
		DY2D A 0 A_TakeInventory("TNTThrowForce",100000)
		DY2T A 0 A_JumpIfInventory("TNTRemoteReady",1,8)
		DY2T A 2 A_PlayWeaponSound("caleb/tnt")
		DY2T B 0 A_GiveInventory("TNTRemoteReady",1)
		DY2T B 4
		DYN2 STSR 2
		Goto R3
	Detonate:
		DY2D A 0 A_TakeInventory("TNTThrowForce",100000)
		DY2D A 0 A_TakeInventory("TNTRemoteReady",1)
		DY2D A 2 A_PlayWeaponSound("weapons/tnt/detonate")
		DY2D B 2
		//DY2D C 0 A_ChangeFlag("DOHARMSPECIES",true)
		//DY2D C 0 A_KillChildren("Normal",KILS_KILLMISSILES|KILS_EITHER,"PlayerTNTRemote", "PlayerTNT")
		DY2D C 1 A_GiveToChildren("RemoteExploder",1)
		//DY2D C 0 A_ChangeFlag("DOHARMSPECIES",false)
		DY2D DE 2
		DY2D E 0 A_JumpIfInventory("AEGrenade",1,7)
		DY2D AAAAAA 0 A_CheckReload
		Goto Deselect+7
		
		DY2D E 0
		Goto Ready
	AltFire:
		DY2T A 0 A_JumpIfInventory("TNTRemoteToken",1,2)
		DY2T A 0 A_GiveInventory("TNTRemoteToken",1)
		DY2T A 0 A_JumpIfNoAmmo(1)
		Goto AltReset 
		DY2T A 0 A_TakeInventory("TNTAmmo",1)
		Goto R2 
	AltReset:
		DY2T A 0 A_JumpIfInventory("TNTRemoteReady",1,"AltDrop")
		DY2T A 2 A_PlayWeaponSound("caleb/tnt")
		DY2T B 0 A_GiveInventory("TNTRemoteReady",1)
		DY2T B 4 A_FireCustomMissile("PlayerTNTRemoteDrop",0,1,8,0)
		DYN2 STSR 2
		Goto R3
	AltDrop:
		DY2T N 0 A_TakeInventory("TNTRemoteReady",1)
		DY2T NOPQ 2
		Goto R1
	Flash:
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",16,32)
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",15,30)
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",14,28)
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",13,26)
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",12,24)
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",11,22)
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",10,20)
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",9,18)
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",8,16)
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",7,14)
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",6,12)
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",5,10)
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",4,8)
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",3,6)
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",2,4)
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",1,2)
		TNT1 A 0
		Stop
		DYNG A 2 Bright
		Loop
		DYNG B 2 Bright
		Loop
		DYNG C 2 Bright
		Loop
		DYNG D 2 Bright
		Loop
		DYNG E 2 Bright
		Loop
		DYNG F 2 Bright
		Loop
		DYNG G 2 Bright
		Loop
		DYNG H 2 Bright
		Loop
		DYNG I 2 Bright
		Loop
		DYNG J 2 Bright
		Loop
		DYNG K 2 Bright
		Loop
		DYNG L 2 Bright
		Loop
		DYNG M 2 Bright
		Loop
		DYNG N 2 Bright
		Loop
		DYNG O 2 Bright
		Loop
		DYNG P 2 Bright
		Loop
	}
}

Actor TNTAmmo : Inventory { }

Actor TNTRemoteLight : Inventory
{	Inventory.MaxAmount 6	}

Actor TNTRemoteReady : Inventory
{ Inventory.InterhubAmount 0 }

Actor TNTRemoteToken : Inventory { }

Actor RemoteExploder : CustomInventory
{
	+ALWAYSPICKUP
	States
	{
	Pickup:
		TNT1 A 0 A_JumpIf(CheckClass("PlayerTNTRemote",AAPTR_DEFAULT,1) ||
						  CheckClass("PlayerTNTRemote1",AAPTR_DEFAULT,1),1)
		Stop
		TNT1 A 0 A_Die
		Stop
	}
}

Actor PlayerTNTRemote
{
	Speed 0
	Radius 8
	Height 8
	Health 10
	Damage 16
	ReactionTime 70
	Monster
	-FRIENDLY
	-SOLID
	+NEVERTARGET
	+EXTREMEDEATH
	+SHOOTABLE
	+FORCERADIUSDMG
	+NOBLOOD
	-COUNTKILL
	+DOHARMSPECIES
	Species "PlayerTNT"
	States
	{
	Spawn:
		TNT4 A 0 NoDelay A_RearrangePointers(AAPTR_DEFAULT,AAPTR_TARGET,AAPTR_DEFAULT,4)
		TNT4 A 0 A_ChangeFlag("FRIENDLY",0)
		TNT4 AA 2 Bright
		TNT4 BBBBBBB 2
		Loop
	Death:
		TNT1 A 0 A_PlaySoundEx("caleb/tnt/explode","SoundSlot5")
		FRME A 0 Bright A_Explode(300,140,1)
		TNT1 A 0 A_SpawnItemEx("NewExplosionMedium",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		EXPL A 0 A_CustomMissile("SuperRocketBit2I",0,0,45)
		EXPL A 0 A_CustomMissile("SuperRocketBit2I",0,0,90)
		EXPL A 0 A_CustomMissile("SuperRocketBit2I",0,0,0)
		EXPL A 0 A_CustomMissile("SuperRocketBit2I",0,0,135)
		EXPL A 0 A_CustomMissile("SuperRocketBit2I",0,0,180)
		EXPL A 0 A_CustomMissile("SuperRocketBit2I",0,0,225)
		EXPL A 0 A_CustomMissile("SuperRocketBit2I",0,0,270)
		EXPL A 0 A_CustomMissile("SuperRocketBit2I",0,0,315)
		EXPL A 0 A_CustomMissile("SuperRocketBit2I",0,0,66)
		EXPL A 0 A_CustomMissile("SuperRocketBit2I",0,0,155)
		EXPL A 0 A_CustomMissile("SuperRocketBit2I",0,0,245)
		TNT1 A 10 
		Stop
	}
}

Actor PlayerTNTRemote1
{
	Speed 6
	Radius 8
	Height 8
	Health 10
	Damage 0
	Gravity 0.65
	Scale 0.5
	PROJECTILE
	-FRIENDLY
	+GRENADETRAIL
	-NOGRAVITY
	-SOLID
	+EXTREMEDEATH
	+HEXENBOUNCE
	+BOUNCEONACTORS
	+FORCERADIUSDMG
	+CANBOUNCEWATER
	+PAINLESS
	+SHOOTABLE
	+DONTREFLECT
	BounceFactor 0.4
	BounceCount 6
	States
	{
	Spawn:
		TNT5 A 0 NoDelay A_RearrangePointers(AAPTR_DEFAULT,AAPTR_TARGET,AAPTR_DEFAULT,4)
		TNT5 A 0 ThrustThingZ(0,random(10,15),0,1)
		TNT5 ABCDEFGH 3 Bright 
		Goto Spawn+3
	Death:
		TNT1 A 0 A_SpawnItemEx("PlayerTNTRemote",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_TRANSFERPOINTERS,0)
		Stop
	}
}

Actor PlayerTNTRemote2 : PlayerTNTRemote1 { Speed 7 }

Actor PlayerTNTRemote3 : PlayerTNTRemote1 { Speed 9 }

Actor PlayerTNTRemote4 : PlayerTNTRemote1
{
	Speed 10
	States
	{
	Spawn:
		TNT5 A 0 NoDelay A_RearrangePointers(AAPTR_DEFAULT,AAPTR_TARGET,AAPTR_DEFAULT,4)
		TNT5 A 0 ThrustThingZ(0,random(12,14),0,1)
		TNT5 ABCDEFGH 3 Bright 
		Goto Spawn+3
	}
}

Actor PlayerTNTRemote5 : PlayerTNTRemote4 { Speed 12 }

Actor PlayerTNTRemote6 : PlayerTNTRemote4 { Speed 13 }

Actor PlayerTNTRemote7 : PlayerTNTRemote1
{
	Speed 15
	States
	{
	Spawn:
		TNT5 A 0 NoDelay A_RearrangePointers(AAPTR_DEFAULT,AAPTR_TARGET,AAPTR_DEFAULT,4)
		TNT5 A 0 ThrustThingZ(0,random(14,16),0,1)
		TNT5 ABCDEFGH 3 Bright 
		Goto Spawn+3
	}
}

Actor PlayerTNTRemote8 : PlayerTNTRemote7 { Speed 16 }

Actor PlayerTNTRemote9 : PlayerTNTRemote7 { Speed 18 }

Actor PlayerTNTRemoteA : PlayerTNTRemote1
{
	Speed 19
	States
	{
	Spawn:
		TNT5 A 0 NoDelay A_RearrangePointers(AAPTR_DEFAULT,AAPTR_TARGET,AAPTR_DEFAULT,4)
		TNT5 A 0 ThrustThingZ(0,random(16,18),0,1)
		TNT5 ABCDEFGH 3 Bright 
		Goto Spawn+3
	}
}

Actor PlayerTNTRemoteB : PlayerTNTRemoteA { Speed 21 }

Actor PlayerTNTRemoteC : PlayerTNTRemoteA { Speed 22 }

Actor PlayerTNTRemoteD : PlayerTNTRemote1
{
	Speed 24
	States
	{
	Spawn:
		TNT5 A 0 NoDelay A_RearrangePointers(AAPTR_DEFAULT,AAPTR_TARGET,AAPTR_DEFAULT,4)
		TNT5 A 0 ThrustThingZ(0,random(18,20),0,1)
		TNT5 ABCDEFGH 3 Bright
		Goto Spawn+3
	}
}

Actor PlayerTNTRemoteE : PlayerTNTRemoteD { Speed 25 }

Actor PlayerTNTRemoteF : PlayerTNTRemoteD { Speed 27 }

Actor PlayerTNTRemoteG : PlayerTNTRemoteD { Speed 28 }

Actor PlayerTNTRemoteDrop : PlayerTNTRemote1
{
	BounceFactor 0.3
	BounceCount 3
	Speed 3
	States
	{
	Spawn:
		TNT5 A 0 NoDelay A_RearrangePointers(AAPTR_DEFAULT,AAPTR_TARGET,AAPTR_DEFAULT,4)
		TNT5 ABCDEFGH 3 Bright 
		Goto Spawn+3
	}
}

Actor RemoteDetonatorDrop : CustomInventory
{
	Inventory.MaxAmount 1
	States
	{
	Use:
		TNT1 A 0
		TNT1 A 0 A_SpawnItemEx("DroppedRemoteDetonator",0,0,32,8,0,0,0,SXF_NOCHECKPOSITION,0)
		Stop
	}
}

Actor DroppedRemoteDetonator
{
	Radius 16
	Height 20
	Scale 0.35
	States
	{
	Spawn:
		REMD A 15
		TNT1 A 0 A_SpawnItemEx("AEoDRemoteDetonatorNoAmmo",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER,0)
		Stop
	}
}

Actor AEoDRemoteDetonatorNoAmmo : AEoDRemoteDetonatorItem
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL
	Scale 0.35
	Inventory.Amount 1
	Inventory.PickupSound "BloodShotgun/Pickup"
	Inventory.PickupMessage "Picked up the remote detonator."
	States
	{
	Spawn:
		REMD A -1
		Loop
	Pickup:
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",1) <= 0,"Nothing")
		TNT1 A 0 A_JumpIfInventory("AEGrenade",1,"Ammo")
		TNT1 A 0 A_JumpIfInventory("AEoDRemoteDetonator",1,2)
		TNT1 A 0 A_GiveInventory("Weapon1Count",1)
		TNT1 A 0 A_GiveInventory("RemoteDetonatorDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDRemoteDetonator",1)
		TNT1 A 0 A_TakeInventory("AEGrenade",1)
		TNT1 A 0 	
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDRemoteDetonator",1,"Ammo")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		
		TNT1 A 0 ACS_NamedExecute("s798",0,1,5,0)
		Fail
	Ammo:
		TNT1 A 0 A_TakeInventory("AEGrenade",1)
		TNT1 A 0 A_JumpIfInventory("AEoDRemoteDetonator",1,2)
		TNT1 A 0 A_GiveInventory("Weapon1Count",1)
		TNT1 A 0 A_GiveInventory("RemoteDetonatorDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDRemoteDetonator",1)
		Stop
	}
}

//==================================================================================
//==================================================================================

//==================================================================================
//==================================================================================

Actor AEoDProxDetonatorItem : CustomInventory 6120
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL
	Scale 0.45
	Inventory.Amount 1
	Inventory.PickupSound "BloodShotgun/Pickup"
	Inventory.PickupMessage "Picked up the proximity detonator."
	States
	{
	Spawn:
		PRXD A -1
		Loop
	Pickup:
		TNT1 A 0 A_JumpIfInventory("AEoDProxDetonator",1,"Ammo")
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",1) <= 0,"Nothing")
		TNT1 A 0 A_GiveInventory("Weapon1Count",1)
		TNT1 A 0 A_GiveInventory("ProxDetonatorDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDProxDetonator",1)
		TNT1 A 0 	
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDProxDetonator",1,"Ammo")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		
		TNT1 A 0 ACS_NamedExecute("s798",0,1,4,0)
		Fail
	Ammo:
		TNT1 A 0 A_GiveInventory("AEGrenade",1)
		Stop
	}
}

Actor AEoDProxDetonator : Weapon // 6120
{
	+FLOORCLIP
	+WEAPON.CHEATNOTWEAPON
	+INVENTORY.IGNORESKILL
	Weapon.AmmoType "AEGrenade"
	Weapon.AmmoType2 "AEGrenade"
	Weapon.AmmoGive1 1
	Weapon.AmmoUse 1
	Weapon.AmmoUse2 1
	Weapon.SelectionOrder 30000
	+WEAPON.NOAUTOAIM
	Scale 0.45
	Inventory.PickupSound "BloodShotgun/Pickup"
	Weapon.UpSound "weapons/tnt/select"
	Inventory.PickupMessage "Picked up the proximity detonator."
	Tag "Proximity detonator"
	States
	{
	Spawn:
		PRXD A 8
		PRXD BCDE 2
		Loop
	Ready:
		DYN3 A 0 A_JumpIfInventory("AEGrenade",1,7)
		DYN3 AAAAAA 0 A_CheckReload
		Goto Deselect+5
		
		DYN3 ABCD 1
		DYN3 EEEEEEEEFFGGHHII 1 A_WeaponReady
		Goto Ready+11
	Deselect:
		DYN3 A 0 A_TakeInventory("TNTThrowForce",999999)
		DYN3 JKLM 1
		TNT1 A 0 	
		TNT1 A 1 A_Lower
		TNT1 A 0 A_Lower
		Goto Deselect+5
	Select:
		DYN3 A 1 A_TakeInventory("TNTThrowForce",999999)
		TNT1 A 0 	
		TNT1 AA 0 A_Raise
		Goto Select+1
	Fire:
		DYN3 E 0 A_JumpIfInventory("TNTProxScan",8,245)
		DYN3 E 0 A_JumpIfInventory("TNTProxScan",7,234)
		DYN3 E 0 A_JumpIfInventory("TNTProxScan",6,223)
		DYN3 E 0 A_JumpIfInventory("TNTProxScan",5,212)
		DYN3 E 0 A_JumpIfInventory("TNTProxScan",4,201)
		DYN3 E 0 A_JumpIfInventory("TNTProxScan",3,190)
		DYN3 E 0 A_JumpIfInventory("TNTProxScan",2,179)
		DYN3 E 0 A_JumpIfInventory("TNTProxScan",1,168)
		DYN3 E 0 A_JumpIfInventory("TNTThrowForce",16,168)
		DYN3 E 0 A_JumpIfInventory("TNTThrowForce",15,151)
		DYN3 E 0 A_JumpIfInventory("TNTThrowForce",14,141)
		DYN3 E 0 A_JumpIfInventory("TNTThrowForce",13,131)
		DYN3 E 0 A_JumpIfInventory("TNTThrowForce",12,121)
		DYN3 E 0 A_JumpIfInventory("TNTThrowForce",11,111)
		DYN3 E 0 A_JumpIfInventory("TNTThrowForce",10,101)
		DYN3 E 0 A_JumpIfInventory("TNTThrowForce",9,91)
		DYN3 E 0 A_JumpIfInventory("TNTThrowForce",8,81)
		DYN3 E 0 A_JumpIfInventory("TNTThrowForce",7,71)
		DYN3 E 0 A_JumpIfInventory("TNTThrowForce",6,61)
		DYN3 E 0 A_JumpIfInventory("TNTThrowForce",5,51)
		DYN3 E 0 A_JumpIfInventory("TNTThrowForce",4,41)
		DYN3 E 0 A_JumpIfInventory("TNTThrowForce",3,31)
		DYN3 E 0 A_JumpIfInventory("TNTThrowForce",2,21)
		DYN3 E 0 A_JumpIfInventory("TNTThrowForce",1,11)
		DYN3 E 0 A_GiveInventory("TNTThrowForce",1)
		DYN3 E 2 A_GunFlash
		DYN3 E 0 A_ReFire
		DY3T A 2
		TNT1 A 9
		DY3T BC 2 
		DY3T D 0 A_PlayWeaponSound("caleb/tnt")
		DY3T D 0 A_TakeInventory("TNTThrowForce",999999)
		DY3T D 2 A_FireCustomMissile("PlayerTNTProx1",0,1,8,0)
		Goto Fire+170
		
		DYN3 E 2 A_GiveInventory("TNTThrowForce",1)
		DYN3 E 0 A_Refire
		DY3T A 2
		TNT1 A 9
		DY3T BC 2
		DY3T D 0 A_PlayWeaponSound("caleb/tnt")
		DY3T D 0 A_TakeInventory("TNTThrowForce",999999)
		DY3T D 2 A_FireCustomMissile("PlayerTNTProx2",0,1,8,0)
		Goto Fire+170
		
		DYN3 E 2 A_GiveInventory("TNTThrowForce",1)
		DYN3 E 0 A_Refire
		DY3T A 2
		TNT1 A 9
		DY3T BC 2
		DY3T D 0 A_PlayWeaponSound("caleb/tnt")
		DY3T D 0 A_TakeInventory("TNTThrowForce",999999)
		DY3T D 2 A_FireCustomMissile("PlayerTNTProx3",0,1,8,0)
		Goto Fire+170
		
		DYN3 E 2 A_GiveInventory("TNTThrowForce",1)
		DYN3 E 0 A_Refire
		DY3T A 2
		TNT1 A 9
		DY3T BC 2
		DY3T D 0 A_PlayWeaponSound("caleb/tnt")
		DY3T D 0 A_TakeInventory("TNTThrowForce",999999)
		DY3T D 2 A_FireCustomMissile("PlayerTNTProx4",0,1,8,0)
		Goto Fire+170
		
		DYN3 F 2 A_GiveInventory("TNTThrowForce",1)
		DYN3 F 0 A_Refire
		DY3T A 2
		TNT1 A 9
		DY3T BC 2
		DY3T D 0 A_PlayWeaponSound("caleb/tnt")
		DY3T D 0 A_TakeInventory("TNTThrowForce",999999)
		DY3T D 2 A_FireCustomMissile("PlayerTNTProx5",0,1,8,0)
		Goto Fire+170
		
		DYN3 G 2 A_GiveInventory("TNTThrowForce",1)
		DYN3 G 0 A_Refire
		DY3T A 2
		TNT1 A 9
		DY3T BC 2
		DY3T D 0 A_PlayWeaponSound("caleb/tnt")
		DY3T D 0 A_TakeInventory("TNTThrowForce",999999)
		DY3T D 2 A_FireCustomMissile("PlayerTNTProx6",0,1,8,0)
		Goto Fire+170
		
		DYN3 H 1 A_GiveInventory("TNTThrowForce",1)
		DYN3 H 0 A_Refire
		DY3T A 2
		TNT1 A 9
		DY3T BC 2
		DY3T D 0 A_PlayWeaponSound("caleb/tnt")
		DY3T D 0 A_TakeInventory("TNTThrowForce",999999)
		DY3T D 2 A_FireCustomMissile("PlayerTNTProx7",0,1,8,0)
		Goto Fire+170
		
		DYN3 I 2 A_GiveInventory("TNTThrowForce",1)
		DYN3 I 0 A_Refire
		DY3T A 2
		TNT1 A 9
		DY3T BC 2
		DY3T D 0 A_PlayWeaponSound("caleb/tnt")
		DY3T D 0 A_TakeInventory("TNTThrowForce",999999)
		DY3T D 2 A_FireCustomMissile("PlayerTNTProx8",0,1,8,0)
		Goto Fire+170
		
		DYN3 E 2 A_GiveInventory("TNTThrowForce",1)
		DYN3 E 0 A_Refire
		DY3T A 2
		TNT1 A 9
		DY3T BC 2
		DY3T D 0 A_PlayWeaponSound("caleb/tnt")
		DY3T D 0 A_TakeInventory("TNTThrowForce",999999)
		DY3T D 2 A_FireCustomMissile("PlayerTNTProx9",0,1,8,0)
		Goto Fire+170
		
		DYN3 E 2 A_GiveInventory("TNTThrowForce",1)
		DYN3 E 0 A_Refire
		DY3T A 2
		TNT1 A 9
		DY3T BC 2
		DY3T D 0 A_PlayWeaponSound("caleb/tnt")
		DY3T D 0 A_TakeInventory("TNTThrowForce",999999)
		DY3T D 2 A_FireCustomMissile("PlayerTNTProxA",0,1,8,0)
		Goto Fire+170
		
		DYN3 E 2 A_GiveInventory("TNTThrowForce",1)
		DYN3 E 0 A_Refire
		DY3T A 2
		TNT1 A 9
		DY3T BC 2
		DY3T D 0 A_PlayWeaponSound("caleb/tnt")
		DY3T D 0 A_TakeInventory("TNTThrowForce",999999)
		DY3T D 2 A_FireCustomMissile("PlayerTNTProxB",0,1,8,0)
		Goto Fire+170
		
		DYN3 E 2 A_GiveInventory("TNTThrowForce",1)
		DYN3 E 0 A_Refire
		DY3T A 2
		TNT1 A 9
		DY3T BC 2
		DY3T D 0 A_PlayWeaponSound("caleb/tnt")
		DY3T D 0 A_TakeInventory("TNTThrowForce",999999)
		DY3T D 2 A_FireCustomMissile("PlayerTNTProxC",0,1,8,0)
		Goto Fire+170
		
		DYN3 F 2 A_GiveInventory("TNTThrowForce",1)
		DYN3 F 0 A_Refire
		DY3T A 2
		TNT1 A 9
		DY3T BC 2
		DY3T D 0 A_PlayWeaponSound("caleb/tnt")
		DY3T D 0 A_TakeInventory("TNTThrowForce",999999)
		DY3T D 2 A_FireCustomMissile("PlayerTNTProxD",0,1,8,0)
		Goto Fire+170
		
		DYN3 G 2 A_GiveInventory("TNTThrowForce",1)
		DYN3 G 0 A_Refire
		DY3T A 2
		TNT1 A 9
		DY3T BC 2
		DY3T D 0 A_PlayWeaponSound("caleb/tnt")
		DY3T D 0 A_TakeInventory("TNTThrowForce",999999)
		DY3T D 2 A_FireCustomMissile("PlayerTNTProxE",0,1,8,0)
		Goto Fire+170
		
		DYN3 H 2 A_GiveInventory("TNTThrowForce",1)
		DYN3 H 0 A_Refire
		DY3T A 2
		TNT1 A 9
		DY3T BC 2
		DY3T D 0 A_PlayWeaponSound("caleb/tnt")
		DY3T D 0 A_TakeInventory("TNTThrowForce",999999)
		DY3T D 2 A_FireCustomMissile("PlayerTNTProxF",0,1,8,0)
		Goto Fire+170
		
		DYN3 I 0 A_GiveInventory("TNTProxScan",1)
		DYN3 I 2 A_GiveInventory("TNTThrowForce",1)
		DYN3 I 0 A_Refire
		DY3T A 2
		TNT1 A 9
		DY3T BC 2
		DY3T D 0 A_PlayWeaponSound("caleb/tnt")
		DY3T D 0 A_TakeInventory("TNTThrowForce",999999)
		DY3T D 2 A_FireCustomMissile("PlayerTNTProxG",0,1,8,0)
		Goto Fire+170
		
		DY3T EFGHI 2
		Goto Ready
		
		DYN3 E 2 A_GiveInventory("TNTProxScan",1)
		DYN3 E 0 A_Refire
		DY3T A 2
		TNT1 A 9
		DY3T BC 2
		DY3T D 0 A_PlayWeaponSound("caleb/tnt")
		DY3T D 0 A_TakeInventory("TNTThrowForce",999999)
		DY3T D 0 A_TakeInventory("TNTProxScan",8)
		DY3T D 2 A_FireCustomMissile("PlayerTNTProxG",0,1,8,0)
		Goto Fire+170
		
		DYN3 E 2 A_GiveInventory("TNTProxScan",1)
		DYN3 E 0 A_Refire
		DY3T A 2
		TNT1 A 9
		DY3T BC 2
		DY3T D 0 A_PlayWeaponSound("caleb/tnt")
		DY3T D 0 A_TakeInventory("TNTThrowForce",999999)
		DY3T D 0 A_TakeInventory("TNTProxScan",8)
		DY3T D 2 A_FireCustomMissile("PlayerTNTProxG",0,1,8,0)
		Goto Fire+170
		
		DYN3 E 2 A_GiveInventory("TNTProxScan",1)
		DYN3 E 0 A_Refire
		DY3T A 2
		TNT1 A 9
		DY3T BC 2
		DY3T D 0 A_PlayWeaponSound("caleb/tnt")
		DY3T D 0 A_TakeInventory("TNTThrowForce",999999)
		DY3T D 0 A_TakeInventory("TNTProxScan",8)
		DY3T D 2 A_FireCustomMissile("PlayerTNTProxG",0,1,8,0)
		Goto Fire+170
		
		DYN3 E 2 A_GiveInventory("TNTProxScan",1)
		DYN3 E 0 A_Refire
		DY3T A 2
		TNT1 A 9
		DY3T BC 2
		DY3T D 0 A_PlayWeaponSound("caleb/tnt")
		DY3T D 0 A_TakeInventory("TNTThrowForce",999999)
		DY3T D 0 A_TakeInventory("TNTProxScan",8)
		DY3T D 2 A_FireCustomMissile("PlayerTNTProxG",0,1,8,0)
		Goto Fire+170
		
		DYN3 F 2 A_GiveInventory("TNTProxScan",1)
		DYN3 F 0 A_Refire
		DY3T A 2
		TNT1 A 9
		DY3T BC 2
		DY3T D 0 A_PlayWeaponSound("caleb/tnt")
		DY3T D 0 A_TakeInventory("TNTThrowForce",999999)
		DY3T D 0 A_TakeInventory("TNTProxScan",8)
		DY3T D 2 A_FireCustomMissile("PlayerTNTProxG",0,1,8,0)
		Goto Fire+170
		
		DYN3 G 2 A_GiveInventory("TNTProxScan",1)
		DYN3 G 0 A_Refire
		DY3T A 2
		TNT1 A 9
		DY3T BC 2
		DY3T D 0 A_PlayWeaponSound("caleb/tnt")
		DY3T D 0 A_TakeInventory("TNTThrowForce",999999)
		DY3T D 0 A_TakeInventory("TNTProxScan",8)
		DY3T D 2 A_FireCustomMissile("PlayerTNTProxG",0,1,8,0)
		Goto Fire+170
		
		DYN3 H 2 A_GiveInventory("TNTProxScan",1)
		DYN3 H 0 A_Refire
		DY3T A 2
		TNT1 A 9
		DY3T BC 2
		DY3T D 0 A_PlayWeaponSound("caleb/tnt")
		DY3T D 0 A_TakeInventory("TNTThrowForce",999999)
		DY3T D 0 A_TakeInventory("TNTProxScan",8)
		DY3T D 2 A_FireCustomMissile("PlayerTNTProxG",0,1,8,0)
		Goto Fire+170
		
		DYN3 I 2 A_TakeInventory("TNTProxScan",7)
		DYN3 I 0 A_Refire
		DY3T A 2
		TNT1 A 9
		DY3T BC 2
		DY3T D 0 A_PlayWeaponSound("caleb/tnt")
		DY3T D 0 A_TakeInventory("TNTThrowForce",999999)
		DY3T D 0 A_TakeInventory("TNTProxScan",8)
		DY3T D 2 A_FireCustomMissile("PlayerTNTProxG",0,1,8,0)
		Goto Fire+170
	AltFire:
		DY3T A 2 A_PlayWeaponSound("caleb/tnt")
		TNT1 A 8 A_FireCustomMissile("PlayerTNTProxDrop",0,1,8,0)
		DY3T NOPQ 2
		Goto Ready
	Flash:
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",16,32)
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",15,30)
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",14,28)
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",13,26)
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",12,24)
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",11,22)
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",10,20)
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",9,18)
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",8,16)
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",7,14)
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",6,12)
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",5,10)
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",4,8)
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",3,6)
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",2,4)
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",1,2)
		TNT1 A 0
		Stop
		DYNG A 2 Bright
		Loop
		DYNG B 2 Bright
		Loop
		DYNG C 2 Bright
		Loop
		DYNG D 2 Bright
		Loop
		DYNG E 2 Bright
		Loop
		DYNG F 2 Bright
		Loop
		DYNG G 2 Bright
		Loop
		DYNG H 2 Bright
		Loop
		DYNG I 2 Bright
		Loop
		DYNG J 2 Bright
		Loop
		DYNG K 2 Bright
		Loop
		DYNG L 2 Bright
		Loop
		DYNG M 2 Bright
		Loop
		DYNG N 2 Bright
		Loop
		DYNG O 2 Bright
		Loop
		DYNG P 2 Bright
		Loop
	}
}

Actor TNTProxScan : Inventory
{
	Inventory.Amount 1
	Inventory.MaxAmount 8
}

Actor PlayerTNTProx1
{
	Speed 6
	Radius 8
	Height 8
	Scale 0.5
	Damage 0
	Gravity 0.65
	PROJECTILE
	+GRENADETRAIL
	-NOGRAVITY
	+EXTREMEDEATH
	+HEXENBOUNCE
	+BOUNCEONACTORS
	+CANBOUNCEWATER
	+PAINLESS
	BounceFactor 0.4
	BounceCount 6
	States
	{
	Spawn:
		TNT3 A 0
		TNT3 A 0 ThrustThingZ(0,random(10,15),0,1)
		TNT3 FGHIJKLM 3 Bright 
		Goto Spawn+2
	Death:
		TNT3 A 0 A_SpawnItemEx("ProxMine",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION,0)
		TNT3 A 0 A_SpawnItemEx("ProxMineF",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION,0)
		Stop
	}
}

Actor PlayerTNTProx2 : PlayerTNTProx1 { Speed 7 }

Actor PlayerTNTProx3 : PlayerTNTProx1 { Speed 9 }

Actor PlayerTNTProx4 : PlayerTNTProx1
{
	Speed 10
	States
	{
	Spawn:
		TNT3 A 0
		TNT3 A 0 ThrustThingZ(0,random(12,14),0,1)
		TNT3 FGHIJKLM 3 Bright
		Goto Spawn+2
	}
}

Actor PlayerTNTProx5 : PlayerTNTProx4 { Speed 12 }

Actor PlayerTNTProx6 : PlayerTNTProx4 { Speed 13 }

Actor PlayerTNTProx7 : PlayerTNTProx1
{
	Speed 15
	States
	{
	Spawn:
		TNT3 A 0 Thing_ChangeTID(0,4567)
		TNT3 A 0 ThrustThingZ(0,random(14,16),0,1)
		TNT3 FGHIJKLM 3 Bright
		Goto Spawn+2
	}
}

Actor PlayerTNTProx8 : PlayerTNTProx7 { Speed 16 }

Actor PlayerTNTProx9 : PlayerTNTProx7 { Speed 18 }

Actor PlayerTNTProxA : PlayerTNTProx1
{
	Speed 19
	States
	{
	Spawn:
		TNT3 A 0
		TNT3 A 0 ThrustThingZ(0,random(16,18),0,1)
		TNT3 FGHIJKLM 3 Bright
		Goto Spawn+2
	}
}

Actor PlayerTNTProxB : PlayerTNTProxA { Speed 21 }

Actor PlayerTNTProxC : PlayerTNTProxA { Speed 22 }

Actor PlayerTNTProxD : PlayerTNTProx1
{
	Speed 24
	States
	{
	Spawn:
		TNT3 A 0
		TNT3 A 0 ThrustThingZ(0,random(18,20),0,1)
		TNT3 FGHIJKLM 3 Bright
		Goto Spawn+2
	}
}

Actor PlayerTNTProxE : PlayerTNTProxD { Speed 25 }

Actor PlayerTNTProxF : PlayerTNTProxD { Speed 27 }

Actor PlayerTNTProxG : PlayerTNTProxD { Speed 28 }


Actor PlayerTNTProxDrop : PlayerTNTProx1
{
	BounceFactor 0.3
	BounceCount 3
	Speed 3
	States
	{
	Spawn:
		TNT3 FGHIJKLM 3 Bright
		Loop
	}
}

Actor ProxDetonatorDrop : CustomInventory
{
	Inventory.MaxAmount 1
	States
	{
	Use:
		TNT1 A 0
		TNT1 A 0 A_SpawnItemEx("DroppedProxDetonator",0,0,32,8,0,0,0,SXF_NOCHECKPOSITION,0)
		Stop
	}
}

Actor DroppedProxDetonator
{
	Radius 16
	Height 20
	Scale 0.45
	States
	{
	Spawn:
		PRXD A 15
		TNT1 A 0 A_SpawnItemEx("AEoDProxDetonatorNoAmmo",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER,0)
		Stop
	}
}

Actor AEoDProxDetonatorNoAmmo : AEoDProxDetonatorItem
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL
	Scale 0.45
	Inventory.Amount 1
	Inventory.PickupSound "BloodShotgun/Pickup"
	Inventory.PickupMessage "Picked up the proximity detonator."
	States
	{
	Spawn:
		PRXD A -1
		Loop
	Pickup:
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",1) <= 0,"Nothing")
		TNT1 A 0 A_JumpIfInventory("AEGrenade",1,"Ammo")
		TNT1 A 0 A_JumpIfInventory("AEoDProxDetonator",1,2)
		TNT1 A 0 A_GiveInventory("Weapon1Count",1)
		TNT1 A 0 A_GiveInventory("ProxDetonatorDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDProxDetonator",1)
		TNT1 A 0 A_TakeInventory("AEGrenade",1)
		TNT1 A 0 	
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDProxDetonator",1,"Ammo")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		
		TNT1 A 0 ACS_NamedExecute("s798",0,1,4,0)
		Fail
	Ammo:
		TNT1 A 0 A_TakeInventory("AEGrenade",1)
		TNT1 A 0 A_JumpIfInventory("AEoDProxDetonator",1,2)
		TNT1 A 0 A_GiveInventory("Weapon1Count",1)
		TNT1 A 0 A_GiveInventory("ProxDetonatorDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDProxDetonator",1)
		Stop
	}
}


//==================================================================================
//==================================================================================

//==================================================================================
//==================================================================================

Actor AEoDGlyphItem : CustomInventory 6150
{
	+FLOORCLIP
	+FLOATBOB
	+INVENTORY.IGNORESKILL
	Scale 0.12
	Inventory.Amount 1
	Inventory.PickupSound "BloodShotgun/Pickup"
	Inventory.PickupMessage "You found the Glyph!"
	States
	{
	Spawn:
		WGLY A -1
		Loop
	Pickup:
		TNT1 A 0 A_JumpIfInventory("AEoDGlyph",1,"Ammo")
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",1) <= 0,"Nothing")
		TNT1 A 0 A_GiveInventory("Weapon1Count",1)
		TNT1 A 0 A_GiveInventory("GlyphDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDGlyph",1)
		TNT1 A 0 	
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDGlyph",1,"Ammo")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		
		TNT1 A 0 ACS_NamedExecute("s798",0,1,3,0)
		Fail
	Ammo:
		TNT1 A 0 A_GiveInventory("AEGrenade",3)
		Stop
	}
}

Actor AEoDGlyph : Weapon // 6150
{
	+FLOORCLIP
	+FLOATBOB
	+INVENTORY.IGNORESKILL
	+WEAPON.NOALERT
	Weapon.AmmoType "AEGrenade"
	Weapon.AmmoGive1 3
	Weapon.AmmoUse 1
	Weapon.SelectionOrder 29750
	+WEAPON.NOAUTOAIM
	+WEAPON.CHEATNOTWEAPON
	+WEAPON.NOALERT
	Scale 0.12
	Inventory.PickupSound "BloodShotgun/Pickup"
	Weapon.UpSound "weapons/tnt/select"
	Inventory.PickupMessage "You found the Glyph!"
	Tag "Glyph"
	States
	{
	Spawn:
		WGLY A 3
		Loop
	Ready:
		GLY1 A 0 A_JumpIfInventory("GlyphModeCheck",2,4)
		GLY1 A 0 A_JumpIfInventory("GlyphModeCheck",1,2)
		GLY3 B 1 A_WeaponReady
		Loop
		GLY1 A 1 A_WeaponReady
		Loop
		GLY1 N 1 A_WeaponReady
		Loop
	Deselect:
		GLY1 A 0 A_TakeInventory("TNTThrowForce",999999)
		GLY1 A 0 A_JumpIfInventory("GlyphModeCheck",2,8)
		GLY1 A 0 A_JumpIfInventory("GlyphModeCheck",1,4)
		GLY3 B 1 	
		GLY3 BB 0 A_Lower
		Goto Deselect+3
		
		GLY1 A 1 	
		GLY1 AA 0 A_Lower
		Goto Deselect+6
		
		GLY1 N 1 	
		GLY1 NN 0 A_Lower
		Goto Deselect+9
	Select:
		GLY1 A 0 A_TakeInventory("TNTThrowForce",999999)
		GLY1 A 0 A_JumpIfInventory("GlyphModeCheck",2,8)
		GLY1 A 0 A_JumpIfInventory("GlyphModeCheck",1,4)
		GLY3 B 1 	
		TNT1 AA 0 A_Raise
		Goto Select+3
		
		GLY1 A 1 	
		TNT1 AA 0 A_Raise
		Goto Select+6
		
		GLY1 N 1 	
		TNT1 AA 0 A_Raise
		Goto Select+9
	Fire:
	FireFire:
		GLY3 B 0 A_AlertMonsters
		GLY3 B 0 A_JumpIfInventory("GlyphModeCheck",2,"FireIce")
		GLY3 B 0 A_JumpIfInventory("GlyphModeCheck",1,"FirePoison")
		GLY3 B 0 A_JumpIfInventory("TNTThrowForce",16,"FireThrowG")
		GLY3 B 0 A_JumpIfInventory("TNTThrowForce",15,"FireThrowG")
		GLY3 B 0 A_JumpIfInventory("TNTThrowForce",14,"FireThrowF")
		GLY3 B 0 A_JumpIfInventory("TNTThrowForce",13,"FireThrowE")
		GLY3 B 0 A_JumpIfInventory("TNTThrowForce",12,"FireThrowD")
		GLY3 B 0 A_JumpIfInventory("TNTThrowForce",11,"FireThrowC")
		GLY3 B 0 A_JumpIfInventory("TNTThrowForce",10,"FireThrowB")
		GLY3 B 0 A_JumpIfInventory("TNTThrowForce",9,"FireThrowA")
		GLY3 B 0 A_JumpIfInventory("TNTThrowForce",8,"FireThrow9")
		GLY3 B 0 A_JumpIfInventory("TNTThrowForce",7,"FireThrow8")
		GLY3 B 0 A_JumpIfInventory("TNTThrowForce",6,"FireThrow7")
		GLY3 B 0 A_JumpIfInventory("TNTThrowForce",5,"FireThrow6")
		GLY3 B 0 A_JumpIfInventory("TNTThrowForce",4,"FireThrow5")
		GLY3 B 0 A_JumpIfInventory("TNTThrowForce",3,"FireThrow4")
		GLY3 B 0 A_JumpIfInventory("TNTThrowForce",2,"FireThrow3")
		GLY3 B 0 A_JumpIfInventory("TNTThrowForce",1,"FireThrow2")
		GLY3 B 0 A_GiveInventory("TNTThrowForce",1)
		GLY3 B 2 A_GunFlash
		GLY3 B 0 A_ReFire
	FireThrow1:
		GLY3 CDEFG 1
		TNT1 A 9
		GLY3 HI 1
		GLY3 J 0 A_PlayWeaponSound("caleb/tnt")
		GLY3 J 0 A_TakeInventory("TNTThrowForce",999999)
		GLY3 J 1 A_FireCustomMissile("FireGlyph1",0,1,8,0)
		GLY1 JKLM 1
		TNT1 A 8
		GLY3 KLMN 1
		Goto Ready
	FireThrow2:
		GLY3 B 2 A_GiveInventory("TNTThrowForce",1)
		GLY1 A 0 A_Refire
		GLY3 CDEFG 1
		TNT1 A 9
		GLY3 HI 1
		GLY3 J 0 A_PlayWeaponSound("caleb/tnt")
		GLY3 J 0 A_TakeInventory("TNTThrowForce",999999)
		GLY3 J 1 A_FireCustomMissile("FireGlyph2",0,1,8,0)
		GLY1 JKLM 1
		TNT1 A 8
		GLY3 KLMN 1
		Goto Ready
	FireThrow3:
		GLY3 B 2 A_GiveInventory("TNTThrowForce",1)
		GLY1 A 0 A_Refire
		GLY3 CDEFG 1
		TNT1 A 9
		GLY3 HI 1
		GLY3 J 0 A_PlayWeaponSound("caleb/tnt")
		GLY3 J 0 A_TakeInventory("TNTThrowForce",999999)
		GLY3 J 1 A_FireCustomMissile("FireGlyph3",0,1,8,0)
		GLY1 JKLM 1
		TNT1 A 8
		GLY3 KLMN 1
		Goto Ready
	FireThrow4:
		GLY3 B 2 A_GiveInventory("TNTThrowForce",1)
		GLY1 A 0 A_Refire
		GLY3 CDEFG 1
		TNT1 A 9
		GLY3 HI 1
		GLY3 J 0 A_PlayWeaponSound("caleb/tnt")
		GLY3 J 0 A_TakeInventory("TNTThrowForce",999999)
		GLY3 J 1 A_FireCustomMissile("FireGlyph4",0,1,8,0)
		GLY1 JKLM 1
		TNT1 A 8
		GLY3 KLMN 1
		Goto Ready
	FireThrow5:
		GLY3 B 2 A_GiveInventory("TNTThrowForce",1)
		GLY1 A 0 A_Refire
		GLY3 CDEFG 1
		TNT1 A 9
		GLY3 HI 1
		GLY3 J 0 A_PlayWeaponSound("caleb/tnt")
		GLY3 J 0 A_TakeInventory("TNTThrowForce",999999)
		GLY3 J 1 A_FireCustomMissile("FireGlyph5",0,1,8,0)
		GLY1 JKLM 1
		TNT1 A 8
		GLY3 KLMN 1
		Goto Ready
	FireThrow6:
		GLY3 B 2 A_GiveInventory("TNTThrowForce",1)
		GLY1 A 0 A_Refire
		GLY3 CDEFG 1
		TNT1 A 9
		GLY3 HI 1
		GLY3 J 0 A_PlayWeaponSound("caleb/tnt")
		GLY3 J 0 A_TakeInventory("TNTThrowForce",999999)
		GLY3 J 1 A_FireCustomMissile("FireGlyph6",0,1,8,0)
		GLY1 JKLM 1
		TNT1 A 8
		GLY3 KLMN 1
		Goto Ready
	FireThrow7:
		GLY3 B 2 A_GiveInventory("TNTThrowForce",1)
		GLY1 A 0 A_Refire
		GLY3 CDEFG 1
		TNT1 A 9
		GLY3 HI 1
		GLY3 J 0 A_PlayWeaponSound("caleb/tnt")
		GLY3 J 0 A_TakeInventory("TNTThrowForce",999999)
		GLY3 J 1 A_FireCustomMissile("FireGlyph7",0,1,8,0)
		GLY1 JKLM 1
		TNT1 A 8
		GLY3 KLMN 1
		Goto Ready
	FireThrow8:
		GLY3 B 2 A_GiveInventory("TNTThrowForce",1)
		GLY1 A 0 A_Refire
		GLY3 CDEFG 1
		TNT1 A 9
		GLY3 HI 1
		GLY3 J 0 A_PlayWeaponSound("caleb/tnt")
		GLY3 J 0 A_TakeInventory("TNTThrowForce",999999)
		GLY3 J 1 A_FireCustomMissile("FireGlyph8",0,1,8,0)
		GLY1 JKLM 1
		TNT1 A 8
		GLY3 KLMN 1
		Goto Ready
	FireThrow9:
		GLY3 B 2 A_GiveInventory("TNTThrowForce",1)
		GLY1 A 0 A_Refire
		GLY3 CDEFG 1
		TNT1 A 9
		GLY3 HI 1
		GLY3 J 0 A_PlayWeaponSound("caleb/tnt")
		GLY3 J 0 A_TakeInventory("TNTThrowForce",999999)
		GLY3 J 1 A_FireCustomMissile("FireGlyph9",0,1,8,0)
		GLY1 JKLM 1
		TNT1 A 8
		GLY3 KLMN 1
		Goto Ready
	FireThrowA:
		GLY3 B 2 A_GiveInventory("TNTThrowForce",1)
		GLY1 A 0 A_Refire
		GLY3 CDEFG 1
		TNT1 A 9
		GLY3 HI 1
		GLY3 J 0 A_PlayWeaponSound("caleb/tnt")
		GLY3 J 0 A_TakeInventory("TNTThrowForce",999999)
		GLY3 J 1 A_FireCustomMissile("FireGlyphA",0,1,8,0)
		GLY1 JKLM 1
		TNT1 A 8
		GLY3 KLMN 1
		Goto Ready
	FireThrowB:
		GLY3 B 2 A_GiveInventory("TNTThrowForce",1)
		GLY1 A 0 A_Refire
		GLY3 CDEFG 1
		TNT1 A 9
		GLY3 HI 1
		GLY3 J 0 A_PlayWeaponSound("caleb/tnt")
		GLY3 J 0 A_TakeInventory("TNTThrowForce",999999)
		GLY3 J 1 A_FireCustomMissile("FireGlyphB",0,1,8,0)
		GLY1 JKLM 1
		TNT1 A 8
		GLY3 KLMN 1
		Goto Ready
	FireThrowC:
		GLY3 B 2 A_GiveInventory("TNTThrowForce",1)
		GLY1 A 0 A_Refire
		GLY3 CDEFG 1
		TNT1 A 9
		GLY3 HI 1
		GLY3 J 0 A_PlayWeaponSound("caleb/tnt")
		GLY3 J 0 A_TakeInventory("TNTThrowForce",999999)
		GLY3 J 1 A_FireCustomMissile("FireGlyphC",0,1,8,0)
		GLY1 JKLM 1
		TNT1 A 8
		GLY3 KLMN 1
		Goto Ready
	FireThrowD:
		GLY3 B 2 A_GiveInventory("TNTThrowForce",1)
		GLY1 A 0 A_Refire
		GLY3 CDEFG 1
		TNT1 A 9
		GLY3 HI 1
		GLY3 J 0 A_PlayWeaponSound("caleb/tnt")
		GLY3 J 0 A_TakeInventory("TNTThrowForce",999999)
		GLY3 J 1 A_FireCustomMissile("FireGlyphD",0,1,8,0)
		GLY1 JKLM 1
		TNT1 A 8
		GLY3 KLMN 1
		Goto Ready
	FireThrowE:
		GLY3 B 2 A_GiveInventory("TNTThrowForce",1)
		GLY1 A 0 A_Refire
		GLY3 CDEFG 1
		TNT1 A 9
		GLY3 HI 1
		GLY3 J 0 A_PlayWeaponSound("caleb/tnt")
		GLY3 J 0 A_TakeInventory("TNTThrowForce",999999)
		GLY3 J 1 A_FireCustomMissile("FireGlyphE",0,1,8,0)
		GLY1 JKLM 1
		TNT1 A 8
		GLY3 KLMN 1
		Goto Ready
	FireThrowF:
		GLY3 B 2 A_GiveInventory("TNTThrowForce",1)
		GLY1 A 0 A_Refire
		GLY3 CDEFG 1
		TNT1 A 9
		GLY3 HI 1
		GLY3 J 0 A_PlayWeaponSound("caleb/tnt")
		GLY3 J 0 A_TakeInventory("TNTThrowForce",999999)
		GLY3 J 1 A_FireCustomMissile("FireGlyphF",0,1,8,0)
		GLY1 JKLM 1
		TNT1 A 8
		GLY3 KLMN 1
		Goto Ready
	FireThrowG:
		GLY3 B 2 A_GiveInventory("TNTThrowForce",1)
		GLY1 A 0 A_Refire
		GLY3 CDEFG 1
		TNT1 A 9
		GLY3 HI 1
		GLY3 J 0 A_PlayWeaponSound("caleb/tnt")
		GLY3 J 0 A_TakeInventory("TNTThrowForce",999999)
		GLY3 J 1 A_FireCustomMissile("FireGlyphG",0,1,8,0)
		GLY1 JKLM 1
		TNT1 A 8
		GLY3 KLMN 1
		Goto Ready
	FirePoison:
		GLY1 A 0 A_AlertMonsters
		GLY1 A 0 A_JumpIfInventory("GlyphModeCheck",2,"FireIce")
		GLY1 A 0 A_JumpIfInventory("GlyphModeCheck",1,1)
		Goto FireFire
		
		GLY1 A 0 A_JumpIfInventory("TNTThrowForce",16,"PoisonThrowG")
		GLY1 A 0 A_JumpIfInventory("TNTThrowForce",15,"PoisonThrowG")
		GLY1 A 0 A_JumpIfInventory("TNTThrowForce",14,"PoisonThrowF")
		GLY1 A 0 A_JumpIfInventory("TNTThrowForce",13,"PoisonThrowE")
		GLY1 A 0 A_JumpIfInventory("TNTThrowForce",12,"PoisonThrowD")
		GLY1 A 0 A_JumpIfInventory("TNTThrowForce",11,"PoisonThrowC")
		GLY1 A 0 A_JumpIfInventory("TNTThrowForce",10,"PoisonThrowB")
		GLY1 A 0 A_JumpIfInventory("TNTThrowForce",9,"PoisonThrowA")
		GLY1 A 0 A_JumpIfInventory("TNTThrowForce",8,"PoisonThrow9")
		GLY1 A 0 A_JumpIfInventory("TNTThrowForce",7,"PoisonThrow8")
		GLY1 A 0 A_JumpIfInventory("TNTThrowForce",6,"PoisonThrow7")
		GLY1 A 0 A_JumpIfInventory("TNTThrowForce",5,"PoisonThrow6")
		GLY1 A 0 A_JumpIfInventory("TNTThrowForce",4,"PoisonThrow5")
		GLY1 A 0 A_JumpIfInventory("TNTThrowForce",3,"PoisonThrow4")
		GLY1 A 0 A_JumpIfInventory("TNTThrowForce",2,"PoisonThrow3")
		GLY1 A 0 A_JumpIfInventory("TNTThrowForce",1,"PoisonThrow2")
		GLY1 A 0 A_GiveInventory("TNTThrowForce",1)
		GLY1 A 2 A_GunFlash
		GLY1 A 0 A_ReFire
	PoisonThrow1:
		GLY1 BCDEF 1
		TNT1 A 9
		GLY1 GH 1
		GLY1 I 0 A_PlayWeaponSound("caleb/tnt")
		GLY1 I 0 A_TakeInventory("TNTThrowForce",999999)
		GLY1 I 1 A_FireCustomMissile("PoisonGlyph1",0,1,8,0)
		GLY1 JKLM 1
		TNT1 A 8
		GLY1 WXYZ 1
		Goto Ready
	PoisonThrow2:
		GLY1 A 2 A_GiveInventory("TNTThrowForce",1)
		GLY1 A 0 A_Refire
		GLY1 BCDEF 1
		TNT1 A 9
		GLY1 GH 1
		GLY1 I 0 A_PlayWeaponSound("caleb/tnt")
		GLY1 I 0 A_TakeInventory("TNTThrowForce",999999)
		GLY1 I 1 A_FireCustomMissile("PoisonGlyph2",0,1,8,0)
		GLY1 JKLM 1
		TNT1 A 8
		GLY1 WXYZ 1
		Goto Ready
	PoisonThrow3:
		GLY1 A 2 A_GiveInventory("TNTThrowForce",1)
		GLY1 A 0 A_Refire
		GLY1 BCDEF 1
		TNT1 A 9
		GLY1 GH 1
		GLY1 I 0 A_PlayWeaponSound("caleb/tnt")
		GLY1 I 0 A_TakeInventory("TNTThrowForce",999999)
		GLY1 I 1 A_FireCustomMissile("PoisonGlyph3",0,1,8,0)
		GLY1 JKLM 1
		TNT1 A 8
		GLY1 WXYZ 1
		Goto Ready
	PoisonThrow4:
		GLY1 A 2 A_GiveInventory("TNTThrowForce",1)
		GLY1 A 0 A_Refire
		GLY1 BCDEF 1
		TNT1 A 9
		GLY1 GH 1
		GLY1 I 0 A_PlayWeaponSound("caleb/tnt")
		GLY1 I 0 A_TakeInventory("TNTThrowForce",999999)
		GLY1 I 1 A_FireCustomMissile("PoisonGlyph4",0,1,8,0)
		GLY1 JKLM 1
		TNT1 A 8
		GLY1 WXYZ 1
		Goto Ready
	PoisonThrow5:
		GLY1 A 2 A_GiveInventory("TNTThrowForce",1)
		GLY1 A 0 A_Refire
		GLY1 BCDEF 1
		TNT1 A 9
		GLY1 GH 1
		GLY1 I 0 A_PlayWeaponSound("caleb/tnt")
		GLY1 I 0 A_TakeInventory("TNTThrowForce",999999)
		GLY1 I 1 A_FireCustomMissile("PoisonGlyph5",0,1,8,0)
		GLY1 JKLM 1
		TNT1 A 8
		GLY1 WXYZ 1
		Goto Ready
	PoisonThrow6:
		GLY1 A 2 A_GiveInventory("TNTThrowForce",1)
		GLY1 A 0 A_Refire
		GLY1 BCDEF 1
		TNT1 A 9
		GLY1 GH 1
		GLY1 I 0 A_PlayWeaponSound("caleb/tnt")
		GLY1 I 0 A_TakeInventory("TNTThrowForce",999999)
		GLY1 I 1 A_FireCustomMissile("PoisonGlyph6",0,1,8,0)
		GLY1 JKLM 1
		TNT1 A 8
		GLY1 WXYZ 1
		Goto Ready
	PoisonThrow7:
		GLY1 A 2 A_GiveInventory("TNTThrowForce",1)
		GLY1 A 0 A_Refire
		GLY1 BCDEF 1
		TNT1 A 9
		GLY1 GH 1
		GLY1 I 0 A_PlayWeaponSound("caleb/tnt")
		GLY1 I 0 A_TakeInventory("TNTThrowForce",999999)
		GLY1 I 1 A_FireCustomMissile("PoisonGlyph7",0,1,8,0)
		GLY1 JKLM 1
		TNT1 A 8
		GLY1 WXYZ 1
		Goto Ready
	PoisonThrow8:
		GLY1 A 2 A_GiveInventory("TNTThrowForce",1)
		GLY1 A 0 A_Refire
		GLY1 BCDEF 1
		TNT1 A 9
		GLY1 GH 1
		GLY1 I 0 A_PlayWeaponSound("caleb/tnt")
		GLY1 I 0 A_TakeInventory("TNTThrowForce",999999)
		GLY1 I 1 A_FireCustomMissile("PoisonGlyph8",0,1,8,0)
		GLY1 JKLM 1
		TNT1 A 8
		GLY1 WXYZ 1
		Goto Ready
	PoisonThrow9:
		GLY1 A 2 A_GiveInventory("TNTThrowForce",1)
		GLY1 A 0 A_Refire
		GLY1 BCDEF 1
		TNT1 A 9
		GLY1 GH 1
		GLY1 I 0 A_PlayWeaponSound("caleb/tnt")
		GLY1 I 0 A_TakeInventory("TNTThrowForce",999999)
		GLY1 I 1 A_FireCustomMissile("PoisonGlyph9",0,1,8,0)
		GLY1 JKLM 1
		TNT1 A 8
		GLY1 WXYZ 1
		Goto Ready
	PoisonThrowA:
		GLY1 A 2 A_GiveInventory("TNTThrowForce",1)
		GLY1 A 0 A_Refire
		GLY1 BCDEF 1
		TNT1 A 9
		GLY1 GH 1
		GLY1 I 0 A_PlayWeaponSound("caleb/tnt")
		GLY1 I 0 A_TakeInventory("TNTThrowForce",999999)
		GLY1 I 1 A_FireCustomMissile("PoisonGlyphA",0,1,8,0)
		GLY1 JKLM 1
		TNT1 A 8
		GLY1 WXYZ 1
		Goto Ready
	PoisonThrowB:
		GLY1 A 2 A_GiveInventory("TNTThrowForce",1)
		GLY1 A 0 A_Refire
		GLY1 BCDEF 1
		TNT1 A 9
		GLY1 GH 1
		GLY1 I 0 A_PlayWeaponSound("caleb/tnt")
		GLY1 I 0 A_TakeInventory("TNTThrowForce",999999)
		GLY1 I 1 A_FireCustomMissile("PoisonGlyphB",0,1,8,0)
		GLY1 JKLM 1
		TNT1 A 8
		GLY1 WXYZ 1
		Goto Ready
	PoisonThrowC:
		GLY1 A 2 A_GiveInventory("TNTThrowForce",1)
		GLY1 A 0 A_Refire
		GLY1 BCDEF 1
		TNT1 A 9
		GLY1 GH 1
		GLY1 I 0 A_PlayWeaponSound("caleb/tnt")
		GLY1 I 0 A_TakeInventory("TNTThrowForce",999999)
		GLY1 I 1 A_FireCustomMissile("PoisonGlyphC",0,1,8,0)
		GLY1 JKLM 1
		TNT1 A 8
		GLY1 WXYZ 1
		Goto Ready
	PoisonThrowD:
		GLY1 A 2 A_GiveInventory("TNTThrowForce",1)
		GLY1 A 0 A_Refire
		GLY1 BCDEF 1
		TNT1 A 9
		GLY1 GH 1
		GLY1 I 0 A_PlayWeaponSound("caleb/tnt")
		GLY1 I 0 A_TakeInventory("TNTThrowForce",999999)
		GLY1 I 1 A_FireCustomMissile("PoisonGlyphD",0,1,8,0)
		GLY1 JKLM 1
		TNT1 A 8
		GLY1 WXYZ 1
		Goto Ready
	PoisonThrowE:
		GLY1 A 2 A_GiveInventory("TNTThrowForce",1)
		GLY1 A 0 A_Refire
		GLY1 BCDEF 1
		TNT1 A 9
		GLY1 GH 1
		GLY1 I 0 A_PlayWeaponSound("caleb/tnt")
		GLY1 I 0 A_TakeInventory("TNTThrowForce",999999)
		GLY1 I 1 A_FireCustomMissile("PoisonGlyphE",0,1,8,0)
		GLY1 JKLM 1
		TNT1 A 8
		GLY1 WXYZ 1
		Goto Ready
	PoisonThrowF:
		GLY1 A 2 A_GiveInventory("TNTThrowForce",1)
		GLY1 A 0 A_Refire
		GLY1 BCDEF 1
		TNT1 A 9
		GLY1 GH 1
		GLY1 I 0 A_PlayWeaponSound("caleb/tnt")
		GLY1 I 0 A_TakeInventory("TNTThrowForce",999999)
		GLY1 I 1 A_FireCustomMissile("PoisonGlyphF",0,1,8,0)
		GLY1 JKLM 1
		TNT1 A 8
		GLY1 WXYZ 1
		Goto Ready
	PoisonThrowG:
		GLY1 A 2 A_GiveInventory("TNTThrowForce",1)
		GLY1 A 0 A_Refire
		GLY1 BCDEF 1
		TNT1 A 9
		GLY1 GH 1
		GLY1 I 0 A_PlayWeaponSound("caleb/tnt")
		GLY1 I 0 A_TakeInventory("TNTThrowForce",999999)
		GLY1 I 1 A_FireCustomMissile("PoisonGlyphG",0,1,8,0)
		GLY1 JKLM 1
		TNT1 A 8
		GLY1 WXYZ 1
		Goto Ready
	FireIce:
		GLY1 N 0 A_AlertMonsters
		GLY1 N 0 A_JumpIfInventory("GlyphModeCheck",2,2)
		GLY1 N 0 A_JumpIfInventory("GlyphModeCheck",1,"FirePoison")
		Goto FireFire
		
		GLY1 N 0 A_JumpIfInventory("TNTThrowForce",16,"IceThrowG")
		GLY1 N 0 A_JumpIfInventory("TNTThrowForce",15,"IceThrowG")
		GLY1 N 0 A_JumpIfInventory("TNTThrowForce",14,"IceThrowF")
		GLY1 N 0 A_JumpIfInventory("TNTThrowForce",13,"IceThrowE")
		GLY1 N 0 A_JumpIfInventory("TNTThrowForce",12,"IceThrowD")
		GLY1 N 0 A_JumpIfInventory("TNTThrowForce",11,"IceThrowC")
		GLY1 N 0 A_JumpIfInventory("TNTThrowForce",10,"IceThrowB")
		GLY1 N 0 A_JumpIfInventory("TNTThrowForce",9,"IceThrowA")
		GLY1 N 0 A_JumpIfInventory("TNTThrowForce",8,"IceThrow9")
		GLY1 N 0 A_JumpIfInventory("TNTThrowForce",7,"IceThrow8")
		GLY1 N 0 A_JumpIfInventory("TNTThrowForce",6,"IceThrow7")
		GLY1 N 0 A_JumpIfInventory("TNTThrowForce",5,"IceThrow6")
		GLY1 N 0 A_JumpIfInventory("TNTThrowForce",4,"IceThrow5")
		GLY1 N 0 A_JumpIfInventory("TNTThrowForce",3,"IceThrow4")
		GLY1 N 0 A_JumpIfInventory("TNTThrowForce",2,"IceThrow3")
		GLY1 N 0 A_JumpIfInventory("TNTThrowForce",1,"IceThrow2")
		GLY1 N 0 A_GiveInventory("TNTThrowForce",1)
		GLY1 N 2 A_GunFlash
		GLY1 N 0 A_ReFire("FireIce")
	IceThrow1:
		GLY1 OPQRS 1
		TNT1 A 9
		GLY1 TU 1
		GLY1 V 0 A_PlayWeaponSound("caleb/tnt")
		GLY1 V 0 A_TakeInventory("TNTThrowForce",999999)
		GLY1 V 1 A_FireCustomMissile("IceGlyph1",0,1,8,0)
		GLY1 JKLM 1
		TNT1 A 8
		GLY1 "[" 1
		GLY1 "\" 1
		GLY1 "]" 1
		GLY3 A 1
		Goto Ready
	IceThrow2:
		GLY1 N 2 A_GiveInventory("TNTThrowForce",1)
		GLY1 N 0 A_Refire("FireIce")
		GLY1 OPQRS 1
		TNT1 A 9
		GLY1 TU 1
		GLY1 V 0 A_PlayWeaponSound("caleb/tnt")
		GLY1 V 0 A_TakeInventory("TNTThrowForce",999999)
		GLY1 V 1 A_FireCustomMissile("IceGlyph2",0,1,8,0)
		GLY1 JKLM 1
		TNT1 A 8
		GLY1 "[" 1
		GLY1 "\" 1
		GLY1 "]" 1
		GLY3 A 1
		Goto Ready
	IceThrow3:
		GLY1 N 2 A_GiveInventory("TNTThrowForce",1)
		GLY1 N 0 A_Refire("FireIce")
		GLY1 OPQRS 1
		TNT1 A 9
		GLY1 TU 1
		GLY1 V 0 A_PlayWeaponSound("caleb/tnt")
		GLY1 V 0 A_TakeInventory("TNTThrowForce",999999)
		GLY1 V 1 A_FireCustomMissile("IceGlyph3",0,1,8,0)
		GLY1 JKLM 1
		TNT1 A 8
		GLY1 "[" 1
		GLY1 "\" 1
		GLY1 "]" 1
		GLY3 A 1
		Goto Ready
	IceThrow4:
		GLY1 N 2 A_GiveInventory("TNTThrowForce",1)
		GLY1 N 0 A_Refire("FireIce")
		GLY1 OPQRS 1
		TNT1 A 9
		GLY1 TU 1
		GLY1 V 0 A_PlayWeaponSound("caleb/tnt")
		GLY1 V 0 A_TakeInventory("TNTThrowForce",999999)
		GLY1 V 1 A_FireCustomMissile("IceGlyph4",0,1,8,0)
		GLY1 JKLM 1
		TNT1 A 8
		GLY1 "[" 1
		GLY1 "\" 1
		GLY1 "]" 1
		GLY3 A 1
		Goto Ready
	IceThrow5:
		GLY1 N 2 A_GiveInventory("TNTThrowForce",1)
		GLY1 N 0 A_Refire("FireIce")
		GLY1 OPQRS 1
		TNT1 A 9
		GLY1 TU 1
		GLY1 V 0 A_PlayWeaponSound("caleb/tnt")
		GLY1 V 0 A_TakeInventory("TNTThrowForce",999999)
		GLY1 V 1 A_FireCustomMissile("IceGlyph5",0,1,8,0)
		GLY1 JKLM 1
		TNT1 A 8
		GLY1 "[" 1
		GLY1 "\" 1
		GLY1 "]" 1
		GLY3 A 1
		Goto Ready
	IceThrow6:
		GLY1 N 2 A_GiveInventory("TNTThrowForce",1)
		GLY1 N 0 A_Refire("FireIce")
		GLY1 OPQRS 1
		TNT1 A 9
		GLY1 TU 1
		GLY1 V 0 A_PlayWeaponSound("caleb/tnt")
		GLY1 V 0 A_TakeInventory("TNTThrowForce",999999)
		GLY1 V 1 A_FireCustomMissile("IceGlyph6",0,1,8,0)
		GLY1 JKLM 1
		TNT1 A 8
		GLY1 "[" 1
		GLY1 "\" 1
		GLY1 "]" 1
		GLY3 A 1
		Goto Ready
	IceThrow7:
		GLY1 N 2 A_GiveInventory("TNTThrowForce",1)
		GLY1 N 0 A_Refire("FireIce")
		GLY1 OPQRS 1
		TNT1 A 9
		GLY1 TU 1
		GLY1 V 0 A_PlayWeaponSound("caleb/tnt")
		GLY1 V 0 A_TakeInventory("TNTThrowForce",999999)
		GLY1 V 1 A_FireCustomMissile("IceGlyph7",0,1,8,0)
		GLY1 JKLM 1
		TNT1 A 8
		GLY1 "[" 1
		GLY1 "\" 1
		GLY1 "]" 1
		GLY3 A 1
		Goto Ready
	IceThrow8:
		GLY1 N 2 A_GiveInventory("TNTThrowForce",1)
		GLY1 N 0 A_Refire("FireIce")
		GLY1 OPQRS 1
		TNT1 A 9
		GLY1 TU 1
		GLY1 V 0 A_PlayWeaponSound("caleb/tnt")
		GLY1 V 0 A_TakeInventory("TNTThrowForce",999999)
		GLY1 V 1 A_FireCustomMissile("IceGlyph8",0,1,8,0)
		GLY1 JKLM 1
		TNT1 A 8
		GLY1 "[" 1
		GLY1 "\" 1
		GLY1 "]" 1
		GLY3 A 1
		Goto Ready
	IceThrow9:
		GLY1 N 2 A_GiveInventory("TNTThrowForce",1)
		GLY1 N 0 A_Refire("FireIce")
		GLY1 OPQRS 1
		TNT1 A 9
		GLY1 TU 1
		GLY1 V 0 A_PlayWeaponSound("caleb/tnt")
		GLY1 V 0 A_TakeInventory("TNTThrowForce",999999)
		GLY1 V 1 A_FireCustomMissile("IceGlyph9",0,1,8,0)
		GLY1 JKLM 1
		TNT1 A 8
		GLY1 "[" 1
		GLY1 "\" 1
		GLY1 "]" 1
		GLY3 A 1
		Goto Ready
	IceThrowA:
		GLY1 N 2 A_GiveInventory("TNTThrowForce",1)
		GLY1 N 0 A_Refire("FireIce")
		GLY1 OPQRS 1
		TNT1 A 9
		GLY1 TU 1
		GLY1 V 0 A_PlayWeaponSound("caleb/tnt")
		GLY1 V 0 A_TakeInventory("TNTThrowForce",999999)
		GLY1 V 1 A_FireCustomMissile("IceGlyphA",0,1,8,0)
		GLY1 JKLM 1
		TNT1 A 8
		GLY1 "[" 1
		GLY1 "\" 1
		GLY1 "]" 1
		GLY3 A 1
		Goto Ready
	IceThrowB:
		GLY1 N 2 A_GiveInventory("TNTThrowForce",1)
		GLY1 N 0 A_Refire("FireIce")
		GLY1 OPQRS 1
		TNT1 A 9
		GLY1 TU 1
		GLY1 V 0 A_PlayWeaponSound("caleb/tnt")
		GLY1 V 0 A_TakeInventory("TNTThrowForce",999999)
		GLY1 V 1 A_FireCustomMissile("IceGlyphB",0,1,8,0)
		GLY1 JKLM 1
		TNT1 A 8
		GLY1 "[" 1
		GLY1 "\" 1
		GLY1 "]" 1
		GLY3 A 1
		Goto Ready
	IceThrowC:
		GLY1 N 2 A_GiveInventory("TNTThrowForce",1)
		GLY1 N 0 A_Refire("FireIce")
		GLY1 OPQRS 1
		TNT1 A 9
		GLY1 TU 1
		GLY1 V 0 A_PlayWeaponSound("caleb/tnt")
		GLY1 V 0 A_TakeInventory("TNTThrowForce",999999)
		GLY1 V 1 A_FireCustomMissile("IceGlyphC",0,1,8,0)
		GLY1 JKLM 1
		TNT1 A 8
		GLY1 "[" 1
		GLY1 "\" 1
		GLY1 "]" 1
		GLY3 A 1
		Goto Ready
	IceThrowD:
		GLY1 N 2 A_GiveInventory("TNTThrowForce",1)
		GLY1 N 0 A_Refire("FireIce")
		GLY1 OPQRS 1
		TNT1 A 9
		GLY1 TU 1
		GLY1 V 0 A_PlayWeaponSound("caleb/tnt")
		GLY1 V 0 A_TakeInventory("TNTThrowForce",999999)
		GLY1 V 1 A_FireCustomMissile("IceGlyphD",0,1,8,0)
		GLY1 JKLM 1
		TNT1 A 8
		GLY1 "[" 1
		GLY1 "\" 1
		GLY1 "]" 1
		GLY3 A 1
		Goto Ready
	IceThrowE:
		GLY1 N 2 A_GiveInventory("TNTThrowForce",1)
		GLY1 N 0 A_Refire("FireIce")
		GLY1 OPQRS 1
		TNT1 A 9
		GLY1 TU 1
		GLY1 V 0 A_PlayWeaponSound("caleb/tnt")
		GLY1 V 0 A_TakeInventory("TNTThrowForce",999999)
		GLY1 V 1 A_FireCustomMissile("IceGlyphE",0,1,8,0)
		GLY1 JKLM 1
		TNT1 A 8
		GLY1 "[" 1
		GLY1 "\" 1
		GLY1 "]" 1
		GLY3 A 1
		Goto Ready
	IceThrowF:
		GLY1 N 2 A_GiveInventory("TNTThrowForce",1)
		GLY1 N 0 A_Refire("FireIce")
		GLY1 OPQRS 1
		TNT1 A 9
		GLY1 TU 1
		GLY1 V 0 A_PlayWeaponSound("caleb/tnt")
		GLY1 V 0 A_TakeInventory("TNTThrowForce",999999)
		GLY1 V 1 A_FireCustomMissile("IceGlyphF",0,1,8,0)
		GLY1 JKLM 1
		TNT1 A 8
		GLY1 "[" 1
		GLY1 "\" 1
		GLY1 "]" 1
		GLY3 A 1
		Goto Ready
	IceThrowG:
		GLY1 N 2 A_GiveInventory("TNTThrowForce",1)
		GLY1 N 0 A_Refire("FireIce")
		GLY1 OPQRS 1
		TNT1 A 9
		GLY1 TU 1
		GLY1 V 0 A_PlayWeaponSound("caleb/tnt")
		GLY1 V 0 A_TakeInventory("TNTThrowForce",999999)
		GLY1 V 1 A_FireCustomMissile("IceGlyphG",0,1,8,0)
		GLY1 JKLM 1
		TNT1 A 8
		GLY1 "[" 1
		GLY1 "\" 1
		GLY1 "]" 1
		GLY3 A 1
		Goto Ready
	AltFire:
		GLY1 A 0 A_PlayWeaponSound("weapons/glyph/change")
		GLY1 A 0 A_JumpIfInventory("GlyphModeCheck",2,4)
		GLY1 A 0 A_JumpIfInventory("GlyphModeCheck",1,2)
		GLY1 A 10 A_GiveInventory("GlyphModeCheck",1)
		Goto Ready
		
		GLY1 N 10 A_GiveInventory("GlyphModeCheck",1)
		Goto Ready
		
		GLY3 B 10 A_TakeInventory("GlyphModeCheck",2)
		Goto Ready
	Flash:
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",16,32)
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",15,30)
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",14,28)
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",13,26)
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",12,24)
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",11,22)
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",10,20)
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",9,18)
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",8,16)
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",7,14)
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",6,12)
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",5,10)
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",4,8)
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",3,6)
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",2,4)
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",1,2)
		TNT1 A 0
		Stop
		DYNG A 2 Bright
		Loop
		DYNG B 2 Bright
		Loop
		DYNG C 2 Bright
		Loop
		DYNG D 2 Bright
		Loop
		DYNG E 2 Bright
		Loop
		DYNG F 2 Bright
		Loop
		DYNG G 2 Bright
		Loop
		DYNG H 2 Bright
		Loop
		DYNG I 2 Bright
		Loop
		DYNG J 2 Bright
		Loop
		DYNG K 2 Bright
		Loop
		DYNG L 2 Bright
		Loop
		DYNG M 2 Bright
		Loop
		DYNG N 2 Bright
		Loop
		DYNG O 2 Bright
		Loop
		DYNG P 2 Bright
		Loop
	}
}

Actor GlyphModeCheck : Inventory
{
	Inventory.Amount 1
	Inventory.MaxAmount 2
}

Actor PoisonGlyph1
{
	Speed 6
	Radius 8
	Height 8
	Scale 0.08
	Damage 0
	Gravity 0.65
	PROJECTILE
	+GRENADETRAIL
	-NOGRAVITY
	+EXTREMEDEATH
	+HEXENBOUNCE
	+CANBOUNCEWATER
	+NODAMAGETHRUST
	+FORCERADIUSDMG
	DamageType "AEPoison"
	PoisonDamage 80
	BounceFactor 0.4
	BounceCount 6
	States
	{
	Spawn:
		GLY2 A 0
		GLY2 A 0 ThrustThingZ(0,random(10,15),0,1)
		GLY2 ABCDEF 1 Bright 
		Goto Spawn+2
	Death:
		TNT1 A 0 A_AlertMonsters
		TNT1 A 0 A_StopSoundEx("Voice")
		TNT1 A 0 A_PlaySound("torturedsoul/poison")
		FRME A 0 Bright A_Explode(64,64,1)
		TNT1 A 0 A_SpawnItemEx("GlyphPoisonSpawner",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		EXPL A 0 A_SpawnItemEx("PoisonCloud",0,0,16,0,0,0,0,SXF_NOCHECKPOSITION,0)
		TNT1 A 10
		Stop
	}
}

Actor GlyphPoisonSpawner
{
	Radius 0
	Height 0
	+NOGRAVITY
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_JumpIfInventory("PoisonSpawnerCheck",100,6)
		TNT1 A 0 A_Jump(240,3)
		TNT1 A 2 A_SpawnItemEx("GlyphPoison",random(-50,50),random(-50,50),random(5,15),0,0,0,random(1,360),SXF_NOCHECKPOSITION,0)
		TNT1 A 0 A_Jump(256,2)
		TNT1 A 2 A_SpawnItemEx("GlyphPoison2",random(-50,50),random(-50,50),random(5,15),0,0,0,random(1,360),SXF_NOCHECKPOSITION,0)
		TNT1 A 0 A_GiveInventory("PoisonSpawnerCheck",1)
		Loop
		TNT1 A 0
		Stop
	}
}

Actor GlyphPoison
{
	Height 4
	Radius 4
	Speed 0
	Damage (random(0,1))
	DamageType "AEPoison"
	PoisonDamage 30
	Alpha 0.80
	Scale 0.55
	RenderStyle Add
	Translation "4:4=112:112","80:111=112:127"
	PROJECTILE
	+RIPPER	RipperLevel 1
	+BLOODLESSIMPACT
	+NODAMAGETHRUST
	States
	{
	Spawn:
		WPXS A 0
		WPXS A 0 A_Jump(230,7,19,31,43,55,67,79)
		WPXS AAABBBCCCDDDEEEFFFGGGHHHIIIJJJKKKLLLMMMNNNOOOPPPQQQRRRSSSTTTUUUVVVWWWXXXYYYZZZ 1 A_FadeOut(0.01)
		WPXZ AAABBBCCC 1 A_FadeOut(0.01)
		Stop
	}
}

Actor GlyphPoison2 : GlyphPoison { +PAINLESS }

Actor PoisonGlyph2 : PoisonGlyph1 { Speed 7 }

Actor PoisonGlyph3 : PoisonGlyph1 { Speed 9 }

Actor PoisonGlyph4 : PoisonGlyph1
{
	Speed 10
	States
	{
	Spawn:
		GLY2 A 0
		GLY2 A 0 ThrustThingZ(0,random(12,14),0,1)
		GLY2 ABCDEF 1 Bright
		Goto Spawn+2
	}
}

Actor PoisonGlyph5 : PoisonGlyph4 { Speed 12 }

Actor PoisonGlyph6 : PoisonGlyph4 { Speed 13 }

Actor PoisonGlyph7 : PoisonGlyph1
{
	Speed 15
	States
	{
	Spawn:
		GLY2 A 0 Thing_ChangeTID(0,4567)
		GLY2 A 0 ThrustThingZ(0,random(14,16),0,1)
		GLY2 ABCDEF 1 Bright
		Goto Spawn+2
	}
}

Actor PoisonGlyph8 : PoisonGlyph7 { Speed 16 }

Actor PoisonGlyph9 : PoisonGlyph7 { Speed 18 }

Actor PoisonGlyphA : PoisonGlyph1
{
	Speed 19
	States
	{
	Spawn:
		GLY2 A 0
		GLY2 A 0 ThrustThingZ(0,random(16,18),0,1)
		GLY2 ABCDEF 1 Bright
		Goto Spawn+2
	}
}

Actor PoisonGlyphB : PoisonGlyphA { Speed 21 }

Actor PoisonGlyphC : PoisonGlyphA { Speed 22 }

Actor PoisonGlyphD : PoisonGlyph1
{
	Speed 24
	States
	{
	Spawn:
		GLY2 A 0
		GLY2 A 0 ThrustThingZ(0,random(18,20),0,1)
		GLY2 ABCDEF 1 Bright
		Goto Spawn+2
	}
}

Actor PoisonGlyphE : PoisonGlyphD { Speed 25 }

Actor PoisonGlyphF : PoisonGlyphD { Speed 27 }

Actor PoisonGlyphG : PoisonGlyphD { Speed 28 }

Actor IceGlyph1
{
	Speed 6
	Radius 8
	Height 8
	Scale 0.08
	Damage 0
	Gravity 0.65
	PROJECTILE
	+GRENADETRAIL
	-NOGRAVITY
	+EXTREMEDEATH
	+HEXENBOUNCE
	+CANBOUNCEWATER
	+FORCERADIUSDMG
	DamageType "Ice"
	BounceFactor 0.4
	BounceCount 6
	States
	{
	Spawn:
		GLY2 A 0
		GLY2 A 0 ThrustThingZ(0,random(10,15),0,1)
		GLY2 GHIJKL 1 Bright 
		Goto Spawn+2
	Death:
		TNT1 A 0 A_AlertMonsters
		TNT1 AAAAAAAAAAAAAAAAAA 0 A_SpawnItemEx("IceGlyphExploSprite",0,0,0,random(10,-10)/(3*1.05),random(10,-10)/(3*1.05),random(1,10)/(3*1.05),0,SXF_NOCHECKPOSITION)
		TNT1 A 0 A_PlaySound("reilsss/weapons/rocketexplosion1")
		TNT1 A 0 A_Explode(256,160,1)
		TNT1 A 0 A_CustomMissile("IceGlyphExplo",6,0,0,2,0)
		TNT1 A 0 A_CustomMissile("IceGlyphExplo",6,0,8,2,0)
		TNT1 A 0 A_CustomMissile("IceGlyphExplo",6,0,16,2,0)
		TNT1 A 0 A_CustomMissile("IceGlyphExplo",6,0,24,2,0)
		TNT1 A 0 A_CustomMissile("IceGlyphExplo",6,0,32,2,0)
		TNT1 A 0 A_CustomMissile("IceGlyphExplo",6,0,40,2,0)
		TNT1 A 0 A_CustomMissile("IceGlyphExplo",6,0,48,2,0)
		TNT1 A 0 A_CustomMissile("IceGlyphExplo",6,0,56,2,0)
		TNT1 A 0 A_CustomMissile("IceGlyphExplo",6,0,64,2,0)
		TNT1 A 0 A_CustomMissile("IceGlyphExplo",6,0,72,2,0)
		TNT1 A 0 A_CustomMissile("IceGlyphExplo",6,0,80,2,0)
		TNT1 A 0 A_CustomMissile("IceGlyphExplo",6,0,88,2,0)
		TNT1 A 0 A_CustomMissile("IceGlyphExplo",6,0,96,2,0)
		TNT1 A 0 A_CustomMissile("IceGlyphExplo",6,0,104,2,0)
		TNT1 A 0 A_CustomMissile("IceGlyphExplo",6,0,112,2,0)
		TNT1 A 0 A_CustomMissile("IceGlyphExplo",6,0,120,2,0)
		TNT1 A 0 A_CustomMissile("IceGlyphExplo",6,0,128,2,0)
		TNT1 A 0 A_CustomMissile("IceGlyphExplo",6,0,136,2,0)
		TNT1 A 0 A_CustomMissile("IceGlyphExplo",6,0,144,2,0)
		TNT1 A 0 A_CustomMissile("IceGlyphExplo",6,0,152,2,0)
		TNT1 A 0 A_CustomMissile("IceGlyphExplo",6,0,160,2,0)
		TNT1 A 0 A_CustomMissile("IceGlyphExplo",6,0,168,2,0)
		TNT1 A 0 A_CustomMissile("IceGlyphExplo",6,0,176,2,0)
		TNT1 A 0 A_CustomMissile("IceGlyphExplo",6,0,184,2,0)
		TNT1 A 1 A_CustomMissile("IceGlyphExplo",6,0,192,2,0)
		TNT1 A 0 A_CustomMissile("IceGlyphExplo",6,0,200,2,0)
		TNT1 A 0 A_CustomMissile("IceGlyphExplo",6,0,208,2,0)
		TNT1 A 0 A_CustomMissile("IceGlyphExplo",6,0,216,2,0)
		TNT1 A 0 A_CustomMissile("IceGlyphExplo",6,0,224,2,0)
		TNT1 A 0 A_CustomMissile("IceGlyphExplo",6,0,232,2,0)
		TNT1 A 0 A_CustomMissile("IceGlyphExplo",6,0,240,2,0)
		TNT1 A 0 A_CustomMissile("IceGlyphExplo",6,0,248,2,0)
		TNT1 A 0 A_CustomMissile("IceGlyphExplo",6,0,256,2,0)
		TNT1 A 0 A_CustomMissile("IceGlyphExplo",6,0,264,2,0)
		TNT1 A 0 A_CustomMissile("IceGlyphExplo",6,0,272,2,0)
		TNT1 A 0 A_CustomMissile("IceGlyphExplo",6,0,280,2,0)
		TNT1 A 0 A_CustomMissile("IceGlyphExplo",6,0,288,2,0)
		TNT1 A 0 A_CustomMissile("IceGlyphExplo",6,0,296,2,0)
		TNT1 A 0 A_CustomMissile("IceGlyphExplo",6,0,304,2,0)
		TNT1 A 0 A_CustomMissile("IceGlyphExplo",6,0,312,2,0)
		TNT1 A 0 A_CustomMissile("IceGlyphExplo",6,0,320,2,0)
		TNT1 A 0 A_CustomMissile("IceGlyphExplo",6,0,328,2,0)
		TNT1 A 0 A_CustomMissile("IceGlyphExplo",6,0,336,2,0)
		TNT1 A 0 A_CustomMissile("IceGlyphExplo",6,0,344,2,0)
		TNT1 A 0 A_CustomMissile("IceGlyphExplo",6,0,352,2,0)
		Stop
	}
}

Actor IceGlyph2 : IceGlyph1 { Speed 7 }

Actor IceGlyph3 : IceGlyph1 { Speed 9 }

Actor IceGlyph4 : IceGlyph1
{
	Speed 10
	States
	{
	Spawn:
		GLY2 A 0
		GLY2 A 0 ThrustThingZ(0,random(12,14),0,1)
		GLY2 GHIJKL 1 Bright
		Goto Spawn+2
	}
}

Actor IceGlyph5 : IceGlyph4 { Speed 12 }

Actor IceGlyph6 : IceGlyph4 { Speed 13 }

Actor IceGlyph7 : IceGlyph1
{
	Speed 15
	States
	{
	Spawn:
		GLY2 A 0 Thing_ChangeTID(0,4567)
		GLY2 A 0 ThrustThingZ(0,random(14,16),0,1)
		GLY2 GHIJKL 1 Bright
		Goto Spawn+2
	}
}

Actor IceGlyph8 : IceGlyph7 { Speed 16 }

Actor IceGlyph9 : IceGlyph7 { Speed 18 }

Actor IceGlyphA : IceGlyph1
{
	Speed 19
	States
	{
	Spawn:
		GLY2 A 0
		GLY2 A 0 ThrustThingZ(0,random(16,18),0,1)
		GLY2 GHIJKL 1 Bright
		Goto Spawn+2
	}
}

Actor IceGlyphB : IceGlyphA { Speed 21 }

Actor IceGlyphC : IceGlyphA { Speed 22 }

Actor IceGlyphD : IceGlyph1
{
	Speed 24
	States
	{
	Spawn:
		GLY2 A 0
		GLY2 A 0 ThrustThingZ(0,random(18,20),0,1)
		GLY2 GHIJKL 1 Bright
		Goto Spawn+2
	}
}

Actor IceGlyphE : IceGlyphD { Speed 25 }

Actor IceGlyphF : IceGlyphD { Speed 27 }

Actor IceGlyphG : IceGlyphD { Speed 28 }

Actor IceGlyphExploSprite
{
	+NOINTERACTION
	RenderStyle Add
	Scale 0.35
	States
	{
	Spawn:
		X033 ABCDEFGHIJKLMNOPQR 1 Bright A_FadeOut(0.04)
		Stop
	}
}

Actor IceGlyphExplo
{
	PROJECTILE
	DamageType Ice
	+RIPPER	RipperLevel 1
	+DONTSPLASH
	+BLOODLESSIMPACT
	+STRIFEDAMAGE
	Mass 1
	Speed 6
	Damage 1
	Radius 2
	Height 2
	RenderStyle Add
	Alpha 0.6
	Scale 0.4
	States
	{
	Spawn:
		X033 ABCD 1 Bright A_FadeOut(0.02)
		TNT1 A 0 A_ScaleVelocity(0.9)
		X033 EFGH 1 Bright A_FadeOut(0.02)
		TNT1 A 0 A_ScaleVelocity(0.75)
		X033 IJKL 1 Bright A_FadeOut(0.02)
		TNT1 A 0 A_ScaleVelocity(0.6)
		X033 MNOP 1 Bright A_FadeOut(0.02)
		TNT1 A 0 A_ScaleVelocity(0.6)
		X033 QR 1 Bright A_FadeOut(0.05)
		Wait
	Death:
		TNT1 A 1
		Stop 
	}
}

Actor FireGlyph1
{
	Speed 6
	Radius 8
	Height 8
	Scale 0.08
	Damage 0
	Gravity 0.65
	PROJECTILE
	+GRENADETRAIL
	-NOGRAVITY
	DamageType "Fire"
	+HEXENBOUNCE
	+CANBOUNCEWATER
	+FORCERADIUSDMG
	BounceFactor 0.4
	BounceCount 6
	States
	{
	Spawn:
		GLY2 A 0
		GLY2 A 0 ThrustThingZ(0,random(10,15),0,1)
		GLY2 MNOPQR 1 Bright 
		Goto Spawn+2
	Death:
		TNT1 A 0 A_AlertMonsters
		TNT1 A 0 A_PlaySound("ClericFlameExplode",CHAN_VOICE,1.0,0)
		TNT1 A 0 Bright A_Explode(300,140,1)
		TNT1 A 0 A_SpawnItemEx("NewExplosionMedium",0,0,0,0,0,0,0,0)
		TNT1 A 0 A_CustomMissile("FireGlyphGrenadeBit2Shooter",0,0,0)
		Stop
	}
}

Actor FireGlyph2 : FireGlyph1 { Speed 7 }

Actor FireGlyph3 : FireGlyph1 { Speed 9 }

Actor FireGlyph4 : FireGlyph1
{
	Speed 10
	States
	{
	Spawn:
		GLY2 A 0
		GLY2 A 0 ThrustThingZ(0,random(12,14),0,1)
		GLY2 MNOPQR 1 Bright
		Goto Spawn+2
	}
}

Actor FireGlyph5 : FireGlyph4 { Speed 12 }

Actor FireGlyph6 : FireGlyph4 { Speed 13 }

Actor FireGlyph7 : FireGlyph1
{
	Speed 15
	States
	{
	Spawn:
		GLY2 A 0 Thing_ChangeTID(0,4567)
		GLY2 A 0 ThrustThingZ(0,random(14,16),0,1)
		GLY2 MNOPQR 1 Bright
		Goto Spawn+2
	}
}

Actor FireGlyph8 : FireGlyph7 { Speed 16 }

Actor FireGlyph9 : FireGlyph7 { Speed 18 }

Actor FireGlyphA : FireGlyph1
{
	Speed 19
	States
	{
	Spawn:
		GLY2 A 0
		GLY2 A 0 ThrustThingZ(0,random(16,18),0,1)
		GLY2 MNOPQR 1 Bright
		Goto Spawn+2
	}
}

Actor FireGlyphB : FireGlyphA { Speed 21 }

Actor FireGlyphC : FireGlyphA { Speed 22 }

Actor FireGlyphD : FireGlyph1
{
	Speed 24
	States
	{
	Spawn:
		GLY2 A 0
		GLY2 A 0 ThrustThingZ(0,random(18,20),0,1)
		GLY2 MNOPQR 1 Bright
		Goto Spawn+2
	}
}

Actor FireGlyphE : FireGlyphD { Speed 25 }

Actor FireGlyphF : FireGlyphD { Speed 27 }

Actor FireGlyphG : FireGlyphD { Speed 28 }

Actor FireGlyphGrenadeBit2Shooter
{
	Projectile
	+RIPPER	RipperLevel 1
	+NOCLIP
	+FIREDAMAGE
	RenderStyle None
	States
	{
	Spawn:
		PLAY A 0
		PLAY AAAAAAAA 0 A_SpawnItemEx("FireGlyphGrenadeBit2",0,0,0,random(-4,4),random(-4,4),random(4,12),random(0,359),SXF_NOCHECKPOSITION|SXF_SETMASTER)
		PLAY A 100
		Stop
	}
}

Actor FireGlyphGrenadeBit2
{
	PROJECTILE
	BounceType "Doom" 
	+DONTSPLASH
	+CANBOUNCEWATER 
	+RIPPER	RipperLevel 1
	DamageType "Fire"
	Mass 1
	Radius 8
	Height 6
	Speed 5
	Scale 0.35
	RenderStyle Add
	Damage 1
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_Gravity
		SMPF FGHI 1 Bright A_SpawnItemEx("BitTrail2", 0, 0, 0,0,0,0,0,SXF_NOCHECKPOSITION)
		Loop
	Death:
		WRBL P 4 Bright 
		Stop
	}
}

Actor GlyphDrop : CustomInventory
{
	Inventory.MaxAmount 1
	States
	{
	Use:
		TNT1 A 0
		TNT1 A 0 A_SpawnItemEx("DroppedGlyph",0,0,32,8,0,0,0,SXF_NOCHECKPOSITION,0)
		Stop
	}
}

Actor DroppedGlyph
{
	Radius 16
	Height 20
	Scale 0.12
	States
	{
	Spawn:
		WGLY A 15
		TNT1 A 0 A_SpawnItemEx("AEoDGlyphNoAmmo",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER,0)
		Stop
	}
}

Actor AEoDGlyphNoAmmo : AEoDGlyphItem
{
	+FLOORCLIP
	+FLOATBOB
	+INVENTORY.IGNORESKILL
	Scale 0.12
	Inventory.Amount 1
	Inventory.PickupSound "BloodShotgun/Pickup"
	Inventory.PickupMessage "You found the Glyph!"
	States
	{
	Spawn:
		WGLY A 3
		Loop
	Pickup:
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",1) <= 0,"Nothing")
		TNT1 A 0 A_JumpIfInventory("AEGrenade",3,"Ammo")
		TNT1 A 0 A_JumpIfInventory("AEoDGlyph",1,2)
		TNT1 A 0 A_GiveInventory("Weapon1Count",1)
		TNT1 A 0 A_GiveInventory("GlyphDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDGlyph",1)
		TNT1 A 0 A_TakeInventory("AEGrenade",3)
		TNT1 A 0 	
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDGlyph",1,"Ammo")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		
		TNT1 A 0 ACS_NamedExecute("s798",0,1,3,0)
		Fail
	Ammo:
		TNT1 A 0 A_TakeInventory("AEGrenade",3)
		TNT1 A 0 A_JumpIfInventory("AEoDGlyph",1,2)
		TNT1 A 0 A_GiveInventory("Weapon1Count",1)
		TNT1 A 0 A_GiveInventory("GlyphDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDGlyph",1)
		Stop
	}
}

//==================================================================================
//==================================================================================

//==================================================================================
//==================================================================================

Actor AEoDJackBombItem : CustomInventory 6151
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL
	+FLOATBOB
	Scale 0.125
	Inventory.Amount 1
	Inventory.PickupSound "weapons/icewand/pickup"
	Inventory.PickupMessage "You discovered the JackBomb! Oh, the wonders that lie within this box..."
	States
	{
	Spawn:
		WJKB A -1 Bright
		Loop
	Pickup:
		TNT1 A 0 A_JumpIfInventory("AEoDJackBomb",1,"Ammo")
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",1) <= 0,"Nothing")
		TNT1 A 0 A_GiveInventory("Weapon1Count",1)
		TNT1 A 0 A_GiveInventory("JackBombDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDJackBomb",1)
		TNT1 A 0 	
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDJackBomb",1,"Ammo")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		
		TNT1 A 0 ACS_NamedExecute("s798",0,1,7,0)
		Fail
	Ammo:
		TNT1 A 0 A_GiveInventory("AEGrenade",4)
		Stop
	}
}

Actor AEoDJackBomb : Weapon // 6151
{
	+FLOORCLIP
	+FLOATBOB
	+WEAPON.CHEATNOTWEAPON
	+INVENTORY.IGNORESKILL
	Weapon.AmmoType "AEGrenade"
	Weapon.AmmoGive1 4
	Weapon.AmmoUse 2
	Weapon.SelectionOrder 28000
	+WEAPON.NOAUTOAIM
	Scale 0.125
	Inventory.PickupSound "weapons/icewand/pickup"
	Weapon.UpSound "weapons/draw"
	Inventory.PickupMessage "You discovered the JackBomb! Oh, the wonders that lie within this box..."
	Tag "Jackbomb"
	States
	{
	Spawn:
		WJKB A -1 Bright
		Loop
	Ready:
		JBOX A 1 A_WeaponReady
		Loop
	Deselect:
		JBOX A 1 	
		JBOX AA 0 A_Lower
		Loop
	Select:
		JBOX B 1 	
		TNT1 AA 0 A_Raise
		Loop
	Fire:
		JBOX A 0 A_JumpIfInventory("TNTThrowForce",16,"ThrowJackBombG")
		JBOX A 0 A_JumpIfInventory("TNTThrowForce",15,"ThrowJackBombG")
		JBOX A 0 A_JumpIfInventory("TNTThrowForce",14,"ThrowJackBombF")
		JBOX A 0 A_JumpIfInventory("TNTThrowForce",13,"ThrowJackBombE")
		JBOX A 0 A_JumpIfInventory("TNTThrowForce",12,"ThrowJackBombD")
		JBOX A 0 A_JumpIfInventory("TNTThrowForce",11,"ThrowJackBombC")
		JBOX A 0 A_JumpIfInventory("TNTThrowForce",10,"ThrowJackBombB")
		JBOX A 0 A_JumpIfInventory("TNTThrowForce",9,"ThrowJackBombA")
		JBOX A 0 A_JumpIfInventory("TNTThrowForce",8,"ThrowJackBomb9")
		JBOX A 0 A_JumpIfInventory("TNTThrowForce",7,"ThrowJackBomb8")
		JBOX A 0 A_JumpIfInventory("TNTThrowForce",6,"ThrowJackBomb7")
		JBOX A 0 A_JumpIfInventory("TNTThrowForce",5,"ThrowJackBomb6")
		JBOX A 0 A_JumpIfInventory("TNTThrowForce",4,"ThrowJackBomb5")
		JBOX A 0 A_JumpIfInventory("TNTThrowForce",3,"ThrowJackBomb4")
		JBOX A 0 A_JumpIfInventory("TNTThrowForce",2,"ThrowJackBomb3")
		JBOX A 0 A_JumpIfInventory("TNTThrowForce",1,"ThrowJackBomb2")
		JBOX A 0 A_GiveInventory("TNTThrowForce",1)
		JBOX A 2 A_GunFlash
		JBOX A 0 A_ReFire
	ThrowJackBomb1:
		JBOX BCD 1
		TNT1 A 9
		JBOX EF 1
		JBOX G 0 A_PlayWeaponSound("caleb/tnt")
		JBOX G 0 A_TakeInventory("TNTThrowForce",999999)
		JBOX G 1 A_FireCustomMissile("JackBomb1",0,1,8,0)
		JBOX HIJKLMNO 1
		TNT1 A 8
		JBOX DCBA 2
		Goto Ready
	ThrowJackBomb2:
		JBOX A 2 A_GiveInventory("TNTThrowForce",1)
		JBOX A 0 A_Refire
		JBOX BCD 1
		TNT1 A 9
		JBOX EF 1
		JBOX G 0 A_PlayWeaponSound("caleb/tnt")
		JBOX G 0 A_TakeInventory("TNTThrowForce",999999)
		JBOX G 1 A_FireCustomMissile("JackBomb2",0,1,8,0)
		JBOX HIJKLMNO 1
		TNT1 A 8
		JBOX DCBA 2
		Goto Ready
	ThrowJackBomb3:
		JBOX A 2 A_GiveInventory("TNTThrowForce",1)
		JBOX A 0 A_Refire
		JBOX BCD 1
		TNT1 A 9
		JBOX EF 1
		JBOX G 0 A_PlayWeaponSound("caleb/tnt")
		JBOX G 0 A_TakeInventory("TNTThrowForce",999999)
		JBOX G 1 A_FireCustomMissile("JackBomb3",0,1,8,0)
		JBOX HIJKLMNO 1
		TNT1 A 8
		JBOX DCBA 2
		Goto Ready
	ThrowJackBomb4:
		JBOX A 2 A_GiveInventory("TNTThrowForce",1)
		JBOX A 0 A_Refire
		JBOX BCD 1
		TNT1 A 9
		JBOX EF 1
		JBOX G 0 A_PlayWeaponSound("caleb/tnt")
		JBOX G 0 A_TakeInventory("TNTThrowForce",999999)
		JBOX G 1 A_FireCustomMissile("JackBomb4",0,1,8,0)
		JBOX HIJKLMNO 1
		TNT1 A 8
		JBOX DCBA 2
		Goto Ready
	ThrowJackBomb5:
		JBOX A 2 A_GiveInventory("TNTThrowForce",1)
		JBOX A 0 A_Refire
		JBOX BCD 1
		TNT1 A 9
		JBOX EF 1
		JBOX G 0 A_PlayWeaponSound("caleb/tnt")
		JBOX G 0 A_TakeInventory("TNTThrowForce",999999)
		JBOX G 1 A_FireCustomMissile("JackBomb5",0,1,8,0)
		JBOX HIJKLMNO 1
		TNT1 A 8
		JBOX DCBA 2
		Goto Ready
	ThrowJackBomb6:
		JBOX A 2 A_GiveInventory("TNTThrowForce",1)
		JBOX A 0 A_Refire
		JBOX BCD 1
		TNT1 A 9
		JBOX EF 1
		JBOX G 0 A_PlayWeaponSound("caleb/tnt")
		JBOX G 0 A_TakeInventory("TNTThrowForce",999999)
		JBOX G 1 A_FireCustomMissile("JackBomb6",0,1,8,0)
		JBOX HIJKLMNO 1
		TNT1 A 8
		JBOX DCBA 2
		Goto Ready
	ThrowJackBomb7:
		JBOX A 2 A_GiveInventory("TNTThrowForce",1)
		JBOX A 0 A_Refire
		JBOX BCD 1
		TNT1 A 9
		JBOX EF 1
		JBOX G 0 A_PlayWeaponSound("caleb/tnt")
		JBOX G 0 A_TakeInventory("TNTThrowForce",999999)
		JBOX G 1 A_FireCustomMissile("JackBomb7",0,1,8,0)
		JBOX HIJKLMNO 1
		TNT1 A 8
		JBOX DCBA 2
		Goto Ready
	ThrowJackBomb8:
		JBOX A 2 A_GiveInventory("TNTThrowForce",1)
		JBOX A 0 A_Refire
		JBOX BCD 1
		TNT1 A 9
		JBOX EF 1
		JBOX G 0 A_PlayWeaponSound("caleb/tnt")
		JBOX G 0 A_TakeInventory("TNTThrowForce",999999)
		JBOX G 1 A_FireCustomMissile("JackBomb8",0,1,8,0)
		JBOX HIJKLMNO 1
		TNT1 A 8
		JBOX DCBA 2
		Goto Ready
	ThrowJackBomb9:
		JBOX A 2 A_GiveInventory("TNTThrowForce",1)
		JBOX A 0 A_Refire
		JBOX BCD 1
		TNT1 A 9
		JBOX EF 1
		JBOX G 0 A_PlayWeaponSound("caleb/tnt")
		JBOX G 0 A_TakeInventory("TNTThrowForce",999999)
		JBOX G 1 A_FireCustomMissile("JackBomb9",0,1,8,0)
		JBOX HIJKLMNO 1
		TNT1 A 8
		JBOX DCBA 2
		Goto Ready
	ThrowJackBombA:
		JBOX A 2 A_GiveInventory("TNTThrowForce",1)
		JBOX A 0 A_Refire
		JBOX BCD 1
		TNT1 A 9
		JBOX EF 1
		JBOX G 0 A_PlayWeaponSound("caleb/tnt")
		JBOX G 0 A_TakeInventory("TNTThrowForce",999999)
		JBOX G 1 A_FireCustomMissile("JackBombA",0,1,8,0)
		JBOX HIJKLMNO 1
		TNT1 A 8
		JBOX DCBA 2
		Goto Ready
	ThrowJackBombB:
		JBOX A 2 A_GiveInventory("TNTThrowForce",1)
		JBOX A 0 A_Refire
		JBOX BCD 1
		TNT1 A 9
		JBOX EF 1
		JBOX G 0 A_PlayWeaponSound("caleb/tnt")
		JBOX G 0 A_TakeInventory("TNTThrowForce",999999)
		JBOX G 1 A_FireCustomMissile("JackBombB",0,1,8,0)
		JBOX HIJKLMNO 1
		TNT1 A 8
		JBOX DCBA 2
		Goto Ready
	ThrowJackBombC:
		JBOX A 2 A_GiveInventory("TNTThrowForce",1)
		JBOX A 0 A_Refire
		JBOX BCD 1
		TNT1 A 9
		JBOX EF 1
		JBOX G 0 A_PlayWeaponSound("caleb/tnt")
		JBOX G 0 A_TakeInventory("TNTThrowForce",999999)
		JBOX G 1 A_FireCustomMissile("JackBombC",0,1,8,0)
		JBOX HIJKLMNO 1
		TNT1 A 8
		JBOX DCBA 2
		Goto Ready
	ThrowJackBombD:
		JBOX A 2 A_GiveInventory("TNTThrowForce",1)
		JBOX A 0 A_Refire
		JBOX BCD 1
		TNT1 A 9
		JBOX EF 1
		JBOX G 0 A_PlayWeaponSound("caleb/tnt")
		JBOX G 0 A_TakeInventory("TNTThrowForce",999999)
		JBOX G 1 A_FireCustomMissile("JackBombD",0,1,8,0)
		JBOX HIJKLMNO 1
		TNT1 A 8
		JBOX DCBA 2
		Goto Ready
	ThrowJackBombE:
		JBOX A 2 A_GiveInventory("TNTThrowForce",1)
		JBOX A 0 A_Refire
		JBOX BCD 1
		TNT1 A 9
		JBOX EF 1
		JBOX G 0 A_PlayWeaponSound("caleb/tnt")
		JBOX G 0 A_TakeInventory("TNTThrowForce",999999)
		JBOX G 1 A_FireCustomMissile("JackBombE",0,1,8,0)
		JBOX HIJKLMNO 1
		TNT1 A 8
		JBOX DCBA 2
		Goto Ready
	ThrowJackBombF:
		JBOX A 2 A_GiveInventory("TNTThrowForce",1)
		JBOX A 0 A_Refire
		JBOX BCD 1
		TNT1 A 9
		JBOX EF 1
		JBOX G 0 A_PlayWeaponSound("caleb/tnt")
		JBOX G 0 A_TakeInventory("TNTThrowForce",999999)
		JBOX G 1 A_FireCustomMissile("JackBombF",0,1,8,0)
		JBOX HIJKLMNO 1
		TNT1 A 8
		JBOX DCBA 2
		Goto Ready
	ThrowJackBombG:
		JBOX A 2 A_GiveInventory("TNTThrowForce",1)
		JBOX A 0 A_Refire
		JBOX BCD 1
		TNT1 A 9
		JBOX EF 1
		JBOX G 0 A_PlayWeaponSound("caleb/tnt")
		JBOX G 0 A_TakeInventory("TNTThrowForce",999999)
		JBOX G 1 A_FireCustomMissile("JackBombG",0,1,8,0)
		JBOX HIJKLMNO 1
		TNT1 A 8
		JBOX DCBA 2
		Goto Ready
	AltFire:
		JBOX A 2 A_PlayWeaponSound("caleb/tnt")
		TNT1 A 0 A_JumpIfInventory("PowerEconomizer",1,3)
		TNT1 A 0 A_JumpIfInventory("InfiniteAmmo",1,2)
		JBOX A 0 A_TakeInventory("AEGrenade",2)
		TNT1 A 8 A_FireCustomMissile("JackBombAlt",0,1,8,0)
		JBOX DCBA 2
		Goto Ready
	Flash:
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",16,32)
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",15,30)
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",14,28)
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",13,26)
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",12,24)
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",11,22)
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",10,20)
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",9,18)
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",8,16)
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",7,14)
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",6,12)
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",5,10)
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",4,8)
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",3,6)
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",2,4)
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",1,2)
		TNT1 A 0
		Stop
		DYNG A 2 Bright
		Loop
		DYNG B 2 Bright
		Loop
		DYNG C 2 Bright
		Loop
		DYNG D 2 Bright
		Loop
		DYNG E 2 Bright
		Loop
		DYNG F 2 Bright
		Loop
		DYNG G 2 Bright
		Loop
		DYNG H 2 Bright
		Loop
		DYNG I 2 Bright
		Loop
		DYNG J 2 Bright
		Loop
		DYNG K 2 Bright
		Loop
		DYNG L 2 Bright
		Loop
		DYNG M 2 Bright
		Loop
		DYNG N 2 Bright
		Loop
		DYNG O 2 Bright
		Loop
		DYNG P 2 Bright
		Loop
	}
}

DamageType JackbombAttract
{	Factor 0	}

Actor JackBomb
{
	var int user_time;
	Speed 0
	Radius 8
	Height 8
	Health 1000000
	Scale 0.25
	Damage 16
	+DONTTHRUST
	ReactionTime 73
	+EXTREMEDEATH
	+INVULNERABLE
	+SHOOTABLE
	+NONSHOOTABLE
	+NOBLOOD
	+FORCERADIUSDMG
	+DONTSPLASH
	+THRUACTORS
	+FLOORCLIP
	+SPECTRAL
	-COUNTKILL
	-SOLID
	+NODAMAGE
	+NOPAIN
	DamageFactor 0
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_GiveInventory("Unrideable",1)
		JBTH A 0 A_PlaySound("weapons/jackbomb",8,1.2,0)
		JBTH A 0 A_SpawnItemEx("JackBombMonsterForcer",0,0,1,0,0,0,0,SXF_SETMASTER|SXF_NOCHECKPOSITION|SXF_ORIGINATOR)
		JBTH B 5 Bright A_SetUserVar(user_time,user_time+1)		"####" "#" 0 A_JumpIf(user_time >= 73,"LoopEnd")
		JBTH C 5 Bright A_SetUserVar(user_time,user_time+1)		"####" "#" 0 A_JumpIf(user_time >= 73,"LoopEnd")
		JBTH D 5 Bright A_SetUserVar(user_time,user_time+1)		"####" "#" 0 A_JumpIf(user_time >= 73,"LoopEnd")
		JBTH E 5 Bright A_SetUserVar(user_time,user_time+1)		"####" "#" 0 A_JumpIf(user_time >= 73,"LoopEnd")
		JBTH D 5 Bright A_SetUserVar(user_time,user_time+1)		"####" "#" 0 A_JumpIf(user_time >= 73,"LoopEnd")
		JBTH C 5 Bright A_SetUserVar(user_time,user_time+1)		"####" "#" 0 A_JumpIf(user_time >= 73,"LoopEnd")
		JBTH B 5 Bright A_SetUserVar(user_time,user_time+1)		"####" "#" 0 A_JumpIf(user_time >= 73,"LoopEnd")
		JBTH A 5 Bright A_SetUserVar(user_time,user_time+1)		"####" "#" 0 A_JumpIf(user_time >= 73,"LoopEnd")
		Goto Spawn+4
	LoopEnd:
		JBTH BCD 5 Bright
		JBTH FG 3 Bright
		JBTH H 14 Bright A_ChangeFlag("VULNERABLE",1)
		JBTH H 1 Bright A_Die
	Death:
		TNT1 A 0 A_PlaySound("caleb/tnt/explode")
		TNT1 A 0 Bright A_Explode(1000,350,1)
		TNT1 A 0 A_RemoveChildren(1,RMVF_EVERYTHING,"JackBombMonsterForcer")
		TNT1 A 0 A_SpawnItemEx("JackbombExplosion",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		TNT1 A 0 A_CustomMissile("SuperRocketBit2I",0,0,45)
		TNT1 A 0 A_CustomMissile("SuperRocketBit2I",0,0,90)
		TNT1 A 0 A_CustomMissile("SuperRocketBit2I",0,0,0)
		TNT1 A 0 A_CustomMissile("SuperRocketBit2I",0,0,135)
		TNT1 A 0 A_CustomMissile("SuperRocketBit2I",0,0,180)
		TNT1 A 0 A_CustomMissile("SuperRocketBit2I",0,0,225)
		TNT1 A 0 A_CustomMissile("SuperRocketBit2I",0,0,270)
		TNT1 A 0 A_CustomMissile("SuperRocketBit2I",0,0,315)
		TNT1 A 0 A_CustomMissile("SuperRocketBit2I",0,0,66)
		TNT1 A 0 A_CustomMissile("SuperRocketBit2I",0,0,155)
		TNT1 A 0 A_CustomMissile("SuperRocketBit2I",0,0,245)
		TNT1 A 10
		Stop
	}
}

Actor JackBombMonsterForcer
{
	var int user_countdowntimer;
	Monster
	Radius 20
	Height 10
	Health 1000000
	+DONTTHRUST
	+FRIENDLY
	+INVULNERABLE
	+FORCERADIUSDMG
	+NOPAIN
	+THRUACTORS
	+FOILINVUL
	-COUNTKILL
	+NODAMAGE
	+NODAMAGETHRUST
	+OLDRADIUSDMG
	+PAINLESS
	+CAUSEPAIN
	DamageType "JackbombAttract"
	DamageFactor 0
	States
	{
	Spawn:
		TNT1 A 0 NoDelay A_GiveInventory("Unrideable",1)
		TNT1 A 0 A_SetUserVar("user_countdowntimer",0)
	TickTock:
		TNT1 A 0 A_Explode(1,10280,XF_NOTMISSILE,1,10280) //Constantly draw their attention.
		TNT1 A 5 A_SetUserVar("user_countdowntimer",user_countdowntimer+1)
		TNT1 A 0 A_JumpIf(user_countdowntimer>=73,"Death")
		Loop
	Death:
		TNT1 A 10
		Stop
	}
}

Actor JackbombExplosion
{
	+NOINTERACTION
	RenderStyle None
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_SpawnItemEx("JBFlingy",frandom(0,2),0,frandom(5,15),frandom(3.0,15.0),0,random(5,20),random(0,359),SXF_NOCHECKPOSITION)
		TNT1 AAAA 0 A_SpawnItemEx("JBFlingy",frandom(0,2),0,frandom(5,15),frandom(3.0,15.0),0,random(5,20),random(0,359),SXF_NOCHECKPOSITION,128)
		TNT1 AAAAA 0 A_SpawnItemEx("JBFlare",random(0,8),0,random(-4,20),0,0,0,0,SXF_NOCHECKPOSITION)
		TNT1 AAAAAAAA 0 A_SpawnItemEx("JBFlare",random(0,8),0,random(-4,20),0,0,0,0,SXF_NOCHECKPOSITION,192)
		TNT1 A 6
		TNT1 AAAAAAAAAAAA 0 A_SpawnItemEx("JBSmoke",random(5,35),0,random(0,45),frandom(-5,5),0,frandom(0,8),random(0,359),SXF_NOCHECKPOSITION)
		TNT1 AAAAAAAAAAA 0 A_SpawnItemEx("JBSmoke",random(5,35),0,random(0,45),frandom(-5,5),0,frandom(0,8),random(0,359),SXF_NOCHECKPOSITION,128)
		TNT1 AAAAAAAAAAA 0 A_SpawnItemEx("PBMidSmoke",random(5,35),0,random(0,45),frandom(-5,5),0,frandom(0,3),random(0,359),SXF_NOCHECKPOSITION,128)
		TNT1 AAAAA 0 A_SpawnItemEx("JBSmokeBig",random(0,8),0,random(-3,20),frandom(-1.0,1.0),0,frandom(-2.0,2.0),random(0,359),SXF_NOCHECKPOSITION)
		TNT1 AAAAAAAAAA 0 A_SpawnItemEx("JBSmokeBig",random(0,8),0,random(-3,20),frandom(-1.0,1.0),0,frandom(-2.0,2.0),random(0,359),SXF_NOCHECKPOSITION,192)
		Stop
	}
}

Actor JBFlingy
{
	Projectile
	-NOGRAVITY
	+THRUACTORS
	+SKYEXPLODE
	+EXPLODEONWATER
	+DONTSPLASH
	Radius 3
	Height 3
	Speed 8
	Gravity 0.6
	RenderStyle None
	States
	{
	Spawn:
		TNT1 A 0
	Moving:
		TNT1 A 8 A_SpawnItemEx("JBFlingyTrail1",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		TNT1 A 0 A_Jump(64,"Explosion")
		Loop
	Death:
	Explosion:
		TNT1 AAAAA 0 A_SpawnItemEx("JBFlingyFX1",0,0,0,random(-10,10),0,random(2,10),random(0,359),SXF_NOCHECKPOSITION)
		TNT1 AAAAAAAAAAAAAAA 0 A_SpawnItemEx("JBFlingyFX1",0,0,0,random(-10,10),0,random(2,10),random(0,359),SXF_NOCHECKPOSITION,192)
		Stop
	}
}

Actor JBFlingyFX1
{
	Projectile
	+NOINTERACTION
	RenderStyle None
	States
	{
	Spawn:
		TNT1 A 0
	Perform:
		TNT1 A 12 A_SpawnItemEx("JBFlingyTrail2",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		TNT1 A 8 A_SpawnItemEx("JBFlingyTrail2",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		TNT1 A 4 A_SpawnItemEx("JBFlingyTrail2",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		TNT1 A 2 A_SpawnItemEx("JBFlingyTrail2",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		TNT1 AA 1 A_SpawnItemEx("JBFlingyTrail2",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		Stop
	}
}

Actor JBFlingyTrail1 
{
	+NOINTERACTION
	RenderStyle Add
	Scale 0.6
	Alpha 0.9
	Translation "0:255=%[0,0,0]:[1,0.15,0.75]"
	States
	{
	Spawn:
		LPUF A 0
		LPUF AAAAAAAAAA 1 Bright A_SetScale(ScaleX-(0.005))
		LPUF AAAAA 1 Bright A_SetScale(ScaleX-(0.01))
		Stop
	}
}

Actor JBFlingyTrail2 : JBFlingyTrail1 { Scale 0.3 }

Actor JBFlare
{
	Scale 1.5
	RenderStyle Add
	+NOINTERACTION
	Translation "0:255=%[0,0,0]:[1,0,0.5]"
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_Jump(128,"Two","Three")
	One:
		X006 ABCDEFGHIJKLMNOP 2 Bright A_ScaleVelocity(0.98)
		Stop
	Two:
		X007 ABCDEFGHIJ 2 Bright A_ScaleVelocity(0.98)
		Stop
	Three:
		X033 ABCDEFGHIJKLMNOPQR 2 Bright A_ScaleVelocity(0.98)
		Stop
	}
}

Actor JBSmoke : PBMidSmoke
{
	RenderStyle Add
	Scale 1.0
	Translation "0:255=%[0,0,0]:[1.5,0,1.5]"
}

Actor JBSmokeBig : JBSmoke { Scale 1.5 }


Actor JackBomb1
{
	Speed 6
	Radius 8
	Height 8
	Scale 0.25
	Damage 0
	Gravity 0.65
	PROJECTILE
	+GRENADETRAIL
	-NOGRAVITY
	+EXTREMEDEATH
	BounceType "Doom"
	+ALLOWBOUNCEONACTORS
	+BOUNCEONACTORS
	+CANBOUNCEWATER
	+PAINLESS
	+NODAMAGETHRUST
	BounceFactor 0.4
	BounceCount 6
	States
	{
	Spawn:
		TNT1 A 0 
		TNT1 A 0 ThrustThingZ(0,random(10,15),0,1)
		JBTH AAAAAAAAAA 35 Bright 
		Goto Death
	Death:
		TNT1 A 0 A_SpawnItemEx("JackBomb",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION,0)
		Stop
	}
}

Actor JackBomb2 : JackBomb1 { Speed 7 }

Actor JackBomb3 : JackBomb1 { Speed 9 }

Actor JackBomb4 : JackBomb1
{
	Speed 10
	States
	{
	Spawn:
		TNT1 A 0 
		TNT1 A 0 ThrustThingZ(0,random(12,14),0,1)
		JBTH AAAAAAAAAA 35 Bright 
		Goto Death
	}
}

Actor JackBomb5 : JackBomb4 { Speed 12 }

Actor JackBomb6 : JackBomb4 { Speed 13 }

Actor JackBomb7 : JackBomb1
{
	Speed 15
	States
	{
	Spawn:
		TNT1 A 0 
		TNT1 A 0 ThrustThingZ(0,random(14,16),0,1)
		JBTH AAAAAAAAAA 35 Bright 
		Goto Death
	}
}

Actor JackBomb8 : JackBomb7 { Speed 16 }

Actor JackBomb9 : JackBomb7 { Speed 18 }

Actor JackBombA : JackBomb1
{
	Speed 19
	States
	{
	Spawn:
		TNT1 A 0 
		TNT1 A 0 ThrustThingZ(0,random(16,18),0,1)
		JBTH AAAAAAAAAA 35 Bright 
		Goto Death
	}
}

Actor JackBombB : JackBombA { Speed 21 }

Actor JackBombC : JackBombA { Speed 22 }

Actor JackBombD : JackBomb1
{
	Speed 24
	States
	{
	Spawn:
		TNT1 A 0 
		TNT1 A 0 ThrustThingZ(0,random(18,20),0,1)
		JBTH AAAAAAAAAA 35 Bright 
		Goto Death
	}
}

Actor JackBombE : JackBombD { Speed 25 }

Actor JackBombF : JackBombD { Speed 27 }

Actor JackBombG : JackBombD { Speed 28 }

Actor JackBombAlt : JackBomb1
{
	BounceFactor 0.3
	BounceCount 3
	Speed 3
	States
	{
	Spawn:
		JBTH AAAAAAAAAA 35 Bright 
		Goto Death
	}
}



Actor JackBombDrop : CustomInventory
{
	Inventory.MaxAmount 1
	States
	{
	Use:
		TNT1 A 0
		TNT1 A 0 A_SpawnItemEx("DroppedJackBomb",0,0,32,8,0,0,0,SXF_NOCHECKPOSITION,0)
		Stop
	}
}

Actor DroppedJackBomb
{
	Radius 16
	Height 20
	Scale 0.125
	States
	{
	Spawn:
		WJKB A 15 Bright
		TNT1 A 0 A_SpawnItemEx("AEoDJackBombNoAmmo",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER,0)
		Stop
	}
}

Actor AEoDJackBombNoAmmo : AEoDJackBombItem
{
	+FLOORCLIP
	+FLOATBOB
	+INVENTORY.IGNORESKILL
	Scale 0.125
	Inventory.Amount 1
	Inventory.PickupSound "weapons/icewand/pickup"
	Inventory.PickupMessage "You discovered the JackBomb! Oh, the wonders that lie within this box..."
	States
	{
	Spawn:
		WJKB A -1 Bright
		Loop
	Pickup:
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",1) <= 0,"Nothing")
		TNT1 A 0 A_JumpIfInventory("AEGrenade",4,"Ammo")
		TNT1 A 0 A_JumpIfInventory("AEoDJackBomb",1,2)
		TNT1 A 0 A_GiveInventory("Weapon1Count",1)
		TNT1 A 0 A_GiveInventory("JackBombDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDJackBomb",1)
		TNT1 A 0 A_TakeInventory("AEGrenade",4)
		TNT1 A 0 	
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDJackBomb",1,"Ammo")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		
		TNT1 A 0 ACS_NamedExecute("s798",0,1,7,0)
		Fail
	Ammo:
		TNT1 A 0 A_TakeInventory("AEGrenade",4)
		TNT1 A 0 A_JumpIfInventory("AEoDJackBomb",1,2)
		TNT1 A 0 A_GiveInventory("Weapon1Count",1)
		TNT1 A 0 A_GiveInventory("JackBombDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDJackBomb",1)
		Stop
	}
}








//==================================================================================
//==================================================================================

//==================================================================================
//==================================================================================
Actor AEoDPortalGunItem : CustomInventory 
{
	+INVENTORY.IGNORESKILL
	Scale 0.275
	Inventory.Amount 1
	Inventory.PickupMessage "You got the dual portal device! Time to think with portals"
	Inventory.PickupSound "reilsss/weappickup/qsg"
	States
	{
	Spawn:
		N005 Z -1
		Loop
	Pickup:
		TNT1 A 0 A_JumpIfInventory("AEoDPortalGun",1,"Ammo")
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",1) <= 0,"Nothing")
		TNT1 A 0 A_GiveInventory("Weapon1Count",1)
		TNT1 A 0 A_GiveInventory("PortalGunDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDPortalGun",1)
		TNT1 A 0 	
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDPortalGun",1,"Ammo")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		
		TNT1 A 0 ACS_NamedExecute("s798",0,1,9,0)
		Fail
	Ammo:
		TNT1 A 0
		Fail
	}
}
Actor PortalGunDrop : CustomInventory
{
	Inventory.MaxAmount 1
	States
	{
	Use:
		TNT1 A 0
		TNT1 A 0 A_SpawnItemEx("DroppedPortalGun",0,0,32,8,0,0,0,SXF_NOCHECKPOSITION,0)
		Stop
	}
}

Actor DroppedPortalGun
{
	Radius 16
	Height 20
	Scale 0.275
	States
	{
	Spawn:
		N005 Z 15
		TNT1 A 0 A_SpawnItemEx("AEoDPortalGunItem",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER,0)
		Stop
	}
}

Actor GLaDOSTheSmartass
{
	var int user_delay;
	Projectile
	+NOINTERACTION
	RenderStyle None
	States
	{
	Spawn:
		TNT1 A 1
		TNT1 A 1 A_Jump(3,1)
		Loop
	Speak:
		TNT1 A 350 A_PlaySound("PotatoSay",6,0.4,0,ATTN_NONE)
		Goto Spawn
	Death:
		TNT1 A 1 A_StopSound(CHAN_AUTO|CHAN_WEAPON|CHAN_BODY|CHAN_VOICE|5|6|7)
		Stop
	}
}

Actor AEoDPortalGun : Weapon 
{
	Scale 0.275
	+WEAPON.NOAUTOAIM
	+WEAPON.NOAUTOFIRE
	+WEAPON.AMMO_OPTIONAL
	Weapon.SelectionOrder 31999
	Tag "Handheld portal device"
	States
	{
	Select:
		N005 A 0 A_SpawnItemEx("GLaDOSTheSmartass",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
		TNT1 A 0 	
	SelLoop:
		N005 A 1 A_Raise
		N005 AA 0 A_Raise
		Loop
	Deselect:
		N005 A 0 A_KillChildren("None",KILS_NOMONSTERS|KILS_KILLMISSILES,"GLaDOSTheSmartass")
		N005 A 0 A_StopSound(7)
		TNT1 A 0 	
	DesLoop:
		N005 A 1 A_Lower
		N005 AA 0 A_Lower
		Loop
	Ready:
		N005 A 0 A_PlaySound("portal/portalgun/PGunLoop",7,0.4,1)
	Ready2:
		N005 A 1 A_WeaponReady(WRF_ALLOWRELOAD)
		Loop
	Fire: 
		N005 A 0 A_PlaySound("portal/portalgun/PortalBlueFire",1)
		N005 A 0 A_SetBlend("SkyBlue",0.3,6)
		N005 B 5 A_SpawnItemEx("AEPortal1",0,0,32,cos(-pitch)*10,0,sin(-pitch)*10,0,SXF_NOCHECKPOSITION|SXF_TRANSFERPITCH)//A_FireCustomMissile("AEPortal1",0,0,0)
		N005 C 5
		N005 AAAAAAAAAAAAAAAAAAAA 1 A_WeaponReady(WRF_NOPRIMARY|WRF_ALLOWRELOAD)
		N005 A 0 A_ReFire
		Goto Ready2
	AltHold:
	Hold:
		N005 A 3
		N005 A 0 A_ReFire
		Goto Ready2
	AltFire:
		N005 A 0 A_PlaySound("portal/portalgun/PortalOrangeFire",1)
		N005 A 0 A_SetBlend("Orange",0.3,6)
		N005 B 5 A_SpawnItemEx("AEPortal2",0,0,32,cos(-pitch)*10,0,sin(-pitch)*10,0,SXF_NOCHECKPOSITION|SXF_TRANSFERPITCH)//A_FireCustomMissile("AEPortal2",0,0,0)
		N005 C 5
		N005 AAAAAAAAAAAAAAAAAAAA 1 A_WeaponReady(WRF_NOSECONDARY|WRF_ALLOWRELOAD)
		N005 A 0 A_ReFire
		Goto Ready2
	Reload:
		N005 A 5 A_GiveInventory("RemovePortals",1)
		Goto Ready2
	Spawn:
		N005 Z -1
		Stop
	}
}

Actor PortalGunDummyCheckBlue : Inventory
{Inventory.MaxAmount 1}

Actor PortalGunDummyCheckOrange : Inventory
{Inventory.MaxAmount 1}
//---------------------------------------------------------------------
// The portal projectiles

Actor AEPortal1
{
	var int user_limit;
	var int user_floorz;
	var int user_ceilingz;
	+THRUACTORS
	+NOGRAVITY
	+SKYEXPLODE
	+NOTIMEFREEZE
	Radius 10
	Height 2
	Speed 10
	Projectile
	DeathSound "portal/portalgun/PortalOpen"
	Translation "0:255=%[0,0,0]:[0.5,0.8,1.0]"
	States
	{
	Spawn:
		MISL A 1 Bright
	Moving:
		TNT1 A 0 A_SetUserVar("user_limit",user_limit+1)
		TNT1 A 0 A_JumpIf(user_limit>=4000,"End")
		TNT1 A 0 A_SpawnItemEx("Portal1Particle2",(sin(-pitch)*random(-5,5)),frandom(-2,2),frandom(-2,2),0,0,frandom(0,0.2),0,SXF_NOCHECKPOSITION)
		TNT1 A 0 A_Warp(AAPTR_DEFAULT,cos(-pitch)*2,0,sin(-pitch)*2,0,0,"Moving2")
	Moving2: //Meant to reduce density of particles.
		TNT1 A 0 A_SetUserVar("user_limit",user_limit+1)
		TNT1 A 0 A_JumpIf(user_limit>=4000,"End")
		TNT1 A 0 A_Warp(AAPTR_DEFAULT,cos(-pitch)*2,0,sin(-pitch)*2,0,0,"Moving")
	Death:
		TNT1 A 0 A_ChangeFlag("NOINTERACTION",1)
		TNT1 A 0 A_CheckCeiling("UnstickCeiling")
		TNT1 A 0 A_CheckFloor("UnstickFloor")
		Goto SpawnIn
	UnstickCeiling:
		TNT1 A 0 A_CheckFloor("LastCheck")
		TNT1 A 0 A_Warp(AAPTR_DEFAULT,0,0,((ceilingz-floorz)-10),0,WARPF_NOCHECKPOSITION|WARPF_TOFLOOR,"SpawnIn")
		Goto SpawnIn
	UnstickFloor:
		TNT1 A 0 A_Warp(AAPTR_DEFAULT,0,0,0,0,WARPF_NOCHECKPOSITION|WARPF_TOFLOOR,"SpawnIn")
		Goto SpawnIn
	LastCheck:
		TNT1 A 0 A_SetUserVar(user_ceilingz,ceilingz)
		TNT1 A 0 A_SetUserVar(user_floorz,floorz)
		TNT1 A 0 A_JumpIf((user_ceilingz-user_floorz) >= 10,"SpawnIn")
		Stop
	SpawnIn:
		TNT1 A 1 A_GiveInventory("RemoveP1",1,AAPTR_TARGET)
		TNT1 A 1 A_SpawnItemEx("Portal1Destination",cos(-pitch)*-24,0,sin(pitch)*-24,0,0,0,0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION|SXF_NOCHECKPOSITION|SXF_TRANSFERPOINTERS|SXF_SETMASTER)
		Stop
	End:
		TNT1 A 0
		Stop
	}
}


Actor AEPortal2 :  AEPortal1
{
	Translation "0:255=%[0,0,0]:[1.0,0.5,0.2]"
	States
	{
	Moving:
		TNT1 A 0 A_SetUserVar("user_limit",user_limit+1)
		TNT1 A 0 A_JumpIf(user_limit>=4000,"End")
		TNT1 A 0 A_SpawnItemEx("Portal2Particle1",(sin(-pitch)*random(-5,5)),frandom(-2,2),frandom(-2,2),0,0,frandom(0,0.2),0,SXF_NOCHECKPOSITION)
		TNT1 A 0 A_Warp(AAPTR_DEFAULT,cos(-pitch)*2,0,sin(-pitch)*2,0,0,"Moving2")
	Moving2: //Meant to reduce density of particles.
		TNT1 A 0 A_SetUserVar("user_limit",user_limit+1)
		TNT1 A 0 A_JumpIf(user_limit>=4000,"End")
		TNT1 A 0 A_Warp(AAPTR_DEFAULT,cos(-pitch)*2,0,sin(-pitch)*2,0,0,"Moving")
	Death:
		TNT1 A 0 A_ChangeFlag("NOINTERACTION",1)
		TNT1 A 0 A_CheckCeiling("UnstickCeiling")
		TNT1 A 0 A_CheckFloor("UnstickFloor")
		Goto SpawnIn
	UnstickCeiling:
		TNT1 A 0 A_CheckFloor("LastCheck")
		TNT1 A 0 A_Warp(AAPTR_DEFAULT,0,0,((ceilingz-floorz)-10),0,WARPF_NOCHECKPOSITION|WARPF_TOFLOOR,"SpawnIn")
		Goto SpawnIn
	UnstickFloor:
		TNT1 A 0 A_Warp(AAPTR_DEFAULT,0,0,0,0,WARPF_NOCHECKPOSITION|WARPF_TOFLOOR,"SpawnIn") 
		Goto SpawnIn
	LastCheck:
		TNT1 A 0 A_SetUserVar(user_ceilingz,ceilingz)
		TNT1 A 0 A_SetUserVar(user_floorz,floorz)
		TNT1 A 0 A_JumpIf((user_ceilingz-user_floorz) >= 10,"SpawnIn")
		Stop
	SpawnIn:
		TNT1 A 1 A_GiveInventory("RemoveP2",1,AAPTR_TARGET)
		TNT1 A 1 A_SpawnItemEx("Portal2Destination",cos(-pitch)*-24,0,sin(pitch)*-24,0,0,0,0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION|SXF_NOCHECKPOSITION|SXF_TRANSFERPOINTERS|SXF_SETMASTER)
		Stop
	End:
		TNT1 A 0
		Stop
	}
}

//21001 = 123
//21002 = 124
//21003 = 770
//21004 = 771

Actor Portal1Destination : SpecialSpot	//the actual teleporter
{
	TeleFogSourceType None
	TeleFogDestType None
	var int user_x;
	var int user_ceilingz;
	var int user_floorz;
	var int user_z;
	var int user_limit;
	var int user_onceiling;
	+THRUACTORS
	+NONSHOOTABLE
	+DONTSPLASH
	-NOSECTOR
	+NOGRAVITY
	+NOTIMEFREEZE
	Radius 16
	Height 10
	RenderStyle None
	Species "Portal1"
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_CheckCeiling("UnstickCeiling")
		TNT1 A 0 A_CheckFloor("UnstickFloor")
		Goto CheckerWall
	UnstickCeiling:
		TNT1 A 0 A_CheckFloor("LastCheck")
		TNT1 A 0 A_SetUserVar(user_onceiling,1)
		TNT1 A 0 A_SetUserVar("user_limit",0)
		TNT1 A 0 A_Warp(AAPTR_DEFAULT,0,0,((ceilingz-floorz)-10),0,WARPF_NOCHECKPOSITION|WARPF_TOFLOOR,"CheckerWall")
		Goto CheckerWall
	UnstickFloor:
		TNT1 A 0 A_ChangeFlag("MOVEWITHSECTOR",1)
		TNT1 A 0 A_SetUserVar("user_limit",0)
		TNT1 A 0 A_Warp(AAPTR_DEFAULT,0,0,0,0,WARPF_NOCHECKPOSITION|WARPF_TOFLOOR,"CheckerWall") 
		Goto CheckerWall
	LastCheck:
		TNT1 A 0 A_SetUserVar(user_ceilingz,ceilingz)
		TNT1 A 0 A_SetUserVar(user_floorz,floorz)
		TNT1 A 0 A_JumpIf((user_ceilingz-user_floorz) >= 10,"CheckerWall")
		Stop
	CheckerWall:
		TNT1 A 0 A_Warp(AAPTR_DEFAULT,-1,0,0,0,WARPF_TESTONLY,"Setup")
	Unstick:
		TNT1 A 0 A_SetUserVar("user_limit",user_limit+1)
		TNT1 A 0 A_JumpIf(user_limit>=5000,"Failed")
		TNT1 A 0 A_SetUserVar("user_x",user_x+1)
		TNT1 A 0 A_Warp(AAPTR_DEFAULT,-user_x,0,0,0,0,"Setup")
		Loop
	Failed:
	Removal:
		TNT1 A 0 A_RemoveChildren(1,RMVF_EVERYTHING)
		TNT1 A 0 A_TakeInventory("Portal1Token",1000,0,AAPTR_MASTER)
		Stop
	Setup:
		TNT1 A 0 A_SpawnItemEx("AEPortal1FXAlt",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETTRACER|SXF_TRANSFERPOINTERS)
	ReLoop:
		TNT1 A 0 A_TakeInventory("TeleToken",1,0,AAPTR_MASTER)
	Looper:
		TNT1 A 0 A_JumpIf(user_onceiling != 1,2)
		TNT1 A 0 A_Warp(AAPTR_DEFAULT,0,0,((ceilingz-floorz)-10),0,WARPF_NOCHECKPOSITION|WARPF_TOFLOOR)
		TNT1 A 2 A_JumpIfInventory("TeleToken",1,"DeactLoop",AAPTR_MASTER)
		TNT1 A 0 A_JumpIfMasterCloser(32,"EndLoop")
		Loop
	EndLoop:
		TNT1 A 1 A_JumpIfInventory("TeleToken",1,"TempDeactivate",AAPTR_MASTER)
		TNT1 A 0 A_GiveInventory("teleport1",1,AAPTR_Master)	
	TempDeactivate:
		TNT1 A 0 A_PlaySound("portal/portalgun/PortalExit",6)
	DeactLoop:
		TNT1 A 2
		TNT1 A 0 A_JumpIf(user_onceiling != 1,2)
		TNT1 A 0 A_Warp(AAPTR_DEFAULT,0,0,((ceilingz-floorz)-10),0,WARPF_NOCHECKPOSITION|WARPF_TOFLOOR)
		TNT1 A 0 A_JumpIfMasterCloser(32,"DeactLoop")
		Goto ReLoop
	}
}

Actor Portal2Destination : SpecialSpot
{
	TeleFogSourceType None
	TeleFogDestType None
	var int user_x;
	var int user_ceilingz;
	var int user_floorz;
	var int user_z;
	var int user_limit;
	var int user_onceiling;
	+THRUACTORS
	+NONSHOOTABLE
	+DONTSPLASH
	-NOSECTOR
	+NOGRAVITY
	+NOTIMEFREEZE
	Radius 16
	Height 10
	RenderStyle None
	Species "Portal2"
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_CheckCeiling("UnstickCeiling")
		TNT1 A 0 A_CheckFloor("UnstickFloor")
		Goto CheckerWall
	UnstickCeiling:
		TNT1 A 0 A_CheckFloor("LastCheck")
		TNT1 A 0 A_SetUserVar(user_onceiling,1)
		TNT1 A 0 A_SetUserVar("user_limit",0)
		TNT1 A 0 A_Warp(AAPTR_DEFAULT,0,0,((ceilingz-floorz)-10),0,WARPF_NOCHECKPOSITION|WARPF_TOFLOOR,"CheckerWall")
		Goto CheckerWall
	UnstickFloor:
		TNT1 A 0 A_ChangeFlag("MOVEWITHSECTOR",1)
		TNT1 A 0 A_SetUserVar("user_limit",0)
		TNT1 A 0 A_Warp(AAPTR_DEFAULT,0,0,0,0,WARPF_NOCHECKPOSITION|WARPF_TOFLOOR,"CheckerWall") 
		Goto CheckerWall
	LastCheck:
		TNT1 A 0 A_SetUserVar(user_ceilingz,ceilingz)
		TNT1 A 0 A_SetUserVar(user_floorz,floorz)
		TNT1 A 0 A_JumpIf((user_ceilingz-user_floorz) >= 10,"CheckerWall")
		Stop
	CheckerWall:
		TNT1 A 0 A_Warp(AAPTR_DEFAULT,-1,0,0,0,WARPF_TESTONLY,"Setup")
	Unstick:
		TNT1 A 0 A_SetUserVar("user_limit",user_limit+1)
		TNT1 A 0 A_JumpIf(user_limit>=5000,"Failed")
		TNT1 A 0 A_SetUserVar("user_x",user_x+1)
		TNT1 A 0 A_Warp(AAPTR_DEFAULT,-user_x,0,0,0,0,"Setup")
		Loop
	Failed:
	Removal:
		TNT1 A 0 A_RemoveChildren(1,RMVF_EVERYTHING)
		TNT1 A 0 A_TakeInventory("Portal2Token",1000,0,AAPTR_MASTER)
		Stop
	Setup:
		TNT1 A 2 A_SpawnItemEx("AEPortal2FXAlt",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETTRACER|SXF_TRANSFERPOINTERS)
	ReLoop:
		TNT1 A 0 A_TakeInventory("TeleToken",1,0,AAPTR_MASTER)
	Looper:
		TNT1 A 0 A_JumpIf(user_onceiling != 1,2)
		TNT1 A 0 A_Warp(AAPTR_DEFAULT,0,0,((ceilingz-floorz)-10),0,WARPF_NOCHECKPOSITION|WARPF_TOFLOOR)
		TNT1 A 2 A_JumpIfInventory("TeleToken",1,"TempDeactivate",AAPTR_MASTER)
		TNT1 A 0 A_JumpIfMasterCloser(32,"EndLoop")	
		Loop
	EndLoop:
		TNT1 A 1 A_JumpIfInventory("TeleToken",1,"TempDeactivate",AAPTR_MASTER)
		TNT1 A 0 A_GiveInventory("teleport2",1,AAPTR_MASTER)
		//Goto Looper
	Pain.Portal1:
	TempDeactivate:
		TNT1 A 0 A_PlaySound("portal/portalgun/PortalExit",6)
	DeactLoop:
		TNT1 A 2
		TNT1 A 0 A_JumpIf(user_onceiling != 1,2)
		TNT1 A 0 A_Warp(AAPTR_DEFAULT,0,0,((ceilingz-floorz)-10),0,WARPF_NOCHECKPOSITION|WARPF_TOFLOOR)
		TNT1 A 0 A_JumpIfMasterCloser(32,"DeactLoop")
		Goto ReLoop
	}
}

Actor TeleToken : Inventory
{	Inventory.MaxAmount 2
	Inventory.InterHubAmount 0 }

Actor RemoveP1 : CustomInventory		
{
	+INVENTORY.ALWAYSPICKUP
	States
	{
	Pickup:
		TNT1 A 0 A_RemoveChildren(1,RMVF_EVERYTHING,None,"Portal1")
		Stop
	}
}

Actor RemoveP2 : CustomInventory
{
	+INVENTORY.ALWAYSPICKUP
	States
	{
	Pickup:
		TNT1 A 0 A_RemoveChildren(1,RMVF_EVERYTHING,None,"Portal2")
		Stop
	}
}

Actor RemovePortals : CustomInventory
{
	+INVENTORY.ALWAYSPICKUP
	States
	{
	Pickup:
		TNT1 A 0 A_RemoveChildren(1,RMVF_EVERYTHING,None,"Portal1")
		TNT1 A 0 A_RemoveChildren(1,RMVF_EVERYTHING,None,"Portal2")
		Stop
	}
}

Actor teleport1 : CustomInventory		//The one that triggers the teleporting
{
	+INVENTORY.ALWAYSPICKUP
	+INVENTORY.AUTOACTIVATE
	Inventory.MaxAmount 0
	States
	{
	Spawn:
		PLAY A -1 Bright
		Stop
	Use:
		TNT1 A 0 A_TakeInventory("TeleToken",1000)
		TNT1 A 0 A_GiveInventory("TeleToken",2)
		TNT1 A 0 A_SpawnItemEx("PortalEnterSoundPlayer",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		TNT1 A 0 A_Teleport(0,"Portal2Destination","TeleportFog",TF_NOFOG|TF_NOJUMP|TF_KEEPORIENTATION|TF_USESPOTZ|TF_FORCED,0,0) //Teleport_NoFog(21004,0,0)
		Stop
	} 
}

Actor teleport2 : CustomInventory
{
	+INVENTORY.ALWAYSPICKUP
	+INVENTORY.AUTOACTIVATE
	Inventory.MaxAmount 0
	States
	{
	Spawn:
		PLAY A -1 Bright
		Stop
	Use:
		TNT1 A 0 A_TakeInventory("TeleToken",1000)
		TNT1 A 0 A_GiveInventory("TeleToken",2)
		TNT1 A 0 A_SpawnItemEx("PortalEnterSoundPlayer",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION) //because player channels are being used already
		TNT1 A 0 A_Teleport(0,"Portal1Destination","TeleportFog",TF_NOFOG|TF_NOJUMP|TF_KEEPORIENTATION|TF_USESPOTZ|TF_FORCED,0,0)//Teleport_NoFog(21003,0,0)
		Stop
	}
}

//==============================================================================
//Portal FX
//Made by Major Cooke
//==============================================================================

Actor AEPortal1FXAlt
{
	var int user_x;
	var int user_y;
	var int user_z;
	var int user_count;
	Height 10
	Projectile
	+NOINTERACTION
	+NOTIMEFREEZE
	Species "Portal1"
	RenderStyle None
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_SetUserVar("user_x",0)
		TNT1 A 0 A_SetUserVar("user_y",0)
		TNT1 A 0 A_SetUserVar("user_z",0)
		TNT1 A 0 A_GiveInventory("Portal1Token",1,AAPTR_MASTER)
	Looper:
		TNT1 A 0 A_Warp(AAPTR_TRACER,0,0,5,0,WARPF_NOCHECKPOSITION)
		TNT1 AA 0 A_SpawnItemEx("Portal1ParticleAlt",0,0,6,random(-6,6),0,random(-9,9),random(0,359),SXF_NOCHECKPOSITION)
		TNT1 AAA 0 A_SpawnItemEx("Portal1ParticleAlt",0,0,6,random(-6,6),0,random(-9,9),random(0,359),SXF_NOCHECKPOSITION,128)
		TNT1 A 2 A_SetUserVar("user_count",user_count+1)
		TNT1 A 0 A_JumpIf(user_count>=10,"LooperReal")
		Loop
	LooperReal:
		TNT1 AA 0 A_SpawnItemEx("Portal1ParticleAlt",0,0,6,random(-5,5),0,random(-8,8),random(0,359),SXF_NOCHECKPOSITION)
		TNT1 AAA 0 A_SpawnItemEx("Portal1ParticleAlt",0,0,6,random(-5,5),0,random(-8,8),random(0,359),SXF_NOCHECKPOSITION,128)
		TNT1 A 2
		Goto Looper
	Death:
	End:
		TNT1 A 0 A_TakeInventory("Portal1Token",1,0,AAPTR_MASTER)
		Stop
	}
}

Actor AEPortal2FXAlt
{
	var int user_x;
	var int user_y;
	var int user_z;
	var int user_count;
	Height 10
	Projectile
	+NOINTERACTION
	+NOTIMEFREEZE
	Species "Portal2"
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_SetUserVar("user_x",0)
		TNT1 A 0 A_SetUserVar("user_y",0)
		TNT1 A 0 A_SetUserVar("user_z",0)
		TNT1 A 0 A_GiveInventory("Portal2Token",1,AAPTR_MASTER)
	Looper:
		TNT1 A 0 A_Warp(AAPTR_TRACER,0,0,5,0,WARPF_NOCHECKPOSITION)
		TNT1 AA 0 A_SpawnItemEx("Portal2ParticleAlt",0,0,6,random(-6,6),0,random(-9,9),random(0,359),SXF_NOCHECKPOSITION)
		TNT1 AAA 0 A_SpawnItemEx("Portal2ParticleAlt",0,0,6,random(-6,6),0,random(-9,9),random(0,359),SXF_NOCHECKPOSITION,128)
		TNT1 A 2 A_SetUserVar("user_count",user_count+1)
		TNT1 A 0 A_JumpIf(user_count>=10,"LooperReal")
		Loop
	LooperReal:
		TNT1 AA 0 A_SpawnItemEx("Portal2ParticleAlt",0,0,6,random(-5,5),0,random(-8,8),random(0,359),SXF_NOCHECKPOSITION)
		TNT1 AAA 0 A_SpawnItemEx("Portal2ParticleAlt",0,0,6,random(-5,5),0,random(-8,8),random(0,359),SXF_NOCHECKPOSITION,128)
		TNT1 A 2
		Goto Looper
	Death:
	End:
		TNT1 A 0 A_TakeInventory("Portal2Token",1,0,AAPTR_MASTER)
		Stop
	}
}

Actor Portal1Token : Inventory
{	Inventory.MaxAmount 2	}

Actor P1WeaverTakedownToken : Inventory
{	Inventory.MaxAmount 4	}

Actor Portal2Token : Inventory
{	Inventory.MaxAmount 2	}

Actor P2WeaverTakedownToken : Inventory
{	Inventory.MaxAmount 4	}

Actor AEPortal2FX
{
	var int user_z;
	var int user_x;
	Projectile
	+NOINTERACTION
	+NOTIMEFREEZE
	Radius 22
	Height 40
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_SetUserVar("user_x",0)
		TNT1 A 0 A_SetUserVar("user_y",0)
		TNT1 A 0 A_SetUserVar("user_z",0)
		TNT1 A 0 A_GiveInventory("Portal2Token",1,AAPTR_PLAYER1)
	Check:
		TNT1 A 0 A_CheckCeiling("UnstickerCeiling")
	UnstickerNormal:
		TNT1 A 0 A_Warp(AAPTR_DEFAULT,-user_x,0,0,0,0,"Perform")
		TNT1 A 0 A_SetUserVar("user_x",user_x+1)
		Loop
	Perform:
		TNT1 A 0 A_SpawnItemEx("TeleportFog",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		TNT1 A 0 A_SpawnItemEx("AEPortal2Weaver1",0,0,40,0,0,0,0,SXF_NOCHECKPOSITION|SXF_TRANSFERPOINTERS,0,0) //originally had duration of 8 for all four of these
		TNT1 A 0 A_SpawnItemEx("AEPortal2Weaver1",0,0,40,0,0,0,0,SXF_NOCHECKPOSITION|SXF_TRANSFERPOINTERS,0,1) //angle: 8
		TNT1 A 0 A_SpawnItemEx("AEPortal2Weaver1",0,0,40,0,0,0,0,SXF_NOCHECKPOSITION|SXF_TRANSFERPOINTERS,0,2) //angle: 16
		TNT1 A 0 A_SpawnItemEx("AEPortal2Weaver1",0,0,40,0,0,0,0,SXF_NOCHECKPOSITION|SXF_TRANSFERPOINTERS,0,3) //angle: 24
		Goto Looper
	UnstickerCeiling:
		TNT1 A 0 A_SetUserVar("user_z",user_z+1)
		TNT1 A 1 A_Warp(AAPTR_DEFAULT,0,0,-user_z,0,0,"PerfCeiling")
		Loop
	PerfCeiling:
		TNT1 A 0 A_SpawnItemEx("TeleportFog",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION) //testing.
		TNT1 A 0 A_SpawnItemEx("AEPortal2Weaver1",0,0,20,0,0,0,0,SXF_NOCHECKPOSITION|SXF_TRANSFERPOINTERS,0,0) //Same for her from above
		TNT1 A 0 A_SpawnItemEx("AEPortal2Weaver1",0,0,20,0,0,0,0,SXF_NOCHECKPOSITION|SXF_TRANSFERPOINTERS,0,1)
		TNT1 A 0 A_SpawnItemEx("AEPortal2Weaver1",0,0,20,0,0,0,0,SXF_NOCHECKPOSITION|SXF_TRANSFERPOINTERS,0,2)
		TNT1 A 0 A_SpawnItemEx("AEPortal2Weaver1",0,0,20,0,0,0,0,SXF_NOCHECKPOSITION|SXF_TRANSFERPOINTERS,0,3)
		Goto Looper
	Looper:
		TNT1 A 1 A_JumpIfInventory("Portal2Token",2,"End",AAPTR_PLAYER1)
		Loop
	Death:
	End:
		TNT1 A 0 A_TakeInventory("Portal2Token",1,0,AAPTR_PLAYER1)
		TNT1 A 0 A_GiveInventory("P2WeaverTakedownToken",4,AAPTR_PLAYER1)
		Stop
	}
}

Actor AEPortal1Weaver1
{
	var int user_wait;
	var int user_weave;
	var int user_wp[4]; //weave property
	Projectile
	+NOINTERACTION
	+NOTIMEFREEZE
	States
	{
	Spawn:
		TNT1 A 0 NoDelay A_SetUserVar("user_weave",tid)
		TNT1 A 0 Thing_ChangeTID(0,0)
		TNT1 A 0 A_SpawnItemEx("Nothing",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_CLEARCALLERTID) // Just to ensure it's set to 0.
		TNT1 A 0 A_SetUserArray("user_wp",0,2)
		TNT1 A 0 A_SetUserArray("user_wp",1,2)
		TNT1 A 0 A_SetUserArray("user_wp",2,25)
		TNT1 A 0 A_SetUserArray("user_wp",3,25)
		TNT1 A 0 A_JumpIf(user_weave <= 0,"Safety") //Just being more code conscientious.
		TNT1 A 0 A_JumpIf(user_weave == 1,"Offset1")
		TNT1 A 0 A_JumpIf(user_weave == 2,"Offset2")
		TNT1 A 0 A_JumpIf(user_weave == 3,"Offset3")
		Goto Safety
	Offset3:
		TNT1 AAAAAAAAAAAAAAAA 0 A_Weave(user_wp[0],user_wp[1],user_wp[2]*0.1,user_wp[3]*0.1)
	Offset2:
		TNT1 AAAAAAAAAAAAAAAA 0 A_Weave(user_wp[0],user_wp[1],user_wp[2]*0.1,user_wp[3]*0.1)
	Offset1:
		TNT1 AAAAAAAAAAAAAAAA 0 A_Weave(user_wp[0],user_wp[1],user_wp[2]*0.1,user_wp[3]*0.1)
		Goto Safety
	Safety:
		TNT1 A 0 A_SpawnItemEx("Portal1Particle2",0,frandom(-1,1),frandom(-1,1),0,0,frandom(0,0.2),random(0,359),SXF_NOCHECKPOSITION)
		TNT1 A 0 A_Warp(AAPTR_DEFAULT,0,0,0,0,WARPF_USECALLERANGLE|WARPF_NOCHECKPOSITION) TNT1 A 0 A_SetAngle(angle+1)
		TNT1 A 1 A_Weave(user_wp[0],user_wp[1],user_wp[2]*0.1,user_wp[3]*0.1)
		TNT1 A 0 A_SetUserVar("user_wait",user_wait+1)
		TNT1 A 0 A_JumpIf(user_wait>=35,"Normalized")
		Loop
	Normalized:
		TNT1 A 0 A_SpawnItemEx("Portal1Particle2",0,frandom(-1,1),frandom(-1,1),0,0,frandom(0,0.2),random(0,359),SXF_NOCHECKPOSITION)
		TNT1 A 0 A_Warp(AAPTR_DEFAULT,0,0,0,0,WARPF_USECALLERANGLE|WARPF_NOCHECKPOSITION) TNT1 A 0 A_SetAngle(angle+1)
		TNT1 A 1 A_Weave(user_wp[0],user_wp[1],user_wp[2]*0.1,user_wp[3]*0.1)
		TNT1 A 0 A_JumpIfInventory("P1WeaverTakedownToken",1,"End",AAPTR_PLAYER1)
		Loop
	Death:
	End:
		TNT1 A 0 A_TakeInventory("P1WeaverTakedownToken",1,0,AAPTR_PLAYER1)
		Stop
	}
}

Actor AEPortal2Weaver1
{
	var int user_wait;
	var int user_weave;
	var int user_wp[4]; //weave property
	Projectile
	+NOINTERACTION
	+NOTIMEFREEZE
	States
	{
	Spawn:
		TNT1 A 0 NoDelay A_SetUserVar("user_weave",tid)
		TNT1 A 0 Thing_ChangeTID(0,0)
		TNT1 A 0 A_SpawnItemEx("Nothing",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_CLEARCALLERTID) // Just to ensure it's set to 0.
		TNT1 A 0 A_SetUserArray("user_wp",0,2)
		TNT1 A 0 A_SetUserArray("user_wp",1,2)
		TNT1 A 0 A_SetUserArray("user_wp",2,25)
		TNT1 A 0 A_SetUserArray("user_wp",3,25)
		TNT1 A 0 A_JumpIf(user_weave <= 0,"Safety") //Just being more code conscientious.
		TNT1 A 0 A_JumpIf(user_weave == 1,"Offset1")
		TNT1 A 0 A_JumpIf(user_weave == 2,"Offset2")
		TNT1 A 0 A_JumpIf(user_weave == 3,"Offset3")
		Goto Safety
	Offset3:
		TNT1 AAAAAAAAAAAAAAAA 0 A_Weave(user_wp[0],user_wp[1],user_wp[2]*0.1,user_wp[3]*0.1)
	Offset2:
		TNT1 AAAAAAAAAAAAAAAA 0 A_Weave(user_wp[0],user_wp[1],user_wp[2]*0.1,user_wp[3]*0.1)
	Offset1:
		TNT1 AAAAAAAAAAAAAAAA 0 A_Weave(user_wp[0],user_wp[1],user_wp[2]*0.1,user_wp[3]*0.1)
		Goto Safety
	Safety:
		TNT1 A 0 A_SpawnItemEx("Portal2Particle1",0,frandom(-1,1),frandom(-1,1),0,0,frandom(0,0.2),random(0,359),SXF_NOCHECKPOSITION)
		TNT1 A 0 A_Warp(AAPTR_DEFAULT,0,0,0,0,WARPF_USECALLERANGLE|WARPF_NOCHECKPOSITION) TNT1 A 0 A_SetAngle(angle+1)
		TNT1 A 1 A_Weave(2,2,2.5,2.5)
		TNT1 A 0 A_SetUserVar("user_wait",user_wait+1)
		TNT1 A 0 A_JumpIf(user_wait>=35,"Normalized")
		Loop
	Normalized:
		TNT1 A 0 A_SpawnItemEx("Portal2Particle1",0,frandom(-1,1),frandom(-1,1),0,0,frandom(0,0.2),random(0,359),SXF_NOCHECKPOSITION)
		TNT1 A 0 A_Warp(AAPTR_DEFAULT,0,0,0,0,WARPF_USECALLERANGLE|WARPF_NOCHECKPOSITION) TNT1 A 0 A_SetAngle(angle+1)
		TNT1 A 1 A_Weave(2,2,2,2)
		TNT1 A 0 A_JumpIfInventory("P2WeaverTakedownToken",1,"End",AAPTR_PLAYER1)
		Loop
	End:
		TNT1 A 0 A_TakeInventory("P2WeaverTakedownToken",1,0,AAPTR_PLAYER1)
		Stop
	}
}

Actor Portal1Particle1
{
	+NOINTERACTION
	RenderStyle Add
	Alpha 0.75
	Scale 0.15
	Translation "0:255=%[0,0,0]:[0.25,0.25,1]"
	+NOTIMEFREEZE
	States
	{
	Spawn:
		TNT1 A 0
		X006 CFIL 0 A_JumpIf(random(1,10) == 10,"Playoff")
		X007 DG 0 A_JumpIf(random(4,10) == 10,"Playoff")	
		X033 BCEH 0 A_JumpIf(random(6,10) == 10,"Playoff")
	Playoff:
		"####" "#" 0 
		"####" "#" 2 A_FadeOut(0.02)
		Loop
	}
}

Actor Portal1Particle2 : Portal1Particle1
{
	var int user_count;
	Alpha 0
	+NOINTERACTION
	+NOTIMEFREEZE
	RenderStyle Add
	Alpha 0.0
	Scale 0.15
	Translation "0:255=%[0,0,0]:[0.25,0.25,1]"
	States
	{
	Spawn:
		TNT1 A 0
		X006 CFIL 0 A_JumpIf(random(1,10) == 10,"Playoff")
		X007 DG 0 A_JumpIf(random(4,10) == 10,"Playoff")	
		X033 BCEH 0 A_JumpIf(random(6,10) == 10,"Playoff")
	Playoff:
		"####" "#" 1 A_FadeIn(0.03)
		"####" "#" 0 A_JumpIf(alpha>=0.75,"Shrink")
		Loop
	Shrink:
		"####" "#" 1 A_SetScale(scaleX-0.003)
		"####" "#" 0 A_JumpIf(scaleX<=0,1)
		Loop
		TNT1 A 0
		Stop
	}
}

Actor Portal2Particle1 : Portal1Particle2 { Translation "0:255=%[0,0,0]:[1,0.65,0.25]" }

Actor Portal1ParticleAlt
{
	var int user_count;
	+NOINTERACTION
	+NOTIMEFREEZE
	RenderStyle Add
	Alpha 0.75
	Scale 0.25
	Translation "0:255=%[0,0,0]:[0.25,0.25,1]"
	States
	{
	Spawn:
		TNT1 A 0
		X006 CFIL 0 A_JumpIf(random(1,10) == 10,"Playoff")
		X007 DG 0 A_JumpIf(random(4,10) == 10,"Playoff")	
		X033 BCEH 0 A_JumpIf(random(6,10) == 10,"Playoff")
	Playoff:
		"####" "#" 0 A_SetScale((ScaleX+0.035))
		"####" "#" 0 A_FadeTo(0.65,0.1,0)
		"####" "#" 1 A_ScaleVelocity(0.85)
		"####" "#" 0 A_SetUserVar("user_count",user_count+1)
		"####" "#" 0 A_JumpIf(user_count>=15,1)
		Loop
		"####" "#" 0 A_ScaleVelocity(-1)
		"####" "######" 1 A_ScaleVelocity(1.3)
	Playoff2:
		"####" "#" 1 A_FadeTo(0,0.1,1)
		Loop
	}
}

Actor Portal2ParticleAlt : Portal1ParticleAlt { Translation "0:255=%[0,0,0]:[1,0.65,0.25]" }
Actor PortalEnterSoundPlayer
{
	+NOINTERACTION
	Radius 3
	Height 3
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 4 A_PlaySound("portal/portalgun/PortalEnter",6)	//so, a new actor, for this little sound
		Stop
	}
}
//==================================================================================
//==================================================================================

// Cave J. said that he was going to make somebody invent them, and they did.

// Name by Major Cooke
// Sprites edit of the "Hand grenade" weapon by DBThananatos
// Lemon projectiles sprites by DBThanatos
// Throwing code based on Ichor's AEoD hand grenade, modified by DBT

//==================================================================================
//==================================================================================

Actor AEoDLemonNadeItem : CustomInventory 
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL
	Scale 0.075
	Inventory.Amount 1
	Inventory.PickupMessage "You got some combustible lemons! Get mad! Time to burn houses down!"
	Inventory.PickupSound "misc/w_pkup"
	States
	{
	Spawn:
		M006 Z -1
		Loop
	Pickup:
		TNT1 A 0 A_JumpIfInventory("AEoDLemonNade",1,"Ammo")
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",1) <= 0,"Nothing")
		TNT1 A 0 A_GiveInventory("Weapon1Count",1)
		TNT1 A 0 A_GiveInventory("LemonNadeDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDLemonNade",1)
		TNT1 A 0 	
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDLemonNade",1,"Ammo")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		
		TNT1 A 0 ACS_NamedExecute("s798",0,1,10,0)
		Fail
	Ammo:
		TNT1 A 0 A_GiveInventory("AEoDLemonNade",1)
		Stop
	}
}


Actor LemonNadeDrop : CustomInventory
{
	Inventory.MaxAmount 1
	States
	{
	Use:
		TNT1 A 0
		TNT1 A 0 A_SpawnItemEx("DroppedLemonNade",0,0,32,8,0,0,0,SXF_NOCHECKPOSITION,0)
		Stop
	}
}

Actor DroppedLemonNade
{
	Radius 16
	Height 20
	Scale 0.075
	States
	{
	Spawn:
		M006 Z 15
		TNT1 A 0 A_SpawnItemEx("AEoDLemonNadeNoAmmo",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER,0)
		Stop
	}
}

Actor AEoDLemonNadeNoAmmo : AEoDLemonNadeItem
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL
	Scale 0.075
	Inventory.Amount 1
	Inventory.PickupMessage "You got some combustible lemons! Get mad! Time to burn houses down!"
	Inventory.PickupSound "misc/w_pkup"
	States
	{
	Spawn:
		M006 Z -1
		Loop
	Pickup:
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",1) <= 0,"Nothing")
		TNT1 A 0 A_JumpIfInventory("AEGrenade",10,"Ammo")
		TNT1 A 0 A_GiveInventory("Weapon1Count",1)
		TNT1 A 0 A_GiveInventory("LemonNadeDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDLemonNade",1)
		TNT1 A 0 A_TakeInventory("AEGrenade",10)
		TNT1 A 0 	
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDLemonNade",1,"Ammo")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		
		TNT1 A 0 ACS_NamedExecute("s798",0,1,10,0)
		Fail
	Ammo:
		TNT1 A 0 A_TakeInventory("AEGrenade",10)
		TNT1 A 0 A_JumpIfInventory("AEoDLemonNade",1,2)
		TNT1 A 0 A_GiveInventory("Weapon1Count",1)
		TNT1 A 0 A_GiveInventory("LemonNadeDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDLemonNade",1)
		Stop
	}
}


Actor AEoDLemonNade : Weapon 
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL
	+WEAPON.CHEATNOTWEAPON
	+WEAPON.NOALERT
	Weapon.AmmoType1 "AEGrenade"
	Weapon.AmmoGive1 10
	Weapon.AmmoUse1 10
	Weapon.SelectionOrder 28999
	Inventory.PickupMessage "You got some combustible lemons! Get mad! Time to burn houses down!"
	Inventory.PickupSound "misc/w_pkup"
	weapon.upsound "weapons/draw"
	Scale 0.075
	Tag "Combustible lemons"
	States
	{
	Spawn:
		N006 Z -1
		Loop
	Ready: 
		TNT1 A 0 A_JumpIfInventory("RedNadeSelected",1,"ReadyRed")
	ReadyBlack:
		M006 A 1 A_WeaponReady
		Loop
	ReadyRed:
		M006 I 1 A_WeaponReady
		Loop
	
	ReadyEmpty:
		TNT1 A 0 A_CheckReload
		Goto Deselect
	
	Deselect:
		TNT1 A 0 	
		TNT1 A 0 A_JumpIfInventory("AEGrenade",1,4)
		TNT1 A 1 A_Lower
		TNT1 AA 0 A_Lower
		Loop
		TNT1 A 0 A_JumpIfInventory("RedNadeSelected",1,"DeselectRed")
	DeselectBlack:
		TNT1 A 0 	
		M006 A 1 A_Lower
		TNT1 AA 0 A_Lower
		Loop
	DeselectRed:
		TNT1 A 0 	
		M006 I 1 A_Lower
		TNT1 AA 0 A_Lower
		Loop
	
	Select:
		TNT1 A 0 A_JumpIfInventory("RedNadeSelected",1,"SelectRed")
	SelectBlack:
		TNT1 A 0 	
		TNT1 A 0 A_TakeInventory("TNTThrowForce",999) 
		M006 A 1 A_Raise
		TNT1 AA 0 A_Raise
		Loop
	SelectRed:
		TNT1 A 0 	
		TNT1 A 0 A_TakeInventory("TNTThrowForce",999) 
		M006 I 1 A_Raise
		TNT1 AA 0 A_Raise
		Loop
	
	Fire:
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",1,"FireCheck")
		TNT1 A 0 A_JumpIfInventory("RedNadeSelected",1,"FireRed")
	FireBlack:
		M006 BCD 2
		M006 E 2 A_PlaySound("reilsss/weapons/handGrenadetick", CHAN_WEAPON, 1.0, 0)
		M006 FGHH 2
		Goto FireCheck
	FireRed:
		M006 JKL 2
		M006 M 2 A_PlaySound("reilsss/weapons/handGrenadetick", CHAN_WEAPON, 1.0, 0)
		M006 NOPP 2
		Goto FireCheck
	
	FireCheck:
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",16,"ThrowGrenadeG")
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",15,"ThrowGrenadeG")
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",14,"ThrowGrenadeF")
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",13,"ThrowGrenadeE")
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",12,"ThrowGrenadeD")
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",11,"ThrowGrenadeC")
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",10,"ThrowGrenadeB")
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",9,"ThrowGrenadeA")
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",8,"ThrowGrenade9")
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",7,"ThrowGrenade8")
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",6,"ThrowGrenade7")
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",5,"ThrowGrenade6")
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",4,"ThrowGrenade5")
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",3,"ThrowGrenade4")
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",2,"ThrowGrenade3")
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",1,"ThrowGrenade2")
		TNT1 A 0 A_GiveInventory("TNTThrowForce",1)
		TNT1 A 2 A_GunFlash
		TNT1 A 0 A_ReFire
	ThrowGrenade1:
		R013 I 2
		R013 J 0 A_PlaySound("reilsss/weapons/handGrenadethrow", CHAN_WEAPON, 1.0, 0)
		TNT1 A 0 A_TakeInventory("TNTThrowForce",999999)
		R013 J 0 A_FireCustomMissile("ThrownLemonNade1",0,1,8,0)
		Goto EndThrow
	ThrowGrenade2:
		TNT1 A 2 A_GiveInventory("TNTThrowForce",1)
		TNT1 A 0 A_Refire
		R013 I 2
		R013 J 0 A_PlaySound("reilsss/weapons/handGrenadethrow", CHAN_WEAPON, 1.0, 0)
		TNT1 A 0 A_TakeInventory("TNTThrowForce",999999)
		R013 J 0 A_FireCustomMissile("ThrownLemonNade2",0,1,8,0)
		Goto EndThrow
	ThrowGrenade3:
		TNT1 A 2 A_GiveInventory("TNTThrowForce",1)
		TNT1 A 0 A_Refire
		R013 I 2
		R013 J 0 A_PlaySound("reilsss/weapons/handGrenadethrow", CHAN_WEAPON, 1.0, 0)
		TNT1 A 0 A_TakeInventory("TNTThrowForce",999999)
		R013 J 0 A_FireCustomMissile("ThrownLemonNade3",0,1,8,0)
		Goto EndThrow
	ThrowGrenade4:
		TNT1 A 2 A_GiveInventory("TNTThrowForce",1)
		TNT1 A 0 A_Refire
		R013 I 2
		R013 J 0 A_PlaySound("reilsss/weapons/handGrenadethrow", CHAN_WEAPON, 1.0, 0)
		TNT1 A 0 A_TakeInventory("TNTThrowForce",999999)
		R013 J 0 A_FireCustomMissile("ThrownLemonNade4",0,1,8,0)
		Goto EndThrow
	ThrowGrenade5:
		TNT1 A 2 A_GiveInventory("TNTThrowForce",1)
		TNT1 A 0 A_Refire
		R013 I 2
		R013 J 0 A_PlaySound("reilsss/weapons/handGrenadethrow", CHAN_WEAPON, 1.0, 0)
		TNT1 A 0 A_TakeInventory("TNTThrowForce",999999)
		R013 J 0 A_FireCustomMissile("ThrownLemonNade5",0,1,8,0)
		Goto EndThrow
	ThrowGrenade6:
		TNT1 A 2 A_GiveInventory("TNTThrowForce",1)
		TNT1 A 0 A_Refire
		R013 I 2
		R013 J 0 A_PlaySound("reilsss/weapons/handGrenadethrow", CHAN_WEAPON, 1.0, 0)
		TNT1 A 0 A_TakeInventory("TNTThrowForce",999999)
		R013 J 0 A_FireCustomMissile("ThrownLemonNade6",0,1,8,0)
		Goto EndThrow
	ThrowGrenade7:
		TNT1 A 2 A_GiveInventory("TNTThrowForce",1)
		TNT1 A 0 A_Refire
		R013 I 2
		R013 J 0 A_PlaySound("reilsss/weapons/handGrenadethrow", CHAN_WEAPON, 1.0, 0)
		TNT1 A 0 A_TakeInventory("TNTThrowForce",999999)
		R013 J 0 A_FireCustomMissile("ThrownLemonNade7",0,1,8,0)
		Goto EndThrow
	ThrowGrenade8:
		TNT1 A 2 A_GiveInventory("TNTThrowForce",1)
		TNT1 A 0 A_Refire
		N006 I 2
		R013 J 0 A_PlaySound("reilsss/weapons/handGrenadethrow", CHAN_WEAPON, 1.0, 0)
		TNT1 A 0 A_TakeInventory("TNTThrowForce",999999)
		R013 J 0 A_FireCustomMissile("ThrownLemonNade8",0,1,8,0)
		Goto EndThrow
	ThrowGrenade9:
		TNT1 A 2 A_GiveInventory("TNTThrowForce",1)
		TNT1 A 0 A_Refire
		R013 I 2
		R013 J 0 A_PlaySound("reilsss/weapons/handGrenadethrow", CHAN_WEAPON, 1.0, 0)
		TNT1 A 0 A_TakeInventory("TNTThrowForce",999999)
		R013 J 0 A_FireCustomMissile("ThrownLemonNade9",0,1,8,0)
		Goto EndThrow
	ThrowGrenadeA:
		TNT1 A 2 A_GiveInventory("TNTThrowForce",1)
		TNT1 A 0 A_Refire
		R013 I 2
		R013 J 0 A_PlaySound("reilsss/weapons/handGrenadethrow", CHAN_WEAPON, 1.0, 0)
		TNT1 A 0 A_TakeInventory("TNTThrowForce",999999)
		R013 J 0 A_FireCustomMissile("ThrownLemonNadeA",0,1,8,0)
		Goto EndThrow
	ThrowGrenadeB:
		TNT1 A 2 A_GiveInventory("TNTThrowForce",1)
		TNT1 A 0 A_Refire
		R013 I 2
		R013 J 0 A_PlaySound("reilsss/weapons/handGrenadethrow", CHAN_WEAPON, 1.0, 0)
		TNT1 A 0 A_TakeInventory("TNTThrowForce",999999)
		R013 J 0 A_FireCustomMissile("ThrownLemonNadeB",0,1,8,0)
		Goto EndThrow
	ThrowGrenadeC:
		TNT1 A 2 A_GiveInventory("TNTThrowForce",1)
		TNT1 A 0 A_Refire
		R013 I 2
		R013 J 0 A_PlaySound("reilsss/weapons/handGrenadethrow", CHAN_WEAPON, 1.0, 0)
		TNT1 A 0 A_TakeInventory("TNTThrowForce",999999)
		R013 J 0 A_FireCustomMissile("ThrownLemonNadeC",0,1,8,0)
		Goto EndThrow
	ThrowGrenadeD:
		TNT1 A 2 A_GiveInventory("TNTThrowForce",1)
		TNT1 A 0 A_Refire
		R013 I 2
		R013 J 0 A_PlaySound("reilsss/weapons/handGrenadethrow", CHAN_WEAPON, 1.0, 0)
		TNT1 A 0 A_TakeInventory("TNTThrowForce",999999)
		R013 J 0 A_FireCustomMissile("ThrownLemonNadeD",0,1,8,0)
		Goto EndThrow
	ThrowGrenadeE:
		TNT1 A 2 A_GiveInventory("TNTThrowForce",1)
		TNT1 A 0 A_Refire
		R013 I 2
		R013 J 0 A_PlaySound("reilsss/weapons/handGrenadethrow", CHAN_WEAPON, 1.0, 0)
		TNT1 A 0 A_TakeInventory("TNTThrowForce",999999)
		R013 J 0 A_FireCustomMissile("ThrownLemonNadeE",0,1,8,0)
		Goto EndThrow
	ThrowGrenadeF:
		TNT1 A 2 A_GiveInventory("TNTThrowForce",1)
		TNT1 A 0 A_Refire
		R013 I 2
		R013 J 0 A_PlaySound("reilsss/weapons/handGrenadethrow", CHAN_WEAPON, 1.0, 0)
		TNT1 A 0 A_TakeInventory("TNTThrowForce",999999)
		R013 J 0 A_FireCustomMissile("ThrownLemonNadeF",0,1,8,0)
		Goto EndThrow
	ThrowGrenadeG:
		TNT1 A 2 A_GiveInventory("TNTThrowForce",1)
		TNT1 A 0 A_Refire
		R013 I 2
		R013 J 0 A_PlaySound("reilsss/weapons/handGrenadethrow", CHAN_WEAPON, 1.0, 0)
		TNT1 A 0 A_TakeInventory("TNTThrowForce",999999)
		R013 J 0 A_FireCustomMissile("ThrownLemonNadeG",0,1,8,0)
		Goto EndThrow
	
	EndThrow:
		R013 JKLMNOPQ 1
		TNT1 A 0 A_TakeInventory("RedNadeSelected",1)
		TNT1 A 10
		TNT1 A 0 A_Jump(128,2)
		TNT1 A 0 A_GiveInventory("RedNadeSelected",1)
		TNT1 A 0 A_JumpIfInventory("RedNadeSelected",1,"RaiseRedAfterFire")
	RaiseBlackAfterFire:
		M006 A 1 offset (0, 72)
		M006 A 1 offset (0, 64)
		M006 A 1 offset (0, 56)
		M006 A 1 offset (0, 48)
		M006 A 1 offset (0, 40)
		M006 A 1 offset (0, 36)
		Goto Ready
	RaiseRedAfterFire:
		M006 I 1 offset (0, 72)
		M006 I 1 offset (0, 64)
		M006 I 1 offset (0, 56)
		M006 I 1 offset (0, 48)
		M006 I 1 offset (0, 40)
		M006 I 1 offset (0, 36)
		Goto Ready
		
	Flash:
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",16,32)
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",15,30)
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",14,28)
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",13,26)
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",12,24)
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",11,22)
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",10,20)
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",9,18)
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",8,16)
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",7,14)
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",6,12)
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",5,10)
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",4,8)
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",3,6)
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",2,4)
		TNT1 A 0 A_JumpIfInventory("TNTThrowForce",1,2)
		TNT1 A 0
		Stop
		DYNG A 2 Bright
		Loop
		DYNG B 2 Bright
		Loop
		DYNG C 2 Bright
		Loop
		DYNG D 2 Bright
		Loop
		DYNG E 2 Bright
		Loop
		DYNG F 2 Bright
		Loop
		DYNG G 2 Bright
		Loop
		DYNG H 2 Bright
		Loop
		DYNG I 2 Bright
		Loop
		DYNG J 2 Bright
		Loop
		DYNG K 2 Bright
		Loop
		DYNG L 2 Bright
		Loop
		DYNG M 2 Bright
		Loop
		DYNG N 2 Bright
		Loop
		DYNG O 2 Bright
		Loop
		DYNG P 2 Bright
		Loop
	}
}

Actor RedNadeSelected : Inventory {}


Actor ThrownLemonNade1
{
	PROJECTILE
	-NOGRAVITY
	+CANBOUNCEWATER
	+FORCERADIUSDMG
	+EXTREMEDEATH
	Radius 5
	Height 5
	Speed 6
	Damage 10
	DamageType "Fire"
	BounceType "Doom"
	BounceFactor 0.6
	BounceCount 6
	BounceSound "postal2/weapons/grenade_bounce_lowvol"
	Scale 0.08
	Gravity 0.65
	States
	{
	Spawn:
		TNT1 A 0 
		TNT1 A 0 ThrustThingZ(0,random(10,12),0,1)
		TNT1 A 0 A_AlertMonsters
		TNT1 A 0 A_Jump(256,"SelectType")	//this type of jumps are made this way for the inheritances
		Goto SelectType
	SelectType:
		TNT1 A 0 A_JumpIfInventory("RedNadeSelected",1,"Red",AAPTR_TARGET) //Very good, DBT! You're a fast learner! ;) -M.C.
		Goto Black
	Black:
		N06A ABCDEF 3 
		Loop
	Red:
		N06B ABCDEF 3 
		Loop
	Death:
		TNT1 A 0 A_PlaySound("reilsss/weapons/handGrenadeexplosion1")
		TNT1 A 0 A_SpawnItemEx("LemonNadeExplosion",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		EXP3 A 0 A_Explode(250,140,1)
		TNT1 A 0 A_SpawnItemEx("LemonNadeFireFX",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_TRANSFERPOINTERS)
		TNT1 A 10 A_SpawnItemEx("NewExplosionMedium",0,0,0,0,0,0,0)
		Stop
	}
}

Actor ThrownLemonNade2 : ThrownLemonNade1 { Speed 7 }

Actor ThrownLemonNade3 : ThrownLemonNade1 { Speed 9 }

Actor ThrownLemonNade4 : ThrownLemonNade1
{
	Speed 10
	States
	{
	Spawn:
		TNT1 A 0 
		TNT1 A 0 ThrustThingZ(0,random(12,14),0,1)
		TNT1 A 0 A_AlertMonsters
		TNT1 A 0 A_Jump(256,"SelectType")
		Goto SelectType
	}
}


Actor ThrownLemonNade5 : ThrownLemonNade4 { Speed 12 }

Actor ThrownLemonNade6 : ThrownLemonNade4 { Speed 13 }

Actor ThrownLemonNade7 : ThrownLemonNade4
{
	Speed 15
	States
	{
	Spawn:
		TNT1 A 0 
		TNT1 A 0 ThrustThingZ(0,random(14,16),0,1)
		TNT1 A 0 A_AlertMonsters
		TNT1 A 0 A_Jump(256,"SelectType")
		Goto SelectType
	}
}

Actor ThrownLemonNade8 : ThrownLemonNade7 { Speed 16 }

Actor ThrownLemonNade9 : ThrownLemonNade7 { Speed 18 }

Actor ThrownLemonNadeA : ThrownLemonNade7
{
	Speed 19
	States
	{
	Spawn:
		TNT1 A 0 
		TNT1 A 0 ThrustThingZ(0,random(16,18),0,1)
		TNT1 A 0 A_AlertMonsters
		TNT1 A 0 A_Jump(256,"SelectType")
		Goto SelectType
	}
}

Actor ThrownLemonNadeB : ThrownLemonNadeA { Speed 21 }

Actor ThrownLemonNadeC : ThrownLemonNadeA { Speed 22 }

Actor ThrownLemonNadeD : ThrownLemonNadeA
{
	Speed 24
	States
	{
	Spawn:
		TNT1 A 0 
		TNT1 A 0 ThrustThingZ(0,random(18,20),0,1)
		TNT1 A 0 A_AlertMonsters
		TNT1 A 0 A_Jump(256,"SelectType")
		Goto SelectType
	}
}

Actor ThrownLemonNadeE : ThrownLemonNadeD { Speed 25 }

Actor ThrownLemonNadeF : ThrownLemonNadeD { Speed 27 }

Actor ThrownLemonNadeG : ThrownLemonNadeD { Speed 28 }


Actor LemonNadeSpawner : CustomInventory
{
	+INVENTORY.AUTOACTIVATE
	Inventory.MaxAmount 1
	States
	{
	Spawn:
		PLAY A -1 Bright
		Stop
	Use:
		TNT1 A 0 A_SpawnItemEx("AEoDLemonNadeItem",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		Stop
	}
}




//==============================================================================
//The Big One...
//Lemon Nade Fires
//These things are nasty.
//==============================================================================

Actor LemonNadeFireFX
{
	var int user_angle;
	var int user_count;
	Projectile
	+NOINTERACTION
	+PAINLESS
	+DONTSPLASH
	DamageType "Fire"
	+NODAMAGETHRUST
	States
	{
	Spawn:
		TNT1 A 0
	Spawning:
		TNT1 A 0 A_SpawnItemEx("LemonNadeFlamelet",frandom(0,8),0,random(0,10),frandom(10,13),0,frandom(-2,6),user_angle,SXF_NOCHECKPOSITION|SXF_TRANSFERPOINTERS)
		TNT1 A 0 A_SpawnItemEx("LemonNadeFlamelet",frandom(0,8),0,random(0,10),frandom(10,13),0,frandom(-2,6),user_angle+90,SXF_NOCHECKPOSITION|SXF_TRANSFERPOINTERS)
		TNT1 A 0 A_SpawnItemEx("LemonNadeFlamelet",frandom(0,8),0,random(0,10),frandom(10,13),0,frandom(-2,6),user_angle+180,SXF_NOCHECKPOSITION|SXF_TRANSFERPOINTERS)
		TNT1 A 0 A_SpawnItemEx("LemonNadeFlamelet",frandom(0,8),0,random(0,10),frandom(10,13),0,frandom(-2,6),user_angle+270,SXF_NOCHECKPOSITION|SXF_TRANSFERPOINTERS)
		TNT1 AAA 0 A_SpawnItemEx("LemonNadeFlamelet2",random(0,80),0,random(-10,10),frandom(2,7),0,frandom(3,15),random(0,359),SXF_NOCHECKPOSITION|SXF_TRANSFERPOINTERS)
		TNT1 AAAAAAAAAAAA 0 A_SpawnItemEx("LemonNadeFlamelet2",random(0,80),0,random(-10,10),frandom(2,7),0,frandom(3,15),random(0,359),SXF_NOCHECKPOSITION|SXF_TRANSFERPOINTERS,192)
		TNT1 A 0 A_Explode(8,256,1,0,128)
		TNT1 A 0 A_SetUserVar("user_count",user_count+1)
	AngleCheck:
		TNT1 A 0 A_JumpIf(user_count>=10&&user_count<<30,"Angle1")
		TNT1 A 0 A_JumpIf(user_count>=30&&user_count<<50,"Angle2")
		TNT1 A 0 A_JumpIf(user_count>=50&&user_count<<65,"Angle3")
		TNT1 A 0 A_JumpIf(user_count>=65&&user_count<<75,"Angle4")
		TNT1 A 0 A_JumpIf(user_count>=75,"Angle5")
	Angle1:
		TNT1 A 0 A_SetUserVar("user_angle",user_angle+1)
		Goto Checker
	Angle2:
		TNT1 A 0 A_SetUserVar("user_angle",user_angle+2)
		Goto Checker
	Angle3:
		TNT1 A 0 A_SetUserVar("user_angle",user_angle+3)
		Goto Checker
	Angle4:
		TNT1 A 0 A_SetUserVar("user_angle",user_angle+4)
		Goto Checker
	Angle5:
		TNT1 A 0 A_SetUserVar("user_angle",user_angle+5)
		Goto Checker
	Checker:
		TNT1 A 1 A_JumpIf(user_count>=150,"End")
		Goto Spawning
	End:
		TNT1 A 0
		Stop
	}
}

Actor LemonNadeFlamelet
{
	Projectile
	+RIPPER	RipperLevel 1
	+DONTREFLECT
	+STRIFEDAMAGE
	+BLOODLESSIMPACT
	+NODAMAGETHRUST
	+FOILINVUL
	Speed 10
	Radius 3
	Height 3
	Damage 1
	Scale 0.3
	DamageType "Fire"
	BounceType "Doom"
	RenderStyle Add
	+DONTSPLASH
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_Jump(256,"E1","E2")
	E1:
		X068 ABCDEFGHIJKLMNOPQRSTUVWXYZ 1 Bright A_ScaleVelocity(0.97)
		X069 ABCDEFGHIJKLMNOPQRS 1 Bright A_ChangeVelocity(-0.97,0,0.1,1)
		Stop
	E2:
		X070 ABCDEFGHIJKLMNOPQRSTUVWXYZ 1 Bright A_ScaleVelocity(0.97)
		X07A ABCDEFGHIJKLMNOPQRSTU 1 Bright A_ChangeVelocity(-0.97,0,0.1,1)
		Stop
	Death:
		TNT1 A 0
		Stop
	}
}

Actor LemonNadeFlamelet2
{
	Projectile
	+NOINTERACTION
	Scale 0.4
	RenderStyle Add
	+DONTSPLASH
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_Jump(256,"E1","E2")
	E1:
		X068 ABCDEFGHIJKLMNOPQRSTUVWXYZ 1 Bright A_ScaleVelocity(0.95)
		X069 ABCDEFGHIJKLMNOPQRS 1 Bright A_ScaleVelocity(0.93)
		Stop
	E2:
		X070 ABCDEFGHIJKLMNOPQRSTUVWXYZ 1 Bright A_ScaleVelocity(0.95)
		X07A ABCDEFGHIJKLMNOPQRSTU 1 Bright A_ScaleVelocity(0.93)
		Stop
	Death:
		TNT1 A 0
		Stop
	}
}