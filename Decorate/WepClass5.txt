//================================================================================================================
//================================================================================================================
//
//
//					AEons Of Death v6: Class 5 weapons
//
//
//================================================================================================================
//================================================================================================================

//--------------------------------------------------------------------
ACTOR AEoDFlamethrowerItem : CustomInventory 6078
{
    +FLOORCLIP
    +INVENTORY.IGNORESKILL
    Inventory.Amount 1
    Inventory.PickupMessage "You got the Flamethrower!"
    Inventory.PickupSound "reilsss/weappickup/flamethrower"
    States
    {
    Spawn:
        WFLM A -1
        Loop
    Pickup:
	TNT1 A 0 A_JumpIfInventory("AEoDFlamethrower",1,"Ammo")
	TNT1 A 0 A_JumpIfInventory("Weapon5Count",3,"Nothing")
	TNT1 A 0 A_GiveInventory("Weapon5Count",1)
	TNT1 A 0 A_GiveInventory("FlamethrowerDrop",1)
	TNT1 A 0 A_GiveInventory("AEoDFlamethrower",1)
	TNT1 A 0 ACS_NamedExecute("s799",0,1,0,0)
	Stop
    Nothing:
	TNT1 A 0 A_JumpIfInventory("AEoDFlamethrower",1,"Ammo")
	TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
	Goto Pickup+2
	TNT1 A 0 ACS_NamedExecute("s798",0,5,0,0)
	Fail
    Ammo:
	TNT1 A 0 A_GiveInventory("AEoDFlameThrower",1)
	Stop
    }
}
ACTOR AEoDFlamethrower : Weapon // 6078
{
+FLOORCLIP
+INVENTORY.IGNORESKILL
+WEAPON.EXPLOSIVE
+CHEATNOTWEAPON
Weapon.AmmoType1 "PlasmaRod"
Weapon.AmmoType2 "PlasmaRod"
Weapon.AmmoGive1 48
Weapon.AmmoUse1 1
Weapon.AmmoUse2 15
Obituary "%o was burned by %k's Flamethrower."
Inventory.PickupMessage "You got the Flamethrower!"
Inventory.PickupSound "reilsss/weappickup/flamethrower"
weapon.upsound "weapons/rlan/draw"
Tag "Flamethrower"
States
{
Spawn:
	WFLM A -1
	Loop
Ready:
	TNT1 A 0 A_PlaySound("reilsss/weapons/flameidle3", CHAN_WEAPON, 0.8, 1)
	FLMG ABABABABAB 3 A_WeaponReady
	Goto Ready+1
Deselect:
	TNT1 A 0 ACS_NamedExecute("s799",0,0,0,0)
	TNT1 A 0 A_StopSound(CHAN_BODY)
	FLMG I 1 A_Lower
	TNT1 AA 0 A_Lower
	Loop
Select:
	TNT1 A 0 ACS_NamedExecute("s799",0,1,0,0)
	FLMG I 1 A_Raise
	TNT1 AA 0 A_Raise
	Loop
Fire:
	//TNT1 B 0 A_JumpIfInventory("PowerQuickFire",1,"FireQuick")
	TNT1 A 0 A_StopSound(CHAN_BODY)
	//FLMG C 2
	FLMG D 0 Bright A_GunFlash
	//FLMG DEFGH 2 Bright A_FireCustomMissile("FTFire",0,1,random(10,12),6)
	FLMG E 0 Bright A_Refire
	Goto Ready
Hold:
	//TNT1 B 0 A_JumpIfInventory("PowerQuickFire",1,"HoldQuick")
	TNT1 A 0 A_StopSound(CHAN_BODY)
	FLMG D 0 Bright A_GunFlash
	FLMG D 2 Bright A_FireCustomMissile("FTFire",0,1,random(5,7),4)
	FLMG E 0 Bright A_Refire("H2")
	FLMG C 2
	Goto Ready
H2:
	FLMG E 2 Bright A_FireCustomMissile("FTFire",0,1,random(5,7),4)
	FLMG E 0 Bright A_Refire("H3")
	FLMG C 2
	Goto Ready
H3:
	FLMG F 2 Bright A_FireCustomMissile("FTFire",0,1,random(5,7),4)
	FLMG E 0 Bright A_Refire("H4")
	FLMG C 2
	Goto Ready
H4:
	FLMG G 2 Bright A_FireCustomMissile("FTFire",0,1,random(5,7),4)
	FLMG E 0 Bright A_Refire("H5")
	FLMG C 2
	Goto Ready
H5:
	FLMG H 2 Bright A_FireCustomMissile("FTFire",0,1,random(5,7),4)
	FLMG E 0 Bright A_Refire("Hold")
	FLMG C 2
	Goto Ready
AltFire:
	TNT1 A 0 A_StopSound(CHAN_BODY)
	FLMG C 2 Bright
	TNT1 A 0 ACS_NamedExecute("s851",0,75,random(-3,3),0)
	TNT1 A 0 A_PlaySound("reilsss/weapons/flamethroweraltfire", CHAN_WEAPON, 1.0, 0)
	FLMG D 2 Bright A_FireCustomMissile("FlamerFireball",0,9,6)
	FLMG E 2 Bright
	FLMG FGH 3 ACS_NamedExecute("s851",0,-25,0,0)
	FLMG C 3
	Goto Ready
Flash:
	TNT1 A 2 A_Light1
	TNT1 A 2 A_Light2
	TNT1 A 1 A_Light1
	TNT1 A 1 A_Light0
	stop
}
}


ACTOR FTFire
{
	var int user_flamecount;
	var int user_burncount;
	PROJECTILE
	+DONTSPLASH
	+FORCERADIUSDMG
	+SEEKERMISSILE
	//+EXTREMEDEATH
	+NODAMAGETHRUST
	+PAINLESS
	Radius 2
	Height 4
	Speed 16
	Damage 1
	+STRIFEDAMAGE
	DamageType Fire
	SeeSound "reilsss/weapons/flamethrowerfire"
	DeathSound "weapons/scorch"
	RENDERSTYLE None
	Decal "PyroDecal2"
	ALPHA 1
	Scale 0.3
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_SetUserVar("user_flamecount",0)
		TNT1 A 0 A_SetUserVar("user_burncount",0)
	MovementLoop:
		X052 A 0 A_SpawnItemEx("FTFlameTrailMini0",random(-7,7),random(-1,1),random(-2,0),0,0,frandom(0,0.25),0,32)
		X052 A 1 A_SetUserVar("user_flamecount",user_flamecount+1)
		X052 A 0 A_JumpIf(user_flamecount>=30,"LifeTimeExpires")
		X052 A 0 A_JumpIf(user_flamecount>=25,"Trail5")
		X052 A 0 A_JumpIf(user_flamecount>=20,"Trail4")
		X052 A 0 A_JumpIf(user_flamecount>=15,"Trail3")
		X052 A 0 A_JumpIf(user_flamecount>=10,"Trail2")
		X052 A 0 A_JumpIf(user_flamecount>=5,"Trail1")
		Loop
	LifeTimeExpires:
		X052 A 0
		Stop
	Trail1:
		X052 AA 0 A_SpawnItemEx("FTFlameTrailMini1",random(-7,7),random(-3,3),random(-3,0),0,0,frandom(0,0.5),0,32)
		Goto MovementLoop+1
	Trail2:
		X052 AA 0 A_SpawnItemEx("FTFlameTrailMini2",random(-7,7),random(-4,4),random(-4,0),0,0,frandom(0,1),0,32)
		Goto MovementLoop+1
	Trail3:
		X052 A 0 A_SpawnItemEx("FTFlameTrailMini3",random(-7,7),random(-4,4),random(-4,2),0,0,frandom(0,1.25),0,32)
		Goto MovementLoop+1
	Trail4:
		TNT1 A 0 A_SpawnItemEx("FlmThrwrSmoke5",random(10,-10),random(5,-5),random(25,40),0,0,frandom(0.2,1.0),0,32,128)
		X052 A 0 A_SpawnItemEx("FTFlameTrailMini4",random(-7,7),random(-5,5),random(-4,2),0,0,frandom(0,1.5),0,32)
		Goto MovementLoop+1
	Trail5:
		TNT1 A 0 A_SpawnItemEx("FlmThrwrSmoke5",random(10,-10),random(5,-5),random(25,40),0,0,frandom(0.2,1.0),0,32,64)
		X052 A 0 A_SpawnItemEx("FTFlameTrailMini5",random(-7,7),random(-6,6),random(-4,2),0,0,frandom(0,2.2),0,32)
		Goto MovementLoop+1
	Death:
		TNT1 A 0 A_Explode(30,32,0)
		FRFX HIJ 2 Bright 
		FRFX J 0 A_SpawnItemEx("DropFire",0,0,0,0,0,0,0,48)
		FRFX KLM 2 Bright 
		FRFX NO 2 Bright
		stop
	Crash:
	XDeath:
		TNT1 A 0 A_SeekerMissile(0,0,1,256)
		TNT1 A 0 A_JumpIfTargetInLOS("BurnTarget",0,JLOSF_PROJECTILE|JLOSF_DEADNOJUMP,128)
	NormalBurn:
		TNT1 A 0 A_Stop
		TNT1 A 0 A_Explode(random(1,2),64,0,0,32)
		TNT1 A 0 A_SpawnItemEx("FlmThrwrSmoke5",random(-10,40),0,random(25,40),0,0,frandom(0.2,1.0),0,32,248)
		TNT1 AA 0 A_SpawnItemEx("FTFlameTrail2",random(0,64),random(-32,32),random(0,64),0,0,frandom(0.5,2.0),0,32,244)
		TNT1 A 2 A_SetUserVar("user_burncount",user_burncount+1)
		TNT1 A 0 A_JumpIf(user_burncount>=random(50,60),1)
		Loop
		TNT1 A 0
		Stop
	BurnTarget:
		TNT1 A 0 A_Warp(AAPTR_TRACER,16,0,1,0,WARPF_NOCHECKPOSITION)
		TNT1 A 0 A_Stop
		TNT1 A 0 A_Explode(random(1,2),64,0,0,32)
		TNT1 A 0 A_SpawnItemEx("FlmThrwrSmoke5",random(-10,40),0,random(25,40),0,0,frandom(0.2,1.0),0,32,248)
		TNT1 AA 0 A_SpawnItemEx("FTFlameTrail2",random(0,64),random(-32,32),random(0,64),0,0,frandom(0.5,2.0),0,32,244)
		TNT1 A 2 A_SetUserVar("user_burncount",user_burncount+1)
		TNT1 A 0 A_JumpIf(user_burncount>=random(50,60),1)
		Loop
		TNT1 A 0
		Stop
	}
}


Actor FlmThrwrSmoke1
{
	Scale 0.07
	+NOINTERACTION
	Radius 2
	Height 2
	RenderStyle Translucent
	Alpha 0.0
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_Jump(255,"One","Two","Three","Four")
	One:
		X037 A 0
		Goto Play
	Two:
		X037 B 0
		Goto Play
	Three:
		X037 C 0
		Goto Play
	Four:
		X037 D 0
		Goto Play
	Play:
		"####" "##########" 1 A_FadeIn
		"####" "#" 2 A_FadeOut(0.03)
		Wait
	}
}
Actor FlmThrwrSmoke2 : FlmThrwrSmoke1
{	Scale 0.1	}
Actor FlmThrwrSmoke3 : FlmThrwrSmoke1
{	Scale 0.2	}
Actor FlmThrwrSmoke4 : FlmThrwrSmoke1
{	Scale 0.3	}
Actor FlmThrwrSmoke5 : FlmThrwrSmoke1
{	Scale 0.5	}

Actor FTFlameTrail
{
	//+NOINTERACTION
	Projectile
	+THRUACTORS
	+BOUNCEONWALLS
	+BOUNCEONCEILINGS
	+BOUNCEONFLOORS
	BounceFactor 0
	WallBounceFactor 0.2
	Scale 0.45
	RenderStyle Add
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_Jump(255,"F1","F2","F3","F4","F5")
	F1:
		X052 AB 2 bright
		X052 CDEFGH 3 bright A_ScaleVelocity(0.92)
		X052 IJKLMNO 2 bright A_ScaleVelocity(0.9)
		X052 PQRS 1 bright A_ScaleVelocity(0.87)
		Stop
	F2:
		X053 AB 2 bright
		X053 CDEFGHIJ 3 bright A_ScaleVelocity(0.92)
		X053 KLMN 2 bright A_ScaleVelocity(0.9)
		X053 OPQRS 1 bright A_ScaleVelocity(0.87)
		Stop
	F3:
		X054 ABCD 2 bright
		X054 EFGHIJK 3 bright A_ScaleVelocity(0.92)
		X054 LMNO 2 bright A_ScaleVelocity(0.9)
		X054 PQRS 2 bright A_ScaleVelocity(0.87)
		Stop
	F4:
		X055 ABC 2 bright
		X055 DEFGHIJKLMN 3 bright A_ScaleVelocity(0.92)
		X055 OP 2 bright A_ScaleVelocity(0.9)
		X055 QRS 2 bright A_ScaleVelocity(0.87)
		Stop
	F5:
		X056 ABCDE 2 bright //A_ScaleVelocity(0.98)
		X056 FGHIJ 3 bright A_ScaleVelocity(0.92)
		X056 KLMN 2 bright A_ScaleVelocity(0.9)
		X056 OPQR 1 bright A_ScaleVelocity(0.87)
		Stop
	}
}

Actor FTFlameTrail2 : FTFlameTrail
{
	+NOINTERACTION
}

Actor FTFlameTrailMini : FTFlameTrail
{
	Scale 0.3
}



Actor FTFlameTrailMini0 : FTFlameTrail
{
	Scale 0.025
}
Actor FTFlameTrailMini1 : FTFlameTrail
{
	Scale 0.05
}
Actor FTFlameTrailMini2 : FTFlameTrail
{
	Scale 0.1
}
Actor FTFlameTrailMini3 : FTFlameTrail
{
	Scale 0.15
}
Actor FTFlameTrailMini4 : FTFlameTrail
{
	Scale 0.2
}
Actor FTFlameTrailMini5 : FTFlameTrail
{
	Scale 0.25
}

ACTOR DropFire
{
var int user_countone;
var int user_counttwo;
PROJECTILE
-NOGRAVITY
+NOEXPLODEFLOOR
+NODAMAGETHRUST
+DONTSPLASH
+PAINLESS
+BOUNCEONCEILINGS
//+EXTREMEDEATH
Gravity 0.125
Radius 8
Height 40
DamageType Fire
RENDERSTYLE ADD
ALPHA 0.90
States
{
Spawn:
	TNT1 A 0
	TNT1 A 0 A_SetUserVar("user_countone",0)
	TNT1 A 0 A_SetUserVar("user_counttwo",0)
	Creation:
		TNT1 A 0 A_Explode(random(1,9),32,1,0,16)
		TNT1 A 0 A_SpawnItemEx("FlmThrwrSmoke5",random(-20,20),random(20,-20),random(40,65),0,0,frandom(0.5,2.0),0,32,240)
		TNT1 A 0 A_SpawnItemEx("FTFlameTrail2",random(0,25),0,0,0,0,frandom(0,3),random(0,359),32,128)
		TNT1 A 1 A_SetUserVar("user_countone",user_countone+1)
		TNT1 A 0 A_JumpIf(user_countone>=10,1)
		Loop
		TNT1 A 0 A_SetUserVar("user_countone",0)
		TNT1 A 0 A_SetUserVar("user_counttwo",random(0,10))
		TNT1 A 0 A_JumpIf(user_counttwo==5,1)
		Goto "Creation"
	TNT1 A 0
	Stop
}
}

actor FlamerFireball
{
PROJECTILE
+EXTREMEDEATH
BounceType "Doom"
+GRENADETRAIL
//+CANBOUNCEWATER
-NOGRAVITY
+DONTSPLASH
Radius 8
Height 6
Speed 26
Gravity 0.25
Damage 20
Mass 1
BounceFactor 0.6
SeeSound "weapons/flamer"
DeathSound "reilsss/weapons/grenadeexplosion"
RenderStyle Add
Decal "PyroDecal2"
DamageType Fire
Scale 0.5
States
{
Spawn:
	FBAL A 1 Bright A_CustomMissile("FlamerFireballTrail1", 0, 0, 0) 
	TNT1 A 0 A_SpawnItemEx("FlamerFireballTrail2",random(2,-2),random(2,-2),random(2,-2),0,0,random(1,3),0,0)
	FBAL A 1 Bright A_CustomMissile("FlamerFireballTrail1", 0, 0, 0) 
	TNT1 A 0 A_SpawnItemEx("FlamerFireballTrail2",random(2,-2),random(2,-2),random(2,-2),0,0,random(1,3),0,0)
	FBAL A 1 Bright A_CustomMissile("FlamerFireballTrail1", 0, 0, 0) 
	TNT1 A 0 A_SpawnItemEx("FlamerFireballTrail2",random(2,-2),random(2,-2),random(2,-2),0,0,random(1,3),0,0)

	FBAL B 1 Bright A_CustomMissile("FlamerFireballTrail1", 0, 0, 0) 
	TNT1 A 0 A_SpawnItemEx("FlamerFireballTrail2",random(2,-2),random(2,-2),random(2,-2),0,0,random(1,3),0,0)
	FBAL B 1 Bright A_CustomMissile("FlamerFireballTrail1", 0, 0, 0) 
	TNT1 A 0 A_SpawnItemEx("FlamerFireballTrail2",random(2,-2),random(2,-2),random(2,-2),0,0,random(1,3),0,0)
	FBAL B 1 Bright A_CustomMissile("FlamerFireballTrail1", 0, 0, 0) 
	TNT1 A 0 A_SpawnItemEx("FlamerFireballTrail2",random(2,-2),random(2,-2),random(2,-2),0,0,random(1,3),0,0)

	FBAL C 1 Bright A_CustomMissile("FlamerFireballTrail1", 0, 0, 0) 
	TNT1 A 0 A_SpawnItemEx("FlamerFireballTrail2",random(2,-2),random(2,-2),random(2,-2),0,0,random(1,3),0,0)
	FBAL C 1 Bright A_CustomMissile("FlamerFireballTrail1", 0, 0, 0) 
	TNT1 A 0 A_SpawnItemEx("FlamerFireballTrail2",random(2,-2),random(2,-2),random(2,-2),0,0,random(1,3),0,0)
	FBAL C 1 Bright A_CustomMissile("FlamerFireballTrail1", 0, 0, 0) 
	TNT1 A 0 A_SpawnItemEx("FlamerFireballTrail2",random(2,-2),random(2,-2),random(2,-2),0,0,random(1,3),0,0)

	FBAL D 1 Bright A_CustomMissile("FlamerFireballTrail1", 0, 0, 0) 
	TNT1 A 0 A_SpawnItemEx("FlamerFireballTrail2",random(2,-2),random(2,-2),random(2,-2),0,0,random(1,3),0,0)
	FBAL D 1 Bright A_CustomMissile("FlamerFireballTrail1", 0, 0, 0) 
	TNT1 A 0 A_SpawnItemEx("FlamerFireballTrail2",random(2,-2),random(2,-2),random(2,-2),0,0,random(1,3),0,0)
	FBAL D 1 Bright A_CustomMissile("FlamerFireballTrail1", 0, 0, 0) 
	TNT1 A 0 A_SpawnItemEx("FlamerFireballTrail2",random(2,-2),random(2,-2),random(2,-2),0,0,random(1,3),0,0)

	FBAL E 1 Bright A_CustomMissile("FlamerFireballTrail1", 0, 0, 0) 
	TNT1 A 0 A_SpawnItemEx("FlamerFireballTrail2",random(2,-2),random(2,-2),random(2,-2),0,0,random(1,3),0,0)
	FBAL E 1 Bright A_CustomMissile("FlamerFireballTrail1", 0, 0, 0) 
	TNT1 A 0 A_SpawnItemEx("FlamerFireballTrail2",random(2,-2),random(2,-2),random(2,-2),0,0,random(1,3),0,0)
	FBAL E 1 Bright A_CustomMissile("FlamerFireballTrail1", 0, 0, 0) 
	TNT1 A 0 A_SpawnItemEx("FlamerFireballTrail2",random(2,-2),random(2,-2),random(2,-2),0,0,random(1,3),0,0)

	FBAL F 1 Bright A_CustomMissile("FlamerFireballTrail1", 0, 0, 0) 
	TNT1 A 0 A_SpawnItemEx("FlamerFireballTrail2",random(2,-2),random(2,-2),random(2,-2),0,0,random(1,3),0,0)
	FBAL F 1 Bright A_CustomMissile("FlamerFireballTrail1", 0, 0, 0) 
	TNT1 A 0 A_SpawnItemEx("FlamerFireballTrail2",random(2,-2),random(2,-2),random(2,-2),0,0,random(1,3),0,0)
	FBAL F 1 Bright A_CustomMissile("FlamerFireballTrail1", 0, 0, 0) 
	TNT1 A 0 A_SpawnItemEx("FlamerFireballTrail2",random(2,-2),random(2,-2),random(2,-2),0,0,random(1,3),0,0)	
	Loop
Death:
	TNT1 AAA 0 A_SpawnItemEx("FlamerFireball2",0,0,0,random(3,-3),random(3,-3),random(3,8),random(0,359),0)
	TNT1 A 3 A_SpawnItemEx("FlamerFireball2",0,0,0,random(3,-3),random(3,-3),random(3,8),random(0,359),0)
	Stop
}
}

ACTOR FlamerFireballTrail1
{
+NOINTERACTION
RenderStyle Add
Alpha 0.5
Scale 0.3
States
{
Spawn:
	BFE1 GHIJKLMNOPQRSTUVW 1 BRIGHT
	Stop
}  
}

ACTOR FlamerFireballTrail2
{
+NOINTERACTION
Scale 0.35
States
{
Spawn:
	TNT1 A 0
	TNT1 A 0 A_SetTranslucent(0.7)
	VAPB ABCDEFGHI 3 Bright A_FadeOut(0.06)
	Wait
}
}

Actor FlamerFireballTrail3 : FlamerFireballTrail2
{
Scale 0.23
States
{
Spawn:
	TNT1 A 0
	TNT1 A 0 A_SetTranslucent(0.5)
	VAPB ABCDEFGHI 3 Bright A_FadeOut(0.06)
	Wait
}
}

Actor FlamerFireball2 : FlamerFireball
{
Damage 5
Scale 0.2
DamageType Fire
Gravity 0.5
States
{
Death:
	FBAL F 1 A_Explode(64,64)
	Stop
}
}

Actor FlameThrowerDrop : CustomInventory
{
    Inventory.MaxAmount 1
    States
    {
    Use:
	TNT1 A 0
	TNT1 A 0 A_SpawnItemEx("DroppedFlameThrower",0,0,32,8,0,0,0,32,0)
	Stop
    }
}

ACTOR DroppedFlameThrower
{
    Radius 16
    Height 20
    States
    {
    Spawn:
	WFLM A 15
	TNT1 A 0 A_SpawnItemEx("AEoDFlameThrowerNoAmmo",0,0,0,0,0,0,0,48,0)
	Stop
    }
}

ACTOR AEoDFlameThrowerNoAmmo : AEoDFlameThrowerItem
{
    +FLOORCLIP
    +INVENTORY.IGNORESKILL
    Inventory.Amount 1
    Inventory.PickupMessage "You got the Flamethrower!"
    Inventory.PickupSound "reilsss/weappickup/flamethrower"
    States
    {
    Spawn:
        WFLM A -1
        Loop
    Pickup:
	TNT1 A 0 A_JumpIfInventory("Weapon5Count",3,"Nothing")
	TNT1 A 0 A_JumpIfInventory("AECell",48,"Ammo")
	TNT1 A 0 A_GiveInventory("Weapon5Count",1)
	TNT1 A 0 A_GiveInventory("FlameThrowerDrop",1)
	TNT1 A 0 A_GiveInventory("AEoDFlameThrower",1)
	TNT1 A 0 A_TakeInventory("AECell",48)
	TNT1 A 0 ACS_NamedExecute("s799",0,1,0,0)
	Stop
    Nothing:
	TNT1 A 0 A_JumpIfInventory("AEoDFlameThrower",1,"Ammo")
	TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
	Goto Pickup+2
	TNT1 A 0 ACS_NamedExecute("s798",0,5,0,0)
	Fail
    Ammo:
	TNT1 A 0 A_TakeInventory("AECell",48)
	TNT1 A 0 A_JumpIfInventory("AEoDFlameThrower",1,2)
	TNT1 A 0 A_GiveInventory("Weapon5Count",1)
	TNT1 A 0 A_GiveInventory("FlameThrowerDrop",1)
	TNT1 A 0 A_GiveInventory("AEoDFlameThrower",1)
	Stop
    }
}

//==================================================================================
//==================================================================================

//==================================================================================
//==================================================================================

ACTOR AEoDFreezeThrowerItem : CustomInventory 6032
{
    +FLOORCLIP
    +INVENTORY.IGNORESKILL
    Scale 0.85
    Inventory.Amount 1
    Inventory.PickupMessage "You got the Freezethrower!"
    Inventory.PickupSound "reilsss/weappickup/crystalgun"
    States
    {
    Spawn:
        FREZ L -1
        Loop
    Pickup:
	TNT1 A 0 A_JumpIfInventory("AEoDFreezeThrower",1,"Ammo")
	TNT1 A 0 A_JumpIfInventory("Weapon5Count",3,"Nothing")
	TNT1 A 0 A_GiveInventory("Weapon5Count",1)
	TNT1 A 0 A_GiveInventory("FreezeThrowerDrop",1)
	TNT1 A 0 A_GiveInventory("AEoDFreezeThrower",1)
	TNT1 A 0 ACS_NamedExecute("s799",0,2,0,0)
	Stop
    Nothing:
	TNT1 A 0 A_JumpIfInventory("AEoDFreezeThrower",1,"Ammo")
	TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
	Goto Pickup+2
	TNT1 A 0 ACS_NamedExecute("s798",0,5,0,0)
	Fail
    Ammo:
	TNT1 A 0 A_GiveInventory("AEoDFreezeThrower",1)
	Stop
    }
}

ACTOR AEoDFreezethrower : Weapon // 6032
{
+FLOORCLIP
+INVENTORY.IGNORESKILL
Weapon.Kickback 0
Weapon.YAdjust 0
Weapon.AmmoType1 "AECell"
Weapon.AmmoType2 "AECell"
Weapon.AmmoGive1 30
Weapon.AmmoUse1 2
Weapon.AmmoUse2 10
Obituary "%o was frozen by %k's Freezethrower" 
Inventory.PickupMessage "You got the Freezethrower!"
Inventory.PickupSound "reilsss/weappickup/crystalgun"
weapon.upsound "weapons/plasma/draw"
Scale 0.85
Tag "Freezethrower"
States
{
Spawn:
	FREZ L -1
	Loop
Ready:
	TNT1 A 0 A_Jump(60,56)
	FREZ DDEEFFDDEEFFDDEEFF 1 A_WeaponReady
	TNT1 A 0 A_Jump(128,1)
	Loop
	FREZ EEDDFF 1 A_WeaponReady
	Loop
	FREZ FFEEDDFFDDEEDDFFDDEEFFDDEEFFEE 1 A_WeaponReady
	Goto Ready+1
	TNT1 A 0 A_PlaySound("reilsss/weapons/iceidle1", 6, 1.0, 0)
	FREZ DDBBBCCCCCCBBBEEFFDD 1 A_WeaponReady
	Goto Ready+1
Deselect:
	TNT1 A 0 A_StopSound(CHAN_WEAPON)
	TNT1 A 0 A_StopSound(6)
	TNT1 A 0 ACS_NamedExecute("s799",0,0,0,0)
	FREZ A 1 A_Lower
	TNT1 AA 0 A_Lower
	Goto Deselect+2
Select:
	TNT1 A 0 ACS_NamedExecute("s799",0,2,0,0)
	FREZ A 1 A_Raise
	TNT1 AA 0 A_Raise
	Loop
Fire:
Hold:
	FREZ D 1
	TNT1 A 0 ACS_NamedExecute("s851",0,10,random(-3,3),0)
	TNT1 A 0 A_FireCustomMissile("FreezeBall", 0, 1, 7, 2)
	TNT1 A 0 A_PlaySound("reilsss/weapons/icecannon", CHAN_WEAPON, 0.50, 0)
	FREZ G 2 A_GunFlash
	TNT1 A 0 ACS_NamedExecute("s851",0,-10,random(-3,3),0)
	FREZ E 1
	FREZ F 1
	FREZ A 0 A_ReFire
	goto Ready   
AltFire:
	FREZ D 1
	TNT1 A 0 ACS_NamedExecute("s851",0,10,random(-6,6),0)
	TNT1 A 0 A_FireCustomMissile("FreezeSpike", random(-3,3), 1, 7, 2)
	TNT1 AAAAAAAAAAAAA 0 A_FireCustomMissile("FreezeSpike", random(-3,3), 0, 7, 2)
	TNT1 A 0 A_PlaySound("weapons/frzshot", CHAN_WEAPON, 0.50, 0)
	FREZ G 2 A_GunFlash
	TNT1 A 0 ACS_NamedExecute("s851",0,-10,random(-6,6),0)
	FREZ E 1
	FREZ F 15
	Goto Ready
Flash:
	TNT1 A 0
	Stop
}
}

actor FreezeThrowerCheck : Inventory
{
Inventory.MaxAmount 49
Inventory.Amount 1
}


Actor FreezeBall
{
	Projectile
	Radius 5
	Height 9
	Speed 22
	Damage 12
	Scale 0.2
	RenderStyle Add
	DamageType "Ice"
	Translation "112:127=192:198"
	Obituary "%o got frozen solid by %k."
	DeathSound "reilsss/weapons/icecannonhit"
	States
	{
	Spawn: 
		LPRJ ABCDEFGHIJKL 1 Light("BlueMediumFlicker3") Bright A_SpawnItemEx("FreezeBallTrail",0,0,0,frandom(0.5,4.0),0,frandom(0.5,4.0),random(0,359),32)
		Loop
	Death:
		TNT1 AAAAAAAAA 0 A_SpawnItemEx("MutantElectLeak",0,0,0,random(2,-2),random(2,-2),random(1,5),random(0,359),0)
		TNT1 a 1 A_SpawnItemEx("FreezeBallExplo",0,0,0,0,0,0,0,32)
		Stop
	}
}

Actor FreezeBallTrail
{
	+NOINTERACTION 
	RenderStyle Add
	Scale 0.12
	States
	{
	Spawn:
		LPRJ ABDEFGHJIJKL 1 Bright A_FadeOut(0.06)
		Loop
	}
}

Actor FreezeBallExplo
{
	+NOINTERACTION
	RenderStyle Add
	Scale 0.1
	States
	{
	Spawn:
		LTRL A 1 
		LTRL A 1 A_SetScale(0.05)
		LTRL A 1 A_SetScale(0.1)
		LTRL A 1 A_SetScale(0.15)
		LTRL A 1 A_SetScale(0.2)
		LTRL A 1 A_SetScale(0.25)
		TNT1 A 0 A_FadeOut(0.1)
		LTRL A 1 A_SetScale(0.3)
		TNT1 A 0 A_FadeOut(0.1)
		LTRL A 1 A_SetScale(0.35)
		TNT1 A 0 A_FadeOut(0.1)
		LTRL A 1 A_SetScale(0.4)
		TNT1 A 0 A_FadeOut(0.1)
		LTRL A 1 A_SetScale(0.45)
		TNT1 A 0 A_FadeOut(0.1)
		LTRL A 1 A_SetScale(0.5)
		TNT1 A 0 A_FadeOut(0.1)
		LTRL A 1 A_SetScale(0.55)
		TNT1 A 0 A_FadeOut(0.1)
		LTRL A 1 A_SetScale(0.6)
		TNT1 A 0 A_FadeOut(0.1)
		LTRL A 1 A_SetScale(0.65)
		TNT1 A 0 A_FadeOut(0.1)
		LTRL A 1 A_SetScale(0.7)
		TNT1 A 0 A_FadeOut(0.1)
		LTRL A 1 A_SetScale(0.75)
		Stop
	}
}


ACTOR FreezeSpike
{
    Speed 30
    Radius 6
    Height 6
    Damage 5
    PROJECTILE
    RENDERSTYLE ADD
    ALPHA 0.5
    Scale 0.7
    DamageType "Ice"
    States
    {
    Spawn:
	FRZ9 A 0
	FRZ9 A 0 A_Jump(127,3)
	FRZ9 A 0 Bright ThrustThingZ(0,random(0,7),0,1)
	FRZ9 A 0 A_Jump(256,2)
	FRZ9 A 0 Bright ThrustThingZ(0,random(0,7),1,1)
	FRZ9 ABC 3 Bright A_SpawnItemEx("FreezeBallTrail2",0,0,0,frandom(2.0,-2.0),0,frandom(2.0,-2.0),random(0,359),32)
	FRZ9 ABC 3 Bright A_SpawnItemEx("FreezeBallTrail2",0,0,0,frandom(2.0,-2.0),0,frandom(2.0,-2.0),random(0,359),32)
	FRZ9 ABC 3 Bright A_SpawnItemEx("FreezeBallTrail2",0,0,0,frandom(2.0,-2.0),0,frandom(2.0,-2.0),random(0,359),32)
	FRZ9 ABC 3 Bright A_SpawnItemEx("FreezeBallTrail2",0,0,0,frandom(2.0,-2.0),0,frandom(2.0,-2.0),random(0,359),32)
	FRZ9 C 0 A_Die
	Goto Death
    Death:
	TNT1 AAAA 0 A_SpawnItemEx("MutantElectLeak",0,0,0,random(2,-2),random(2,-2),random(1,5),random(0,359),0)
	FRZ9 CDEFGH 2 Bright
	Stop
    }
}

Actor FreezeBallTrail2 : FreezeBallTrail
{	Scale 0.05	}

actor FreezeBlastTrail
{
+RANDOMIZE
+NOINTERACTION
SeeSound "weapons/iceshot"
DeathSound "weapons/icehit"
RenderStyle Add
Alpha 0.75
States
{
Spawn:
	FREZ RST 6 bright A_FadeOut(0.2)
	loop
Death:
	FREZ RST 4 bright
	stop
}
}



Actor FreezeThrowerDrop : CustomInventory
{
    Inventory.MaxAmount 1
    States
    {
    Use:
	TNT1 A 0
	TNT1 A 0 A_StopSound(6)
	TNT1 A 0 A_SpawnItemEx("DroppedFreezeThrower",0,0,32,8,0,0,0,32,0)
	Stop
    }
}

ACTOR DroppedFreezeThrower
{
    Radius 16
    Height 20
    Scale 0.85
    States
    {
    Spawn:
	FREZ L 15
	TNT1 A 0 A_SpawnItemEx("AEoDFreezeThrowerNoAmmo",0,0,0,0,0,0,0,48,0)
	Stop
    }
}

ACTOR AEoDFreezeThrowerNoAmmo : AEoDFreezeThrowerItem
{
    +FLOORCLIP
    +INVENTORY.IGNORESKILL
    Scale 0.85
    Inventory.Amount 1
    Inventory.PickupMessage "You got the Freezethrower!"
    Inventory.PickupSound "reilsss/weappickup/crystalgun"
    States
    {
    Spawn:
        FREZ L -1
        Loop
    Pickup:
	TNT1 A 0 A_JumpIfInventory("Weapon5Count",3,"Nothing")
	TNT1 A 0 A_JumpIfInventory("AECell",30,"Ammo")
	TNT1 A 0 A_GiveInventory("Weapon5Count",1)
	TNT1 A 0 A_GiveInventory("FreezeThrowerDrop",1)
	TNT1 A 0 A_GiveInventory("AEoDFreezeThrower",1)
	TNT1 A 0 A_TakeInventory("AECell",30)
	TNT1 A 0 ACS_NamedExecute("s799",0,2,0,0)
	Stop
    Nothing:
	TNT1 A 0 A_JumpIfInventory("AEoDFreezeThrower",1,"Ammo")
	TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
	Goto Pickup+2
	TNT1 A 0 ACS_NamedExecute("s798",0,5,0,0)
	Fail
    Ammo:
	TNT1 A 0 A_TakeInventory("AECell",30)
	TNT1 A 0 A_JumpIfInventory("AEoDFreezeThrower",1,2)
	TNT1 A 0 A_GiveInventory("Weapon5Count",1)
	TNT1 A 0 A_GiveInventory("FreezeThrowerDrop",1)
	TNT1 A 0 A_GiveInventory("AEoDFreezeThrower",1)
	Stop
    }
}

//==================================================================================
//==================================================================================

//==================================================================================
//==================================================================================

ACTOR AEoDLasergunItem : CustomInventory 6083
{
    +FLOORCLIP
    +INVENTORY.IGNORESKILL
    Scale 0.6
    Inventory.Amount 1
    Inventory.PickupMessage "You got the Lasergun!"
    Inventory.PickupSound "reilsss/weappickup/laserrifle"
    States
    {
    Spawn:
        LCAN A -1
        Loop
    Pickup:
	TNT1 A 0 A_JumpIfInventory("AEoDLaserGun",1,"Ammo")
	TNT1 A 0 A_JumpIfInventory("Weapon5Count",3,"Nothing")
	TNT1 A 0 A_GiveInventory("Weapon5Count",1)
	TNT1 A 0 A_GiveInventory("LaserGunDrop",1)
	TNT1 A 0 A_GiveInventory("AEoDLaserGun",1)
	TNT1 A 0 ACS_NamedExecute("s799",0,3,0,0)
	Stop
    Nothing:
	TNT1 A 0 A_JumpIfInventory("AEoDLaserGun",1,"Ammo")
	TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
	Goto Pickup+2
	TNT1 A 0 ACS_NamedExecute("s798",0,5,0,0)
	Fail
    Ammo:
	TNT1 A 0 A_GiveInventory("AEoDLaserGun",1)
	Stop
    }
}

Actor AEoDLasergun : Weapon // 6083
{
+FLOORCLIP
+INVENTORY.IGNORESKILL
+CHEATNOTWEAPON
Weapon.AmmoType1 "AECell"
Weapon.AmmoType2 "AECell"
Weapon.AmmoGive1 30
Weapon.AmmoUse1 1
Weapon.AmmoUse2 2
Scale 0.6
Obituary "%o was melted by %k's Lasergun"
Inventory.PickupMessage "You got the Lasergun!"
Inventory.PickupSound "reilsss/weappickup/laserrifle"
AttackSound "reilsss/weapons/lasergunfire"
weapon.upsound "weapons/plasma/draw"
Tag "Laser gun"
States 
{ 
Spawn:
	LCAN A 1
	Loop
Select:
	TNT1 A 0 ACS_NamedExecute("s799",0,3,0,0)
	LCAN K 1 A_Raise
	TNT1 AA 0 A_Raise
	Loop
Ready:
	TNT1 A 0 A_PlaySound("reilsss/weapons/laseridle2", 6, 1.0, 1)
	LCAN KKKLLLMMMNNNOOO 1 A_WeaponReady
	LCAN KKKLLLMMMNNNOOO 1 A_WeaponReady
	Goto Ready+1
Ready2:
	TNT1 A 0 A_PlaySound("reilsss/weapons/laseridle2", 6, 1.0, 1)
	LCAN BBBCCCDDDEEEFFF 1 A_WeaponReady
	LCAN BBBCCCDDDEEEFFF 1 A_WeaponReady
	Goto Ready2+1
Deselect:
	TNT1 A 0 ACS_NamedExecute("s799",0,0,0,0)
	TNT1 A 0 A_StopSound(6)
	LCAN K 1 A_Lower
	TNT1 AA 0 A_Lower
	Loop
Fire:
	TNT1 B 0 A_JumpIfInventory("PowerQuickFire",1,"FireQuick")
	LCAN SRQ 1
	TNT1 A 0 A_GunFlash
	TNT1 A 0 A_PlaySound("reilsss/weapons/lasergunfire2", CHAN_WEAPON, 1.0, 0)
	LCAN P 1 Bright A_RailAttack(random(15,25),4.5,1,none, "FF 00 00", RGF_FULLBRIGHT,0,0, 0,0,0, 5,2.0,1.0)
	LCAN SRQ 1 Bright
	TNT1 A 0 A_GunFlash
	TNT1 A 0 ACS_NamedExecute("s851",0,15,random(-12,12),0)
	LCAN P 1 Bright A_RailAttack(random(8,18),4.5,0,none, "FF 00 00", RGF_FULLBRIGHT,0,0, 0,0,0, 5,2.0,1.0)
	TNT1 A 0 ACS_NamedExecute("s851",0,-15,0,0)
	LCAN SRQ 1 Bright
	TNT1 A 0 A_Refire
	LCAN SRQ 2
	LCAN SRQ 3
	Goto Ready
FireQuick:
	TNT1 B 0 A_JumpIfInventory("PowerQuickFire",1,1)
	Goto Fire
	LCAN R 1
	TNT1 A 0 A_GunFlash
	TNT1 A 0 A_PlaySound("reilsss/weapons/lasergunfire2", CHAN_WEAPON, 1.0, 0)
	LCAN P 1 Bright A_RailAttack(random(8,18),4.5,1,none, "FF 00 00", RGF_FULLBRIGHT,0,0, 0,0,0, 5,2.0,1.0)
	LCAN R 1 Bright
	TNT1 A 0 A_GunFlash
	TNT1 A 0 ACS_NamedExecute("s851",0,15,random(-12,12),0)
	LCAN P 1 Bright A_RailAttack(random(8,18),4.5,0,none, "FF 00 00", RGF_FULLBRIGHT,0,0, 0,0,0, 5,2.0,1.0)
	TNT1 A 0 ACS_NamedExecute("s851",0,-15,0,0)
	LCAN R 1 Bright
	TNT1 A 0 A_Refire
	LCAN SRQ 1
	LCAN SRQ 2
	Goto Ready
Hold:
	TNT1 B 0 A_JumpIfInventory("PowerQuickFire",1,"HoldQuick")
	TNT1 A 0 A_GunFlash
	TNT1 A 0 A_PlaySound("reilsss/weapons/lasergunfire2", CHAN_WEAPON, 1.0, 0)
	LCAN P 1 Bright A_RailAttack(random(8,18),4.5,1,none, "FF 00 00", RGF_FULLBRIGHT,0,0, 0,0,0, 5,2.0,1.0)
	LCAN SRQ 1
	TNT1 A 0 A_GunFlash
	TNT1 A 0 ACS_NamedExecute("s851",0,15,random(-12,12),0)
	LCAN P 1 Bright A_RailAttack(random(8,18),4.5,0,none, "FF 00 00", RGF_FULLBRIGHT,0,0, 0,0,0, 5,2.0,1.0)
	TNT1 A 0 ACS_NamedExecute("s851",0,-15,0,0)
	LCAN SRQ 1
	TNT1 A 0 A_Refire
	LCAN SRQ 2
	LCAN SRQ 3
	Goto Ready
HoldQuick:
	TNT1 B 0 A_JumpIfInventory("PowerQuickFire",1,1)
	Goto Fire
	TNT1 A 0 A_GunFlash
	TNT1 A 0 A_PlaySound("reilsss/weapons/lasergunfire2", CHAN_WEAPON, 1.0, 0)
	LCAN P 1 Bright A_RailAttack(random(15,25),4.5,1,none, "FF 00 00", RGF_FULLBRIGHT,0,0, 0,0,0, 5,2.0,1.0)
	LCAN R 1
	TNT1 A 0 A_GunFlash
	TNT1 A 0 ACS_NamedExecute("s851",0,15,random(-12,12),0)
	LCAN P 1 Bright A_RailAttack(random(8,18),4.5,0,none, "FF 00 00", RGF_FULLBRIGHT,0,0, 0,0,0, 5,2.0,1.0)
	TNT1 A 0 ACS_NamedExecute("s851",0,-15,0,0)
	LCAN R 1
	TNT1 A 0 A_Refire
	LCAN SRQ 1
	LCAN SRQ 2
	Goto Ready
AltFire:
	TNT1 B 0 A_JumpIfInventory("PowerQuickFire",1,"AltFireQuick")
	LCAN GVWJ 1
	TNT1 A 0 A_GunFlash
	TNT1 A 0 A_PlaySound("reilsss/weapons/lasergunfire2", CHAN_WEAPON, 1.0, 0)
	TNT1 A 0 ACS_NamedExecute("s851",0,15,random(-12,12),0)
	LCAN H 1 Bright A_FireCustomMissile("BlueLaserBall",0,1,3,2,0)
	LCAN I 1 Bright
	TNT1 A 0 ACS_NamedExecute("s851",0,-15,0,0)
	LCAN J 1 Bright
	Goto Ready
AltFireQuick:
	TNT1 B 0 A_JumpIfInventory("PowerQuickFire",1,1)
	Goto Fire
	LCAN GW 1
	TNT1 A 0 A_GunFlash
	TNT1 A 0 A_PlaySound("reilsss/weapons/lasergunfire2", CHAN_WEAPON, 1.0, 0)
	TNT1 A 0 ACS_NamedExecute("s851",0,15,random(-12,12),0)
	LCAN H 1 Bright A_FireCustomMissile("BlueLaserBall",0,1,3,2,0)
	LCAN I 0 Bright
	TNT1 A 0 ACS_NamedExecute("s851",0,-15,0,0)
	LCAN J 1 Bright
	Goto Ready
AltHold:
	TNT1 B 0 A_JumpIfInventory("PowerQuickFire",1,"AltHoldQuick")
	TNT1 A 0 A_GunFlash
	TNT1 A 0 A_PlaySound("reilsss/weapons/lasergunfire2", CHAN_WEAPON, 1.0, 0)
	TNT1 A 0 ACS_NamedExecute("s851",0,15,random(-12,12),0)
	LCAN H 1 Bright A_FireCustomMissile("BlueLaserBall",0,1,3,2,0)
	LCAN I 1 Bright
	TNT1 A 0 ACS_NamedExecute("s851",0,-15,0,0)
	LCAN J 1 
	TNT1 A 0 A_Refire
	LCAN GVW 1 Bright
	LCAN GVW 2
	Goto Ready
AltHoldQuick:
	TNT1 B 0 A_JumpIfInventory("PowerQuickFire",1,1)
	Goto Fire
	TNT1 A 0 A_GunFlash
	TNT1 A 0 A_PlaySound("reilsss/weapons/lasergunfire2", CHAN_WEAPON, 1.0, 0)
	TNT1 A 0 ACS_NamedExecute("s851",0,15,random(-12,12),0)
	LCAN H 1 Bright A_FireCustomMissile("BlueLaserBall",0,1,3,2,0)
	LCAN I 0 Bright
	TNT1 A 0 ACS_NamedExecute("s851",0,-15,0,0)
	LCAN J 1 
	TNT1 A 0 A_Refire
	LCAN GW 1 Bright
	LCAN GVW 1
	Goto Ready
Flash:
	TNT1 A 2 A_Light1
	TNT1 A 0 A_Light0
	Stop
}
}

ACTOR BlueLaserBall : FastProjectile
{
PROJECTILE
+DROPOFF
+NOBLOCKMAP
+NOGRAVITY
Speed 27
Height 4
Radius 2
Damage 20
decal Bulletchip
+BLOODSPLATTER
RenderStyle Add
Alpha 0.75
Scale 0.3
MissileHeight 8
MissileType "BlueLaserballtrail1"
States
{
Spawn:
	LCAN TU 1 BRIGHT 
	Loop
Death:
	TNT1 AAAAA 0 A_SpawnItemEx("PCPrimaryExploParticles",0,0,0,frandom(0.5,1.5),0,frandom(1.5,-1.5),random(0,359),33) // See WepClass8.AED
	TNT1 A 1
	Stop
   }
}

ACTOR BlueLaserballtrail1
{
+NOINTERACTION
RenderStyle Add
Scale 0.3
Alpha 0.4
States
{
Spawn:
	LCAN TUTUTUTUTUTU 1 BRIGHT A_CustomMissile("BlueLaserballtrail2", 0, 0, 0)
	Stop
}
}

ACTOR BlueLaserballtrail2
{
+NOINTERACTION
RenderStyle Add

Scale 0.1
States
{
Spawn:
	LCAN TUTUTUTUTUTU 1 BRIGHT
	Stop
}
}

Actor LaserGunDrop : CustomInventory
{
    Inventory.MaxAmount 1
    States
    {
    Use:
	TNT1 A 0
	TNT1 A 0 A_StopSound(6)
	TNT1 A 0 A_SpawnItemEx("DroppedLaserGun",0,0,32,8,0,0,0,32,0)
	Stop
    }
}

ACTOR DroppedLaserGun
{
    Radius 16
    Height 20
    Scale 0.6
    States
    {
    Spawn:
	LCAN A 15
	TNT1 A 0 A_SpawnItemEx("AEoDLaserGunNoAmmo",0,0,0,0,0,0,0,48,0)
	Stop
    }
}

ACTOR AEoDLaserGunNoAmmo : AEoDLaserGunItem
{
    +FLOORCLIP
    +INVENTORY.IGNORESKILL
    Scale 0.6
    Inventory.Amount 1
    Inventory.PickupMessage "You got the Lasergun!"
    Inventory.PickupSound "reilsss/weappickup/laserrifle"
    States
    {
    Spawn:
        LCAN A -1
        Loop
    Pickup:
	TNT1 A 0 A_JumpIfInventory("Weapon5Count",3,"Nothing")
	TNT1 A 0 A_JumpIfInventory("AECell",30,"Ammo")
	TNT1 A 0 A_GiveInventory("Weapon5Count",1)
	TNT1 A 0 A_GiveInventory("LaserGunDrop",1)
	TNT1 A 0 A_GiveInventory("AEoDLaserGun",1)
	TNT1 A 0 A_TakeInventory("AECell",30)
	TNT1 A 0 ACS_NamedExecute("s799",0,3,0,0)
	Stop
    Nothing:
	TNT1 A 0 A_JumpIfInventory("AEoDLaserGun",1,"Ammo")
	TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
	Goto Pickup+2
	TNT1 A 0 ACS_NamedExecute("s798",0,5,0,0)
	Fail
    Ammo:
	TNT1 A 0 A_TakeInventory("AECell",30)
	TNT1 A 0 A_JumpIfInventory("AEoDLaserGun",1,2)
	TNT1 A 0 A_GiveInventory("Weapon5Count",1)
	TNT1 A 0 A_GiveInventory("LaserGunDrop",1)
	TNT1 A 0 A_GiveInventory("AEoDLaserGun",1)
	Stop
    }
}

//==================================================================================
//==================================================================================

//==================================================================================
//==================================================================================

ACTOR AEoDMinigunItem : CustomInventory 6006
{
    +FLOORCLIP
    +INVENTORY.IGNORESKILL
    Scale 0.2 //Scale 0.2
    Inventory.Amount 1
    Inventory.PickupMessage "Picked up the Minigun!"
    Inventory.PickupSound "reilsss/weappickup/minigun"
    States
    {
    Spawn:
        D002 Z -1
        Loop
    Pickup:
	TNT1 A 0 A_JumpIfInventory("AEoDMinigun",1,"Ammo")
	TNT1 A 0 A_JumpIfInventory("Weapon5Count",3,"Nothing")
	TNT1 A 0 A_GiveInventory("Weapon5Count",1)
	TNT1 A 0 A_GiveInventory("MinigunDrop",1)
	TNT1 A 0 A_GiveInventory("AEoDMinigun",1)
	TNT1 A 0 ACS_NamedExecute("s799",0,4,0,0)
	Stop
    Nothing:
	TNT1 A 0 A_JumpIfInventory("AEoDMinigun",1,"Ammo")
	TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
	Goto Pickup+2
	TNT1 A 0 ACS_NamedExecute("s798",0,5,0,0)
	Fail
    Ammo:
	TNT1 A 0 A_GiveInventory("AEoDMiniGun",1)
	Stop
    }
}

//=====================================================================================
//=====================================================================================
//	Chaingun
// Our replacement for the Minigun. Is not meant to be very strong, specially due to
// it's fast rate of fire. The alt fire shoots a mini rocket, just like the one in the
// Missile laucher.
// Replacement of AEMinigun (could be named the same for the sake of compat)
// by DBThanatos
// Sprites and sounds ripped from Painkiller.
//=====================================================================================
//=====================================================================================
Actor AEoDMinigun : Weapon
{
	Weapon.AmmoType "AEClip"
	Weapon.AmmoUse 1
	Weapon.AmmoGive 60
	Weapon.AmmoType2 "MiniRockets"
	Weapon.AmmoUse2 1
	Weapon.AmmoGive2 0		//on purpose
	Scale 0.2
	Inventory.PickupSound "painkiller/weapon/chaingun/PickWeapon"
	weapon.upsound "weapons/draw"
	AttackSound "painkiller/weapon/chaingun/BulletShoot"
	Inventory.PickupMessage "You made off with the Minigun!"
	Tag "Minigun"
	States
	{
	Spawn:
		D002 Z -1
		Stop
	Ready:
		D002 A 0 A_StopSound(5)
		D002 A 1 A_WeaponReady
		Loop
	Deselect:
		TNT1 A 0 ACS_NamedExecute("s799",0,0,0,0)
		D002 A 0 A_StopSound(5)
		D002 A 1 A_Lower
		TNT1 AA 0 A_Lower
		Loop
	Select:
		TNT1 A 0 ACS_NamedExecute("s799",0,4,0,0)
		D002 A 0 A_StopSound(5)
		D002 A 1 A_Raise
		TNT1 AA 0 A_Raise
		Loop
	Fire:
		TNT1 a 0 A_PlaySound("painkiller/weapon/chaingun/RotorLoop",5,0.6,1)
		TNT1 A 0 A_Refire
	Hold:
		TNT1 a 0 A_PlaySound("painkiller/weapon/chaingun/RotorLoop",5,0.6,1)
		TNT1 A 0 A_FireCustomMissile("GunSmallSmokeSpawner",0,0,4,7)
		TNT1 A 0 A_FireCustomMissile("PistolCasingSpawner",-50,0, 0,0)
		TNT1 A 0 A_FireBullets(5,5,1,6,"BulletDamagePuff")
		D002 J 1 Bright A_SetPitch(pitch-0.5)
		D002 K 1 Bright A_SetPitch(pitch+0.5)
		TNT1 A 0 A_FireCustomMissile("GunSmallSmokeSpawner",0,0,4,7)
		TNT1 A 0 A_FireCustomMissile("PistolCasingSpawner",-50,0, 0,0)
		TNT1 A 0 A_FireBullets(5,5,1,7,"BulletDamagePuff")
		D002 L 1 Bright A_SetPitch(pitch-0.5)
		D002 M 1 Bright A_SetPitch(pitch+0.5)
		TNT1 A 0 A_FireCustomMissile("GunSmallSmokeSpawner",0,0,4,7)
		TNT1 A 0 A_FireCustomMissile("PistolCasingSpawner",-50,0, 0,0)
		TNT1 A 0 A_FireBullets(5,5,1,6,"BulletDamagePuff")
		D002 N 1 Bright A_SetPitch(pitch-0.5)
		D002 J 1 Bright A_SetPitch(pitch+0.5)
		TNT1 A 0 A_FireCustomMissile("GunSmallSmokeSpawner",0,0,4,7)
		TNT1 A 0 A_FireCustomMissile("PistolCasingSpawner",-50,0, 0,0)
		TNT1 A 0 A_FireBullets(5,5,1,7,"BulletDamagePuff")
		D002 K 1 Bright A_SetPitch(pitch-0.5)
		D002 L 1 Bright A_SetPitch(pitch+0.5)
		TNT1 A 0 A_FireCustomMissile("GunSmallSmokeSpawner",0,0,4,7)
		TNT1 A 0 A_FireCustomMissile("PistolCasingSpawner",-50,0, 0,0)
		TNT1 A 0 A_FireBullets(5,5,1,6,"BulletDamagePuff")
		D002 M 1 Bright A_SetPitch(pitch-0.5)
		D002 N 1 Bright A_SetPitch(pitch+0.5)
	EndHold:
		D002 ABCDE 2 A_WeaponReady(WRF_NOBOB)
		TNT1 a 0 A_PlaySound("painkiller/weapon/chaingun/RotorStop",5,1)
		D002 ABCDE 3 A_WeaponReady(WRF_NOBOB)
		D002 ABCDE 4 A_WeaponReady(WRF_NOBOB)
		Goto Ready
	AltFire:
		TNT1 A 0 A_StopSound(5)
		TNT1 a 0 A_PlayWeaponSound("painkiller/weapon/chaingun/RocketShoot")
		TNT1 A 0 A_FireCustomMissile("MuzzleFlashOrange",0,0,3,6)
		TNT1 A 0 A_FireCustomMissile("PKCGRocket",0,1,3)
		TNT1 A 0 A_GunFlash("AltFlash")
		D016 LMNOPZ 1 Bright
		D002 GGHHII 2 A_SetPitch(pitch+0.7)
		D002 I 2 A_SetPitch(pitch+0.4)
		Goto Ready
	AltFlash:
		D002 F 2 A_SetPitch(pitch-6.0)
		D002 GG 2 A_SetPitch(pitch+0.7)
		Stop
	}
}


ACTOR PKCGRocket
{
Projectile
+STRIFEDAMAGE
+FORCERADIUSDMG
Speed 30
Radius 10
Height 14
Damage 15
MaxStepHeight 4
Scale 0.7
DamageType "ZombieGibber"		//an special damage to gib only the quake1 Zombie & Undead dog.
DeathSound "reilsss/weapons/grenadeexplosion"
States
{
Spawn:
	R025 J 1 Light("OrangeSmallFlicker1") Bright A_SpawnItemEx("FMiniMissileTrail",random(4,-4),random(4,-4),random(6,-2),0,0,1,0,32)
	R025 J 0 A_SpawnItemEx("DevastatorSmoke",-4,random(2,-2),0,0,frandom(0.3,-0.3),frandom(0.1,0.4),0,32)
	Loop
Death:
	TNT1 A 0 Bright A_SetTranslucent(1,1)
	//TNT1 A 0 Bright A_StopSoundEx("Voice")
	TNT1 A 0 A_Explode(56,100,1)
	TNT1 A 4 A_SpawnItemEx("NewExplosionSmallLittleBigger",0,0,0,0,0,0,0,32)
	Stop
}
}

ACTOR MinigunSlowShot : PuzzleItem
{
-INVBAR
Inventory.MaxAmount 7
Inventory.Icon TNT1A0
States
{
Spawn:
	TNT1 A 4
	Loop
}
}

Actor MinigunDrop : CustomInventory
{
    Inventory.MaxAmount 1
    States
    {
    Use:
	TNT1 A 0
	TNT1 A 0 A_StopSound(6)
	TNT1 A 0 A_SpawnItemEx("DroppedMinigun",0,0,32,8,0,0,0,32,0)
	Stop
    }
}

ACTOR DroppedMinigun
{
    Radius 16
    Height 20
    Scale 0.2
    States
    {
    Spawn:
	D002 Z 15
	TNT1 A 0 A_SpawnItemEx("AEoDMinigunNoAmmo",0,0,0,0,0,0,0,48,0)
	Stop
    }
}

ACTOR AEoDMinigunNoAmmo : AEoDMinigunItem
{
    +FLOORCLIP
    +INVENTORY.IGNORESKILL
    Scale 0.2
    Inventory.Amount 1
    Inventory.PickupMessage "Picked up the Minigun!"
    Inventory.PickupSound "reilsss/weappickup/minigun"
    States
    {
    Spawn:
        D002 Z 15
        Loop
    Pickup:
	TNT1 A 0 A_JumpIfInventory("Weapon5Count",3,"Nothing")
	TNT1 A 0 A_JumpIfInventory("AEClip",50,"Ammo")
	TNT1 A 0 A_GiveInventory("Weapon5Count",1)
	TNT1 A 0 A_GiveInventory("MinigunDrop",1)
	TNT1 A 0 A_GiveInventory("AEoDMinigun",1)
	TNT1 A 0 A_TakeInventory("AEClip",50)
	TNT1 A 0 ACS_NamedExecute("s799",0,4,0,0)
	Stop
    Nothing:
	TNT1 A 0 A_JumpIfInventory("AEoDMinigun",1,"Ammo")
	TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
	Goto Pickup+2
	TNT1 A 0 ACS_NamedExecute("s798",0,5,0,0)
	Fail
    Ammo:
	TNT1 A 0 A_TakeInventory("AEClip",50)
	TNT1 A 0 A_JumpIfInventory("AEoDMinigun",1,2)
	TNT1 A 0 A_GiveInventory("Weapon5Count",1)
	TNT1 A 0 A_GiveInventory("MinigunDrop",1)
	TNT1 A 0 A_GiveInventory("AEoDMinigun",1)
	Stop
    }
}

//==================================================================================
//==================================================================================

//==================================================================================
//==================================================================================

ACTOR AEoDNailGunItem : CustomInventory 6020
{
    +FLOORCLIP
    +INVENTORY.IGNORESKILL
    Scale 0.75
    Inventory.Amount 1
    Inventory.PickupMessage "You got the Nailgun"
    Inventory.PickupSound "reilsss/weappickup/nailgun" 
    States
    {
    Spawn:
        PNAI N -1
        Loop
    Pickup:
	TNT1 A 0 A_JumpIfInventory("AEoDNailGun",1,"Ammo")
	TNT1 A 0 A_JumpIfInventory("Weapon5Count",3,"Nothing")
	TNT1 A 0 A_GiveInventory("Weapon5Count",1)
	TNT1 A 0 A_GiveInventory("NailGunDrop",1)
	TNT1 A 0 A_GiveInventory("AEoDNailGun",1)
	TNT1 A 0 ACS_NamedExecute("s799",0,5,0,0)
	Stop
    Nothing:
	TNT1 A 0 A_JumpIfInventory("AEoDNailGun",1,"Ammo")
	TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
	Goto Pickup+2
	TNT1 A 0 ACS_NamedExecute("s798",0,5,0,0)
	Fail
    Ammo:
	TNT1 A 0 A_GiveInventory("AEoDNailGun",1)
	Stop
    }
}

ACTOR AEoDNailGun : Weapon // 6020
{
+FLOORCLIP
+INVENTORY.IGNORESKILL
Weapon.AmmoType1 "AENails"
Weapon.AmmoType2 "AENails"
Weapon.AmmoGive1 40
Weapon.AmmoUse1 1
Weapon.AmmoUse2 1
+CHEATNOTWEAPON
Obituary "%o was Nailed by %k's Nailgun"
Inventory.PickupMessage "You got the Nailgun"
Inventory.PickupSound "reilsss/weappickup/nailgun" 
weapon.upsound "weapons/draw"
Scale 0.75
Tag "Nailgun"
States 
{ 
Spawn: 
	PNAI N 5
	Loop
Ready: 
	NGUN A 1 A_WeaponReady 
	Loop 
Deselect: 
	TNT1 A 0 ACS_NamedExecute("s799",0,0,0,0)
	NGUN A 1 A_Lower
	TNT1 AA 0 A_Lower 
	Loop 
Select: 
	TNT1 A 0 ACS_NamedExecute("s799",0,5,0,0)
	NGUN A 1 A_Raise
	TNT1 AA 0 A_Raise 
	Loop 
Fire: 
	TNT1 A 0 A_GunFlash
	TNT1 A 0 A_PlaySound("weapons/nailshot", CHAN_WEAPON, 0.7, 0)
	TNT1 A 0 ACS_NamedExecute("s851",0,10,random(-4,4),0)
	TNT1 A 0 A_FireCustomMissile("GunSmallSmokeSpawner",0,0,6,8)
	NGUN C 1 Bright A_FireCustomMissile("Nail", 0, 1, 6, 5) 
	TNT1 A 0 A_Light0
	NGUN D 2 Bright ACS_NamedExecute("s851",0,-10,0,0)
	TNT1 A 0 A_ReFire
	goto Ready
AltFire: 
	NGUN B 1 

	TNT1 A 0 A_GunFlash
	NGUN A 0 ACS_NamedExecute("s851",0,10,random(-2,2),0)
	TNT1 A 0 A_PlaySound("weapons/nailshot", CHAN_WEAPON, 0.7, 0)
	TNT1 A 0 A_FireCustomMissile("GunSmallSmokeSpawner",0,0,6,8)
	NGUN C 1 Bright A_FireCustomMissile("Nail", 0, 1, 6, 5) 
	NGUN D 1 Bright ACS_NamedExecute("s851",0,-10,0,0)

	TNT1 A 0 A_GunFlash
	NGUN A 0 ACS_NamedExecute("s851",0,10,random(-2,2),0)
	TNT1 A 0 A_PlaySound("weapons/nailshot", CHAN_WEAPON, 0.7, 0)
	TNT1 A 0 A_FireCustomMissile("GunSmallSmokeSpawner",0,0,6,8)
	NGUN C 1 Bright A_FireCustomMissile("Nail", 0, 1, 6, 5) 
	NGUN D 1 Bright ACS_NamedExecute("s851",0,-10,0,0)

	TNT1 A 0 A_GunFlash
	NGUN A 0 ACS_NamedExecute("s851",0,10,random(-2,2),0)
	TNT1 A 0 A_PlaySound("weapons/nailshot", CHAN_WEAPON, 0.7, 0)
	TNT1 A 0 A_FireCustomMissile("GunSmallSmokeSpawner",0,0,6,8)
	NGUN C 1 Bright A_FireCustomMissile("Nail", 0, 1, 6, 5) 
	NGUN D 1 Bright ACS_NamedExecute("s851",0,-10,0,0)

	TNT1 A 0 A_GunFlash
	NGUN A 0 ACS_NamedExecute("s851",0,10,random(-2,2),0)
	TNT1 A 0 A_PlaySound("weapons/nailshot", CHAN_WEAPON, 0.7, 0)
	TNT1 A 0 A_FireCustomMissile("GunSmallSmokeSpawner",0,0,6,8)
	NGUN C 1 Bright A_FireCustomMissile("Nail", 0, 1, 6, 5) 
	NGUN D 1 Bright ACS_NamedExecute("s851",0,-10,0,0)

	NGUN B 10
	TNT1 A 0 A_ReFire
	goto Ready
Flash: 
	TNT1 A 2 BRIGHT A_Light1 
	TNT1 A 1 BRIGHT A_Light0
	Stop 
} 
} 

actor Nail : FastProjectile
{
Projectile
+RIPPER	RipperLevel 1
+NODAMAGETHRUST
Radius 4
Height 4
Speed 30
Damage (random(1,2))	//Damage (random(3,10))	//3,10 when not a fast projectile, for some reason, a fast projectile deals more damage when ripper than a non fastproj.
DeathSound "weapons/nailpuff"
DamageType "AEBullet"
Scale 0.14
MissileHeight 8
MissileType "BoltTrail"
States
{
Spawn:
	SPIK A 0 
	SPIK A 0 A_Jump(32,"SkipFlag")
	SPIK A 0 A_ChangeFlag("PAINLESS",1)
SkipFlag:
	SPIK A 1 
	Wait
Death:
	TNT1 A 0 A_SpawnItemEx("NailPuff",0,0,0,0,0,0,0,32)
	PUF1 A 0 A_Jump(128,1)
	PUF1 A 0 A_PlaySound("weapons/nailricochet")
	PUF1 ABC 3
	Stop
}
}

Actor SmallNail : Nail
{
	Scale 0.14
	Damage 4
}

Actor NailPuff
{
+NOINTERACTION
RenderStyle Add
Scale 0.2
states
{
Spawn:
	TNT1 A 0
	TNT1 A 0 A_Jump(128,11)
	FX57 ABCDEFGHIJ 2 Bright A_FadeOut
	Stop
	FX57 KLMNOPQRST 2 Bright A_FadeOut
	Stop
}
}

Actor MiniNailPuff : NailPuff
{
Scale 0.05
}

Actor NailGunDrop : CustomInventory
{
    Inventory.MaxAmount 1
    States
    {
    Use:
	TNT1 A 0
	TNT1 A 0 A_SpawnItemEx("DroppedNailGun",0,0,32,8,0,0,0,32,0)
	Stop
    }
}

ACTOR DroppedNailGun
{
    Radius 16
    Height 20
    Scale 0.75
    States
    {
    Spawn:
	PNAI N 15
	TNT1 A 0 A_SpawnItemEx("AEoDNailGunNoAmmo",0,0,0,0,0,0,0,48,0)
	Stop
    }
}

ACTOR AEoDNailGunNoAmmo : AEoDNailGunItem
{
    +FLOORCLIP
    +INVENTORY.IGNORESKILL
    Scale 0.75
    Inventory.Amount 1
    Inventory.PickupMessage "You got the Nailgun"
    Inventory.PickupSound "reilsss/weappickup/nailgun" 
    States
    {
    Spawn:
        PNAI N -1
        Loop
    Pickup:
	TNT1 A 0 A_JumpIfInventory("Weapon5Count",3,"Nothing")
	TNT1 A 0 A_JumpIfInventory("AENails",40,"Ammo")
	TNT1 A 0 A_GiveInventory("Weapon5Count",1)
	TNT1 A 0 A_GiveInventory("NailGunDrop",1)
	TNT1 A 0 A_GiveInventory("AEoDNailGun",1)
	TNT1 A 0 A_TakeInventory("AENails",40)
	TNT1 A 0 ACS_NamedExecute("s799",0,5,0,0)
	Stop
    Nothing:
	TNT1 A 0 A_JumpIfInventory("AEoDNailGun",1,"Ammo")
	TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
	Goto Pickup+2
	TNT1 A 0 ACS_NamedExecute("s798",0,5,0,0)
	Fail
    Ammo:
	TNT1 A 0 A_TakeInventory("AENails",40)
	TNT1 A 0 A_JumpIfInventory("AEoDNailGun",1,2)
	TNT1 A 0 A_GiveInventory("Weapon5Count",1)
	TNT1 A 0 A_GiveInventory("NailGunDrop",1)
	TNT1 A 0 A_GiveInventory("AEoDNailGun",1)
	Stop
    }
}

//==================================================================================
//==================================================================================

//==================================================================================
//==================================================================================

ACTOR AEoDPlasmaRifleItem : CustomInventory 6072
{
    +FLOORCLIP
    +INVENTORY.IGNORESKILL
    Scale 0.125
    Inventory.Amount 1
    Inventory.PickupMessage "You got the Plasma Rifle!"
    Inventory.PickupSound "reilsss/weappickup/plasmagun"
    States
    {
    Spawn:
        D3PL A -1
        Loop
    Pickup:
	TNT1 A 0 A_JumpIfInventory("AEoDPlasmaRifle",1,"Ammo")
	TNT1 A 0 A_JumpIfInventory("Weapon5Count",3,"Nothing")
	TNT1 A 0 A_GiveInventory("Weapon5Count",1)
	TNT1 A 0 A_GiveInventory("PlasmaRifleDrop",1)
	TNT1 A 0 A_GiveInventory("AEoDPlasmaRifle",1)
	TNT1 A 0 ACS_NamedExecute("s799",0,6,0,0)
	Stop
    Nothing:
	TNT1 A 0 A_JumpIfInventory("AEoDPlasmaRifle",1,"Ammo")
	TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
	Goto Pickup+2
	TNT1 A 0 ACS_NamedExecute("s798",0,5,0,0)
	Fail
    Ammo:
	TNT1 A 0 A_GiveInventory("AEoDPlasmaRifle",1)
	Stop
    }
}

ACTOR AEoDPlasmaRifle : Weapon // 6072
{
+FLOORCLIP
+INVENTORY.IGNORESKILL
Weapon.AmmoType1 "PlasmaRod"
Weapon.AmmoType2 "PlasmaRod"
Weapon.AmmoGive1 60
Weapon.AmmoUse1 1
Weapon.AmmoUse2 1
Weapon.Kickback 10
Inventory.PickupMessage "You got the Plasma Rifle!"
Inventory.PickupSound "reilsss/weappickup/plasmagun"
weapon.upsound "weapons/plasma/draw"
Scale 0.125
Tag "Plasma rifle"
States
{
Spawn:
	D3PL A -1
	LOOP
Ready:
	TNT1 A 0 A_PlaySound("reilsss/weapons/plasmaidle1", CHAN_BODY, 1.0, 1)
	D3PG A 20 A_WeaponReady
	Goto Ready+1
Deselect:
	TNT1 A 0 A_StopSound(CHAN_BODY)
	TNT1 A 0 ACS_NamedExecute("s799",0,0,0,0)
	D3PG A 1 A_Lower
	TNT1 AA 0 A_Lower
	LOOP
Select:
	TNT1 A 0 ACS_NamedExecute("s799",0,6,0,0)
	D3PG A 1 A_Raise
	TNT1 AA 0 A_Raise
	Loop
Fire:
	TNT1 B 0 A_JumpIfInventory("PowerQuickFire",1,"FireQuick")
	TNT1 A 0 A_StopSound(CHAN_BODY)
	TNT1 A 0 A_PlaySound("reilsss/weapons/plasmariflefire", CHAN_WEAPON, 1.0, 0)
	D3PG B 1 A_GunFlash
	D3PG C 1 Bright A_FireCustomMissile("D3PlasmaBall", 0, 1, 4, 3)
	D3PG D 1
	D3PG E 1 
	D3PG A 1 A_Refire
	Goto Ready
FireQuick:
	TNT1 B 0 A_JumpIfInventory("PowerQuickFire",1,1)
	Goto Fire
	TNT1 A 0 A_StopSound(CHAN_BODY)
	TNT1 A 0 A_PlaySound("reilsss/weapons/plasmariflefire", CHAN_WEAPON, 1.0, 0)
	D3PG B 1 A_GunFlash
	D3PG C 0 Bright A_FireCustomMissile("D3PlasmaBall", 0, 1, 4, 3)
	D3PG D 1
	D3PG E 0 
	D3PG A 1 A_Refire
	Goto Ready
AltFire:
	TNT1 B 0 A_JumpIfInventory("PowerQuickFire",1,"AltFireQuick")
	TNT1 A 0 A_StopSound(CHAN_BODY)
	TNT1 A 0 A_PlaySound("reilsss/weapons/plasmagunfire1", CHAN_WEAPON, 1.0, 0)
	D3PG B 1 A_GunFlash
	D3PG C 1 Bright A_FireCustomMissile("BouncingPlasmaBall", 0, 1, 4, 3)
	D3PG D 1 
	D3PG E 1
	D3PG A 1 A_Refire
	Goto Ready
AltFireQuick:
	TNT1 B 0 A_JumpIfInventory("PowerQuickFire",1,1)
	Goto AltFire
	TNT1 A 0 A_StopSound(CHAN_BODY)
	TNT1 A 0 A_PlaySound("reilsss/weapons/plasmagunfire1", CHAN_WEAPON, 1.0, 0)
	D3PG B 1 A_GunFlash
	D3PG C 0 Bright A_FireCustomMissile("BouncingPlasmaBall", 0, 1, 4, 3)
	D3PG D 1 
	D3PG E 0
	D3PG A 1 A_Refire
	Goto Ready
Flash:
	TNT1 A 0 A_Light1
	TNT1 A 1 
	TNT1 A 0 ACS_NamedExecute("s851",0,10,random(-3,3),0)
	TNT1 A 2 
	TNT1 A 0 ACS_NamedExecute("s851",0,-10,random(-3,3),0)
	TNT1 A 0 A_Light0
	TNT1 A 1 
	STOP
}
}

ACTOR D3PlasmaBall
{
PROJECTILE
+DROPOFF
+NOBLOCKMAP
+NOGRAVITY
Speed 27
Height 8
Radius 5
Damage 6
RenderStyle Add
DamageType "Plasma"
AlphA 0.75
Scale 0.28
States
{
Spawn:
	D3PP A 1 BRIGHT A_CustomMissile("plasmatrail", 0, 0, 0)
	D3PP A 1 BRIGHT 
	D3PP A 1 BRIGHT A_CustomMissile("plasmatrail", 0, 0, 0)
	D3PP A 1 BRIGHT 
	D3PP A 1 BRIGHT A_CustomMissile("plasmatrail", 0, 0, 0)
	D3PP A 1 BRIGHT 
	D3PP A 1 BRIGHT A_CustomMissile("plasmatrail", 0, 0, 0)
	D3PP A 1 BRIGHT 
	D3PP A 1 BRIGHT A_CustomMissile("plasmatrail", 0, 0, 0)
	D3PP A 1 BRIGHT 
	D3PP A 1 BRIGHT A_CustomMissile("plasmatrail", 0, 0, 0)
	D3PP A 1 BRIGHT 
	D3PP A 1 BRIGHT A_CustomMissile("plasmatrail", 0, 0, 0)
	D3PP A 1 BRIGHT 
	LOOP
Death:
	PLS3 H 2 BRIGHT A_PlaySound("weapons/d3plasmax")
	PLS3 I 2 BRIGHT
	PLSS JKL 2 BRIGHT
	PLSZ ABC 1 BRIGHT
	Stop
}
}

ACTOR plasmatrail
{
+NOINTERACTION
RenderStyle Add
Alpha 0.4
Scale 0.18
States
{
Spawn:
	D3PP BCDE 2
	PLSZ ABC 1
	Stop
}
}

Actor BouncingPlasmaBall : PlasmaBall
{
+CANBOUNCEWATER
Speed 37
Damage 5
Radius 5
Scale 0.7
BounceType "Hexen"
BounceFactor 1.0
BounceCount 4
SeeSound ""
DamageType "Plasma"
BounceSound "reilsss/weapons/plasmagunfire1"
DeathSound "weapons/d3plasmax"
States
{
Spawn:
	XANS A 2 Bright A_SpawnItemEx("BouncingPBTrail1",0,0,0,0,0,0,0,0)
	TNT1 A 0 A_SpawnItemEx("BouncingPBTrail2",0,0,0,0,0,0,0,0)
	XANS A 2 Bright A_SpawnItemEx("BouncingPBTrail1",0,0,0,0,0,0,0,0)
	TNT1 A 0 A_SpawnItemEx("BouncingPBTrail2",0,0,0,0,0,0,0,0)
	XANS B 2 Bright A_SpawnItemEx("BouncingPBTrail1",0,0,0,0,0,0,0,0)
	TNT1 A 0 A_SpawnItemEx("BouncingPBTrail2",0,0,0,0,0,0,0,0)
	XANS B 2 Bright A_SpawnItemEx("BouncingPBTrail1",0,0,0,0,0,0,0,0)
	TNT1 A 0 A_SpawnItemEx("BouncingPBTrail2",0,0,0,0,0,0,0,0)
	XANS C 2 Bright A_SpawnItemEx("BouncingPBTrail1",0,0,0,0,0,0,0,0)
	TNT1 A 0 A_SpawnItemEx("BouncingPBTrail2",0,0,0,0,0,0,0,0)
	XANS C 2 Bright A_SpawnItemEx("BouncingPBTrail1",0,0,0,0,0,0,0,0)
	TNT1 A 0 A_SpawnItemEx("BouncingPBTrail2",0,0,0,0,0,0,0,0)
	XANS D 2 Bright A_SpawnItemEx("BouncingPBTrail1",0,0,0,0,0,0,0,0)
	TNT1 A 0 A_SpawnItemEx("BouncingPBTrail2",0,0,0,0,0,0,0,0)
	XANS D 2 Bright A_SpawnItemEx("BouncingPBTrail1",0,0,0,0,0,0,0,0)
	TNT1 A 0 A_SpawnItemEx("BouncingPBTrail2",0,0,0,0,0,0,0,0)
	XANS E 2 Bright A_SpawnItemEx("BouncingPBTrail1",0,0,0,0,0,0,0,0)
	TNT1 A 0 A_SpawnItemEx("BouncingPBTrail2",0,0,0,0,0,0,0,0)
	XANS E 2 Bright A_SpawnItemEx("BouncingPBTrail1",0,0,0,0,0,0,0,0)
	TNT1 A 0 A_SpawnItemEx("BouncingPBTrail2",0,0,0,0,0,0,0,0)
	XANS F 2 Bright A_SpawnItemEx("BouncingPBTrail1",0,0,0,0,0,0,0,0)
	TNT1 A 0 A_SpawnItemEx("BouncingPBTrail2",0,0,0,0,0,0,0,0)
	XANS F 2 Bright A_SpawnItemEx("BouncingPBTrail1",0,0,0,0,0,0,0,0)
	TNT1 A 0 A_SpawnItemEx("BouncingPBTrail2",0,0,0,0,0,0,0,0)
	Loop
Death:
	XANE ABCDEF 3 Bright A_FadeOut
	Stop
}
}

Actor BouncingPlasmaBallWeak : BouncingPlasmaBall
{
    +DoomBounce
    Speed 26
    BounceCount 4
    Damage 3
    DamageType "Plasma"
}

ACTOR BouncingPlasmaBallWeakSlow : BouncingPlasmaBallWeak
{
    Speed 13
}


Actor BouncingPBTrail1
{
+NOINTERACTION
RenderStyle Add
Translation "112:127=192:207"
AlphA 0.8
Scale 0.2
States
{
Spawn:
	TNT1 A 0
	SHOK ABCDEFGHIJK 2 Bright A_FadeOut(0.1)
	Wait
}
}

Actor BouncingPBTrail2
{
+NOINTERACTION
RenderStyle Add
AlphA 0.6
Scale 0.15
Translation "112:127=192:207"
States
{
Spawn:
	TNT1 A 0
	BPLO ABCDEFGHIJKL 2 Bright A_FadeOut(0.1)
	Wait
}
}

Actor PlasmaRifleDrop : CustomInventory
{
    Inventory.MaxAmount 1
    States
    {
    Use:
	TNT1 A 0
	TNT1 A 0 A_StopSound(CHAN_BODY)
	TNT1 A 0 A_SpawnItemEx("DroppedPlasmaRifle",0,0,32,8,0,0,0,32,0)
	Stop
    }
}

ACTOR DroppedPlasmaRifle
{
    Radius 16
    Height 20
    Scale 0.125
    States
    {
    Spawn:
	D3PL A 15
	TNT1 A 0 A_SpawnItemEx("AEoDPlasmaRifleNoAmmo",0,0,0,0,0,0,0,48,0)
	Stop
    }
}

ACTOR AEoDPlasmaRifleNoAmmo : AEoDPlasmaRifleItem
{
    +FLOORCLIP
    +INVENTORY.IGNORESKILL
    Scale 0.125
    Inventory.Amount 1
    Inventory.PickupMessage "You got the Plasma Rifle!"
    Inventory.PickupSound "reilsss/weappickup/plasmagun"
    States
    {
    Spawn:
        D3PL A -1
        Loop
    Pickup:
	TNT1 A 0 A_JumpIfInventory("Weapon5Count",3,"Nothing")
	TNT1 A 0 A_JumpIfInventory("PlasmaRod",60,"Ammo")
	TNT1 A 0 A_GiveInventory("Weapon5Count",1)
	TNT1 A 0 A_GiveInventory("PlasmaRifleDrop",1)
	TNT1 A 0 A_GiveInventory("AEoDPlasmaRifle",1)
	TNT1 A 0 A_TakeInventory("PlasmaRod",60)
	TNT1 A 0 ACS_NamedExecute("s799",0,6,0,0)
	Stop
    Nothing:
	TNT1 A 0 A_JumpIfInventory("AEoDPlasmaRifle",1,"Ammo")
	TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
	Goto Pickup+2
	TNT1 A 0 ACS_NamedExecute("s798",0,5,0,0)
	Fail
    Ammo:
	TNT1 A 0 A_TakeInventory("PlasmaRod",60)
	TNT1 A 0 A_JumpIfInventory("AEoDPlasmaRifle",1,2)
	TNT1 A 0 A_GiveInventory("Weapon5Count",1)
	TNT1 A 0 A_GiveInventory("PlasmaRifleDrop",1)
	TNT1 A 0 A_GiveInventory("AEoDPlasmaRifle",1)
	Stop
    }
}

//==================================================================================
//==================================================================================

//==================================================================================
//==================================================================================

ACTOR AEoDWyvernHeartItem : CustomInventory 6090
{
    +FLOORCLIP
    +INVENTORY.IGNORESKILL
    Scale 0.55
    Inventory.Amount 1
    Inventory.PickupMessage "Picked up a Wyvern's heart"
    Inventory.PickupSound "hearthbeat"
    States
    {
    Spawn:
	WMWY A 70
	WMWY B 4 A_PlaySound("WyvernHeart/Beat", CHAN_ITEM, 0.7, 0)
	Loop 
    Pickup:
	TNT1 A 0 A_JumpIfInventory("AEoDWyvernHeart",1,"Ammo")
	TNT1 A 0 A_JumpIfInventory("Weapon5Count",3,"Nothing")
	TNT1 A 0 A_GiveInventory("Weapon5Count",1)
	TNT1 A 0 A_GiveInventory("WyvernHeartDrop",1)
	TNT1 A 0 A_GiveInventory("AEoDWyvernHeart",1)
	TNT1 A 0 ACS_NamedExecute("s799",0,7,0,0)
	Stop
    Nothing:
	TNT1 A 0 A_JumpIfInventory("AEoDWyvernHeart",1,"Ammo")
	TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
	Goto Pickup+2
	TNT1 A 0 ACS_NamedExecute("s798",0,5,0,0)
	Fail
    Ammo:
	TNT1 A 0 A_GiveInventory("AEoDWyvernHeart",1)
	Stop
    }
}

ACTOR AEoDWyvernHeart : Weapon // 6090
{ 
+CHEATNOTWEAPON
+INVENTORY.IGNORESKILL
Weapon.AmmoType1 "GreenMana" 
Weapon.AmmoType2 "RedMana"
Weapon.AmmoGive1 30
Weapon.AmmoGive2 20
Weapon.AmmoUse1 4 //These will need adjustments.
Weapon.AmmoUse2 8
Inventory.PickupMessage "Picked up a Wyvern's heart"
Inventory.PickupSound "hearthbeat" 
Weapon.upsound "hearthbeat"
Scale 0.55
Tag "Wyvern heart"
States 
{ 	
	Spawn:
		WMWY A 70
		WMWY B 4 A_PlaySound("WyvernHeart/Beat", CHAN_ITEM, 0.7, 0)
		Loop 
	Ready:
		MWYV A 0 A_JumpIfInventory("BeatCheck",75,3)
		MWYV A 0 A_GiveInventory("BeatCheck",1)
		MWYV A 1 A_WeaponReady
		goto Ready
		MWYV H 4 A_WeaponReady
		MWYV H 0 A_TakeInventory("BeatCheck",75)
		MWYV H 0 A_PlaySound("WyvernHeart/Beat", 6, 0.8, 0)
		Loop 
	Deselect: 
		TNT1 A 0 ACS_NamedExecute("s799",0,0,0,0)
		MWYV A 1 A_Lower
		MWYV A 0 A_TakeInventory("BeatCheck",75)
		TNT1 AA 0 A_Lower
		Loop 
	Select: 
		TNT1 A 0 ACS_NamedExecute("s799",0,7,0,0)
		MWYV A 1 A_Raise
		MWYV A 0 A_TakeInventory("BeatCheck",75)
		TNT1 AA 0 A_Raise 
		Loop 
	Fire: 
                MWYV B 0 Bright A_JumpIfNoAmmo(1)
                MWYV B 0 A_JumpIfInventory("BeatCheck",75,15)
                MWYV B 4 A_GiveInventory("BeatCheck",4)
                MWYV C 0 A_JumpIfInventory("BeatCheck",75,15)
                MWYV C 4 A_GiveInventory("BeatCheck",4)
                MWYV D 0 A_JumpIfInventory("BeatCheck",75,15)
                MWYV D 4 A_GiveInventory("BeatCheck",4)
                MWYV E 0 Bright A_JumpIfInventory("BeatCheck",75,15)
                MWYV E 0 Bright A_GiveInventory("BeatCheck",4)
		MWYV E 0 Bright A_PlayWeaponSound("magestafffire")
		MWYV E 4 Bright A_FireCustomMissile("WyvernHeartFireball",0,1,0,0,0)
		MWYV E 4 Bright A_ReFire
                MWYV F 0 A_JumpIfInventory("BeatCheck",75,15)
                MWYV F 4 A_GiveInventory("BeatCheck",4)
                MWYV G 0 A_JumpIfInventory("BeatCheck",75,15)
                MWYV G 4 A_GiveInventory("BeatCheck",4)
		goto Ready
                MWYV I 4 A_TakeInventory("BeatCheck",75)
                MWYV I 0 A_PlaySoundEx("WyvernHeart/Beat","SoundSlot7",0,0)
                goto Fire+4
                MWYV J 4 A_TakeInventory("BeatCheck",75)
                MWYV J 0 A_PlaySoundEx("WyvernHeart/Beat","SoundSlot7",0,0)
                goto Fire+6
                MWYV K 4 A_TakeInventory("BeatCheck",75)
                MWYV K 0 A_PlaySoundEx("WyvernHeart/Beat","SoundSlot7",0,0)
                goto Fire+8
                MWYV L 0 Bright A_TakeInventory("BeatCheck",75)
                MWYV L 0 A_PlaySoundEx("WyvernHeart/Beat","SoundSlot7",0,0)
		MWYV L 0 Bright A_PlayWeaponSound("magestafffire")
		MWYV L 4 Bright A_FireCustomMissile("WyvernHeartFireball",0,1,0,0,0)
		MWYV L 4 Bright A_ReFire
                MWYV M 4 A_TakeInventory("BeatCheck",75)
                MWYV M 0 A_PlaySoundEx("WyvernHeart/Beat","SoundSlot7",0,0)
                goto Fire+15
                MWYV N 4 A_TakeInventory("BeatCheck",75)
                MWYV N 0 A_PlaySoundEx("WyvernHeart/Beat","SoundSlot7",0,0)
                goto Ready
        AltFire:
                MWYV O 3
                MWYV P 0 A_PlayWeaponSound("WyvernHeart/Squeeze")
                MWYV P 10 A_FireCustomMissile("WHSummon",0,1,0,0,0)
                MWYV O 3
                MWYV A 50
                goto Ready
	Hold:
                MWYV E 0 Bright A_JumpIfNoAmmo(1)
                MWYV E 0 Bright A_JumpIfInventory("BeatCheck",75,5)
                MWYV E 0 Bright A_GiveInventory("BeatCheck",4)
		MWYV E 0 Bright A_PlayWeaponSound("DemonMissileFire")
		MWYV E 4 Bright A_FireCustomMissile("WyvernHeartFireball",0,1,0,0,0)
		MWYV E 4 Bright A_ReFire
		goto Fire+12
                MWYV L 0 Bright A_TakeInventory("BeatCheck",75)
                MWYV L 0 A_PlaySoundEx("WyvernHeart/Beat","SoundSlot7",0,0)
		MWYV L 0 Bright A_PlayWeaponSound("DemonMissileFire")
		MWYV L 4 Bright A_FireCustomMissile("WyvernHeartFireball",0,1,0,0,0)
		MWYV L 4 Bright A_ReFire
                goto Fire+12
}
}

ACTOR BeatCheck : CustomInventory
{
Inventory.MaxAmount 75
States
{
Spawn:
	TNT1 A 0
	Stop
Use:
	TNT1 A 0
	Stop
}
}


ACTOR WHSummon
{
PROJECTILE
+FLOORHUGGER
Radius 12
Height 24
Speed 20
States
{
Spawn:
	TNT1 A 3
	TNT1 A 0 A_PlaySound("FireDemonSpawn")
	TNT1 A 0 A_SpawnItem("WHTeleportSmoke",0)
	TNT1 A 0 A_SpawnItem("FFireWyvernF",0)
	Stop
Death:
	TNT1 A 0
	goto Spawn+1
}
}

ACTOR WHSummon2
{
PROJECTILE
+FLOORHUGGER
Radius 12
Height 24
Speed 20
States
{
Spawn:
	TNT1 A 3
	TNT1 A 0 A_PlaySound("FireDemonSpawn")
	TNT1 A 0 A_SpawnItem("WHTeleportSmoke",0)
	TNT1 A 0 A_SpawnItem("FFireWyvernF2",0)
	Stop
Death:
	TNT1 A 0
	goto Spawn+1
}
}

ACTOR WHTeleportSmoke : MinotaurSmoke
{
Scale 0.4
}

ACTOR ReilsssBlackDragonHatchie
{
Health 150
Painchance 32
Speed 12
Radius 12
Height 24
Mass 200
//Scale 0.3 //Wyvern Size
Scale 0.25 //Dragon Size
BloodColor coral
MONSTER 
+FLOAT
+NOGRAVITY
+SPAWNFLOAT
+DROPOFF
+NOBLOCKMONST
+FRIENDLY
+MISSILEMORE
-SHOOTABLE
maxtargetrange 128
SeeSound "FireDemonActive"
PainSound "FireDemonPain"
DeathSound "FireDemonDeath"
ActiveSound "FireDemonActive"
Obituary "%o got incinerated by a Fire Wyvern."
States
{
Spawn:
	RDAG A 25
	RDAG A 0 A_SetShootable
	RDAG ABCDEF 3 A_Look
	TNT1 A 0 A_PlaySound("DragonWingFlap")
	RDAG GHIJK 3 A_Look
	goto Spawn+2
See:
	TNT1 A 0 A_ChangeFlag("FLOATBOB",1)
	RDAG ABCDEF 3 A_Chase
	TNT1 A 0 A_PlaySound("DragonWingFlap") 
	RDAG GHIJK 3 A_Chase
	goto See+1
Missile:
	RDAG F 0 A_FaceTarget
	RDAG F 4 Bright A_CustomMissile("WyvernFlame", 14, 0, 0)
	RDAG F 0 A_FaceTarget
	RDAG F 4 Bright A_CustomMissile("WyvernFlame", 14, 0, 0)
	RDAG F 0 A_FaceTarget
	RDAG F 4 Bright A_CustomMissile("WyvernFlame", 14, 0, 0)
	RDAG F 0 A_FaceTarget
	RDAG F 4 Bright A_CustomMissile("WyvernFlame", 14, 0, 0)
	RDAG F 0 A_FaceTarget
	RDAG F 4 Bright A_CustomMissile("WyvernFlame", 14, 0, 0)
	RDAG F 0 A_FaceTarget
	RDAG F 4 Bright A_CustomMissile("WyvernFlame", 14, 0, 0)
	RDAG F 0 A_FaceTarget
	RDAG F 4 Bright A_CustomMissile("WyvernFlame", 14, 0, 0)
	RDAG F 0 A_FaceTarget
	RDAG F 4 Bright A_CustomMissile("WyvernFlame", 14, 0, 0)
	RDAG F 0 A_FaceTarget
	RDAG F 4 Bright A_CustomMissile("WyvernFlame", 14, 0, 0)
	RDAG F 0 A_FaceTarget
	RDAG F 4 Bright A_CustomMissile("WyvernFlame", 14, 0, 0)
	Goto See+7
Pain:
	RDAG V 3
	RDAG W 3 A_Pain
	RDAG V 3
	Goto See+7
Death:
	//You know I don't like seeing dragons dieing so
	//they just disapear like they appear to there own
	//safty! (I'm not a dragonslayer!)
	TNT1 A 0 A_PlaySound("FireDemonSpawn")
	TNT1 A 0 A_SpawnItem("WHTeleportSmoke",0)
	TNT1 A 0 A_ChangeFlag("FLOATBOB",0)
	TNT1 A 0 A_Fall
	TNT1 A 4 A_SetFloorClip
	TNT1 A 5
	Wait
Crash:
	TNT1 A 7 A_SetFloorClip
	TNT1 A 7
	TNT1 AA 7
	TNT1 M -1
	Stop
Ice:
	//Dragons are one with fire... I doubt they could be frozen
  //so just normal pain
	RDAG V 3
	RDAG W 3 A_Pain
	RDAG V 3
	Goto See+7
}
}

ACTOR ReilsssBlackDragon
{
//$Category "ZDoom Monster pack"
Health 650
Painchance 32
Speed 14
Radius 12
Height 24
Mass 200
//Scale 0.75 //Wyvern Size
Scale 0.375 //Dragon Size
BloodColor coral
MONSTER 
+FLOAT
+NOGRAVITY
+SPAWNFLOAT
+DROPOFF
+NOBLOCKMONST
+FRIENDLY
+MISSILEMORE
-SHOOTABLE
maxtargetrange 198
SeeSound "FireDemonActive"
PainSound "FireDemonPain"
DeathSound "FireDemonDeath"
ActiveSound "FireDemonActive"
Obituary "%o got incinerated by a Fire Wyvern."
States
{
Spawn:
	RDAG A 25
	RDAG A 0 A_SetShootable
	RDAG ABCDEF 3 A_Look
	TNT1 A 0 A_PlaySound("DragonWingFlap")
	RDAG GHIJK 3 A_Look
	goto Spawn+2
See:
	TNT1 A 0 A_ChangeFlag("FLOATBOB",1)
	RDAG ABCDEF 3 A_Chase
	TNT1 A 0 A_PlaySound("DragonWingFlap") 
	RDAG GHIJK 3 A_Chase
	goto See+1
Missile:
	RDAG F 0 A_FaceTarget
	RDAG F 4 Bright A_CustomMissile("WyvernHeartFireball", 14, 0, 0)
	RDAG F 0 A_FaceTarget
	RDAG F 4 Bright A_CustomMissile("WyvernHeartFireball", 14, 0, 0)
	RDAG F 0 A_FaceTarget
	RDAG F 4 Bright A_CustomMissile("WyvernHeartFireball", 14, 0, 0)
	RDAG F 0 A_FaceTarget
	RDAG F 4 Bright A_CustomMissile("WyvernHeartFireball", 14, 0, 0)
	RDAG F 0 A_FaceTarget
	RDAG F 4 Bright A_CustomMissile("WyvernHeartFireball", 14, 0, 0)
	RDAG F 0 A_FaceTarget
	RDAG F 4 Bright A_CustomMissile("WyvernHeartFireball", 14, 0, 0)
	RDAG F 0 A_FaceTarget
	RDAG F 4 Bright A_CustomMissile("WyvernHeartFireball", 14, 0, 0)
	RDAG F 0 A_FaceTarget
	RDAG F 4 Bright A_CustomMissile("WyvernHeartFireball", 14, 0, 0)
	RDAG F 0 A_FaceTarget
	RDAG F 4 Bright A_CustomMissile("WyvernHeartFireball", 14, 0, 0)
	RDAG F 0 A_FaceTarget
	RDAG F 4 Bright A_CustomMissile("WyvernHeartFireball", 14, 0, 0)
	Goto See+7
Pain:
	RDAG V 3
	RDAG W 3 A_Pain
	RDAG V 3
	Goto See+7
Death:
	//You know I don't like seeing dragons dieing so
	//they just disapear like they appear to there own
	//safty! (I'm not a dragonslayer!)
	TNT1 A 0 A_PlaySound("FireDemonSpawn")
	TNT1 A 0 A_SpawnItem("WHTeleportSmoke",0)
	TNT1 A 0 A_ChangeFlag("FLOATBOB",0)
	TNT1 A 0 A_Fall
	TNT1 A 4 A_SetFloorClip
	TNT1 A 5
	Wait
Crash:
	TNT1 A 7 A_SetFloorClip
	TNT1 A 7
	TNT1 AA 7
	TNT1 M -1
	Stop
 Ice:
	//Dragons are one with fire... I doubt they could be frozen
	//so just normal pain
	RDAG V 3
	RDAG W 3 A_Pain
	RDAG V 3
	Goto See+7
}
}

ACTOR WyvernFlame
{
PROJECTILE
+RIPPER	RipperLevel 1
+DONTSPLASH
+BLOODLESSIMPACT
DamageType "Fire"
Mass 1
Radius 4
Height 3
Speed 10
Damage (random(1,3))
+PAINLESS
Scale 0.3
SeeSound "vile/firecrkl"
RenderStyle Add
States
{
Spawn:
	EFIR ABCDEFGHIJKLM 2 Bright
	Stop
}
}

ACTOR WyvernFlameSlow : WyvernFlame
{
    Speed 5
    States
    {
    Spawn:
        EFIR ABCDEFGHIJKLM 4 Bright
        Stop
    }
}
//--------------------------------------------------------------
ACTOR WyvernHeartFireball
{
PROJECTILE
DamageType "Fire"
Speed 24
Radius 12
Height 10
Damage 5
Renderstyle Add
SeeSound "vile/firecrkl"
DeathSound "DemonMissileExplode"
States
{
Spawn:
	DRFX AAABBBCCCDDDEEEFFF 1 Bright A_SpawnItemEx("WyvernHeartFireballTrail",random(3,-3),random(3,-3),random(3,-3),0,0,0,0,32)
	Loop
Death:
	TNT1 A 0 A_SetScale(0.5)
	TNT1 AAAAA 0 A_SpawnItemEx("WHFirbllExplBig",0,0,0,frandom(0.4,1.0),0,frandom(1.0,-1.0),random(0,359),33)	//see WepClass7.AED
	DRFX G 3 Bright
	DRFX HIJKL 4 Bright
	TNT1 A 5 Bright A_SpawnItemEx("WHExplosion",random(-20,20),random(-20,20),random(-20,20),0,0,0,0,40,0)
	TNT1 A 5 Bright A_SpawnItemEx("WHExplosion",random(-20,20),random(-20,20),random(-20,20),0,0,0,0,40,0)
	TNT1 A 0 Bright A_Jump(127,6)
	TNT1 A 5 Bright A_SpawnItemEx("WHExplosion",random(-20,20),random(-20,20),random(-20,20),0,0,0,0,40,0)
	TNT1 A 0 Bright A_Jump(127,4)
	TNT1 A 5 Bright A_SpawnItemEx("WHExplosion",random(-20,20),random(-20,20),random(-20,20),0,0,0,0,40,0)
	TNT1 A 0 Bright A_Jump(127,2)
	TNT1 A 5 Bright A_SpawnItemEx("WHExplosion",random(-20,20),random(-20,20),random(-20,20),0,0,0,0,40,0)
	TNT1 A 0
	Stop
}
}

Actor WHFirbllExplBig
{
	+NOINTERACTION
	RenderStyle Add
	Scale 0.9
	States
	{
	Spawn:
		X002 ABCDEFGHJKLMNOPQRSTU 2 Bright A_FadeOut(0.04)
		Stop
	}
}

Actor WHFirbllExplSmall : WHFirbllExplBig
{	Scale 0.6	}

ACTOR WHExplosion
{
PROJECTILE
+FIREDAMAGE
+NOGRAVITY
+FORCERADIUSDMG
+NODAMAGETHRUST
Speed 0
Radius 8
Height 8
DeathSound "DragonFireballExplode"
DamageType "Fire"
Renderstyle Add
States
{
Spawn:
	TNT1 A 0
	TNT1 AAA 0 A_SpawnItemEx("WHFirbllExplSmall",0,0,0,frandom(0.1,0.5),0,frandom(0.5,-0.5),random(0,359),32)	//see WepClass7.AED
	CFCF Q 3 Bright
	CFCF R 3 Bright
	CFCF S 3 Bright A_Scream
	CFCF T 3 Bright A_Explode(80,128,0)
	CFCF U 3 Bright
	CFCF V 2 Bright
	CFCF W 2 Bright
	CFCF X 2 Bright
	CFCF Y 2 Bright
	CFCF Z 2 Bright
	Stop
}
}

Actor WyvernHeartFireballTrail
{
	RenderStyle Add
	+NOINTERACTION
	Scale 0.7
	States
	{
	Spawn:
		TNT1 A 0 
		TNT1 A 0 A_Jump(170,2,3,4)
		DRFX AAABBBCCCDDDEEEFFF 1 A_FadeOut(0.09)
		Goto SPawn+2
	}
}

ACTOR WyvernHeartFireballSlow : WyvernHeartFireball
{
    Speed 12
    States
    {
    Spawn:
	DRFX ABCDEF 8 Bright
	Loop
    }
}



ACTOR FFireWyvernF 
{
+FLOAT
+NOGRAVITY
+SPAWNFLOAT
+DROPOFF
+NOBLOCKMONST
+FRIENDLY
+MISSILEMORE
-SHOOTABLE
Health 100
Painchance 32
Speed 12
Radius 12
Height 24
Mass 200
Scale 0.3
BloodColor coral
MONSTER 
maxtargetrange 128
SeeSound "FireDemonActive"
PainSound "FireDemonPain"
DeathSound "FireDemonDeath"
ActiveSound "FireDemonActive"
Obituary "%o got incinerated by a Fire Wyvern."
States
{
Spawn:
	DRAG A 25
	DRAG A 0 A_SetShootable
	DRAG ABCDCB 3 A_Look
	goto Spawn+2
See:
	DRAG A 0 A_ChangeFlag("FLOATBOB",1)
	DRAG ABC 3 A_Chase
	DRAG D 0 A_PlaySound("DragonWingFlap") 
	DRAG DCB 3 A_Chase
	goto See+1
Missile:
	DRAG E 0 A_FaceTarget
	DRAG E 4 Bright A_CustomMissile("WyvernFlame", 14, 0, 0)
	DRAG E 0 A_FaceTarget
	DRAG E 4 Bright A_CustomMissile("WyvernFlame", 14, 0, 0)
	DRAG E 0 A_FaceTarget
	DRAG E 4 Bright A_CustomMissile("WyvernFlame", 14, 0, 0)
	DRAG E 0 A_FaceTarget
	DRAG E 4 Bright A_CustomMissile("WyvernFlame", 14, 0, 0)
	DRAG E 0 A_FaceTarget
	DRAG E 4 Bright A_CustomMissile("WyvernFlame", 14, 0, 0)
	DRAG E 0 A_FaceTarget
	DRAG E 4 Bright A_CustomMissile("WyvernFlame", 14, 0, 0)
	DRAG E 0 A_FaceTarget
	DRAG E 4 Bright A_CustomMissile("WyvernFlame", 14, 0, 0)
	DRAG E 0 A_FaceTarget
	DRAG E 4 Bright A_CustomMissile("WyvernFlame", 14, 0, 0)
	DRAG E 0 A_FaceTarget
	DRAG E 4 Bright A_CustomMissile("WyvernFlame", 14, 0, 0)
	DRAG E 0 A_FaceTarget
	DRAG E 4 Bright A_CustomMissile("WyvernFlame", 14, 0, 0)
	Goto See+1
Pain:
	DRAG G 3
	DRAG G 3 A_Pain
	Goto See+1
Death:
	DRAG G 0 A_ChangeFlag("FLOATBOB",0)
	DRAG G 0 A_Fall
	DRAG G 4 A_SetFloorClip
	DRAG H 5 A_Scream
	DRAG H 5
	Wait
Crash:
	"####" "#" 0 A_JumpIfInventory("DisintegrateToken",1,"DisintegrateCont")
	DRAG I 7 A_SetFloorClip
	DRAG J 7 A_PlaySound("wyvern/splat")
	DRAG KL 7
	DRAG M -1
	Stop
	
	Death.UnholyDisint:
	Death.PlasmaDisint:
	Disintegrate:
		"####" "#" 0 A_GiveInventory("DisintegrateToken",1)
	DisintegrateCont:
		"####" "#" 0 Thing_SetTranslation(0,50)
		"####" "#" 1 A_FadeOut(0.015)
		"####" "#" 0 A_ChangeFlag("NOINTERACTION",1)
		"####" "#" 0 A_Stop    
		"####" "#" 0 A_Fall
		"####" "#" 0 A_SpawnItemEx("DisintegrateShadowSmallMedium",0,0,18,0,0,0,0,32)
		"####" "#" 0 A_SpawnItemEx("DisintegrateSparksSmallMedium",0,0,18,0,0,0,0,32)
		"####" "##" 2 A_FadeOut(0.03)
		Goto DisintegrateCont+6
Ice:
	DRAG N 0 A_ChangeFlag("FLOATBOB",0)
	DRAG N 5 A_FreezeDeath
	DRAG N 1 A_FreezeDeathChunks
	Wait
}
}

ACTOR FFireWyvernF2 : FFireWyvernF 
{
//$Category "ZDoom Monster pack"
Health 250
Painchance 32
Speed 11
Radius 12
Height 24
Mass 200
Scale 1.0
States
{
Missile:
	DRAG E 0 A_FaceTarget
	DRAG E 4 Bright A_CustomMissile("WyvernHeartFireball", 14, 0, 0)
	DRAG E 0 A_FaceTarget
	DRAG E 4 Bright A_CustomMissile("WyvernHeartFireball", 14, 0, 0)
	DRAG E 0 A_FaceTarget
	DRAG E 4 Bright A_CustomMissile("WyvernHeartFireball", 14, 0, 0)
	DRAG E 0 A_FaceTarget
	DRAG E 4 Bright A_CustomMissile("WyvernHeartFireball", 14, 0, 0)
	DRAG E 0 A_FaceTarget
	DRAG E 4 Bright A_CustomMissile("WyvernHeartFireball", 14, 0, 0)
	DRAG E 0 A_FaceTarget
	DRAG E 4 Bright A_CustomMissile("WyvernHeartFireball", 14, 0, 0)
	DRAG E 0 A_FaceTarget
	DRAG E 4 Bright A_CustomMissile("WyvernHeartFireball", 14, 0, 0)
	DRAG E 0 A_FaceTarget
	DRAG E 4 Bright A_CustomMissile("WyvernHeartFireball", 14, 0, 0)
	DRAG E 0 A_FaceTarget
	DRAG E 4 Bright A_CustomMissile("WyvernHeartFireball", 14, 0, 0)
	DRAG E 0 A_FaceTarget
	DRAG E 4 Bright A_CustomMissile("WyvernHeartFireball", 14, 0, 0)
	Goto See+1
}
}

Actor WyvernHeartDrop : CustomInventory
{
    Inventory.MaxAmount 1
    States
    {
    Use:
	TNT1 A 0
	TNT1 A 0 A_SpawnItemEx("DroppedWyvernHeart",0,0,32,8,0,0,0,32,0)
	Stop
    }
}

ACTOR DroppedWyvernHeart
{
    Radius 16
    Height 20
    Scale 0.55
    States
    {
    Spawn:
	WMWY A 15
	TNT1 A 0 A_SpawnItemEx("AEoDWyvernHeartNoAmmo",0,0,0,0,0,0,0,48,0)
	Stop
    }
}

ACTOR AEoDWyvernHeartNoAmmo : AEoDWyvernHeartItem
{
    +FLOORCLIP
    +INVENTORY.IGNORESKILL
    Scale 0.55
    Inventory.Amount 1
    Inventory.PickupMessage "Picked up a Wyvern's heart"
    Inventory.PickupSound "hearthbeat"
    States
    {
    Spawn:
	WMWY A 70
	WMWY B 4 A_PlaySound("WyvernHeart/Beat", CHAN_ITEM, 0.7, 0)
	Loop
    Pickup:
	TNT1 A 0 A_JumpIfInventory("Weapon5Count",3,"Nothing")
	TNT1 A 0 A_JumpIfInventory("GreenMana",30,"Ammo")
	TNT1 A 0 A_JumpIfInventory("RedMana",20,"Ammo3")
	TNT1 A 0 A_GiveInventory("Weapon5Count",1)
	TNT1 A 0 A_GiveInventory("WyvernHeartDrop",1)
	TNT1 A 0 A_GiveInventory("AEoDWyvernHeart",1)
	TNT1 A 0 A_TakeInventory("GreenMana",30)
	TNT1 A 0 A_TakeInventory("RedMana",20)
	TNT1 A 0 ACS_NamedExecute("s799",0,7,0,0)
	Stop
    Nothing:
	TNT1 A 0 A_JumpIfInventory("AEoDWyvernHeart",1,"Ammo")
	TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
	Goto Pickup+2
	TNT1 A 0 ACS_NamedExecute("s798",0,5,0,0)
	Fail
    Ammo:
	TNT1 A 0 A_JumpIfInventory("RedMana",20,1)
	Goto Ammo2
	TNT1 A 0 A_TakeInventory("GreenMana",30)
	TNT1 A 0 A_TakeInventory("RedMana",20)
	TNT1 A 0 A_JumpIfInventory("AEoDWyvernHeart",1,2)
	TNT1 A 0 A_GiveInventory("Weapon5Count",1)
	TNT1 A 0 A_GiveInventory("WyvernHeartDrop",1)
	TNT1 A 0 A_GiveInventory("AEoDWyvernHeart",1)
	Stop
    Ammo2:
	TNT1 A 0 A_TakeInventory("GreenMana",30)
	TNT1 A 0 A_GiveInventory("Weapon5Count",1)
	TNT1 A 0 A_GiveInventory("WyvernHeartDrop",1)
	TNT1 A 0 A_GiveInventory("AEoDWyvernHeart",1)
	TNT1 A 0 A_TakeInventory("RedMana",20)
	Stop
    Ammo3:
	TNT1 A 0 A_TakeInventory("RedMana",20)
	TNT1 A 0 A_GiveInventory("Weapon5Count",1)
	TNT1 A 0 A_GiveInventory("WyvernHeartDrop",1)
	TNT1 A 0 A_GiveInventory("AEoDWyvernHeart",1)
	TNT1 A 0 A_TakeInventory("GreenMana",30)
	Stop
    }
}

//==================================================================================
//==================================================================================

//==================================================================================
//==================================================================================

ACTOR AEoDAssaultRifleItem : CustomInventory 6069
{
    +FLOORCLIP
    +INVENTORY.IGNORESKILL
    Scale 0.55
    Inventory.Amount 1
    Inventory.PickupMessage "You got a M16 Assault Rifle."
    Inventory.PickupSound "reilsss/weappickup/assaultrifle"
    States
    {
    Spawn:
        R017 I -1
        Loop
    Pickup:
	TNT1 A 0 A_JumpIfInventory("AEoDAssaultRifle",1,"Ammo")
	TNT1 A 0 A_JumpIfInventory("Weapon5Count",3,"Nothing")
	TNT1 A 0 A_GiveInventory("Weapon5Count",1)
	TNT1 A 0 A_GiveInventory("AssaultRifleDrop",1)
	TNT1 A 0 A_GiveInventory("AEoDAssaultRifle",1)
	TNT1 A 0 ACS_NamedExecute("s799",0,8,0,0)
	Stop
    Nothing:
	TNT1 A 0 A_JumpIfInventory("AEoDAssaultRifle",1,"Ammo")
	TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
	Goto Pickup+2
	TNT1 A 0 ACS_NamedExecute("s798",0,5,0,0)
	Fail
    Ammo:
	TNT1 A 0 A_GiveInventory("AEoDAssaultRifle",1)
	Stop
    }
}

ACTOR AEoDAssaultRifle : Weapon // 6069
{
+FLOORCLIP
+INVENTORY.IGNORESKILL
+CHEATNOTWEAPON
Weapon.AmmoType1 "AEClip"
Weapon.AmmoType2 "AEGrenade"
Weapon.AmmoGive1 32
Weapon.AmmoGive2 3
Weapon.AmmoUse1 1
Weapon.AmmoUse2 1
Obituary "%o was gunned by %k"
Inventory.PickupMessage "You got a M16 Assault Rifle."
Inventory.PickupSound "reilsss/weappickup/assaultrifle"
weapon.upsound "weapons/draw"
Scale 0.55
Tag "Unused"
States
{ 
Spawn: 
	R017 I 1
	Loop
Ready: 
	R017 A 1 A_WeaponReady 
	Loop 
Deselect: 
	TNT1 A 0 ACS_NamedExecute("s799",0,0,0,0)
	R017 A 1 A_Lower 
	TNT1 AA 0 A_Lower
	Loop 
Select: 
	DERP A 0 ACS_NamedExecute("s799",0,8,0,0)
	DERP A 1 A_Raise
	DERP AA 0 A_Raise 
	Loop 
Fire:
	TNT1 A 0 A_GunFlash
	TNT1 A 0 A_PlaySound("reilsss/weapons/m16fire2", CHAN_WEAPON, 1.0, 0)
	TNT1 A 0 //ACS_NamedExecute("s851",0,12,random(-10,10),random(-10,10))
	R017 B 2 Bright A_FireBullets(3, 2, 1, 10, "BulletDamagePuff", 1)
	TNT1 A 0 A_FireCustomMissile("GunSmallSmokeSpawner",0,0,3,8)
	R017 C 2 Bright //ACS_NamedExecute("s851",0,-12,0,0)
	TNT1 A 0 A_Recoil(0.5)
	TNT1 A 0 A_FireCustomMissile("ChGunCasing",-45+random(-13,13),0,4,3)
	TNT1 A 0 A_ReFire
	R017 F 2
	goto Ready
AltFire:
	R017 A 4
	TNT1 A 0 A_PlaySound("reilsss/weapons/m16grenade", CHAN_WEAPON, 1.0, 0)
	TNT1 A 0 //ACS_NamedExecute("s851",0,30,random(-13,13),random(-13,13))
	R017 D 4 Bright A_FireCustomMissile("AssaultGrenade", 0, 1, 5, 0) 
	R017 E 4 Bright //ACS_NamedExecute("s851",0,-30,random(-13,13),random(-13,13))
	TNT1 A 0 A_Recoil(3.5)
	TNT1 A 0 A_FireCustomMissile("GunSmokeSpawner",0,0,5,6)
	TNT1 A 0 A_PlaySound("reilsss/weapons/m16grenadereload", 8, 1.0, 0)
	R017 G 10
	R017 H 5
	R017 F 5
	goto Ready 
Flash: 
	TNT1 A 1 BRIGHT A_Light1 
	TNT1 A 1 BRIGHT A_Light2
	TNT1 A 2 BRIGHT A_Light0
	Stop 
} 
} 

actor AssaultGrenade
{
PROJECTILE
//+DOOMBOUNCE
//+HERETICBOUNCE
//+GRENADETRAIL
//+CANBOUNCEWATER
Radius 8
Height 8
Speed 30
Damage 30
Gravity 0.2
SeeSound "weapons/grenadebounce"
DeathSound "reilsss/weapons/m16grenadeexplosion"
Scale 0.45
States
{
Spawn:
	TNT1 A 0
	TNT1 A 0 ThrustThingZ(0,12,0,1)
	TNT1 A 0 A_Gravity
	GRNL A 1 Bright A_SpawnItemEx("QuakeGrenSmokeTrail",random(3,-3),random(3,-3),random(3,-3),0,0,0.8,0,32)
	Wait
Death:
	TNT1 A 0 A_CustomMissile("ExpQuakeSmall",0,0,0)
	TNT1 A 0 A_NoGravity
	TNT1 A 0 Bright A_Explode(160,128,1)
	TNT1 A 10 A_SpawnItemEx("NewExplosionMedium",0,0,0,0,0,0,0)
	Stop
}
}

Actor AssaultRifleDrop : CustomInventory
{
    Inventory.MaxAmount 1
    States
    {
    Use:
	TNT1 A 0
	TNT1 A 0 A_SpawnItemEx("DroppedAssaultRifle",0,0,32,8,0,0,0,32,0)
	Stop
    }
}

ACTOR DroppedAssaultRifle
{
    Radius 16
    Height 20
    Scale 0.55
    States
    {
    Spawn:
	R017 I 15
	TNT1 A 0 A_SpawnItemEx("AEoDAssaultRifleNoAmmo",0,0,0,0,0,0,0,48,0)
	Stop
    }
}

ACTOR AEoDAssaultRifleNoAmmo : AEoDAssaultRifleItem
{
    +FLOORCLIP
    +INVENTORY.IGNORESKILL
    Scale 0.55
    Inventory.Amount 1
    Inventory.PickupMessage "You got a M16 Assault Rifle."
    Inventory.PickupSound "reilsss/weappickup/assaultrifle"
    States
    {
    Spawn:
        R017 I -1
        Loop
    Pickup:
	TNT1 A 0 A_JumpIfInventory("Weapon5Count",3,"Nothing")
	TNT1 A 0 A_JumpIfInventory("AEClip",32,"Ammo")
	TNT1 A 0 A_JumpIfInventory("AEGrenade",3,"Ammo3")
	TNT1 A 0 A_GiveInventory("Weapon5Count",1)
	TNT1 A 0 A_GiveInventory("AssaultRifleDrop",1)
	TNT1 A 0 A_GiveInventory("AEoDAssaultRifle",1)
	TNT1 A 0 A_TakeInventory("AEClip",32)
	TNT1 A 0 A_TakeInventory("AEGrenade",3)
	TNT1 A 0 ACS_NamedExecute("s799",0,8,0,0)
	Stop
    Nothing:
	TNT1 A 0 A_JumpIfInventory("AEoDAssaultRifle",1,"Ammo")
	TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
	Goto Pickup+2
	TNT1 A 0 ACS_NamedExecute("s798",0,5,0,0)
	Fail
    Ammo:
	TNT1 A 0 A_JumpIfInventory("AEGrenade",3,1)
	Goto Ammo2
	TNT1 A 0 A_TakeInventory("AEClip",32)
	TNT1 A 0 A_TakeInventory("AEGrenade",3)
	TNT1 A 0 A_JumpIfInventory("AEoDAssaultRifle",1,2)
	TNT1 A 0 A_GiveInventory("Weapon5Count",1)
	TNT1 A 0 A_GiveInventory("AssaultRifleDrop",1)
	TNT1 A 0 A_GiveInventory("AEoDAssaultRifle",1)
	Stop
    Ammo2:
	TNT1 A 0 A_TakeInventory("AEClip",32)
	TNT1 A 0 A_GiveInventory("Weapon3Count",1)
	TNT1 A 0 A_GiveInventory("AssaultRifleDrop",1)
	TNT1 A 0 A_GiveInventory("AEoDAssaultRifle",1)
	TNT1 A 0 A_TakeInventory("AEGrenade",3)
	Stop
    Ammo3:
	TNT1 A 0 A_TakeInventory("AEGrenade",3)
	TNT1 A 0 A_GiveInventory("Weapon3Count",1)
	TNT1 A 0 A_GiveInventory("AssaultRifleDrop",1)
	TNT1 A 0 A_GiveInventory("AEoDAssaultRifle",1)
	TNT1 A 0 A_TakeInventory("AEClip",32)
	Stop
    }
}

//==================================================================================
//==================================================================================

//==================================================================================
//==================================================================================

ACTOR AEoDDemonStaffItem : CustomInventory 6009
{
    +FLOORCLIP
    +FLOATBOB
    +INVENTORY.IGNORESKILL
    Scale 0.75
    Inventory.Amount 1
    Inventory.PickupMessage "You got the Demon Staff!"
    Inventory.PickupSound "weaponbuild"
    States
    {
    Spawn:
        R022 H -1
        Loop
    Pickup:
	TNT1 A 0 A_JumpIfInventory("AEoDDemonStaff",1,"Ammo")
	TNT1 A 0 A_JumpIfInventory("Weapon5Count",3,"Nothing")
	TNT1 A 0 A_GiveInventory("Weapon5Count",1)
	TNT1 A 0 A_GiveInventory("DemonStaffDrop",1)
	TNT1 A 0 A_GiveInventory("AEoDDemonStaff",1)
	TNT1 A 0 ACS_NamedExecute("s799",0,9,0,0)
	Stop
    Nothing:
	TNT1 A 0 A_JumpIfInventory("AEoDDemonStaff",1,"Ammo")
	TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
	Goto Pickup+2
	TNT1 A 0 ACS_NamedExecute("s798",0,5,0,0)
	Fail
    Ammo:
	TNT1 A 0 A_GiveInventory("AEoDDemonStaff",1)
	Stop
    }
}

ACTOR AEoDDemonStaff : Weapon // 6009
{
+FLOORCLIP
+INVENTORY.IGNORESKILL
+FLOATBOB
Weapon.AmmoType1 "RedMana"
Weapon.AmmoType2 "RedMana"
Weapon.AmmoGive1 30
Weapon.AmmoUse1 1
Weapon.AmmoUse2 4
Inventory.PickupMessage "You got the Demon Staff!"
Inventory.PickupSound "weaponbuild"
weapon.upsound "weapons/draw"
Scale 0.75
Tag "Demonstaff"
States
{ 
Spawn: 
	R022 H 1
	Loop
Ready:
	R022 A 1 A_WeaponReady
	Loop
Deselect:
	TNT1 A 0 ACS_NamedExecute("s799",0,0,0,0)
	R022 A 1 A_Lower
	TNT1 AA 0 A_Lower
	Loop
Select:
	TNT1 A 0 ACS_NamedExecute("s799",0,9,0,0)
	R022 A 1 A_Raise
	TNT1 AA 0 A_Raise
	Loop
Fire:
	R022 B 4
Hold:
	TNT1 A 0 ACS_NamedExecute("s851",0,15,random(-10,10),random(-10,10))
	TNT1 A 0 A_PlaySound("reilsss/weapons/macefire", CHAN_WEAPON, 1.0, 0)
	R022 C 2 Bright A_FireCustomMissile("DemonStaffBall", random(4,-4), 1, 0, 0)
	R022 C 1 Bright ACS_NamedExecute("s851",0,-15,0,0)
	TNT1 A 0 ACS_NamedExecute("s851",0,15,random(-10,10),random(-10,10))
	TNT1 A 0 A_PlaySound("reilsss/weapons/macefire", CHAN_WEAPON, 1.0, 0)
	R022 D 2 Bright A_FireCustomMissile("DemonStaffBall", random(4,-4), 1, 0, 0)
	R022 D 1 Bright ACS_NamedExecute("s851",0,-15,0,0)
	TNT1 A 0 ACS_NamedExecute("s851",0,15,random(-10,10),random(-10,10))
	TNT1 A 0 A_PlaySound("reilsss/weapons/macefire", CHAN_WEAPON, 1.0, 0)
	R022 E 2 Bright A_FireCustomMissile("DemonStaffBall", random(4,-4), 1, 0, 0)
	R022 E 1 Bright ACS_NamedExecute("s851",0,-15,0,0)
	TNT1 A 0 ACS_NamedExecute("s851",0,15,random(-10,10),random(-10,10))
	TNT1 A 0 A_PlaySound("reilsss/weapons/macefire", CHAN_WEAPON, 1.0, 0)
	R022 F 2 Bright A_FireCustomMissile("DemonStaffBall", random(4,-4), 1, 0, 0)
	R022 F 1 Bright ACS_NamedExecute("s851",0,-15,0,0)
	R022 G 2
	R022 G 1 A_Recoil(0.3)
	TNT1 A 0 A_ReFire
	R022 BAA 4
	Goto Ready
AltFire:
	R022 B 4
AltHold:
	R022 CD 4
	TNT1 A 0 ACS_NamedExecute("s851",0,70,random(-10,10),random(-10,10))
	TNT1 A 0 A_PlaySound("reilsss/weapons/macefire", CHAN_WEAPON, 1.0, 0)
	R022 E 4 Bright A_FireCustomMissile("DemonStaffBall4", 0, 1, 0, 0)	//really damages if you know how to use it
	TNT1 A 0 Bright ACS_NamedExecute("s851",0,-70,0,0)
	R022 F 4
	TNT1 A 0 A_Recoil(0.3)
	R022 G 4
	R022 BA 6 A_ReFire
	Goto Ready
}
}

//-------------------------------------------------------------------------
ACTOR DemonStaffBall
{
Projectile
+CANBOUNCEWATER
-NOGRAVITY
+DONTFALL
DontHurtShooter
DamageType "AEMagic"
Gravity 0.25
Scale 0.45
Radius 8
Height 6
Speed 20
Damage 16
BounceType "Doom"
BounceFactor 0.7
BounceSound "painkiller/weapon/boltgun/GrenadeBounce"
States
{
Spawn:
	TNT1 a 0
	TNT1 A 0 ThrustThingZ(0,random(5,8),0,1)
	R022 PPP 1 A_SpawnItemEx("DemStaff1Trail1",0,0,0,0,0,0,0,32)
	R022 QQQ 1 A_SpawnItemEx("DemStaff1Trail2",0,0,0,0,0,0,0,32)
	Goto Spawn+2
Death:
	TNT1 A 0 A_ChangeFlag("NOGRAVITY",1)
	TNT1 A 0 A_SpawnItemEx("MonExplosionSmallTooSimple",0,0,0,0,0,0,0,32)
	TNT1 A 0 A_PlaySound("painkiller/weapon/boltgun/GrenExplo")
	R022 R 4 BRIGHT
	R022 STUV 4 BRIGHT
	Stop
}
}

Actor DemStaff1Trail1
{
	+NOINTERACTION
	RenderStyle Translucent
	Alpha 0.5
	Scale 0.45
	States
	{
	Spawn:
		R022 P 2 A_FadeOut(0.07)
		Loop
	}
}
Actor DemStaff1Trail2 :	DemStaff1Trail1
{
	States
	{
	Spawn:
		R022 Q 2 A_FadeOut(0.07)
		Loop
	}
}

//-------------------------------------------------------------------------
ACTOR DemonStaffBallb : DemonStaffBall
{
States
{
Spawn:
	R022 PQPQ 4
	TNT1 A 0 A_CustomMissile("DemonStaffBall2b",0+Random(0,5),0+Random(1,-1),0+Random(-150,150))
	Loop
Death:
	TNT1 A 0 A_PlaySound("painkiller/weapon/boltgun/GrenExplo")
	R022 R 4 BRIGHT
	R022 STUV 4 BRIGHT
	Stop
}
}

ACTOR DemonStaffBall2
{
Projectile
+DOOMBOUNCE
+CANBOUNCEWATER
-NOGRAVITY
+DONTFALL
DontHurtShooter
DamageType "AEMagic"
BounceFactor 0.6
Gravity 0.45
Speed 16
Damage 6
Gravity 0.125
SeeSound "painkiller/weapon/boltgun/GrenadeBounce"
States
{
Spawn:
	R022 IJ 4 BRIGHT
	Loop
Death:
	TNT1 A 0 A_PlaySound("painkiller/weapon/boltgun/GrenExplo")
	R022 K 4 BRIGHT
	R022 LMNO 4 BRIGHT
	Stop
}
}

ACTOR DemonStaffBall2b : DemonStaffBall2
{
States
{
Spawn:
	R022 IJIJIJIJ 4 BRIGHT
	TNT1 A 0 A_CustomMissile("DemonStaffBall3",0+Random(0,5),0+Random(1,-1),0+Random(-150,150))
	Loop
Death:
	TNT1 A 0 A_PlaySound("painkiller/weapon/boltgun/GrenExplo")
	R022 K 4 BRIGHT
	R022 LMNO 4 BRIGHT
	Stop
}
}

ACTOR DemonStaffBall3
{
Projectile
+DOOMBOUNCE
+CANBOUNCEWATER
-NOGRAVITY
DontHurtShooter
BounceFactor 0.6    
DamageType "AEMagic"
Speed 14
Damage 4
Gravity 0.125
SeeSound "painkiller/weapon/boltgun/GrenadeBounce"
States
{
Spawn:
	R022 IJ 2
	Loop
Death:
	TNT1 A 0 A_PlaySound("painkiller/weapon/boltgun/GrenExplo")
	R022 K 4 BRIGHT
	R022 LMNO 4 BRIGHT
	Stop
}
}
//-------------------------------------------------------
ACTOR DemonStaffBall4
{
Projectile
-NOGRAVITY
+TELESTOMP
+RIPPER	RipperLevel 1
+NODAMAGETHRUST
+CANBOUNCEWATER
+NOBOSSRIP
DamageType "AEMagic"
Radius 8
Height 6
Speed 22
BounceType Hexen
BounceCount 4
BounceFactor 0.8
Damage 22
Gravity 0.6
Scale 1.2
BounceSound "dune/bounce"
States
{
Spawn:
	R023 AAA 1 A_SpawnItemEx("DemStaBll4Trail1",0,0,0,0,0,0,0,32)
	R023 BBB 1 A_SpawnItemEx("DemStaBll4Trail2",0,0,0,0,0,0,0,32)
	R023 CCC 1 A_SpawnItemEx("DemStaBll4Trail3",0,0,0,0,0,0,0,32)
	Loop
Death:
	TNT1 A 0 A_ChangeFlag("NOGRAVITY",1)
	TNT1 A 0 A_SpawnItemEx("MonExplosionMediumSimple",0,0,0,0,0,0,0,32)
	TNT1 A 0 A_PlaySound("quake4/Misc/RocketExplo")
	R023 D 4 BRIGHT A_Explode(140,128,0)
	R023 EFGH 4 BRIGHT
	Stop
}
}


Actor DemStaBll4Trail1
{
	+NOINTERACTION
	RenderStyle Translucent
	Alpha 0.5
	Scale 1.2
	States
	{
	Spawn:
		R023 A 2 A_FadeOut(0.025)
		Loop
	}
}
Actor DemStaBll4Trail2 : DemStaBll4Trail1
{
	States
	{
	Spawn:
		R023 B 2 A_FadeOut(0.03)
		Loop
	}
}
Actor DemStaBll4Trail3 : DemStaBll4Trail1
{
	States
	{
	Spawn:
		R023 C 2 A_FadeOut(0.03)
		Loop
	}
}

Actor DemonStaffDrop : CustomInventory
{
    Inventory.Amount 1
    Inventory.MaxAmount 1
    States
    {
    Use:
	TNT1 A 0
	TNT1 A 0 A_SpawnItemEx("DroppedDemonStaff",0,0,32,8,0,0,0,32,0)
	Stop
    }
}

ACTOR DroppedDemonStaff
{
    Radius 16
    Height 20
    Scale 0.75
    States
    {
    Spawn:
	R022 H 15
	TNT1 A 0 A_SpawnItemEx("AEoDDemonStaffNoAmmo",0,0,0,0,0,0,0,48,0)
	Stop
    }
}

ACTOR AEoDDemonStaffNoAmmo : AEoDDemonStaffItem
{
    +FLOORCLIP
    +FLOATBOB
    +INVENTORY.IGNORESKILL
    Scale 0.75
    Inventory.Amount 1
    Inventory.PickupMessage "You got the Demon Staff!"
    Inventory.PickupSound "weaponbuild"
    States
    {
    Spawn:
        R022 H -1
        Loop
    Pickup:
	TNT1 A 0 A_JumpIfInventory("Weapon5Count",3,"Nothing")
	TNT1 A 0 A_JumpIfInventory("RedMana",30,"Ammo")
	TNT1 A 0 A_GiveInventory("Weapon5Count",1)
	TNT1 A 0 A_GiveInventory("DemonStaffDrop",1)
	TNT1 A 0 A_GiveInventory("AEoDDemonStaff",1)
	TNT1 A 0 A_TakeInventory("RedMana",30)
	TNT1 A 0 ACS_NamedExecute("s799",0,9,0,0)
	Stop
    Nothing:
	TNT1 A 0 A_JumpIfInventory("AEoDDemonStaff",1,"Ammo")
	TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
	Goto Pickup+2
	TNT1 A 0 ACS_NamedExecute("s798",0,5,0,0)
	Fail
    Ammo:
	TNT1 A 0 A_TakeInventory("RedMana",30)
	TNT1 A 0 A_JumpIfInventory("AEoDDemonStaff",1,2)
	TNT1 A 0 A_GiveInventory("Weapon5Count",1)
	TNT1 A 0 A_GiveInventory("DemonStaffDrop",1)
	TNT1 A 0 A_GiveInventory("AEoDDemonStaff",1)
	Stop
    }
}

//==================================================================================
//==================================================================================

//==================================================================================
//==================================================================================

ACTOR AEoDHyperblasterItem : CustomInventory 6052
{
    +FLOORCLIP
    +INVENTORY.IGNORESKILL
    Scale 0.6
    Inventory.Amount 1
    Inventory.PickupMessage "You got the Hyperblaster!"
    Inventory.PickupSound "reilsss/weappickup/blasterrifle"
    States
    {
    Spawn:
        R020 M -1
        Loop
    Pickup:
	TNT1 A 0 A_JumpIfInventory("AEoDHyperblaster",1,"Ammo")
	TNT1 A 0 A_JumpIfInventory("Weapon5Count",3,"Nothing")
	TNT1 A 0 A_GiveInventory("Weapon5Count",1)
	TNT1 A 0 A_GiveInventory("HyperblasterDrop",1)
	TNT1 A 0 A_GiveInventory("AEoDHyperblaster",1)
	TNT1 A 0 ACS_NamedExecute("s799",0,10,0,0)
	Stop
    Nothing:
	TNT1 A 0 A_JumpIfInventory("AEoDHyperblaster",1,"Ammo")
	TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
	Goto Pickup+2
	TNT1 A 0 ACS_NamedExecute("s798",0,5,0,0)
	Fail
    Ammo:
	TNT1 A 0 A_GiveInventory("AEoDHyperBlaster",1)
	Stop
    }
}

ACTOR AEoDHyperblaster : Weapon // 6052
{
+FLOORCLIP
+INVENTORY.IGNORESKILL
+CHEATNOTWEAPON
Weapon.AmmoType1 "AECell"
Weapon.AmmoType2 "AECell"
Weapon.AmmoGive1 40
Weapon.AmmoUse1 1
Weapon.AmmoUse2 10
Inventory.PickupMessage "You got the Hyperblaster!"
Inventory.PickupSound "reilsss/weappickup/blasterrifle"
Weapon.upsound "weapons/plasma/draw"
Scale 0.6
Tag "Hyperblaster"
States
{ 
Spawn: 
	R020 M 1
	Loop
Ready:
	TNT1 A 0 A_PlaySound("reilsss/weapons/plasmaidle1", 6, 1.0, 1)
	R020 A 1 A_WeaponReady 
	Goto Ready+1
Deselect:
	TNT1 A 0 A_StopSound(6)
	TNT1 A 0 ACS_NamedExecute("s799",0,0,0,0)
	R020 A 1 A_Lower 
	TNT1 AA 0 A_Lower
	Goto Deselect+1
Select: 
	TNT1 A 0 ACS_NamedExecute("s799",0,10,0,0)
	R020 A 1 A_Raise
	TNT1 AA 0 A_Raise 
	Loop 
Fire:
	TNT1 A 0 ACS_NamedExecute("s851",0,30,random(-10,10),0)
	TNT1 A 0 A_PlaySound("reilsss/weapons/hyperblasterfire", CHAN_WEAPON, 0.7, 0)
	R020 B 1 Bright A_FireCustomMissile("HyperBlasterRed", 0, 3, 5, 0)
	R020 B 1 Bright ACS_NamedExecute("s851",0,-30,0,0)
	TNT1 A 0 A_ReFire
	R020 F 2 Bright
	R020 G 2 Bright A_FireCustomMissile("GunSmallSmokeSpawner",0,0,4,6.5)
	R020 A 10
	Goto Ready
Hold:
	TNT1 A 0 ACS_NamedExecute("s851",0,30,random(-10,10),0)
	TNT1 A 0 A_PlaySound("reilsss/weapons/hyperblasterfire", CHAN_WEAPON, 0.7, 0)
	TNT1 A 0 Bright A_FireCustomMissile("HyperBlasterRed", 0, 0, 1, 0)
	R020 C 1 Bright A_FireCustomMissile("HyperBlasterRed", 0, 1, 9, 0)
	TNT1 A 0 A_FireCustomMissile("GunSmallSmokeSpawner",0,0,1,6.5)
	R020 C 1 Bright ACS_NamedExecute("s851",0,-30,0,0)
	R020 D 1 Bright
	TNT1 A 0 ACS_NamedExecute("s851",0,30,random(-10,10),0)
	TNT1 A 0 A_PlaySound("reilsss/weapons/hyperblasterfire", CHAN_WEAPON, 0.7, 0)
	R020 E 1 Bright A_FireCustomMissile("HyperBlasterRed", 0, 1, 5, 0)
	TNT1 A 0 A_FireCustomMissile("GunSmallSmokeSpawner",0,0,1,6.5)
	TNT1 A 0 A_FireCustomMissile("GunSmallSmokeSpawner",0,0,6,6.5)
	R020 E 1 Bright ACS_NamedExecute("s851",0,-30,0,0)
	R020 D 1 Bright
	TNT1 A 0 A_ReFire
	
	R020 F 2 Bright
	R020 G 2 Bright A_FireCustomMissile("GunSmallSmokeSpawner",0,0,4,6.5)
	R020 A 10
	Goto Ready
AltFire:
	TNT1 A 0 A_StopSound(6)
	TNT1 A 0 Bright A_FireCustomMissile("HyperBlasterBlue2", 0, 1, 4, 0)
	TNT1 A 0 Bright A_FireCustomMissile("HyperBlasterBlue2", 0, 0, 6, 0)
	TNT1 A 0 Bright A_FireCustomMissile("HyperBlasterBlue2", 0, 0, 8, 0)
	TNT1 A 0 ACS_NamedExecute("s851",0,50,random(-10,10),random(-10,10))
	R020 H 1 Bright A_PlaySound("reilsss/weapons/hyperblasterfire", 7, 1.0, 0)
	R020 H 1 Bright A_PlaySound("reilsss/weapons/hyperblasterfire", 8, 1.0, 0)
	R020 H 1 Bright A_PlaySound("reilsss/weapons/hyperblasterfire", CHAN_WEAPON, 1.0, 0)
	R020 H 1 Bright
	R020 I 2 Bright
	TNT1 A 0 A_FireCustomMissile("GunSmallSmokeSpawner",0,0,1,6.5)
	TNT1 A 0 A_FireCustomMissile("GunSmallSmokeSpawner",0,0,3.5,6.5)
	TNT1 A 0 A_FireCustomMissile("GunSmallSmokeSpawner",0,0,6,6.5)
	R020 I 2 Bright
	R020 A 3 A_Recoil(0.8)
	TNT1 A 0 A_PlaySound("reilsss/weapons/hyperblasterspinoff", 7, 1.0, 0)
	R020 J 5 ACS_NamedExecute("s851",0,-20,0,0)
	R020 K 5 ACS_NamedExecute("s851",0,-20,0,0)
	R020 L 5 ACS_NamedExecute("s851",0,-10,0,0)
	R020 A 12 A_ReFire
	Goto Ready
Flash: 
	TNT1 A 1 BRIGHT A_Light1 
	TNT1 A 1 BRIGHT A_Light2
	TNT1 A 2 BRIGHT A_Light0
	Stop 
} 
}


//**********************************************

Actor HyperBlasterRed
{
	Projectile
	Radius 8
	Height 12
	Speed 27
	RenderStyle Add
	SeeSound ""
	Translation "80:95=208:223","96:111=176:191"
	Damage 5
	Scale 0.4
	Decal RailgunScorch
	DamageType "Plasma"
	States
	{
	Spawn:
		LBA2 A 0 
		LBA2 A 0 A_Jump(128,"NoLight")
		LBA2 A 2 Light("OrangeMediumFlicker3") Bright A_SpawnItemEx("HyperBlasterRedTrail",0,0,0,0,0,0,0,32)
		Wait
	NoLight:
		LBA2 A 2 Bright A_SpawnItemEx("HyperBlasterRedTrail",0,0,0,0,0,0,0,32)
		Wait
	Death:
		TNT1 A 4 A_SpawnItemEx("HyperBlasterRedExplo",0,0,0,0,0,0,0,32)
		Stop
	}
}

Actor HyperBlasterRedTrail
{
	+NOINTERACTION
	Translation "112:120=208:223","120:127=176:191"
	RenderStyle Add
	Alpha 0.4
	Scale 0.17
	States
	{	
	Spawn:
		ACID E 1 A_FadeOut(0.05)
		Wait
	}
}


Actor HyperBlasterRedExplo 
{
	+NOINTERACTION
	RenderStyle Add
	Translation "169:178=208:223"
	Scale 0.4
	States
	{
	Spawn:
		STAR F 2 Light("OrangeSmallFlicker1") Bright A_FadeOut(0.04)
		STAR GHIJ 2 Light("OrangeMediumFlicker3") Bright A_FadeOut(0.04)
		STAR K 2 Light("OrangeSmallFlicker1") Bright A_FadeOut(0.04)
		STAR L 2 Light("OrangeSmallFlicker2") Bright A_FadeOut(0.04)
		STAR M 2 Light("OrangeSmallFlicker2") Bright A_FadeOut(0.04)
		STAR N 2 Light("OrangeSmallFlicker3") Bright A_FadeOut(0.04)
		STAR O 2 Light("OrangeSmallFlicker3") Bright A_FadeOut(0.04)
		Stop
	}
}



ACTOR HyperBlasterRedHit : RedParticleFountain
{
Decal RailgunScorch
States
{
Spawn:
	TNT1 A 8
	Stop
}
}


//------------------------------------------------------------------
ACTOR HyperBlasterBlue
{
	PROJECTILE
	Radius 3
	Height 4
	Speed 40
	Damage 4
	Decal BlueRailgunScorch
	DamageType "Plasma"
	Obituary "%o got blasted by %k!"
	Translation "0:255=%[0,0,0]:[0.4,0.4,1.0]"
	DeathSound "q2weapon/laserhit"
	Scale 0.4
	States
	{
	Spawn:
		LBA2 A 2 Light("BlueMediumFlicker3") Bright A_SpawnItemEx("HyperBlasterBlueTrail",0,0,0,0,0,0,0,33)
		Wait
	Death:
		TNT1 AAA 0 A_SpawnItemEx ("HyperBlasterBlueExplo",0,0,0,0,0,0,0,33)
		TNT1 A 35
		Stop
	}
}

Actor HyperBlasterBlueTrail
{
	+NOINTERACTION
	RenderStyle Add
	Alpha 0.8
	Scale 0.17
	States
	{	
	Spawn:
		ACID E 1 A_FadeOut(0.05)
		Wait
	}
}

Actor HyperBlasterBlueExplo 
{
	+NOINTERACTION
	RenderStyle Add
	Translation "169:178=208:223"
	Scale 0.4
	States
	{
	Spawn:
		STAR F 2 Light("BlueSmallFlicker1") Bright A_FadeOut(0.04)
		STAR GHIJ 2 Light("BlueMediumFlicker3") Bright A_FadeOut(0.04)
		STAR K 2 Light("BlueSmallFlicker1") Bright A_FadeOut(0.04)
		STAR L 2 Light("BlueSmallFlicker2") Bright A_FadeOut(0.04)
		STAR M 2 Light("BlueSmallFlicker2") Bright A_FadeOut(0.04)
		STAR N 2 Light("BlueSmallFlicker3") Bright A_FadeOut(0.04)
		STAR O 2 Light("BlueSmallFlicker3") Bright A_FadeOut(0.04)
		Stop
	}
}


Actor HyperBlasterBlue2 : HyperBlasterBlue
{
States
{
Spawn:
	LBA2 A 2 Bright A_SpawnItemEx("HyperBlasterBlueTrail",0,0,0,0,0,0,0,33)
	Wait
Crash:
	TNT1 AAA 0 A_SpawnItemEx("HyperBlasterBlue3",0,0,0,34,0,random(1,10),random(0,359),0)
	TNT1 A 0 A_SpawnItemEx("NewPuff1",0,0,0,0,0,0,0,32)
	TNT1 A 0
	Stop
Xdeath:
	TNT1 AAA 0 A_SpawnItemEx("HyperBlasterBlue3",0,0,0,34,0,random(1,10),random(0,359),0)
	TNT1 A 0 A_SpawnItemEx("NewBlood",0,0,0,0,0,0,0,32)
	TNT1 A 0
	Stop
Death:
	TNT1 AAA 0 A_SpawnItemEx("HyperBlasterBlue3",0,0,0,34,0,random(1,10),random(0,359),0)
	TNT1 A 0 A_SpawnItemEx("NewPuff1",0,0,0,0,0,0,0,32)
	TNT1 A 0
	Stop
}
}

Actor HyperBlasterBlue3 : HyperBlasterBlue
{
States
{
Spawn:
	LBA2 A 2 Bright A_SpawnItemEx("HyperBlasterBlueTrail",0,0,0,0,0,0,0,33)
	Wait
Crash:
	TNT1 AAA 0 A_SpawnItemEx("HyperBlasterBlue4",0,0,0,34,0,random(1,10),random(0,359),0)
	TNT1 A 0 A_SpawnItemEx("NewPuff1",0,0,0,0,0,0,0,32)
	TNT1 A 0
	Stop
Xdeath:
	TNT1 AAA 0 A_SpawnItemEx("HyperBlasterBlue4",0,0,0,34,0,random(1,10),random(0,359),0)
	TNT1 A 0 A_SpawnItemEx("NewBlood",0,0,0,0,0,0,0,32)
	TNT1 A 0
	Stop
Death:
	TNT1 AAA 0 A_SpawnItemEx("HyperBlasterBlue4",0,0,0,34,0,random(1,10),random(0,359),0)
	TNT1 A 0 A_SpawnItemEx("NewPuff1",0,0,0,0,0,0,0,32)
	TNT1 A 0
	Stop
}
}

Actor HyperBlasterBlue4 : HyperBlasterBlue
{
States
{
Spawn:
	LBA2 A 2 Bright A_SpawnItemEx("HyperBlasterBlueTrail",0,0,0,0,0,0,0,33)
	Wait
Crash:
	TNT1 AAA 0 A_SpawnItemEx("HyperBlasterBlue",0,0,0,34,0,random(1,10),random(0,359),0)
	TNT1 A 0 A_SpawnItemEx("NewPuff1",0,0,0,0,0,0,0,32)
	TNT1 A 0
	Stop
Xdeath:
	TNT1 AAA 0 A_SpawnItemEx("HyperBlasterBlue",0,0,0,34,0,random(1,10),random(0,359),0)
	TNT1 A 0 A_SpawnItemEx("NewBlood",0,0,0,0,0,0,0,32)
	TNT1 A 0
	Stop
Death:
	TNT1 AAA 0 A_SpawnItemEx("HyperBlasterBlue",0,0,0,34,0,random(1,10),random(0,359),0)
	TNT1 A 0 A_SpawnItemEx("NewPuff1",0,0,0,0,0,0,0,32)
	TNT1 A 0
	Stop
}
}

ACTOR HyperBlasterBlueHit : BlueParticleFountain
{
Decal BlueRailgunScorch
States
{
Spawn:
	TNT1 A 8
	Stop
}
}


Actor HyperBlasterDrop : CustomInventory
{
    Inventory.MaxAmount 1
    States
    {
    Use:
	TNT1 A 0
	TNT1 A 0 A_StopSound(6)
	TNT1 A 0 A_SpawnItemEx("DroppedHyperBlaster",0,0,32,8,0,0,0,32,0)
	Stop
    }
}

ACTOR DroppedHyperBlaster
{
    Radius 16
    Height 20
    Scale 0.6
    States
    {
    Spawn:
	R020 M 15
	TNT1 A 0 A_SpawnItemEx("AEoDHyperBlasterNoAmmo",0,0,0,0,0,0,0,48,0)
	Stop
    }
}

ACTOR AEoDHyperBlasterNoAmmo : AEoDHyperBlasterItem
{
    +FLOORCLIP
    +INVENTORY.IGNORESKILL
    Scale 0.6
    Inventory.Amount 1
    Inventory.PickupMessage "You got the Hyperblaster!"
    Inventory.PickupSound "reilsss/weappickup/blasterrifle"
    States
    {
    Spawn:
        R020 M -1
        Loop
    Pickup:
	TNT1 A 0 A_JumpIfInventory("Weapon5Count",3,"Nothing")
	TNT1 A 0 A_JumpIfInventory("AECell",40,"Ammo")
	TNT1 A 0 A_GiveInventory("Weapon5Count",1)
	TNT1 A 0 A_GiveInventory("HyperBlasterDrop",1)
	TNT1 A 0 A_GiveInventory("AEoDHyperBlaster",1)
	TNT1 A 0 A_TakeInventory("AECell",40)
	TNT1 A 0 ACS_NamedExecute("s799",0,10,0,0)
	Stop
    Nothing:
	TNT1 A 0 A_JumpIfInventory("AEoDHyperBlaster",1,"Ammo")
	TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
	Goto Pickup+2
	TNT1 A 0 ACS_NamedExecute("s798",0,5,0,0)
	Fail
    Ammo:
	TNT1 A 0 A_TakeInventory("AECell",40)
	TNT1 A 0 A_JumpIfInventory("AEoDHyperBlaster",1,2)
	TNT1 A 0 A_GiveInventory("Weapon5Count",1)
	TNT1 A 0 A_GiveInventory("HyperBlasterDrop",1)
	TNT1 A 0 A_GiveInventory("AEoDHyperBlaster",1)
	Stop
    }
}

//==================================================================================
//==================================================================================

//==================================================================================
//==================================================================================

ACTOR AEoDNailgunMK2Item : CustomInventory 6103
{
    +FLOORCLIP
    +INVENTORY.IGNORESKILL
    Scale 0.95
    Inventory.Amount 1
    Inventory.PickupMessage "You got a Nailgun MK2."
    Inventory.PickupSound "reilsss/weappickup/nailgun"
    States
    {
    Spawn:
        R021 F -1
        Loop
    Pickup:
	TNT1 A 0 A_JumpIfInventory("AEoDNailgunMK2",1,"Ammo")
	TNT1 A 0 A_JumpIfInventory("Weapon5Count",3,"Nothing")
	TNT1 A 0 A_GiveInventory("Weapon5Count",1)
	TNT1 A 0 A_GiveInventory("NailgunMK2Drop",1)
	TNT1 A 0 A_GiveInventory("AEoDNailgunMK2",1)
	TNT1 A 0 ACS_NamedExecute("s799",0,11,0,0)
	Stop
    Nothing:
	TNT1 A 0 A_JumpIfInventory("AEoDNailgunMK2",1,"Ammo")
	TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
	Goto Pickup+2
	TNT1 A 0 ACS_NamedExecute("s798",0,5,0,0)
	Fail
    Ammo:
	TNT1 A 0 A_GiveInventory("AEoDNailGunMK2",1)
	Stop
    }
}

ACTOR AEoDNailgunMK2 : Weapon // 6103
{
+FLOORCLIP
+INVENTORY.IGNORESKILL
+CHEATNOTWEAPON
Weapon.AmmoType1 "AENails"
Weapon.AmmoType2 "AENails"
Weapon.AmmoGive1 32
Weapon.AmmoUse1 2
Weapon.AmmoUse2 3
Obituary "%o was nailed by %k"
Inventory.PickupMessage "You got a Nailgun MK2."
Inventory.PickupSound "reilsss/weappickup/nailgun"
weapon.upsound "weapons/draw"
Scale 0.95
Tag "Nailgun MK2"
States
{ 
Spawn: 
	R021 F 1
	Loop
Ready: 
	R021 A 1 A_WeaponReady 
	Loop 
Deselect:
	TNT1 A 0 ACS_NamedExecute("s799",0,0,0,0)
	R021 A 1 A_Lower 
	TNT1 AA 0 A_Lower
	Loop 
Select: 
	TNT1 A 0 ACS_NamedExecute("s799",0,11,0,0)
	R021 A 1 A_Raise
	TNT1 AA 0 A_Raise 
	Loop 
Fire:
	R021 B 2 A_GunFlash
	TNT1 A 0 A_PlaySound("reilsss/weapons/nailgunmk2fire", CHAN_WEAPON, 1.0, 0)
	TNT1 A 0 ACS_NamedExecute("s851",0,30,random(-10,10),random(-10,10))
	R021 C 2 Bright A_FireCustomMissile("MK2Nail2", 0, 1, 6, 3) 
	TNT1 A 0 A_FireCustomMissile("GunSmallSmokeSpawner",0,0,5,7)
	R021 D 2 Bright ACS_NamedExecute("s851",0,-30,0,0)
	R021 E 2 A_Recoil(0.5)
	TNT1 A 0 A_ReFire
	goto Ready
AltFire:
	R021 B 2 A_GunFlash
	TNT1 A 0 A_PlaySound("reilsss/weapons/nailgunmk2fire", CHAN_WEAPON, 1.0, 0)
	TNT1 A 0 ACS_NamedExecute("s851",0,30,random(-10,10),random(-10,10))
	R021 C 2 Bright A_FireCustomMissile("MK2Nail3", 0, 1, 6, 4) 
	TNT1 A 0 A_FireCustomMissile("GunSmallSmokeSpawner",0,0,5,7)
	R021 D 3 Bright ACS_NamedExecute("s851",0,-30,0,0)
	R021 E 4 A_Recoil(0.5)
	TNT1 A 0 A_ReFire
	goto Ready 
Flash: 
	TNT1 A 1 BRIGHT A_Light1 
	TNT1 A 1 BRIGHT A_Light2
	TNT1 A 2 BRIGHT A_Light0
	Stop 
} 
} 

actor MK2Nail : FastProjectile
{
Projectile
+RIPPER	RipperLevel 1
Radius 6
Height 6
Speed 30
Damage (random(1,2))
DeathSound "weapons/nailpuff"
DamageType "AEBullet"
Scale 0.24
MissileHeight 8
MissileType "BoltTrail"
States
{
Spawn:
	R021 G 1
	Loop
Death:
	TNT1 A 0 A_SpawnItemEx("NewPuff1",0,0,0,0,0,0,0,32)
	TNT1 A 0 A_Jump(128,1)
	TNT1 A 0 A_PlaySound("weapons/nailricochet")
	TNT1 A 3
	Stop
}
}


Actor MK2Nail2  : FastProjectile
{
Projectile
+RIPPER	RipperLevel 1
+NODAMAGETHRUST
Radius 4
Height 4
Speed 30
//Damage (random(4,32))
Damage (random(2,6))
DeathSound "weapons/nailpuff"
DamageType "AEBullet"
MissileType "PerforatorNailTrail"	//see WepClass7.AED
MissileHeight 8
Scale 0.5
States
{
Spawn:
	R021 G 0 
	R021 G 0 A_Jump(64,"SkipFlag")
	R021 G 0 A_ChangeFlag("PAINLESS",1)
SkipFlag:
	R021 G 1 A_SpawnItem("MK2NailTrail")
	Loop
Crash:
	TNT1 AAAAAA 0 A_SpawnItemEx("MK2Nail",0,0,0,34,0,random(1,10),random(0,359),0)
	TNT1 A 0 A_SpawnItemEx("NewPuff1",0,0,0,0,0,0,0,32)
	TNT1 A 3
	Stop
Xdeath:
	TNT1 AAAAAA 0 A_SpawnItemEx("MK2Nail",0,0,0,34,0,random(1,10),random(0,359),0)
	TNT1 A 0 A_SpawnItemEx("NewBlood",0,0,0,0,0,0,0,32)
	TNT1 A 3
	Stop
Death:
	TNT1 AAAAAA 0 A_SpawnItemEx("MK2Nail",0,0,0,34,0,random(1,10),random(0,359),0)
	TNT1 A 0 A_SpawnItemEx("NewPuff1",0,0,0,0,0,0,0,32)
	TNT1 A 3
	Stop
}
}

Actor MK2NailTrail
{
	+NOINTERACTION
	Scale 0.5
	RenderStyle Translucent
	Alpha 0.67
	States
	{
	Spawn:
		TNT1 A 0
		PUF2 ACEGIKMOQSUWYZ 1 A_FadeOut
		Wait
	}
}


actor MK2Nail3
{
+FORCERADIUSDMG
Projectile
Radius 4
Height 4
Speed 30
Damage 13
DeathSound "painkiller/weapon/boltgun/GrenExplo"
Scale 0.6
States
{
Spawn:
	R021 G 1 A_spawnitemex("MK2NailTrail",0,0,2,0,0,0,0,0)
	Loop
Death:
	TNT1 A 0 A_SpawnItemEx("NewExplosionSmall",0,0,0,0,0,0,0,32)
	TNT1 A 0 A_Explode(64,64)
	TNT1 A 1
	Stop
}
}

ACTOR MK2Nail3Puff
{
+NOCLIP
+NOGRAVITY
+PUFFONACTORS
Renderstyle Translucent
Alpha 0.8
Scale 0.20
States
{
Spawn:
	EXPL B 2 Bright A_Pain
	EXPL C 1 A_PlaySound("weapons/rockexplo")
	EXPL DEFGHIJKLMNOPQRSTU 1 Bright
	Stop
}
}

Actor NailgunMK2Drop : CustomInventory
{
    Inventory.MaxAmount 1
    States
    {
    Use:
	TNT1 A 0
	TNT1 A 0 A_SpawnItemEx("DroppedNailgunMK2",0,0,32,8,0,0,0,32,0)
	Stop
    }
}

ACTOR DroppedNailgunMK2
{
    Radius 16
    Height 20
    Scale 0.95
    States
    {
    Spawn:
	R021 F 15
	TNT1 A 0 A_SpawnItemEx("AEoDNailgunMK2NoAmmo",0,0,0,0,0,0,0,48,0)
	Stop
    }
}

ACTOR AEoDNailgunMK2NoAmmo : AEoDNailgunMK2Item
{
    +FLOORCLIP
    +INVENTORY.IGNORESKILL
    Scale 0.95
    Inventory.Amount 1
    Inventory.PickupMessage "You got a Nailgun MK2."
    Inventory.PickupSound "reilsss/weappickup/nailgun"
    States
    {
    Spawn:
        R021 F -1
        Loop
    Pickup:
	TNT1 A 0 A_JumpIfInventory("Weapon5Count",3,"Nothing")
	TNT1 A 0 A_JumpIfInventory("AENails",32,"Ammo")
	TNT1 A 0 A_GiveInventory("Weapon5Count",1)
	TNT1 A 0 A_GiveInventory("NailgunMK2Drop",1)
	TNT1 A 0 A_GiveInventory("AEoDNailgunMK2",1)
	TNT1 A 0 A_TakeInventory("AENails",32)
	TNT1 A 0 ACS_NamedExecute("s799",0,11,0,0)
	Stop
    Nothing:
	TNT1 A 0 A_JumpIfInventory("AEoDNailgunMK2",1,"Ammo")
	TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
	Goto Pickup+2
	TNT1 A 0 ACS_NamedExecute("s798",0,5,0,0)
	Fail
    Ammo:
	TNT1 A 0 A_TakeInventory("AENails",32)
	TNT1 A 0 A_JumpIfInventory("AEoDNailgunMK2",1,2)
	TNT1 A 0 A_GiveInventory("Weapon5Count",1)
	TNT1 A 0 A_GiveInventory("NailgunMK2Drop",1)
	TNT1 A 0 A_GiveInventory("AEoDNailgunMK2",1)
	Stop
    }
}

//==================================================================================
//==================================================================================

//==================================================================================
//==================================================================================

ACTOR AEoDSkullRodItem : CustomInventory 6013
{
    +FLOORCLIP
    +FLOATBOB
    +INVENTORY.IGNORESKILL
    Scale 0.55
    Inventory.Amount 1
    Inventory.PickupMessage "You got the Skull Rod!"
    Inventory.PickupSound "weaponbuild"
    States
    {
    Spawn:
        R019 J -1
        Loop
    Pickup:
	TNT1 A 0 A_JumpIfInventory("AEoDSkullRod",1,"Ammo")
	TNT1 A 0 A_JumpIfInventory("Weapon5Count",3,"Nothing")
	TNT1 A 0 A_GiveInventory("Weapon5Count",1)
	TNT1 A 0 A_GiveInventory("SkullRodDrop",1)
	TNT1 A 0 A_GiveInventory("AEoDSkullRod",1)
	TNT1 A 0 ACS_NamedExecute("s799",0,12,0,0)
	Stop
    Nothing:
	TNT1 A 0 A_JumpIfInventory("AEoDSkullRod",1,"Ammo")
	TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
	Goto Pickup+2
	TNT1 A 0 ACS_NamedExecute("s798",0,5,0,0)
	Fail
    Ammo:
	TNT1 A 0 A_GiveInventory("AEoDSkullRod",1)
	Stop
    }
}

ACTOR AEoDSkullRod : Weapon // 6013
{
+FLOORCLIP
+INVENTORY.IGNORESKILL
+CHEATNOTWEAPON
+FLOATBOB
Weapon.AmmoType1 "BlueMana"
Weapon.AmmoType2 "GreenMana"
Weapon.AmmoGive1 40
Weapon.AmmoGive2 20
Weapon.AmmoUse1 1
Weapon.AmmoUse2 2
Inventory.PickupMessage "You got the Skull Rod!"
Inventory.PickupSound "weaponbuild"
weapon.upsound "weapons/draw"
Scale 0.55
Tag "Skullrod"
States
{ 
Spawn: 
	R019 J 1
	Loop
Ready: 
	R019 A 1 A_WeaponReady 
	Goto Ready
Deselect: 
	TNT1 A 0 ACS_NamedExecute("s799",0,0,0,0)
	R019 A 1 A_Lower 
	TNT1 AA 0 A_Lower
	Loop
Select: 
	TNT1 A 0 ACS_NamedExecute("s799",0,12,0,0)
	R019 A 1 A_Raise
	TNT1 AA 0 A_Raise 
	Loop 
Fire:
	R019 BCD 2 
	TNT1 A 0 ACS_NamedExecute("s851",0,10,random(-10,10),random(-10,10))
	R019 E 0 Bright A_PlaySound("weapons/hornrodshoot")
	R019 E 2 Bright A_FireCustomMissile("SkullRodBall", 0, 1, 0, 0)
	R019 D 2 Bright ACS_NamedExecute("s851",0,-10,0,0)
	TNT1 A 0 A_ReFire
	goto Ready
Hold:
	TNT1 A 0 ACS_NamedExecute("s851",0,10,random(-10,10),random(-10,10))
	R019 E 0 Bright A_PlaySound("weapons/hornrodshoot")
	R019 E 2 Bright A_FireCustomMissile("SkullRodBall", 0, 1, 0, 0)
	R019 D 2 Bright ACS_NamedExecute("s851",0,-10,0,0)
	TNT1 A 0 A_ReFire
	R019 DCB 1
	Goto Ready
AltFire:
	R019 F 3
	R019 G 3
	R019 H 3
	TNT1 A 0 ACS_NamedExecute("s851",0,30,random(-10,10),random(-10,10))
	R019 I 0 Bright A_PlaySound("weapons/hornrodpowshoot")
	R019 I 4 Bright A_FireCustomMissile("SkullRodMissile", 0, 1, 0, 0)
	R019 H 3 Bright ACS_NamedExecute("s851",0,-30,0,0)
	R019 G 3 A_Recoil(0.8)
	R019 F 3 A_ReFire
	Goto Ready
Flash: 
	TNT1 A 1 BRIGHT A_Light1 
	TNT1 A 1 BRIGHT A_Light2
	TNT1 A 2 BRIGHT A_Light0
	Stop 
} 
} 

ACTOR SkullRodBall
{
Projectile
-NOBLOCKMAP
Radius 12
Height 8
Speed 22
Damage 7
RenderStyle Add
Damagetype "AEMagic"
DeathSound "weapons/hornrodhit"
RenderStyle Add
Scale 0.4
States
{
Spawn:
	R019 L 0
	R019 L 0 A_Jump(170,3,5,7)
	R019 LLMMNNOO 1 BRIGHT A_SpawnItemEx("SkullRodBallExploSpark2",random(4,-4),random(4,-4),random(4,-4),0,0,0,0,0)
	Goto Spawn+2
Death:
	TNT1 AAAAAAA 0 A_SpawnItemEx("SkullRodBallExploSpark",0,0,0,random(1,-1),random(1,-1),random(1,-1),random(0,359),0)
	R019 PQRSTU 3 BRIGHT
	Stop
	Stop
}
}

Actor SkullRodBallExploSpark
{
+NOINTERACTION
Scale 0.08
RenderStyle Add
States
{
Spawn:
	R019 K 3 Bright A_FadeOut(0.08)
	Loop
}
}
Actor SkullRodBallExploSpark2 : SkullRodBallExploSpark
{
+NOINTERACTION
Scale 0.06
RenderStyle Add
States
{
Spawn:
	R019 K 2 Bright A_FadeOut(0.08)
	Loop
}
}



ACTOR SkullRodMissile : HornRodFX2
{
	Health 140
	Radius 12
	Height 8
	Speed 22
	Damage 16
	Projectile
	Scale 0.8
	+SEEKERMISSILE
	+NODAMAGETHRUST
	+DONTREFLECT
	RenderStyle Add
	Alpha 1.0	
	Damagetype "AEMagic"
	DeathSound "weapons/hornrodpowhit"
	Translation "0:255=%[0,0,0]:[1.4,0.0,0.0]"
	States
	{
	Spawn:
		MSP2 AA 1 BRIGHT A_SpawnItemEx("SkullRodBallExploSparkRed",random(4,-4),random(4,-4),random(4,-4),0,0,0,0,33)
		MSP2 B 0 BRIGHT A_SeekerMissile(10, 30)
		MSP2 BB 1 BRIGHT A_SpawnItemEx("SkullRodBallExploSparkRed",random(4,-4),random(4,-4),random(4,-4),0,0,0,0,33)
		MSP2 CC 1 BRIGHT A_SpawnItemEx("SkullRodBallExploSparkRed",random(4,-4),random(4,-4),random(4,-4),0,0,0,0,33)
		MSP2 D 0 BRIGHT A_SeekerMissile(10, 30)
		MSP2 DD 1 BRIGHT A_SpawnItemEx("SkullRodBallExploSparkRed",random(4,-4),random(4,-4),random(4,-4),0,0,0,0,33)
		Loop
	Death:
		TNT1 A 0 A_SpawnItemEx("SkullRodExploWave",0,0,0,0,0,0,0,33)
		TNT1 AAAAAAAAAAAAA 0 A_SpawnItemEx("SkullRodBallExploSparkRed",0,0,0,frandom(5,-5),0,frandom(5,-5),random(0,359),33)
		TNT1 AAAAAAAAAAAAA 0 A_SpawnItemEx("SkullRodBallExploSparkRed",0,0,0,frandom(5,-5),0,frandom(5,-5),random(0,359),33)
		FX00 H 3 BRIGHT A_AddPlayerRain
		FX00 I 3 BRIGHT
		FX00 J 3 BRIGHT
		FX00 KLM 3 BRIGHT
		FX00 G 1 A_HideInCeiling
	Looper:
		TNT1 G 0 A_SkullRodStorm
		TNT1 G 1 A_SkullRodStorm
		TNT1 G 1 A_SkullRodStorm
		Loop
	}
}
Actor SkullRodBallExploSparkRed : SkullRodBallExploSpark
{
Scale 0.12
}
 
Actor SkullRodExploWave
{
	var int user_count;
     +FORCEXYBILLBOARD
     +NOINTERACTION
     RenderStyle Add
     States
     {
     Spawn:
      TNT1 A 0
      TNT1 A 0 A_SetUserVar("user_count",20)
	SizeLoop:
      TNT1 A 0 A_SetScale((user_count*0.01))
      TNT1 A 0 A_JumpIf(user_count>=150,"LoopEnd") 
      X060 B 1 Bright A_FadeOut(0.06)
      TNT1 A 0 A_SetUserVar("user_count",user_count+8)
      Loop      
	LoopEnd:
      R075 Q 1 Bright A_FadeOut(0.1)
      Wait
  }
}

ACTOR SkullRodBallExplosion
{
+NOGRAVITY
-NOBLOCKMAP
RenderStyle Add
Scale 0.8
States
{
Spawn:
	R019 PQRSTU 3 BRIGHT
	Stop
}
}

ACTOR SkullRodRain : RainPillar replaces RainPillar
{
    +NODAMAGETHRUST
    +DONTREFLECT
    Damage 6
    Damagetype "AEMagic"
    Gravity 1.7
}

Actor SkullRodDrop : CustomInventory
{
    Inventory.MaxAmount 1
    States
    {
    Use:
	TNT1 A 0
	TNT1 A 0 A_SpawnItemEx("DroppedSkullRod",0,0,32,8,0,0,0,32,0)
	Stop
    }
}

ACTOR DroppedSkullRod
{
    Radius 16
    Height 20
    Scale 0.55
    States
    {
    Spawn:
	R019 J 15
	TNT1 A 0 A_SpawnItemEx("AEoDSkullRodNoAmmo",0,0,0,0,0,0,0,48,0)
	Stop
    }
}

ACTOR AEoDSkullRodNoAmmo : AEoDSkullRodItem
{
    +FLOORCLIP
    +FLOATBOB
    +INVENTORY.IGNORESKILL
    Scale 0.55
    Inventory.Amount 1
    Inventory.PickupMessage "You got the Skull Rod!"
    Inventory.PickupSound "weaponbuild"
    States
    {
    Spawn:
        R019 J -1
        Loop
    Pickup:
	TNT1 A 0 A_JumpIfInventory("Weapon5Count",3,"Nothing")
	TNT1 A 0 A_JumpIfInventory("BlueMana",40,"Ammo")
	TNT1 A 0 A_JumpIfInventory("GreenMana",20,"Ammo3")
	TNT1 A 0 A_GiveInventory("Weapon5Count",1)
	TNT1 A 0 A_GiveInventory("SkullRodDrop",1)
	TNT1 A 0 A_GiveInventory("AEoDSkullRod",1)
	TNT1 A 0 A_TakeInventory("BlueMana",40)
	TNT1 A 0 A_TakeInventory("GreenMana",20)
	TNT1 A 0 ACS_NamedExecute("s799",0,11,0,0)
	Stop
    Nothing:
	TNT1 A 0 A_JumpIfInventory("AEoDSkullRod",1,"Ammo")
	TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
	Goto Pickup+2
	TNT1 A 0 ACS_NamedExecute("s798",0,5,0,0)
	Fail
    Ammo:
	TNT1 A 0 A_JumpIfInventory("GreenMana",20,1)
	Goto Ammo2
	TNT1 A 0 A_TakeInventory("BlueMana",40)
	TNT1 A 0 A_TakeInventory("GreenMana",20)
	TNT1 A 0 A_JumpIfInventory("AEoDSkullRod",1,2)
	TNT1 A 0 A_GiveInventory("Weapon5Count",1)
	TNT1 A 0 A_GiveInventory("SkullRodDrop",1)
	TNT1 A 0 A_GiveInventory("AEoDSkullRod",1)
	Stop
    Ammo2:
	TNT1 A 0 A_TakeInventory("BlueMana",40)
	TNT1 A 0 A_GiveInventory("Weapon5Count",1)
	TNT1 A 0 A_GiveInventory("SkullRodDrop",1)
	TNT1 A 0 A_GiveInventory("AEoDSkullRod",1)
	TNT1 A 0 A_TakeInventory("GreenMana",20)
	Stop
    Ammo3:
	TNT1 A 0 A_TakeInventory("GreenMana",20)
	TNT1 A 0 A_GiveInventory("Weapon5Count",1)
	TNT1 A 0 A_GiveInventory("SkullRodDrop",1)
	TNT1 A 0 A_GiveInventory("AEoDSkullRod",1)
	TNT1 A 0 A_TakeInventory("BlueMana",40)
	Stop
    }
}

//==================================================================================
//==================================================================================

//==================================================================================
//==================================================================================

ACTOR AEoDHornetGunItem : CustomInventory 6199
{
    +FLOORCLIP
    +INVENTORY.IGNORESKILL
    Scale 0.095
    Inventory.Amount 1
    Inventory.PickupMessage "You swiped an alien hornet gun!"
    Inventory.PickupSound "reilsss/weapons/demoncalleridlebio"
    States
    {
    Spawn:
        HNTG A -1
        Loop

    Pickup:
	TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
	Goto Pickup+2
	TNT1 A 0 A_JumpIfInventory("Weapon5Count",3,"Nothing")
	TNT1 A 0 A_JumpIfInventory("AEoDHornetGunCount",2,"Ammo")
	TNT1 A 0 A_JumpIfInventory("AEoDHornetGunCount",1,"Pickup2")
	TNT1 A 0 A_GiveInventory("Weapon5Count",1)
	TNT1 A 0 A_GiveInventory("HornetGunDrop",1)
	TNT1 A 0 A_GiveInventory("AEoDHornetGun",1)
	TNT1 A 0 A_GiveInventory("AEoDHornetGunCount",1)
	TNT1 A 0 ACS_NamedExecute("s799",0,13,0,0)
	TNT1 A 0 A_JumpIfInventory("NoWeaponSwitch",1,2)
	TNT1 A 0 A_SelectWeapon("AEoDHornetGun")
	TNT1 A 0
	Stop
    Pickup2:
	TNT1 A 0 A_GiveInventory("HornetGunDrop",1)
	TNT1 A 0 A_GiveInventory("AEoDHornetGun",1)
	TNT1 A 0 A_GiveInventory("AEoDHornetGunCount",1)
	TNT1 A 0 ACS_NamedExecute("s799",0,13,0,0)
	TNT1 A 0 A_JumpIfInventory("NoWeaponSwitch",1,2)
	TNT1 A 0 A_SelectWeapon("AEoDHornetGun")
	TNT1 A 0
	Stop
    Nothing:
	TNT1 A 0 A_JumpIfInventory("AEoDHornetGunCount",2,"Ammo")
	TNT1 A 0 A_JumpIfInventory("AEoDHornetGunCount",1,"Pickup2")
	TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
	Goto Pickup+2
	TNT1 A 0 ACS_NamedExecute("s798",0,5,0,0)
	Fail
    Ammo:
	TNT1 A 0 A_GiveInventory("HLHornet",10)
	Stop
    }
}

ACTOR AEoDHornetGun : Weapon // 6199
{
    +FLOORCLIP
    +CHEATNOTWEAPON
    +WEAPON.AMMO_OPTIONAL
    +WEAPON.ALT_AMMO_OPTIONAL
    +IGNORESKILL
    Weapon.AmmoType1 "HLHornet"
    Weapon.AmmoType2 "HLHornet"
    Weapon.AmmoGive1 10
    Weapon.AmmoUse1 1
    Weapon.AmmoUse2 1
    Inventory.PickupMessage "You swiped an alien hornet gun!"
    Inventory.PickupSound "reilsss/weapons/demoncalleridlebio"
    weapon.upsound "weapons/draw"
    Scale 0.095
    Tag "HornetGun"
    States
    { 
    Spawn: 
	HNTG A 1
	Loop
    Ready:
	TNT1 A 0 A_TakeInventory("HornetGunDropCheck",1)
	TNT1 A 0 A_JumpIfInventory("AEoDHornetGunCount",2,"Ready2")
	HNTG B 0 A_JumpIfInventory("PowerQuickFire",1,3)
	HNTG BBBBBB 1 A_WeaponReady
	HNTG B 0 A_JumpIfInventory("HLHornet",10,"Ready")
	HNTG B 0 A_GiveInventory("HLHornet",1)
	Goto Ready
    Ready2:
	TNT1 A 0 A_JumpIfInventory("HornetGunDropCheck",1,"Ready")
	HNTG B 0 A_JumpIfInventory("PowerQuickFire",1,3)
	HNTG FFFFFF 1 A_WeaponReady
	HNTG B 0 A_JumpIfInventory("HLHornet",10,"Ready")
	HNTG B 0 A_GiveInventory("HLHornet",1)
	Goto Ready
    Deselect: 
	TNT1 A 0 ACS_NamedExecute("s799",0,0,0,0)
	TNT1 A 0 A_JumpIfInventory("AEoDHornetGunCount",2,"Deselect2")
	HNTG B 1 A_Lower 
	TNT1 AA 0 A_Lower
	Loop
    Deselect2: 
	TNT1 A 0 ACS_NamedExecute("s799",0,0,0,0)
	HNTG F 1 A_Lower 
	TNT1 AA 0 A_Lower
	Loop
    Select: 
	TNT1 A 0 ACS_NamedExecute("s799",0,13,0,0)
	TNT1 A 0 A_JumpIfInventory("AEoDHornetGunCount",2,"Select2")
	HNTG B 1 A_Raise
	TNT1 AA 0 A_Raise 
	Loop 
    Select2: 
	TNT1 A 0 ACS_NamedExecute("s799",0,13,0,0)
	HNTG F 1 A_Raise
	TNT1 AA 0 A_Raise 
	Loop 
    Fire:
	TNT1 A 0 A_JumpIfInventory("AEoDHornetGunCount",2,"Fire2")
	HNTG B 0 A_JumpIfInventory("HLHornet",1,1)
	Goto Ready
	HNTG B 0 A_PlaySound("halflife/monsters/hornetgrunt/flysight",CHAN_WEAPON,0.6,0)
	HNTG B 0 A_FireCustomMissile("HGunHornet",0,1,8,0)
	HNTG CDE 2
	HNTG B 2
	HNTG B 0 A_ReFire
	Goto Ready
    Fire2:
	HNTG F 0 A_JumpIfInventory("HLHornet",1,1)
	Goto Ready
	HNTG F 0 A_PlaySound("halflife/monsters/hornetgrunt/flysight",CHAN_WEAPON,0.6,0)
	HNTG F 0 A_FireCustomMissile("HGunHornet",0,0,8,0)
	HNTG F 0 A_FireCustomMissile("HGunHornet",0,1,-8,0)
	HNTG GHI 2
	HNTG F 2
	HNTG F 0 A_ReFire
	Goto Ready
    AltFire:
	TNT1 A 0 A_JumpIfInventory("AEoDHornetGunCount",2,"AltFire2")
	HNTG B 0 A_JumpIfInventory("PowerQuickFire",1,"AltFireQuick")
	HNTG B 0 A_JumpIfInventory("HLHornet",1,1)
	Goto Ready
	HNTG B 0 A_PlaySound("halflife/monsters/hornetgrunt/flysight",CHAN_WEAPON,0.6,0)
	HNTG B 0 A_FireCustomMissile("HGunHornet2",0,1,8,0)
	HNTG CDE 1
	HNTG B 1
	HNTG B 0 A_ReFire
	Goto Ready
    AltFireQuick:
	HNTG B 0 A_JumpIfInventory("PowerQuickFire",1,1)
	Goto AltFire
	HNTG B 0 A_JumpIfInventory("HLHornet",1,1)
	Goto Ready
	HNTG B 0 A_PlaySound("halflife/monsters/hornetgrunt/flysight",CHAN_WEAPON,0.6,0)
	HNTG B 0 A_FireCustomMissile("HGunHornet2",0,1,8,0)
	HNTG E 1
	HNTG B 1
	HNTG B 0 A_ReFire
	Goto Ready
    AltFire2:
	HNTG F 0 A_JumpIfInventory("PowerQuickFire",1,"AltFire2Quick")
	HNTG F 0 A_JumpIfInventory("HLHornet",1,1)
	Goto Ready
	HNTG F 0 A_PlaySound("halflife/monsters/hornetgrunt/flysight",CHAN_WEAPON,0.6,0)
	HNTG F 0 A_FireCustomMissile("HGunHornet2",0,0,8,0)
	HNTG F 0 A_FireCustomMissile("HGunHornet2",0,1,-8,0)
	HNTG GHI 1
	HNTG F 1
	HNTG F 0 A_ReFire
	Goto Ready
    AltFire2Quick:
	HNTG F 0 A_JumpIfInventory("PowerQuickFire",1,1)
	Goto AltFire2
	HNTG F 0 A_JumpIfInventory("HLHornet",1,1)
	Goto Ready
	HNTG F 0 A_PlaySound("halflife/monsters/hornetgrunt/flysight",CHAN_WEAPON,0.6,0)
	HNTG F 0 A_FireCustomMissile("HGunHornet2",0,0,8,0)
	HNTG F 0 A_FireCustomMissile("HGunHornet2",0,1,-8,0)
	HNTG G 1
	HNTG F 1
	HNTG F 0 A_ReFire
	Goto Ready
    Flash: 
	TNT1 A 1 Bright A_Light2 
	TNT1 A 1 Bright A_Light1
	TNT1 A 2 Bright A_Light0
	Stop 
    } 
} 

ACTOR HGunHornet : FastProjectile
{
    Radius 4
    Height 4
    Projectile
    Speed 20
    Damage 10
    Scale 0.095
    +SEEKERMISSILE
    MissileType "HGHornetTrail"
    MissileHeight 8
    States
    {
    Spawn:
	HLOH B 1 Bright A_SeekerMissile(2,2,1,90,3)
	Loop
    Death:
    Crash:
	TNT1 A 0 A_SpawnItemEx("HGHornetShooter1",0,0,0,0,0,0,0,0)
	TNT1 A 1 A_PlaySound("halflife/monsters/hornetgrunt/flybuzz")
	Stop
    XDeath:
	TNT1 A 0 A_PlaySound("halflife/monsters/hornetgrunt/flyhit")
	Stop
    }
}


ACTOR HGunHornet2 : HGunHornet
{
    -SEEKERMISSILE
}

ACTOR HLHornet : Ammo
{
    Inventory.Amount 1
    Inventory.MaxAmount 10
    +IGNORESKILL
    Inventory.Icon "HTAMMO"
    States
    {
    Spawn:
        TNT1 A 1
        Loop
   }
}

ACTOR AEoDHornetGunPickup : CustomInventory //6042
{
    Inventory.PickupMessage "You swiped an alien hornet gun!"
    Inventory.PickupSound "reilsss/weapons/demoncalleridlebio"
    Scale 0.095
    States
    {
    Spawn:
	USMG B -1
	Loop
    Pickup:
	TNT1 A 0 A_JumpIfInventory("AEoDHornetGunCount",2,4)
	TNT1 A 0 A_GiveInventory("AEoDHornetGunCount",1)
	TNT1 A 0 A_JumpIfInventory("NoWeaponSwitch",1,2)
	TNT1 A 0 A_SelectWeapon("AEoDHornetGun")
	TNT1 A 0 A_GiveInventory("AEoDHornetGun",1)
	TNT1 A 0
	Stop
    }
}

Actor AEoDHornetGunCount : Inventory
{
Inventory.MaxAmount 2
Inventory.Amount 1
}

ACTOR HornetGunDropCheck : Inventory
{
    Inventory.Amount 1
    Inventory.MaxAmount 1
}

Actor HornetGunDrop : CustomInventory
{
    Inventory.Amount 1
    Inventory.MaxAmount 2
    States
    {
    Use:
	TNT1 A 0
	TNT1 A 0 A_SpawnItemEx("DroppedHornetGun",0,0,32,8,0,0,0,32,0)
	TNT1 A 0 A_TakeInventory("AEoDHornetGunCount",1)
	Stop
    }
}

ACTOR DroppedHornetGun
{
    Radius 16
    Height 20
    Scale 0.095
    States
    {
    Spawn:
	HNTG A 15
	TNT1 A 0 A_SpawnItemEx("AEoDHornetGunItem",0,0,0,0,0,0,0,48,0)
	Stop
    }
}

//==================================================================================
//==================================================================================

//==================================================================================
//==================================================================================

ACTOR AEoDIceStormRodItem : CustomInventory 6026
{
    +FLOORCLIP
    +INVENTORY.IGNORESKILL
    +FLOATBOB
    Inventory.Amount 1
    Inventory.PickupMessage "You get the Icestorm Rod!"
    Inventory.PickupSound "pickuppiece" 
    States
    {
    Spawn:
        WMCS A -1
        Loop

    Pickup:
	TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
	Goto Pickup+2
	TNT1 A 0 A_JumpIfInventory("Weapon5Count",3,"Nothing")
	TNT1 A 0 A_JumpIfInventory("AEoDIceStormRodCount",2,"Ammo")
	TNT1 A 0 A_JumpIfInventory("AEoDIceStormRodCount",1,"Pickup2")
	TNT1 A 0 A_GiveInventory("Weapon5Count",1)
	TNT1 A 0 A_GiveInventory("IceStormRodDrop",1)
	TNT1 A 0 A_GiveInventory("AEoDIceStormRod",1)
	TNT1 A 0 A_GiveInventory("AEoDIceStormRodCount",1)
	TNT1 A 0 ACS_NamedExecute("s799",0,14,0,0)
	TNT1 A 0 A_JumpIfInventory("NoWeaponSwitch",1,2)
	TNT1 A 0 A_SelectWeapon("AEoDIceStormRod")
	TNT1 A 0
	Stop
    Pickup2:
	TNT1 A 0 A_GiveInventory("IceStormRodDrop",1)
	TNT1 A 0 A_GiveInventory("AEoDIceStormRod",1)
	TNT1 A 0 A_GiveInventory("AEoDIceStormRodCount",1)
	TNT1 A 0 ACS_NamedExecute("s799",0,14,0,0)
	TNT1 A 0 A_JumpIfInventory("NoWeaponSwitch",1,2)
	TNT1 A 0 A_SelectWeapon("AEoDIceStormRod")
	TNT1 A 0
	Stop
    Nothing:
	TNT1 A 0 A_JumpIfInventory("AEoDIceStormRodCount",2,"Ammo")
	TNT1 A 0 A_JumpIfInventory("AEoDIceStormRodCount",1,"Pickup2")
	TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
	Goto Pickup+2
	TNT1 A 0 ACS_NamedExecute("s798",0,5,0,0)
	Fail
    Ammo:
	TNT1 A 0 A_GiveInventory("AEoDIceStormRod",1)
	Stop
    }
}

ACTOR AEoDIceStormRod : MWeapFrost // 6026
{ 
+FLOORCLIP
+INVENTORY.IGNORESKILL
//+CHEATNOTWEAPON 
+FLOATBOB
Weapon.AmmoType1 "BlueMana"
Weapon.AmmoType2 "RedMana"
Weapon.AmmoGive1 30
Weapon.AmmoGive2 20
Weapon.AmmoUse1 1
Weapon.AmmoUse2 3
Obituary "%o felt the %k's cold ice."
Inventory.PickupMessage "You get the Icestorm Rod!"
Inventory.PickupSound "pickuppiece" 
weapon.upsound "weapons/draw"
Tag "Icestorm rod"
States 
{ 
Spawn:
	WMCS A 8 Bright
	Loop
Ready:
	TNT1 A 0 A_TakeInventory("IceStormRodDropCheck",1)
	CONE A 0 A_PlaySound("FrostFang/Loop", 6, 1.0, 1)
	TNT1 A 0 A_JumpIfInventory("AEoDIceStormRodCount",2,"Ready2")
	CONE A 1 A_WeaponReady
	Loop
Ready2:
	TNT1 A 0 A_JumpIfInventory("IceStormRodDropCheck",1,"Ready")
	CONE E 0 A_PlaySound("FrostFang/Loop", 6, 1.0, 1)
	CONE E 1 A_WeaponReady
	Loop
Deselect:
	TNT1 A 0 A_JumpIfInventory("AEoDIceStormRodCount",2,"Deselect2")
	CONE A 0 A_StopSound(6)
	CONE A 0 A_PlaySound("FrostFang/Lower")
	TNT1 A 0 ACS_NamedExecute("s799",0,0,0,0)
	CONE A 1 A_Lower
	TNT1 AA 0 A_Lower 
	Goto Deselect+3
Deselect2:
	CONE E 0 A_StopSound(6)
	CONE E 0 A_PlaySound("FrostFang/Lower")
	TNT1 A 0 ACS_NamedExecute("s799",0,0,0,0)
	CONE E 1 A_Lower
	TNT1 AA 0 A_Lower 
	Goto Deselect2+2
Select: 
	TNT1 A 0 ACS_NamedExecute("s799",0,14,0,0)
	TNT1 A 0 A_JumpIfInventory("AEoDIceStormRodCount",2,"Select2")
	CONE A 1 A_Raise
	TNT1 AA 0 A_Raise 
	Loop
Select2:
	TNT1 A 0 ACS_NamedExecute("s799",0,14,0,0)
	CONE E 1 A_Raise
	TNT1 AA 0 A_Raise 
	Loop
Fire:
	TNT1 A 0 A_JumpIfInventory("AEoDIceStormRodCount",2,"Fire2")
	CONE ABC 2 Bright
Hold:
	TNT1 A 0 Bright A_JumpIfInventory("AEoDIceStormRodCount",2,"Hold2")
	TNT1 A 0 Bright A_PlaySound("reilsss/weapons/frostfangfire1", CHAN_WEAPON, 1.0, 0)
	TNT1 A 0 Bright ACS_NamedExecute("s851",0,14,random(-2,2),0)
	CONE D 2 Bright A_FireCustomMissile("FrostFangShard", 0, 1, Random(-5, 5), Random(-5, 5))
	TNT1 A 0 Bright ACS_NamedExecute("s851",0,-14,0,0)
	CONE C 3 Bright
	CONE B 4 Bright A_ReFire
	CONE A 2 Bright
	Goto Ready
Fire2:
	CONE EFG 2 Bright
Hold2:
	TNT1 A 0 Bright A_JumpIfInventory("AEoDIceStormRodCount",2,1)
	Goto Hold
	TNT1 A 0 Bright A_PlaySound("reilsss/weapons/frostfangfire1", CHAN_WEAPON, 1.0, 0)
	TNT1 A 0 Bright ACS_NamedExecute("s851",0,14,random(-2,2),0)
	CONE H 3 Bright A_FireCustomMissile("FrostFangShard", 0, 1, Random(10, 14), Random(-5, 5))
	TNT1 A 0 Bright ACS_NamedExecute("s851",0,-14,0,0)
	TNT1 A 0 Bright A_PlaySound("reilsss/weapons/frostfangfire1", CHAN_WEAPON, 1.0, 0)
	CONE I 3 Bright A_FireCustomMissile("FrostFangShard", 0, 1, Random(-10, -14), Random(-5, 5))
	CONE I 0 Bright A_ReFire
	CONE J 3 Bright
	CONE K 4 Bright
	Goto Ready2
AltFire:
	TNT1 A 0 A_JumpIfInventory("AEoDIceStormRodCount",2,"AltFire2")
	CONE AB 2 Bright
AltHold:
	TNT1 A 0 Bright A_JumpIfInventory("AEoDIceStormRodCount",2,"AltHold2")
	CONE C 2 Bright
	TNT1 A 0 Bright ACS_NamedExecute("s851",0,40,random(-2,2),0)
	CONE D 3 Bright A_FireConePL1
	CONE CC 1 Bright ACS_NamedExecute("s851",0,-20,0,0)
	CONE C 3 Bright
	CONE B 4 Bright
	CONE A 12 Bright
	CONE A 1 Bright A_ReFire
	Goto Ready
AltFire2:
	CONE ELM 2 Bright
	TNT1 A 0 Bright ACS_NamedExecute("s851",0,40,random(-2,2),0)
	CONE N 4 Bright A_FireConePL1
	CONE N 0 Bright A_ReFire("AltHold2")
	CONE MM 1 Bright ACS_NamedExecute("s851",0,-20,0,0)
	CONE LE 4 Bright
	Goto Ready2
AltHold2:
	TNT1 A 0 Bright A_JumpIfInventory("AEoDIceStormRodCount",2,1)
	Goto AltHold
	CONE OO 2 Bright ACS_NamedExecute("s851",0,-20,0,0)
	CONE P 4 Bright	
	TNT1 A 0 Bright ACS_NamedExecute("s851",0,40,random(-2,2),0)
	CONE Q 4 Bright A_FireConePL1
	CONE PP 2 Bright ACS_NamedExecute("s851",0,-20,0,0)
	CONE O 4 Bright
	TNT1 A 0 Bright ACS_NamedExecute("s851",0,40,random(-2,2),0)
	CONE N 4 Bright A_FireConePL1
	CONE N 0 Bright A_ReFire
	CONE MM 2 Bright ACS_NamedExecute("s851",0,-20,0,0)
	CONE M 1 Bright
	CONE LE 4 Bright
	Goto Ready2
}
} 
 
Actor NewShard : FrostMissile replaces FrostMissile
{
Damage 4
DeathSound "reilsss/weapons/FrostFangHit2"
Scale 0.85
DamageType Ice
  States
  {
  Spawn:
    TNT1 AA 0 A_SpawnItemEx("FrostFangFireTrail",random(7,-7),random(7,-7),random(-3,8),0,0,frandom(0.2,0.5),0,32,180)
    SHRD AA 1 Bright A_SpawnItemEx("FrostFangFog", 0, 0, 0, 0, 0, Random(-0.5, 0.5), Random(-10, 10), 128)
    SHRD A 0 Bright A_ShedShard
    TNT1 AA 0 A_SpawnItemEx("FrostFangFireTrail",random(7,-7),random(7,-7),random(-3,8),0,0,frandom(0.2,0.5),0,32,180)
    SHRD AAA 1 Bright A_SpawnItemEx("FrostFangFog", 0, 0, 0, 0, 0, Random(-0.5, 0.5), Random(-10, 10), 128)
    TNT1 AA 0 A_SpawnItemEx("FrostFangFireTrail",random(7,-7),random(7,-7),random(-3,8),0,0,frandom(0.2,0.5),0,32,180)
    SHRD BBB 1 Bright A_SpawnItemEx("FrostFangFog", 0, 0, 0, 0, 0, Random(-0.5, 0.5), Random(-10, 10), 128)
    TNT1 AA 0 A_SpawnItemEx("FrostFangFireTrail",random(7,-7),random(7,-7),random(-3,8),0,0,frandom(0.2,0.5),0,32,180)
    SHRD CCC 1 Bright A_SpawnItemEx("FrostFangFog", 0, 0, 0, 0, 0, Random(-0.5, 0.5), Random(-10, 10), 128)
    Loop
  Death:
    TNT1 AAAA 0 A_CustomMissile("CrytalShotExtra",0,0,random(0,359))
    TNT1 AA 0 A_SpawnItemEx("FrostFangFireTrail",random(7,-7),random(7,-7),random(-3,8),0,0,frandom(0.2,0.5),0,32)
    TNT1 A 0 A_SetTranslucent(1,1)
    SHEX ABCDE 5 Bright
    Stop
    }
}

Actor FrostFangShard
{
Projectile
Speed 40
Radius 6
Height 6
Damage 5 //(5*Random(3, 5))
DamageType Ice
DeathSound "reilsss/weapons/FrostFangHit1"
Scale 0.75
States
{
Spawn:
	SHRD AAA 1 Bright A_SpawnItemEx("FrostFangFog", 0, 0, 0, 0, 0, Random(-0.5, 0.5), Random(-10, 10), 128)
	TNT1 AA 0 A_SpawnItemEx("FrostFangFireTrail",random(7,-7),random(7,-7),random(-3,8),0,0,frandom(0.2,0.5),0,32,180)
	SHRD BBB 1 Bright A_SpawnItemEx("FrostFangFog", 0, 0, 0, 0, 0, Random(-0.5, 0.5), Random(-10, 10), 128)
	TNT1 AA 0 A_SpawnItemEx("FrostFangFireTrail",random(7,-7),random(7,-7),random(-3,8),0,0,frandom(0.2,0.5),0,32,180)
	SHRD CCC 1 Bright A_SpawnItemEx("FrostFangFog", 0, 0, 0, 0, 0, Random(-0.5, 0.5), Random(-10, 10), 128)
	TNT1 AA 0 A_SpawnItemEx("FrostFangFireTrail",random(7,-7),random(7,-7),random(-3,8),0,0,frandom(0.2,0.5),0,32,180)
	Loop
Death:
	TNT1 A 0 A_SetTranslucent(1,1)
	TNT1 AAAA 0 A_CustomMissile("CrytalShotExtra",0,0,random(0,359))
	TNT1 AA 0 A_SpawnItemEx("FrostFangFireTrail",random(7,-7),random(7,-7),random(-3,8),0,0,frandom(0.2,0.5),0,32)
	SHEX ABCDE 5 Bright
	Stop
}
}

Actor FrostFangFog
{
+NOINTERACTION
RenderStyle Add
XScale 0.4
YScale 0.2
Alpha 0.2
States
{
Spawn:
	FFFG A 4 A_FadeOut(0.1)
	Loop
}
}

Actor FrostFangFog2
{
+NOINTERACTION
RenderStyle Add
XScale 0.2
YScale 0.3
Alpha 0.2
States
{
Spawn:
	FFFG A 4 A_FadeOut(0.03)
	Loop
}
}

Actor FrostFangFireTrail
{
	+NOINTERACTION
	RenderStyle Add
	Alpha 0.9
	Scale 0.1
	Translation "0:255=%[0,0,0]:[0.8,0.8,2.0]"
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_Jump(190,4,7,10,14)
		X123 ABCDEFGHIJKLMNOPQRSTUVWX 2 A_FadeOut(0.04)
		Goto Spawn+2
	}
}


ACTOR AEoDIceStormRodPickup : CustomInventory //6042
{
    Inventory.PickupMessage "You get the Icestorm Rod!"
    Inventory.PickupSound "pickuppiece" 
    States
    {
    Spawn:
	WMCS A -1
	Loop
    Pickup:
	TNT1 A 0 A_JumpIfInventory("AEoDIceStormRodCount",2,4)
	TNT1 A 0 A_GiveInventory("AEoDIceStormRodCount",1)
	TNT1 A 0 A_JumpIfInventory("NoWeaponSwitch",1,2)
	TNT1 A 0 A_SelectWeapon("AEoDIceStormRod")
	TNT1 A 0 A_GiveInventory("AEoDIceStormRod",1)
	TNT1 A 0
	Stop
    }
}

Actor AEoDIceStormRodCount : Inventory
{
    Inventory.MaxAmount 2
    Inventory.Amount 1
}

ACTOR IceStormRodDropCheck : Inventory
{
    Inventory.Amount 1
    Inventory.MaxAmount 1
}

Actor IceStormRodDrop : CustomInventory
{
    Inventory.Amount 1
    Inventory.MaxAmount 2
    States
    {
    Use:
	TNT1 A 0
	TNT1 A 0 A_StopSound(6)
	TNT1 A 0 A_SpawnItemEx("DroppedIceStormRod",0,0,32,8,0,0,0,32,0)
	TNT1 A 0 A_TakeInventory("AEoDIceStormRodCount",1)
	Stop
    }
}

ACTOR DroppedIceStormRod
{
    Radius 16
    Height 20
    States
    {
    Spawn:
	WMCS A 15
	TNT1 A 0 A_SpawnItemEx("AEoDIceStormRodNoAmmo",0,0,0,0,0,0,0,48,0)
	Stop
    }
}

ACTOR AEoDIceStormRodNoAmmo : AEoDIceStormRodItem
{
    +FLOORCLIP
    +FLOATBOB
    +INVENTORY.IGNORESKILL
    Inventory.Amount 1
    Inventory.PickupMessage "You get the Icestorm Rod!"
    Inventory.PickupSound "pickuppiece" 
    States
    {
    Spawn:
        WMCS A -1
        Loop
    Pickup:
	TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
	Goto Pickup+2
	TNT1 A 0 A_JumpIfInventory("Weapon5Count",3,"Nothing")
	TNT1 A 0 A_JumpIfInventory("BlueMana",30,"Ammo")
	TNT1 A 0 A_JumpIfInventory("GreenMana",20,"Ammo3")
	TNT1 A 0 A_JumpIfInventory("AEoDIceStormRodCount",2,"Ammo")
	TNT1 A 0 A_JumpIfInventory("AEoDIceStormRodCount",1,"Pickup2")
	TNT1 A 0 A_GiveInventory("Weapon5Count",1)
	TNT1 A 0 A_GiveInventory("IceStormRodDrop",1)
	TNT1 A 0 A_GiveInventory("AEoDIceStormRod",1)
	TNT1 A 0 A_GiveInventory("AEoDIceStormRodCount",1)
	TNT1 A 0 A_TakeInventory("BlueMana",30)
	TNT1 A 0 A_TakeInventory("GreenMana",20)
	TNT1 A 0 ACS_NamedExecute("s799",0,14,0,0)
	TNT1 A 0 A_JumpIfInventory("NoWeaponSwitch",1,2)
	TNT1 A 0 A_SelectWeapon("AEoDIceStormRod")
	TNT1 A 0
	Stop
    Pickup2:
	TNT1 A 0 A_JumpIfInventory("BlueMana",30,"Ammo")
	TNT1 A 0 A_JumpIfInventory("GreenMana",20,"Ammo")
	TNT1 A 0 A_GiveInventory("IceStormRodDrop",1)
	TNT1 A 0 A_GiveInventory("AEoDIceStormRod",1)
	TNT1 A 0 A_GiveInventory("AEoDIceStormRodCount",1)
	TNT1 A 0 A_TakeInventory("BlueMana",30)
	TNT1 A 0 A_TakeInventory("GreenMana",20)
	TNT1 A 0 ACS_NamedExecute("s799",0,14,0,0)
	TNT1 A 0 A_JumpIfInventory("NoWeaponSwitch",1,2)
	TNT1 A 0 A_SelectWeapon("AEoDIceStormRod")
	TNT1 A 0
	Stop
    Nothing:
	TNT1 A 0 A_JumpIfInventory("AEoDIceStormRodCount",2,"Ammo")
	TNT1 A 0 A_JumpIfInventory("AEoDIceStormRodCount",1,"Pickup2")
	TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
	Goto Pickup+2
	TNT1 A 0 ACS_NamedExecute("s798",0,5,0,0)
	Fail
    Ammo:
	TNT1 A 0 A_JumpIfInventory("GreenMana",20,1)
	Goto Ammo2
	TNT1 A 0 A_TakeInventory("BlueMana",30)
	TNT1 A 0 A_TakeInventory("GreenMana",20)
	TNT1 A 0 A_JumpIfInventory("AEoDIceStormRodCount",1,2)
	TNT1 A 0 A_GiveInventory("Weapon5Count",1)
	TNT1 A 0 A_GiveInventory("AEoDIceStormRodCount",1)
	TNT1 A 0 A_GiveInventory("IceStormRodDrop",1)
	TNT1 A 0 A_GiveInventory("AEoDIceStormRod",1)
	Stop
    Ammo2:
	TNT1 A 0 A_TakeInventory("BlueMana",30)
	TNT1 A 0 A_JumpIfInventory("AEoDIceStormRodCount",1,2)
	TNT1 A 0 A_GiveInventory("Weapon5Count",1)
	TNT1 A 0 A_GiveInventory("AEoDIceStormRodCount",1)
	TNT1 A 0 A_GiveInventory("IceStormRodDrop",1)
	TNT1 A 0 A_GiveInventory("AEoDIceStormRod",1)
	TNT1 A 0 A_TakeInventory("GreenMana",20)
	Stop
    Ammo3:
	TNT1 A 0 A_TakeInventory("GreenMana",20)
	TNT1 A 0 A_JumpIfInventory("AEoDIceStormRodCount",1,2)
	TNT1 A 0 A_GiveInventory("Weapon5Count",1)
	TNT1 A 0 A_GiveInventory("AEoDIceStormRodCount",1)
	TNT1 A 0 A_GiveInventory("IceStormRodDrop",1)
	TNT1 A 0 A_GiveInventory("AEoDIceStormRod",1)
	TNT1 A 0 A_TakeInventory("BlueMana",30)
	Stop
    }
}

//==================================================================================
//==================================================================================

//==================================================================================
//==================================================================================

ACTOR AEoDGaussGunItem : CustomInventory 6163
{
    +FLOORCLIP
    +INVENTORY.IGNORESKILL
    Scale 0.21
    Inventory.Amount 1
    Inventory.PickupMessage "You picked up the Gauss Gun!"
    Inventory.PickupSound "weapons/stroggarmsaw/pickup"
    States
    {
    Spawn:
	Q4NG A -1
	Loop
    Pickup:
	TNT1 A 0 A_JumpIfInventory("AEoDGaussGun",1,"Ammo")
	TNT1 A 0 A_JumpIfInventory("Weapon5Count",3,"Nothing")
	TNT1 A 0 A_GiveInventory("Weapon5Count",1)
	TNT1 A 0 A_GiveInventory("GaussGunDrop",1)
	TNT1 A 0 A_GiveInventory("AEoDGaussGun",1)
	TNT1 A 0 ACS_NamedExecute("s799",0,15,0,0)
	Stop
    Nothing:
	TNT1 A 0 A_JumpIfInventory("AEoDGaussGun",1,"Ammo")
	TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
	Goto Pickup+2
	TNT1 A 0 ACS_NamedExecute("s798",0,5,0,0)
	Fail
    Ammo:
	TNT1 A 0 A_GiveInventory("AEoDGaussGun",1)
	Stop
    }
}

ACTOR AEoDGaussGun : Weapon
{
+FLOORCLIP
+INVENTORY.IGNORESKILL
+CHEATNOTWEAPON
Weapon.AmmoType1 "AECell"
Weapon.AmmoType2 "AENails"
Weapon.AmmoGive1 40
Weapon.AmmoGive2 40
Weapon.AmmoUse1 1
Weapon.AmmoUse2 1
Obituary "%o was teared apart by %k's Gauss Laser."
Inventory.PickupMessage "You picked up the Gauss Gun!"
Inventory.PickupSound "weapons/stroggarmsaw/pickup"
AttackSound "halflife/weapons/gaussshot"
Weapon.upsound "NGCLIPIN"
Weapon.Kickback 2
Scale 0.185
Tag "Gauss gun"
States 
{ 
Spawn: 
	Q4NG A -1
	Loop
Ready: 
	R084 A 0 A_PlaySound("NGSPINSL", 6, 1.0, 1)
	R084 A 3 A_WeaponReady
	Loop
Ready2: 
	R081 A 0 A_PlaySound("NGSPINSL", 6, 1.0, 1)
	R081 ABCDEFGHIJ 3 A_WeaponReady
	GoTo Ready+1
Deselect:
	TNT1 A 0 A_StopSound(6)
	TNT1 A 0 A_StopSound(7)
	TNT1 A 0 ACS_NamedExecute("s799",0,0,0,0)
	R084 A 1 A_Lower
	TNT1 AA 0 A_Lower
	Goto Deselect+2
Select:
	TNT1 A 0 ACS_NamedExecute("s799",0,15,0,0)
	R084 A 1 A_Raise
	TNT1 AA 0 A_Raise
	Goto Select
Fire: 
	TNT1 A 0 A_StopSound(6)
	TNT1 A 0 A_PlaySound ("NGSPINUP")  
	R084 BCD 3 
	R084 EFGI 2
	R084 JLN 1 
	R084 RST 1 
	TNT1 A 0 A_ReFire
	Goto "Deaccel"
Deaccel: 
	TNT1 A 0 A_StopSound(6)
	TNT1 A 0 A_PlaySound ("NGSPINDW")
	R083 ACDEFGHIJKLMN 2 A_WeaponReady
	Goto Ready
Hold: 
	TNT1 A 0 A_PlaySound("NGSPINFS", 6, 1.0, 1)
	TNT1 A 0 A_PlaySound ("halflife/weapons/gaussshot",CHAN_WEAPON,0.8,0)
	TNT1 A 0 Bright ACS_NamedExecute("s851",0,20,0,0)
	TNT1 A 0 A_FireCustomMissile("GaussGunBeam",0,1,5,4)
	R082 F 2 bright A_GunFlash
	R082 A 3 ACS_NamedExecute("s851",0,-20,0,0)
	TNT1 A 0 A_PlaySound ("halflife/weapons/gaussshot",CHAN_WEAPON,0.8,0)
	TNT1 A 0 Bright ACS_NamedExecute("s851",0,20,0,0)
	TNT1 A 0 A_FireCustomMissile("GaussGunBeam",0,1,5,4)
	R082 B 2 bright A_GunFlash
	R082 C 3 ACS_NamedExecute("s851",0,-20,0,0)
	TNT1 A 0 A_PlaySound ("halflife/weapons/gaussshot",CHAN_WEAPON,0.8,0)
	TNT1 A 0 Bright ACS_NamedExecute("s851",0,20,0,0)
	TNT1 A 0 A_FireCustomMissile("GaussGunBeam",0,1,5,4)
	R082 D 2 bright A_GunFlash
	R082 E 3 ACS_NamedExecute("s851",0,-20,0,0)
	TNT1 A 0 A_ReFire
	TNT1 A 0 A_StopSound(6)
	TNT1 A 0 A_PlaySound ("NGSPINDW")
	R083 ACDEFGHIJKLMN 2 A_Refire
	Goto Ready
AltFire:
	TNT1 A 0 A_StopSound(6)
	TNT1 A 0 A_PlaySound ("NGSPINUP")  
	R084 BCD 3 
	R084 EFGI 2
	R084 JLN 1 
	R084 RST 1 
	TNT1 A 0 A_ReFire
	Goto "Deaccel"
AltHold:
	TNT1 A 0 A_PlaySound("NGFIRE", 6, 0.6, 0)
//	TNT1 A 0 A_PlaySound("halflife/weapons/gaussshot", CHAN_WEAPON, 1.0, 0)
	TNT1 A 0 Bright ACS_NamedExecute("s851",0,20,0,0)
	TNT1 A 0 A_RailAttack(random(15,25),5,1,none,"BF A7 8F",3,1,"BulletDamagePuff", 0,0,0, 10,2.0,1.5)
	TNT1 A 0 Bright A_FireCustomMissile("Q4NailTrail",0,0,5,4)
	R082 F 2 bright A_GunFlash
	R082 A 2 ACS_NamedExecute("s851",0,-20,0,0)
	TNT1 A 0 A_PlaySound("NGFIRE", 6, 0.6, 0)
//	TNT1 A 0 A_PlaySound("halflife/weapons/gaussshot", CHAN_WEAPON, 1.0, 0)
	TNT1 A 0 Bright ACS_NamedExecute("s851",0,20,0,0)
	TNT1 A 0 A_RailAttack(random(15,25),5,1,none,"BF A7 8F",3,1,"BulletDamagePuff", 0,0,0, 10,2.0,1.5)
	TNT1 A 0 Bright A_FireCustomMissile("Q4NailTrail",0,0,5,4)
	R082 B 2 bright A_GunFlash
	R082 C 2 ACS_NamedExecute("s851",0,-20,0,0)
	TNT1 A 0 A_PlaySound("NGFIRE", 6, 0.6, 0)
//	TNT1 A 0 A_PlaySound("halflife/weapons/gaussshot", CHAN_WEAPON, 1.0, 0)
	TNT1 A 0 Bright ACS_NamedExecute("s851",0,20,0,0)
	TNT1 A 0 A_RailAttack(random(15,25),5,1,none,"BF A7 8F",3,1,"BulletDamagePuff", 0,0,0, 10,2.0,1.5)
	TNT1 A 0 Bright A_FireCustomMissile("Q4NailTrail",0,0,5,4)
	R082 D 2 bright A_GunFlash
	R082 E 2 ACS_NamedExecute("s851",0,-20,0,0)
	TNT1 A 0 A_ReFire
	TNT1 A 0 A_StopSound(6)
	TNT1 A 0 A_PlaySound ("NGSPINDW")
	R083 ACDEFGHIJKLMN 2 A_Refire
	Goto Ready
Flash:
	TNT1 A 2 A_Light1
	TNT1 A 0 A_Light0
	stop  
} 
}

//New Actor
ACTOR Q4NailTrail : FastProjectile
{
	Radius 5
	Height 6
	Speed 200
	Damage 6
	Scale 0.55
	Projectile
	+RANDOMIZE
	seesound "Dalek/Fire"
	DamageType "AEBullet"
	DeathSound "halflife/weapons/gausshit"
	Obituary "Was killed by a Gauss Ball."
	States
	{
	Spawn:
	R085 I 1 Bright
	Loop
	Death:
	R085 ABCD 1 Bright
	R085 EEFFGGHH 1 A_FadeOut 
	//TNT1 A 10 A_SpawnItemEx("BulletPuff",0,0,0,0,0,0,0,32)
	Stop
	}
}

Actor GaussGunBeam : FastProjectile
{
Radius 6
Height 8
Speed 36
Damage 13
Projectile
RenderStyle Add
Alpha 1
Scale 0.02
seesound "Dalek/Fire"
+STRIFEDAMAGE
+SPAWNSOUNDSOURCE
MissileType "GaussGunBeamTrail"
MissileHeight 8
DamageType "Plasma"
ReactionTime 100
DeathSound "halflife/weapons/gausshit"
Translation "80:111=160:167"
States
{
Spawn:
	TNT1 A 0
	X099 A 1 Bright
	Loop
Death:
	TNT1 AAAA 0 A_SpawnItemEx("GaussGunParticle",0,0,0,random(1,-1),random(1,-1),random(0,2),0,0)
	TNT1 A 1
	stop
}
}

actor GaussGunBeamTrail
{
RenderStyle Add
Alpha 1
Scale 0.02
+NOINTERACTION
Translation "80:111=160:167"
states
{
Spawn:
	X099 A 1 bright A_FadeOut (0.15)
	loop
}
}

Actor GaussGunParticle
{
Projectile
Speed 0
Damage 0
+NOCLIP
Scale 0.02
RenderStyle Add
Alpha 0.9
BounceType "Doom"
BounceFactor 0.4
-NOGRAVITY
+LOWGRAVITY
+DONTSPLASH
Translation "80:111=160:167"
States
{
Spawn:
	X099 AA 3 Bright
	TNT1 A 0 A_Jump(64,"FadeOut")
	Loop
FadeOut:
Death:
	X099 A 3 Bright A_FadeOut(0.1)
	Loop
}
}

Actor GaussGunDrop : CustomInventory
{
    Inventory.MaxAmount 1
    States
    {
    Use:
	TNT1 A 0
	TNT1 A 0 A_StopSound(6)
	TNT1 A 0 A_StopSound(7)
	TNT1 A 0 A_SpawnItemEx("DroppedGaussGun",0,0,32,8,0,0,0,32,0)
	Stop
    }
}

ACTOR DroppedGaussGun
{
    Radius 16
    Height 20
    Scale 0.185
    States
    {
    Spawn:
	Q4NG A 15
	TNT1 A 0 A_SpawnItemEx("AEoDGaussGunNoAmmo",0,0,0,0,0,0,0,48,0)
	Stop
    }
}

ACTOR AEoDGaussGunNoAmmo : AEoDGaussGunItem
{
    +FLOORCLIP
    +INVENTORY.IGNORESKILL
    Scale 0.185
    Inventory.Amount 1
    Inventory.PickupMessage "You picked up the Gauss Gun!"
    Inventory.PickupSound "weapons/stroggarmsaw/pickup"
    States
    {
    Spawn:
        Q4NG A -1
        Loop
    Pickup:
	TNT1 A 0 A_JumpIfInventory("Weapon5Count",3,"Nothing")
	TNT1 A 0 A_JumpIfInventory("AECell",40,"Ammo")
	TNT1 A 0 A_JumpIfInventory("AENails",40,"Ammo3")
	TNT1 A 0 A_GiveInventory("Weapon5Count",1)
	TNT1 A 0 A_GiveInventory("GaussGunDrop",1)
	TNT1 A 0 A_GiveInventory("AEoDGaussGun",1)
	TNT1 A 0 A_TakeInventory("AECell",40)
	TNT1 A 0 A_TakeInventory("AENails",40)
	TNT1 A 0 ACS_NamedExecute("s799",0,15,0,0)
	Stop
    Nothing:
	TNT1 A 0 A_JumpIfInventory("AEoDGaussGun",1,"Ammo")
	TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
	Goto Pickup+2
	TNT1 A 0 ACS_NamedExecute("s798",0,5,0,0)
	Fail
    Ammo:
	TNT1 A 0 A_JumpIfInventory("AENails",40,1)
	Goto Ammo2
	TNT1 A 0 A_TakeInventory("AECell",40)
	TNT1 A 0 A_TakeInventory("AENails",40)
	TNT1 A 0 A_JumpIfInventory("AEoDGaussGun",1,2)
	TNT1 A 0 A_GiveInventory("Weapon5Count",1)
	TNT1 A 0 A_GiveInventory("GaussGunDrop",1)
	TNT1 A 0 A_GiveInventory("AEoDGaussGun",1)
	Stop
    Ammo2:
	TNT1 A 0 A_TakeInventory("AECell",40)
	TNT1 A 0 A_GiveInventory("Weapon5Count",1)
	TNT1 A 0 A_GiveInventory("GaussGunDrop",1)
	TNT1 A 0 A_GiveInventory("AEoDGaussGun",1)
	TNT1 A 0 A_TakeInventory("AENails",40)
	Stop
    Ammo3:
	TNT1 A 0 A_TakeInventory("AENails",40)
	TNT1 A 0 A_GiveInventory("Weapon5Count",1)
	TNT1 A 0 A_GiveInventory("GaussGunDrop",1)
	TNT1 A 0 A_GiveInventory("AEoDGaussGun",1)
	TNT1 A 0 A_TakeInventory("AECell",40)
	Stop
    }
}

//======================================================================================
//======================================================================================

//======================================================================================
//======================================================================================
ACTOR AEoDPeaceMakerItem : CustomInventory
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL
	Inventory.Amount 1
	Inventory.PickupMessage "You picked up the Peace Maker Carbine! Get trigger happy!"
	Inventory.PickupSound "BS/Carbine/Pickup"
	scale 0.2
	States
	{
	Spawn:
		D012 E -1
		Loop
	Pickup:
		TNT1 A 0 A_JumpIfInventory("AEoDPeaceMaker",1,"Ammo")
		TNT1 A 0 A_JumpIfInventory("Weapon5Count",3,"Nothing")
		TNT1 A 0 A_GiveInventory("Weapon5Count",1)
		TNT1 A 0 A_GiveInventory("PeaceMakerDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDPeaceMaker",1)
		TNT1 A 0 ACS_NamedExecute("s799",0,16,0,0)
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDPeaceMaker",1,"Ammo")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		TNT1 A 0 ACS_NamedExecute("s798",0,5,0,0)
		Fail
	Ammo:
		TNT1 A 0 A_GiveInventory("AEoDPeaceMaker",1)
		Stop
	}
}

Actor PeaceMakerDrop : CustomInventory
{
	Inventory.MaxAmount 1
	States
	{
	Use:
		TNT1 A 0
		TNT1 A 0 A_SpawnItemEx("DroppedPeaceMaker",0,0,32,8,0,0,0,32,0)
		Stop
	}
}

ACTOR DroppedPeaceMaker
{
	Radius 16
	Height 20
	scale 0.2
	States
	{
	Spawn:
		D012 E 15
		TNT1 A 0 A_SpawnItemEx("AEoDPeaceMakerNoAmmo",0,0,0,0,0,0,0,48,0)
		Stop
	}
}

ACTOR AEoDPeaceMakerNoAmmo : AEoDPeaceMakerItem
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL
	Inventory.Amount 1
	Inventory.PickupMessage "You picked up the Peace Maker Carbine! Get trigger happy!"
	Inventory.PickupSound "BS/Carbine/Pickup"
	scale 0.2
	States
	{
	Spawn:
		D012 E -1
		Loop
	Pickup:
		TNT1 A 0 A_JumpIfInventory("Weapon5Count",3,"Nothing")
		TNT1 A 0 A_JumpIfInventory("AEClip",50,"Ammo") 
		TNT1 A 0 A_GiveInventory("Weapon5Count",1)
		TNT1 A 0 A_GiveInventory("PeaceMakerDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDPeaceMaker",1)
		TNT1 A 0 A_TakeInventory("AEClip",50)
		TNT1 A 0 ACS_NamedExecute("s799",0,16,0,0)
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDPeaceMaker",1,"Ammo")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		TNT1 A 0 ACS_NamedExecute("s798",0,5,0,0)
		Fail
	Ammo:
		TNT1 A 0 A_TakeInventory("AEClip",50)
		TNT1 A 0 A_JumpIfInventory("AEoDPeaceMaker",1,2)
		TNT1 A 0 A_GiveInventory("Weapon5Count",1)
		TNT1 A 0 A_GiveInventory("PeaceMakerDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDPeaceMaker",1)
		Stop
	}
}

Actor AEoDPeaceMaker : weapon
{
	Weapon.AmmoType1 "AEClip"
	Weapon.AmmoType2 "AEClip"
	Weapon.AmmoUse1 1
	Weapon.AmmoUse2 150
	Weapon.AmmoGive1 50
	Inventory.PickupSound "BS/Carbine/Pickup"
	Inventory.PickupMessage "You picked up the Peace Maker Carbine! Get trigger happy!"
	Weapon.UpSound "BS/Carbine/Raise"
	Tag "Peace maker carbine"
	Scale 0.2
	States
	{
	Spawn: 
		D012 E 10
		Loop
	Ready:
		D012 A 1 A_WeaponReady
		Loop
	Select:
		D012 A 0 ACS_NamedExecute("s799",0,16,0,0)
		D012 A 1 A_Raise
		D012 AA 0 A_Raise
		Loop
	Deselect:
		D012 A 0 ACS_NamedExecute("s799",0,0,0,0)
		D012 A 0 A_StopSound(5)
		D012 A 1 A_Lower
		D012 AA 0 A_Lower
		Loop
	Fire:
		D012 C 0 A_PlaySound("BS/Carbine/FireLoop",5,1,1)
		D012 D 0 A_StopSound(6)
		D012 D 0 A_PlaySound("BS/Carbine/FireRotorEnd",6,0.5,0)
		D012 D 0 A_FireBullets(2,2,1,10,"BulletDamagePuff",1)
		D012 D 2 bright A_SetPitch(pitch-0.5)
		TNT1 A 0 A_FireCustomMissile("GunSmallSmokeSpawner",0,0,3,8)
		D012 B 0 A_FireCustomMissile("PistolCasingSpawnerInvertedLow",-30,0, 0,0)
		D012 B 1 A_SetPitch(pitch+0.5)
		D012 D 0 A_ReFire
		Goto EndLoop
	Hold:
		D012 D 0 A_Jump(128,"Hold2")
		D012 D 0 A_StopSound(6)
		D012 D 0 A_PlaySound("BS/Carbine/FireRotorEnd",6,0.5,0)
		D012 C 0 A_FireBullets(2,2,1,8,"BulletDamagePuff",1)
		D012 C 2 bright A_SetPitch(pitch-0.5)
		TNT1 A 0 A_FireCustomMissile("GunSmallSmokeSpawner",0,0,3,8)
		D012 B 0 A_FireCustomMissile("PistolCasingSpawnerInvertedLow",-30,0, 0,0)
		D012 B 1 A_SetPitch(pitch+0.5)
		D012 D 0 A_ReFire
		Goto EndLoop
	Hold2:
		D012 D 0 A_StopSound(6)
		D012 D 0 A_PlaySound("BS/Carbine/FireRotorEnd",6,0.5,0)
		D012 D 0 A_FireBullets(2,2,1,8,"BulletDamagePuff",1)
		D012 D 2 bright A_SetPitch(pitch-0.5)
		TNT1 A 0 A_FireCustomMissile("GunSmallSmokeSpawner",0,0,3,8)
		D012 B 0 A_FireCustomMissile("PistolCasingSpawnerInvertedLow",-30,0, 0,0)
		D012 B 1 A_SetPitch(pitch+0.5)
		D012 D 0 A_ReFire
		Goto EndLoop
	EndLoop:
		D012 A 0 A_StopSound(5)
		D012 A 0 A_PlaySound("BS/Carbine/FireLoopStop",5,1,0)
		Goto Ready
	AltFire:
		//D012 A 15 A_PlaySound("BS/Carbine/ChargeReady",7,1,0)
		D012 C 0 A_RailAttack(random(1500,2500),0,1,none,none,RGF_SILENT,0,"CarbineChargedPuff")
		D012 C 0 A_SpawnItemEx("BSCarbineEffectTrailer",cos(-pitch)*12,13,28+(sin(-pitch)*16),cos(-pitch)*5,0,sin(-pitch)*5,0,32|SXF_TRANSFERPITCH)
		D012 C 0 A_PlaySound("BS/Carbine/ChargedShot",5,1,0)
		D012 C 0 A_PlaySound("BS/Carbine/ChargedFire",6,1,0)
		D012 CCC 0 A_FireCustomMissile("PistolCasingSpawnerInvertedLow",-30,0, 0,0)
		D012 C 1 Offset(8,46) A_SetPitch(pitch+2)
		D012 CCC 0 A_FireCustomMissile("PistolCasingSpawnerInvertedLow",-30,0, 0,0)
		D012 C 1 Offset(18,59) A_SetPitch(pitch+3)
		D012 CCC 0 A_FireCustomMissile("PistolCasingSpawnerInvertedLow",-30,0, 0,0)
		D012 B 1 Offset(25,67) A_SetPitch(pitch-4)
		D012 CCC 0 A_FireCustomMissile("PistolCasingSpawnerInvertedLow",-30,0, 0,0)
		D012 B 1 Offset(24,68) A_SetPitch(pitch-5)
		D012 CCC 0 A_FireCustomMissile("PistolCasingSpawnerInvertedLow",-30,0, 0,0)
		D012 B 1 Offset(26,66) A_SetPitch(pitch+1)
		D012 CCC 0 A_FireCustomMissile("PistolCasingSpawnerInvertedLow",-30,0, 0,0)
		D012 B 1 Offset(23,65) A_SetPitch(pitch+1)
		D012 CCC 0 A_FireCustomMissile("PistolCasingSpawnerInvertedLow",-30,0, 0,0)
		D012 B 1 Offset(18,60) A_SetPitch(pitch+1)
		D012 CCC 0 A_FireCustomMissile("PistolCasingSpawnerInvertedLow",-30,0, 0,0)
		D012 B 1 Offset(13,52) A_SetPitch(pitch+0.5)
		D012 CCC 0 A_FireCustomMissile("PistolCasingSpawnerInvertedLow",-30,0, 0,0)
		D012 B 1 Offset(8,44) A_SetPitch(pitch+0.5)
		D012 CCC 0 A_FireCustomMissile("PistolCasingSpawnerInvertedLow",-30,0, 0,0)
		D012 B 1 Offset(5,39) A_FireCustomMissile("GunSmallSmokeSpawner",0,0,4,8)
		D012 CCC 0 A_FireCustomMissile("PistolCasingSpawnerInvertedLow",-30,0, 0,0)
		D012 B 1 Offset(3,35)
		D012 B 1 Offset(2,34)
		D012 B 1 Offset(1,33)
		D012 B 1 Offset(0,32)
		D012 BBBBBBBBBBBBBB 5 A_FireCustomMissile("GunSmallSmokeSpawner",0,0,4,8)
		Goto Ready
	}
}

Actor BSCarbineEffectTrailer
{
	var int user_limit;
	Projectile
	Radius 2
	Height 2
	+THRUACTORS
	States
	{
	Spawn:
		TNT1 A 0
	Moving:
		TNT1 A 0 A_SetUserVar("user_limit",user_limit+1)
		TNT1 A 0 A_JumpIf(user_limit>=1000,"End")
		TNT1 A 0 A_SpawnItemEx("BSCarbineTrail",(sin(-pitch)*random(-5,5)),frandom(-2,2),frandom(-2,2),0,0,frandom(0,0.2),0,32)
		TNT1 A 0 A_Warp(AAPTR_DEFAULT,cos(-pitch)*2,0,sin(-pitch)*2,0,0,1)
		Goto End
		TNT1 A 0 A_Warp(AAPTR_DEFAULT,cos(-pitch)*2,0,sin(-pitch)*2,0,0,1)
		Goto End
		TNT1 A 0 A_Warp(AAPTR_DEFAULT,cos(-pitch)*2,0,sin(-pitch)*2,0,0,"Moving")
	End:
		TNT1 A 0
		Stop
	}
}

Actor BSCarbineTrail
{
	Translation "0:255=%[0,0,0]:[1,0.75,0]"
	RenderStyle Add
	+NOINTERACTION
	Scale 0.10
	Alpha 0.35
	States
	{
	Spawn:
		X060 A 0
		X060 A 0 A_SetScale(ScaleX+frandom(-0.05,0.05))
	Grow:
		X060 A 1 A_SetScale(ScaleX+(0.01))
		X060 A 0 A_FadeOut(0.01)
		Loop
	}
}

Actor CarbineChargedPuff : NewPuff1
{
	+EXTREMEDEATH
	+PUFFONACTORS
	+ALWAYSPUFF
	+FORCERADIUSDMG
	+PUFFGETSOWNER
	DeathType "Disintegrate"
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_Explode(random(25,75),96,0)
		TNT1 A 0 A_SpawnItemEx("DisintegrateShadowSmall",0,0,0,0,0,0,0,32)
		TNT1 A 0 A_SpawnItemEx("DisintegrateAtomSplitter",0,0,0,frandom(0,6),0,frandom(-6,6),random(0,359),32)
		TNT1 AAAAA 0 A_SpawnItemEx("DisintegrateAtomSplitter",0,0,0,frandom(0,6),0,frandom(-6,6),random(0,359),32,128)
		Stop
	}
}