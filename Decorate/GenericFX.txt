Actor NewExplosionMedium
{
	var int user_t;
	var int user_angle;
	+NOINTERACTION
	RenderStyle None
	States
	{
	Spawn:
		TNT1 A 0 NoDelay A_JumpIf(tid != 0,"Simple")
		TNT1 A 0 Thing_ChangeTID(0,0)
		TNT1 A 0 A_CheckSight("Simple")
		TNT1 A 0 A_SpawnItemEx("ExploMediumBack1",0,0,0,0,0,0,0,32|SXF_TRANSFERTRANSLATION)
		Goto Main
	Simple:
		TNT1 A 0 A_SpawnItemEx("ExploMediumBack2",0,0,0,0,0,0,0,32|SXF_TRANSFERTRANSLATION)
	Main:
		TNT1 A 0 A_Jumpif(user_angle>=345,"CheckSpawnPos")
		TNT1 A 0 A_SpawnItemEx("TT1",0,0,0,frandom(0.5,1.8),0,0,user_angle,32|SXF_TRANSFERTRANSLATION,0,user_t)
		TNT1 A 0 A_SetUserVar("user_angle",user_angle+15)
		Loop
	CheckSpawnPos:
		TNT1 A 0 A_CheckFloor("InFloor")
	InAir:
		TNT1 AAAAAAAAAAA 0 A_SpawnItemEx("ExplosionMediumSprite",0,0,0,frandom(0.1,1.3),0,frandom(-1.3,1.3),random(0,359),32|SXF_TRANSFERTRANSLATION,0,user_t)
		TNT1 AAAAAAAAAAAAAAAA 0 A_SpawnItemEx("TT1",0,0,0,frandom(0.1,1.8),0,frandom(-1.8,1.8),random(0,359),32|SXF_TRANSFERTRANSLATION,0,user_t)
		TNT1 AAAAAAAAAA 2 A_SpawnItemEx("ExplosionMediumSprite",0,0,0,frandom(0.1,1.3),0,frandom(0.3,1.6),random(0,359),32|SXF_TRANSFERTRANSLATION,0,user_t)
		Stop
	InFloor:
		TNT1 AAAAAAAAAAA 0 A_SpawnItemEx("ExplosionMediumSprite",0,0,0,frandom(0.1,1.3),0,frandom(0.3,1.6),random(0,359),32|SXF_TRANSFERTRANSLATION,0,user_t)
		TNT1 AAAAAAAAAAAAAAAA 0 A_SpawnItemEx("TT1",0,0,0,frandom(0.1,1.8),0,frandom(0.3,1.9),random(0,359),32|SXF_TRANSFERTRANSLATION,0,user_t)
		TNT1 AAAAAAAAAA 2 A_SpawnItemEx("ExplosionMediumSprite",0,0,0,frandom(0.1,1.3),0,frandom(0.3,1.6),random(0,359),32|SXF_TRANSFERTRANSLATION,0,user_t)
		Stop
	}
}

Actor NewExploMediumSmoke
{
	+NOINTERACTION
	Radius 2
	Height 2
	RenderStyle Translucent
	Alpha 0.5
	Scale 0.6
	States
	{
	Spawn:
		TNT1 A 0 NoDelay A_SetScale(ScaleX*randompick(-1,1),ScaleY*randompick(-1,1))
		TNT1 A 0 A_JumpIf(tid < 95,3)
		TNT1 A 0 Thing_ChangeTID(0,0)
		TNT1 A 0 Thing_SetTranslation(0,random(58,94))
		TNT1 A 0 A_JumpIf(tid == 0,3)
		TNT1 A 0 Thing_SetTranslation(0,tid)
		TNT1 A 0 Thing_ChangeTID(0,0)
	Decide:
		TNT1 A 0 A_Jump(255,"One","Two","Three","Four")
	One:
		X037 A 3 A_FadeOut(0.023)
		TNT1 A 0 A_ScaleVelocity(0.95)
		Loop
	Two:
		X037 B 3 A_FadeOut(0.023)
		TNT1 A 0 A_ScaleVelocity(0.95)
		Loop
	Three:
		X037 C 3 A_FadeOut(0.023)
		TNT1 A 0 A_ScaleVelocity(0.95)
		Loop
	Four:
		X037 D 3 A_FadeOut(0.023)
		TNT1 A 0 A_ScaleVelocity(0.95)
		Loop
	}
}

Actor TT1 replaces NewExploMediumSmoke
{
	+NOINTERACTION
	RenderStyle Translucent
	Alpha 0.57
	Scale 0.4
	States
	{
	Spawn:
		TNT1 A 0 NoDelay A_SetScale(ScaleX*randompick(-1,1),ScaleY*randompick(-1,1))
		TNT1 A 0 A_JumpIf(tid < 95,3)
		TNT1 A 0 Thing_ChangeTID(0,0)
		TNT1 A 0 Thing_SetTranslation(0,random(58,94))
		TNT1 A 0 A_JumpIf(tid == 0,3)
		TNT1 A 0 Thing_SetTranslation(0,tid)
		TNT1 A 0 Thing_ChangeTID(0,0)
	Decide:
	Choose1of4:
		TNT1 A 0 A_Jump(256,"R1","R2","R3","R4")

	R1:
		X038 ABCDEFGHIJKLMNOPQRSTUV 0 A_JumpIf(random(1,22) == 1,"Behavior")
		Goto Behavior
	R2:
		X039 ABCDEFGHIJKLMNOPQRSTUV 0 A_JumpIf(random(1,22) == 1,"Behavior")
		Goto Behavior
	R3:
		X040 ABCDEFGHIJKLMNOPQRSTUV 0 A_JumpIf(random(1,22) == 1,"Behavior")
		Goto Behavior
	R4:
		X041 ABCDEFGHIJKLMNOPQRSTUV 0 A_JumpIf(random(1,22) == 1,"Behavior")
		Goto Behavior
		
	Behavior:
		"####" "#" 0
		Goto SlowDown
	SlowDown:
		"####" "#" 3 A_FadeOut(0.023)
		"####" "#" 0 A_ScaleVelocity(0.95)
		Loop

	}
}

Actor NewExploMediumSmoke2 : NewExploMediumSmoke
{	} 

//***************************************************
Actor ExplosionMediumSprite
{
	+NOINTERACTION
	Speed 0
	Radius 3
	Height 5
	RenderStyle Add
	Alpha 0.7
	Scale 0.49
	States
	{
	Spawn:
		TNT1 A 0 NoDelay A_SetScale(ScaleX*randompick(-1,1),ScaleY*randompick(-1,1))
		TNT1 A 0 A_JumpIf(tid < 95,3)
		TNT1 A 0 Thing_ChangeTID(0,0)
		TNT1 A 0 Thing_SetTranslation(0,random(58,94))
		TNT1 A 0 A_JumpIf(tid == 0,3)
		TNT1 A 0 Thing_SetTranslation(0,tid)
		TNT1 A 0 Thing_ChangeTID(0,0)
	Decide:
		TNT1 A 0 A_Jump(128,2,4,5)
		X003 ABCDE 1 Bright A_FadeOut(0.025)
		TNT1 A 0 A_ScaleVelocity(0.8)
		X003 FGHIJ 1 Bright A_FadeOut(0.025)
		TNT1 A 0 A_ScaleVelocity(0.7)
		X003 KLMNO 1 Bright A_FadeOut(0.025)
		TNT1 A 0 A_ScaleVelocity(0.55)
		X003 PQRST 1 Bright A_FadeOut(0.025)
		TNT1 A 0 A_ScaleVelocity(0.45)
		X003 UVWXYZ 1 Bright A_FadeOut(0.025)
		Stop
	}
}
//**************************************************************************
Actor ExploMediumBack1
{
	+NOINTERACTION
	RenderStyle Add
	Scale 0.8
	States
	{
	Spawn:
		TNT1 A 0 NoDelay A_SetScale(ScaleX*randompick(-1,1),ScaleY*randompick(-1,1))
		TNT1 A 0 A_JumpIf(tid < 95,3)
		TNT1 A 0 Thing_ChangeTID(0,0)
		TNT1 A 0 Thing_SetTranslation(0,random(58,94))
		TNT1 A 0 A_JumpIf(tid == 0,3)
		TNT1 A 0 Thing_SetTranslation(0,tid)
		TNT1 A 0 Thing_ChangeTID(0,0)
	Decide:
		X004 ABCDEFGHIJKLMNOPQ 1 Bright A_FadeOut(0.03)
		Stop
	}
}

Actor ExploMediumBack2 : ExploMediumBack1 {} 

//************************************************************************************************
//************************************************************************************************

//************************************************************************************************
//************************************************************************************************
Actor NewExplosionMediumConcentrated
{
	var int user_angle;
	+NOINTERACTION
	RenderStyle None
	States
	{
	Spawn:
		TNT1 A 0 NoDelay A_JumpIf(tid != 0,"Simple")
		TNT1 A 0 Thing_ChangeTID(0,0)
		TNT1 A 0 A_CheckSight("Simple")
		TNT1 A 0 A_SpawnItemEx("ExploMediumBack1",0,0,0,0,0,0,0,32|SXF_TRANSFERTRANSLATION)
		Goto Main
	Simple:
		TNT1 A 0 A_SpawnItemEx("ExploMediumBack2",0,0,0,0,0,0,0,32|SXF_TRANSFERTRANSLATION)
	Main:
		TNT1 A 0 A_Jumpif(user_angle>=345,"CheckSpawnPos")
		TNT1 A 0 A_SpawnItemEx("NewExploMediumSmoke",0,0,0,frandom(0.3,1.2),0,0,user_angle,32)
		TNT1 A 0 A_SetUserVar("user_angle",user_angle+15)
		Loop
	CheckSpawnPos:
		TNT1 A 0 A_CheckFloor("InFloor")
	InAir:
		TNT1 AAAAAAAAAA 0 A_SpawnItemEx("ExplosionMediumSprite",0,0,0,frandom(0.1,1.0),0,frandom(-1.0,1.0),random(0,359),32)
		TNT1 AAAAAAAAAAAAAAAA 0 A_SpawnItemEx("NewExploMediumSmoke",0,0,0,frandom(0.1,1.2),0,frandom(-1.2,1.2),random(0,359),32)
		TNT1 A 10 
		Stop
	InFloor:
		TNT1 AAAAAAAAAA 0 A_SpawnItemEx("ExplosionMediumSprite",0,0,0,frandom(0.1,1.1),0,frandom(0.3,1.1),random(0,359),32)
		TNT1 AAAAAAAAAAAAAAAA 0 A_SpawnItemEx("NewExploMediumSmoke",0,0,0,frandom(0.1,1.2),0,frandom(0.3,1.4),random(0,359),32)
		TNT1 A 10 
		Stop
	}
}



//************************************************************************************************
//************************************************************************************************

//************************************************************************************************
//************************************************************************************************
Actor NewExplosionMediumBig
{
	var int user_angle;
	+NOINTERACTION
	RenderStyle None
	States
	{
	Spawn:
		TNT1 A 0 NoDelay A_JumpIf(tid != 0,"Simple")
		TNT1 A 0 Thing_ChangeTID(0,0)
		TNT1 A 0 A_CheckSight("Simple")
		TNT1 A 0 A_SpawnItemEx("ExploMediumBigBack1",0,0,0,0,0,0,0,32|SXF_TRANSFERTRANSLATION)
		Goto Main
	Simple:
		TNT1 A 0 A_SpawnItemEx("ExploMediumBigBack2",0,0,0,0,0,0,0,32|SXF_TRANSFERTRANSLATION)
	Main:
		TNT1 A 0 A_Jumpif(user_angle>=345,"CheckSpawnPos")
		TNT1 A 0 A_SpawnItemEx("NewExploMediumBigSmoke",0,0,0,frandom(0.5,2.6),0,0,user_angle,32)
		TNT1 A 0 A_SetUserVar("user_angle",user_angle+15)
		Loop
	CheckSpawnPos:
		TNT1 A 0 A_CheckFloor("InFloor")
	InAir:
		TNT1 AAAAAAAA 0 A_SpawnItemEx("ExplosionMediumBigSprite",0,0,0,frandom(0.1,2.0),0,frandom(-2.0,2.0),random(0,359),32)
		TNT1 AAAAAAAAAAAAAAAAAAAAA 0 A_SpawnItemEx("NewExploMediumBigSmoke",0,0,0,frandom(0.5,2.6),0,frandom(-2.6,2.6),random(0,359),32)
		TNT1 AAAAAAAA 0 A_SpawnItemEx("NewExploMediumBigSmoke",0,0,0,frandom(0.5,2.6),0,frandom(-2.6,2.6),random(0,359),32)
		TNT1 A 10 
		Stop
	InFloor:
		TNT1 AAAAAAAA 0 A_SpawnItemEx("ExplosionMediumBigSprite",0,0,0,frandom(0.1,2.0),0,frandom(0.3,2.0),random(0,359),32)
		TNT1 AAAAAAAAAAAAAAAAAAAAA 0 A_SpawnItemEx("NewExploMediumBigSmoke",0,0,0,frandom(0.5,2.6),0,frandom(0.6,2.8),random(0,359),32)
		TNT1 AAAAAAAA 0 A_SpawnItemEx("NewExploMediumBigSmoke",0,0,0,frandom(0.5,2.6),0,frandom(0.6,2.8),random(0,359),32)
		TNT1 A 10 
		Stop
	}
}

Actor NewExploMediumBigSmoke
{
	+NOINTERACTION
	Radius 2
	Height 2
	RenderStyle Translucent
	Alpha 0.5
	Scale 0.9
	States
	{
	Spawn:
		TNT1 A 0 NoDelay A_SetScale(ScaleX*randompick(-1,1),ScaleY*randompick(-1,1))
		TNT1 A 0 A_Jump(255,"One","Two","Three","Four")
	One:
		X037 A 3 A_FadeOut(0.023)
		TNT1 A 0 A_ScaleVelocity(0.95)
		Loop
	Two:
		X037 B 3 A_FadeOut(0.023)
		TNT1 A 0 A_ScaleVelocity(0.95)
		Loop
	Three:
		X037 C 3 A_FadeOut(0.023)
		TNT1 A 0 A_ScaleVelocity(0.95)
		Loop
	Four:
		X037 D 3 A_FadeOut(0.023)
		TNT1 A 0 A_ScaleVelocity(0.95)
		Loop
	}
}

Actor NewExploMediumBigSmoke2 : NewExploMediumBigSmoke
{	}

//***************************************************
Actor ExplosionMediumBigSprite
{
	+NOINTERACTION
	Speed 0
	Radius 3
	Height 5
	RenderStyle Add
	Alpha 0.7
	Scale 0.73
	States
	{
	Spawn:
		TNT1 A 0 NoDelay A_SetScale(ScaleX*randompick(-1,1),ScaleY*randompick(-1,1))
		TNT1 A 0 A_Jump(128,2,4,5)
		X003 ABCDE 2 Bright A_FadeOut(0.03)
		TNT1 A 0 A_ScaleVelocity(0.8)
		X003 FGHIJ 2 Bright A_FadeOut(0.03)
		TNT1 A 0 A_ScaleVelocity(0.7)
		X003 KLMNO 2 Bright A_FadeOut(0.03)
		TNT1 A 0 A_ScaleVelocity(0.55)
		X003 PQRST 2 Bright A_FadeOut(0.03)
		TNT1 A 0 A_ScaleVelocity(0.45)
		X003 UVWXYZ 2 Bright A_FadeOut(0.035)
		Stop
	}
}
//**************************************************************************


Actor ExploMediumBigBack1
{
	+NOINTERACTION
	RenderStyle Add
	Scale 1.4
	States
	{
	Spawn:
		TNT1 A 0 NoDelay A_Jump(256,"S1","S2","S3","S4")
	S1:
		TNT1 A 0 A_SetScale(1.4*randompick(-1,1),1.4*randompick(-1,1))
		X004 ABCDEFGHIJKLMNOPQ 2 Bright A_FadeOut(0.03)
		Stop
	S2:
		TNT1 A 0 A_SetScale(1.3*randompick(-1,1),1.3*randompick(-1,1))
		X005 ABCDEFGHI 1 Bright A_FadeOut(0.015)
		X005 JKLMNOPQRSTUVWX 2 Bright A_FadeOut(0.03)
		Stop
	S3:
		TNT1 A 0 A_SetScale(1.3*randompick(-1,1),1.3*randompick(-1,1))
		X006 ABCDEFGHIJKLMNOP 2 Bright A_FadeOut(0.03)
		Stop
	S4:
		TNT1 A 0 A_SetScale(2.7*randompick(-1,1),2.7*randompick(-1,1))
		X015 ABCDEFGHIJKLMNOPQRSTUVWX 2 Bright A_FadeOut(0.042)
		Stop
	}
}

Actor ExploMediumBigBack2: ExploMediumBigBack1 {}


//************************************************************************************************
//************************************************************************************************

//************************************************************************************************
//************************************************************************************************
Actor NewExplosionBig
{
	var int user_angle;
	+NOINTERACTION
	RenderStyle None
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_SpawnItemEx("ExploBigBack1",0,0,0,0,0,0,0,32)
	MainLoop:
		TNT1 A 0 A_Jumpif(user_angle>=345,"CheckSpawnPos")
		TNT1 A 0 A_SpawnItemEx("NewExploBigSmoke",0,0,0,frandom(0.5,5.0),0,0,user_angle,32)
		TNT1 A 0 A_SetUserVar("user_angle",user_angle+15)
		Loop
	CheckSpawnPos:
		TNT1 A 0 A_CheckFloor("InFloor")
	InAir:
		TNT1 AAAAAAAAAA 0 A_SpawnItemEx("ExplosionBigSprite",0,0,0,frandom(0.1,4.0),0,frandom(-4.0,4.0),random(0,359),32)
		TNT1 AAAAAAAAAAAAAAAAAAAAA 0 A_SpawnItemEx("NewExploBigSmoke",0,0,0,frandom(0.5,5.0),0,frandom(-5.0,5.0),random(0,359),32)
		TNT1 AAAAAAAAAAAAAAAAAAAAA 0 A_SpawnItemEx("NewExploBigSmoke",0,0,0,frandom(0.5,5.0),0,frandom(-5.0,5.0),random(0,359),32)
		TNT1 A 10 
		Stop
	InFloor:
		TNT1 AAAAAAAAAA 0 A_SpawnItemEx("ExplosionBigSprite",0,0,0,frandom(0.1,4.0),0,frandom(0.3,4.0),random(0,359),32)
		TNT1 AAAAAAAAAAAAAAAAAAAAA 0 A_SpawnItemEx("NewExploBigSmoke",0,0,0,frandom(5.0,5.0),0,frandom(0.6,5.5),random(0,359),32)
		TNT1 AAAAAAAAAAAAAAAAAAAAA 0 A_SpawnItemEx("NewExploBigSmoke",0,0,0,frandom(5.0,5.0),0,frandom(0.6,5.5),random(0,359),32)
		TNT1 A 10 
		Stop
	}
}


Actor NewExploBigSmoke
{
	+NOINTERACTION
	Radius 2
	Height 2
	RenderStyle Translucent
	Alpha 0.5
	Scale 1.5
	States
	{
	Spawn:
		TNT1 A 0 NoDelay A_SetScale(ScaleX*randompick(-1,1),ScaleY*randompick(-1,1))
		TNT1 A 0 A_Jump(255,"One","Two","Three","Four")
	One:
		X037 A 3 A_FadeOut(0.02)
		TNT1 A 0 A_ScaleVelocity(0.94)
		Loop		
	Two:
		X037 B 3 A_FadeOut(0.02)
		TNT1 A 0 A_ScaleVelocity(0.95)
		Loop		
	Three:
		X037 C 3 A_FadeOut(0.02)
		TNT1 A 0 A_ScaleVelocity(0.95)
		Loop		
	Four:
		X037 D 3 A_FadeOut(0.02)
		TNT1 A 0 A_ScaleVelocity(0.95)
		Loop		
	}
}

Actor NewExploBigSmoke2 : NewExploBigSmoke
{	}

//***************************************************
Actor ExplosionBigSprite
{
	+NOINTERACTION
	Speed 0
	Radius 3
	Height 5
	RenderStyle Add
	Alpha 0.7
	Scale 0.9
	States
	{
	Spawn:
		TNT1 A 0 NoDelay A_SetScale(ScaleX*randompick(-1,1),ScaleY*randompick(-1,1))
		TNT1 A 0 A_Jump(128,2,4,5)
		X003 ABCDE 2 Bright A_FadeOut(0.02)
		TNT1 A 0 A_ScaleVelocity(0.8)
		X003 FGHIJ 2 Bright A_FadeOut(0.02)
		TNT1 A 0 A_ScaleVelocity(0.7)
		X003 KLMNO 2 Bright A_FadeOut(0.02)
		TNT1 A 0 A_ScaleVelocity(0.55)
		X003 PQRST 2 Bright A_FadeOut(0.02)
		TNT1 A 0 A_ScaleVelocity(0.45)
		X003 UVWXYZ 2 Bright A_FadeOut(0.05)
		Stop
	}
}
//**************************************************************************

Actor ExploBigBack1
{
	+NOINTERACTION
	RenderStyle Add
	Scale 1.8
	States
	{
	Spawn:
		TNT1 A 0 NoDelay A_SetScale(ScaleX*randompick(-1,1),ScaleY*randompick(-1,1))
		X004 ABCDEFGHIJKLMNOPQ 2 Bright A_FadeOut(0.03)
		Stop
	}
}

Actor ExploBigBack2 : ExploBigBack1 {}

//************************************************************************************************
//************************************************************************************************

//************************************************************************************************
//************************************************************************************************
Actor NewExplosionSmall
{
	var int user_angle;
	+NOINTERACTION
	RenderStyle None
	States
	{
	Spawn:
		TNT1 A 0 NoDelay A_JumpIf(tid != 0,"Simple")
		TNT1 A 0 Thing_ChangeTID(0,0)
		TNT1 A 0 A_CheckSight("Simple")
		TNT1 A 0 A_SpawnItemEx("ExploSmallBack1",0,0,0,0,0,0,0,32|SXF_TRANSFERTRANSLATION)
		Goto Main
	Simple:
		TNT1 A 0 A_SpawnItemEx("ExploSmallBack2",0,0,0,0,0,0,0,32|SXF_TRANSFERTRANSLATION)
	Main:
		TNT1 A 0 A_CheckFloor("InFloor")
	InAir:
		TNT1 AAAA 0 A_SpawnItemEx("ExplosionSmallSprite",0,0,0,frandom(0.05,0.3),0,frandom(0.05,0.3),random(0,359),32|SXF_TRANSFERTRANSLATION)
		TNT1 AAAAAA 0 A_SpawnItemEx("NewExploSmallSmoke",0,0,0,frandom(0.05,0.4),0,frandom(-0.4,0.4),random(0,359),32|SXF_TRANSFERTRANSLATION)
		TNT1 A 10 
		Stop
	InFloor:
		TNT1 AAAA 0 A_SpawnItemEx("ExplosionSmallSprite",0,0,0,frandom(0.05,0.3),0,frandom(0.05,0.3),random(0,359),32|SXF_TRANSFERTRANSLATION)
		TNT1 AAAAAA 0 A_SpawnItemEx("NewExploSmallSmoke",0,0,0,frandom(-0.4,0.4),0,frandom(0.1,0.45),random(0,359),32|SXF_TRANSFERTRANSLATION)
		TNT1 A 10 
		Stop
	}
}

Actor NewExplosionSmallSimple
{
	var int user_angle;
	+NOINTERACTION
	RenderStyle None
	States
	{
	Spawn:
		TNT1 A 0 NoDelay A_JumpIf(tid != 0,"Simple")
		TNT1 A 0 Thing_ChangeTID(0,0)
		TNT1 A 0 A_CheckSight("Simple")
		TNT1 A 0 A_SpawnItemEx("ExploSmallBack1",0,0,0,0,0,0,0,32|SXF_TRANSFERTRANSLATION)
		Goto Main
	Simple:
		TNT1 A 0 A_SpawnItemEx("ExploSmallBack2",0,0,0,0,0,0,0,32|SXF_TRANSFERTRANSLATION)
	Main:
		TNT1 A 0 A_CheckFloor("InFloor")
	InAir:
		TNT1 AAAA 0 A_SpawnItemEx("ExplosionSmallSprite",0,0,0,frandom(0.05,0.3),0,frandom(0.05,0.3),random(0,359),32|SXF_TRANSFERTRANSLATION)
		TNT1 AAA 0 A_SpawnItemEx("NewExploSmallSmoke",0,0,0,frandom(0.05,0.4),0,frandom(-0.4,0.4),random(0,359),32|SXF_TRANSFERTRANSLATION)
		TNT1 A 10 
		Stop
	InFloor:
		TNT1 AAAA 0 A_SpawnItemEx("ExplosionSmallSprite",0,0,0,frandom(0.05,0.3),0,frandom(0.05,0.3),random(0,359),32|SXF_TRANSFERTRANSLATION)
		TNT1 AAA 0 A_SpawnItemEx("NewExploSmallSmoke",0,0,0,frandom(-0.4,0.4),0,frandom(0.1,0.45),random(0,359),32|SXF_TRANSFERTRANSLATION)
		TNT1 A 10 
		Stop
	}
}

Actor NewExplosionSmallLittleBigger : NewExplosionSmall
{
	+NOINTERACTION
	RenderStyle None
	States
	{
	Spawn:
		TNT1 A 0 NoDelay A_JumpIf(tid != 0,"Simple")
		TNT1 A 0 Thing_ChangeTID(0,0)
		TNT1 A 0 A_CheckSight("Simple")
		TNT1 A 0 A_SpawnItemEx("ExploSmallBack1",0,0,0,0,0,0,0,32|SXF_TRANSFERTRANSLATION)
		Goto Main
	Simple:
		TNT1 A 0 A_SpawnItemEx("ExploSmallBack2",0,0,0,0,0,0,0,32|SXF_TRANSFERTRANSLATION)
	Main:
		TNT1 A 0 A_CheckFloor("InFloor")
	InAir:
		TNT1 AAAA 0 A_SpawnItemEx("ExplosionSmallSprite",0,0,0,frandom(0.1,0.7),0,frandom(0.1,0.7),random(0,359),32|SXF_TRANSFERTRANSLATION)
		TNT1 AAAAAAAAAA 0 A_SpawnItemEx("NewExploSmallSmoke",0,0,0,frandom(0.1,0.8),0,frandom(-0.1,0.8),random(0,359),32|SXF_TRANSFERTRANSLATION)
		TNT1 A 10 
		Stop
	InFloor:
		TNT1 AAAA 0 A_SpawnItemEx("ExplosionSmallSprite",0,0,0,frandom(0.1,0.7),0,frandom(0.1,0.7),random(0,359),32|SXF_TRANSFERTRANSLATION)
		TNT1 AAAAAAAAAA 0 A_SpawnItemEx("NewExploSmallSmoke",0,0,0,frandom(-0.8,0.8),0,frandom(0.1,0.8),random(0,359),32|SXF_TRANSFERTRANSLATION)
		TNT1 A 10 
		Stop
	}
}




Actor NewExploSmallSmoke
{
	+NOINTERACTION
	Radius 2
	Height 2
	RenderStyle Translucent
	Alpha 0.5
	Scale 0.3
	States
	{
	Spawn:
		TNT1 A 0 NoDelay A_SetScale(ScaleX*randompick(-1,1),ScaleY*randompick(-1,1))
		TNT1 A 0 A_Jump(255,"One","Two","Three","Four")
	One:
		X037 A 3 A_FadeOut(0.04) 
		TNT1 A 0 A_ScaleVelocity(0.95)
		Loop
	Two:
		X037 B 3 A_FadeOut(0.04)
		TNT1 A 0 A_ScaleVelocity(0.95)
		Loop
	Three:
		X037 C 3 A_FadeOut(0.04)
		TNT1 A 0 A_ScaleVelocity(0.95)
		Loop
	Four:
		X037 D 3 A_FadeOut(0.04)
		TNT1 A 0 A_ScaleVelocity(0.95)
		Loop
	}
}

Actor NewExploSmallSmoke2 : NewExploSmallSmoke
{	}

Actor ExplosionSmallSprite
{
	+NOINTERACTION
	Speed 0
	Radius 3
	Height 5
	RenderStyle Add
	Alpha 0.7
	Scale 0.16
	States
	{
	Spawn:
		TNT1 A 0 NoDelay A_SetScale(ScaleX*randompick(-1,1),ScaleY*randompick(-1,1))
		TNT1 A 0 A_Jump(128,2,4,5)
		X003 ABCDE 2 Bright A_FadeOut(0.03)
		TNT1 A 0 A_ScaleVelocity(0.8)
		X003 FGHIJ 2 Bright A_FadeOut(0.03)
		TNT1 A 0 A_ScaleVelocity(0.7)
		X003 KLMNO 2 Bright A_FadeOut(0.03)
		TNT1 A 0 A_ScaleVelocity(0.55)
		X003 PQRST 2 Bright A_FadeOut(0.03)
		TNT1 A 0 A_ScaleVelocity(0.45)
		X003 UVWXYZ 2 Bright A_FadeOut(0.05)
		Stop
	}
}

Actor ExploSmallBack1
{
	+NOINTERACTION
	RenderStyle Add
	Scale 0.28
	States
	{
	Spawn:
		TNT1 A 0 NoDelay A_SetScale(ScaleX*randompick(-1,1),ScaleY*randompick(-1,1))
		X004 ABCDEFGHIJKLMNOPQ 1 Bright A_FadeOut(0.03)
		Stop
	}
}

Actor ExploSmallBack2 : ExploSmallBack1	{}	//No Lights




//====================================================================
//====================================================================


//====================================================================
//====================================================================

Actor MonExplosionMedium 
{
	var int user_angle;
	+NOINTERACTION
	RenderStyle None
	States
	{
	Spawn:
		TNT1 A 0 NoDelay A_JumpIf(tid != 0,"Simple")
		TNT1 A 0 Thing_ChangeTID(0,0)
		TNT1 A 0 A_CheckSight("Simple")
		TNT1 A 0 A_SpawnItemEx("ExploMediumBack1",0,0,0,0,0,0,0,32|SXF_TRANSFERTRANSLATION)
		Goto MainLoop
	Simple:
		TNT1 A 0 A_SpawnItemEx("ExploMediumBack2",0,0,0,0,0,0,0,32|SXF_TRANSFERTRANSLATION)
	MainLoop:
		TNT1 A 0 A_Jumpif(user_angle>=315,"CheckSpawnPos")
		TNT1 A 0 A_SpawnItemEx("NewExploMediumSmoke",0,0,0,frandom(0.5,1.8),0,0,user_angle,32|SXF_TRANSFERTRANSLATION)
		TNT1 A 0 A_SetUserVar("user_angle",user_angle+45)
		Loop
	CheckSpawnPos:
		TNT1 A 0 A_CheckFloor("InFloor")
	InAir:
		TNT1 AAAA 0 A_SpawnItemEx("ExplosionMediumSprite",0,0,0,frandom(0.1,1.3),0,frandom(-1.3,1.3),random(0,359),32|SXF_TRANSFERTRANSLATION)
		TNT1 AAAAAA 0 A_SpawnItemEx("NewExploMediumSmoke",0,0,0,frandom(0.1,1.8),0,frandom(-1.8,1.8),random(0,359),32|SXF_TRANSFERTRANSLATION)
		TNT1 AAAAAA 2 A_SpawnItemEx("ExplosionMediumSprite",0,0,0,frandom(0.1,1.3),0,frandom(-1.3,1.3),random(0,359),32|SXF_TRANSFERTRANSLATION)
		Stop
	InFloor:
		TNT1 AAAA 0 A_SpawnItemEx("ExplosionMediumSprite",0,0,0,frandom(0.1,1.3),0,frandom(0.3,1.6),random(0,359),32|SXF_TRANSFERTRANSLATION)
		TNT1 AAAAAA 0 A_SpawnItemEx("NewExploMediumSmoke",0,0,0,frandom(0.1,1.8),0,frandom(0.3,1.9),random(0,359),32|SXF_TRANSFERTRANSLATION)
		TNT1 AAAAAA 2 A_SpawnItemEx("ExplosionMediumSprite",0,0,0,frandom(0.1,1.3),0,frandom(0.3,1.6),random(0,359),32|SXF_TRANSFERTRANSLATION)
		Stop
	}
}




Actor MonExplosionMediumSimple 
{
	var int user_angle;
	+NOINTERACTION
	RenderStyle None
	States
	{
	Spawn:
		TNT1 A 0 NoDelay A_JumpIf(tid != 0,"Simple")
		TNT1 A 0 Thing_ChangeTID(0,0)
		TNT1 A 0 A_SpawnItemEx("ExploMediumBack1",0,0,0,0,0,0,0,32|SXF_TRANSFERTRANSLATION)
		Goto Main
	Simple:
		TNT1 A 0 A_SpawnItemEx("ExploMediumBack2",0,0,0,0,0,0,0,32|SXF_TRANSFERTRANSLATION)
	Main:
		TNT1 A 0 A_Jumpif(user_angle>=315,"CheckSpawnPos")
		TNT1 A 0 A_SpawnItemEx("NewExploMediumSmoke",0,0,0,frandom(0.5,1.8),0,0,user_angle,32|SXF_TRANSFERTRANSLATION)
		TNT1 A 0 A_SetUserVar("user_angle",user_angle+45)
		Loop
	CheckSpawnPos:
		TNT1 A 0 A_CheckFloor("InFloor")
	InAir:
		TNT1 AA 0 A_SpawnItemEx("ExplosionMediumSprite",0,0,0,frandom(0.1,1.3),0,frandom(-1.3,1.3),random(0,359),32|SXF_TRANSFERTRANSLATION)
		TNT1 AAAA 0 A_SpawnItemEx("NewExploMediumSmoke",0,0,0,frandom(0.1,1.8),0,frandom(-1.8,1.8),random(0,359),32|SXF_TRANSFERTRANSLATION)
		TNT1 AAAA 2 A_SpawnItemEx("ExplosionMediumSprite",0,0,0,frandom(0.1,1.3),0,frandom(-1.3,1.3),random(0,359),32|SXF_TRANSFERTRANSLATION)
		Stop
	InFloor:
		TNT1 AA 0 A_SpawnItemEx("ExplosionMediumSprite",0,0,0,frandom(0.1,1.3),0,frandom(0.3,1.6),random(0,359),32|SXF_TRANSFERTRANSLATION)
		TNT1 AAAA 0 A_SpawnItemEx("NewExploMediumSmoke",0,0,0,frandom(0.1,1.8),0,frandom(0.3,1.9),random(0,359),32|SXF_TRANSFERTRANSLATION)
		TNT1 AAAA 2 A_SpawnItemEx("ExplosionMediumSprite",0,0,0,frandom(0.1,1.3),0,frandom(0.3,1.6),random(0,359),32|SXF_TRANSFERTRANSLATION)
		Stop
	}
}

Actor MonExplosionMediumConcentrated
{
	var int user_angle;
	+NOINTERACTION
	RenderStyle None
	States
	{
	Spawn:
		TNT1 A 0 NoDelay A_JumpIf(tid != 0,"Simple")
		TNT1 A 0 Thing_ChangeTID(0,0)
		TNT1 A 0 A_SpawnItemEx("ExploMediumBack1",0,0,0,0,0,0,0,32|SXF_TRANSFERTRANSLATION)
		Goto Main
	Simple:
		TNT1 A 0 A_SpawnItemEx("ExploMediumBack2",0,0,0,0,0,0,0,32|SXF_TRANSFERTRANSLATION)
	Main:
		TNT1 A 0 A_Jumpif(user_angle>=315,"CheckSpawnPos")
		TNT1 A 0 A_SpawnItemEx("NewExploMediumSmoke",0,0,0,frandom(0.3,1.2),0,0,user_angle,32)
		TNT1 A 0 A_SetUserVar("user_angle",user_angle+45)
		Loop
	CheckSpawnPos:
		TNT1 A 0 A_CheckFloor("InFloor")
	InAir:
		TNT1 AAA 0 A_SpawnItemEx("ExplosionMediumSprite",0,0,0,frandom(0.1,1.0),0,frandom(-1.0,1.0),random(0,359),32|SXF_TRANSFERTRANSLATION)
		TNT1 AAAA 0 A_SpawnItemEx("NewExploMediumSmoke",0,0,0,frandom(0.1,1.2),0,frandom(-1.2,1.2),random(0,359),32|SXF_TRANSFERTRANSLATION)
		TNT1 AAAAAA 1 A_SpawnItemEx("ExplosionMediumSprite",0,0,0,frandom(0.1,1.0),0,frandom(-1.0,1.0),random(0,359),32|SXF_TRANSFERTRANSLATION)
		Stop
	InFloor:
		TNT1 AAA 0 A_SpawnItemEx("ExplosionMediumSprite",0,0,0,frandom(0.1,1.1),0,frandom(0.3,1.1),random(0,359),32|SXF_TRANSFERTRANSLATION)
		TNT1 AAAA 0 A_SpawnItemEx("NewExploMediumSmoke",0,0,0,frandom(0.1,1.2),0,frandom(0.3,1.4),random(0,359),32|SXF_TRANSFERTRANSLATION)
		TNT1 AAAAAA 1 A_SpawnItemEx("ExplosionMediumSprite",0,0,0,frandom(0.1,1.1),0,frandom(0.3,1.1),random(0,359),32|SXF_TRANSFERTRANSLATION)
		Stop
	}
}

Actor MonExplosionMediumBig
{
	var int user_angle;
	+NOINTERACTION
	RenderStyle None
	States
	{
	Spawn:
		TNT1 A 0 NoDelay A_JumpIf(tid != 0,"Simple")
		TNT1 A 0 Thing_ChangeTID(0,0)
		TNT1 A 0 A_SpawnItemEx("ExploMediumBigBack1",0,0,0,0,0,0,0,32|SXF_TRANSFERTRANSLATION)
		Goto Main
	Simple:
		TNT1 A 0 A_SpawnItemEx("ExploMediumBigBack2",0,0,0,0,0,0,0,32|SXF_TRANSFERTRANSLATION)
	Main:
		TNT1 A 0 A_Jumpif(user_angle>=315,"CheckSpawnPos")
		TNT1 A 0 A_SpawnItemEx("NewExploMediumBigSmoke",0,0,0,frandom(0.5,2.6),0,0,user_angle,32|SXF_TRANSFERTRANSLATION)
		TNT1 A 0 A_SetUserVar("user_angle",user_angle+45)
		Loop
	CheckSpawnPos:
		TNT1 A 0 A_CheckFloor("InFloor")
	InAir:
		TNT1 AAAAAA 0 A_SpawnItemEx("ExplosionMediumBigSprite",0,0,0,frandom(0.1,2.0),0,frandom(-2.0,2.0),random(0,359),32|SXF_TRANSFERTRANSLATION)
		TNT1 AAAAAAAAAA 0 A_SpawnItemEx("NewExploMediumBigSmoke",0,0,0,frandom(0.5,2.6),0,frandom(-2.6,2.6),random(0,359),32|SXF_TRANSFERTRANSLATION)
		TNT1 A 10 
		Stop
	InFloor:
		TNT1 AAAAAA 0 A_SpawnItemEx("ExplosionMediumBigSprite",0,0,0,frandom(0.1,2.0),0,frandom(0.3,2.0),random(0,359),32|SXF_TRANSFERTRANSLATION)
		TNT1 AAAAAAAAAA 0 A_SpawnItemEx("NewExploMediumBigSmoke",0,0,0,frandom(0.5,2.6),0,frandom(0.6,2.8),random(0,359),32|SXF_TRANSFERTRANSLATION)
		TNT1 A 10 
		Stop
	}
}

Actor MonExplosionBig
{
	var int user_angle;
	+NOINTERACTION
	RenderStyle None
	States
	{
	Spawn:
		TNT1 A 0 NoDelay A_JumpIf(tid != 0,"Simple")
		TNT1 A 0 Thing_ChangeTID(0,0)
		TNT1 A 0 A_CheckSight("Simple")
		TNT1 A 0 A_SpawnItemEx("ExploBigBack1",0,0,0,0,0,0,0,32|SXF_TRANSFERTRANSLATION)
		Goto Main
	Simple:
		TNT1 A 0 A_SpawnItemEx("ExploBigBack2",0,0,0,0,0,0,0,32|SXF_TRANSFERTRANSLATION)
	Main:
	Main:
		TNT1 A 0 A_Jumpif(user_angle>=330,"CheckSpawnPos")
		TNT1 A 0 A_SpawnItemEx("NewExploBigSmoke",0,0,0,frandom(0.5,5.0),0,0,user_angle,32|SXF_TRANSFERTRANSLATION)
		TNT1 A 0 A_SetUserVar("user_angle",user_angle+30)
		Loop
	CheckSpawnPos:
		TNT1 A 0 A_CheckFloor("InFloor")
	InAir:
		TNT1 AAAAAAAA 0 A_SpawnItemEx("ExplosionBigSprite",0,0,0,frandom(0.1,4.0),0,frandom(-4.0,4.0),random(0,359),32|SXF_TRANSFERTRANSLATION)
		TNT1 AAAAAAAAAAAAAAAAAAAAA 0 A_SpawnItemEx("NewExploBigSmoke",0,0,0,frandom(0.5,5.0),0,frandom(-5.0,5.0),random(0,359),32|SXF_TRANSFERTRANSLATION)
		TNT1 A 10 
		Stop
	InFloor:
		TNT1 AAAAAAAA 0 A_SpawnItemEx("ExplosionBigSprite",0,0,0,frandom(0.1,4.0),0,frandom(0.3,4.0),random(0,359),32|SXF_TRANSFERTRANSLATION)
		TNT1 AAAAAAAAAAAAAAAAAAAAA 0 A_SpawnItemEx("NewExploBigSmoke",0,0,0,frandom(5.0,5.0),0,frandom(0.6,5.5),random(0,359),32|SXF_TRANSFERTRANSLATION)
		TNT1 A 10 
		Stop
	}
}


Actor MonExplosionSmallTooSimple
{
	var int user_angle;
	+NOINTERACTION
	RenderStyle None
	States
	{
	Spawn:
		TNT1 A 0 NoDelay A_JumpIf(tid != 0,"Simple")
		TNT1 A 0 Thing_ChangeTID(0,0)
		TNT1 A 0 A_CheckSight("Simple")
		TNT1 A 0 A_SpawnItemEx("ExploSmallBack1",0,0,0,0,0,0,0,32|SXF_TRANSFERTRANSLATION)
		Goto Main
	Simple:
		TNT1 A 0 A_SpawnItemEx("ExploSmallBack2",0,0,0,0,0,0,0,32|SXF_TRANSFERTRANSLATION)
	Main:
		TNT1 A 0 A_CheckFloor("InFloor")
	InAir:
		TNT1 AA 0 A_SpawnItemEx("ExplosionSmallSprite",0,0,0,frandom(0.05,0.3),0,frandom(0.05,0.3),random(0,359),32|SXF_TRANSFERTRANSLATION)
		TNT1 AAA 0 A_SpawnItemEx("NewExploSmallSmoke",0,0,0,frandom(0.05,0.4),0,frandom(-0.4,0.4),random(0,359),32|SXF_TRANSFERTRANSLATION)
		TNT1 A 10 
		Stop
	InFloor:
		TNT1 AA 0 A_SpawnItemEx("ExplosionSmallSprite",0,0,0,frandom(0.05,0.3),0,frandom(0.05,0.3),random(0,359),32|SXF_TRANSFERTRANSLATION)
		TNT1 AAA 0 A_SpawnItemEx("NewExploSmallSmoke",0,0,0,frandom(-0.4,0.4),0,frandom(0.1,0.45),random(0,359),32|SXF_TRANSFERTRANSLATION)
		TNT1 A 10 
		Stop
	}
}


//==================================================================================
//==================================================================================
/*
New effects by Major Cooke

Ripped straight from my Pipe Bomb addon that I made for fun one day.

List of usable Actor packages include:

PBExplosionSpawner
PBExplosionSpawnerHalf
PBExplosionClusterSpawner
PBExplosionSpawnerDebrisless
*/
//==================================================================================
//==================================================================================

Actor PBExplosionSpawner
{
	+NOINTERACTION
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_CheckFloor("Ground")
	Air:
		TNT1 AAA 0 A_SpawnItemEx("PBExploBack",random(-5,5),0,random(-5,5),0,0,random(2,6),random(0,360),32|SXF_TRANSFERTRANSLATION)
		TNT1 AAAAAAA 0 A_SpawnItemEx("PBExploMiniBack",random(-5,5),0,random(-5,5),0,0,random(2,6),random(0,360),32|SXF_TRANSFERTRANSLATION,192)
		TNT1 A 2
		TNT1 AAAAAAAAAAAAAAAAAAAAAA 0 A_SpawnItemEx("PBMidSmoke",frandom(0,3),0,frandom(0,3),frandom(-2,2),0,frandom(-3,3),random(0,360),32|SXF_TRANSFERTRANSLATION,64)
		TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAAA 0 A_SpawnItemEx("PBShockwaveSmoke",frandom(5,10),0,0,frandom(15,20),0,0,random(0,360),32|SXF_TRANSFERTRANSLATION,64)
		TNT1 A 0 A_SpawnItemEx("PBDebris",0,0,0,random(15,30),0,random(10,35),random(0,360),32|SXF_TRANSFERTRANSLATION,128)
		TNT1 AAAAAAAA 0 A_SpawnItemEx("PBDebris",0,0,0,random(10,20),0,random(10,25),random(0,360),32|SXF_TRANSFERTRANSLATION,200)
		TNT1 AAAAAAA 1 A_SpawnItemEx("PBExploMiniBack",random(0,7),0,random(-7,7),0,0,random(-4,4),random(0,360),32|SXF_TRANSFERTRANSLATION)
		Stop
	Ground:
		TNT1 AAA 0 A_SpawnItemEx("PBExploBack",random(0,5),0,random(1,8),0,0,random(2,6),random(0,360),32|SXF_TRANSFERTRANSLATION)
		TNT1 AAAAAAA 0 A_SpawnItemEx("PBExploMiniBack",random(0,5),0,random(1,8),0,0,random(2,6),random(0,360),32|SXF_TRANSFERTRANSLATION,192)
		TNT1 A 2
		TNT1 AAAAAAAAAAAAAAAAAAAAAA 0 A_SpawnItemEx("PBMidSmoke",frandom(0,3),0,frandom(0,3),frandom(0,2),0,frandom(0,3),random(0,360),32|SXF_TRANSFERTRANSLATION,64)
		TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAAA 0 A_SpawnItemEx("PBShockwaveSmoke",frandom(5,10),0,7,frandom(15,20),0,0,random(0,360),32|SXF_TRANSFERTRANSLATION,64)
		TNT1 A 0 A_SpawnItemEx("PBDebris",0,0,0,random(15,30),0,random(10,35),random(0,360),32|SXF_TRANSFERTRANSLATION,128)
		TNT1 AAAAAAAA 0 A_SpawnItemEx("PBDebris",0,0,0,random(10,20),0,random(10,25),random(0,360),32|SXF_TRANSFERTRANSLATION,200)
		TNT1 AAAAAAA 1 A_SpawnItemEx("PBExploMiniBack",random(0,7),0,random(1,8),0,0,random(2,6),random(0,359),32|SXF_TRANSFERTRANSLATION)
		Stop
	}
}

Actor PBExplosion : PBExplosionSpawner
{}

Actor PBExplosionSpawnerSmokeless
{
	+NOINTERACTION
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_CheckFloor("Ground")
	Air:
		TNT1 AAAA 0 A_SpawnItemEx("PBExploBack",random(-5,5),0,random(-5,5),0,0,random(2,6),random(0,360),32|SXF_TRANSFERTRANSLATION)
		TNT1 AAAAAAAAAAA 0 A_SpawnItemEx("PBExploMiniBack",random(-5,5),0,random(-5,5),0,0,random(2,6),random(0,360),32|SXF_TRANSFERTRANSLATION,192)
		TNT1 A 2
		TNT1 AAAAAAA 1 A_SpawnItemEx("PBExploMiniBack",random(0,7),0,random(-7,7),0,0,random(-4,4),random(0,360),32|SXF_TRANSFERTRANSLATION)
		Stop
	Ground:
		TNT1 AAAA 0 A_SpawnItemEx("PBExploBack",random(0,5),0,random(1,8),0,0,random(2,6),random(0,360),32|SXF_TRANSFERTRANSLATION)
		TNT1 AAAAAAAAAAA 0 A_SpawnItemEx("PBExploMiniBack",random(0,5),0,random(1,8),0,0,random(2,6),random(0,360),32|SXF_TRANSFERTRANSLATION,192)
		TNT1 A 2
		TNT1 AAAAAAA 1 A_SpawnItemEx("PBExploMiniBack",random(0,7),0,random(1,8),0,0,random(2,6),random(0,360),32|SXF_TRANSFERTRANSLATION)
		Stop
	}
}

Actor PBExplosionClusterSpawner
{
	Projectile
	+NOINTERACTION
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_CheckFloor("Ground")
	Air:
		TNT1 AAAA 0 A_SpawnItemEx("PBExploBack",random(-5,5),0,random(-5,5),0,0,random(2,6),random(0,360),32|SXF_TRANSFERTRANSLATION)
		TNT1 AAAAAAAAAAA 0 A_SpawnItemEx("PBExploMiniBack",random(-5,5),0,random(-5,5),0,0,random(2,6),random(0,360),32|SXF_TRANSFERTRANSLATION,192)
		TNT1 A 2
		TNT1 AAAAAAAAAAAAAAAAAAAAAA 0 A_SpawnItemEx("PBMidSmoke",frandom(0,3),0,frandom(0,3),frandom(-2,2),0,frandom(-3,3),random(0,360),32|SXF_TRANSFERTRANSLATION)
		TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAAA 0 A_SpawnItemEx("PBShockwaveSmoke",frandom(5,10),0,0,frandom(15,20),0,0,random(0,360),32|SXF_TRANSFERTRANSLATION)
		TNT1 AA 0 A_SpawnItemEx("PBCluster",0,0,0,random(15,30),0,random(10,35),random(0,360),48|SXF_TRANSFERTRANSLATION)
		TNT1 AAAAAAAA 0 A_SpawnItemEx("PBCluster",0,0,0,random(10,20),0,random(10,25),random(0,360),48|SXF_TRANSFERTRANSLATION,128)
		TNT1 AAAAAAA 1 A_SpawnItemEx("PBExploMiniBack",random(0,7),0,random(-7,7),0,0,random(-4,4),random(0,360),32|SXF_TRANSFERTRANSLATION)
		Stop
	Ground:
		TNT1 AAAA 0 A_SpawnItemEx("PBExploBack",random(0,5),0,random(1,8),0,0,random(2,6),random(0,360),32|SXF_TRANSFERTRANSLATION)
		TNT1 AAAAAAAAAAA 0 A_SpawnItemEx("PBExploMiniBack",random(0,5),0,random(1,8),0,0,random(2,6),random(0,360),32|SXF_TRANSFERTRANSLATION,192)
		TNT1 A 2
		TNT1 AAAAAAAAAAAAAAAAAAAAAA 0 A_SpawnItemEx("PBMidSmoke",frandom(0,3),0,frandom(0,3),frandom(0,2),0,frandom(0,3),random(0,360),32|SXF_TRANSFERTRANSLATION)
		TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAAA 0 A_SpawnItemEx("PBShockwaveSmoke",frandom(5,10),0,7,frandom(15,20),0,0,random(0,360),32|SXF_TRANSFERTRANSLATION)
		TNT1 AA 0 A_SpawnItemEx("PBCluster",0,0,0,random(15,30),0,random(10,35),random(0,360),48|SXF_TRANSFERTRANSLATION)
		TNT1 AAAAAAAA 0 A_SpawnItemEx("PBCluster",0,0,0,random(10,20),0,random(10,25),random(0,360),48|SXF_TRANSFERTRANSLATION,128)
		TNT1 AAAAAAA 1 A_SpawnItemEx("PBExploMiniBack",random(0,7),0,random(1,8),0,0,random(2,6),random(0,360),32|SXF_TRANSFERTRANSLATION)
		Stop
	}
}

Actor PBExplosionSpawnerDebrisless : PBExplosionSpawner
{
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_CheckFloor("Ground")
	Air:
		TNT1 AAAA 0 A_SpawnItemEx("PBExploBack",random(-5,5),0,random(-5,5),0,0,random(2,6),random(0,360),32|SXF_TRANSFERTRANSLATION)
		TNT1 AAAAAAAAAAA 0 A_SpawnItemEx("PBExploMiniBack",random(-5,5),0,random(-5,5),0,0,random(2,6),random(0,360),32|SXF_TRANSFERTRANSLATION,192)
		TNT1 A 2
		TNT1 AAAAAAAAAAAAAAAAAAAAAA 0 A_SpawnItemEx("PBMidSmoke",frandom(0,3),0,frandom(0,3),frandom(-2,2),0,frandom(-3,3),random(0,360),32|SXF_TRANSFERTRANSLATION)
		TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAAA 0 A_SpawnItemEx("PBShockwaveSmoke",frandom(5,10),0,0,frandom(15,20),0,0,random(0,360),32|SXF_TRANSFERTRANSLATION)
		Stop
	Ground:
		TNT1 AAAA 0 A_SpawnItemEx("PBExploBack",random(0,5),0,random(1,8),0,0,random(2,6),random(0,360),32|SXF_TRANSFERTRANSLATION)
		TNT1 AAAAAAAAAAA 0 A_SpawnItemEx("PBExploMiniBack",random(0,5),0,random(1,8),0,0,random(2,6),random(0,360),32|SXF_TRANSFERTRANSLATION,192)
		TNT1 A 2
		TNT1 AAAAAAAAAAAAAAAAAAAAAA 0 A_SpawnItemEx("PBMidSmoke",frandom(0,3),0,frandom(0,3),frandom(0,2),0,frandom(0,3),random(0,360),32|SXF_TRANSFERTRANSLATION)
		TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAAA 0 A_SpawnItemEx("PBShockwaveSmoke",frandom(5,10),0,7,frandom(15,20),0,0,random(0,360),32|SXF_TRANSFERTRANSLATION)
		TNT1 AAAAAAA 1 A_SpawnItemEx("PBExploMiniBack",random(0,7),0,random(1,8),0,0,random(2,6),random(0,360),32|SXF_TRANSFERTRANSLATION)
		Stop
	}
}

Actor PBExploBack
{
	Scale 1.9
	RenderStyle Add
	+NOINTERACTION
	States
	{
	Spawn:
		TNT1 A 0 NoDelay A_SetScale(ScaleX*randompick(-1,1),ScaleY*randompick(-1,1))
		TNT1 A 0 A_SetScale(ScaleX+frandom(-0.15,0.25))
		TNT1 A 0 A_Jump(128,"Two","Three")
	One:
		X006 ABCDEFGHIJKLMNOP 1 Bright A_ScaleVelocity(0.98)
		//X006 LMNOP 1 Bright A_FadeOut(0.05)
		Stop
	Two:
		X007 ABCDEFGHIJ 1 Bright A_ScaleVelocity(0.98)
		Stop
	Three:
		X033 ABCDEFGHIJKLMNOPQR 1 Bright A_ScaleVelocity(0.98)
		Stop
	}
}

Actor PBFlash
{
	+NOINTERACTION
	RenderStyle Add
	Scale 1.3
	States
	{
	Spawn:
		TNT1 A 0 NoDelay A_SetScale(ScaleX*randompick(-1,1),ScaleY*randompick(-1,1))
		CB02 ABCDEFGHIJKLMNOPQRS 1 Bright A_FadeOut(0.02)
		Stop
	}
}

Actor PBExploMiniBack : PBExploBack
{
	Scale 1.4
}

Actor PBMidSmoke : NewExploMediumSmoke
{
	Scale 1.5
}

Actor PBShockwaveSmoke : NewExploMediumSmoke
{
	Scale 1
	States
	{
	Spawn:
		TNT1 A 0 NoDelay A_SetScale(ScaleX*randompick(-1,1),ScaleY*randompick(-1,1))
		TNT1 A 0 A_Jump(255,"One","Two","Three","Four")
	One:
		X037 A 3 A_FadeOut(0.04)
		TNT1 A 0 A_ScaleVelocity(0.75)
		Loop
	Two:
		X037 B 3 A_FadeOut(0.04)
		TNT1 A 0 A_ScaleVelocity(0.75)
		Loop
	Three:
		X037 C 3 A_FadeOut(0.04)
		TNT1 A 0 A_ScaleVelocity(0.75)
		Loop
	Four:
		X037 D 3 A_FadeOut(0.04)
		TNT1 A 0 A_ScaleVelocity(0.75)
		Loop
	}
}

Actor PBDebris
{
	var int user_ticker;
	var int user_limit;
	Projectile
	+ALLOWBOUNCEONACTORS
	+BOUNCEONACTORS
	+BOUNCEONWALLS
	+BOUNCEONFLOORS
	BounceType "Doom"
	+CANBOUNCEWATER
	+BOUNCEONCEILINGS
	-NOGRAVITY
	Speed 25
	Radius 1
	Height 1
	Gravity 0.75
	WallBounceFActor 0.9
	BounceFActor 0.6
	States
	{
	Spawn:
		TNT1 A 0 
		TNT1 A 0 A_SetUserVar("user_limit",random(20,400))
		TNT1 A 0 A_SetUserVar("user_ticker",0)
	ParticleSpawner:
		TNT1 A 1 A_SpawnItemEx("PBDebrisPuff",0,0,0,0,0,0,0,32|SXF_TRANSFERTRANSLATION)
		TNT1 A 0 A_SetUserVar("user_ticker",user_ticker+1)
		TNT1 A 0 A_JumpIf(user_ticker>=user_limit,"Death")
		Loop
	Death:
		TNT1 A 0
		Stop
	}
}

Actor PBDebrisPuff
{
	+NOINTERACTION
	Scale 0.25
	RenderStyle Add
	Translation "0:255=%[0,0,0]:[1,0.5,0]"
	States
	{
	Spawn:
		TNT1 A 0 NoDelay A_SetScale(ScaleX*randompick(-1,1),ScaleY*randompick(-1,1))
		TNT1 A 0 A_SpawnItemEx("PBDebrisSmoke",frandom(0,1),0,frandom(0,1),frandom(0,1),0,1,random(0,360),32|SXF_TRANSFERTRANSLATION)
		TNT1 A 0 A_Jump(128,"Two","Three")
	One:
		X006 ABCDEFGHIJKLMNOP 1 Bright 
		//X006 LMNOP 1 Bright A_FadeOut(0.05)
		Stop
	Two:
		X007 ABCDEFGHIJ 1 Bright 
		Stop
	Three:
		X033 ABCDEFGHIJKLMNOPQR 1 Bright 
		Stop
	}
}

Actor PBDebrisPuff2x : PBDebrisPuff
{
	Scale 0.5
}

Actor PBDebrisSmoke : NewExploMediumSmoke
{
	Alpha 0.1
	Scale 0.6
	States
	{
	Spawn:
		TNT1 A 0 NoDelay A_SetScale(ScaleX*randompick(-1,1),ScaleY*randompick(-1,1))
		TNT1 A 5
		X037 AAAAAAAAAA 1 A_FadeIn(0.07)
		TNT1 A 0 A_Jump(255,"One","Two","Three","Four")
	One:
		X037 A 3 A_FadeOut(0.055)
		TNT1 A 0 A_ScaleVelocity(0.95)
		Loop
	Two:
		X037 B 3 A_FadeOut(0.055)
		TNT1 A 0 A_ScaleVelocity(0.95)
		Loop
	Three:
		X037 C 3 A_FadeOut(0.055)
		TNT1 A 0 A_ScaleVelocity(0.95)
		Loop
	Four:
		X037 D 3 A_FadeOut(0.062)
		TNT1 A 0 A_ScaleVelocity(0.95)
		Loop
	}
}

Actor PBCluster : PBDebris
{
	Damage 2
	+FORCERADIUSDMG
	+EXTREMEDEATH
	-THRUACTORS
	-BOUNCEONACTORS
	+RIPPER
	-NOCLIP
	+DONTREFLECT
	+BOUNCEONCEILINGS
	//DeathSound "PipeKaboom" //will need a new sound.
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_SetUserVar("user_limit",random(100,400))
		TNT1 A 0 A_SetUserVar("user_ticker",0)
	ParticleSpawner:
		TNT1 A 1 A_SpawnItemEx("PBDebrisPuff2x",0,0,0,0,0,0,0,32|SXF_TRANSFERTRANSLATION)
		TNT1 A 0 A_SetUserVar("user_ticker",user_ticker+1)
		TNT1 A 0 A_JumpIf(user_ticker>=user_limit,"Death")
		Loop
	Death:
		//TNT1 A 0 A_Explode(random(350,700),512,0) //One can make their own adjustments here if they wish.
		TNT1 A 0 A_SpawnItemEx("PBExplosionSpawnerDebrisless",0,0,0,0,0,0,0,32|SXF_TRANSFERTRANSLATION)
		//TNT1 A 0 A_Scream
		Stop
	}
}

//==================================================================================
//==================================================================================
// L4D2-grenadeish explosion, smaller
//==================================================================================
//==================================================================================
Actor PBExplosionSpawnerHalf : PBExplosionSpawner
{
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_CheckFloor("Ground")
	Air:
		TNT1 AAA 0 A_SpawnItemEx("PBExploBackHalf",frandom(-2.5,2.5),0,frandom(-2.5,2.5),0,0,random(1,3),random(0,359),32|SXF_TRANSFERTRANSLATION)
		TNT1 AAAAAA 0 A_SpawnItemEx("PBExploMiniBackHalf",frandom(-2.5,2.5),0,frandom(-2.5,2.5),0,0,random(1,3),random(0,359),32|SXF_TRANSFERTRANSLATION,192)
		TNT1 A 2
		TNT1 AAAAAAAAAAAAAAAAAAAAAA 0 A_SpawnItemEx("PBMidSmokeHalf",frandom(0,1.5),0,frandom(0,1.5),frandom(-1,1),0,frandom(-3,3),random(0,359),32|SXF_TRANSFERTRANSLATION)
		TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAAA 0 A_SpawnItemEx("PBShockwaveSmokeHalf",frandom(2.5,5),0,0,frandom(7.5,10),0,0,random(0,359),32|SXF_TRANSFERTRANSLATION)
		TNT1 A 0 A_SpawnItemEx("PBDebrisHalf",0,0,0,frandom(7.5,15),0,frandom(5,17.5),random(0,359),32|SXF_TRANSFERTRANSLATION)
		TNT1 AAA 0 A_SpawnItemEx("PBDebrisHalf",0,0,0,random(5,10),0,frandom(5,12.5),random(0,359),32|SXF_TRANSFERTRANSLATION,128)
		Stop
	Ground:
		TNT1 AAA 0 A_SpawnItemEx("PBExploBackHalf",frandom(0,2.5),0,frandom(0.5,4),0,0,random(1,3),random(0,359),32|SXF_TRANSFERTRANSLATION)
		TNT1 AAAAAA 0 A_SpawnItemEx("PBExploMiniBackHalf",frandom(0,2.5),0,frandom(0.5,4),0,0,random(1,3),random(0,359),32|SXF_TRANSFERTRANSLATION,192)
		TNT1 A 2
		TNT1 AAAAAAAAAAAAAAAAAAAAAA 0 A_SpawnItemEx("PBMidSmokeHalf",frandom(0,1.5),0,frandom(0,1.5),frandom(0,1),0,frandom(0,1.5),random(0,359),32|SXF_TRANSFERTRANSLATION)
		TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAAA 0 A_SpawnItemEx("PBShockwaveSmokeHalf",frandom(2.5,5),0,4,frandom(7.5,10),0,0,random(0,359),32|SXF_TRANSFERTRANSLATION)
		TNT1 A 0 A_SpawnItemEx("PBDebrisHalf",0,0,0,frandom(7.5,15),0,frandom(7,10),random(0,359),32|SXF_TRANSFERTRANSLATION)
		TNT1 AAA 0 A_SpawnItemEx("PBDebrisHalf",0,0,0,random(5,10),0,frandom(7,10),random(0,359),32|SXF_TRANSFERTRANSLATION,128)
		Stop
	}
}
 
Actor PBExploBackHalf
{
	Scale 1
	RenderStyle Add
	+NOINTERACTION
	States
	{
	Spawn:
		TNT1 A 0 NoDelay A_SetScale(ScaleX*randompick(-1,1),ScaleY*randompick(-1,1))
		TNT1 A 0 A_Jump(128,"Two","Three")
	One:
		X006 ABCDEFGHIJKLMNOP 1 Bright A_ScaleVelocity(0.98)
		//X006 LMNOP 1 Bright A_FadeOut(0.05)
		Stop
	Two:
		X007 ABCDEFGHIJ 1 Bright A_ScaleVelocity(0.98)
		Stop
	Three:
		X033 ABCDEFGHIJKLMNOPQR 1 Bright A_ScaleVelocity(0.98)
		Stop
	}
}
 
Actor PBExploMiniBackHalf : PBExploMiniBack
{
	Scale 0.7
}
 
Actor PBDebrisPuffHalf : PBDebrisPuff
{
	+NOINTERACTION
	Scale 0.13
	RenderStyle Add
	Translation "0:255=%[0,0,0]:[1,0.5,0]"
	States
	{
	Spawn:
		TNT1 A 0 NoDelay A_SetScale(ScaleX*randompick(-1,1),ScaleY*randompick(-1,1))
		TNT1 A 0 A_SpawnItemEx("PBDebrisSmokeHalf",frandom(0,1),0,frandom(0,1),frandom(0,1),0,1,random(0,360),32|SXF_TRANSFERTRANSLATION)
		TNT1 A 0 A_Jump(128,"Two","Three")
	One:
		X006 ABCDEFGHIJKLMNOP 1 Bright 
		//X006 LMNOP 1 Bright A_FadeOut(0.05)
		Stop
	Two:
		X007 ABCDEFGHIJ 1 Bright 
		Stop
	Three:
		X033 ABCDEFGHIJKLMNOPQR 1 Bright 
		Stop
	}
}
 
Actor PBDebrisPuff2xHalf : PBDebrisPuff2x
{
	Scale 0.25
}
 
Actor PBDebrisSmokeHalf : PBDebrisSmoke
{
	Scale 0.3
	Alpha 0.1
	States
	{
	Spawn:
		TNT1 A 0 NoDelay A_SetScale(ScaleX*randompick(-1,1),ScaleY*randompick(-1,1))
		X037 AAAAAAAAAA 1 A_FadeIn(0.07)
		TNT1 A 0 A_Jump(255,"One","Two","Three","Four")
	One:
		X037 A 3 A_FadeOut(0.055)
		TNT1 A 0 A_ScaleVelocity(0.95)
		Loop
	Two:
		X037 B 3 A_FadeOut(0.055)
		TNT1 A 0 A_ScaleVelocity(0.95)
		Loop
	Three:
		X037 C 3 A_FadeOut(0.055)
		TNT1 A 0 A_ScaleVelocity(0.95)
		Loop
	Four:
		X037 D 3 A_FadeOut(0.062)
		TNT1 A 0 A_ScaleVelocity(0.95)
		Loop
	}
}
 
Actor PBDebrisHalf : PBDebris
{
	BounceFActor 0.5
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_SetUserVar("user_limit",random(20,300))
		TNT1 A 0 A_SetUserVar("user_ticker",0)
	ParticleSpawner:
		TNT1 A 1 A_SpawnItemEx("PBDebrisPuffHalf",0,0,0,0,0,0,0,32)
		TNT1 A 0 A_SetUserVar("user_ticker",user_ticker+1)
		TNT1 A 0 A_JumpIf(user_ticker>=user_limit,"Death")
		Loop
	Death:
		TNT1 A 0
		Stop
	}
}
 
Actor PBMidSmokeHalf : PBMidSmoke
{
	Scale 0.75
}
 
Actor PBShockwaveSmokeHalf : PBShockwaveSmoke
{
	Scale 0.5
}

//==================================================================================
//==================================================================================
// New smoke effects (used mostly for the generic explosions)
// Sprites ripped by Major Cooke
// Implemented by DBT
//==================================================================================
//==================================================================================


Actor TT2 : TT1 replaces NewExploBigSmoke
{
	+NOINTERACTION
	RenderStyle Translucent
	Alpha 0.5
	Scale 0.6
}

Actor TT3 : TT1 replaces NewExploSmallSmoke
{
	+NOINTERACTION
	RenderStyle Translucent
	Alpha 0.57
	Scale 0.175
}

Actor TT4 : TT1 replaces NewExploMediumBigSmoke
{
	+NOINTERACTION
	RenderStyle Translucent
	Alpha 0.57
	Scale 0.5
}

Actor TT5 : TT1
{
	Scale 0.04
}

//================================================================
//Migrated these over from MonShadowW and DecMisc for convenience.
//================================================================

Actor BossDeathExplosion 
{
	+NOINTERACTION
	RenderStyle None
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_PlaySound("weapons/rockexplo")
		TNT1 A 0 A_SpawnItemEx("ExploMediumBack1",0,0,0,0,0,0,0,32)
		TNT1 A 0 A_CheckFloor("InFloor")
	InAir:	
		TNT1 AAAAA 0 A_SpawnItemEx("ExplosionMediumSprite",0,0,0,random(3,-3)/(2*1.05),random(3,-3)/(2*1.05),random(3,-3)/(2*1.05),0,32|SXF_TRANSFERTRANSLATION)
		TNT1 A 0 A_SpawnItemEx("NewExploMediumSmoke",0,0,0,random(10,-10)/(10*1.05),random(10,-10)/(10*1.05),random(10,-10)/(10*1.05),0,32|SXF_TRANSFERTRANSLATION)
		TNT1 A 0 A_SpawnItemEx("NewExploMediumSmoke",0,0,0,random(4,-4)/(4*2.0),0,random(4,-4)/(4*2.0),0,32|SXF_TRANSFERTRANSLATION)
		TNT1 A 0 A_SpawnItemEx("NewExploMediumSmoke",0,0,0,random(4,-4)/(4*2.0),0,random(4,-4)/(4*2.0),40,32|SXF_TRANSFERTRANSLATION)
		TNT1 A 0 A_SpawnItemEx("NewExploMediumSmoke",0,0,0,random(4,-4)/(4*2.0),0,random(4,-4)/(4*2.0),80,32|SXF_TRANSFERTRANSLATION)
		TNT1 A 0 A_SpawnItemEx("NewExploMediumSmoke",0,0,0,random(4,-4)/(4*2.0),0,random(4,-4)/(4*2.0),120,32|SXF_TRANSFERTRANSLATION)
		TNT1 A 0 A_SpawnItemEx("NewExploMediumSmoke",0,0,0,random(4,-4)/(4*2.0),0,random(4,-4)/(4*2.0),160,32|SXF_TRANSFERTRANSLATION)
		TNT1 A 0 A_SpawnItemEx("NewExploMediumSmoke",0,0,0,random(4,-4)/(4*2.0),0,random(4,-4)/(4*2.0),-20,32|SXF_TRANSFERTRANSLATION)
		TNT1 A 0 A_SpawnItemEx("NewExploMediumSmoke",0,0,0,random(4,-4)/(4*2.0),0,random(4,-4)/(4*2.0),-60,32|SXF_TRANSFERTRANSLATION)
		TNT1 A 0 A_SpawnItemEx("NewExploMediumSmoke",0,0,0,random(4,-4)/(4*2.0),0,random(4,-4)/(4*2.0),-100,32|SXF_TRANSFERTRANSLATION)
		TNT1 A 0 A_SpawnItemEx("NewExploMediumSmoke",0,0,0,random(4,-4)/(4*2.0),0,random(4,-4)/(4*2.0),-140,32|SXF_TRANSFERTRANSLATION)
		TNT1 A 10
		Stop
	InFloor:
		TNT1 AAAAA 0 A_SpawnItemEx("ExplosionMediumSprite",0,0,0,random(3,-3)/(2*1.05),random(3,-3)/(2*1.05),random(4,1)/(2*1.05),0,32|SXF_TRANSFERTRANSLATION)
		TNT1 A 0 A_SpawnItemEx("NewExploMediumSmoke",0,0,0,random(10,-10)/(10*1.05),random(10,-10)/(10*1.05),random(10,1)/(10*1.05),0,32|SXF_TRANSFERTRANSLATION)
		TNT1 A 0 A_SpawnItemEx("NewExploMediumSmoke",0,0,0,random(4,-4)/(4*2.0),0,random(4,1)/(4*2.0),0,32|SXF_TRANSFERTRANSLATION)
		TNT1 A 0 A_SpawnItemEx("NewExploMediumSmoke",0,0,0,random(4,-4)/(4*2.0),0,random(4,1)/(4*2.0),40,32|SXF_TRANSFERTRANSLATION)
		TNT1 A 0 A_SpawnItemEx("NewExploMediumSmoke",0,0,0,random(4,-4)/(4*2.0),0,random(4,1)/(4*2.0),80,32|SXF_TRANSFERTRANSLATION)
		TNT1 A 0 A_SpawnItemEx("NewExploMediumSmoke",0,0,0,random(4,-4)/(4*2.0),0,random(4,1)/(4*2.0),120,32|SXF_TRANSFERTRANSLATION)
		TNT1 A 0 A_SpawnItemEx("NewExploMediumSmoke",0,0,0,random(4,-4)/(4*2.0),0,random(4,1)/(4*2.0),160,32|SXF_TRANSFERTRANSLATION)
		TNT1 A 0 A_SpawnItemEx("NewExploMediumSmoke",0,0,0,random(4,-4)/(4*2.0),0,random(4,1)/(4*2.0),-20,32|SXF_TRANSFERTRANSLATION)
		TNT1 A 0 A_SpawnItemEx("NewExploMediumSmoke",0,0,0,random(4,-4)/(4*2.0),0,random(4,1)/(4*2.0),-60,32|SXF_TRANSFERTRANSLATION)
		TNT1 A 0 A_SpawnItemEx("NewExploMediumSmoke",0,0,0,random(4,-4)/(4*2.0),0,random(4,1)/(4*2.0),-100,32|SXF_TRANSFERTRANSLATION)
		TNT1 A 0 A_SpawnItemEx("NewExploMediumSmoke",0,0,0,random(4,-4)/(4*2.0),0,random(4,1)/(4*2.0),-140,32|SXF_TRANSFERTRANSLATION)
		TNT1 A 10
		Stop
	}
}

Actor BossDeathExplosionHuge : BossDeathExplosion
{
	Scale 3.2
	States
	{
	Spawn:
		TNT1 A 0 NoDelay A_SetScale(ScaleX*randompick(-1,1),ScaleY*randompick(-1,1))
		TNT1 A 1 A_PlaySound("BigSorcererBallExplode")
		TNT1 A 0 A_CustomMissile("ExploSmokeGeneralBig",0,0,0)
		EXP3 A 0 A_CustomMissile("ExploSmoke",0+Random(0,25),0+Random(5,-5),0+Random(0,370))
		EXP3 A 2 Bright A_Explode(128,128)
		EXP3 A 0 A_CustomMissile("ExploSmoke",0+Random(0,25),0+Random(5,-5),0+Random(0,370))
		EXP3 BCDEFGHIJKLMNOPQRSTUVWXYZ 2 Bright A_FadeOut(0.025)
		Stop
	}
}


//==================================================================================
//==================================================================================
// New Dark Matter Gun FX - Major Cooke
// Further edit by DBT
//==================================================================================
//==================================================================================

Actor DMGExplosionFX
{
	var int user_angle;
	var int user_count;
	+NOINTERACTION
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_SetUserVar("user_angle",0)
		TNT1 A 0 A_SetUserVar("user_count",0)
		TNT1 A 0 A_SpawnItemEx("DMGSuction",0,0,0,0,0,0,0,32)
	ShockEmission:
		TNT1 A 0 A_SpawnItemEx("DMGShockwave1up",5,0,4,10,0,0,user_angle,32)
		TNT1 A 0 A_SpawnItemEx("DMGShockwave1down",5,0,-4,10,0,0,user_angle+5,32)
		TNT1 A 0 A_SetUserVar("user_angle",user_angle+10)
		TNT1 A 0 A_JumpIf(user_angle>=359,"ParticleMaelstrom")
		Loop
	ParticleMaelstrom:
		TNT1 AAAAAAA 0 A_SpawnItemEx("DMGParticle1",0,0,0,random(25,150),0,random(-150,150),random(0,359),32,210)
		TNT1 A 1 A_SetUserVar("user_count",user_count+1)
		TNT1 A 0 A_JumpIf(user_count>=125,1)
		Loop
		TNT1 A 0
		Stop
	}
}

Actor DMGShockwave1up
{
	var int user_scale;
	+NOINTERACTION
	RenderStyle Add
	Scale 0.3
	States
	{
	Spawn:
		TNT1 A 0 NoDelay A_SetScale(ScaleX*randompick(-1,1),ScaleY*randompick(-1,1))
		X048 A 0 A_SetUserVar("user_scale",scaleX*100)
	Moving:
		X048 A 1 Bright A_SetScale((user_scale*0.01))
		X048 A 0 A_SetUserVar("user_scale",user_scale+1)
		X048 A 0 A_FadeOut(0.02)
		Loop
	}
}

Actor DMGShockwave1down : DMGShockwave1up
{ }
//I'll be sober in the morning, ma! I swear!!! -M.C.
Actor DMGParticle1
{
	var int user_count;
	+NOINTERACTION
	RenderStyle Add
	Scale 0.15
	Alpha 0
	States
	{
	Spawn:
		TNT1 A 0 NoDelay A_SetScale(ScaleX*randompick(-1,1),ScaleY*randompick(-1,1))
		TNT1 A 0 A_Jump(255,"S1","S2","S3","S4","S5")
	S1:
		X048 A 0
		Goto "Playoff"
	S2:
		X048 B 0
		Goto "Playoff"
	S3:
		X048 C 0
		Goto "Playoff"
	S4:
		X048 D 0
		Goto "Playoff"
	S5:
		X048 E 0
		Goto "Playoff"
	Playoff:
		"####" "#" 2
		"####" "#" 0 A_ScaleVelocity(0.01)
		"####" "#" 0 A_ScaleVelocity(-1)
	Movement:
		"####" "#" 0 Bright A_FadeIn(0.02)
		"####" "#" 0 Bright A_ScaleVelocity(1.04) //I'm doing this wrong... Aren't I...
		"####" "#" 0 Bright A_SetUserVar("user_count",user_count+1)
		"####" "#" 1 Bright A_JumpIf(user_count>=50,1)
		Loop
	Freeflyer:
		"####" "#" 15 Bright 
		Stop
	}
}

Actor DMGSuction
{
	var int user_angle;
	+NOINTERACTION
	RenderStyle Add
	Alpha 0.0
	Scale 4.0
	States
	{
	Spawn:
		TNT1 A 0 NoDelay A_SetScale(ScaleX*randompick(-1,1),ScaleY*randompick(-1,1))	//one hell of a big code, true, but in game, this looks very nice -DBT
		Q27A AB 1 Bright Light("DMGDarkness") A_FadeIn(0.2)		TNT1 A 0 A_SetScale(3.96)
		Q27A CD 1 Bright Light("DMGDarkness") A_FadeIn(0.2)		TNT1 A 0 A_SetScale(3.92)
		Q27A EF 1 Bright Light("DMGDarkness") A_FadeIn(0.2)		TNT1 A 0 A_SetScale(3.88)
		Q27A GH 1 Bright Light("DMGDarkness") A_FadeIn(0.2)		TNT1 A 0 A_SetScale(3.84)
		Q27A IJ 1 Bright Light("DMGDarkness") A_FadeIn(0.2)		TNT1 A 0 A_SetScale(3.80)
		Q27A KL 1 Bright Light("DMGDarkness") A_GetHurt			TNT1 A 0 A_SetScale(3.76)
		Q27A MN 1 Bright Light("DMGDarkness") A_GetHurt			TNT1 A 0 A_SetScale(3.72)
		Q27A OP 1 Bright Light("DMGDarkness") A_GetHurt			TNT1 A 0 A_SetScale(3.68)
		Q27A QR 1 Bright Light("DMGDarkness") A_GetHurt			TNT1 A 0 A_SetScale(3.64)
		Q27A ST 1 Bright Light("DMGDarkness") A_GetHurt		TNT1 A 0 A_SetScale(3.60)
		Q27A UV 1 Bright Light("DMGDarkness") A_GetHurt		TNT1 A 0 A_SetScale(3.56)
		Q27A WX 1 Bright Light("DMGDarkness") A_GetHurt		TNT1 A 0 A_SetScale(3.52)
		Q27A YZ 1 Bright Light("DMGDarkness") A_GetHurt		TNT1 A 0 A_SetScale(3.48)
		Q27B AB 1 Bright Light("DMGDarkness") A_GetHurt		TNT1 A 0 A_SetScale(3.44)
		Q27B CD 1 Bright Light("DMGDarkness") A_GetHurt		TNT1 A 0 A_SetScale(3.40)
		Q27B EF 1 Bright Light("DMGDarkness") A_GetHurt		TNT1 A 0 A_SetScale(3.36)
		Q27B GH 1 Bright Light("DMGDarkness") A_GetHurt		TNT1 A 0 A_SetScale(3.32)
		Q27B IJ 1 Bright Light("DMGDarkness") A_GetHurt		TNT1 A 0 A_SetScale(3.28)
		Q27B KL 1 Bright Light("DMGDarkness") A_GetHurt		TNT1 A 0 A_SetScale(3.24)
		Q27B MN 1 Bright Light("DMGDarkness") A_GetHurt		TNT1 A 0 A_SetScale(3.20)
		Q27B OP 1 Bright Light("DMGDarkness") A_GetHurt		TNT1 A 0 A_SetScale(3.16)
		Q27B QR 1 Bright Light("DMGDarkness") A_GetHurt		TNT1 A 0 A_SetScale(3.12)
		Q27B ST 1 Bright Light("DMGDarkness") A_GetHurt		TNT1 A 0 A_SetScale(3.08)
		Q27B UV 1 Bright Light("DMGDarkness") A_GetHurt		TNT1 A 0 A_SetScale(3.04)
		Q27B WX 1 Bright Light("DMGDarkness") A_GetHurt		TNT1 A 0 A_SetScale(3.0)
		Q27A AB 1 Bright Light("DMGDarkness") A_GetHurt		TNT1 A 0 A_SetScale(2.96)
		Q27A CD 1 Bright Light("DMGDarkness") A_GetHurt		TNT1 A 0 A_SetScale(2.92)
		Q27A EF 1 Bright Light("DMGDarkness") A_GetHurt		TNT1 A 0 A_SetScale(2.88)
		Q27A GH 1 Bright Light("DMGDarkness") A_GetHurt		TNT1 A 0 A_SetScale(2.84)
		Q27A IJ 1 Bright Light("DMGDarkness") A_GetHurt		TNT1 A 0 A_SetScale(2.80)
		Q27A KL 1 Bright Light("DMGDarkness") A_GetHurt		TNT1 A 0 A_SetScale(2.76)
		Q27A MN 1 Bright Light("DMGDarkness") A_GetHurt		TNT1 A 0 A_SetScale(2.72)
		Q27A OP 1 Bright Light("DMGDarkness") A_GetHurt		TNT1 A 0 A_SetScale(2.68)
		Q27A QR 1 Bright Light("DMGDarkness") A_GetHurt		TNT1 A 0 A_SetScale(2.64)
		Q27A ST 1 Bright Light("DMGDarkness") A_GetHurt		TNT1 A 0 A_SetScale(2.60)
		Q27A UV 1 Bright Light("DMGDarkness") A_GetHurt		TNT1 A 0 A_SetScale(2.56)
		Q27A WX 1 Bright Light("DMGDarkness") A_GetHurt		TNT1 A 0 A_SetScale(2.52)
		Q27A YZ 1 Bright Light("DMGDarkness") A_GetHurt		TNT1 A 0 A_SetScale(2.48)
		Q27B AB 1 Bright Light("DMGDarkness") A_GetHurt		TNT1 A 0 A_SetScale(2.44)
		Q27B CD 1 Bright Light("DMGDarkness") A_GetHurt		TNT1 A 0 A_SetScale(2.40)
		Q27B EF 1 Bright Light("DMGDarkness") A_GetHurt		TNT1 A 0 A_SetScale(2.36)
		Q27B GH 1 Bright Light("DMGDarkness") A_GetHurt		TNT1 A 0 A_SetScale(2.32)
		Q27B IJ 1 Bright Light("DMGDarkness") A_GetHurt		TNT1 A 0 A_SetScale(2.28)
		Q27B KL 1 Bright Light("DMGDarkness") A_GetHurt		TNT1 A 0 A_SetScale(2.24)
		Q27B MN 1 Bright Light("DMGDarkness") A_GetHurt		TNT1 A 0 A_SetScale(2.20)
		Q27B OP 1 Bright Light("DMGDarkness") A_GetHurt		TNT1 A 0 A_SetScale(2.16)
		Q27B QR 1 Bright Light("DMGDarkness") A_GetHurt		TNT1 A 0 A_SetScale(2.12)
		Q27B ST 1 Bright Light("DMGDarkness") A_GetHurt		TNT1 A 0 A_SetScale(2.08)
		Q27B UV 1 Bright Light("DMGDarkness") A_GetHurt		TNT1 A 0 A_SetScale(2.04)
		Q27B WX 1 Bright Light("DMGDarkness") A_GetHurt		TNT1 A 0 A_SetScale(2.0)
		Q27A AB 1 Bright Light("DMGDarkness") A_GetHurt		TNT1 A 0 A_SetScale(1.96)
		Q27A CD 1 Bright Light("DMGDarkness") A_GetHurt		TNT1 A 0 A_SetScale(1.92)
		Q27A EF 1 Bright Light("DMGDarkness") A_GetHurt		TNT1 A 0 A_SetScale(1.88)
		Q27A GH 1 Bright Light("DMGDarkness") A_GetHurt		TNT1 A 0 A_SetScale(1.84)
		Q27A IJ 1 Bright Light("DMGDarkness") A_GetHurt		TNT1 A 0 A_SetScale(1.80)
		Q27A KL 1 Bright Light("DMGDarkness") A_GetHurt		TNT1 A 0 A_SetScale(1.76)
		Q27A MN 1 Bright Light("DMGDarkness") A_GetHurt		TNT1 A 0 A_SetScale(1.72)
		Q27A OP 1 Bright Light("DMGDarkness") A_GetHurt		TNT1 A 0 A_SetScale(1.68)
		Q27A QR 1 Bright Light("DMGDarkness") A_GetHurt		TNT1 A 0 A_SetScale(1.64)
		Q27A ST 1 Bright Light("DMGDarkness") A_GetHurt		TNT1 A 0 A_SetScale(1.60)
		Q27A UV 1 Bright Light("DMGDarkness") A_GetHurt		TNT1 A 0 A_SetScale(1.56)
		Q27A WX 1 Bright Light("DMGDarkness") A_GetHurt		TNT1 A 0 A_SetScale(1.52)
		Q27A YZ 1 Bright Light("DMGDarkness") A_GetHurt		TNT1 A 0 A_SetScale(1.48)
		Q27B AB 1 Bright Light("DMGDarkness") A_GetHurt		TNT1 A 0 A_SetScale(1.44)
		Q27B CD 1 Bright Light("DMGDarkness") A_GetHurt		TNT1 A 0 A_SetScale(1.40)
		Q27B EF 1 Bright Light("DMGDarkness") A_GetHurt		TNT1 A 0 A_SetScale(1.36)
		Q27B GH 1 Bright Light("DMGDarkness") A_GetHurt		TNT1 A 0 A_SetScale(1.32)
		Q27B IJ 1 Bright Light("DMGDarkness") A_GetHurt		TNT1 A 0 A_SetScale(1.28)
		Q27B KL 1 Bright Light("DMGDarkness") A_GetHurt		TNT1 A 0 A_SetScale(1.24)
		Q27B MN 1 Bright Light("DMGDarkness") A_GetHurt		TNT1 A 0 A_SetScale(1.20)
		Q27B OP 1 Bright Light("DMGDarkness") A_GetHurt		TNT1 A 0 A_SetScale(1.16)
		Q27B QR 1 Bright Light("DMGDarkness") A_GetHurt		TNT1 A 0 A_SetScale(1.12)
		Q27B ST 1 Bright Light("DMGDarkness") A_GetHurt		TNT1 A 0 A_SetScale(1.08)
		Q27B UV 1 Bright Light("DMGDarkness") A_GetHurt		TNT1 A 0 A_SetScale(1.04)
		Q27B WX 1 Bright Light("DMGDarkness") A_GetHurt		TNT1 A 0 A_SetScale(1.0)
		Q27A AB 1 Bright Light("DMGDarkness") A_GetHurt		TNT1 A 0 A_SetScale(0.96)
		Q27A CD 1 Bright Light("DMGDarkness") A_GetHurt		TNT1 A 0 A_SetScale(0.92)
		Q27A EF 1 Bright Light("DMGDarkness") A_GetHurt		TNT1 A 0 A_SetScale(0.88)
		Q27A GH 1 Bright Light("DMGDarkness") A_GetHurt		TNT1 A 0 A_SetScale(0.84)
		Q27A IJ 1 Bright Light("DMGDarkness") A_GetHurt		TNT1 A 0 A_SetScale(0.80)
		Q27A KL 1 Bright Light("DMGDarkness") A_GetHurt		TNT1 A 0 A_SetScale(0.76)
		Q27A MN 1 Bright Light("DMGDarkness") A_GetHurt		TNT1 A 0 A_SetScale(0.72)
		Q27A OP 1 Bright Light("DMGDarkness") A_GetHurt		TNT1 A 0 A_SetScale(0.68)
		Q27A QR 1 Bright Light("DMGDarkness") A_GetHurt		TNT1 A 0 A_SetScale(0.64)
		Q27A ST 1 Bright Light("DMGDarkness") A_GetHurt		TNT1 A 0 A_SetScale(0.60)
		Q27A UV 1 Bright Light("DMGDarkness") A_GetHurt		TNT1 A 0 A_SetScale(0.56)
		Q27A WX 1 Bright Light("DMGDarkness") A_GetHurt		TNT1 A 0 A_SetScale(0.52)
		Q27A YZ 1 Bright Light("DMGDarkness") A_GetHurt		TNT1 A 0 A_SetScale(0.48)
		Q27B AB 1 Bright Light("DMGDarkness") A_GetHurt		TNT1 A 0 A_SetScale(0.44)
		Q27B CD 1 Bright Light("DMGDarkness") A_GetHurt		TNT1 A 0 A_SetScale(0.40)
		Q27B EF 1 Bright Light("DMGDarkness") A_GetHurt		TNT1 A 0 A_SetScale(0.36)
		Q27B GH 1 Bright Light("DMGDarkness") A_GetHurt		TNT1 A 0 A_SetScale(0.32)
		Q27B IJ 1 Bright Light("DMGDarkness") A_GetHurt		TNT1 A 0 A_SetScale(0.28)
		Q27B KL 1 Bright Light("DMGDarkness") A_GetHurt		TNT1 A 0 A_SetScale(0.24)
		Q27B MN 1 Bright Light("DMGDarkness") A_GetHurt		TNT1 A 0 A_SetScale(0.20)
		Q27B OP 1 Bright Light("DMGDarkness") A_GetHurt		TNT1 A 0 A_SetScale(0.16)
		Q27B QR 1 Bright Light("DMGDarkness") A_GetHurt		TNT1 A 0 A_SetScale(0.12)
		Q27B ST 1 Bright Light("DMGDarkness") A_GetHurt		TNT1 A 0 A_SetScale(0.08)
		Q27B UV 1 Bright Light("DMGDarkness") A_GetHurt		TNT1 A 0 A_SetScale(0.04)
		Q27B WX 1 Bright Light("DMGDarkness") A_GetHurt		
		TNT1 AAAAAAAAAAAAAAAAAAAAA 0 A_SpawnItemEx("DMGSuckPopper",0,0,0,frandom(7,-7),0,frandom(7,-7),random(0,359),32)
		TNT1 AAAAAAAAAAAAAAAAAAAAA 0 A_SpawnItemEx("DMGSuckPopper",0,0,0,frandom(7,-7),0,frandom(7,-7),random(0,359),32)
		TNT1 A 1
		Stop
	}
}

Actor DMGSuckPopper
{
	var int user_scale;
	+NOINTERACTION
	Scale 0.6
	Translation "0:255=%[0,0,0]:[1,1,1]"
	RenderStyle Add
	States
	{
	Spawn:
		TNT1 A 0 NoDelay A_SetScale(ScaleX*randompick(-1,1),ScaleY*randompick(-1,1))
		TNT1 A 0 A_Jump(255,"S1","S2","S3","S4","S5","S6","S7","S8","S9")
	S1:
		Q27B A 0
		Goto "PreSizing"
	S2:
		Q27B E 0
		Goto "PreSizing"
	S3:
		Q27B I 0
		Goto "PreSizing"
	S4:
		Q27B L 0
		Goto "PreSizing"
	S5:
		Q27B R 0
		Goto "PreSizing"
	S6:
		Q27B V 0
		Goto "PreSizing"
	S7:
		Q27A D 0
		Goto "PreSizing"
	S8:
		Q27A F 0
		Goto "PreSizing"
	S9:
		Q27A O 0
		Goto "PreSizing"
	PreSizing:
		"####" "#" 0 A_SetUserVar("user_scale",scaleX*100)
	Sizing:
		"####" "#" 2 A_SetScale((user_scale*0.01))
		"####" "#" 0 A_SetUserVar("user_scale",user_scale+6)
		"####" "#" 0 A_FadeOut(0.03)
		Loop
	}
}

//============================================
//============================================
//New Fusion Cannon FX - Major Cooke
//============================================
//============================================

Actor FusionPFX
{
	var int user_count;
	+NOINTERACTION
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_SetUserVar("user_count",0)
	InnerSpike:
		//This here spawns red plasmog (plasma fog) that will act similar to the BFG spray.
		TNT1 A 0 A_SpawnItemEx("RedPlasmog",random(0,15),0,frandom(0,1),0,0,random(12,16),random(0,359),32,128) //Up
		TNT1 A 0 A_SpawnItemEx("RedPlasmog",random(0,15),0,frandom(0,-1),0,0,random(-12,-16),random(0,359),32,128) //Down
		TNT1 A 0 A_SetUserVar("user_count",user_count+1)
		TNT1 A 0 A_JumpIf(user_count>=random(25,30),1)
		Loop
		TNT1 A 0 A_SetUserVar("user_count",0)
	OuterSpikes:
		TNT1 A 0 A_SpawnItemEx("RedPlasmog",random(20,40),0,frandom(0,1),0,0,random(6,8),random(0,359),32,128) //Up
		TNT1 A 0 A_SpawnItemEx("RedPlasmog",random(20,40),0,frandom(0,-1),0,0,random(-6,-8),random(0,359),32,128) //Down
		TNT1 A 0 A_SetUserVar("user_count",user_count+1)
		TNT1 A 0 A_JumpIf(user_count>=random(45,55),1)
		Loop
		TNT1 A 0 A_SetUserVar("user_count",0)
	MidVorpals:
		TNT1 A 0 A_SpawnItemEx("MiniRedPlasmog",random(0,60),0,frandom(0,1),0,0,random(1,5),random(0,359),32,128) //Up
		TNT1 A 0 A_SpawnItemEx("MiniRedPlasmog",random(0,60),0,frandom(0,-1),0,0,random(-1,-5),random(0,359),32,128) //Down
		TNT1 A 0 A_SetUserVar("user_count",user_count+1)
		TNT1 A 0 A_JumpIf(user_count>=random(35,65),1)
		Loop
		TNT1 A 0 A_SetUserVar("user_count",0)
		Stop
	}
}

Actor RedPlasmog
{
	+NOINTERACTION
	RenderStyle Add
	Translation "0:255=%[0,0,0]:[1,0,0]"
	Alpha 0.7
	Scale 0.2
	States
	{
	Spawn:
		TNT1 A 0 NoDelay A_SetScale(ScaleX*randompick(-1,1),ScaleY*randompick(-1,1))
	Choose1of4:
		TNT1 A 0 A_Jump(255,"R1","R2","R3","R4")
		Goto "R1"
	Playoff:
		//"####" "#" 3
		"####" "########" 1 Bright A_ScaleVelocity(0.7)
		"####" "#" 0 A_ScaleVelocity(-1)
		"####" "########" 1 Bright A_ScaleVelocity(1.3)
		//"####" "#" 3 
		"####" "#" 0 A_ChangeVelocity(random(15,35),0,0,3)
		"####" "#" 1 Bright A_FadeOut(0.03)
		Wait
	R1:
		TNT1 A 0 A_Jump(255,"T1","T2","T3","T4","T5","T6","T7","T8","T9","T10","T11","T12","T13","T14","T15","T16","T17","T18","T19","T20","T21","T22")
	T1:
		X038 A 0
		Goto "Playoff"
	T2:
		X038 B 0
		Goto "Playoff"
	T3:
		X038 C 0
		Goto "Playoff"
	T4:
		X038 D 0
		Goto "Playoff"
	T5:
		X038 E 0
		Goto "Playoff"
	T6:
		X038 F 0
		Goto "Playoff"
	T7:
		X038 G 0
		Goto "Playoff"
	T8:
		X038 H 0
		Goto "Playoff"
	T9:
		X038 I 0
		Goto "Playoff"
	T10:
		X038 J 0
		Goto "Playoff"
	T11:
		X038 K 0
		Goto "Playoff"
	T12:
		X038 L 0
		Goto "Playoff"
	T13:
		X038 M 0
		Goto "Playoff"
	T14:
		X038 N 0
		Goto "Playoff"
	T15:
		X038 O 0
		Goto "Playoff"
	T16:
		X038 P 0
		Goto "Playoff"
	T17:
		X038 Q 0
		Goto "Playoff"
	T18:
		X038 R 0
		Goto "Playoff"
	T19:
		X038 S 0
		Goto "Playoff"
	T20:
		X038 T 0
		Goto "Playoff"
	T21:
		X038 U 0
		Goto "Playoff"
	T22:
		X038 V 0
		Goto "Playoff"
	R2:
		TNT1 A 0 A_Jump(255,"U1","U2","U3","U4","U5","U6","U7","U8","U9","U10","U11","U12","U13","U14","U15","U16","U17","U18","U19","U20","U21","U22")
	U1:
		X039 A 0
		Goto "Playoff"
	U2:
		X039 B 0
		Goto "Playoff"
	U3:
		X039 C 0
		Goto "Playoff"
	U4:
		X039 D 0
		Goto "Playoff"
	U5:
		X039 E 0
		Goto "Playoff"
	U6:
		X039 F 0
		Goto "Playoff"
	U7:
		X039 G 0
		Goto "Playoff"
	U8:
		X039 H 0
		Goto "Playoff"
	U9:
		X039 I 0
		Goto "Playoff"
	U10:
		X039 J 0
		Goto "Playoff"
	U11:
		X039 K 0
		Goto "Playoff"
	U12:
		X039 L 0
		Goto "Playoff"
	U13:
		X039 M 0
		Goto "Playoff"
	U14:
		X039 N 0
		Goto "Playoff"
	U15:
		X039 O 0
		Goto "Playoff"
	U16:
		X039 P 0
		Goto "Playoff"
	U17:
		X039 Q 0
		Goto "Playoff"
	U18:
		X039 R 0
		Goto "Playoff"
	U19:
		X039 S 0
		Goto "Playoff"
	U20:
		X039 T 0
		Goto "Playoff"
	U21:
		X039 U 0
		Goto "Playoff"
	U22:
		X039 V 0
		Goto "Playoff"
	R3:
		TNT1 A 0 A_Jump(255,"V1","V2","V3","V4","V5","V6","V7","V8","V9","V10","V11","V12","V13","V14","V15","V16","V17","V18","V19","V20","V21","V22")
	V1:
		X040 A 0
		Goto "Playoff"
	V2:
		X040 B 0
		Goto "Playoff"
	V3:
		X040 C 0
		Goto "Playoff"
	V4:
		X040 D 0
		Goto "Playoff"
	V5:
		X040 E 0
		Goto "Playoff"
	V6:
		X040 F 0
		Goto "Playoff"
	V7:
		X040 G 0
		Goto "Playoff"
	V8:
		X040 H 0
		Goto "Playoff"
	V9:
		X040 I 0
		Goto "Playoff"
	V10:
		X040 J 0
		Goto "Playoff"
	V11:
		X040 K 0
		Goto "Playoff"
	V12:
		X040 L 0
		Goto "Playoff"
	V13:
		X040 M 0
		Goto "Playoff"
	V14:
		X040 N 0
		Goto "Playoff"
	V15:
		X040 O 0
		Goto "Playoff"
	V16:
		X040 P 0
		Goto "Playoff"
	V17:
		X040 Q 0
		Goto "Playoff"
	V18:
		X040 R 0
		Goto "Playoff"
	V19:
		X040 S 0
		Goto "Playoff"
	V20:
		X040 T 0
		Goto "Playoff"
	V21:
		X040 U 0
		Goto "Playoff"
	V22:
		X040 V 0
		Goto "Playoff"
	R4:
		TNT1 A 0 A_Jump(255,"W1","W2","W3","W4","W5","W6","W7","W8","W9","W10","W11","W12","W13","W14","W15","W16","W17","W18","W19","W20","W21","W22")
	W1:
		X041 A 0
		Goto "Playoff"
	W2:
		X041 B 0
		Goto "Playoff"
	W3:
		X041 C 0
		Goto "Playoff"
	W4:
		X041 D 0
		Goto "Playoff"
	W5:
		X041 E 0
		Goto "Playoff"
	W6:
		X041 F 0
		Goto "Playoff"
	W7:
		X041 G 0
		Goto "Playoff"
	W8:
		X041 H 0
		Goto "Playoff"
	W9:
		X041 I 0
		Goto "Playoff"
	W10:
		X041 J 0
		Goto "Playoff"
	W11:
		X041 K 0
		Goto "Playoff"
	W12:
		X041 L 0
		Goto "Playoff"
	W13:
		X041 M 0
		Goto "Playoff"
	W14:
		X041 N 0
		Goto "Playoff"
	W15:
		X041 O 0
		Goto "Playoff"
	W16:
		X041 P 0
		Goto "Playoff"
	W17:
		X041 Q 0
		Goto "Playoff"
	W18:
		X041 R 0
		Goto "Playoff"
	W19:
		X041 S 0
		Goto "Playoff"
	W20:
		X041 T 0
		Goto "Playoff"
	W21:
		X041 U 0
		Goto "Playoff"
	W22:
		X041 V 0
		Goto "Playoff"
	}
}

Actor MiniRedPlasmog : RedPlasmog
{
	Scale 0.15
	Alpha 0.5
	Translation "0:255=%[0,0,0]:[1,0.5,0.5]"
}


//============================================
//============================================
//New Dark Flame Staff FX - Major Cooke
//============================================
//============================================

Actor KESFX
{
	var int user_count;
	Projectile
	+THRUACTORS
	Radius 1
	Height 1
	Speed 20
	Damage 0
	WeaveIndexZ 32
	//WeaveIndexXY 16
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_SetUserVar("user_count",0)
	Move1:
		TNT1 A 0 A_Weave(2,2,3,3)
		TNT1 A 0 A_SetUserVar("user_count",0)
		TNT1 A 1 A_SpawnItemEx("KESCloud1",0,0,0,0,0,0,0,32)
		TNT1 A 0 A_JumpIf(user_count>=15,1)
		Loop
		TNT1 A 0 A_Weave(4,2,3,3)
		TNT1 A 0 A_SetUserVar("user_count",0)
		Goto "Move1"
	Death:
		TNT1 A 0
		Stop
	}
}

Actor KESFX2 : KESFX
{
	//WeaveIndexZ 32
	//WeaveIndexXY 16
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_SetUserVar("user_count",0)
	Move1:
		TNT1 A 0 A_Weave(-2,2,3,3)
		TNT1 A 0 A_SetUserVar("user_count",0)
		TNT1 A 1 A_SpawnItemEx("KESCloud1",0,0,0,0,0,0,0,32)
		TNT1 A 0 A_JumpIf(user_count>=1,1)
		Loop
		TNT1 A 0 A_Weave(-4,2,3,3)
		TNT1 A 0 A_SetUserVar("user_count",0)
		Goto "Move1"
	Death:
		TNT1 A 0
		Stop
	}
}

Actor KESFX3 : KESFX
{
	//WeaveIndexZ 16
	//WeaveIndexXY 32
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_SetUserVar("user_count",0)
	Move1:
		TNT1 A 0 A_Weave(-2,-2,3,3)
		TNT1 A 0 A_SetUserVar("user_count",0)
		TNT1 A 1 A_SpawnItemEx("KESCloud1",0,0,0,0,0,0,0,32)
		TNT1 A 0 A_JumpIf(user_count>=1,1)
		Loop
		TNT1 A 0 A_Weave(-4,-2,3,3)
		TNT1 A 0 A_SetUserVar("user_count",0)
		Goto "Move1"
	Death:
		TNT1 A 0
		Stop
	}
}

Actor KESFX4 : KESFX
{
	//WeaveIndexZ 0
	//WeaveIndexXY 48
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_SetUserVar("user_count",0)
	Move1:
		TNT1 A 0 A_Weave(2,-2,3,3)
		TNT1 A 0 A_SetUserVar("user_count",0)
		TNT1 A 1 A_SpawnItemEx("KESCloud1",0,0,0,0,0,0,0,32)
		TNT1 A 0 A_JumpIf(user_count>=1,1)
		Loop
		TNT1 A 0 A_Weave(4,-2,3,3)
		TNT1 A 0 A_SetUserVar("user_count",0)
		Goto "Move1"
	Death:
		TNT1 A 0
		Stop
	}
}

Actor KESCloudSpawner1
{
	+NOINTERACTION
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 AA 0 A_SpawnItemEx("KESCloud1",0,0,0,frandom(-10,10),0,frandom(-10,10),random(0,359),32)
		TNT1 AAAAAA 0 A_SpawnItemEx("KESCloud1",0,0,0,frandom(-10,10),0,frandom(-10,10),random(0,359),32,128)
		Stop
	}
}

Actor KESCloud1
{
	+NOINTERACTION
	RenderStyle Translucent
	Alpha 0.55
	Scale 0.15
	Translation "0:255=%[0,0,0]:[0.25,0.25,0.25]"
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_Jump(255,"S1","S2","S3","S4")
		S1:
		X038 A 0
		Goto "Playoff"
		S2:
		X039 A 0
		Goto "Playoff"
		S3:
		X040 A 0
		Goto "Playoff"
		S4:
		X041 A 0
		Goto "Playoff"
	Playoff:
		//"####" "#####" 1 A_ScaleVelocity(0.6)
		//"####" "#" 1 A_ScaleVelocity(-1.00)
		//"####" "#" 1 A_ChangeVelocity(cos(-pitch)*velx,vely,0,3)
		//Goto "Fader"
	Fader:
		"####" "#" 0 A_ScaleVelocity(1.02)
		"####" "#" 1 A_FadeOut(0.02)
		Loop
	}
}

//==============================================================================
//New flashes by DBT, based in the ones from AlphaEnt's quake4 weapons mod
//Graphic edit by Major Cooke
//==============================================================================
Actor MuzzleFlashOrange
{
	RenderStyle Add
	Radius 1
	Height 1
	PROJECTILE
	Speed 9
	Damage 0
	Scale 0.1
	+NOINTERACTION
	States
	{
	Spawn:
		TNT1 A 1
		TNT1 A 0 A_Stop
		TNT1 M 0 Bright A_Jump(256,"Spawn1","Spawn2","Spawn3","Spawn4","Spawn5","Spawn6")
	Spawn1:
		MUZ2 A 2 bright
		Stop
	Spawn2:
		MUZ2 B 2 bright
		Stop 
	Spawn3:
		MUZ2 C 2 bright
		Stop
	Spawn4:
		MUZ2 D 2 bright
		Stop
	Spawn5:
		MUZ2 E 2 bright
		Stop
	Spawn6:
		MUZ2 F 2 bright
		Stop
	}
}

Actor MuzzleFlashOrangeSmall : MuzzleFlashOrange
{	Scale 0.067	}

Actor MuzzleFlashGreen : MuzzleFlashOrange
{
	Scale 0.13
	States
	{
	Spawn:
		TNT1 A 1
		TNT1 A 0 A_Stop
		TNT1 M 0 Bright A_Jump(256,"Spawn1","Spawn2","Spawn3","Spawn4","Spawn5")
	Spawn1:
		MUZ2 M 2 bright
		Stop
	Spawn2:
		MUZ2 N 2 bright
		Stop 
	Spawn3:
		MUZ2 O 2 bright
		Stop
	Spawn4:
		MUZ2 P 2 bright
		Stop
	Spawn5:
		MUZ2 Q 2 bright
		Stop
	}
}

Actor MuzzleFlashGreenSmall : MuzzleFlashGreen
{	Scale 0.072	}



Actor MuzzleFlashBlue : MuzzleFlashOrange
{
	Scale 0.14
	States
	{
	Spawn:
		TNT1 A 1
		TNT1 A 0 A_Stop
		TNT1 M 0 Bright A_Jump(256,"Spawn1","Spawn2","Spawn3","Spawn4","Spawn5","Spawn6")
	Spawn1:
		MUZ2 g 2 bright
		Stop
	Spawn2:
		MUZ2 h 2 bright
		Stop 
	Spawn3:
		MUZ2 i 2 bright
		Stop
	Spawn4:
		MUZ2 j 2 bright
		Stop
	Spawn5:
		MUZ2 k 2 bright
		Stop
		Spawn6:
		MUZ2 l 2 bright
		Stop
	}
}

Actor MuzzleFlashBlueSmall : MuzzleFlashBlue
{	Scale 0.082	}

//==============================================================================
Actor SpecialExploSpawner
{
	+NOINTERACTION
	States
	{
	Spawn:
		TNT1 A 0
		//TNT1 A 0 A_Jump(255,"s1","s2","s3","s4")
	//s1:
		TNT1 A 0 A_SpawnItemEx("ExploMediumBigBack1",0,0,0,0,0,0,0,32)
		TNT1 A 2 A_PlaySound("HLExplosion")//("weapons/dnrocketexplo")
		Stop
	}
}

Actor SpecialExploSpawner2
{
	+NOINTERACTION
	States
	{
	Spawn:
		TNT1 A 0
		//TNT1 A 0 A_Jump(256,"s1","s2","s3","s4")
	//s1:
		TNT1 A 0 A_SpawnItemEx("ExploMediumBigBack1NoGL",0,0,0,velx,vely,velz,0,32|SXF_ABSOLUTEMOMENTUM)
		//TNT1 A 2 A_PlaySound("weapons/dnrocketexplo")
		Stop
	}
}

Actor ExploMediumBigBack1NoGL : ExploMediumBigBack1 {}
Actor ExploMediumBigBack2NoGL : ExploMediumBigBack2 {}

Actor SpecialExploShockwave
{
	var int user_angle;
	+NOINTERACTION
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_SetUserVar("user_angle",0)
	RingLoop:
		TNT1 A 0 A_SpawnItemEx("SpecialExploShockwaveMissile",0,0,0,15,0,0,user_angle,32)
		TNT1 A 0 A_SetUserVar("user_angle",user_angle+5)
		TNT1 A 0 A_JumpIf(user_angle>=356,1)
		Loop
		TNT1 A 0
		Stop
	}
}

Actor SpecialExploShockwaveMissile
{
	Projectile
	+THRUACTORS
	+STEPMISSILE
	Radius 8
	Height 2
	MaxStepHeight 2048
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 5 A_SpawnItemEx("SpecialExploSpawner2",random(-10,10),random(-30,30),random(-15,15),0,0,0,0,32)
		Loop
	Death:
		TNT1 A 0
		Stop
	}
}

//==============================================================================
//New QSG effects
//==============================================================================

Actor InfinityPortalFX
{
	var int user_tarray[4];
	//[0] = count
	//[1] = first angle; constant
	//[2] = second angle; constant
	//[3] = third angle; constant
	+NOINTERACTION
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_SetUserArray("user_tarray",0,0) //A_SetUserVar("user_count",0)	TNT1 A 0 A_SetUserVar("user_angle",0)
		TNT1 A 0 A_SetUserArray("user_tarray",1,0)
		TNT1 A 0 A_SetUserArray("user_tarray",2,user_tarray[1]+120)
		TNT1 A 0 A_SetUserArray("user_tarray",3,user_tarray[2]+120)
	Emitter:
		TNT1 AAAA 0 A_SpawnItemEx("IPMembraneFog",0,0,0,frandom(-12,12),0,frandom(-12,12),random(0,359),32)
		TNT1 AAAAAAAA 0 A_SpawnItemEx("IPMembraneFog",0,0,0,frandom(-12,12),0,frandom(-12,12),random(0,359),32,128)
		TNT1 A 0 A_SpawnItemEx("IPBlackFog",-200,0,0,5,0,0,user_tarray[1],32)
		TNT1 A 0 A_SpawnItemEx("IPBlackFog",-200,0,0,5,0,0,user_tarray[2],32)
		TNT1 A 0 A_SpawnItemEx("IPBlackFog",-200,0,0,5,0,0,user_tarray[3],32)
		TNT1 A 0 A_SetUserArray("user_tarray",0,user_tarray[0]+1)
		TNT1 A 0 A_SetUserArray("user_tarray",1,user_tarray[1]+5)
		TNT1 A 0 A_SetUserArray("user_tarray",2,user_tarray[1]+120)
		TNT1 A 0 A_SetUserArray("user_tarray",3,user_tarray[2]+120)
		TNT1 A 1 A_JumpIf(user_tarray[0]>=600,1)
		Loop
	Emitter2:
		TNT1 AAAA 0 A_SpawnItemEx("IPMembraneFog",0,0,0,frandom(-12,12),0,frandom(-12,12),random(0,359),32)
		TNT1 AAAAAAAA 0 A_SpawnItemEx("IPMembraneFog",0,0,0,frandom(-12,12),0,frandom(-12,12),random(0,359),32,128)
		TNT1 A 0 A_SetUserArray("user_tarray",0,user_tarray[0]+1)
		TNT1 A 1 A_JumpIf(user_tarray[0]>=635,1)
		Loop
		TNT1 A 0
		Stop
	}
}

Actor IPBlackFog
{
	var int user_scale;
	+NOINTERACTION
	RenderStyle Stencil
	StencilColor "Black"
	//Alpha 1
	Scale 0.0
	States
	{
	Spawn:
		TNT1 A 0 NoDelay A_SetScale(ScaleX*randompick(-1,1),ScaleY*randompick(-1,1))
		NB03 L 1 A_SetScale(0)
		//NB03 L 0 A_SetUserVar("user_scale",(scaleX*100))
		NB03 LLLLLLLLLLLLLLLLLLL 1 A_SetScale((ScaleX+0.0125))
		NB03 LLLLLLLLLLLLLLLLLLL 1 A_SetScale((ScaleX+0.0125))
		Stop
	}
}

Actor IPMembraneFog
{
	var int user_count;
	+NOINTERACTION
	RenderStyle Translucent
	Scale 0.05
	Alpha 0.0
	Translation "0:255=%[0,0,0]:[0.2,0,0.6]"
	States
	{
	Spawn:
		TNT1 A 0 NoDelay A_SetScale(ScaleX*randompick(-1,1),ScaleY*randompick(-1,1))
		TNT1 A 0 A_SetUserVar("user_count",0)
		Goto R1
	Playoff:
		"####" "#" 0 A_SetScale((ScaleX+0.035))
		"####" "#" 0 A_FadeTo(0.65,0.1,0)
		"####" "#" 1 A_ScaleVelocity(0.85)
		"####" "#" 0 A_SetUserVar("user_count",user_count+1)
		"####" "#" 0 A_JumpIf(user_count>=15,1)
		Loop
		"####" "#" 0 A_ScaleVelocity(-1)
		"####" "######" 1 A_ScaleVelocity(1.3)
	Playoff2:
		"####" "#" 1 A_FadeTo(0,0.1,1)
		Loop
	R1:
		TNT1 A 0 A_Jump(256,
	"T1","T2","T3","T4","T5","T6","T7","T8","T9","T10","T11","T12","T13","T14","T15","T16","T17","T18","T19","T20","T21","T22",
	"U1","U2","U3","U4","U5","U6","U7","U8","U9","U10","U11","U12","U13","U14","U15","U16","U17","U18","U19","U20","U21","U22",
	"V1","V2","V3","V4","V5","V6","V7","V8","V9","V10","V11","V12","V13","V14","V15","V16","V17","V18","V19","V20","V21","V22",
	"W1","W2","W3","W4","W5","W6","W7","W8","W9","W10","W11","W12","W13","W14","W15","W16","W17","W18","W19","W20","W21","W22")
	T1:		X038 A 0 A_Jump(256,"Playoff")
	T2:		X038 B 0 A_Jump(256,"Playoff")
	T3:		X038 C 0 A_Jump(256,"Playoff")
	T4:		X038 D 0 A_Jump(256,"Playoff")
	T5:		X038 E 0 A_Jump(256,"Playoff")
	T6:		X038 F 0 A_Jump(256,"Playoff")
	T7:		X038 G 0 A_Jump(256,"Playoff")
	T8:		X038 H 0 A_Jump(256,"Playoff")
	T9:		X038 I 0 A_Jump(256,"Playoff")
	T10:	X038 J 0 A_Jump(256,"Playoff")
	T11:	X038 K 0 A_Jump(256,"Playoff")
	T12:	X038 L 0 A_Jump(256,"Playoff")
	T13:	X038 M 0 A_Jump(256,"Playoff")
	T14:	X038 N 0 A_Jump(256,"Playoff")
	T15:	X038 O 0 A_Jump(256,"Playoff")
	T16:	X038 P 0 A_Jump(256,"Playoff")
	T17:	X038 Q 0 A_Jump(256,"Playoff")
	T18:	X038 R 0 A_Jump(256,"Playoff")
	T19:	X038 S 0 A_Jump(256,"Playoff")
	T20:	X038 T 0 A_Jump(256,"Playoff")
	T21:	X038 U 0 A_Jump(256,"Playoff")
	T22:	X038 V 0 A_Jump(256,"Playoff")
	U1:		X039 A 0 A_Jump(256,"Playoff")
	U2:		X039 B 0 A_Jump(256,"Playoff")
	U3:		X039 C 0 A_Jump(256,"Playoff")
	U4:		X039 D 0 A_Jump(256,"Playoff")
	U5:		X039 E 0 A_Jump(256,"Playoff")
	U6:		X039 F 0 A_Jump(256,"Playoff")
	U7:		X039 G 0 A_Jump(256,"Playoff")
	U8:		X039 H 0 A_Jump(256,"Playoff")
	U9:		X039 I 0 A_Jump(256,"Playoff")
	U10:	X039 J 0 A_Jump(256,"Playoff")
	U11:	X039 K 0 A_Jump(256,"Playoff")
	U12:	X039 L 0 A_Jump(256,"Playoff")
	U13:	X039 M 0 A_Jump(256,"Playoff")
	U14:	X039 N 0 A_Jump(256,"Playoff")
	U15:	X039 O 0 A_Jump(256,"Playoff")
	U16:	X039 P 0 A_Jump(256,"Playoff")
	U17:	X039 Q 0 A_Jump(256,"Playoff")
	U18:	X039 R 0 A_Jump(256,"Playoff")
	U19:	X039 S 0 A_Jump(256,"Playoff")
	U20:	X039 T 0 A_Jump(256,"Playoff")
	U21:	X039 U 0 A_Jump(256,"Playoff")
	U22:	X039 V 0 A_Jump(256,"Playoff")
	V1:		X040 A 0 A_Jump(256,"Playoff")
	V2:		X040 B 0 A_Jump(256,"Playoff")
	V3:		X040 C 0 A_Jump(256,"Playoff")
	V4:		X040 D 0 A_Jump(256,"Playoff")
	V5:		X040 E 0 A_Jump(256,"Playoff")
	V6:		X040 F 0 A_Jump(256,"Playoff")
	V7:		X040 G 0 A_Jump(256,"Playoff")
	V8:		X040 H 0 A_Jump(256,"Playoff")
	V9:		X040 I 0 A_Jump(256,"Playoff")
	V10:	X040 J 0 A_Jump(256,"Playoff")
	V11:	X040 K 0 A_Jump(256,"Playoff")
	V12:	X040 L 0 A_Jump(256,"Playoff")
	V13:	X040 M 0 A_Jump(256,"Playoff")
	V14:	X040 N 0 A_Jump(256,"Playoff")
	V15:	X040 O 0 A_Jump(256,"Playoff")
	V16:	X040 P 0 A_Jump(256,"Playoff")
	V17:	X040 Q 0 A_Jump(256,"Playoff")
	V18:	X040 R 0 A_Jump(256,"Playoff")
	V19:	X040 S 0 A_Jump(256,"Playoff")
	V20:	X040 T 0 A_Jump(256,"Playoff")
	V21:	X040 U 0 A_Jump(256,"Playoff")
	V22:	X040 V 0 A_Jump(256,"Playoff")
	W1:		X041 A 0 A_Jump(256,"Playoff")
	W2:		X041 B 0 A_Jump(256,"Playoff")
	W3:		X041 C 0 A_Jump(256,"Playoff")
	W4:		X041 D 0 A_Jump(256,"Playoff")
	W5:		X041 E 0 A_Jump(256,"Playoff")
	W6:		X041 F 0 A_Jump(256,"Playoff")
	W7:		X041 G 0 A_Jump(256,"Playoff")
	W8:		X041 H 0 A_Jump(256,"Playoff")
	W9:		X041 I 0 A_Jump(256,"Playoff")
	W10:	X041 J 0 A_Jump(256,"Playoff")
	W11:	X041 K 0 A_Jump(256,"Playoff")
	W12:	X041 L 0 A_Jump(256,"Playoff")
	W13:	X041 M 0 A_Jump(256,"Playoff")
	W14:	X041 N 0 A_Jump(256,"Playoff")
	W15:	X041 O 0 A_Jump(256,"Playoff")
	W16:	X041 P 0 A_Jump(256,"Playoff")
	W17:	X041 Q 0 A_Jump(256,"Playoff")
	W18:	X041 R 0 A_Jump(256,"Playoff")
	W19:	X041 S 0 A_Jump(256,"Playoff")
	W20:	X041 T 0 A_Jump(256,"Playoff")
	W21:	X041 U 0 A_Jump(256,"Playoff")
	W22:	X041 V 0 A_Jump(256,"Playoff")
	Goto Playoff //Safety Sanity Check
	}
}

//==============================================================================
//==============================================================================
//New Hand of God alt FX
//==============================================================================
//==============================================================================

Actor HeavenlyPortalFX
{
	var int user_count[8];
	var int user_column[8];
	var int user_angle[2];
	+NOINTERACTION
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_SetUserArray("user_angle",0,0)
		TNT1 A 0 A_SetUserArray("user_angle",1,0)
		TNT1 A 0 A_SetUserArray("user_column",0,0)
		TNT1 A 0 A_SetUserArray("user_column",1,8)
		TNT1 A 0 A_SetUserArray("user_column",2,16)
		TNT1 A 0 A_SetUserArray("user_column",3,24)
		TNT1 A 0 A_SetUserArray("user_column",4,32)
		TNT1 A 0 A_SetUserArray("user_column",5,40)
		TNT1 A 0 A_SetUserArray("user_column",6,48)
		TNT1 A 0 A_SetUserArray("user_column",7,56)
	Time1:
		TNT1 A 0 A_SpawnItemEx("HeavenPuff",-50,0,user_column[0],10,0,0,user_angle[0],32)
		TNT1 A 0 A_SpawnItemEx("HeavenPuff",-50,0,user_column[0],10,0,0,user_angle[0]+90,32)
		TNT1 A 0 A_SpawnItemEx("HeavenPuff",-50,0,user_column[0],10,0,0,user_angle[0]+180,32)
		TNT1 A 0 A_SpawnItemEx("HeavenPuff",-50,0,user_column[0],10,0,0,user_angle[0]+270,32)
		TNT1 A 0 A_JumpIf(user_count[0]>=16,"Time2")
		TNT1 A 0 A_SetUserArray("user_angle",0,user_angle[0]+10)
		TNT1 A 1 A_SetUserArray("user_count",0,user_count[0]+1)
		Loop
	Time2:
		TNT1 A 0 A_SpawnItemEx("HeavenPuff",-50,0,user_column[1],10,0,0,user_angle[1],32)
		TNT1 A 0 A_SpawnItemEx("HeavenPuff",-50,0,user_column[1],10,0,0,user_angle[1]+90,32)
		TNT1 A 0 A_SpawnItemEx("HeavenPuff",-50,0,user_column[1],10,0,0,user_angle[1]+180,32)
		TNT1 A 0 A_SpawnItemEx("HeavenPuff",-50,0,user_column[1],10,0,0,user_angle[1]+270,32)
		TNT1 A 0 A_JumpIf(user_count[1]>=16,"Time3")
		TNT1 A 0 A_SetUserArray("user_angle",1,user_angle[1]-10)
		TNT1 A 0 A_SetUserArray("user_count",1,user_count[1]+1)
		Goto Time1
	Time3:
		TNT1 A 0 A_SpawnItemEx("HeavenPuff",-50,0,user_column[2],10,0,0,user_angle[0],32)
		TNT1 A 0 A_SpawnItemEx("HeavenPuff",-50,0,user_column[2],10,0,0,user_angle[0]+90,32)
		TNT1 A 0 A_SpawnItemEx("HeavenPuff",-50,0,user_column[2],10,0,0,user_angle[0]+180,32)
		TNT1 A 0 A_SpawnItemEx("HeavenPuff",-50,0,user_column[2],10,0,0,user_angle[0]+270,32)
		TNT1 A 0 A_JumpIf(user_count[2]>=16,"Time4")
		TNT1 A 0 A_SetUserArray("user_angle",0,user_angle[0]+10)
		TNT1 A 1 A_SetUserArray("user_count",2,user_count[2]+1)
		Goto Time1
	Time4:
		TNT1 A 0 A_SpawnItemEx("HeavenPuff",-50,0,user_column[3],10,0,0,user_angle[1],32)
		TNT1 A 0 A_SpawnItemEx("HeavenPuff",-50,0,user_column[3],10,0,0,user_angle[1]+90,32)
		TNT1 A 0 A_SpawnItemEx("HeavenPuff",-50,0,user_column[3],10,0,0,user_angle[1]+180,32)
		TNT1 A 0 A_SpawnItemEx("HeavenPuff",-50,0,user_column[3],10,0,0,user_angle[1]+270,32)
		TNT1 A 0 A_JumpIf(user_count[3]>=16,"Time5")
		TNT1 A 0 A_SetUserArray("user_angle",1,user_angle[1]-10)
		TNT1 A 0 A_SetUserArray("user_count",3,user_count[3]+1)
		Goto Time1
	Time5:
		TNT1 A 0 A_SpawnItemEx("HeavenPuff",-50,0,user_column[4],10,0,0,user_angle[0],32)
		TNT1 A 0 A_SpawnItemEx("HeavenPuff",-50,0,user_column[4],10,0,0,user_angle[0]+90,32)
		TNT1 A 0 A_SpawnItemEx("HeavenPuff",-50,0,user_column[4],10,0,0,user_angle[0]+180,32)
		TNT1 A 0 A_SpawnItemEx("HeavenPuff",-50,0,user_column[4],10,0,0,user_angle[0]+270,32)
		TNT1 A 0 A_JumpIf(user_count[4]>=16,"Time6")
		TNT1 A 0 A_SetUserArray("user_angle",0,user_angle[0]+10)
		TNT1 A 1 A_SetUserArray("user_count",4,user_count[4]+1)
		Goto Time1
	Time6:
		TNT1 A 0 A_SpawnItemEx("HeavenPuff",-50,0,user_column[5],10,0,0,user_angle[1],32)
		TNT1 A 0 A_SpawnItemEx("HeavenPuff",-50,0,user_column[5],10,0,0,user_angle[1]+90,32)
		TNT1 A 0 A_SpawnItemEx("HeavenPuff",-50,0,user_column[5],10,0,0,user_angle[1]+180,32)
		TNT1 A 0 A_SpawnItemEx("HeavenPuff",-50,0,user_column[5],10,0,0,user_angle[1]+270,32)
		TNT1 A 0 A_JumpIf(user_count[5]>=16,"Time7")
		TNT1 A 0 A_SetUserArray("user_angle",1,user_angle[1]-10)
		TNT1 A 0 A_SetUserArray("user_count",5,user_count[5]+1)
		Goto Time1
	Time7:
		TNT1 A 0 A_SpawnItemEx("HeavenPuff",-50,0,user_column[6],10,0,0,user_angle[0],32)
		TNT1 A 0 A_SpawnItemEx("HeavenPuff",-50,0,user_column[6],10,0,0,user_angle[0]+90,32)
		TNT1 A 0 A_SpawnItemEx("HeavenPuff",-50,0,user_column[6],10,0,0,user_angle[0]+180,32)
		TNT1 A 0 A_SpawnItemEx("HeavenPuff",-50,0,user_column[6],10,0,0,user_angle[0]+270,32)
		TNT1 A 0 A_JumpIf(user_count[6]>=16,"Time8")
		TNT1 A 0 A_SetUserArray("user_angle",0,user_angle[0]+10)
		TNT1 A 1 A_SetUserArray("user_count",6,user_count[6]+1)
		Goto Time1
	Time8:
		TNT1 A 0 A_SpawnItemEx("HeavenPuff",-50,0,user_column[7],10,0,0,user_angle[1],32)
		TNT1 A 0 A_SpawnItemEx("HeavenPuff",-50,0,user_column[7],10,0,0,user_angle[1]+90,32)
		TNT1 A 0 A_SpawnItemEx("HeavenPuff",-50,0,user_column[7],10,0,0,user_angle[1]+180,32)
		TNT1 A 0 A_SpawnItemEx("HeavenPuff",-50,0,user_column[7],10,0,0,user_angle[1]+270,32)
		TNT1 A 0 A_SetUserArray("user_angle",1,user_angle[1]-10)
		TNT1 A 1 A_SetUserArray("user_count",7,user_count[7]+1)
		TNT1 A 0 A_JumpIf(user_count[7]>=90,1)
		Goto Time1
	Ending:
		TNT1 A 0
		Stop
	}
}

Actor HeavenPuff
{
	+NOINTERACTION
	Scale 0.5
	RenderStyle Add
	States
	{
	Spawn:
		TNT1 A 0 NoDelay A_SetScale(ScaleX*randompick(-1,1),ScaleY*randompick(-1,1))
		TNT1 A 0 A_Jump(128,"Two","Three")
	One:
		X006 ABCDEFGHIJKLMNOP 1 Bright A_ScaleVelocity(0.98)
		//X006 LMNOP 1 Bright A_FadeOut(0.05)
		Stop
	Two:
		X007 ABCDEFGHIJ 1 Bright A_ScaleVelocity(0.98)
		Stop
	Three:
		X033 ABCDEFGHIJKLMNOPQR 1 Bright A_ScaleVelocity(0.98)
		Stop
	}
}

//==============================================================================
//==============================================================================
//	New DBT Death Effects
//==============================================================================
//==============================================================================

Actor DBTShardFog
{
	var int user_scale;
	+NOINTERACTION
	RenderStyle Add
	Alpha 0.4
	Scale 0.3
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_Jump(256,"T1","T2","T3","T4","T5","T6")
	T1:
		MUZ2 G 0
		Goto Playoff
	T2:
		MUZ2 H 0
		Goto Playoff
	T3:
		MUZ2 I 0
		Goto Playoff
	T4:
		MUZ2 J 0
		Goto Playoff
	T5:
		MUZ2 K 0
		Goto Playoff
	T6:
		MUZ2 L 0
		Goto Playoff
	Playoff:
		"####" "#" 0 A_SetScale(scaleX*1.05)
		"####" "#" 2 A_FadeOut(0.01)
		Loop
	}
}

Actor DBTShardExplosion
{
	var int user_count[3];
	+NOINTERACTION
	States
	{
	Spawn:
		TNT1 A 0
	DustOff:
		TNT1 AAAA 0 A_SpawnItemEx("DBTColdExploBack",random(-5,5),0,random(-5,5),0,0,random(2,6),random(0,360),32)
		TNT1 AAAAAAAAAAA 0 A_SpawnItemEx("DBTColdExploMiniBack",random(-5,5),0,random(-5,5),0,0,random(2,6),random(0,360),32,192)
		TNT1 A 2
		TNT1 AAAAAAAAAAAAAAAAAAAAAA 0 A_SpawnItemEx("DBTColdSmoke",frandom(0,5),0,frandom(0,1),frandom(-2,2),0,frandom(0,3),random(0,360),32)
		//TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAAA 0 A_SpawnItemEx("DBTColdSmoke",frandom(5,10),0,0,frandom(15,20),0,0,random(0,360),32)
		Stop
	}
}

Actor DBTColdExploBack : PBExploBack
{
	Translation "0:255=%[0,0,0]:[0.2,0.1,1]"
}

Actor DBTColdExploMiniBack : PBExploMiniBack
{
	Translation "0:255=%[0,0,0]:[0.2,0.1,1]"
}

Actor DBTColdSmoke : PBMidSmoke
{
	Translation "0:255=%[0,0,0]:[0,0,1]"
}

Actor DBTFrozenCrackle
{
	Projectile
	+NOINTERACTION
	+DONTSPLASH
	Scale 3
	Alpha 0
	RenderStyle Translucent
	Translation "0:255=%[0,0,0]:[0,0.25,1]"
	States
	{
	Spawn:
		TNT1 A 0
		GDB2 A 0 A_FadeTo(1,0.05,0)
		GDB2 A 1 A_SetScale(scaleX-0.2)
		GDB2 A 0 A_JumpIf(scaleX<=0.4,"SpawnWave")
		Loop
	SpawnWave:
		TNT1 A 0 A_Explode(10,512,0)
		TNT1 A 0 A_SpawnItemEx("DBTColdBlast",0,0,5,0,0,0,0,48)
		Stop
	}
}

Actor DBTFrozenCrackleFinal
{ } //Will finish later...

Actor DBTColdBlast
{
	var int user_angle;
	Projectile
	+NOINTERACTION
	+DONTSPLASH
	States
	{
	Spawn:
		TNT1 A 0 
		TNT1 A 0 A_SetUserVar("user_angle",0)
	Ringer:
		TNT1 A 0 A_SpawnItemEx("DBTColdBlastParticle1",3,0,0,25,0,0,user_angle,32)
		TNT1 A 0 A_SpawnItemEx("DBTColdBlastParticle2",3,0,0,30,0,0,user_angle+5,32)
		TNT1 A 0 A_SetUserVar("user_angle",user_angle+10)
		TNT1 A 0 A_JumpIf(user_angle>=359,1)
		Loop
		TNT1 A 0
		Stop
	}
}

//Blast particles are fast and just disappear, no slow-down.

Actor DBTColdBlastParticle1
{
	+NOINTERACTION
	Scale 0.3
	Alpha 0.25
	Translation "0:255=%[0,0,0]:[0,0.15,1]"
	RenderStyle Add
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_Jump(255,"S1","S2","S3","S4","S5")
	S1:
		X048 A 0
		Goto "Playoff"
	S2:
		X048 B 0
		Goto "Playoff"
	S3:
		X048 C 0
		Goto "Playoff"
	S4:
		X048 D 0
		Goto "Playoff"
	S5:
		X048 E 0
		Goto "Playoff"
	Playoff:
		"####" "#" 10
		//"####" "#" 0 A_ScaleVelocity(0.01)
		//"####" "#" 0 A_ScaleVelocity(-1)
		Stop
	}
}

Actor DBTColdBlastParticle2
{
	+NOINTERACTION
	RenderStyle Add
	YScale 2
	XScale 0.75
	Alpha 0.25
	Translation "0:255=%[0,0,0]:[0,0,1]"
	States
	{
	Spawn:
		GDBA A 0
		GDBA A 10
		Stop
	}
}

/*
		Actor RedeemerMushroom
		{
			var int user_count;
			+NOINTERACTION
			States
			{
			Spawn:
					TNT1 A 0
					TNT1 A 0 A_ChangeVelocity(0,0,4,3) //Override anything else.
					TNT1 A 0 A_SetUserVar("user_count",0)
			Particles:
					TNT1 AAAAAAAAAA 0 A_SpawnItemEx("RedeemerFF1",0,0,5,random(10,16),0,random(8,13),random(0,359),32,192)
					TNT1 AAAAAAAAAAA 0 A_SpawnItemEx("RedeemerFF1",0,0,5,random(10,16),0,random(-8,-13),random(0,359),32,192)
					TNT1 AA 0 A_SpawnItemEx("RedeemExplosionMediumSprite",random(0,3),0,random(0,12),random(0,2),0,random(-2,-6),random(0,359),32)
					TNT1 AAAA 0 A_SpawnItemEx("RedeemExplosionMediumSprite",random(0,3),0,random(0,12),random(0,2),0,random(-2,-6),random(0,359),32,128)
					TNT1 A 0 A_SetUserVar("user_count",user_count+1)
					TNT1 A 1 A_JumpIf(user_count>=15,1)
					Loop
			Particles2:
					TNT1 AAAAAAAAAAA 0 A_SpawnItemEx("RedeemerFF1",0,0,5,random(10,16),0,random(8,13),random(0,359),32,192)
					TNT1 AAAAAAAAAAA 0 A_SpawnItemEx("RedeemerFF1",0,0,5,random(10,16),0,random(-8,-13),random(0,359),32,192)
					TNT1 AAA 0 A_SpawnItemEx("RedeemExplosionMediumSprite",random(0,3),0,random(0,12),random(0,2),0,random(-2,-6),random(0,359),32)
					TNT1 AAAAA 0 A_SpawnItemEx("RedeemExplosionMediumSprite",random(0,6),0,0,random(2,5),0,random(1,3),random(0,359),32)
					TNT1 AAAAAA 0 A_SpawnItemEx("RedeemExplosionMediumSprite",random(0,3),0,random(0,12),random(0,2),0,random(-2,-6),random(0,359),32,128)
					TNT1 AAAAAAAAAAA 0 A_SpawnItemEx("RedeemExplosionMediumSprite",random(0,6),0,0,random(2,5),0,random(1,3),random(0,359),32,128)
					TNT1 A 0 A_SetUserVar("user_count",user_count+1)
					TNT1 A 1 A_JumpIf(user_count>=35,1)
					Loop
					TNT1 A 0 A_ChangeVelocity(0,0,1,3)
			Particles3:
					TNT1 AA 0 A_SpawnItemEx("RedeemExploMediumBigBack1",random(0,15),0,random(-4,12),random(1,5),0,random(1,5),random(0,359),32)
					TNT1 AAA 0 A_SpawnItemEx("RedeemExploMediumBigBack2",random(0,15),0,random(-4,12),random(1,5),0,random(1,5),random(0,359),32,128)
					TNT1 AAA 0 A_SpawnItemEx("RedeemExploMediumBigBack3",random(0,15),0,random(-4,12),random(1,5),0,random(1,5),random(0,359),32,128)
					TNT1 AAA 0 A_SpawnItemEx("RedeemExploMediumBigBack4",random(0,15),0,random(-4,12),random(1,5),0,random(1,5),random(0,359),32,128)
					TNT1 A 0 A_SetUserVar("user_count",user_count+1)
					TNT1 A 1 A_JumpIf(user_count>=(35*3),1)
					Loop
					TNT1 A 0
					Stop
				}
		}
		 
		 //The following actors are just copies of the originals, but to eliminate the dynamic light on them, since they tend
		 //to cause needless slowdowns easily avoidable by having something else emit one huge light
		 Actor RedeemExplosionMediumSprite : ExplosionMediumSprite	{}
		 Actor RedeemExploMediumBigBack1 : ExploMediumBigBack1 {}
		 Actor RedeemExploMediumBigBack2 : ExploMediumBigBack2 {}
		 Actor RedeemExploMediumBigBack3 : ExploMediumBigBack3 {}
		 Actor RedeemExploMediumBigBack4 : ExploMediumBigBack4 {}
 */
 
Actor RedeemerMushroom
{
	var int user_count;
	+NOINTERACTION
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_ChangeVelocity(0,0,4,3) //Override anything else.
		TNT1 A 0 A_SetUserVar("user_count",0)
	Particles:
		TNT1 AAAAAAAAAA 0 A_SpawnItemEx("RedeemerFF1",0,0,5,random(10,16),0,random(8,13),random(0,359),32,192)
		TNT1 AAAAAAAAAAA 0 A_SpawnItemEx("RedeemerFF1",0,0,5,random(10,16),0,random(-8,-13),random(0,359),32,192)
		TNT1 AA 0 A_SpawnItemEx("RedeemExplosionMediumSprite",random(0,3),0,random(0,12),random(0,2),0,random(-2,-6),random(0,359),32)
		TNT1 AAAA 0 A_SpawnItemEx("RedeemExplosionMediumSprite",random(0,3),0,random(0,12),random(0,2),0,random(-2,-6),random(0,359),32,128)
		TNT1 A 0 A_SetUserVar("user_count",user_count+1)
		TNT1 A 1 A_JumpIf(user_count>=15,1)
		Loop
	Particles2:
		TNT1 AAAAAAAAAAA 0 A_SpawnItemEx("RedeemerFF1",0,0,5,random(10,16),0,random(8,13),random(0,359),32,192)
		TNT1 AAAAAAAAAAA 0 A_SpawnItemEx("RedeemerFF1",0,0,5,random(10,16),0,random(-8,-13),random(0,359),32,192)
		TNT1 AAA 0 A_SpawnItemEx("RedeemExplosionMediumSprite",random(0,3),0,random(0,6),random(0,2),0,random(-1,-3),random(0,359),32)
		TNT1 AAAAA 0 A_SpawnItemEx("RedeemExplosionMediumSprite",random(0,6),0,0,random(2,5),0,random(1,3),random(0,359),32)
		TNT1 AAAAAA 0 A_SpawnItemEx("RedeemExplosionMediumSprite",random(0,3),0,random(0,6),random(0,2),0,random(-1,-3),random(0,359),32,128)
		TNT1 AAAAAAAAAAA 0 A_SpawnItemEx("RedeemExplosionMediumSprite",random(0,6),0,0,random(2,5),0,random(1,3),random(0,359),32,128)
		TNT1 A 0 A_SetUserVar("user_count",user_count+1)
		TNT1 A 1 A_JumpIf(user_count>=35,1)
		Loop
		TNT1 A 0 A_ChangeVelocity(0,0,1,3)
	Particles3:
		TNT1 A 0 A_SpawnItemEx("RedeemExplosionMediumSprite",random(0,3),0,random(0,6),random(0,2),0,random(-1,-3),random(0,359),32)
		TNT1 AA 0 A_SpawnItemEx("RedeemExplosionMediumSprite",random(0,3),0,random(0,6),random(0,2),0,random(-1,-3),random(0,359),32,192)
		TNT1 AA 0 A_SpawnItemEx("RedeemExploMediumBigBack1",random(0,15),0,random(-4,12),random(1,5),0,random(1,5),random(0,359),32)
		TNT1 AAA 0 A_SpawnItemEx("RedeemExploMediumBigBack2",random(0,15),0,random(-4,12),random(1,5),0,random(1,5),random(0,359),32,128)
		TNT1 AAA 0 A_SpawnItemEx("RedeemExploMediumBigBack3",random(0,15),0,random(-4,12),random(1,5),0,random(1,5),random(0,359),32,128)
		TNT1 AAA 0 A_SpawnItemEx("RedeemExploMediumBigBack4",random(0,15),0,random(-4,12),random(1,5),0,random(1,5),random(0,359),32,128)
		TNT1 A 0 A_SetUserVar("user_count",user_count+1)
		TNT1 A 1 A_JumpIf(user_count>=(35*3),1)
		Loop
		TNT1 A 0
		Stop
	}
}
		 
//The following actors are just copies of the originals, but to eliminate the dynamic light on them, since they tend
//to cause needless slowdowns easily avoidable by having something else emit one huge light
Actor RedeemExplosionMediumSprite : ExplosionMediumSprite	
{
	+NOINTERACTION
	+RANDOMIZE
	//Translation "0:255=%[0,0,0]:[1,0.5,0]"
	RenderStyle Add
	Scale 1.5
	States
	{
	Spawn:
		TNT1 A 0 NoDelay A_SetScale(random(0.85,1.25)*randompick(-1,1))
		TNT1 A 0 A_Jump(256,"S1","S2","S3","S4","S5","S6","S7","S8","S9","S10")
	S1:
		X002 ABCDEFG 3 Bright A_ScaleVelocity(0.98)
		X002 HIJKLM 2 Bright A_ScaleVelocity(0.95)
		X002 OPQRSTU 1 Bright A_FadeOut(0.09)
		Wait
	S2:
		X003 ABCDEFGHIJK 3 Bright A_ScaleVelocity(0.98)
		X003 LMNOPQ 2 Bright A_ScaleVelocity(0.95)
		X003 RSTUVWXYZ 1 Bright A_FadeOut(0.1)
		Wait
	S3:
		X004 ABCDEF 3 Bright A_ScaleVelocity(0.98)
		X004 GHIJKLMN 2 Bright A_ScaleVelocity(0.95)
		X004 OPQ 1 Bright A_FadeOut(0.2)
		Wait
	S4:
		X005 ABCDEFGHIJK 3 Bright A_ScaleVelocity(0.98)
		X005 LMNOPQ 2 Bright A_ScaleVelocity(0.95)
		X005 RSTUVWX 1 Bright A_FadeOut(0.09)
		Wait
	S5:
		X006 ABCDEFG 3 Bright A_ScaleVelocity(0.98)
		X006 HIJKLM 2 Bright A_ScaleVelocity(0.95)
		X006 NOP 1 Bright A_FadeOut(0.2)
		Wait
	S6:
		X007 ABCDEFG 3 Bright A_ScaleVelocity(0.95)
		X007 HHIIJJ 1 Bright A_FadeOut(0.15)
		Wait
	S7:
		TNT1 A 0 Thing_SetTranslation(0,random(51,52))
		X111 ABCDEFGHIJK 3 Bright A_ScaleVelocity(0.98)
		X111 LMNOPQ 2 Bright A_ScaleVelocity(0.95)
		X111 RSTUVWXYZ 1 Bright A_FadeOut(0.09)
		Wait
	S8:
		TNT1 A 0 Thing_SetTranslation(0,random(51,52))
		X112 ABCD 3 Bright A_ScaleVelocity(0.98)
		X112 EFG 2 Bright A_ScaleVelocity(0.95)
		X112 H 1 Bright A_FadeOut(0.2)
		Wait
	S9:
		TNT1 A 0 Thing_SetTranslation(0,random(51,52))
		X121 ABCDEFGHIJK 3 Bright A_ScaleVelocity(0.98)
		X121 LMNOPQ 2 Bright A_ScaleVelocity(0.95)
		X121 RSTUV 1 Bright A_FadeOut(0.18)
		Wait
	S10:
		TNT1 A 0 Thing_SetTranslation(0,random(51,52))
		X121 ABCDEFGHIJK 3 Bright A_ScaleVelocity(0.98)
		X121 LMNOPQ 2 Bright A_ScaleVelocity(0.95)
		X121 R 1 Bright A_FadeOut(0.2)
		Wait
	/*
	Spawn:
			TNT1 A 0 A_Jump(256,"E1","E2")
	E1:
			X068 ABCDEFGHIJKLM 1 bright
			X068 NOPQRSTUVWXYZ 1 bright
			X069 ABCDEFGHIJKLMNOPQRS 1 Bright A_FadeOut(0.01)
			Stop
	E2:
			X070 ABCDEFGHIJKLM 1 bright
			X070 NOPQRSTUVWXYZ 1 bright
			X07A ABCDEFGHIJKLMNOPQRSTU 1 Bright A_FadeOut(0.01)
			Stop
			*/
	}
}

Actor RedeemExploMediumBigBack1 : RedeemExplosionMediumSprite {Scale 1.3}
Actor RedeemExploMediumBigBack2 : RedeemExplosionMediumSprite {Scale 1.7}
Actor RedeemExploMediumBigBack3 : RedeemExplosionMediumSprite {Scale 1.1}
Actor RedeemExploMediumBigBack4 : RedeemExplosionMediumSprite {Scale 1.2}

 
//These actors are what will be the cloud movements.
//The effect we basically want to replicate is the particles going out/down, and then going
//in/up afterwards.
Actor RedeemerFF1
{
	+NOINTERACTION
	Scale 0.7
	Alpha 0.6
	RenderStyle Add
	//Translation "0:255=%[0,0,0]:[0.95,0.65,0.1]"
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_Jump(256,"S1","S2","S3","S4","S5","S6","S7","S8","S9","S10","S11","S12","S13")
	S1:		 X003 F 0
		Goto Playoff
	S2:	 X003 J 0
		Goto Playoff
	S3:	 X004 F 0
		Goto Playoff
	S4:	 X005 I 0
		Goto Playoff
	S5:	 X006 E 0
		Goto Playoff
	S6:	 X007 F 0
		Goto Playoff
	S7:	 X011 K 0
		Goto Playoff
	S8:	 X014 P 0
		Goto Playoff
	S9:	 X015 I 0
		Goto Playoff
	S10:	X019 I 0
		Goto Playoff
	S11:	X021 F 0
		Goto Playoff
	S12:	X026 L 0
		Goto Playoff
	S13:	X033 F 0
		Goto Playoff
	Playoff:
		"####" "########" 1 A_ScaleVelocity(0.9)
		"####" "###########" 1 A_ScaleVelocity(0.8)
		"####" "#" 0 A_ScaleVelocity(-1.0)
		"####" "#######" 1 A_ScaleVelocity(1.1)
		"####" "########" 1 A_ScaleVelocity(1.05)
		"####" "##################" 1 A_ChangeVelocity(0,0,0.1,1)
		"####" "#" 1 A_FadeOut(0.02)
		Wait
	}
}


//==============================================================================
//==============================================================================
//New Death's Hand FX 
//Created by Major Cooke
//==============================================================================
//==============================================================================

Actor DeathsHandPrimaryFX
{
	+NOINTERACTION
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_PlaySound("SorcererBigBallExplode")
		TNT1 A 0 A_CheckFloor("FloorFX")
	NormalFX:
		TNT1 A 0 A_SpawnItemEx("MCBigExplosionBack2",random(0,20),0,frandom(-5,5),frandom(0,2),0,0,random(0,359),32)
		TNT1 A 0 A_SpawnItemEx("MCBigExplosionBack3",random(0,20),0,frandom(-5,5),frandom(0,2),0,0,random(0,359),32)
		TNT1 AA 0 A_SpawnItemEx("MCBigExplosionBack",random(0,20),0,frandom(-5,5),frandom(0,2),0,0,random(0,359),32)
		TNT1 AAAAAAAAAA 0 A_SpawnItemEx("MCBigExplosionP1",random(0,75),0,frandom(-25,25),frandom(-4,4),0,frandom(-10,10),random(0,359),32)
		TNT1 AAAAAAAAAA 0 A_SpawnItemEx("MCBigExplosionP1",random(0,75),0,frandom(-25,25),frandom(-4,4),0,frandom(-10,10),random(0,359),32,64)
		TNT1 AAAAAAAAAA 1 A_SpawnItemEx("MCBigExplosionP1",random(0,75),0,frandom(-25,25),frandom(-4,4),0,frandom(-10,10),random(0,359),32,128)
		TNT1 AAAAAAAAAA 1 A_SpawnItemEx("MCBigExplosionP1",random(0,75),0,frandom(-25,25),frandom(-4,4),0,frandom(-10,10),random(0,359),32,128)
		Stop
	FloorFX:
		TNT1 A 0 A_SpawnItemEx("MCBigExplosionBack2",0,0,frandom(20,50),frandom(0,2),0,0,random(0,359),32)
		TNT1 A 0 A_SpawnItemEx("MCBigExplosionBack3",0,0,frandom(20,50),frandom(0,2),0,0,random(0,359),32)
		TNT1 AA 0 A_SpawnItemEx("MCBigExplosionBack",random(0,20),0,random(20,50),0,0,random(1,3),random(0,359),32)
		TNT1 AAAAAAAAAA 0 A_SpawnItemEx("MCBigExplosionP1",random(0,75),0,frandom(5,55),frandom(-4,4),0,frandom(0.1,10),random(0,359),32)
		TNT1 AAAAAAAAAA 0 A_SpawnItemEx("MCBigExplosionP1",random(0,75),0,frandom(5,55),frandom(-4,4),0,frandom(0.1,10),random(0,359),32,64)
		TNT1 AAAAAAAAAA 1 A_SpawnItemEx("MCBigExplosionP1",random(0,75),0,frandom(5,55),frandom(-4,4),0,frandom(0.1,10),random(0,359),32,128)
		TNT1 AAAAAAAAAA 1 A_SpawnItemEx("MCBigExplosionP1",random(0,75),0,frandom(5,55),frandom(-4,4),0,frandom(0.1,10),random(0,359),32,128)
		Stop
	}
}

Actor MCBigExplosionBack
{
	+NOINTERACTION
	Scale 2.4
	Alpha 0.8
	RenderStyle Translucent
	Translation "0:255=%[0,0,0]:[0.1,0.1,1]"
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_Jump(256,"E1","E2")
	E1:
		X068 ABCDEFGHIJKLM 2 bright
		X068 NOPQRSTUVWXYZ 1 bright
		X069 ABCDEFGHIJKLMNOPQRS 1 Bright A_FadeOut(0.01)
		Stop
	E2:
		X070 ABCDEFGHIJKLM 2 bright
		X070 NOPQRSTUVWXYZ 1 bright
		X07A ABCDEFGHIJKLMNOPQRSTU 1 Bright A_FadeOut(0.01)
		Stop
	}
}

Actor MCBigExplosionBack2
{
	Scale 3
	RenderStyle Add
	StencilColor "Blue"
	Alpha 0.8
	+NOINTERACTION
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_Jump(128,"Two","Three")
	One:
		X006 ABCDEFGHIJKLMNOP 1 Bright Light("BlueBigFlicker2")
		//X006 LMNOP 1 Bright A_FadeOut(0.05)
		Stop
	Two:
		X007 ABCDEFGHIJ 1 Bright Light("BlueBigFlicker2")
		Stop
	Three:
		X033 ABCDEFGHIJKLMNOPQR 1 Bright Light("BlueBigFlicker2")
		Stop
	}
}

Actor MCBigExplosionBack3 : MCBigExplosionBack2
{
	StencilColor "White"
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_Jump(128,"Two","Three")
	One:
		X006 ABCDEFGHIJKLMNOP 1 Bright Light("WhiteBigFlicker1")
		//X006 LMNOP 1 Bright A_FadeOut(0.05)
		Stop
	Two:
		X007 ABCDEFGHIJ 1 Bright Light("WhiteBigFlicker1")
		Stop
	Three:
		X033 ABCDEFGHIJKLMNOPQR 1 Bright Light("WhiteBigFlicker1")
		Stop
	}
}

Actor MCBigExplosionP1
{
	+NOINTERACTION
	Scale 1.0
	RenderStyle Translucent
	Alpha 0.7
	Translation "0:255=%[0,0,0]:[0.1,0.1,1]"
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_Jump(256,"E1","E2")//,"E3","E4")
	E1:
		X068 ABCDEFGHIJKLMNOPQRSTUVWXYZ 1
		X069 ABCDEFGHIJKLMNOPQRS 1 A_FadeOut(0.01)
		Stop
	E2:
		X070 ABCDEFGHIJKLMNOPQRSTUVWXYZ 1
		X07A ABCDEFGHIJKLMNOPQRSTU 1 A_FadeOut(0.01)
		Stop
	E3:
		X071 ABCDEFGHIJKLMNOPQRSTUVWXYZ 1
		X072 ABCDEFGHIJKLMNOPQRS 1 A_FadeOut(0.01)
		Stop
	E4:
		X073 ABCDEFGHIJKLMNOPQRSTUVWXYZ 1
		X074 ABCDEFGHIJKLMNOPQRSTU 1 A_FadeOut(0.01)
		Stop
	}
}

Actor DHSpiralParticle : HeavenPuff
{
	Scale 0.5
}















Actor OrbWhiteFX
{
	+NOINTERACTION
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_SpawnItemEx("OrbWhiteTraveller",-100,0,40,10,0,0,0,32)
		TNT1 A 0 A_SpawnItemEx("OrbWhiteTraveller",-100,0,40,10,0,0,90,32)
		TNT1 A 0 A_SpawnItemEx("OrbWhiteTraveller",-100,0,40,10,0,0,180,32)
		TNT1 A 0 A_SpawnItemEx("OrbWhiteTraveller",-100,0,40,10,0,0,270,32)
		Stop
	}
}

Actor BigOrbWhiteFX : OrbWhiteFX
{ }

Actor OrbOrangeFX : OrbWhiteFX
{ }

Actor BigOrbOrangeFX : OrbWhiteFX
{ }

Actor OrbRedFX : OrbWhiteFX
{ }

Actor OrbWhitePuff : ExplosionSmallSprite
{
	Translation "0:255=%[0,0,0]:[1,1,1]"
}

Actor OrbWhiteTraveller
{
	var int user_count;
	Projectile
	+NOINTERACTION
	WeaveIndexZ 41
	WeaveIndexXY 7
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_SpawnItemEx("OrbWhitePuff",0,0,0,0,0,frandom(0.1,2.0),0,32)
		TNT1 A 1 A_Weave(2,1,26,21)
		TNT1 A 0 A_SetUserVar("user_count",user_count+1)
		TNT1 A 0 A_JumpIf(user_count>=12,1)
		Loop
		TNT1 A 0
		Stop
	}
}

//==============================================================================
//==============================================================================
//LemonNade FX
//Made by Major Cooke
//==============================================================================
//==============================================================================

Actor LemonJuiceTrail
{
	Projectile
	+NOEXPLODEFLOOR
	+BOUNCEONFLOORS
	+BOUNCEONWALLS
	+BOUNCEONCEILINGS
	+CANBOUNCEWATER
	-NOGRAVITY
	+THRUACTORS
	+DONTSPLASH
	+DONTBLAST
	Translation "0:255=%[0.25,0.25,0.25]:[1.5,1.5,0]"
	RenderStyle Translucent
	Gravity 0.35
	Scale 0.9
	Alpha 0.75
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_Jump(256,"B11","B12","B13","B14","B21","B22","B23","B24","B31","B32","B33","B34")
	B11:
		X057 ABCDEF 1 A_FadeOut(0.03)
		X057 GHIJK 1 A_FadeOut(0.03)
		X057 LMNOPQRS 1 A_FadeOut(0.03)
		Wait
	B12:
		XA57 ABCDEF 1 A_FadeOut(0.03)
		XA57 GHIJK 1 A_FadeOut(0.03)
		XA57 LMNOPQRS 1 A_FadeOut(0.03)
		Wait
	B13:
		XB57 ABCDEF 1 A_FadeOut(0.03)
		XB57 GHIJK 1 A_FadeOut(0.03)
		XB57 LMNOPQRS 1 A_FadeOut(0.03)
		Wait
	B14:
		XC57 ABCDEF 1 A_FadeOut(0.03)
		XC57 GHIJK 1 A_FadeOut(0.03)
		XC57 LMNOPQRS 1 A_FadeOut(0.03)
		Wait
	B21:
		X058 ABCDEF 1 A_FadeOut(0.03)
		X058 GHIJK 1 A_FadeOut(0.03)
		X058 LMNOPQR 1 A_FadeOut(0.03)
		Wait
	B22:
		XA58 ABCDEF 1 A_FadeOut(0.03)
		XA58 GHIJK 1 A_FadeOut(0.03)
		XA58 LMNOPQR 1 A_FadeOut(0.03)
		Wait
	B23:
		XB58 ABCDEF 1 A_FadeOut(0.03)
		XB58 GHIJK 1 A_FadeOut(0.03)
		XB58 LMNOPQR 1 A_FadeOut(0.03)
		Wait
	B24:
		XC58 ABCDEF 1 A_FadeOut(0.03)
		XC58 GHIJK 1 A_FadeOut(0.03)
		XC58 LMNOPQR 1 A_FadeOut(0.03)
		Wait
	B31:
		X059 ABCD 1 A_FadeOut(0.03)
		X059 EFGHIJ 1 A_FadeOut(0.03)
		X059 KLM 1 A_FadeOut(0.03)
		Wait
	B32:
		XA59 ABCD 1 A_FadeOut(0.03)
		XA59 EFGHIJ 1 A_FadeOut(0.03)
		XA59 KLM 1 A_FadeOut(0.03)
		Wait
	B33:
		XB59 ABCD 1 A_FadeOut(0.03)
		XB59 EFGHIJ 1 A_FadeOut(0.03)
		XB59 KLM 1 A_FadeOut(0.03)
		Wait
	B34:
		XC59 ABCD 1 A_FadeOut(0.03)
		XC59 EFGHIJ 1 A_FadeOut(0.03)
		XC59 KLM 1 A_FadeOut(0.03)
		Wait
	}
}

Actor LemonJuiceBigBack : LemonJuiceTrail
{
	Gravity 0.1
	Scale 3.0
	Alpha 1
	RenderStyle Add
}

Actor LemonJuiceBiggerBack : LemonJuiceBigBack
{
	Scale 4.0
}

Actor LemonJuiceBig : LemonJuiceTrail
{
	Scale 2.4
	Alpha 0.8
	RenderStyle Add
}

Actor LemonNadeExplosion
{
	var int user_count;
	var int user_angle;
	+NOINTERACTION
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_PlaySound("LemonNade/Explosion",CHAN_BODY,1,0)
		TNT1 A 0 A_PlaySound("LemonNade/Warble",CHAN_VOICE,1,0)
		TNT1 A 0 A_SetUserVar("user_angle",0)
		TNT1 A 0 A_SetUserVar("user_count",0)
		TNT1 A 0 A_CheckFloor("JuicerFloor")
		TNT1 A 0 A_CheckCeiling("JuicerCeiling")
	JuicerNormal:
		TNT1 A 0 A_SpawnItemEx("LemonJuiceBiggerBack",0,0,0,0,0,0,0,32)
		TNT1 AAAAAAAA 0 A_SpawnItemEx("LemonJuiceBigBack",random(0,18),0,frandom(-6,6),frandom(0,8),0,frandom(-6,6),random(0,359),32)
		TNT1 AAA 0 A_SpawnItemEx("LemonJuiceBigBack",random(0,18),0,frandom(-6,6),frandom(0,8),0,frandom(-6,6),random(0,359),32,128)
		TNT1 AAAAAAA 0 A_SpawnItemEx("LemonJuiceBig",random(0,32),0,frandom(-18,18),random(0,16),0,frandom(-12,12),random(0,359),32)
		TNT1 AAAAAAAAA 0 A_SpawnItemEx("LemonJuiceBig",random(0,32),0,frandom(-18,18),random(0,16),0,frandom(-12,12),random(0,359),32,192)
		Goto Squirtation
	JuicerFloor:
		TNT1 A 0 A_SpawnItemEx("LemonJuiceBiggerBack",0,0,random(10,30),0,0,0,0,32)
		TNT1 AAAA 0 A_SpawnItemEx("LemonJuiceBigBack",random(0,18),0,random(16,48),frandom(0,8),0,frandom(0.1,8),random(0,359),32)
		TNT1 AAAA 0 A_SpawnItemEx("LemonJuiceBigBack",random(0,18),0,random(16,48),frandom(0,8),0,frandom(0.1,8),random(0,359),32)
		TNT1 AAA 0 A_SpawnItemEx("LemonJuiceBigBack",random(0,18),0,random(4,32),frandom(0,8),0,frandom(0.1,8),random(0,359),32,128)
		TNT1 AAAAAAA 0 A_SpawnItemEx("LemonJuiceBig",random(0,32),0,random(8,48),random(0,16),0,frandom(0,24),random(0,359),32)
		TNT1 AAAAAAAAA 0 A_SpawnItemEx("LemonJuiceBig",random(0,32),0,random(8,48),random(0,16),0,frandom(0,24),random(0,359),32,192)
		Goto Squirtation
	JuicerCeiling:
		TNT1 A 0 A_SpawnItemEx("LemonJuiceBiggerBack",0,0,random(-5,-20),0,0,0,0,32)
		TNT1 AAAA 0 A_SpawnItemEx("LemonJuiceBigBack",frandom(0,18),0,frandom(-4,-32),frandom(0,8),0,frandom(-0.1,-12),random(0,359),32)
		TNT1 AAAA 0 A_SpawnItemEx("LemonJuiceBigBack",random(0,18),0,random(-16,-48),frandom(0,8),0,frandom(0.1,8),random(0,359),32)
		TNT1 AAA 0 A_SpawnItemEx("LemonJuiceBigBack",frandom(0,18),0,frandom(-4,-32),frandom(0,8),0,frandom(-0.1,-12),random(0,359),32,128)
		TNT1 AAAAAAA 0 A_SpawnItemEx("LemonJuiceBig",frandom(0,32),0,random(-8,-48),random(0,16),0,frandom(0,-24),random(0,359),32)
		TNT1 AAAAAAAAA 0 A_SpawnItemEx("LemonJuiceBig",frandom(0,32),0,random(-8,-48),random(0,16),0,frandom(0,-24),random(0,359),32,192)
		Goto Squirtation
	Squirtation:
		TNT1 AAAAAA 0 A_SpawnItemEx("LemonJuiceTrail",random(0,32),0,random(0,48),frandom(3,16),0,frandom(0,24),random(0,359),32)
		TNT1 AAAAAAAAAAAAAAA 0 A_SpawnItemEx("LemonJuiceTrail",frandom(0,32),0,random(0,48),frandom(3,16),0,frandom(0,24),random(0,359),32,192)
		TNT1 A 1 A_SetUserVar("user_count",user_count+1)
		TNT1 A 0 A_JumpIf(user_count>=15,1)
		Loop
		TNT1 A 0
		Stop
	}
}

Actor LemonNadeExplosionSmall
{
	+NOINTERACTION
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 AAA 0 A_SpawnItemEx("LemonJuiceBig",frandom(0,6),0,frandom(0,15),frandom(0,8),0,frandom(-4,4),random(0,359),32)
		TNT1 AAAAAAAAA 0 A_SpawnItemEx("LemonJuiceBig",frandom(0,3),0,frandom(-3,15),frandom(0,4),0,frandom(-4,4),random(0,359),32,192)
		TNT1 AAAAAAAAAA 0 A_SpawnItemEx("LemonJuiceTrail",frandom(2,4),0,frandom(-2,2),frandom(0,8),0,frandom(-2,6),random(0,359),32)
		Stop
	}
}

Actor LemonNadeExplosionBig
{
	+NOINTERACTION
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_PlaySound("LemonNade/Explosion",CHAN_BODY,1,0)
		TNT1 A 0 A_PlaySound("LemonNade/Warble",CHAN_VOICE,1,0)
		TNT1 AA 0 A_SpawnItemEx("LemonJuiceBiggerBack",random(0,32),0,random(0,64),random(1,8),0,random(-2,2),random(0,359),32)
		TNT1 AA 0 A_SpawnItemEx("LemonJuiceBiggerBack",random(0,32),0,random(64,128),random(1,8),0,random(-2,2),random(0,359),32)
		TNT1 AA 0 A_SpawnItemEx("LemonJuiceBiggerBack",random(0,32),0,random(128,192),random(1,8),0,random(-2,2),random(0,359),32)
		TNT1 AA 0 A_SpawnItemEx("LemonJuiceBiggerBack",random(0,32),0,random(192,256),random(1,8),0,random(-2,2),random(0,359),32)
		TNT1 AA 0 A_SpawnItemEx("LemonJuiceBiggerBack",random(0,32),0,random(256,320),random(1,8),0,random(-2,2),random(0,359),32)
		TNT1 AAAAAAAAAAAAAAA 0 A_SpawnItemEx("LemonJuiceBig",random(0,64),0,random(0,64),random(0,5),0,random(0.1,3),random(0,359),32)
		TNT1 AAAAAAAAAAAAAAA 0 A_SpawnItemEx("LemonJuiceBig",random(0,16),0,random(48,92),random(0,5),0,random(-4,4),random(0,359),32)
		TNT1 AAAAAAAAAAAAAAA 0 A_SpawnItemEx("LemonJuiceBig",random(16,128),0,random(92,128),random(0,5),0,random(-4,4),random(0,359),32)
		TNT1 AAAAAAAAAAAAAAA 0 A_SpawnItemEx("LemonJuiceBig",random(128,256),0,random(128,256),random(0,5),0,random(0.1,3),random(0,359),32)
		TNT1 AAAAAAAAAAAAAAA 0 A_SpawnItemEx("LemonJuiceBig",random(64,192),0,random(256,320),random(0,5),0,random(0.1,3),random(0,359),32)
		Stop
	}
}

//==============================================================================
//New SBC Cannon alt-fire FX
//Made by Major Cooke
//==============================================================================

Actor DisintegrateGib
{
	var int user_props[3];
	Projectile
	-NOGRAVITY
	+THRUACTORS
	Gravity 0.125
	Scale 0.75
	BounceType "Doom"
	Translation	"0:255=%[0,0,0]:[0.25,0.25,0.25]"
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_Jump(256,"S1","S2","S3","S4","S5","S6","S7")
	S1:	GIB1 A 0
		Goto Perform
	S2:	GIB1 B 0
		Goto Perform
	S3:	GIB1 C 0
		Goto Perform
	S4:	GIB1 D 0
		Goto Perform
	S5:	GIB1 E 0
		Goto Perform
	S6:	GIB1 F 0
		Goto Perform
	S7:	GIB1 G 0
		Goto Perform
	Perform:
		"####" "#" 0 A_SetUserArray("user_props",0,random(10,60))
		"####" "#" 0 A_SetUserArray("user_props",1,random(20,60))
	Spawn1:
		"####" "#" 0 A_SpawnItemEx("DisintegrateSpark2",0,0,0,frandom(0.1,1),frandom(-4,4),frandom(-4,4),random(0,359),32)
		"####" "##" 0 A_SpawnItemEx("DisintegrateSpark2",0,0,0,frandom(0.1,1),frandom(-4,4),frandom(-4,4),random(0,359),32,128)
		"####" "##" 0 A_SpawnItemEx("DisintegrateSpark3",0,frandom(-2,2),frandom(-4,0),0,0,frandom(0.1,2),random(0,359),32)
		"####" "###" 0 A_SpawnItemEx("DisintegrateSpark3",0,frandom(-2,2),frandom(-4,0),0,0,frandom(0.1,2),random(0,359),32,128)
		"####" "#" 0 A_SpawnItemEx("DisintegrateAtomSplitter",0,0,0,frandom(0,6),0,frandom(-6,6),random(0,359),32,250)
		"####" "#" 0 A_JumpIf(user_props[2]==1,"Shrink")
	Count1:
		"####" "#" 1 A_SetUserArray("user_props",0,user_props[0]-1)
		"####" "#" 0 A_JumpIf(user_props[0]<=0,1)
		Goto Spawn1
		"####" "#" 0 A_SetUserArray("user_props",2,1)
		
	Shrink:
		"####" "#" 1 A_SetScale(scaleX-0.01)
		"####" "#" 0 A_JumpIf(ScaleX<=0.00,1)
		Goto Spawn1
		TNT1 A 0
		Stop
	}
}

Actor DisintegrateAtomSplitter
{
	var int user_life;
	var int user_weave[4];
	Projectile
	+THRUACTORS
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_SetUserArray("user_weave",0,random(1,4))
		TNT1 A 0 A_SetUserArray("user_weave",1,random(1,4))
		TNT1 A 0 A_SetUserArray("user_weave",2,random(1,8))
		TNT1 A 0 A_SetUserArray("user_weave",3,random(1,8))
		TNT1 A 0 A_SetUserVar("user_life",random(45,250))
	Move:
		TNT1 A 0 A_SpawnItemEx("DisintegrateSpark2",0,0,0,6,random(-2,2),random(-2,2),0,32)
		TNT1 A 0 A_SpawnItemEx("DisintegrateSpark2",0,0,0,0,0,frandom(0,1),0,32)
		TNT1 A 0 A_SpawnItemEx("DisintegrateSpark3",0,frandom(-2,2),frandom(-4,0),0,0,frandom(0.1,2),random(0,359),32)
		TNT1 AAA 0 A_SpawnItemEx("DisintegrateSpark3",0,frandom(-2,2),frandom(-4,0),0,0,frandom(0.1,2),random(0,359),32,128)
		TNT1 A 1 A_SetUserVar("user_life",user_life-random(1,2))
		TNT1 A 0 A_Weave(user_weave[0],user_weave[1],user_weave[2],user_weave[3])
		TNT1 A 0 A_JumpIf(user_life<=0,1)
		Loop
		TNT1 A 0
		Stop
	}
}

Actor DisintegrateSpark2
{
	+NOINTERACTION
	Scale 0.1
	RenderStyle Add
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_Jump(256,"S1","S2","S3","S4","S5","S6","S7","S8")
	S1:	X079 A 0
		Goto Perform
	S2:	X079 B 0
		Goto Perform
	S3:	X079 C 0
		Goto Perform
	S4:	X079 D 0
		Goto Perform
	S5:	X079 E 0
		Goto Perform
	S6:	X079 F 0
		Goto Perform
	S7:	X079 G 0
		Goto Perform
	S8: X079 H 0
		Goto Perform
	Perform:
		"####" "#" 1 A_SetScale(ScaleX+0.01)
		"####" "#" 0 A_FadeOut(0.05)
		Loop
	}
}

Actor DisintegrateSpark3
{
	+NOINTERACTION
	Scale 0.3
	RenderStyle Add
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_Jump(256,"S1","S2","S3","S4","S5","S6","S7","S8","S9","S10","S11","S12","S13","S14","S15","S16")
	S1:		X080 A 0
		Goto Perform
	S2:		X080 B 0
		Goto Perform
	S3:		X080 C 0
		Goto Perform
	S4:		X080 D 0
		Goto Perform
	S5:		X080 E 0
		Goto Perform
	S6:		X080 F 0
		Goto Perform
	S7:		X080 G 0
		Goto Perform
	S8: 	X080 H 0
		Goto Perform
	S9:		X080 I 0
		Goto Perform
	S10:	X080 J 0
		Goto Perform
	S11:	X080 K 0
		Goto Perform
	S12:	X080 L 0
		Goto Perform
	S13:	X080 M 0
		Goto Perform
	S14:	X080 N 0
		Goto Perform
	S15:	X080 O 0
		Goto Perform
	S16:	X080 P 0
		Goto Perform
	Perform:
		"####" "#" 1 A_ScaleVelocity(1.02)
		"####" "#" 0 A_SetScale(ScaleX-0.02)
		"####" "#" 0 A_JumpIf(ScaleX<=0,1)
		Loop
		"####" "#" 0
		Stop
	}
}

Actor SBCShadowBig
{
	+NOINTERACTION
	RenderStyle None
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_PlaySound("dis/zapper",CHAN_VOICE)//("disintegrate/extrasnd/extra",CHAN_BODY)
		TNT1 AAA 0 A_SpawnItemEx("DisintegrateGib",random(0,40),0,random(-20,20),random(0,20),0,random(0,20),random(0,359),32)TNT1 A 0 A_SpawnItemEx("DisintegrateSpark3",0,frandom(-2,2),frandom(-2,2),0,0,frandom(0.1,2),random(0,359),32)
		TNT1 AAAAAA 0 A_SpawnItemEx("DisintegrateGib",random(0,40),0,random(-20,20),random(0,20),0,random(0,20),random(0,359),32)TNT1 A 0 A_SpawnItemEx("DisintegrateSpark3",0,frandom(-2,2),frandom(-2,2),0,0,frandom(0.1,2),random(0,359),32,128)
		TNT1 A 0 A_SpawnItemEx("PBExplosionSpawnerSmokeless",0,0,0,0,0,0,0,32)
		VORT ABCDEFGHI 2 A_SpawnItemEx("DisintegrateGib",random(0,40),0,random(-20,20),random(0,20),0,random(0,20),random(0,359),32)
		TNT1 A 0 A_PlaySound("hl2/weapons/disintegrate",CHAN_WEAPON,0.5,0)
		VORT JKLMN 2 A_SpawnItemEx("DisintegrateGib",random(0,40),0,random(-20,20),random(0,20),0,random(0,20),random(0,359),32)
		TNT1 AAAAAAAAAAAAAAA 0 A_SpawnItemEx("DisintegrateAtomSplitter",0,0,0,frandom(0,6),0,frandom(-6,6),random(0,359),32,250)
		VORT OOOOPPQQRRSSTTUUVVWW 1 A_SpawnItemEx("DisintegrateAtomSplitter",0,0,0,frandom(0,6),0,frandom(-6,6),random(0,359),32,250)
		VORT XXYY 1 A_SpawnItemEx("DisintegrateAtomSplitter",0,0,0,frandom(0,6),0,frandom(-6,6),random(0,359),32,250)
		Stop
	}
}

//==============================================================================
// Incendiary bomb particle
//==============================================================================

Actor IncendiaryFlamelet1
{
	+NOINTERACTION
	RenderStyle Add
	Alpha 0.4
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_SetScale(frandom(0.15,0.55))
		TNT1 A 0 A_Jump(256,"F1","F2","F3","F4","F5","F6","F7")
	F1:
		X052 AB 1 bright
		X052 CDEFGH 1 Bright A_ScaleVelocity(0.92)
		X052 IJKLMNO 1 Bright A_ScaleVelocity(0.9)
		X052 PQRS 1 Bright A_ScaleVelocity(0.87)
		Stop
	F2:
		X053 AB 2 bright
		X053 CDEFGHIJ 3 Bright A_ScaleVelocity(0.92)
		X053 KLMN 2 Bright A_ScaleVelocity(0.9)
		X053 OPQRS 1 Bright A_ScaleVelocity(0.87)
		Stop
	F3:
		X054 ABCD 2 bright
		X054 EFGHIJK 3 Bright A_ScaleVelocity(0.92)
		X054 LMNO 2 Bright A_ScaleVelocity(0.9)
		X054 PQRS 2 Bright A_ScaleVelocity(0.87)
		Stop
	F4:
		X055 ABC 2 bright
		X055 DEFGHIJKLMN 3 Bright A_ScaleVelocity(0.92)
		X055 OP 2 Bright A_ScaleVelocity(0.9)
		X055 QRS 2 Bright A_ScaleVelocity(0.87)
		Stop
	F5:
		X056 ABCDE 2 Bright //A_ScaleVelocity(0.98)
		X056 FGHIJ 3 Bright A_ScaleVelocity(0.92)
		X056 KLMN 2 Bright A_ScaleVelocity(0.9)
		X056 OPQR 1 Bright A_ScaleVelocity(0.87)
		Stop
	F6:
		X068 ABCDEFGHIJKLMNOPQRSTUVWXYZ 1 Bright A_ScaleVelocity(0.95)
		X069 ABCDEFGHIJKLMNOPQRS 1 Bright A_ScaleVelocity(0.93)
		Stop
	F7:
		X070 ABCDEFGHIJKLMNOPQRSTUVWXYZ 1 Bright A_ScaleVelocity(0.95)
		X07A ABCDEFGHIJKLMNOPQRSTU 1 Bright A_ScaleVelocity(0.93)
		Stop
	}
}

