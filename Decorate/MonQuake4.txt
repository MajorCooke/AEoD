
Actor DBTMonsterProjSmokeTrail
{
	+NOINTERACTION
	Scale 0.2
	RenderStyle Translucent
	Alpha 0.74
	+FORCEXYBILLBOARD
	States
	{
	Spawn:
		TNT1 A 0
		X037 ABCDEFGHIJKLMNOP 0 A_JumpIf(random(1,16) == 1,"Fading")
	Fading:
		"####" "#" 1 A_FadeOut(0.03)
		Wait
 	}
}
//************************************************
//	General smoke for monster projectiles explos
//************************************************
Actor DBTMonsterProjSmokeExplo : DBTMonsterProjSmokeTrail
{
	Scale 0.5
	Alpha 0.8
	States
	{
	Fading:
		"----" AAA 1 A_FadeOut(0.04)
		"----" A 0 A_ScaleVelocity(0.8)
		Loop
 	}
}
//*********************************************
//	Smoke for monster proj bigger
//*********************************************
Actor DBTMonsterProjSmokeExploBigger : DBTMonsterProjSmokeExplo
{
	Scale 0.8
}


//*********************************************
//	Monster firing smoke (for bullet weapons)
//*********************************************

Actor MonFiringSmoke : DBTMonsterProjSmokeExplo
{
	Scale 0.056
}


//=====================================================================================
//=====================================================================================
//
/*
marine1		-zombieman
marine3		-shotguy
failedtrans	-shotguy
marine2		-chainguy
convoy		-chainguy
slimytransf	-imp
grunt			-demon
repairbot		-lostsoul
scientist		-caco
sentry		-caco
strogghover	-painelem
ironmaiden		-painelem
tactical1(p)	-revenant
tactical2(r)	-revenant
Berserker		-hellknight
gunner		-Hellknight
lttank		-baron
gladiator		-arachno
hhtank		-fatso
tportdropp		-archvile
makron		-cyberdemon
voss			-cyberdemon
harvester		-spidermaster
networkg		-spidermast
streamprot		-spidermast

*/
//=====================================================================================
//=====================================================================================


//=====================================================================================
//=====================================================================================
//	Misc Effects
//=====================================================================================
//=====================================================================================

Actor MonMuzzleFlash
{
	+NOINTERACTION
	Scale 0.3
	RenderStyle Add
	States
	{
	Spawn:
		TNT1 a 0
		RR28 ABCDE 0 A_JumpIf(random(1,10) == 1,"Continue") //1/10 for everyone.
		RR29 ABCDE 0 A_JumpIf(random(1,5) == 1,"Continue")
	Continue:
		"----" A 3 Light("YellowMediumFlicker3") Bright
		Stop
	}
}

Actor MonMuzzleFlashSmall : MonMuzzleFlash
{
	Scale 0.175
}


//=====================================================================================
//=====================================================================================
//	This guy over here is made to be a bit of a problem. It's melee range is quite
//	big, and whenever he enters the melee state, it will also move towards you, making
//	it harder to doge. There are 4 stages of distance this guy consider:
//	-Distance>250: He'll just run towards you to get closer
//	-250<Distance>128: He'll use it's lightning bolt
//	-128<Distance>80: He'll strike the ground causing an eletroshock to anything near
//	-Distance<=80: Melee attack.
//	Once it has performed a melee attack, he wont perform another until a bit of time
//	passes (24 tics), but in that time, he'll be able to do a range attack, and
//	considering the distance, most likely it'll be the pike on ground attack. Fun!
//=====================================================================================
//=====================================================================================

Actor Q4Berserker	//hellknight
{
	DropItem "CellAmmo"
	DropItem "HealthHeart" 210
	DropItem "PowerslaveSpawner" 28
	DropItem "PowerupSpawner" 8
	Monster	+DONTCORPSE	RipLevelMin 1
	Radius 16
	Height 56
	Health 350
	Mass 400
	PainChance 40
	Speed 13
	Scale 0.5
	MeleeDamage 1
	MeleeRange 80
	MaxTargetRange 250
	+FLOORCLIP
	SeeSound "quake4/Berserker/Sight"
	PainSound "quake4/Berserker/Pain"
	DeathSound "quake4/Berserker/Death"
	ActiveSound "quake4/Berserker/Idle"
	PainChance "Charm", 192
	PainChance "Terror", 192
	PainChance "Defile", 255
	PainChance "Drain", 110
	PainChance "Chaos", 255
	PainChance "ChaosExpl1", 255
	PainChance "ChaosExpl2", 255
	//Armor
	DamageFactor "Electric", 1.5
	DamageFactor "Plasma", 0.75
	DamageFactor "PlasmaDisint", 0.75
	DamageFactor "AEBullet", 0.5
	States
	{
	Pain.Charm:
		TNT1 A 0
		TNT1 A 0 A_ChangeFlag("FRIENDLY",1)
		Goto See
	Pain.Terror:
		TNT1 A 0
		TNT1 A 0 A_ChangeFlag("FRIGHTENED",1)
		Goto See
	Pain.Drain:
		TNT1 A 0
		TNT1 A 0 A_SpawnItemEx("DrainGiver",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION,0)
		Goto Pain
	Pain.Defile:
		TNT1 A 0
		TNT1 A 0 A_GiveInventory("DefileCheck",1)
		Goto See 
	Spawn:
		Q01I A 4 A_Look
		Loop
	See:
		Q01W AABBCCDDEEFF 2 A_Chase
		TNT1 A 0 //A_JumpIfInventory("DefileCheck",1,"DefileDecide")
		Loop
	See2:
		Q01W AABBCCDDEEFF 2 A_Chase("","Missile")
		Goto See
	Melee:
		TNT1 A 0 A_FaceTarget
		Q01M A 4 A_Recoil(-1) TNT1 A 0 A_FaceTarget
		Q01M B 4 A_Recoil(-1) TNT1 A 0 A_FaceTarget
		Q01M C 4 A_Recoil(-1) TNT1 A 0 A_FaceTarget
		Q01M D 0 A_CustomMeleeAttack(random(15,40),"quake4/Berserker/MeleeHit","quake4/Berserker/MeleeSwing","Normal",1)
		Q01M DEF 5
		Goto See2
	Missile:
		TNT1 A 0 A_Jump(160,"Choose")
		TNT1 A 0 A_PlaySound("quake4/Berserker/AttackGrowl",4)
	Choose:
		TNT1 A 0 A_JumpIfCloser(128,"Pike")
	Lightning:
		Q01A AB 3 A_FaceTarget
		TNT1 A 0 A_PlaySound("quake4/Berserker/Lightning")
		Q01A C 13 A_Customrailgun(random(10,30),7,"none","LightBlue",3,1,2)
		Q01A D 6
		Goto See
	Pike:
		TNT1 A 0 A_FaceTarget
		Q01B AB 3
		TNT1 A 0 A_PlaySound("quake4/Berserker/PikeIn",5)
		TNT1 A 0 A_CustomMissile("Q4BerExplo",0,0,0)
		TNT1 A 0 A_CustomMissile("Q4BerserkLightning",0,0,0+random(50,-50))
		TNT1 A 0 A_CustomMissile("Q4BerserkLightning",0,0,180+random(50,-50))
		TNT1 A 0 A_CustomMissile("Q4BerserkLightning",0,0,45+random(50,-50))
		TNT1 A 0 A_CustomMissile("Q4BerserkLightning",0,0,-45+random(50,-50))
		TNT1 A 0 A_CustomMissile("Q4BerserkLightning",0,0,135+random(50,-50))
		TNT1 A 0 A_CustomMissile("Q4BerserkLightning",0,0,-135+random(50,-50))
		Q01B C 50
		TNT1 A 0 A_PlaySound("quake4/Berserker/PikeOut",5)
		Q01B BA 3
		Goto See
	Pain:
		Q01P A 7 A_Pain
		Goto See
	Death:
		"####" "#" 0 A_UnsetSolid
		TNT1 A 0 //A_JumpIfInventory("DefileCheck",1,"DefileDeath")
		Q01D A 0 A_Scream
		Q01D AB 3
		TNT1 A 0 A_Fall
		Q01D CD 3
		TNT1 A 0 A_PlaySound("quake4/Misc/Body/Beefy")
		"####" "#" 0 A_ChangeFlag("CORPSE",1)
		Q01D E -1
		Stop
	DefileDeath:
		TNT1 A 0 A_Die
		TNT1 A 0 A_SpawnItemEx("RedMiteSpawner",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION,0)
		Goto XDeath+1
	XDeath:
		TNT1 A 0 //A_JumpIfInventory("DefileCheck",1,"DefileDeath")
		TNT1 A 0 A_Jump(256,"XDeathBlood")
		TNT1 AAAAAA 0 A_TossGib
		Goto Death
	XDeathBlood:
		TNT1 A 0 A_PlaySound("other/gibdeath")
		TNT1 A 0 A_SpawnItemEx("BloodGibDropper",0,0,random(20,40),0,0,0,0)
		TNT1 AAAAA 0 A_SpawnItemEx("Junk",0,0,0,random(-7,7),random(-7,7),random(1,14),random(1,359),SXF_TRANSFERTRANSLATION)
		TNT1 A 1 A_Fall
		Stop
	Death.UnholyDisint:
	Death.PlasmaDisint:
	Disintegrate:
		"####" "#" 0 Thing_SetTranslation(0,50)
		"####" "#" 1 A_FadeOut(0.015)
		"####" "#" 0 A_ChangeFlag("NOINTERACTION",1)
		"####" "#" 0 A_Stop    
		"####" "#" 0 A_Fall
		"####" "#" 0 A_SpawnItemEx("DisintegrateShadowMedium",0,0,30,0,0,0,0,SXF_NOCHECKPOSITION)
		"####" "#" 0 A_SpawnItemEx("DisintegrateSparksMedium",0,0,30,0,0,0,0,SXF_NOCHECKPOSITION)
		"####" "##" 2 A_FadeOut(0.03)
		Goto Disintegrate+6
	Raise:
		Q01D DCBA 3
		Goto See
	}
}
	
Actor Q4BerExplo
{
	+NOINTERACTION
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 4 A_Explode(random(40,100),160,0,1,50)
		Stop
	}
}

Actor Q4BerserkLightning
{
	Projectile
	+FloorHugger
	Speed 20
	Damage 0
	Radius 4
	Height 5
	+NOCLIP
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 AAAAAAAAA 1 A_SpawnItemEx("Q4BLTrail",0,random(3,-3),0,0,0,0,0,SXF_NOCHECKPOSITION)
		Stop
	}
}
Actor Q4BLTrail
{
	+NOINTERACTION
	RenderStyle Add
	Scale 0.6
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_Jump(160,2,3,4,5)
		ZAP1 ABCDEFDEFDEFDEF 4 Bright A_FadeOut(0.07)
		Goto Spawn+5
	}
}



//=====================================================================================
//=====================================================================================
//
//=====================================================================================
//=====================================================================================		

Actor Q4Voss		//cyberdemon
{
	DropItem "AEoDDevastatorItem" 64
	DropItem "CellBigAmmo"
	DropItem "RocketBigAmmo"
	DropItem "HealthHeart" 210
	DropItem "PowerslaveSpawner" 28
	DropItem "PowerupSpawner" 
	Monster	+DONTCORPSE	RipLevelMin 1
	Radius 35
	Height 80
	Mass 8000
	Health 4000
	PainChance 20
	Speed 7
	Scale 0.55
	+NOBLOOD
	+BOSS
	+NORADIUSDMG
	+FLOORCLIP
	SeeSound "quake4/Voss/Voice"
	PainSound ""
	DeathSound "quake4/Gladiator/Death"
	ActiveSound "quake4/Voss/Voice"
	PainChance "Charm", 0
	PainChance "Terror", 0
	PainChance "Defile", 0
	PainChance "Drain", 40
	PainChance "Chaos", 255
	DamageFactor "ChaosExpl1", 0
	DamageFactor "ChaosExpl2", 0
//Mechanic
	DamageFactor "Fire", 1.5
	DamageFactor "Ice", 0.75
	DamageFactor "Electric", 2.0
	DamageFactor "AEPoison", 0.5
	DamageFactor "AEBullet", 0.75
	DamageFactor "AEMagic", 0.75
 	DamageFactor "Plasma", 1.5
 	DamageFactor "PlasmaDisint", 1.5
	States
	{
	Pain.Drain:
		TNT1 A 0
		TNT1 A 0 A_SpawnItemEx("DrainGiver",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION,0)
		Goto Pain

	Spawn:
		Q02I A 4 A_Look
		Loop
	See:
		Q02W A 2 A_Chase		Q02W A 3 A_Chase
		Q02W B 2 A_Chase		Q02W B 3 A_Chase
		Q02W C 2 A_Chase		Q02W C 3 A_Chase
		TNT1 A 0 A_PlaySound("quake4/NetworkGuard/Step")
		Q02W D 2 A_Chase		Q02W D 3 A_Chase
		Q02W E 2 A_Chase		Q02W E 3 A_Chase
		Q02W F 2 A_Chase		Q02W F 3 A_Chase
		TNT1 A 0 A_PlaySound("quake4/NetworkGuard/Step")
		Loop
	Melee:
		TNT1 a 0 A_Jump(128,"Missile")
		Q02M ABBC 4 A_FaceTarget
		Q02M D 0 A_CustomMeleeAttack(random(50,100),"quake4/Misc/BladeHit","quake4/Misc/Swing")
		Q02M DDE 4
		Goto See
	Missile:
		TNT1 A 0 A_Jump(256,"Missiles","Lightning","DMG")
	Lightning:
		Q02A AB 3 A_FaceTarget
		TNT1 A 0 A_PlaySound("quake4/Berserker/Lightning")
		Q02A C 5 Light("BlueMediumFlicker2") A_Customrailgun(random(50,100),20,"none","LightBlue",3,1,2)
		Q02A C 20
		Q02A DA 4
		Goto See
	Missiles:
		Q02B AB 5 A_FaceTarget
		TNT1 A 0 A_PlaySound("quake4/NetworkGuard/Step",4)
		Q02B C 10 A_CustomMissile("StreamProtectorRocket",60,-14,0) TNT1 A 0 A_FaceTarget
		Q02B C 10 A_CustomMissile("StreamProtectorRocket",60,-14,0) TNT1 A 0 A_FaceTarget
		Q02B C 10 A_CustomMissile("StreamProtectorRocket",60,-14,0) TNT1 A 0 A_FaceTarget
		Q02B C 10 A_CustomMissile("StreamProtectorRocket",60,-14,0) TNT1 A 0 A_FaceTarget
		Q02B C 10 A_CustomMissile("StreamProtectorRocket",60,-14,0) TNT1 A 0 A_FaceTarget
		Q02B C 10 A_CustomMissile("StreamProtectorRocket",60,-14,0) TNT1 A 0 A_FaceTarget
		Q02B DEF 5 
		Goto See
	DMG:
		Q02C A 5 A_FaceTarget
		TNT1 A 0 A_PlaySound("quake4/NetworkGuard/Step",4)
		Q02C BCCCCCC 5 A_FaceTarget
		TNT1 A 0 A_PlaySound("quake4/Weapons/DMG/Fire",5)
		TNT1 A 0 A_CustomMissile("DMGShotMonster",35,-17,0)
		Q02C D 20
		TNT1 A 0 A_PlaySound("quake4/Weapons/DMG/Recharge",4)		
		Q02C EF 6
		Goto See
	Pain:
		Q02P A 7 A_Pain
		Goto See
	Death:
		"####" "#" 0 A_UnsetSolid
		Q02P A 0 A_Scream
		Q02P AAAAAAAAA 6 A_SpawnItemEx("BossDeathExplosion",random(30,-30),random(30,-30),random(20,80),0,0,0,0,SXF_NOCHECKPOSITION)
		Q02P AAA 0 A_SpawnItemEx("BossDeathExplosion",random(30,-30),random(30,-30),random(20,80),0,0,0,0,SXF_NOCHECKPOSITION)
		TNT1 AAAAAAAAAAAAAAAAA 0 A_TossGib
		Q02P A 0 A_Fall
		TNT1 AA 0 A_SpawnItemEx("BloodGibDropper",0,0,random(20,40),0,0,0,0)
		TNT1 A 0 A_KillMaster("Massacre",KILS_FOILINVUL,"None","AEoDSpawner")
		Q02P A 3 A_SpawnItemEx("BossDeathExplosionHuge",0,0,10,0,0,0,0,SXF_NOCHECKPOSITION)
		Stop
	Death.UnholyDisint:
	Death.PlasmaDisint:
	Disintegrate:
		"####" "#" 0 Thing_SetTranslation(0,50)
		"####" "#" 1 A_KillMaster("Massacre",KILS_FOILINVUL,"None","AEoDSpawner")
		"####" "#" 1 A_FadeOut(0.015)
		"####" "#" 0 A_ChangeFlag("NOINTERACTION",1)
		"####" "#" 0 A_Stop    
		"####" "#" 0 A_Fall
		"####" "#" 0 A_SpawnItemEx("DisintegrateShadowBig",0,0,45,0,0,0,0,SXF_NOCHECKPOSITION)
		"####" "#" 0 A_SpawnItemEx("DisintegrateSparksBig",0,0,45,0,0,0,0,SXF_NOCHECKPOSITION)
		"####" "##" 2 A_FadeOut(0.025)
		Goto Disintegrate+7
	Ice:
		"####" "#" 5 A_GenericFreezeDeath
		"####" "#" 0 A_KillMaster("Massacre",KILS_FOILINVUL,"None","AEoDSpawner")
		"####" "#" 1 A_FreezeDeathChunks
		Wait
	}
}
actor DMGShotMonster
{
	Projectile
	Speed 20
	Radius 15
	Height 25
	+RIPPER	RipperLevel 1
	+FORCERADIUSDMG
	Damage 20
	RenderStyle Add
	Scale 0.6
	States
	{
	Spawn:
		Q27A ABCDEFGHIJKLMNOPQRSTUVWXYZ 2 Light("DMGDarkness") Bright A_Explode(55,160,0)
		Q27B ABCDEFGHIJKLMNOPQRSTUVWX 2 Light("DMGDarkness") Bright A_Explode(55,160,0)
		Loop
	Death:
		TNT1 a 1 A_Explode(256,256,0)
		TNT1 A 0 A_SpawnItemEx("DMGExplo2",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		TNT1 AA 6 A_SpawnItemEx("DMGExplo1",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		Stop
	}
}

Actor DMGExplo1
{
	+NOINTERACTION
	RenderStyle Add
//	Alpha 0.66
	Scale 1.5
	Translation "0:255=%[0.0,0.0,0.0]:[0.84,0.74,0.91]"
	States
	{
	Spawn:
		SHOK ABCDEFGHIJKLMNOPQR 1 Bright A_FadeOut(0.06)
		SHOK R 1 Bright A_FadeOut(0.1)
		Wait
	}
}
	
Actor DMGExplo2
{
	+NOINTERACTION
//	RenderStyle Add
//	Alpha 0.9
//	Translation "0:255=%[0.0,0.0,0.0]:[0.0,0.0,0.0]"
	States
	{
	Spawn:
		VORX ABCDEFGHIJ 2 Bright A_FadeOut(0.05)
		VORX J 1 Bright A_FadeOut(0.1)
		Wait
	}
}	

//=====================================================================================
//=====================================================================================
//	This fella over here uses a completely new chasing logic. Since A_Chase forces
//	the movement into zig-zags, it would look dumb in a simple rolling ball that is
//	supposed to go straight to you; hence why I had to use a different method for this
//	guy's movement. However, there are a couple things to consider:
//	-Whenever he decides to perform action, there's a chance that instead of attacking
//	 it will strafe (left or right) or go faster in a straight line to you.
//	-If you're distance>1024 from this guy, it wont try to attack, it'll just try to
//	 get closer.
//	-If too close to you, it'll ignore the field of view it uses normally (180 dg) and
//	 will immediately perform an action (strafe, charge, or attack (by "too close" I
//	 mean distance<=64).
//=====================================================================================
//=====================================================================================	
Actor Q4Roller		//chainguy
{
	DropItem "BulletAmmo"
	DropItem "PowerSlaveSpawnerMonsterAmmo" 
	DropItem "PowerupSpawner" 8
	Health 300
	Monster	+DONTCORPSE	RipLevelMin 1
	Radius 16
	Height 56
	Mass 1000
	+NOBLOOD
	PainChance 0
	Speed 0
	Scale 0.65
	+FLOORCLIP
	SeeSound "quake4/Roller/Sight"
	Damage 1
	PainChance "Charm", 255
	PainChance "Terror", 255
	PainChance "Defile", 0
	PainChance "Drain", 160
	PainChance "Chaos", 255
	PainChance "ChaosExpl1", 255
	PainChance "ChaosExpl2", 255
//Mechanic
	DamageFactor "Fire", 1.5
	DamageFactor "Ice", 0.75
	DamageFactor "Electric", 2.0
	DamageFactor "AEPoison", 0.5
	DamageFactor "AEBullet", 0.75
	DamageFactor "AEMagic", 0.75
 	DamageFactor "Plasma", 1.5
 	DamageFactor "PlasmaDisint", 1.5
	States
	{
	Pain.Charm:
		TNT1 A 0
		TNT1 A 0 A_ChangeFlag("FRIENDLY",1)
		Goto See
    Pain.Terror:
		TNT1 A 0
		TNT1 A 0 A_ChangeFlag("FRIGHTENED",1)
		Goto See
    Pain.Drain:
		TNT1 A 0
		TNT1 A 0 A_SpawnItemEx("DrainGiver",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION,0)
		Goto See

	
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_StopSound(5) //to stop sound after target is killed and this actor go back to this state
		Q03A B 4 A_Look
		Wait
	See:
		Q03A A 3 A_PlaySound("quake4/Roller/Close",4)
		Goto SeeLoop
	SeeLoop:
		TNT1 a 0 A_ChangeFlag("NODROPOFF",1)
		TNT1 A 0 A_Chase(0,0,CHF_DONTMOVE)	//this is just because only this function sends this thing back to "spawn" after player is killed, so I need it somewhere, but is not for moving, not even to enter the missile states
		TNT1 a 0 A_PlaySound("quake4/Roller/WalkLoop",5,0.7,1)
		Q03W ABC 3 A_Recoil(-1.7)	TNT1 A 0 A_FaceTarget	
		Q03W DEF 3 A_Recoil(-1.7)	TNT1 A 0 A_FaceTarget		
		TNT1 A 0 A_JumpIfCloser(64,"MissileDecide")		//if too close, then directly to attack (to prevent it getting stuck with player at melee range)
		TNT1 A 0 A_JumpIfCloser(1024,"MissileCheck")
		Loop
	MissileCheck:
		TNT1 A 0 A_JumpIfTargetInLOS("MissileDecide",180)	//first makes sure this thing can see player
		Goto SeeLoop
	MissileDecide:
		TNT1 A 0 A_Jump(40,"Missile")			//then 1/8 to go attack if not that close (above case)
	Strafe:
		TNT1 A 0 A_SetAngle(angle+(90*random(1,-1)))  //it will accelerate either forwards, left or right (90,0,-90)
		Q03W ABCDEF 2 A_Recoil(-1.7)
		Q03W ABCDEF 2 A_Recoil(-1.7)
		Goto SeeLoop

	Missile:
		TNT1 A 0 A_Stop
		TNT1 A 0 A_FaceTarget
		TNT1 a 0 A_PlaySound("quake4/Roller/Open",5)
		Q03A ABCD 4
	MissileLooper:
		TNT1 A 0 A_PlaySound("quake4/Sentry/Machinegun")
		TNT1 A 0 A_SpawnItemEx("MonMuzzleFlashSmall",5,15,37,0,0,0,0,SXF_NOCHECKPOSITION)
		TNT1 A 0 A_SpawnItemEx("MonMuzzleFlashSmall",5,-15,37,0,0,0,0,SXF_NOCHECKPOSITION)
		"----" A 0 A_CustomMissile("BulletTracerFX",37,15,random(-3,3),CMF_OFFSETPITCH,random(-3,3))
		"----" A 0 A_CustomMissile("BulletTracerFX",37,-15,random(-3,3),CMF_OFFSETPITCH,random(-3,3))
		Q03A D 4 A_CustomBulletAttack(3,3,1,4)
		TNT1 A 0 A_MonsterRefire(0,"MissileEnd")
		TNT1 A 0 A_Jump(10,"MissileEnd")
		Loop
	MissileEnd:
		TNT1 a 0 A_PlaySound("quake4/Roller/Close",5)
		Q03A CBA 3
		Goto SeeLoop
	Death:
		"####" "#" 0 A_UnsetSolid
		TNT1 A 0 A_StopSound(5)
		TNT1 A 0 A_PlaySound("quake4/Misc/Explo",6)
		TNT1 A 0 A_Explode(32,128)
		TNT1 AAAAAAAAAAAAA 0 A_TossGib
		TNT1 A 0 A_Fall
		TNT1 A 3 A_SpawnItemEx("MonExplosionMedium",0,0,25,0,0,0,0,SXF_NOCHECKPOSITION)
		Stop
	Death.UnholyDisint:
	Death.PlasmaDisint:
	Disintegrate:
		"####" "#" 0 Thing_SetTranslation(0,50)
		"####" "#" 1 A_FadeOut(0.015)
		"####" "#" 0 A_ChangeFlag("NOINTERACTION",1)
		"####" "#" 0 A_Stop    
		"####" "#" 0 A_Fall
		"####" "#" 0 A_SpawnItemEx("DisintegrateShadowSmallMedium",0,0,18,0,0,0,0,SXF_NOCHECKPOSITION)
		"####" "#" 0 A_SpawnItemEx("DisintegrateSparksSmallMedium",0,0,18,0,0,0,0,SXF_NOCHECKPOSITION)
		"####" "##" 2 A_FadeOut(0.03)
		Goto Disintegrate+6
	}
}



//=====================================================================================
//=====================================================================================
//
//=====================================================================================
//=====================================================================================	
Actor Q4FailedTransfer		//shotguy
{
	DropItem "ShellAmmo"
	DropItem "HealthHeart" 210
	DropItem "PowerSlaveSpawnerShotgunner" 210
	DropItem "PowerupSpawner" 8
	Monster	+DONTCORPSE	RipLevelMin 1
	Radius 16
	Height 56
	Health 120
	Mass 400
	PainChance 64
	Speed 9
	Scale 0.34
	+FLOORCLIP
	SeeSound "quake4/FailedTransfer/Sight"
	PainSound "quake4/FailedTransfer/Pain"
	DeathSound "quake4/FailedTransfer/Death"
	ActiveSound "quake4/FailedTransfer/Idle"
	PainChance "Charm", 255
	PainChance "Terror", 255
	PainChance "Defile", 255
	PainChance "Drain", 160
	PainChance "Chaos", 255
	PainChance "ChaosExpl1", 255
	PainChance "ChaosExpl2", 255
//Flesh
	DamageFactor "Electric", 1.5
	DamageFactor "AEPoison", 1.5
	DamageFactor "AEBullet", 2.0
	States
	{
	Pain.Charm:
		TNT1 A 0
		TNT1 A 0 A_ChangeFlag("FRIENDLY",1)
		Goto See
    Pain.Terror:
		TNT1 A 0
		TNT1 A 0 A_ChangeFlag("FRIGHTENED",1)
		Goto See
    Pain.Drain:
		TNT1 A 0
		TNT1 A 0 A_SpawnItemEx("DrainGiver",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION,0)
		Goto Pain
    Pain.Defile:
		TNT1 A 0
		TNT1 A 0 A_GiveInventory("DefileCheck",1)
		Goto See 


	Spawn:
		Q04I A 4 A_Look
		Loop
	See:
		Q04W ABCD 6 A_Chase
		TNT1 A 0 //A_JumpIfInventory("DefileCheck",1,"DefileDecide")
		Loop
	Missile:
		Q04I AAAAA 3 A_FaceTarget(0,0)
		TNT1 A 0 A_PlaySound("quake4/Weapons/Shotgun/Fire",4)
		TNT1 A 0 A_SpawnItemEx("MonMuzzleFlashSmall",18,2,32,0,0,0,0,SXF_NOCHECKPOSITION)
		"----" AAAA 0 A_CustomMissile("BulletTracerFX",32,2,random(-6,6),CMF_OFFSETPITCH,random(-6,6))
		TNT1 A 0 A_CustomBulletAttack(6,6,4,4)
		Q04A BC 2 
		Q04A CBA 5
		TNT1 A 0 A_PlaySound("quake4/Weapons/Shotgun/Pump",5)
		Q04I A 4
		Goto See
	Pain:
		Q04P A 7 A_Pain
		Goto See
	Death:
		TNT1 A 0 A_UnsetSolid
		TNT1 A 0 //A_JumpIfInventory("DefileCheck",1,"DefileDeath")
		Q04D A 0 A_Scream
		Q04D ABCD 2
		Q04D A 0 A_Fall
		Q04D EFG 2
		TNT1 A 0 A_PlaySound("quake4/Misc/Body/Small")
		Q04D HI 3
		"####" "#" 0 A_ChangeFlag("CORPSE",1)
		Q04D J -1
		Stop
	XDeath:
		TNT1 A 0 //A_JumpIfInventory("DefileCheck",1,"DefileDeath")
		TNT1 A 0 A_Jump(256,"XDeathBlood")
		TNT1 AAAAAA 0 A_TossGib
		Goto Death
	XDeathBlood:
		TNT1 A 0 A_PlaySound("other/gibdeath")
		TNT1 A 0 A_SpawnItemEx("BloodGibDropper",0,0,random(20,40),0,0,0,0)
		TNT1 A 1 A_Fall
		Stop
	DefileDeath:
		TNT1 A 0 A_Die
		TNT1 A 0 A_SpawnItemEx("RedMiteSpawner",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION,0)
		Goto XDeath+1
	Raise:
		Q04D IHGFEDCBA 3
		Goto See
	Death.UnholyDisint:
	Death.PlasmaDisint:
	Disintegrate:
		"####" "#" 0 Thing_SetTranslation(0,50)
		"####" "#" 1 A_FadeOut(0.015)
		"####" "#" 0 A_ChangeFlag("NOINTERACTION",1)
		"####" "#" 0 A_Stop    
		"####" "#" 0 A_Fall
		"####" "#" 0 A_SpawnItemEx("DisintegrateShadowSmallMedium",0,0,18,0,0,0,0,SXF_NOCHECKPOSITION)
		"####" "#" 0 A_SpawnItemEx("DisintegrateSparksSmallMedium",0,0,18,0,0,0,0,SXF_NOCHECKPOSITION)
		"####" "##" 2 A_FadeOut(0.03)
		Goto Disintegrate+6
	}
}



//=====================================================================================
//=====================================================================================
//	This guy basically has a shield as long as he has at least 300 hp. If it goes
//	lower, the shield will be deactivated. The sield only protects the front, but
//	even then you can shoot at it's feet to deal damage. The shield is completely
//	lowered when he uses the blaster attack. The shield is up when he's charging
//	the railgun, but it's off for a little while when the actual railgun is shot.
//	Once the shield is off due to damage (hp<300) no shield will be pulled up at
//	all.
//=====================================================================================
//=====================================================================================
Actor Q4Gladiator		//arachno
{
	DropItem "AEoDSniperRailgunItem" 32
	DropItem "CellBigAmmo"
	DropItem "HealthHeart" 210
	DropItem "PowerslaveSpawner" 28
	DropItem "PowerupSpawner" 8
	Monster	+DONTCORPSE	RipLevelMin 1
	Radius 22
	Height 56
	Mass 1000
	Health 700
	PainChance 40
	Speed 13
	Scale 0.39
	MeleeDamage 1
	+NOBLOOD
	+FLOORCLIP
	SeeSound "quake4/Gladiator/Sight"
	PainSound ""
	DeathSound "quake4/Gladiator/Death"
	ActiveSound "quake4/Gladiator/Idle"
	MeleeRange 70
	PainChance "Charm", 192
	PainChance "Terror", 192
	PainChance "Defile", 0
	PainChance "Drain", 96
	PainChance "Chaos", 255
	PainChance "ChaosExpl1", 255
	PainChance "ChaosExpl2", 255
//Mechanic
	DamageFactor "Fire", 1.5
	DamageFactor "Ice", 0.75
	DamageFactor "Electric", 2.0
	DamageFactor "AEPoison", 0.5
	DamageFactor "AEBullet", 0.75
	DamageFactor "AEMagic", 0.75
 	DamageFactor "Plasma", 1.5
 	DamageFactor "PlasmaDisint", 1.5
	States
	{
	Pain.Charm:
		TNT1 A 0
		TNT1 A 0 A_ChangeFlag("FRIENDLY",1)
		Goto See
    Pain.Terror:
		TNT1 A 0
		TNT1 A 0 A_ChangeFlag("FRIGHTENED",1)
		Goto See
    Pain.Drain:
		TNT1 A 0
		TNT1 A 0 A_SpawnItemEx("DrainGiver",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION,0)
		Goto Pain
    Pain.Defile:
		TNT1 A 0
		TNT1 A 0 A_GiveInventory("DefileCheck",1)
		Goto See 

	
	
	Spawn:
		Q05I A 4 A_Look
		Loop
	See:
		TNT1 A 0 A_JumpIfHealthLower(300,"SeeNoShieldOffSnd")
	ShieldStart:
		TNT1 A 0 A_JumpIfInventory("ShieldUp",1,"SeeShield")
		TNT1 A 0 A_PlaySound("quake4/Gladiator/ShieldUp",4)
		Q05I A 4 A_GiveInventory("ShieldUp",1)
	SeeShield:
		TNT1 a 0 A_PlaySound("quake4/Gladiator/ShieldLoop",5,1.0,1)
		TNT1 A 0 A_SpawnItemEx("Q4GladiatorShieldup",18,0,15,0,0,0,0,SXF_NOCHECKPOSITION)
		Q05W A 4 A_Chase		TNT1 A 0 A_SpawnItemEx("Q4GladiatorShieldup",18,0,15,0,0,0,0,SXF_NOCHECKPOSITION)
		Q05W B 4 A_Chase		TNT1 A 0 A_SpawnItemEx("Q4GladiatorShieldup",18,0,15,0,0,0,0,SXF_NOCHECKPOSITION)
		Q05W C 4 A_Chase		TNT1 A 0 A_SpawnItemEx("Q4GladiatorShieldup",18,0,15,0,0,0,0,SXF_NOCHECKPOSITION)
		TNT1 A 0 A_PlaySound("quake4/NetworkGuard/Step")
		Q05W D 4 A_Chase		TNT1 A 0 A_SpawnItemEx("Q4GladiatorShieldup",18,0,15,0,0,0,0,SXF_NOCHECKPOSITION)
		Q05W E 4 A_Chase		TNT1 A 0 A_SpawnItemEx("Q4GladiatorShieldup",18,0,15,0,0,0,0,SXF_NOCHECKPOSITION)
		Q05W F 4 A_Chase
		TNT1 A 0 A_PlaySound("quake4/NetworkGuard/Step")
		Goto SeeShield+1
	SeeNoShieldOffSnd:
		TNT1 A 0 A_JumpIfInventory("ShieldDown",1,"SeeNoShield")
		TNT1 A 0 A_GiveInventory("ShieldDown",1)
		TNT1 A 0 A_PlaySound("quake4/Gladiator/ShieldDown",4)
		TNT1 A 0 A_StopSound(5) //stops the looping sound
	SeeNoShield:
		Q05W ABC 4 A_Chase
		TNT1 A 0 A_PlaySound("quake4/NetworkGuard/Step")
		Q05W DEF 4 A_Chase
		TNT1 A 0 A_PlaySound("quake4/NetworkGuard/Step")
		Loop
	Melee:
		TNT1 a 0 A_Jump(64,"Missile")
		TNT1 A 0 A_FaceTarget
		Q05M A 4 A_Recoil(-1.4)		TNT1 A 0 A_FaceTarget
		Q05M B 4 A_Recoil(-1.4)		TNT1 A 0 A_FaceTarget
		Q05M C 4 A_Recoil(-1.4)		TNT1 A 0 A_FaceTarget
		TNT1 A 0 A_CustomMeleeAttack(random(30,70),"quake4/Berserker/MeleeHit","quake4/Berserker/MeleeSwing","Normal",1)
		Q05M DEF 4 A_Recoil(-1.4)
		Goto See
	Missile:
		TNT1 A 0 A_Jump(80,"SkipGrowl")
		TNT1 A 0 A_PlaySound("quake4/Gladiator/AttackGrowl",3)
	SkipGrowl:
		TNT1 A 0 A_Jump(256,"Railgun","Blaster")
	Railgun:
		TNT1 a 0 A_JumpIfHealthLower(300,"RailgunNoShield")
		TNT1 A 0 A_SpawnItemEx("Q4GladiatorShieldup",18,0,15,0,0,0,0,SXF_NOCHECKPOSITION)
		Q05I A 4 A_FaceTarget		TNT1 A 0 A_SpawnItemEx("Q4GladiatorShieldup",18,0,15,0,0,0,0,SXF_NOCHECKPOSITION)
		Q05I A 4 A_FaceTarget		TNT1 A 0 A_SpawnItemEx("Q4GladiatorShieldup",18,0,15,0,0,0,0,SXF_NOCHECKPOSITION)
		TNT1 A 0 A_PlaySound("quake4/Gladiator/RailgunCharge",4)
		Q05A A 4 A_FaceTarget		TNT1 A 0 A_SpawnItemEx("Q4GladiatorShieldup",18,0,15,0,0,0,0,SXF_NOCHECKPOSITION)
		Q05A B 4 A_FaceTarget		TNT1 A 0 A_SpawnItemEx("Q4GladiatorShieldup",18,0,15,0,0,0,0,SXF_NOCHECKPOSITION)
		Q05A B 4 A_FaceTarget		TNT1 A 0 A_SpawnItemEx("Q4GladiatorShieldup",18,0,15,0,0,0,0,SXF_NOCHECKPOSITION)
		Q05A B 4 A_FaceTarget		TNT1 A 0 A_SpawnItemEx("Q4GladiatorShieldup",18,0,15,0,0,0,0,SXF_NOCHECKPOSITION)
		Q05A B 4 A_FaceTarget		TNT1 A 0 A_SpawnItemEx("Q4GladiatorShieldup",18,0,15,0,0,0,0,SXF_NOCHECKPOSITION)
		Q05A B 4 A_FaceTarget		TNT1 A 0 A_SpawnItemEx("Q4GladiatorShieldup",18,0,15,0,0,0,0,SXF_NOCHECKPOSITION)
		Q05A B 4 A_FaceTarget		TNT1 A 0 A_SpawnItemEx("Q4GladiatorShieldup",18,0,15,0,0,0,0,SXF_NOCHECKPOSITION)
		Q05A B 4 A_FaceTarget		TNT1 A 0 A_SpawnItemEx("Q4GladiatorShieldup",18,0,15,0,0,0,0,SXF_NOCHECKPOSITION)
		Q05A B 4 A_FaceTarget		TNT1 A 0 A_SpawnItemEx("Q4GladiatorShieldup",18,0,15,0,0,0,0,SXF_NOCHECKPOSITION)
		Q05A B 8 A_FaceTarget	
		TNT1 A 0 A_PlaySound("quake4/Gladiator/RailgunShot",4)
		TNT1 A 0 A_Customrailgun(random(30,110),11,"Orange","White",1,1,2)
		Q05A C 5 Light("OrangeMediumFlicker2")
		Q05A DE 5
		Goto See
	RailgunNoShield:
		Q05I AA 4 A_FaceTarget
		TNT1 A 0 A_PlaySound("quake4/Gladiator/RailgunCharge",4)
		Q05A ABBBBBBBB 4 A_FaceTarget
		Q05A B 5 A_FaceTarget
		TNT1 A 0 A_PlaySound("quake4/Gladiator/RailgunShot",4)
		TNT1 A 0 A_Customrailgun(random(30,110),11,"Orange","White",1,1,2)
		Q05A C 5 Light("OrangeMediumFlicker2")
		Q05A DE 5
		Goto See
	Blaster:		//blaster will not have shield ever, kinda backwards from what you see on q4, i know
		Q05I AA 3
		Q05B A 3 A_FaceTarget	
		TNT1 A 0 A_PlaySound("quake4/Gladiator/BlasterShot")
		Q05B B 3 A_CustomMissile("Q4BlasterProjBig",34,-14,0)
		Q05B C 3 A_FaceTarget
		TNT1 A 0 A_Jump(48,"See")
		TNT1 A 0 A_Cposrefire
		Goto Blaster+2
	Pain:
		Q05P A 8 A_Pain
		Goto See
	Death:
		TNT1 A 0 A_UnsetSolid
		TNT1 A 0 A_StopSound(5) //stops the looping sound
		Q05D A 0 A_Fall
		Q05D A 0 A_Scream
		Q05D ABCDEFGH 2
		TNT1 A 0 A_PlaySound("quake4/Misc/Body/Metal")
		"####" "#" 0 A_ChangeFlag("CORPSE",1)
		Q05D I -1 A_KillMaster("Massacre",KILS_FOILINVUL,"None","AEoDSpawner")
		Stop
	XDeath:
		TNT1 A 0 A_Jump(256,"XDeathBlood")
		TNT1 AAAA 0 A_TossGib
		TNT1 AAAA 0 A_SpawnItemEx("NewMeat",0,0,0,random(-7,7),random(-7,7),random(1,14),random(1,359),SXF_TRANSFERTRANSLATION)
		Goto Death
	XDeathBlood:
		TNT1 A 0 A_PlaySound("other/gibdeath")
		TNT1 AAAAAAAAAAAAAAA 0 A_TossGib
		TNT1 AAAA 0 A_SpawnItemEx("NewMeat",0,0,0,random(-7,7),random(-7,7),random(1,14),random(1,359),SXF_TRANSFERTRANSLATION)
		TNT1 A 0 A_SpawnItemEx("BloodGibDropper",0,0,random(20,40),0,0,0,0)
		TNT1 A 0 A_KillMaster("Massacre",KILS_FOILINVUL,"None","AEoDSpawner")
		TNT1 A 1 A_Fall
		Stop
	Ice:
		"####" "#" 5 A_GenericFreezeDeath
		"####" "#" 0 A_KillMaster("Massacre",KILS_FOILINVUL,"None","AEoDSpawner")
		"####" "#" 1 A_FreezeDeathChunks
		Wait
	Raise:
		Q05D HGFEDCBA 3
		Goto See
	Death.UnholyDisint:
	Death.PlasmaDisint:
	Disintegrate:
		"####" "#" 0 A_StopSound(5)
		"####" "#" 0 Thing_SetTranslation(0,50)
		"####" "#" 0 A_KillMaster("Massacre",KILS_FOILINVUL,"None","AEoDSpawner")
		"####" "#" 1 A_FadeOut(0.015)
		"####" "#" 0 A_ChangeFlag("NOINTERACTION",1)
		"####" "#" 0 A_Stop    
		"####" "#" 0 A_Fall
		"####" "#" 0 A_SpawnItemEx("DisintegrateShadowMediumBig",0,0,40,0,0,0,0,SXF_NOCHECKPOSITION)
		"####" "#" 0 A_SpawnItemEx("DisintegrateSparksMediumBig",0,0,40,0,0,0,0,SXF_NOCHECKPOSITION)
		"####" "##" 2 A_FadeOut(0.03)
		Goto Disintegrate+8
	}
}

//**********************************************
Actor ShieldUp : Inventory
{ Inventory.MaxAmount 1 }
Actor ShieldDown : Inventory
{ Inventory.MaxAmount 1 }

//**********************************************
Actor Q4BlasterProjBig
{
	Projectile
	Radius 8
	Height 12
	Damage 15
	Speed 27
	RenderStyle Add
	SeeSound ""
	Translation "80:95=208:223","96:111=176:191"
	States
	{
	Spawn:
		LBA2 A 2 Light("OrangeMediumFlicker2") Bright A_SpawnItemEx("BlasterBigTrail",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		Loop
	Death:
		TNT1 A 4 A_SpawnItemEx("Q4BlasterProjBigExplo",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		Stop
	}
}
Actor Q4BlasterProjSmall : Q4BlasterProjBig 
{
	Damage 5
	Scale 0.4
	States
	{
	Spawn:
		LBA2 A 2 Light("OrangeMediumFlicker3") Bright A_SpawnItemEx("BlasterSmallTrail",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		Loop
	Death:
		TNT1 A 4 A_SpawnItemEx("Q4BlasterProjSmallExplo",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		Stop
	}
}

Actor BlasterBigTrail
{
	+NOINTERACTION
	Translation "112:120=208:223","120:127=176:191"
	RenderStyle Add
	Alpha 0.4
	Scale 0.5
	States
	{	
	Spawn:
		ACID E 1 A_FadeOut(0.05)
		Wait
	}
}

Actor BlasterSmallTrail : BlasterBigTrail
{	Scale 0.17	}



Actor Q4BlasterProjBigExplo
{
	+NOINTERACTION
	RenderStyle Add
	Translation "169:178=208:223"
	States
	{
	Spawn:
		STAR F 2 Light("OrangeMediumFlicker3") Bright A_FadeOut(0.04)
		STAR GHIJ 2 Light("OrangeMediumFlicker2") Bright A_FadeOut(0.04)
		STAR K 2 Light("OrangeMediumFlicker3") Bright A_FadeOut(0.04)
		STAR L 2 Light("OrangeSmallFlicker1") Bright A_FadeOut(0.04)
		STAR M 2 Light("OrangeSmallFlicker1") Bright A_FadeOut(0.04)
		STAR N 2 Light("OrangeSmallFlicker2") Bright A_FadeOut(0.04)
		STAR O 2 Light("OrangeSmallFlicker3") Bright A_FadeOut(0.04)
		Stop
	}
}
Actor Q4BlasterProjSmallExplo : Q4BlasterProjBigExplo
{	Scale 0.4
	States
	{
	Spawn:
		STAR F 2 Light("OrangeSmallFlicker1") Bright A_FadeOut(0.04)
		STAR GHIJ 2 Light("OrangeMediumFlicker3") Bright A_FadeOut(0.04)
		STAR K 2 Light("OrangeSmallFlicker1") Bright A_FadeOut(0.04)
		STAR L 2 Light("OrangeSmallFlicker2") Bright A_FadeOut(0.04)
		STAR M 2 Light("OrangeSmallFlicker2") Bright A_FadeOut(0.04)
		STAR N 2 Light("OrangeSmallFlicker3") Bright A_FadeOut(0.04)
		STAR O 2 Light("OrangeSmallFlicker3") Bright A_FadeOut(0.04)
		Stop
	}
}

//**********************************************

Actor Q4GladiatorShieldup
{
    radius 23
    height 50
    health 99999999
    painchance 255
	painchance "PillarDamage", 0
	damagefactor "PillarDamage", 0.0
    mass 99999999999
    RENDERSTYLE None
    +SHOOTABLE
    +NOCLIP
    +NOBLOOD
    +NOGRAVITY
    +GHOST
    states
    {
    Spawn:
	PLAY A 1
	TNT1 A 0 A_GiveInventory("Q2BrainsShieldChecker",1)
	TNT1 A 0 A_JumpIfInventory("Q2BrainsShieldChecker",7,1)
	loop
	TNT1 A 0
	stop
    Pain:
	TNT1 A 0 A_JumpIfInventory("Q2BrainsShieldChecker",7,7)
	TNT1 A 0 A_JumpIfInventory("Q2BrainsShieldalreadyup",1,7)
	TNT1 A 0 A_GiveInventory("Q2BrainsShieldalreadyup",1)
	TNT1 A 0 A_PlaySound("quake4/Gladiator/ShieldHit")
	PLAY A 1 A_SpawnItemEx("Q4GladiatorShield",8,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
	TNT1 A 0 A_GiveInventory("Q2BrainsShieldChecker",1)
	TNT1 A 0 A_TakeInventory("Q2BrainsShieldAlreadyup",1)
	goto Spawn
    Ender:
	TNT1 A 0
	stop
	TNT1 A 0
	goto Spawn
    }  
}

Actor Q4GladiatorShield
{
	+NOINTERACTION
	RENDERSTYLE ADD
//	Translation "0:255=213:213"
	scale 0.25
	states
	{
	Spawn:
		Q05S A 3 Light("OrangeMediumFlicker3") Bright
		stop
	}
}










//=====================================================================================
//=====================================================================================
//	So, demon huh? Well, this one will beat the crap out of friendly demons. First,
//	is kinda fast, slightly faster than a pinky. However, it's melee attack is 
//	stronger, and has a longer melee range. Now, whenever the monster has taken 100
//	damage, it will go berserk. It will hit the floor in sign he's angry. He'll be 
//	50% faster when running, and it's melee will deal much more damage. If that was
//	not enough, he'll heal 75 hitpoints. Now, whenever the target dies, he'll calm
//	down. But whenever acquires a new target, if health is below 50, again will heal.
//	This only happens 3 times (i.e. for 3 different targets); the 4th time he might
//	do his whole circus of "im angry" but it wont heal or anything. His supplies of
//	"stroyent" are enough for only 3 injections.
//=====================================================================================
//=====================================================================================

Actor Q4Grunt		//Demon
{
	DropItem "BulletAmmo"
	DropItem "HealthHeart" 210
	DropItem "PowerslaveSpawner" 28
	DropItem "PowerupSpawner" 8
	Monster	+DONTCORPSE	RipLevelMin 1
	Radius 16
	Height 56
	Health 200
	Mass 400
	PainChance 64
	Speed 11
	Scale 0.39
	MeleeRange 60
	MinMissileChance 255
	MeleeThreshold 500		//he'd rather whack you to a pulp
	+FLOORCLIP
	SeeSound "quake4/Grunt/Sight"
	PainSound "quake4/Grunt/Pain"
	DeathSound "quake4/Grunt/Death"
	ActiveSound "quake4/Grunt/Idle"
	PainChance "Charm", 255
	PainChance "Terror", 255
	PainChance "Defile", 255
	PainChance "Drain", 153
	PainChance "Chaos", 255
	PainChance "ChaosExpl1", 255
	PainChance "ChaosExpl2", 255
//Armor
	DamageFactor "Electric", 1.5
	DamageFactor "Plasma", 0.75
	DamageFactor "PlasmaDisint", 0.75
	DamageFactor "AEBullet", 0.5
	States
	{
	Pain.Charm:
		TNT1 A 0
		TNT1 A 0 A_ChangeFlag("FRIENDLY",1)
		Goto See
    Pain.Terror:
		TNT1 A 0
		TNT1 A 0 A_ChangeFlag("FRIGHTENED",1)
		Goto See
    Pain.Drain:
		TNT1 A 0
		TNT1 A 0 A_SpawnItemEx("DrainGiver",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION,0)
		Goto Pain
    Pain.Defile:
		TNT1 A 0
		TNT1 A 0 A_GiveInventory("DefileCheck",1)
		Goto See 


	
	Spawn:
		Q06I A 0
		Q06I A 0 A_TakeInventory("BerserkToken",1) //will calm down after target's dead
		Q06I A 4 A_Look
		Wait
	See:
		TNT1 A 0 A_JumpIfInventory("TimesBerserk",3,"SeeNormal") //if it has healed 3 times already, no more
		TNT1 A 0 A_JumpIfInventory("BerserkToken",1,"SeeBerserk")
		TNT1 A 0 A_JumpIfHealthLower(50,"Berserk")
	SeeNormal:
		Q06W AABBCCDDEEFF 2 A_Chase
		TNT1 A 0 //A_JumpIfInventory("DefileCheck",1,"DefileDecide")
		Loop
	SeeBerserk:		//fucking fast, and no range attack at all
		TNT1 AA 0 A_SpawnItemEx("StroyentGas",random(15,-15),random(15,-15),random(20,45),0,0,frandom(0.3,0.5),0,SXF_NOCHECKPOSITION)
		Q06W A 2 A_Chase("MeleeBerserk","")	Q06W A 1 A_Chase("MeleeBerserk","")	TNT1 AA 0 A_SpawnItemEx("StroyentGas",random(15,-15),random(15,-15),random(20,45),0,0,frandom(0.3,0.5),0,SXF_NOCHECKPOSITION)
		Q06W B 2 A_Chase("MeleeBerserk","")	Q06W B 1 A_Chase("MeleeBerserk","")	TNT1 AA 0 A_SpawnItemEx("StroyentGas",random(15,-15),random(15,-15),random(20,45),0,0,frandom(0.3,0.5),0,SXF_NOCHECKPOSITION)
		Q06W C 2 A_Chase("MeleeBerserk","")	Q06W C 1 A_Chase("MeleeBerserk","")	TNT1 AA 0 A_SpawnItemEx("StroyentGas",random(15,-15),random(15,-15),random(20,45),0,0,frandom(0.3,0.5),0,SXF_NOCHECKPOSITION)
		Q06W D 2 A_Chase("MeleeBerserk","")	Q06W D 1 A_Chase("MeleeBerserk","")	TNT1 AA 0 A_SpawnItemEx("StroyentGas",random(15,-15),random(15,-15),random(20,45),0,0,frandom(0.3,0.5),0,SXF_NOCHECKPOSITION)
		Q06W E 2 A_Chase("MeleeBerserk","")	Q06W E 1 A_Chase("MeleeBerserk","")	TNT1 AA 0 A_SpawnItemEx("StroyentGas",random(15,-15),random(15,-15),random(20,45),0,0,frandom(0.3,0.5),0,SXF_NOCHECKPOSITION)
		Q06W F 2 A_Chase("MeleeBerserk","")	Q06W F 1 A_Chase("MeleeBerserk","")
		Loop
	Melee:
		Q06M ABC 3 A_FaceTarget
		Q06M D 4 A_CustomMeleeAttack(random(10,30),"quake4/Misc/MeleeHit","quake4/Misc/Swing","Normal",1)
		Q06M EF 4
		Goto See
	MeleeBerserk:	//damages more when in berserk mode
		Q06M A 3 A_FaceTarget TNT1 AA 0 A_SpawnItemEx("StroyentGas",random(15,-15),random(15,-15),random(20,45),0,0,frandom(0.3,0.5),0,SXF_NOCHECKPOSITION)
		Q06M B 3 A_FaceTarget TNT1 AA 0 A_SpawnItemEx("StroyentGas",random(15,-15),random(15,-15),random(20,45),0,0,frandom(0.3,0.5),0,SXF_NOCHECKPOSITION)
		Q06M C 3 A_FaceTarget TNT1 AA 0 A_SpawnItemEx("StroyentGas",random(15,-15),random(15,-15),random(20,45),0,0,frandom(0.3,0.5),0,SXF_NOCHECKPOSITION)
		Q06M D 4 A_CustomMeleeAttack(random(15,35),"quake4/Misc/MeleeHit","quake4/Misc/Swing","Normal",1) //no spawn needed here since it's covered by next two frames
		Q06M EF 4 A_SpawnItemEx("StroyentGas",random(15,-15),random(15,-15),random(20,45),0,0,frandom(0.3,0.5),0,SXF_NOCHECKPOSITION)
		Goto SeeBerserk
	Missile:
	MGunAtt:
		Q06I AAA 3 A_FaceTarget(0,0)
		TNT1 A 0 A_PlaySound("quake4/Grunt/MachineGunShot")
		TNT1 A 0 A_SpawnItemEx("MonMuzzleFlashSmall",10,-9,41,0,0,0,0,SXF_NOCHECKPOSITION)
		"----" A 0 A_CustomMissile("BulletTracerFX",41,-9,random(-9,9),CMF_OFFSETPITCH,random(-9,9))
		Q06A A 5 A_CustomBulletAttack(9,9,1,2)	//pretty weak, since it's not supposed to be it's main attack
		TNT1 A 0 A_CPosRefire
		TNT1 A 0 A_Jump(20,"See")
		Goto MGunAtt+3
	Berserk:
		TNT1 A 0 A_JumpIfInventory("TimesBerserk",3,"BerserkNoEffect")
		TNT1 A 0 A_ChangeFlag("NOPAIN",1)
		Q06I AA 2
		TNT1 A 0 A_GiveInventory("TimesBerserk",1)
		TNT1 A 0 A_GiveInventory("BerserkToken",1)
		TNT1 A 0 A_PlaySound("quake4/Grunt/Anger",5)
		Q06B ABCD 4
		TNT1 A 0 HealThing(60)
		TNT1 A 0 A_PlaySound("quake4/Grunt/GroundHit",6)
		Q06B EF 4 
		Q06I A 3
		TNT1 A 0 A_ChangeFlag("NOPAIN",0)
		Goto SeeBerserk
	BerserkNoEffect:		//he'll still play the animation, but no special effect (no heal)
		Q06I AA 2
		TNT1 A 0 A_PlaySound("quake4/Grunt/Anger",5)
		Q06B ABCD 4
		TNT1 A 0 A_PlaySound("quake4/Grunt/GroundHit",6)
		Q06B EF 4 
		Q06I A 3
		Goto See
	Pain:
		Q06P A 7 A_Pain
		Goto See
	Death:
		TNT1 A 0 A_UnsetSolid
		TNT1 A 0 //A_JumpIfInventory("DefileCheck",1,"DefileDeath")
		Q06D A 0 A_Fall
		Q06D A 0 A_Scream
		Q06D ABCDEFGHIJK 2
		TNT1 A 0 A_PlaySound("quake4/Misc/Body/Beefy")
		"####" "#" 0 A_ChangeFlag("CORPSE",1)
		Q06D L -1
		Stop
	XDeath:
		TNT1 A 0 //A_JumpIfInventory("DefileCheck",1,"DefileDeath")
		TNT1 A 0 A_Jump(256,"XDeathBlood")
		TNT1 AAAAAA 0 A_TossGib
		Goto Death
	XDeathBlood:
		TNT1 A 0 A_PlaySound("other/gibdeath")
		TNT1 A 0 A_SpawnItemEx("BloodGibDropper",0,0,random(20,40),0,0,0,0)
		TNT1 A 1 A_Fall
		Stop
	DefileDeath:
		TNT1 A 0 A_Die
		TNT1 A 0 A_SpawnItemEx("RedMiteSpawner",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION,0)
		Goto XDeath+1
	Raise:
		Q06D KJIHGFEDCBA 2
		Goto See
	Death.UnholyDisint:
	Death.PlasmaDisint:
	Disintegrate:
		"####" "#" 0 Thing_SetTranslation(0,50)
		"####" "#" 1 A_FadeOut(0.015)
		"####" "#" 0 A_ChangeFlag("NOINTERACTION",1)
		"####" "#" 0 A_Stop    
		"####" "#" 0 A_Fall
		"####" "#" 0 A_SpawnItemEx("DisintegrateShadowMedium",0,0,30,0,0,0,0,SXF_NOCHECKPOSITION)
		"####" "#" 0 A_SpawnItemEx("DisintegrateSparksMedium",0,0,30,0,0,0,0,SXF_NOCHECKPOSITION)
		"####" "##" 2 A_FadeOut(0.03)
		Goto Disintegrate+6
	}
}
Actor BerserkToken : Inventory
{	Inventory.MaxAmount 1		}
Actor TimesBerserk : Inventory
{	Inventory.MaxAmount 3		}

Actor StroyentGas
{
	+NOINTERACTION
	Translation "0:255=%[0,0,0]:[0,0.6,0]"
	RenderStyle Add
	Scale 0.16
	Alpha 0.7
	States
	{
	Spawn:
		FX54 ABCDEFGHIJKLMNOPQ 1 A_FadeOut(0.03)
		Stop
	}
}

//=====================================================================================
//=====================================================================================
//	Explanation: Ok, this guy... runs and shoots. That's it.
//=====================================================================================
//=====================================================================================

Actor Q4Gunner	//hellknight
{
	DropItem "BulletAmmo"
	DropItem "AEGrenade"
	DropItem "AEGrenadeBox" 32
	DropItem "HealthHeart" 210
	DropItem "PowerslaveSpawner" 28
	DropItem "PowerupSpawner" 8
	Monster	+DONTCORPSE	RipLevelMin 1
	Radius 16
	Height 56
	Mass 400
	Health 500
	PainChance 64
	Speed 11
	Scale 0.385
	MeleeDamage 1
	+FLOORCLIP
	SeeSound "quake4/Gunner/Sight"
	PainSound "quake4/Gunner/Pain"
	DeathSound "quake4/Gunner/Death"
	ActiveSound "quake4/Gunner/Idle"
	PainChance "Charm", 192
	PainChance "Terror", 192
	PainChance "Defile", 255
	PainChance "Drain", 110
	PainChance "Chaos", 255
	PainChance "ChaosExpl1", 255
	PainChance "ChaosExpl2", 255
//Armor
	DamageFactor "Electric", 1.5
	DamageFactor "Plasma", 0.75
	DamageFactor "PlasmaDisint", 0.75
	DamageFactor "AEBullet", 0.5
	States
	{
	Pain.Charm:
		TNT1 A 0
		TNT1 A 0 A_ChangeFlag("FRIENDLY",1)
		Goto See
    Pain.Terror:
		TNT1 A 0
		TNT1 A 0 A_ChangeFlag("FRIGHTENED",1)
		Goto See
    Pain.Drain:
		TNT1 A 0
		TNT1 A 0 A_SpawnItemEx("DrainGiver",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION,0)
		Goto Pain
    Pain.Defile:
		TNT1 A 0
		TNT1 A 0 A_GiveInventory("DefileCheck",1)
		Goto See 


	
	Spawn:
		Q07I A 4 A_Look
		Loop
	See:
		Q07W AABBCCDDEEFF 3 A_Chase
		TNT1 A 0 //A_JumpIfInventory("DefileCheck",1,"DefileDecide")
		Loop
	Melee:
		TNT1 a 0 A_Jump(64,"Missile")
		Q07M ABC 4 A_FaceTarget
		Q07M D 4 A_CustomMeleeAttack(random(20,40),"quake4/Misc/MeleeHit","quake4/Misc/Swing","Normal",1)
		Q07M EF 4
		Goto See
	Missile:
		TNT1 A 0 A_Jump(256,"Nailgun","Grenade")
	Nailgun:
		Q07I AA 3 A_FaceTarget
		Q07A AB 3 A_FaceTarget
		TNT1 A 0 A_PlaySound("quake4/Gunner/NailgunShot")
		TNT1 A 0 A_SpawnItemEx("MonMuzzleFlashSmall",19,9,34,0,0,0,0,SXF_NOCHECKPOSITION)
		Q07A C 3 A_CustomMissile("Q4NailGunner",32,7,0)
		TNT1 A 0 A_Jump(8,"NailgunEnd")
		TNT1 A 0 A_MonsterRefire(0,"NailgunEnd")
		Goto Nailgun+3
	NailgunEnd:
		Q07A BA 4
		Goto See
	Grenade:
		Q07B A 4 A_FaceTarget
		TNT1 A 0 A_PlaySound("quake4/Gunner/GrenadeCharge")
		Q07B BCDDDDDDD 4 A_FaceTarget
		TNT1 A 0 A_CustomMissile("Q4GunnerGrenade",40,8,0)
		Q07B E 4
		Goto See
	Pain:
		Q07P A 7 A_Pain
		Goto See
	Death:
		TNT1 A 0 A_UnsetSolid
		TNT1 A 0 //A_JumpIfInventory("DefileCheck",1,"DefileDeath")
		Q07D A 0 A_Scream
		Q07D A 0 A_Fall
		"####" "#" 0 A_ChangeFlag("CORPSE",1)
		Q07D ABCDEF 3
		TNT1 A 0 A_PlaySound("quake4/Misc/Body/Beefy")
		Q07D F -1
		Stop
	XDeath:
		TNT1 A 0 //A_JumpIfInventory("DefileCheck",1,"DefileDeath")
		TNT1 A 0 A_Jump(256,"XDeathBlood")
		TNT1 AAAA 0 A_SpawnItemEx("Junk",0,0,0,random(-7,7),random(-7,7),random(1,14),random(1,359),SXF_TRANSFERTRANSLATION)
		TNT1 AAAAAAAA 0 A_TossGib
		Goto Death
	XDeathBlood:
		TNT1 A 0 A_PlaySound("other/gibdeath")
		TNT1 AAAAAAAA 0 A_SpawnItemEx("Junk",0,0,0,random(-7,7),random(-7,7),random(1,14),random(1,359),SXF_TRANSFERTRANSLATION)
		TNT1 AAAA 0 A_TossGib
		TNT1 A 0 A_SpawnItemEx("BloodGibDropper",0,0,random(20,40),0,0,0,0)
		TNT1 A 1 A_Fall
		Stop
	DefileDeath:
		TNT1 A 0 A_Die
		TNT1 A 0 A_SpawnItemEx("RedMiteSpawner",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION,0)
		Goto XDeath+1
	Death.UnholyDisint:
	Death.PlasmaDisint:
	Disintegrate:
		"####" "#" 0 Thing_SetTranslation(0,50)
		"####" "#" 1 A_FadeOut(0.015)
		"####" "#" 0 A_ChangeFlag("NOINTERACTION",1)
		"####" "#" 0 A_Stop    
		"####" "#" 0 A_Fall
		"####" "#" 0 A_SpawnItemEx("DisintegrateShadowMedium",0,0,30,0,0,0,0,SXF_NOCHECKPOSITION)
		"####" "#" 0 A_SpawnItemEx("DisintegrateSparksMedium",0,0,30,0,0,0,0,SXF_NOCHECKPOSITION)
		"####" "##" 2 A_FadeOut(0.03)
		Goto Disintegrate+6
	Raise:
		Q07D EDCBA 3	
		Goto See
	}
}
//***********************************************
Actor Q4NailGunner : FastProjectile
{
	Projectile
	Speed 28
	Damage 2
	Radius 4
	Height 7
	Scale 0.155
	+BLOODSPLATTER
	MissileType "Q4NailSmoke"
	MissileHeight 8
	States
	{
	Spawn:
		SWMS A 1 Light("OrangeSmallPoint1") Bright 
		Loop
	XDeath:
		TNT1 a 2
		Stop
	Death:
		TNT1 A 2 A_SpawnItemEx("Q4NailsSpark",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		Stop
	}
}


Actor Q4NailSmoke
{
	+NOINTERACTION
	Scale 0.1
	RenderStyle Translucent
	Alpha 0.7
	States
	{
	Spawn:
		FX04 BCDEF 1 
		Stop
	}
}

Actor Q4NailsSpark
{
	+NOINTERACTION
	Scale 0.3
	RenderStyle Add
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_Jump(128,"Type2")
	Type1:
		Fx57 ABCDEFGHIJ 2 Light("YellowSmallFlicker3") Bright
		stop
	Type2:
		Fx57 KLMNOPQRST 2 Light("YellowSmallFlicker3") Bright
		stop
	}
}

//************************************************
actor Q4GunnerGrenade
{
	Radius 8
	Height 8
	Speed 17
	Scale 0.33
	Gravity 0.7	
	Damage 6
	PROJECTILE
	-NOGRAVITY
	+CANBOUNCEWATER 
	BounceType "Doom"
	SeeSound "quake4/Gunner/GrenadeShot"
	BounceSound "quake4/Weapons/GrenLaunch/Bounce"
	DeathSound "quake4/Misc/GrenadeExplo"
	Translation "176:191=212:223"
	States
	{
	Spawn:
		TNT1 A 0 
		TNT1 A 0 ThrustThingZ(0,13,0,0)
		QGRP KJIHGFEDCBA 5 Light("RedSmallPoint1") Bright A_SpawnItemEx("QuakeGrenSmokeTrail",random(-1,-4),random(4,-4),random(4,-4),0,0,frandom(0.5,1.0),0,SXF_NOCHECKPOSITION)
		Goto Spawn+2
	Death:
		TNT1 A 0 A_SpawnItemEx("MonExplosionMedium",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		TNT1 A 3 Bright A_Explode(60,90,1)
		Stop
	}
}




//=====================================================================================
//=====================================================================================
//
//=====================================================================================
//=====================================================================================

Actor Q4Harvester		//spidermastermind
{
	DropItem "AEoDFragLauncherItem" 128
	DropItem "CellBigAmmo"
	DropItem "CellBigAmmo"
	DropItem "ExploBigAmmo"
	DropItem "ExploBigAmmo"
	DropItem "ExploBigAmmo"
	DropItem "HealthHeart" 210
	DropItem "PowerslaveSpawner" 28
	DropItem "PowerupSpawner" 8
	Monster	+DONTCORPSE	RipLevelMin 1
	Radius 100
	Height 100
	Mass 5000
	Health 5000
	PainChance 20
	+MISSILEEVENMORE
	+NORADIUSDMG
	+BOSS
	+NOBLOOD
	+NOICEDEATH
	Speed 11
	Scale 0.9
	MeleeDamage 1
	+FLOORCLIP
	SeeSound "quake4/Harvester/Sight"
	PainSound "quake4/Harvester/Pain"
	DeathSound "quake4/Harvester/Death"
	ActiveSound ""
	MeleeRange 150
	PainChance "Drain", 40
	PainChance "Chaos", 255
	DamageFactor "ChaosExpl1", 0
	DamageFactor "ChaosExpl2", 0
//Mechanic
	DamageFactor "Fire", 1.5
	DamageFactor "Ice", 0.75
	DamageFactor "Electric", 2.0
	DamageFactor "AEPoison", 0.5
	DamageFactor "AEBullet", 0.75
	DamageFactor "AEMagic", 0.75
 	DamageFactor "Plasma", 1.5
 	DamageFactor "PlasmaDisint", 1.5
	States
	{
	Pain.Drain:
		TNT1 A 0
		TNT1 A 0 A_SpawnItemEx("DrainGiver",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION,0)
		Goto Pain


	Spawn:
		Q08I A 4 A_Look
		Loop
	See:
		Q08W AB 5 A_Chase
		TNT1 A 0 A_PlaySound("quake4/Harvester/Step",5)
		Q08W C 5 A_Chase
		TNT1 A 0 A_PlaySound("quake4/Harvester/Step",6)
		Q08W DE 5 A_Chase
		TNT1 A 0 A_PlaySound("quake4/Harvester/Step",5)
		Q08W F 5 A_Chase
		TNT1 A 0 A_PlaySound("quake4/Harvester/Step",6)
		Loop
	Melee:
		TNT1 a 0 A_Jump(64,"Missile")
		Q08M ABC 4 A_FaceTarget
		TNT1 A 0 A_PlaySound("quake4/Harvester/Step",5)
		Q08M D 4 A_CustomMeleeAttack(random(60,150),"quake4/Misc/BladeHit","quake4/Misc/Swing","Normal",1)
		Q08M EF 4
		Goto See
	Missile:
		TNT1 A 0 A_JumpIfCloser(720,"DecideIfGrenades")
		TNT1 A 0 A_Jump(256,"Blaster","Rocket")
	DecideIfGrenades:
		TNT1 a 0 A_Jump(128,"Grenades")	//most of the time will choose the grenade attack if close enough
		Goto Missile+1				//directly goes to choose Blaster or Rocket att
	Blaster:
		Q08A AAA 3 A_FaceTarget
		TNT1 A 0 A_PlaySound("quake4/Gladiator/BlasterShot")
		Q08A A 0 A_CustomMissile("Q4BlasterProjBoss",75,-9,0+random(4,-4))
		Q08A A 4 A_CustomMissile("Q4BlasterProjBoss",75,9,0+random(4,-4))
		TNT1 A 0 A_PlaySound("quake4/Gladiator/BlasterShot")
		Q08A A 0 A_CustomMissile("Q4BlasterProjBoss",75,-9,0+random(4,-4))
		Q08A A 4 A_CustomMissile("Q4BlasterProjBoss",75,9,0+random(4,-4))
		TNT1 A 0 A_Jump(20,"See")
		TNT1 A 0 A_CPosRefire
		Goto Blaster+3
	Rocket:
		TNT1 a 0 A_ChangeFlag("NOPAIN",1)
		Q08R ABCDEEEE 5 A_FaceTarget
		Q08R E 0 A_CustomMissile("HarvesterRocket2",70,0,0)	//because there will be situations where this attack will be useless unless it fires straight forward like all monsters were supposed to.
		Q08R E 0 A_CustomMissile("HarvesterRocket",60,5,150)
		Q08R E 10 A_CustomMissile("HarvesterRocket",60,-5,-150)
		TNT1 a 0 A_ChangeFlag("NOPAIN",0)
		Q08R DCBA 5
		Goto See
	Grenades:
		TNT1 a 0 A_ChangeFlag("NOPAIN",1)
		Q08R ABCDEE 5 A_FaceTarget
		Q08R EEE 0 A_CustomMissile("Q4GunnerGrenade",60,0,random(70,-70))
		Q08R E 5 A_CustomMissile("Q4GunnerGrenade",60,0,random(70,-70))
		Q08R EEE 0 A_CustomMissile("Q4GunnerGrenade",60,0,random(70,-70))
		Q08R E 5 A_CustomMissile("Q4GunnerGrenade",60,0,random(70,-70))
		Q08R EEE 0 A_CustomMissile("Q4GunnerGrenade",45,0,random(70,-70))
		Q08R E 5 A_CustomMissile("Q4GunnerGrenade",60,0,random(70,-70))
		TNT1 a 0 A_ChangeFlag("NOPAIN",0)
		Q08R DCBA 5
		Goto See
	Pain:
		Q08P A 7 A_Pain
		Goto See
	Death:
		TNT1 A 0 A_UnsetSolid
		TNT1 A 0 A_Scream
		Q08D A 0 A_Fall
		Q08D ABCD 4 A_SpawnItemEx("BossDeathExplosion",random(30,-30),random(30,-30),random(20,80),0,0,0,0,SXF_NOCHECKPOSITION)
		TNT1 A 0 A_PlaySound("quake4/Misc/Body/Metal",5)
		Q08D EFGHI 4
		"####" "#" 0 A_QueueCorpse
		"####" "#" 0 A_ChangeFlag("CORPSE",1)
		Q08D i -1 A_KillMaster("Massacre",KILS_FOILINVUL,"None","AEoDSpawner")
		Stop
	Death.UnholyDisint:
	Death.PlasmaDisint:
	Disintegrate:
		"####" "#" 0 Thing_SetTranslation(0,50)
		"####" "#" 1 A_KillMaster("Massacre",KILS_FOILINVUL,"None","AEoDSpawner")
		"####" "#" 1 A_FadeOut(0.015)
		"####" "#" 0 A_ChangeFlag("NOINTERACTION",1)
		"####" "#" 0 A_Stop    
		"####" "#" 0 A_Fall
		"####" "#" 0 A_SpawnItemEx("DisintegrateShadowBig",0,0,65,0,0,0,0,SXF_NOCHECKPOSITION)
		"####" "#" 0 A_SpawnItemEx("DisintegrateSparksBig",0,0,65,0,0,0,0,SXF_NOCHECKPOSITION)
		"####" "##" 2 A_FadeOut(0.025)
		Goto Disintegrate+7
	}
}

//***********************************************
Actor HarvesterRocket
{
	Projectile
	+RANDOMIZE
	+ROCKETTRAIL
	+FORCERADIUSDMG
	+EXTREMEDEATH
	Radius 12
	Height 12
	Speed 16 
	+SEEKERMISSILE
	Damage 30
	SeeSound "quake4/Weapons/RocketLauncher/Fire"
	DeathSound "quake4/Misc/Explo"
	Translation "208:223=192:197", "232:235=200:204", "176:191=192:207", "48:63=192:194"
	Scale 0.6
	States
	{
	Spawn:
		TNT1 A 0 
		TNT1 A 0 A_SpawnItemEx("Q4BigRocketTrail",-4,0,3,0,0,0,0,SXF_NOCHECKPOSITION)
		QROK A 1 Light("WhiteMediumFlicker2") Bright A_SeekerMissile(9,9)	TNT1 AA 0 A_SpawnItemEx("QuakeGrenSmokeTrail",random(-1,-4),random(4,-4),random(4,-4),0,0,frandom(0.5,1.0),0,SXF_NOCHECKPOSITION)
		TNT1 A 0 A_SpawnItemEx("Q4BigRocketTrail",-4,0,3,0,0,0,0,SXF_NOCHECKPOSITION)
		QROK A 1 Light("WhiteMediumFlicker2") Bright A_SeekerMissile(9,9)	TNT1 AA 0 A_SpawnItemEx("QuakeGrenSmokeTrail",random(-1,-4),random(4,-4),random(4,-4),0,0,frandom(0.5,1.0),0,SXF_NOCHECKPOSITION)
		TNT1 A 0 Bright A_PlaySoundEx("RLFLY","soundslot5",1)
		Loop
	Death:
		TNT1 A 0 A_Explode(150,128,1)
		TNT1 A 0 A_CustomMissile("ExpQuakeSmall",0,0,0)
		TNT1 A 3 A_SpawnItemEx("MonExplosionMediumBig",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		Stop
	}
}

Actor Q4BigRocketTrail
{
	+NOINTERACTION
	Translation "112:127=192:200"
	RenderStyle Add
	Alpha 0.6
	Scale 0.5
	States
	{
	Spawn:
		ACID B 1 Bright A_FadeOut(0.1)
		Wait
	}
}

Actor HarvesterRocket2 : HarvesterRocket	//this one doesnt seek
{	-SEEKERMISSILE	}


//=====================================================================================
//=====================================================================================
//
//=====================================================================================
//=====================================================================================
Actor Q4HoverTank		//fatso
{
	DropItem "CellAmmo"
	DropItem "CellAmmo" 128
	DropItem "ExploBigAmmo"
	DropItem "HealthHeart" 210
	DropItem "PowerslaveSpawner" 28
	DropItem "PowerupSpawner" 8
	Monster	+DONTCORPSE	RipLevelMin 1
	Radius 48
	Height 64
	Mass 1200
	Health 700
	PainChance 40
	Speed 11
	+FLOAT
	+NOGRAVITY
	+FLOORCLIP
	Scale 0.45
	SeeSound "quake4/HoverTank/Sight"
	PainSound "quake4/HoverTank/Pain"
	DeathSound "quake4/HoverTank/Death"
	ActiveSound "quake4/HoverTank/Idle"
	PainChance "Charm", 192
	PainChance "Terror", 192
	PainChance "Defile", 255
	PainChance "Drain", 96
	PainChance "Chaos", 255
	PainChance "ChaosExpl1", 255
	PainChance "ChaosExpl2", 255
//Armor
	DamageFactor "Electric", 1.5
	DamageFactor "Plasma", 0.75
	DamageFactor "PlasmaDisint", 0.75
	DamageFactor "AEBullet", 0.5
	States
	{
	Pain.Charm:
		TNT1 A 0
		TNT1 A 0 A_ChangeFlag("FRIENDLY",1)
		Goto See
    Pain.Terror:
		TNT1 A 0
		TNT1 A 0 A_ChangeFlag("FRIGHTENED",1)
		Goto See
    Pain.Drain:
		TNT1 A 0
		TNT1 A 0 A_SpawnItemEx("DrainGiver",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION,0)
		Goto Pain
    Pain.Defile:
		TNT1 A 0
		TNT1 A 0 A_GiveInventory("DefileCheck",1)
		Goto See 
	
	Spawn:
		Q09W ABCDE 5 A_Look
		Loop
	See:
		Q09W ABCDE 5 A_Chase
		TNT1 A 0 //A_JumpIfInventory("DefileCheck",1,"DefileDecide")
		Loop
	Missile:
		TNT1 A 0 A_Stop
		TNT1 a 0 A_Jump(256,"Rocket","Blaster")
	Rocket:
		Q09A AB 5 A_FaceTarget
		TNT1 A 0 A_PlaySound("quake4/HoverTank/RocketReady")
		Q09A CDDDDDDDDDD 5 A_FaceTarget
		TNT1 A 0 A_CustomMissile("HHTankRocket",40,7,0)
		Q09A EFG 7
		Goto See
	Blaster:
		Q09B AB 5 A_FaceTarget
		TNT1 A 0 A_FaceTarget
		TNT1 A 0 A_PlaySound("quake4/Gladiator/BlasterShot")
		Q09B C 0 A_CustomMissile("Q4BlasterProjSmall",30,-10,random(5,-5))
		Q09B C 3 A_CustomMissile("Q4BlasterProjSmall",30,-10,random(5,-5))
		Q09B B 3
		TNT1 A 0 A_Jump(20,"See")
		TNT1 a 0 A_CPosRefire
		Goto Blaster+2
	Pain:
		Q09P A 7 A_Pain
		Goto See
	Death:
		TNT1 A 0 A_UnsetSolid
		TNT1 A 0 //A_JumpIfInventory("DefileCheck",1,"DefileDeath")
		TNT1 A 0 A_Scream
		Q09D AB 4
		"####" "#" 4 A_JumpIf(z <= floorz || abs(velz) <= 0,"Crash")
		Wait
	Crash:
		"####" "#" 0 A_JumpIfInventory("DisintegrateToken",1,"DisintegrateCont")
		TNT1 A 0 A_PlaySound("quake4/Misc/Body/Metal",5)
		Q09D DEF 3
		Q09D F 0 A_Fall
		"####" "#" 0 A_ChangeFlag("CORPSE",1)
		Q09D G -1 A_KillMaster("Massacre",KILS_FOILINVUL,"None","AEoDSpawner")
		Stop
	XDeath:
		TNT1 A 0 //A_JumpIfInventory("DefileCheck",1,"DefileDeath")
		TNT1 A 0 A_PlaySound("other/gibdeath")
		TNT1 AA 0 A_SpawnItemEx("BloodGibDropper",0,0,random(20,40),0,0,0,0)
		TNT1 AAAAAAAAAAAAA 0 A_SpawnItemEx("Junk",0,0,0,random(-7,7),random(-7,7),random(1,14),random(1,359),SXF_TRANSFERTRANSLATION)
		TNT1 A 0 A_KillMaster("Massacre",KILS_FOILINVUL,"None","AEoDSpawner")
		TNT1 A 1 A_Fall
		Stop
	DefileDeath:
		TNT1 A 0 A_Die
		TNT1 A 0 A_SpawnItemEx("RedMiteSpawner",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION,0)
		Goto XDeath+1
	Ice:
		"####" "#" 5 A_GenericFreezeDeath
		"####" "#" 0 A_KillMaster("Massacre",KILS_FOILINVUL,"None","AEoDSpawner")
		"####" "#" 1 A_FreezeDeathChunks
		Wait

	Death.UnholyDisint:
	Death.PlasmaDisint:
	Disintegrate:
		"####" "#" 0 A_GiveInventory("DisintegrateToken",1)
	DisintegrateCont:
		"####" "#" 0 Thing_SetTranslation(0,50)
		"####" "#" 0 A_KillMaster("Massacre",KILS_FOILINVUL,"None","AEoDSpawner")
		"####" "#" 1 A_FadeOut(0.015)
		"####" "#" 0 A_ChangeFlag("NOINTERACTION",1)
		"####" "#" 0 A_Stop    
		"####" "#" 0 A_Fall
		"####" "#" 0 A_SpawnItemEx("DisintegrateShadowMediumBig",0,0,40,0,0,0,0,SXF_NOCHECKPOSITION)
		"####" "#" 0 A_SpawnItemEx("DisintegrateSparksMediumBig",0,0,40,0,0,0,0,SXF_NOCHECKPOSITION)
		"####" "##" 2 A_FadeOut(0.03)
		Goto DisintegrateCont+7
	Raise:
		Q09D FEDCBA 3
		Goto See
	}
}

Actor HHTankRocket : HarvesterRocket
{
	Damage 20
	States
	{
	Death:
		TNT1 A 0 A_Explode(128,128,1)
		TNT1 A 0 A_CustomMissile("ExpQuakeSmall",0,0,0)
		TNT1 A 3 A_SpawnItemEx("MonExplosionMedium",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		Stop
	}
}

//=====================================================================================
//=====================================================================================
//
//=====================================================================================
//=====================================================================================

Actor Q4IronMaiden 	//painelem
{
	DropItem "ExploAmmo"
	DropItem "HealthHeart" 210
	DropItem "PowerslaveSpawner" 28
	DropItem "PowerupSpawner" 8
	Monster	+DONTCORPSE	RipLevelMin 1
	Radius 19
	Height 40
	Health 670
	Mass 400
	PainChance 64
	Speed 3
	Scale 0.38
	+FLOAT
	+NOGRAVITY
	+FLOORCLIP
	MeleeRange 65
	SeeSound "quake4/IronMaiden/Sight"
	PainSound ""
	DeathSound "quake4/IronMaiden/Death"
	ActiveSound "quake4/IronMaiden/Idle"
	PainChance "Charm", 192
	PainChance "Terror", 192
	PainChance "Defile", 0
	PainChance "Drain", 128
	PainChance "Chaos", 255
	PainChance "ChaosExpl1", 128
	PainChance "ChaosExpl2", 128
//Flesh
	DamageFactor "Electric", 1.5
	DamageFactor "AEPoison", 1.5
	DamageFactor "AEBullet", 2.0
	States
	{
	Pain.Charm:
		TNT1 A 0
		TNT1 A 0 A_ChangeFlag("FRIENDLY",1)
		Goto See
    Pain.Terror:
		TNT1 A 0
		TNT1 A 0 A_ChangeFlag("FRIGHTENED",1)
		Goto See
    Pain.Drain:
		TNT1 A 0
		TNT1 A 0 A_SpawnItemEx("DrainGiver",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION,0)
		Goto Pain


	Spawn:
		TNT1 a 0
		TNT1 a 0 A_CheckFloor("MoveUpABit")	//might spawn on floor, but I want the effects to be shown
	SpawnLoop:
		Q10W A 2 A_Look TNT1 A 0 A_SpawnItemEx("IronMaidenDress",0,0,5,0,0,-1.2,0,SXF_NOCHECKPOSITION)
		Q10W A 2 A_Look TNT1 A 0 A_SpawnItemEx("IronMaidenDress",0,0,5,0,0,-1.2,0,SXF_NOCHECKPOSITION)
		Q10W A 2 A_Look TNT1 A 0 A_SpawnItemEx("IronMaidenDress",0,0,5,0,0,-1.2,0,SXF_NOCHECKPOSITION)
		Q10W B 2 A_Look TNT1 A 0 A_SpawnItemEx("IronMaidenDress",0,0,5,0,0,-1.2,0,SXF_NOCHECKPOSITION)
		Q10W B 2 A_Look TNT1 A 0 A_SpawnItemEx("IronMaidenDress",0,0,5,0,0,-1.2,0,SXF_NOCHECKPOSITION)
		Q10W B 2 A_Look TNT1 A 0 A_SpawnItemEx("IronMaidenDress",0,0,5,0,0,-1.2,0,SXF_NOCHECKPOSITION)
		Q10W C 2 A_Look TNT1 A 0 A_SpawnItemEx("IronMaidenDress",0,0,5,0,0,-1.2,0,SXF_NOCHECKPOSITION)
		Q10W C 2 A_Look TNT1 A 0 A_SpawnItemEx("IronMaidenDress",0,0,5,0,0,-1.2,0,SXF_NOCHECKPOSITION)
		Q10W C 2 A_Look TNT1 A 0 A_SpawnItemEx("IronMaidenDress",0,0,5,0,0,-1.2,0,SXF_NOCHECKPOSITION)
		Q10W C 2 A_Look TNT1 A 0 A_SpawnItemEx("IronMaidenDress",0,0,5,0,0,-1.2,0,SXF_NOCHECKPOSITION)
		Loop
	MoveUpABit:
		Q10W A 0 ThrustThingZ(0,10,0,1)
		Q10W AAAAA 2 A_SpawnItemEx("IronMaidenDress",0,0,0,0,0,-0.8,0,SXF_NOCHECKPOSITION)
		TNT1 A 0 A_Stop
		Goto SpawnLoop
	See:
		Q10W A 2 A_Chase TNT1 A 0 A_SpawnItemEx("IronMaidenDress",0,0,5,0,0,-1.2,0,SXF_NOCHECKPOSITION)
		Q10W A 2 A_Chase TNT1 A 0 A_SpawnItemEx("IronMaidenDress",0,0,5,0,0,-1.2,0,SXF_NOCHECKPOSITION)
		Q10W A 2 A_Chase TNT1 A 0 A_SpawnItemEx("IronMaidenDress",0,0,5,0,0,-1.2,0,SXF_NOCHECKPOSITION)
		Q10W B 2 A_Chase TNT1 A 0 A_SpawnItemEx("IronMaidenDress",0,0,5,0,0,-1.2,0,SXF_NOCHECKPOSITION)
		Q10W B 2 A_Chase TNT1 A 0 A_SpawnItemEx("IronMaidenDress",0,0,5,0,0,-1.2,0,SXF_NOCHECKPOSITION)
		Q10W B 2 A_Chase TNT1 A 0 A_SpawnItemEx("IronMaidenDress",0,0,5,0,0,-1.2,0,SXF_NOCHECKPOSITION)
		Q10W C 2 A_Chase TNT1 A 0 A_SpawnItemEx("IronMaidenDress",0,0,5,0,0,-1.2,0,SXF_NOCHECKPOSITION)
		Q10W C 2 A_Chase TNT1 A 0 A_SpawnItemEx("IronMaidenDress",0,0,5,0,0,-1.2,0,SXF_NOCHECKPOSITION)
		Q10W C 2 A_Chase TNT1 A 0 A_SpawnItemEx("IronMaidenDress",0,0,5,0,0,-1.2,0,SXF_NOCHECKPOSITION)
		TNT1 a 0 A_Jump(16,"Teleport")
		Loop
	Melee:
		TNT1 a 0 A_Jump(64,"Missile")
		TNT1 A 0 A_SpawnItemEx("IronMaidenDress",0,0,5,0,0,-1.2,0,SXF_NOCHECKPOSITION)
		Q10M A 2 A_FaceTarget		TNT1 A 0 A_SpawnItemEx("IronMaidenDress",0,0,5,0,0,-1.2,0,SXF_NOCHECKPOSITION)
		Q10M A 2 A_FaceTarget		TNT1 A 0 A_SpawnItemEx("IronMaidenDress",0,0,5,0,0,-1.2,0,SXF_NOCHECKPOSITION)
		Q10M B 2 A_FaceTarget		TNT1 A 0 A_SpawnItemEx("IronMaidenDress",0,0,5,0,0,-1.2,0,SXF_NOCHECKPOSITION)
		Q10M B 2 A_FaceTarget		TNT1 A 0 A_SpawnItemEx("IronMaidenDress",0,0,5,0,0,-1.2,0,SXF_NOCHECKPOSITION)
		Q10M C 2 A_FaceTarget		TNT1 A 0 A_SpawnItemEx("IronMaidenDress",0,0,5,0,0,-1.2,0,SXF_NOCHECKPOSITION)
		Q10M C 2 A_FaceTarget		TNT1 A 0 A_SpawnItemEx("IronMaidenDress",0,0,5,0,0,-1.2,0,SXF_NOCHECKPOSITION)
		Q10M D 2 A_CustomMeleeAttack(random(40,80),"quake4/Misc/BladeHit","quake4/Misc/Swing","Normal",1)
		Q10M EEFF 2 A_SpawnItemEx("IronMaidenDress",0,0,5,0,0,-1.2,0,SXF_NOCHECKPOSITION)
		Goto See
	Missile:
		TNT1 A 0 A_Stop
		TNT1 a 0 A_Jump(200,"Rocket")
	Rocket:
		TNT1 A 0 A_Jump(190,2)
		TNT1 A 0 A_PlaySound("quake4/IronMaiden/AttackGrowl")
		Q10A A 0 A_FaceTarget
		Q10A A 2 A_FaceTarget		TNT1 A 0 A_SpawnItemEx("IronMaidenDress",0,0,5,0,0,-1.2,0,SXF_NOCHECKPOSITION)
		Q10A A 2 A_FaceTarget		TNT1 A 0 A_SpawnItemEx("IronMaidenDress",0,0,5,0,0,-1.2,0,SXF_NOCHECKPOSITION)
		Q10A B 2 A_FaceTarget		TNT1 A 0 A_SpawnItemEx("IronMaidenDress",0,0,5,0,0,-1.2,0,SXF_NOCHECKPOSITION)
		Q10A B 2 A_FaceTarget		TNT1 A 0 A_SpawnItemEx("IronMaidenDress",0,0,5,0,0,-1.2,0,SXF_NOCHECKPOSITION)
		Q10A B 2 A_FaceTarget		TNT1 A 0 A_SpawnItemEx("IronMaidenDress",0,0,5,0,0,-1.2,0,SXF_NOCHECKPOSITION)
		Q10A B 2 A_FaceTarget		TNT1 A 0 A_SpawnItemEx("IronMaidenDress",0,0,5,0,0,-1.2,0,SXF_NOCHECKPOSITION)
		TNT1 A 0 A_CustomMissile("IronMaidenRocket",25,-7,0)
		Q10A CDEEFF 2 A_SpawnItemEx("IronMaidenDress",0,0,5,0,0,-1.2,0,SXF_NOCHECKPOSITION)
		Goto See
	Teleport:
		TNT1 A 0 A_Stop
		TNT1 A 0 A_FaceTarget
		Q10T AAABBBCCCC 2 A_SpawnItemEx("IronMaidenDress",0,0,5,0,0,-1.2,0,SXF_NOCHECKPOSITION)
		TNT1 A 0 A_PlaySound("quake4/IronMaiden/TeleportButton")
		Q10T CCCCCC 2 A_SpawnItemEx("IronMaidenDress",0,0,5,0,0,-1.2,0,SXF_NOCHECKPOSITION)
		TNT1 A 0 A_ChangeFlag("SHOOTABLE",0)
		TNT1 A 0 A_SpawnItemEx("TeleportFog",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		TNT1 AAAAAAAAAAAAAAAA 1 A_Chase(0,0) 
		TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 0 A_Chase(0,0)
		TNT1 AAAAAAAAAAAAAAAA 1 A_Chase(0,0) 
		TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 0 A_Chase(0,0)
		TNT1 AAAAAAAAAAAAAAAA 1 A_Chase(0,0) 
		TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 0 A_Chase(0,0)
		TNT1 AAAAAAAAAAAAAAAA 1 A_Chase(0,0) 		//a little over 2 secs
		TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 0 A_Chase(0,0)	
		TNT1 A 0 A_SpawnItemEx("TeleportFog",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		TNT1 A 0 A_ChangeFlag("SHOOTABLE",1)
		Q10T CBA 3 A_SpawnItemEx("IronMaidenDress",0,0,5,0,0,-1.2,0,SXF_NOCHECKPOSITION)
		Goto See
	Pain:
		Q10P A 0 A_Pain
		Q10P AA 2 A_SpawnItemEx("IronMaidenDress",0,0,5,0,0,-1.2,0,SXF_NOCHECKPOSITION)
		TNT1 A 0 A_Jump(128,"Teleport")
		Q10P AA 2 A_SpawnItemEx("IronMaidenDress",0,0,5,0,0,-1.2,0,SXF_NOCHECKPOSITION)
		Goto See
	Death:
		TNT1 A 0 A_UnsetSolid
		Q10D A 0 A_Scream
		Q10D ABCD 3
		"####" E 3 A_JumpIf(z <= floorz || abs(velz) <= 0,"Crash")
		Wait
	Crash:
		"####" "#" 0 A_JumpIfInventory("DisintegrateToken",1,"DisintegrateCont")
		TNT1 A 0 A_PlaySound("quake4/Misc/Body/Small",5)
		Q10D A 0 A_Fall
		"####" "#" 0 A_ChangeFlag("CORPSE",1)
		Q10D F -1
		Stop
	Raise:
		Q10D EDCBA 3	
		Goto See
	XDeath:
		TNT1 A 0 A_PlaySound("other/gibdeath")
		TNT1 A 0 A_SpawnItemEx("BloodGibDropper",0,0,random(20,40),0,0,0,0)
		TNT1 A 1 A_Fall
		Stop
	Death.UnholyDisint:
	Death.PlasmaDisint:
	Disintegrate:
		"####" "#" 0 A_GiveInventory("DisintegrateToken",1)
	DisintegrateCont:
		"####" "#" 0 Thing_SetTranslation(0,50)
		"####" "#" 1 A_FadeOut(0.015)
		"####" "#" 0 A_ChangeFlag("NOINTERACTION",1)
		"####" "#" 0 A_Stop    
		"####" "#" 0 A_Fall
		"####" "#" 0 A_SpawnItemEx("DisintegrateShadowSmallMedium",0,0,18,0,0,0,0,SXF_NOCHECKPOSITION)
		"####" "#" 0 A_SpawnItemEx("DisintegrateSparksSmallMedium",0,0,18,0,0,0,0,SXF_NOCHECKPOSITION)
		"####" "##" 2 A_FadeOut(0.03)
		Goto DisintegrateCont+6
	}
}

Actor IronMaidenDress
{
	+NOINTERACTION
	RenderStyle Add
	Scale 0.38
	Translation "0:255=%[0,0,0]:[0.75,0.0,0.75]"
	States
	{
	Spawn:
		Q10X A 10
		Q10X A 1 A_FadeOut(0.1)
		Wait
	}
}

Actor IronMaidenRocket 
{
	Scale 0.35
	Speed 17
	Projectile
	+RANDOMIZE
	+EXTREMEDEATH
	Radius 12
	Height 12
	Damage 20
	SeeSound "quake4/Weapons/RocketLauncher/Fire"
	DeathSound "quake4/Misc/RocketExplo"
	States
	{
	Spawn:
		QROK A 1 Light("OrangeMediumFlicker3") Bright A_SpawnItemEx("QuakeGrenSmokeTrail",random(-1,-4),random(4,-4),random(4,-4),0,0,frandom(0.5,1.0),0,SXF_NOCHECKPOSITION)
		Loop
	Death:
		TNT1 A 0 A_Explode(128,128,1)
		TNT1 A 3 A_SpawnItemEx("MonExplosionMedium",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		Stop
	}
}


//=====================================================================================
//=====================================================================================
//
//=====================================================================================
//=====================================================================================
Actor Q4LightTank		//baron
{
	DropItem "AEoDPhalanxItem" 32
	DropItem "ExploAmmo"
	DropItem "CellAmmo"
	DropItem "BulletAmmo"
	DropItem "HealthHeart" 210
	DropItem "PowerslaveSpawner" 28
	DropItem "PowerupSpawner" 8
	Monster	+DONTCORPSE	RipLevelMin 1
	Radius 22
	Height 64
	Mass 5000
	Health 1000
	PainChance 15
	+NOBLOOD
	Speed 8
	Scale 0.42
	MeleeRange 65
	+FLOORCLIP
	SeeSound "quake4/LtTank/Sight"
	PainSound "quake4/LtTank/Pain"
	DeathSound "quake4/LtTank/Death"
	ActiveSound "quake4/LtTank/Idle"
	PainChance "Charm", 96
	PainChance "Terror", 96
	PainChance "Drain", 64
	PainChance "Defile", 0
	PainChance "Chaos", 255
	PainChance "ChaosExpl1", 128
	PainChance "ChaosExpl2", 128
//Mechanic
	DamageFactor "Fire", 1.5
	DamageFactor "Ice", 0.75
	DamageFactor "Electric", 2.0
	DamageFactor "AEPoison", 0.5
	DamageFactor "AEBullet", 0.75
	DamageFactor "AEMagic", 0.75
 	DamageFactor "Plasma", 1.5
 	DamageFactor "PlasmaDisint", 1.5
	States
	{
	Pain.Charm:
		TNT1 A 0
		TNT1 A 0 A_ChangeFlag("FRIENDLY",1)
		Goto See
    Pain.Terror:
		TNT1 A 0
		TNT1 A 0 A_ChangeFlag("FRIGHTENED",1)
		Goto See
    Pain.Drain:
		TNT1 A 0
		TNT1 A 0 A_SpawnItemEx("DrainGiver",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION,0)
		Goto Pain


	
	Spawn:
		Q11I A 4 A_Look
		Loop
	See:
		TNT1 a 0 A_PlaySound("quake4/LtTank/RunNoiseLoop",6,1,1)
		Q11W AABBCCDDEEFF 2 A_Chase
		Loop
	Melee:
		TNT1 a 0 A_Jump(64,"Missile")
		TNT1 A 0 A_StopSound(6)
		Q11M A 4 A_FaceTarget		TNT1 A 0 A_Recoil(-1)
		Q11M B 4 A_FaceTarget		TNT1 A 0 A_Recoil(-1)
		Q11M C 4 A_FaceTarget		TNT1 A 0 A_Recoil(-1)
		Q11M D 4 A_CustomMeleeAttack(random(30,70),"quake4/Berserker/MeleeHit","quake4/Berserker/MeleeSwing","Normal",1)
		Q11M EF 4 A_Recoil(-1)
		TNT1 A 0 A_Stop
		Goto See
	Missile:
		TNT1 A 0 A_StopSound(6)
		TNT1 A 0 A_Jump(128,"SkipSnd")
		TNT1 A 0 A_PlaySound("quake4/LtTank/AttackGrowl",4)
	SkipSnd:
		TNT1 a 0 A_JumpIfCloser(500,"FlameThrower")
		Goto MissileChoose
	MissileChoose:
		TNT1 A 0 A_Jump(256,"FireBall","DrunkBlaster")
	DrunkBlaster:
		Q11I A 3 A_FaceTarget
		Q11A AB 3 A_FaceTarget
		TNT1 A 0 A_PlaySound("quake4/Gladiator/BlasterShot")
		Q11A BBBB 0 A_CustomMissile("Q4TankBlasterDrunkShot",38,3,0+random(5,-5))
		Q11A B 5 A_CustomMissile("Q4TankBlasterDrunkShot",38,3,0)
		Q11A B 5 A_FaceTarget
		TNT1 A 0 A_PlaySound("quake4/Gladiator/BlasterShot")
		Q11A BBBB 0 A_CustomMissile("Q4TankBlasterDrunkShot",38,3,0+random(5,-5))
		Q11A B 5 A_CustomMissile("Q4TankBlasterDrunkShot",38,3,0)
		Q11A B 5 A_FaceTarget
		TNT1 A 0 A_PlaySound("quake4/Gladiator/BlasterShot")
		Q11A BBBB 0 A_CustomMissile("Q4TankBlasterDrunkShot",38,3,0+random(5,-5))
		Q11A B 5 A_CustomMissile("Q4TankBlasterDrunkShot",38,3,0)
		Goto See
	FlameThrower:
		TNT1 A 0 A_Jump(128,"MissileChoose")	//even though is close enough, 50% of times will use other attack
		Q11I A 7 A_FaceTarget
		TNT1 a 0 A_PlaySound("quake4/LtTank/FlameStart",5)
		Q11A AB 7 A_FaceTarget
		TNT1 a 0 A_PlaySound("quake4/LtTank/FlameLoop",6,1,1)
	FlameLoop:
		TNT1 A 0 A_FaceTarget
		Q11A B 2 A_CustomMissile("FTFireMon",38,3,0)
		TNT1 a 0 A_Jump(16,"FlameThrowerEnd")
		Q11A A 0 A_MonsterRefire(0,"FlameThrowerEnd")
		Loop
	FlameThrowerEnd:
		TNT1 A 0 A_StopSound(6)
		Q11A B 6
		Q11I A 6
		Goto See
	FireBall:
		Q11B ABCCCCC 5 A_FaceTarget
		TNT1 A 0 A_CustomMissile("LightTankFireball",20,5,0)
		Q11B DDEF 6
		Goto See
	Pain:
		TNT1 A 0 A_StopSound(6)	//either flame-looping snd, or the running snd
		Q11P A 7 A_Pain
		Goto See
	Death:
		TNT1 A 0 A_UnsetSolid
		TNT1 A 0 A_StopSound(6)
		Q11D A 0 A_Scream
		Q11D A 0 A_Fall
		Q11D ABCDEF 3
		TNT1 A 0 A_PlaySound("quake4/Misc/Body/Metal")
		"####" "#" 0 A_ChangeFlag("CORPSE",1)
		Q11D G -1 A_KillMaster("Massacre",KILS_FOILINVUL,"None","AEoDSpawner")
		Stop
	Raise:
		Q11D FEDCBA 3
		Goto See
	XDeath:
		TNT1 A 0 A_Jump(256,"XDeathBlood")
		TNT1 AAAA 0 A_TossGib
		TNT1 AAAA 0 A_SpawnItemEx("NewMeat",0,0,0,random(-7,7),random(-7,7),random(1,14),random(1,359),SXF_TRANSFERTRANSLATION)
		Goto Death
	XDeathBlood:
		TNT1 A 0 A_PlaySound("other/gibdeath")
		TNT1 A 0 A_SpawnItemEx("BloodGibDropper",0,0,random(20,40),0,0,0,0)
		TNT1 AAAAAAAAAAAAAAAAA 0 A_TossGib
		TNT1 A 0 A_KillMaster("Massacre",KILS_FOILINVUL,"None","AEoDSpawner")
		TNT1 A 1 A_Fall
		Stop
	Death.UnholyDisint:
	Death.PlasmaDisint:
	Disintegrate:
		"####" "#" 0 Thing_SetTranslation(0,50)
		"####" "#" 0 A_KillMaster("Massacre",KILS_FOILINVUL,"None","AEoDSpawner")
		"####" "#" 0 A_StopSound(6)
		"####" "#" 1 A_FadeOut(0.015)
		"####" "#" 0 A_ChangeFlag("NOINTERACTION",1)
		"####" "#" 0 A_Stop    
		"####" "#" 0 A_Fall
		"####" "#" 0 A_SpawnItemEx("DisintegrateShadowMedium",0,0,30,0,0,0,0,SXF_NOCHECKPOSITION)
		"####" "#" 0 A_SpawnItemEx("DisintegrateSparksMedium",0,0,30,0,0,0,0,SXF_NOCHECKPOSITION)
		"####" "##" 2 A_FadeOut(0.03)
		Goto Disintegrate+8
	Ice:
		"####" "#" 5 A_GenericFreezeDeath
		"####" "#" 0 A_KillMaster("Massacre",KILS_FOILINVUL,"None","AEoDSpawner")
		"####" "#" 1 A_FreezeDeathChunks
		Wait
	}
}
//*******************************************************
ACTOR FTFireMon
{
PROJECTILE
+THRUGHOST
+DONTSPLASH
DONTHURTSHOOTER
Radius 2
Height 4
Speed 16
Damage 1
DamageType Fire
SeeSound "reilsss/weapons/flamethrowerfire"
DeathSound "weapons/scorch"
RENDERSTYLE ADD
Decal "PyroDecal2"
ALPHA 0.67
Scale 0.67
States
{
Spawn:
	TNT1 A 2 Bright
	FRFX AB 2 Bright
	FRFX CD 2 Bright A_Explode(3,8)
	FRFX D 0 Bright A_Lowgravity
	FRFX EFG 2 Bright A_Explode(3,16)
	FRFX HIJ 2 Bright A_Explode(3,32)
	FRFX KLM 2 Bright A_Explode(3,64)
	FRFX NO 2 Bright
	stop
Death:
	FRFX HIJ 2 Bright A_Explode(5,32)
	FRFX J 0 A_CustomMissile ("DropFire",0,0,0,0)
	FRFX KLM 2 Bright A_Explode(5,64)
	FRFX NO 2 Bright
	stop
}
}


//*****************************************************************
Actor Q4TankBlasterDrunkShot 
{
	Damage 10			//is a very weird attack. If something connects, at least should do some damage
	Scale 0.4
	Projectile
	Radius 8
	Height 12
	Speed 15
	RenderStyle Add
	SeeSound ""
	WeaveIndexXY 30
	WeaveIndexZ 30
	Translation "80:95=208:223","96:111=176:191"
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_SpawnItemEx("BlasterSmallTrail",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		LBA2 A 1 Light("OrangeMediumFlicker3") Bright A_Weave(random(3,-3),random(3,-3),2,2)
		Loop
	Death:
		TNT1 A 4 A_SpawnItemEx("Q4BlasterProjSmallExplo",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		Stop
	}
}


Actor LightTankFireball
{
	Projectile
	Speed 30
	Damage 25
	Radius 10
	Height 20
	SeeSound "quake4/Weapons/RocketLauncher/Fire"
	RenderStyle Add
	Scale 0.3
	States
	{
	Spawn:
		X025 YXWVUTSRQPONMLKJIHGFEDCBA 1 Light("OrangeMediumFlicker1") A_SpawnItemEx("DBTMonsterProjSmokeTrail",-3,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		Loop
	Death:
		TNT1 A 0 A_Explode(128,128,0)
		TNT1 a 4 A_SpawnItemEx("LtTnkFireBallExplo",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		Stop
	}
}


Actor LtTnkFireBallExplo : MonExplosionMedium	//no smoke
{	States
	{
	InFloor:
		TNT1 AAAAAAA 0 A_SpawnItemEx("ExplosionMediumSprite",0,0,0,frandom(-1.3,1.3),frandom(-1.3,1.3),frandom(0.3,1.6),random(0,359),SXF_NOCHECKPOSITION)
		TNT1 A 10
		Stop
	InAir:
		TNT1 AAAAAAA 0 A_SpawnItemEx("ExplosionMediumSprite",0,0,0,frandom(-1.3,1.3),frandom(-1.3,1.3),frandom(-1.3,1.3),random(0,359),SXF_NOCHECKPOSITION)
		TNT1 A 10
		Stop
	}
}


//=====================================================================================
//=====================================================================================
//
//=====================================================================================
//=====================================================================================
Actor Q4Makron		//Makron (stage1)
{
	var int user_attmainangle;
	var int user_attsweepangle;
	Monster	+DONTCORPSE	RipLevelMin 1
	Radius 35
	Height 90
	Health 3500
	+NORADIUSDMG
	+NOBLOOD
	+BOSS
	+NOICEDEATH
	+FLOORCLIP
	Mass 5000
	PainChance 32
	Speed 11
	Scale 0.65
	SeeSound "quake4/Makron/Voice"
	PainSound "quake4/Makron/Pain"
	DeathSound "quake4/Makron/Death"
	ActiveSound "quake4/Makron/Voice"
	PainChance "Drain", 40
	PainChance "Chaos", 255
	DamageFactor "ChaosExpl1", 0
	DamageFactor "ChaosExpl2", 0
//Mechanic
	DamageFactor "Fire", 1.5
	DamageFactor "Ice", 0.75
	DamageFactor "Electric", 2.0
	DamageFactor "AEPoison", 0.5
	DamageFactor "AEBullet", 0.75
	DamageFactor "AEMagic", 0.75
 	DamageFactor "Plasma", 1.5
 	DamageFactor "PlasmaDisint", 1.5
	States
	{
	Pain.Drain:
		TNT1 A 0
		TNT1 A 0 A_SpawnItemEx("DrainGiver",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION,0)
		Goto Pain

	Spawn:
		Q12I A 4 A_Look
		Loop
	See:
		Q12W A 4 A_Chase
		TNT1 a 0 A_PlaySound("quake4/Makron/Step",5)
		Q12W BC 4 A_Chase
		TNT1 a 0 A_PlaySound("quake4/Makron/Step",6)
		Q12W D 4 A_Chase
		TNT1 a 0 A_PlaySound("quake4/Makron/Step",5)
		Q12W EF 4 A_Chase
		TNT1 a 0 A_PlaySound("quake4/Makron/Step",6)
		Loop


	Missile:
		TNT1 A 0 A_Jump(110,"DarkMatterBeam")	//will do this att most of the time
		TNT1 A 0 A_Jump(256,"DarkMattGun","Blaster","SummonAllies","GrenadeAttack")


	DarkMattGun:
		Q12A AABB 4 A_FaceTarget
		TNT1 A 0 A_PlaySound("quake4/Weapons/DMG/Fire")
		TNT1 A 0 A_CustomMissile("DMGShotMonster",42,8,0)
		Q12A CDE 4
		Goto See

	Blaster:
		Q12A AB 4 A_FaceTarget
		TNT1 A 0 A_PlaySound("quake4/Gladiator/BlasterShot")
		Q12A C 0 A_CustomMissile("Q4MakronBlasterShot",52,10,20+random(10,-10))
		Q12A C 0 A_CustomMissile("Q4MakronBlasterShot",52,10,-20+random(10,-10))
		Q12A C 4 A_CustomMissile("Q4MakronBlasterShot",52,10,0)
		TNT1 A 0 A_Jump(5,"See")
		TNT1 A 0 A_MonsterRefire(0,"See")
		Goto Blaster+1

	DarkMatterBeam:
		TNT1 A 0 A_SetUserVar("user_attsweepangle",80)
		TNT1 A 0 A_PlaySound("quake4/Weapons/DMG/EnergyAttack")
		TNT1 A 0 A_Jump(128,"MainLeftToRight")
	MainRightToLeft:			//viewed from the front, otherwise is backwards
		TNT1 A 0 A_SetUserVar("user_attmainangle",40)
		Q12B ABC 3 A_FaceTarget
		Goto DMBeamLoop1
	MainLeftToRight:
		TNT1 A 0 A_SetUserVar("user_attmainangle",-40)
		Q12B ABC 3 A_FaceTarget
		Goto DMBeamLoop2
	DMBeamLoop1:		//main shot from left to right
		TNT1 A 0 A_JumpIf(user_attsweepangle<=-80,"DMBeamEnd")
		TNT1 A 0 A_PlaySound("quake4/Weapons/DMG/EnergyLoop",6,1,1)
		TNT1 a 0 A_SpawnItemEx("DMGHeldVortex1",45,-15,50,0,0,0,0,SXF_NOCHECKPOSITION)
		TNT1 A 0 A_CustomMissile("DarkMatterBeam",55,-15,user_attmainangle)
		TNT1 A 0 A_CustomMissile("DarkMatterBeam",55,-15,user_attsweepangle)
		TNT1 A 0 A_CustomMissile("DarkMatterBeam",55,-15,user_attsweepangle*(-1))
		TNT1 A 0 A_SetUserVar("user_attsweepangle",user_attsweepangle-5)
		TNT1 A 0 A_SetUserVar("user_attmainangle",user_attmainangle-2)
		Q12B D 2 A_FaceTarget
		TNT1 a 0 A_SpawnItemEx("DMGHeldVortex2",45,-15,50,0,0,0,0,SXF_NOCHECKPOSITION)
		TNT1 A 0 A_CustomMissile("DarkMatterBeam",55,-15,user_attmainangle)
		TNT1 A 0 A_CustomMissile("DarkMatterBeam",55,-15,user_attsweepangle)	
		TNT1 A 0 A_CustomMissile("DarkMatterBeam",55,-15,user_attsweepangle*(-1))
		TNT1 A 0 A_SetUserVar("user_attsweepangle",user_attsweepangle-5)
		TNT1 A 0 A_SetUserVar("user_attmainangle",user_attmainangle-3)
		Q12B E 2 A_FaceTarget
		TNT1 a 0 A_SpawnItemEx("DMGHeldVortex1",45,-15,50,0,0,0,0,SXF_NOCHECKPOSITION)
		TNT1 A 0 A_CustomMissile("DarkMatterBeam",55,-15,user_attmainangle)
		TNT1 A 0 A_CustomMissile("DarkMatterBeam",55,-15,user_attsweepangle)	
		TNT1 A 0 A_CustomMissile("DarkMatterBeam",55,-15,user_attsweepangle*(-1))
		TNT1 A 0 A_SetUserVar("user_attsweepangle",user_attsweepangle-5)
		TNT1 A 0 A_SetUserVar("user_attmainangle",user_attmainangle-2)
		Q12B F 2 A_FaceTarget
		TNT1 a 0 A_SpawnItemEx("DMGHeldVortex2",45,-15,50,0,0,0,0,SXF_NOCHECKPOSITION)
		TNT1 A 0 A_CustomMissile("DarkMatterBeam",55,-15,user_attmainangle)
		TNT1 A 0 A_CustomMissile("DarkMatterBeam",55,-15,user_attsweepangle)	
		TNT1 A 0 A_CustomMissile("DarkMatterBeam",55,-15,user_attsweepangle*(-1))
		TNT1 A 0 A_SetUserVar("user_attsweepangle",user_attsweepangle-5)
		TNT1 A 0 A_SetUserVar("user_attmainangle",user_attmainangle-3)
		Q12B G 2 A_FaceTarget
		Loop
	DMBeamLoop2:		//main shot from right to left
		TNT1 A 0 A_JumpIf(user_attsweepangle<=-80,"DMBeamEnd")
		TNT1 A 0 A_PlaySound("quake4/Weapons/DMG/EnergyLoop",6,1,1)
		TNT1 a 0 A_SpawnItemEx("DMGHeldVortex1",45,-15,50,0,0,0,0,SXF_NOCHECKPOSITION)
		TNT1 A 0 A_CustomMissile("DarkMatterBeam",55,-15,user_attmainangle)
		TNT1 A 0 A_CustomMissile("DarkMatterBeam",55,-15,user_attsweepangle)
		TNT1 A 0 A_CustomMissile("DarkMatterBeam",55,-15,user_attsweepangle*(-1))
		TNT1 A 0 A_SetUserVar("user_attsweepangle",user_attsweepangle-5)
		TNT1 A 0 A_SetUserVar("user_attmainangle",user_attmainangle+2)
		Q12B D 2 A_FaceTarget
		TNT1 a 0 A_SpawnItemEx("DMGHeldVortex2",45,-15,50,0,0,0,0,SXF_NOCHECKPOSITION)
		TNT1 A 0 A_CustomMissile("DarkMatterBeam",55,-15,user_attmainangle)
		TNT1 A 0 A_CustomMissile("DarkMatterBeam",55,-15,user_attsweepangle)	
		TNT1 A 0 A_CustomMissile("DarkMatterBeam",55,-15,user_attsweepangle*(-1))
		TNT1 A 0 A_SetUserVar("user_attsweepangle",user_attsweepangle-5)
		TNT1 A 0 A_SetUserVar("user_attmainangle",user_attmainangle+3)
		Q12B E 2 A_FaceTarget
		TNT1 a 0 A_SpawnItemEx("DMGHeldVortex1",45,-15,50,0,0,0,0,SXF_NOCHECKPOSITION)
		TNT1 A 0 A_CustomMissile("DarkMatterBeam",55,-15,user_attmainangle)
		TNT1 A 0 A_CustomMissile("DarkMatterBeam",55,-15,user_attsweepangle)	
		TNT1 A 0 A_CustomMissile("DarkMatterBeam",55,-15,user_attsweepangle*(-1))
		TNT1 A 0 A_SetUserVar("user_attsweepangle",user_attsweepangle-5)
		TNT1 A 0 A_SetUserVar("user_attmainangle",user_attmainangle+2)
		Q12B F 2 A_FaceTarget
		TNT1 a 0 A_SpawnItemEx("DMGHeldVortex2",45,-15,50,0,0,0,0,SXF_NOCHECKPOSITION)
		TNT1 A 0 A_CustomMissile("DarkMatterBeam",55,-15,user_attmainangle)
		TNT1 A 0 A_CustomMissile("DarkMatterBeam",55,-15,user_attsweepangle)	
		TNT1 A 0 A_CustomMissile("DarkMatterBeam",55,-15,user_attsweepangle*(-1))
		TNT1 A 0 A_SetUserVar("user_attsweepangle",user_attsweepangle-5)
		TNT1 A 0 A_SetUserVar("user_attmainangle",user_attmainangle+3)
		Q12B G 2 A_FaceTarget
		Loop
	DMBeamEnd:
		TNT1 A 0 A_StopSound(6)
		Q12B DEFGBA 3
		Goto See

	SummonAllies:
		Q12C ABBBB 5 A_FaceTarget
		TNT1 A 0 A_PlaySound("quake4/Weapons/GrenLaunch/Fire")
		TNT1 AAA 0 A_CustomMissile("Q4MakronAllySpawner",80,15,random(90,-90))
		Q12C ABCCCBA 5
		Goto See
	GrenadeAttack:
		Q12C ABBBB 5 A_FaceTarget
		TNT1 A 0 A_PlaySound("quake4/Weapons/GrenLaunch/Fire")
		TNT1 AAA 0 A_CustomMissile("Q4GrenadeBig",80,15,0)
		Q12C ABCCCBA 5
		Goto See

	Pain:
		TNT1 A 0 A_StopSound(6)
		Q12P A 7 A_Pain
		Goto See

//	No special deaths since he has to spawn the other version of itself
//	This has since been changed because it's easy enough to do. -M.C.
	Death:
		TNT1 A 0 A_UnsetSolid
		TNT1 A 0 A_Scream
		TNT1 A 0 A_StopSound(6)
		Q12D A 4 A_Fall
		Q12D BCDE 4
		Q12D FFFFFFFFFFFFFFFFFFFF 4 A_SpawnItemEx("BossDeathExplosion",random(30,-30),random(30,-30),random(20,80),0,0,0,0,SXF_NOCHECKPOSITION)
		TNT1 AAAA 0 A_SpawnItemEx("BossDeathExplosion",random(30,-30),random(30,-30),random(20,80),0,0,0,0,SXF_NOCHECKPOSITION)
		TNT1 A 0 A_SpawnItemEx("Q4Makron2",0,0,20,0,0,3,0,SXF_NOCHECKPOSITION|SXF_TRANSFERSPECIAL|SXF_CLEARCALLERSPECIAL|SXF_CLEARCALLERTID|SXF_TRANSFERPOINTERS,0,tid)
		"####" "#" 0 A_QueueCorpse
		"####" "#" 0 A_ChangeFlag("CORPSE",1)
		Q12D G -1
		Stop
	Death.Massacre:
	Death.Telefrag:
		TNT1 A 0 A_Scream
		TNT1 A 0 A_StopSound(6)
		Q12D A 4 A_Fall
		Q12D BCDE 4
		Q12D FFFFFFFFFFFFFFFFFFFF 4 A_SpawnItemEx("BossDeathExplosion",random(30,-30),random(30,-30),random(20,80),0,0,0,0,SXF_NOCHECKPOSITION)
		TNT1 AAAA 0 A_SpawnItemEx("BossDeathExplosion",random(30,-30),random(30,-30),random(20,80),0,0,0,0,SXF_NOCHECKPOSITION)
		Q12D G 1 A_SpawnItemEx("Q4Makron2",0,0,20,0,0,3,0,SXF_NOCHECKPOSITION|SXF_TRANSFERSPECIAL|SXF_CLEARCALLERSPECIAL|SXF_CLEARCALLERTID|SXF_SETMASTER,0,tid)
		Q12D G 0 A_KillChildren
		"####" "#" 0 A_QueueCorpse
		"####" "#" 0 A_ChangeFlag("CORPSE",1)
		Q12D G -1 A_KillMaster("Massacre",KILS_FOILINVUL,"None","AEoDSpawner")
		Stop
	Death.UnholyDisint:
	Death.PlasmaDisint:
	Disintegrate:
		Q12D G 0 A_SpawnItemEx("Q4Makron2",0,0,20,0,0,3,0,SXF_NOCHECKPOSITION|SXF_TRANSFERSPECIAL|SXF_CLEARCALLERSPECIAL|SXF_CLEARCALLERTID|SXF_TRANSFERPOINTERS,0,tid)
		"####" "#" 0 Thing_SetTranslation(0,50)
		"####" "#" 0 A_StopSound(6)
		"####" "#" 1 A_FadeOut(0.015)
		"####" "#" 0 A_ChangeFlag("NOINTERACTION",1)
		"####" "#" 0 A_Stop    
		"####" "#" 0 A_Fall
		"####" "#" 0 A_SpawnItemEx("DisintegrateShadowBig",0,0,45,0,0,0,0,SXF_NOCHECKPOSITION)
	DisintegrateCont:
		"####" "#" 0 A_SpawnItemEx("DisintegrateSparksBig",0,0,45,0,0,0,0,SXF_NOCHECKPOSITION)
		"####" "##" 2 A_FadeOut(0.03)
		Loop
	}
}

Actor Q4MakronBlasterShot : Q4BlasterProjBig
{
	Projectile
	Radius 8
	Height 12
	Damage 20
	Speed 27
	RenderStyle Add
	BounceType "Doom"
	BounceCount 2
	SeeSound ""
	Translation "80:95=208:223","96:111=176:191"
	States
	{
	Spawn:
		LBA2 A 2 Light("OrangeMediumFlicker2") Bright A_SpawnItemEx("BlasterBigTrail",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		Loop
	Death:
		TNT1 A 4 A_SpawnItemEx("Q4BlasterProjBigExplo",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		Stop
	}
}
//*********************************************************************
Actor Q4MakronAllySpawner
{
	Speed 18
	Radius 4
	Height 4
	Damage 0
	Scale 0.4
	Projectile
	+DONTSPLASH
	-NOGRAVITY
	States
	{
	Spawn:
		TNT1 A 0 
		TNT1 A 0 ThrustThingZ(0,20,0,1)
		MI04 AAABBBCCCDDD 1 A_SpawnItemEx("Q4MkrnAllySpwnrTrail",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		Goto Spawn+2
	Death:
		TNT1 A 0 A_SpawnItem("TeleportFog",0,0)
		TNT1 A 1 A_SpawnItem("Q4MkrnMinionsSpawner",0,0)
		Stop
	}
}

Actor Q4MkrnAllySpwnrTrail
{
	+NOINTERACTIOn
	Scale 0.05
	RenderStyle Translucent
	Alpha 0.7
	States
	{
	Spawn:
		PORT T 3 A_FadeOut
		Wait
	}
}

Actor Q4MkrnMinionsSpawner
{
	Monster
	+NOCLIP
	-SOLID
	Health 100000000000
	Radius 0
	Height 0
	+NORADIUSDMG
	+NOBLOOD
	-COUNTKILL
	RenderStyle None
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_Jump(250,2)
		TNT1 A 1 A_SpawnItemEx("Q4LightGuard",0,0,0,0,0,0,0,0)
		Stop
		TNT1 A 0 A_Jump(250,2)
		TNT1 A 1 A_SpawnItemEx("Q4MachinegunGuard",0,0,0,0,0,0,0,0)
		Stop
		TNT1 A 0 A_Jump(250,2)
		TNT1 A 1 A_SpawnItemEx("Q4ShotgunGuard",0,0,0,0,0,0,0,0)
		Stop
		TNT1 A 0 A_Jump(250,2)
		TNT1 A 1 A_SpawnItemEx("Q4Berserker",0,0,0,0,0,0,0,0)
		Stop
		TNT1 A 0 A_Jump(250,2)
		TNT1 A 1 A_SpawnItemEx("Q4Grunt",0,0,0,0,0,0,0,0)
		Stop
		TNT1 A 0 A_Jump(250,2)
		TNT1 A 1 A_SpawnItemEx("Q4Gunner",0,0,0,0,0,0,0,0)
		Stop
		TNT1 A 0 A_Jump(250,2)
		TNT1 A 1 A_SpawnItemEx("Q4IronMaiden",0,0,0,0,0,0,0,0)
		Stop
		TNT1 A 0 A_Jump(250,2)
		TNT1 A 1 A_SpawnItemEx("Q4LightTank",0,0,0,0,0,0,0,0)
		Stop
		TNT1 A 0
		Loop
	Death:
		TNT1 A 3 
		Stop
	}
}

//*********************************************************************
actor Q4GrenadeBig
{
	PROJECTILE
	BounceType "Doom"
	+CANBOUNCEWATER
	-NOGRAVITY
	+EXTREMEDEATH
	+FORCERADIUSDMG
	Radius 8
	Height 8
	Speed 16
	Gravity 0.35
	Damage 20
	BounceFactor 0.4
	BounceSound "quake4/Weapons/GrenLaunch/Bounce"
	Scale 0.6
	ReactionTime 6
	Translation "176:191=212:223"
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 ThrustThingZ(0,20,0,1)
		TNT1 A 0 A_CountDown
		QGRP KKJJ 1 Bright A_SpawnItemEx("Q4MkrnAllySpwnrTrail",-1,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		TNT1 A 0 A_CountDown
		QGRP IIHH 1 Bright A_SpawnItemEx("Q4MkrnAllySpwnrTrail",-1,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		TNT1 A 0 A_CountDown
		QGRP GGFF 1 Bright A_SpawnItemEx("Q4MkrnAllySpwnrTrail",-1,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		TNT1 A 0 A_CountDown
		QGRP EEDD 1 Bright A_SpawnItemEx("Q4MkrnAllySpwnrTrail",-1,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		TNT1 A 0 A_CountDown
		QGRP CCBBAA 1 Bright A_SpawnItemEx("Q4MkrnAllySpwnrTrail",-1,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		Goto Spawn+3
	Death:
		TNT1 A 0 A_PlaySound("quake4/Misc/GrenadeExplo")
		TNT1 AAAAAA 0 A_SpawnItemEx("Q4GBSwarm",0,0,8,random(-8,8),random(-8,8),random(5,10),random(0,359),SXF_NOCHECKPOSITION)
		TNT1 A 0 A_Explode(160,128,0)
		TNT1 A 0 A_SpawnItemEx("MonExplosionMedium",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		Stop
	}
}

actor Q4GBSwarm
{
	PROJECTILE
	BounceType "Doom"
	//+GRENADETRAIL
	+CANBOUNCEWATER
	-NOGRAVITY
	+EXTREMEDEATH
	+FORCERADIUSDMG
	Radius 8
	Height 8
	Speed 18
	Gravity 0.6
	Damage 10
	BounceFactor 0.35
	BounceSound "quake4/Weapons/GrenLaunch/Bounce"
	Scale 0.45
	Translation "176:191=212:223"
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_StopSound
		QGRP KJIHGFEDCBA 3 Bright A_SpawnItemEx("Quake4GrenSmallSmokeTrail",0,0,0,0,0,0.3,0,SXF_NOCHECKPOSITION)
		Goto Spawn+2
	Death:
		TNT1 A 0 A_PlaySound("quake4/Misc/GrenadeExplo")
		TNT1 A 0 A_QuakeEx(1,1,0, 10,0,5,"", QF_SCALEDOWN)
		TNT1 A 0 A_Explode(96,128,1)
		TNT1 A 0 A_SpawnItemEx("MonExplosionMediumConcentrated",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		Stop
	}
}
Actor Quake4GrenSmallSmokeTrail
{
	+NOINTERACTION
	Scale 0.175
	RenderStyle Translucent
	Alpha 0.67
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_Jump(210,3,5,7,9)
		PUF2 ABCDEFGHIJKLMNOPQRSTUVWXYZ 1 A_FadeOut(0.045)
		Stop
	}
}



//*********************************************************************
Actor DMGHeldVortex1
{
	+NOINTERACTION
//	Translation "0:255=%[0.2,0.1,0.2]:[0.8,0.4,0.8]"
	Scale 0.25
	RenderStyle Translucent
	Alpha 0.3
	States
	{
	Spawn:
		VOIP ABCDE 2 Bright
		Stop
	}
}

Actor DMGHeldVortex2 : DMGHeldVortex1
{
	States
	{
	Spawn:
		VOIP ABCDE 2 Bright
		Stop
	}
}
//*********************************************************************
Actor DarkMatterBeam : FastProjectile
{
	Speed 280
	MissileType "DMBeamTrail"
	Radius 8
	Height 12
	Damage 8
	States
	{
	Spawn:
		TNT1 A 4
		Loop
	}
}

Actor DMBeamTrail 
{
	+NOINTERACTION
	RenderStyle Translucent
	Alpha 0.55
	Scale 0.3
	States
	{
	Spawn:
		TNT1 a 0 
		TNT1 A 0 A_Jump(256,"Type1","Type2","Type3","Type4")
	Type1:
		VOIZ AEI 1 Bright
		Stop
	Type2:
		VOIZ BFJ 1 Bright
		Stop
	Type3:
		VOIZ CGK 1 Bright
		Stop
	Type4:
		VOIZ DHL 1 Bright
		Stop

	}
}


//=====================================================================================
//=====================================================================================
//
//=====================================================================================
//=====================================================================================
Actor Q4Makron2		//special
{
	DropItem "AEoDDarkMatterGunItem" 64
	DropItem "CellAmmo" 128
	DropItem "CellAmmo" 128
	DropItem "CellAmmo" 128
	DropItem "CellAmmo" 128
	DropItem "PowerslaveSpawner" 28
	DropItem "PowerupSpawner" 8
	var int user_attmainangle;
	var int user_attsweepangle;
	Monster	+DONTCORPSE	RipLevelMin 1
	Radius 35
	Height 60
	Health 3500
	+NORADIUSDMG
	+NOBLOOD
	+BOSS
	+NOICEDEATH
	Mass 0x7FFFFFF
	PainChance 32
	Speed 11
	Scale 0.65
	+FLOAT
	+NOGRAVITY
	SeeSound "quake4/Makron/Voice"
	PainSound "quake4/Makron/Pain"
	DeathSound "quake4/Makron/Death"
	ActiveSound "quake4/Makron/Voice"
	PainChance "Drain", 40
	PainChance "Chaos", 255
	DamageFactor "ChaosExpl1", 0
	DamageFactor "ChaosExpl2", 0
//Mechanic
	DamageFactor "Fire", 1.5
	DamageFactor "Ice", 0.75
	DamageFactor "Electric", 2.0
	DamageFactor "AEPoison", 0.5
	DamageFactor "AEBullet", 0.75
	DamageFactor "AEMagic", 0.75
 	DamageFactor "Plasma", 1.5
 	DamageFactor "PlasmaDisint", 1.5
	States
	{
	Pain.Drain:
		TNT1 A 0
		TNT1 A 0 A_SpawnItemEx("DrainGiver",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION,0)
		Goto Pain
	
	Spawn:
		Q13W ABCB 5 A_Look
		TNT1 A 0 A_Stop		
		Loop
	See:
		TNT1 A 0 A_Jump(40,"Strafe")
		Q13W AABB 3 A_Chase
		TNT1 A 0 A_Stop
		Q13W CCBB 3 A_Chase
		Loop
	Strafe:
		TNT1 A 0 A_FaceTarget
		TNT1 A 0 A_ChangeVelocity(0,random(10,-10),0,1)
		Goto See+1
	Missile:
		TNT1 A 0 A_JumpIfCloser(500,"GrenadeDecide")
		TNT1 a 0 A_Jump(110,"DarkMatterBeam")
		TNT1 A 0 A_Jump(256,"Blaster","DarkMatterGun","SummonAllies")
	GrenadeDecide:
		TNT1 a 0 A_Jump(70,"DarkMatterGrenades")
		Goto Missile+1
	Blaster:
		Q13A ABC 3 A_FaceTarget
		TNT1 a 0 A_FaceTarget
		TNT1 A 0 A_PlaySound("quake4/Gladiator/BlasterShot")
		Q13A D 6 A_CustomMissile("Q4MakronBlasterShot",35,-15,0+random(10,-10))
		TNT1 A 0 A_Jump(7,"AttEnd")
		TNT1 A 0 A_MonsterRefire(0,"AttEnd")
		Goto Blaster+3
	AttEnd:
		Q13A CBA 6
		Goto See
	DarkMatterGun:
		Q13A ABC 3 A_FaceTarget
		Q13A DDDD 5 A_FaceTarget
		TNT1 A 0 A_PlaySound("quake4/Weapons/DMG/Fire")
		Q13A D 5 A_CustomMissile("DMGShotMonster",35,-15,0)
		Goto AttEnd
	SummonAllies:
		Q13A ABC 3 A_FaceTarget
		Q13A DDD 5 A_FaceTarget
		TNT1 A 0 A_PlaySound("quake4/Weapons/GrenLaunch/Fire")
		TNT1 AAA 0 A_CustomMissile("Q4MakronAllySpawner",35,-15,random(90,-90))
		Q13A D 5 
		Goto AttEnd	
	DarkMatterGrenades:
		Q13A ABC 3 A_FaceTarget
		Q13A DDD 5 A_FaceTarget
		TNT1 A 0 A_PlaySound("quake4/Weapons/GrenLaunch/Fire")
		TNT1 AAAAAAAAA 0 A_CustomMissile("MakronDarkMatterGrenade",35,-15,random(70,-70))
		Q13A D 5 A_CustomMissile("MakronDarkMatterGrenadeDirect",35,-15,0)
		Goto AttEnd	
		
	DarkMatterBeam:
		TNT1 A 0 A_Stop
		TNT1 A 0 A_SetUserVar("user_attsweepangle",80)
		TNT1 A 0 A_PlaySound("quake4/Weapons/DMG/EnergyAttack")
		TNT1 A 0 A_Jump(128,"MainLeftToRight")
	MainRightToLeft:			//viewed from the front, otherwise is backwards
		TNT1 A 0 A_SetUserVar("user_attmainangle",40)
		Q13A ABC 3 A_FaceTarget
		Goto DMBeamLoop1
	MainLeftToRight:
		TNT1 A 0 A_SetUserVar("user_attmainangle",-40)
		Q13A ABC 3 A_FaceTarget
		Goto DMBeamLoop2
	DMBeamLoop1:		//main shot from left to right
		TNT1 A 0 A_JumpIf(user_attsweepangle<=-80,"DMBeamEnd")
		TNT1 A 0 A_PlaySound("quake4/Weapons/DMG/EnergyLoop",6,1,1)
		TNT1 a 0 A_SpawnItemEx("DMGHeldVortex1",45,-15,30,0,0,0,0,SXF_NOCHECKPOSITION)
		TNT1 A 0 A_CustomMissile("DarkMatterBeam",40,-15,user_attmainangle)
		TNT1 A 0 A_CustomMissile("DarkMatterBeam",40,-15,user_attsweepangle)
		TNT1 A 0 A_CustomMissile("DarkMatterBeam",40,-15,user_attsweepangle*(-1))
		TNT1 A 0 A_SetUserVar("user_attsweepangle",user_attsweepangle-5)
		TNT1 A 0 A_SetUserVar("user_attmainangle",user_attmainangle-2)
		Q13A D 2 A_FaceTarget
		TNT1 a 0 A_SpawnItemEx("DMGHeldVortex2",45,-15,30,0,0,0,0,SXF_NOCHECKPOSITION)
		TNT1 A 0 A_CustomMissile("DarkMatterBeam",40,-15,user_attmainangle)
		TNT1 A 0 A_CustomMissile("DarkMatterBeam",40,-15,user_attsweepangle)	
		TNT1 A 0 A_CustomMissile("DarkMatterBeam",40,-15,user_attsweepangle*(-1))
		TNT1 A 0 A_SetUserVar("user_attsweepangle",user_attsweepangle-5)
		TNT1 A 0 A_SetUserVar("user_attmainangle",user_attmainangle-3)
		Q13A D 2 A_FaceTarget
		Loop
	DMBeamLoop2:		//main shot from right to left
		TNT1 A 0 A_JumpIf(user_attsweepangle<=-80,"DMBeamEnd")
		TNT1 A 0 A_PlaySound("quake4/Weapons/DMG/EnergyLoop",6,1,1)
		TNT1 a 0 A_SpawnItemEx("DMGHeldVortex1",45,-15,30,0,0,0,0,SXF_NOCHECKPOSITION)
		TNT1 A 0 A_CustomMissile("DarkMatterBeam",40,-15,user_attmainangle)
		TNT1 A 0 A_CustomMissile("DarkMatterBeam",40,-15,user_attsweepangle)
		TNT1 A 0 A_CustomMissile("DarkMatterBeam",40,-15,user_attsweepangle*(-1))
		TNT1 A 0 A_SetUserVar("user_attsweepangle",user_attsweepangle-5)
		TNT1 A 0 A_SetUserVar("user_attmainangle",user_attmainangle+2)
		Q13A D 2 A_FaceTarget
		TNT1 a 0 A_SpawnItemEx("DMGHeldVortex2",45,-15,30,0,0,0,0,SXF_NOCHECKPOSITION)
		TNT1 A 0 A_CustomMissile("DarkMatterBeam",40,-15,user_attmainangle)
		TNT1 A 0 A_CustomMissile("DarkMatterBeam",40,-15,user_attsweepangle)	
		TNT1 A 0 A_CustomMissile("DarkMatterBeam",40,-15,user_attsweepangle*(-1))
		TNT1 A 0 A_SetUserVar("user_attsweepangle",user_attsweepangle-5)
		TNT1 A 0 A_SetUserVar("user_attmainangle",user_attmainangle+3)
		Q13A D 2 A_FaceTarget
		Loop
	DMBeamEnd:
		TNT1 A 0 A_StopSound(6)
		Q13A DDDDCBA 3
		Goto See

	Pain:
		Q13W A 3 A_Pain
		Goto See
	Death:
		TNT1 A 0 A_UnsetSolid
		Q13D A 0 A_Scream
		TNT1 A 0 A_StopSound(6)
		Q13D ABC 4
		"####" D 4 A_JumpIf(z <= floorz || abs(velz) <= 0,"Crash")
		Wait
	Crash:
		"####" "#" 0 A_JumpIfInventory("DisintegrateToken",1,"DisintegrateCont")
		TNT1 A 0 A_PlaySound("quake4/Misc/Body/Metal",5)
		TNT1 a 0 A_Fall
		Q13D EFGH 4
		"####" "#" 0 A_QueueCorpse
		"####" "#" 0 A_ChangeFlag("CORPSE",1)
		Q13D I -1 A_KillMaster("Massacre",KILS_FOILINVUL,"None","AEoDSpawner")
		Stop
	Death.UnholyDisint:
	Death.PlasmaDisint:
	Disintegrate:
		"####" "#" 0 A_GiveInventory("DisintegrateToken",1)
	DisintegrateCont:
		"####" "#" 0 Thing_SetTranslation(0,50)
		"####" "#" 0 A_KillMaster("Massacre",KILS_FOILINVUL,"None","AEoDSpawner")
		"####" "#" 0 A_StopSound(6)
		"####" "#" 1 A_FadeOut(0.015)
		"####" "#" 0 A_ChangeFlag("NOINTERACTION",1)
		"####" "#" 0 A_Stop    
		"####" "#" 0 A_Fall
		"####" "#" 0 A_SpawnItemEx("DisintegrateShadowMediumBig",0,0,40,0,0,0,0,SXF_NOCHECKPOSITION)
		"####" "#" 0 A_SpawnItemEx("DisintegrateSparksMediumBig",0,0,40,0,0,0,0,SXF_NOCHECKPOSITION)
		"####" "##" 2 A_FadeOut(0.03)
		Goto DisintegrateCont+8
	Ice:
		"####" "#" 5 A_GenericFreezeDeath
		"####" "#" 0 A_KillMaster("Massacre",KILS_FOILINVUL,"None","AEoDSpawner")
		"####" "#" 1 A_FreezeDeathChunks
		Wait
	}
}


Actor MakronDarkMatterGrenade
{
	Radius 8
	Height 8
	Speed 24
	Scale 0.3
	Gravity 0.7	
	Damage 6
	PROJECTILE
	-NOGRAVITY
	+CANBOUNCEWATER 
	BounceFactor 0.6
	BounceType "Doom"
	BounceSound "quake4/Weapons/GrenLaunch/Bounce"
	DeathSound "quake4/Misc/Explo"
	RenderStyle Translucent
	Alpha 0.7
	Translation "0:255=%[0.0,0.0,0.0]:[0.8,0.4,0.8]"
	States
	{
	Spawn:
		TNT1 A 0 
		TNT1 A 0 ThrustThingZ(0,5*random(3,10),0,1)
		TNT1 a 0 A_Jump(200,2,3,4,5)
		MSP1 ABCDEF 3 Light("BlackSmallFlicker1") Bright
		Goto Spawn+3
	Death:
		TNT1 A 0 A_SpawnItemEx("DarkMattGrenExplo",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		TNT1 A 3 A_Explode(60,90,1)
		Stop
	}
}

Actor MakronDarkMatterGrenadeDirect : MakronDarkMatterGrenade
{
	States
	{
	Spawn:
		TNT1 A 0 
		TNT1 a 0 A_Jump(200,2,3,4,5)
		MSP1 ABCDEF 3 Light("BlackSmallFlicker1") Bright
		Goto Spawn+2
	}
}

Actor DarkMattGrenExplo
{
	+NOINTERACTION
	RenderStyle Translucent
	Alpha 0.7
	Scale 0.2
	States
	{
	Spawn:
		VORX A 3 Light("BlackSmallFlicker2") Bright A_FadeOut(0.05)
		VORX B 3 Light("BlackSmallFlicker1") Bright A_FadeOut(0.05)
		VORX C 3 Light("BlackMediumFlicker3") Bright A_FadeOut(0.05)
		VORX DEF 3 Light("BlackMediumFlicker2") Bright A_FadeOut(0.05)
		VORX G 3 Light("BlackMediumFlicker3") Bright A_FadeOut(0.05)
		VORX H 3 Light("BlackSmallFlicker1") Bright A_FadeOut(0.05)
		VORX I 3 Light("BlackSmallFlicker2") Bright A_FadeOut(0.05)
		VORX J 3 Light("BlackSmallFlicker3") Bright A_FadeOut(0.05)
		VORX J 1 Bright A_FadeOut(0.1)
		Wait
	}
}





//=====================================================================================
//=====================================================================================
//
//=====================================================================================
//=====================================================================================

Actor Q4NetworkGuardian		//spidermaster
{
	DropItem "AEoDConcussionLauncherItem" 64
	DropItem "ExploBigAmmo"
	DropItem "ExploBigAmmo"
	DropItem "ExploBigAmmo"
	DropItem "HealthHeart" 210
	DropItem "PowerslaveSpawner" 28
	DropItem "PowerupSpawner" 8
	Monster	+DONTCORPSE	RipLevelMin 1
	Radius 50
	Height 90
	Mass 8000
	Health 5500
	PainChance 64
	Speed 10
	Scale 0.69
	+BOSS
	+NORADIUSDMG
	+NOICEDEATH
	+FLOORCLIP
	Gravity 0.5
	MeleeRange 80
	SeeSound "quake4/NetworkGuard/Sight"
	PainSound "quake4/NetworkGuard/Pain"
	DeathSound "quake4/NetworkGuard/Death"
	ActiveSound ""
	Obituary "%o was blown to pieces by the network guardian."
	PainChance "Drain", 40
	PainChance "Chaos", 255
	DamageFactor "ChaosExpl1", 0
	DamageFactor "ChaosExpl2", 0
//Armor
	DamageFactor "Electric", 1.5
	DamageFactor "Plasma", 0.75
	DamageFactor "PlasmaDisint", 0.75
	DamageFactor "AEBullet", 0.5
	States
	{
	Pain.Drain:
		TNT1 A 0
		TNT1 A 0 A_SpawnItemEx("DrainGiver",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION,0)
		Goto Pain


	
	Spawn:
		Q14I A 4 A_Look
		Loop
	See:
		TNT1 A 0 A_JumpIfHealthLower(4000,"FlyStart")
		Q14W AA 4 A_Chase
		TNT1 A 0 A_PlaySound("quake4/NetworkGuard/Step",5)
		Q14W BBCCDD 4 A_Chase
		TNT1 A 0 A_JumpIfHealthLower(600,"FlyStart")	//just in case
		TNT1 A 0 A_PlaySound("quake4/NetworkGuard/Step",5)
		Q14W EEFF 4 A_Chase
		Loop
	Melee:
		Q14B ABC 5 A_FaceTarget
		Q14B D 5 A_CustomMeleeAttack(random(50,120),"quake4/Misc/MeleeHit","quake4/Misc/Swing","Normal",1)
		Q14B EF 5
		Goto See
	Missile:
		TNT1 A 0 A_Jump(256,"SkyRocket","RocketShotgun","BigRocket")
	RocketShotgun:
		Q14A AB 5 A_FaceTarget
		TNT1 a 0 A_FaceTarget
		TNT1 a 0 A_PlaySound("quake4/NetworkGuard/RocketShot",5)
		TNT1 AAAAA 0 A_CustomMissile("NetworkGuardRocketSmall",50,20,random(2,-2))
		Q14A CDD 5 A_FaceTarget
		TNT1 A 0 A_Jump(32,"See")
		TNT1 A 0 A_CPosRefire
		Goto RocketShotgun+1
	SkyRocket:
		Q14C A 6 A_FaceTarget
		Q14C BC 6
		TNT1 a 0 A_PlaySound("quake4/NetworkGuard/RocketShot",5)
		TNT1 A 0 A_CustomMissile("Q4NGSkyRocket",70,15,0)
		Q14C DEF 6
		Goto See
	BigRocket:
		Q14E ABCCCCC 5 A_FaceTarget
		TNT1 A 0 A_CustomMissile("NetGuardBigRocket",50,-20,0)
		Q14E CBA 5
		Goto See


	FlyStart:
		Q14N A 9
		TNT1 A 0 A_PlaySound("quake4/NetworkGuard/WingOpen",5)
		Q14N B 9
		TNT1 A 0 A_PlaySound("quake4/NetworkGuard/WingOpen",5)
		Q14N C 9
		TNT1 A 0 A_PlaySound("quake4/NetworkGuard/FlyLoop",6,1,1)
		Q14N D 9
		TNT1 A 0 A_ChangeFlag("NOGRAVITY",1)
		TNT1 A 0 A_ChangeFlag("FLOAT",1)
		TNT1 A 0 A_ChangeFlag("FLOATBOB",1)
		TNT1 A 0 A_GiveInventory("ImFlyingWeeee",1)
		Q14N E 15 ThrustThingZ(0,20,0,1)
		TNT1 A 0 A_FaceTarget	//to have it look at you when the chasing begins
		Goto SeeFly
	SeeFly:
		TNT1 A 0 A_Stop
		Q14X ABCDCBA 5 A_Chase(0,"FlyingMissile")
		Loop
	FlyingMissile:
		Q14F AB 7 A_FaceTarget
		TNT1 a 0 A_PlaySound("quake4/NetworkGuard/RocketShot",6)
		TNT1 AAAAA 0 A_CustomMissile("NetworkGuardRocketSmall",55,20,random(2,-2))
		Q14F CCCCCCC 5 A_FaceTarget		
		TNT1 A 0 A_CustomMissile("NetGuardBigRocket",55,-20,0)
		Q14F DE 5 A_FaceTarget
		Goto SeeFly



		Q14O ABCDE 4
		Goto See		
	Pain:
		TNT1 A 0 A_JumpIfInventory("ImFlyingWeeee",1,"PainFly")
		Q14P A 7 A_Pain
		Goto See
	PainFly:
		Q14X A 7 A_Pain
		Goto SeeFly
	Death:
		TNT1 A 0 A_UnsetSolid
		TNT1 A 0 A_StopSound(6)	//stop flying sound
		TNT1 A 0 A_ChangeFlag("FLOATBOB",0)
		TNT1 A 0 A_Scream
		Q14D A 0 A_Fall
		Q14D ABCD 4
		"####" E 4 A_JumpIf(z <= floorz || abs(velz) <= 0,"Crash")
		Wait
	Crash:
		"####" "#" 0 A_JumpIfInventory("DisintegrateToken",1,"DisintegrateCont")
		Q14D F 1 A_StopSound(6)
		Q14D F 2 A_PlaySound("halflife/monsters/gonarch/step",6)
		"####" "#" 0 A_QueueCorpse
		"####" "#" 0 A_ChangeFlag("CORPSE",1)
		Q14D G -1 A_KillMaster("Massacre",KILS_FOILINVUL,"None","AEoDSpawner")
		Stop
	Death.UnholyDisint:
	Death.PlasmaDisint:
	Disintegrate:
		"####" "#" 0 A_GiveInventory("DisintegrateToken",1)
	DisintegrateCont:
		"####" "#" 0 Thing_SetTranslation(0,50)
		"####" "#" 0 A_StopSound(6)
		"####" "#" 0 A_KillMaster("Massacre",KILS_FOILINVUL,"None","AEoDSpawner")
		"####" "#" 1 A_FadeOut(0.015)
		"####" "#" 0 A_ChangeFlag("NOINTERACTION",1)
		"####" "#" 0 A_Stop    
		"####" "#" 0 A_Fall
		"####" "#" 0 A_SpawnItemEx("DisintegrateShadowBig",0,0,50,0,0,0,0,SXF_NOCHECKPOSITION)
		"####" "#" 0 A_SpawnItemEx("DisintegrateSparksBig",0,0,50,0,0,0,0,SXF_NOCHECKPOSITION)
		"####" "##" 2 A_FadeOut(0.03)
		Goto DisintegrateCont+8
	}
}

Actor ImFlyingWeeee : Inventory
{ Inventory.MaxAmount 1 }
//************************************************************
Actor NetGuardBigRocket
{
	Projectile
	+RANDOMIZE
	+ROCKETTRAIL
	+FORCERADIUSDMG
	+EXTREMEDEATH
	Radius 12
	Height 12
	Speed 16 
	+SEEKERMISSILE
	Damage 50
	SeeSound "quake4/Weapons/RocketLauncher/Fire"
	DeathSound "quake4/Misc/Explo"
	Translation "208:223=192:197", "232:235=200:204", "176:191=192:207", "48:63=192:194"
	Scale 0.7
	States
	{
	Spawn:
		TNT1 A 0 
		TNT1 A 0 A_SpawnItemEx("Q4BigRocketTrail",-4,0,3,0,0,0,0,SXF_NOCHECKPOSITION)
		QROK A 1 Light("WhiteMediumFlicker2") Bright A_SeekerMissile(9,9)	TNT1 AA 0 A_SpawnItemEx("QuakeGrenSmokeTrail",random(-1,-4),random(4,-4),random(4,-4),0,0,frandom(0.5,1.0),0,SXF_NOCHECKPOSITION)
		TNT1 A 0 A_SpawnItemEx("Q4BigRocketTrail",-4,0,3,0,0,0,0,SXF_NOCHECKPOSITION)
		QROK A 1 Light("WhiteMediumFlicker2") Bright A_SeekerMissile(9,9)	TNT1 AA 0 A_SpawnItemEx("QuakeGrenSmokeTrail",random(-1,-4),random(4,-4),random(4,-4),0,0,frandom(0.5,1.0),0,SXF_NOCHECKPOSITION)
		TNT1 A 0 Bright A_PlaySoundEx("RLFLY","soundslot5",1)
		Loop
	Death:
		TNT1 A 0 A_Explode(200,300,0)
		TNT1 A 3 A_SpawnItemEx("MonExplosionBig",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		Stop
	}
}


//************************************************************
Actor NetworkGuardRocketSmall
{
	Projectile
	+RANDOMIZE
	+FORCERADIUSDMG
	+EXTREMEDEATH
	Radius 12
	Height 12
	Speed 16 
	+SEEKERMISSILE
	Damage 5
	SeeSound ""
	DeathSound "quake4/Misc/RocketExplo"
	Scale 0.18
	States
	{
	Spawn:
		TNT1 A 0 
		TNT1 A 0 ThrustThingZ(0,random(4,-4),0,1)
		QROK A 1 Bright A_SpawnItemEx("Quake4GrenSmallSmokeTrail",random(-1,-4),random(4,-4),random(4,-4),0,0,frandom(0.5,1.0),0,SXF_NOCHECKPOSITION)
		Wait
	Death:
		TNT1 A 0 A_Explode(40,64,0)
		TNT1 A 3 A_SpawnItemEx("NewExplosionSmallSimple",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		Stop
	}
}

//************************************************************
Actor Q4NGSkyRocket
{
	Projectile
	Speed 1
	Damage 10000 //oh, poor whoever is exactly above this guy...
	Radius 8
	Height 12
	+SKYEXPLODE
	Scale 0.5
	States
	{
	Spawn:
		TNT1 a 0 
		TNT1 A 0 ThrustThingZ(0,80,0,1)
		PWMA A 1 Bright A_SpawnItemEx("Q2RocketAltSmoke",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		Wait
	Death:
		TNT1 a 0 A_SpawnItemEx("MonExplosionMedium",0,0,-10,0,0,0,0,SXF_NOCHECKPOSITION)
		TNT1 A 1 A_CustomMissile("Q4NGSRocketSpawner",0,0,0)
		Stop
	}
}

ACTOR Q4SomethingHackish
{
    Radius 6
    Height 8
    Speed 1
    Damage 0
    +RIPPER	RipperLevel 1
    +DOOMBOUNCE
    Scale 1
    PROJECTILE
    RENDERSTYLE ADD
    ALPHA 0.6
    States
    {
    Spawn:
		TNT1 A 0 Bright
		TNT1 A 1 Bright A_SpawnItem("Q4NGSRocketSpawner",1,0,0)
		Stop
    }
}

ACTOR Q4NGSRocketSpawner
{
    Radius 1
    Height 1
    Speed 0
    +ISMONSTER
    +LOOKALLAROUND
    RENDERSTYLE NONE
    States
    {
    Spawn:
		SWRM A 1 A_Look
		Loop
    See:
	//	SWRM A 0 BRIGHT A_CustomMissile("Q4NGSRSmallExtension", 0, 8, -90)
		PLAY A 0 A_CustomMissile("Q4NGSRSmallExtension",0,0,0)
		PLAY A 0 A_CustomMissile("Q4NGSRSmallExtension",0,0,30)
		PLAY A 0 A_CustomMissile("Q4NGSRSmallExtension",0,0,60)
		PLAY A 0 A_CustomMissile("Q4NGSRSmallExtension",0,0,90)
		PLAY A 0 A_CustomMissile("Q4NGSRSmallExtension",0,0,120)
		PLAY A 0 A_CustomMissile("Q4NGSRSmallExtension",0,0,150)
		PLAY A 0 A_CustomMissile("Q4NGSRSmallExtension",0,0,180)
		PLAY A 0 A_CustomMissile("Q4NGSRSmallExtension",0,0,-30)
		PLAY A 0 A_CustomMissile("Q4NGSRSmallExtension",0,0,-60)
		PLAY A 0 A_CustomMissile("Q4NGSRSmallExtension",0,0,-90)
		PLAY A 0 A_CustomMissile("Q4NGSRSmallExtension",0,0,-120)
		PLAY A 0 A_CustomMissile("Q4NGSRSmallExtension",0,0,-150)
		SWRM A 999
		Stop
    }
}


Actor Q4NGSRSmallExtension 
{
	Projectile
	+FORCERADIUSDMG
	+EXTREMEDEATH
	+SEEKERMISSILE
	Radius 12
	Height 12
	Speed 13
	Damage 5
	SeeSound ""
	DeathSound "quake4/Misc/RocketExplo"
	Scale 0.18
	States
	{
	Spawn:
		QROK A 0 
		QROK A 0 A_SpawnItemEx("Quake4GrenSmallSmokeTrail",random(-1,-4),random(4,-4),random(4,-4),0,0,frandom(0.5,1.0),0,SXF_NOCHECKPOSITION)
		QROK A 2 A_SeekerMissile(10,11,0,0,0)
		Loop
	Death:
		TNT1 A 0 A_Explode(40,64,1)
		TNT1 A 3 A_SpawnItemEx("NewExplosionSmallSimple",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		Stop
	}
}



//=====================================================================================
//=====================================================================================
//
//=====================================================================================
//=====================================================================================

Actor Q4RepairBot		//lost soul
{
	DropItem "CellAmmo"
	DropItem "PowerslaveSpawner" 28
	DropItem "PowerupSpawner" 8
	Monster	+DONTCORPSE	RipLevelMin 1
	Radius 16
	Height 40
	Mass 500
	Health 100
	PainChance 64
	Speed 11
	Scale 0.4
	+NOGRAVITY
	+FLOAT
	+FLOATBOB
	+NOBLOOD
	+FLOORCLIP
	MeleeDamage 2
	Damage 6
	SeeSound "quake4/Repairbot/Sight"
	PainSound ""
	DeathSound "quake4/Repairbot/Death"
	ActiveSound ""
	PainChance "Charm", 255
	PainChance "Terror", 255
	PainChance "Defile", 0  //sorry, no defile for this one
	PainChance "Drain", 160
	PainChance "Chaos", 255
	PainChance "ChaosExpl1", 255
	PainChance "ChaosExpl2", 255
//Mechanic
	DamageFactor "Fire", 1.5
	DamageFactor "Ice", 0.75
	DamageFactor "Electric", 2.0
	DamageFactor "AEPoison", 0.5
	DamageFactor "AEBullet", 0.75
	DamageFactor "AEMagic", 0.75
 	DamageFactor "Plasma", 1.5
 	DamageFactor "PlasmaDisint", 1.5
	States
	{
	Pain.Charm:
		TNT1 A 0
		TNT1 A 0 A_ChangeFlag("FRIENDLY",1)
		Goto See
    Pain.Terror:
		TNT1 A 0
		TNT1 A 0 A_ChangeFlag("FRIGHTENED",1)
		Goto See
    Pain.Drain:
		TNT1 A 0
		TNT1 A 0 A_SpawnItemEx("DrainGiver",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION,0)
		Goto Pain
    Pain.Defile:
		TNT1 A 0
		TNT1 A 0 A_GiveInventory("DefileCheck",1)
		Goto See 


	
	Spawn:
		Q15W A 0
		TNT1 a 0 A_PlaySound("quake4/Repairbot/FlyLoop",5,0.5,1)
		Q15W A 5 A_Look
		Loop
	See:
		Q15D A 0 A_ChangeFlag("FLOATBOB",1)
		Q15W A 3 A_Chase
		TNT1 A 0 //A_JumpIfInventory("DefileCheck",1,"DefileDecide")
		Loop
	Melee:
		Q15A ABC 2 A_FaceTarget
		TNT1 A 0 A_MeleeAttack
		Q15A DCBA 2
		Goto See
	Missile:
		Q15D A 0 A_ChangeFlag("FLOATBOB",0)
		Q15W B 5 A_FaceTarget
		Q15W B 4 A_SkullAttack(25)
		Q15W B 4 
		Wait
	Pain:
		Q15W A 3
		Goto See
	Death:		
		TNT1 A 0 A_UnsetSolid
		Q15D A 0 A_StopSound(5)
		Q15D A 0 A_ChangeFlag("FLOATBOB",0)
		TNT1 A 0 A_Scream
		Q15D A 0 A_Fall
		Q15D ABCDEF 4
		"####" "#" 0 A_ChangeFlag("CORPSE",1)
		Q15D G -1
		Stop
	Raise:
		Q15D FEDCBA 3
		Goto See
	Death.UnholyDisint:
	Death.PlasmaDisint:
	Disintegrate:
		"####" "#" 0 Thing_SetTranslation(0,50)
		"####" "#" 1 A_FadeOut(0.015)
		"####" "#" 0 A_ChangeFlag("NOINTERACTION",1)
		"####" "#" 0 A_Stop    
		"####" "#" 0 A_Fall
		"####" "#" 0 A_SpawnItemEx("DisintegrateShadowSmallMedium",0,0,18,0,0,0,0,SXF_NOCHECKPOSITION)
		"####" "#" 0 A_SpawnItemEx("DisintegrateSparksSmallMedium",0,0,18,0,0,0,0,SXF_NOCHECKPOSITION)
		"####" "##" 2 A_FadeOut(0.03)
		Goto Disintegrate+6
	}
}
//=====================================================================================
//=====================================================================================
//
//=====================================================================================
//=====================================================================================
Actor Q4Scientist		//Cacodemon
{
	DropItem "AEoDBiorifleItem" 32
	DropItem "CellAmmo"
	DropItem "HealthHeart" 210
	DropItem "PowerslaveSpawner" 28
	DropItem "PowerupSpawner" 8
	Monster	+DONTCORPSE	RipLevelMin 1
	Radius 16
	Height 56
	Mass 500
	Health 400
	+NOGRAVITY
	+FLOAT
	+FLOATBOB
	+FLOORCLIP
	PainChance 90
	Speed 11
	Scale 0.45
	MeleeDamage 1
	SeeSound "quake4/Scientist/Voice"
	PainSound "quake4/Scientist/Pain"
	DeathSound ""
	ActiveSound "quake4/Scientist/Voice"
	MaxTargetRange 720
	PainChance "Charm", 255
	PainChance "Terror", 255
	PainChance "Defile", 255
	PainChance "Drain", 128
	PainChance "Chaos", 255
	PainChance "ChaosExpl1", 255
	PainChance "ChaosExpl2", 255
//Flesh
	DamageFactor "Electric", 1.5
	DamageFactor "AEPoison", 1.5
	DamageFactor "AEBullet", 2.0
	States
	{
	Pain.Charm:
		TNT1 A 0
		TNT1 A 0 A_ChangeFlag("FRIENDLY",1)
		Goto See
    Pain.Terror:
		TNT1 A 0
		TNT1 A 0 A_ChangeFlag("FRIGHTENED",1)
		Goto See
    Pain.Drain:
		TNT1 A 0
		TNT1 A 0 A_SpawnItemEx("DrainGiver",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION,0)
		Goto Pain
    Pain.Defile:
		TNT1 A 0
		TNT1 A 0 A_GiveInventory("DefileCheck",1)
		Goto See 

	
	
	Spawn:
		Q16I A 5 A_Look
		Loop
	See:
		Q16W AABBCCDD 3 A_Chase
		TNT1 A 0 //A_JumpIfInventory("DefileCheck",1,"DefileDecide")
		Loop
	Missile:
		Q16A AABC 4 A_FaceTarget
		TNT1 a 0 A_CustomMissile("ScientistGasGrenade",25,0,0)
		Q16A DE 4
		Goto See
	Melee:
		Q16M AB 4 A_FaceTarget
		Q16M C 4 A_CustomMeleeAttack(random(20,40),"quake4/Misc/MeleeHit","quake4/Scientist/SawBladeSwing","Normal",1)
		Q16M DE 4 A_FaceTarget
		Q16M F 4 A_CustomMeleeAttack(random(20,40),"quake4/Misc/MeleeHit","quake4/Scientist/SawBladeSwing","Normal",1)
		Goto See
	Pain: 
		Q16P A 7 A_Pain
		Goto See
	Death:
	XDeath:
		TNT1 A 0 A_UnsetSolid
		TNT1 A 0 //A_JumpIfInventory("DefileCheck",1,"DefileDeath")
		XTRA C 0 A_PlaySound("quake4/Misc/Explo")
		TNT1 A 0 A_SpawnItemEx("MonExplosionMedium",0,0,20,0,0,0,0,SXF_NOCHECKPOSITION)
		TNT1 A 0 A_SpawnItemEx("BloodGibDropper",0,0,random(20,40),0,0,0,0)
		TNT1 AAAAAAA 0 A_SpawnItemEx("Junk",0,0,0,random(-7,7),random(-7,7),random(1,14),random(1,359),SXF_TRANSFERTRANSLATION)
		TNT1 A 1 A_Fall
		Stop
	DefileDeath:
		TNT1 A 0 A_Die
		TNT1 A 0 A_SpawnItemEx("RedMiteSpawner",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION,0)
		Goto XDeath+1
	Death.UnholyDisint:
	Death.PlasmaDisint:
	Disintegrate:
		"####" "#" 0 Thing_SetTranslation(0,50)
		"####" "#" 1 A_FadeOut(0.015)
		"####" "#" 0 A_ChangeFlag("NOINTERACTION",1)
		"####" "#" 0 A_Stop    
		"####" "#" 0 A_Fall
		"####" "#" 0 A_SpawnItemEx("DisintegrateShadowMedium",0,0,30,0,0,0,0,SXF_NOCHECKPOSITION)
		"####" "#" 0 A_SpawnItemEx("DisintegrateSparksMedium",0,0,30,0,0,0,0,SXF_NOCHECKPOSITION)
		"####" "##" 2 A_FadeOut(0.03)
		Goto Disintegrate+6
	}
}

Actor ScientistGasGrenade
{
	Projectile
	Speed 35
	Damage 8
	PoisonDamage 50
	Radius 8
	Height 12
	-NOGRAVITY
	Gravity 0.1
	RenderStyle Add
	Translation "0:255=%[0,0.25,0]:[0,1.0,0]"
	Scale 0.4
	DeathSound "quake4/Scientist/ChemicalGrenadeCrash"
	States
	{
	Spawn:
		MAN3 EEEFFF 1 A_SpawnItemEx("SciGasGrenTrail",0,random(2,-2),random(0,2),0,0,frandom(0.2,0.6),0,SXF_NOCHECKPOSITION)
		Loop
	Death:
		TNT1 AAAAAAAAAAAAA 0 A_SpawnItemEx("STroopGrenExploGas",0,0,0,random(1,-1),random(1,-1),random(0,2),0,0)
		TNT1 AAAAAAAAA 0 A_SpawnItemEx("BSSpitExtra",0,0,0,random(1,-1),random(1,-1),random(0,4),0,0)
		TNT1 A 4 A_CustomMissile("STroopGrenExplo",0,0,0)
		Stop
	}
}
Actor SciGasGrenTrail
{
	+NOINTERACTION
    RenderStyle Add
    Alpha 0.75
    Scale 0.3
    States
    {
    Spawn:
	X030 ABCDE 3
	TNT1 A 0 A_Jump(128,2)
	Loop
	X030 ABCDE 3 A_FadeOut(0.1)
	Stop
    }
}


//=====================================================================================
//=====================================================================================
//
//=====================================================================================
//=====================================================================================
Actor Q4Sentry		//caco
{
	DropItem "BulletAmmo"
	DropItem "HealthHeart" 210
	DropItem "PowerslaveSpawner" 28
	DropItem "PowerupSpawner" 8
	Monster	+DONTCORPSE	RipLevelMin 1
	Radius 16
	Height 56
	Mass 600
	Health 300
	+NOBLOOD
	+NOGRAVITY
	+FLOAT
	+FLOORCLIP
	PainChance 64
	Speed 11
	Scale 0.315
	SeeSound "quake4/Sentry/Voice"
	PainSound "quake4/Sentry/Pain"
	DeathSound "quake4/Sentry/Death"
	ActiveSound "quake4/Sentry/Voice"
	AttackSound "quake4/Sentry/Machinegun"
	PainChance "Charm", 255
	PainChance "Terror", 255
	PainChance "Defile", 255
	PainChance "Drain", 128
	PainChance "Chaos", 255
	PainChance "ChaosExpl1", 255
	PainChance "ChaosExpl2", 255
//Mechanic
	DamageFactor "Fire", 1.5
	DamageFactor "Ice", 0.75
	DamageFactor "Electric", 2.0
	DamageFactor "AEPoison", 0.5
	DamageFactor "AEBullet", 0.75
	DamageFactor "AEMagic", 0.75
 	DamageFactor "Plasma", 1.5
 	DamageFactor "PlasmaDisint", 1.5
	States
	{
	Pain.Charm:
		TNT1 A 0
		TNT1 A 0 A_ChangeFlag("FRIENDLY",1)
		Goto See
    Pain.Terror:
		TNT1 A 0
		TNT1 A 0 A_ChangeFlag("FRIGHTENED",1)
		Goto See
    Pain.Drain:
		TNT1 A 0
		TNT1 A 0 A_SpawnItemEx("DrainGiver",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION,0)
		Goto Pain
    Pain.Defile:
		TNT1 A 0
		TNT1 A 0 A_GiveInventory("DefileCheck",1)
		Goto See 

	
	
	Spawn:
		Q17I A 5 A_Look
		Loop
	See:
		Q17I A 3 A_Chase
		TNT1 A 0 //A_JumpIfInventory("DefileCheck",1,"DefileDecide")
		Loop
	Missile:
		Q17A A 0 A_FaceTarget(0,0)
		TNT1 A 0 A_SpawnItemEx("MonMuzzleFlashSmall",15,9,33,0,0,0,0,SXF_NOCHECKPOSITION)
		"----" A 0 A_CustomMissile("BulletTracerFX",33,9,random(-3,3),CMF_OFFSETPITCH,random(-3,3))
		Q17A A 2 A_CustomBulletAttack(7,7,1,4)
		Q17A B 2
		"----" A 0 A_CustomMissile("BulletTracerFX",33,9,random(-3,3),CMF_OFFSETPITCH,random(-3,3))
		TNT1 A 0 A_SpawnItemEx("MonMuzzleFlashSmall",15,-9,33,0,0,0,0,SXF_NOCHECKPOSITION)
		Q17A C 2 A_CustomBulletAttack(7,7,1,4)
		Q17A D 2
		TNT1 a 0 A_Jump(16,"See")
		TNT1 a 0 A_CposRefire
		Loop
	Pain: 
		Q17I A 6 A_Pain
		Goto See
	Death:
		TNT1 A 0 A_UnsetSolid
		TNT1 A 0 //A_JumpIfInventory("DefileCheck",1,"DefileDeath")
		TNT1 a 0 A_Scream
		Q17D AB 4
		"####" "#" 4 A_JumpIf(z <= floorz || abs(velz) <= 0,"Crash")
		Wait
	Crash:
		"####" "#" 0 A_JumpIfInventory("DisintegrateToken",1,"DisintegrateCont")
		TNT1 A 0 A_Fall
		TNT1 A 0 A_PlaySound("quake4/Misc/Body/Metal")
		Q17D CDE 4
		"####" "#" 0 A_ChangeFlag("CORPSE",1)
		Q17D F -1
		Stop
	DefileDeath:
		TNT1 A 0 A_Die
		TNT1 A 0 A_SpawnItemEx("RedMiteSpawner",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION,0)
		Goto XDeath+1
	Raise:
		Q17D EDCBA 3
		Goto See
	Xdeath:
		XTRA C 0 A_PlaySound("quake4/Misc/Explo")
		TNT1 A 0 A_SpawnItemEx("MonExplosionMedium",0,0,20,0,0,0,0,SXF_NOCHECKPOSITION)
		TNT1 A 0 A_SpawnItemEx("BloodGibDropper",0,0,random(20,40),0,0,0,0)
		TNT1 AAAAAAAAAAAA 0 A_SpawnItemEx("Junk",0,0,0,random(-7,7),random(-7,7),random(1,14),random(1,359),SXF_TRANSFERTRANSLATION)
		TNT1 A 1 A_Fall
		Stop
	Death.UnholyDisint:
	Death.PlasmaDisint:
	Disintegrate:
		"####" "#" 0 A_GiveInventory("DisintegrateToken",1)
	DisintegrateCont:
		"####" "#" 0 Thing_SetTranslation(0,50)
		"####" "#" 1 A_FadeOut(0.015)
		"####" "#" 0 A_ChangeFlag("NOINTERACTION",1)
		"####" "#" 0 A_Stop    
		"####" "#" 0 A_Fall
		"####" "#" 0 A_SpawnItemEx("DisintegrateShadowMedium",0,0,30,0,0,0,0,SXF_NOCHECKPOSITION)
		"####" "#" 0 A_SpawnItemEx("DisintegrateSparksMedium",0,0,30,0,0,0,0,SXF_NOCHECKPOSITION)
		"####" "##" 2 A_FadeOut(0.03)
		Goto DisintegrateCont+6	
	}
}

//=====================================================================================
//=====================================================================================
//
//=====================================================================================
//=====================================================================================
Actor Q4SlimyTransfer		//Imp
{
	DropItem "HealthHeart" 210
	DropItem "PowerslaveSpawner" 70
	DropItem "PowerupSpawner" 8
	Monster	+DONTCORPSE	RipLevelMin 1
	Radius 16
	Height 56
	Mass 100
	Health 80
	PainChance 128
	Speed 11
	Scale 0.375
	MeleeDamage 1
	+FLOORCLIP
	SeeSound "quake4/SlimyTrans/See"
	PainSound "quake4/SlimyTrans/Pain"
	DeathSound "quake4/SlimyTrans/Death"
	ActiveSound "quake4/SlimyTrans/Idle"
	PainChance "Charm", 255
	PainChance "Terror", 255
	PainChance "Defile", 255
	PainChance "Drain", 160
	PainChance "Chaos", 255
	PainChance "ChaosExpl1", 255
	PainChance "ChaosExpl2", 255
//Flesh
	DamageFactor "Electric", 1.5
	DamageFactor "AEPoison", 1.5
	DamageFactor "AEBullet", 2.0
	States
	{
	Pain.Charm:
		TNT1 A 0
		TNT1 A 0 A_ChangeFlag("FRIENDLY",1)
		Goto See
    Pain.Terror:
		TNT1 A 0
		TNT1 A 0 A_ChangeFlag("FRIGHTENED",1)
		Goto See
    Pain.Drain:
		TNT1 A 0
		TNT1 A 0 A_SpawnItemEx("DrainGiver",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION,0)
		Goto Pain
    Pain.Defile:
		TNT1 A 0
		TNT1 A 0 A_GiveInventory("DefileCheck",1)
		Goto See 


	Spawn:
		Q18I A 5 A_Look
		Loop
	See:
		Q18W ABCDEFGH 4 A_Chase
		TNT1 A 0 //A_JumpIfInventory("DefileCheck",1,"DefileDecide")
		Loop
	Melee:
		Q18M AABBC 3 A_FaceTarget
		TNT1 A 0 A_CustomMeleeAttack(random(10,30),"quake4/Misc/MeleeHit","quake4/Misc/Swing","Normal",1)
		Q18M D 7
		Q18M EF 5
		Goto See
	Missile:
		TNT1 A 0 A_PlaySound("quake4/SlimyTrans/Vomiting",6)
		TNT1 A 0 A_JumpIfCloser(190,"StreamofVomit")	
		Q18A ABBB 4 A_FaceTarget
		TNT1 A 0 A_CustomMissile("SlimyTransfPuke1",34,3,0)
		Q18A CCDD 4
		Goto See
	StreamofVomit:		//attractive names :D
		Q18A ABBB 4 A_FaceTarget
		TNT1 A 0 A_FaceTarget
		Q18A CC 2 A_CustomMissile("SlimyTransfPuke2",34,3,random(5,-5))
		TNT1 A 0 A_FaceTarget
		Q18A CC 2 A_CustomMissile("SlimyTransfPuke2",34,3,random(5,-5))
		TNT1 A 0 A_FaceTarget
		Q18A CC 2 A_CustomMissile("SlimyTransfPuke2",34,3,random(5,-5))
		TNT1 A 0 A_FaceTarget
		Q18A CC 2 A_CustomMissile("SlimyTransfPuke2",34,3,random(5,-5))
		TNT1 A 0 A_FaceTarget
		Q18A CC 2 A_CustomMissile("SlimyTransfPuke2",34,3,random(5,-5))
		TNT1 A 0 A_FaceTarget
		Q18A CC 2 A_CustomMissile("SlimyTransfPuke2",34,3,random(5,-5))
		Q18A DD 4
		Goto See
	Pain: 
		Q18P A 8 A_Pain
		Goto See
	Death:
		TNT1 A 0 A_UnsetSolid
		TNT1 A 0 //A_JumpIfInventory("DefileCheck",1,"DefileDeath")
		Q18D A 0 A_Scream
		Q18D A 0 A_Fall
		Q18D AC 4
		TNT1 A 0 A_PlaySound("quake4/Misc/Body/Small",5)
		Q18D EG 4
		"####" "#" 0 A_ChangeFlag("CORPSE",1)
		Q18D I -1
		Stop
	Raise:
		Q18D IHGFEDCBA 4
		Goto See
	XDeath:
		TNT1 A 0 //A_JumpIfInventory("DefileCheck",1,"DefileDeath")
		TNT1 A 0 A_Jump(256,"XDeathBlood")
		TNT1 AAAAAA 0 A_TossGib
		Goto Death
	XDeathBlood:
		TNT1 A 0 A_PlaySound("other/gibdeath")
		TNT1 A 0 A_SpawnItemEx("BloodGibDropper",0,0,random(20,40),0,0,0,0)
		TNT1 A 1 A_Fall
		Stop
	DefileDeath:
		TNT1 A 0 A_Die
		TNT1 A 0 A_SpawnItemEx("RedMiteSpawner",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION,0)
		Goto XDeath+1
		
	Death.UnholyDisint:
	Death.PlasmaDisint:
	Disintegrate:
		"####" "#" 0 Thing_SetTranslation(0,50)
		"####" "#" 1 A_FadeOut(0.015)
		"####" "#" 0 A_ChangeFlag("NOINTERACTION",1)
		"####" "#" 0 A_Stop    
		"####" "#" 0 A_Fall
		"####" "#" 0 A_SpawnItemEx("DisintegrateShadowMedium",0,0,30,0,0,0,0,SXF_NOCHECKPOSITION)
		"####" "#" 0 A_SpawnItemEx("DisintegrateSparksMedium",0,0,30,0,0,0,0,SXF_NOCHECKPOSITION)
		"####" "##" 2 A_FadeOut(0.03)
		Goto Disintegrate+6
	}
}
actor SlimyTransfPuke1
{
	Mass 1
	Radius 8
	Height 6
	Speed 20
	Damage 5
	Scale 0.2
	PROJECTILE
	DamageType "AEPoison"
	PoisonDamage 10
	DeathSound "quake4/SlimyTrans/VomitSplash"
	States
	{
	Spawn:
		VOM2 ABCDEF 4 Bright
		Loop
	Death:
		TNT1 AAAAAA 0 A_SpawnItemEx("BSSpitExtra",0,0,4,random(1,-1),random(1,-1),random(0,2),0,0)
		VOM2 A 1 A_FadeOut
		Wait
	}
}

actor SlimyTransfPuke2
{
	Mass 1
	Radius 8
	Height 6
	Speed 15
	Damage 3
	Scale 0.15
	PROJECTILE
	-NOGRAVITY
//	Gravity 0.67
	DamageType "AEPoison"
	PoisonDamage 5
	DeathSound "quake4/SlimyTrans/VomitSplash"
	States
	{
	Spawn:
		VOM2 ABCDEF 4 Bright
		Loop
	Death:
		TNT1 AAAA 0 A_SpawnItemEx("BSSpitExtra",0,0,4,random(1,-1),random(1,-1),random(0,2),0,0)
		VOM2 A 1 A_FadeOut
		Wait
	}
}





//=====================================================================================
//=====================================================================================
//
//=====================================================================================
//=====================================================================================
Actor Q4StreamProtector		//spidermaster (FUCKING OFFSETS!! I HATE THEM NOW D:< )
{
	DropItem "AEoDPKSMGItem" 64
	DropItem "CellBigAmmo"
	DropItem "CellBigAmmo"
	DropItem "CellBigAmmo"
	DropItem "ExploBigAmmo"
	DropItem "ExploBigAmmo"
	DropItem "ExploBigAmmo"
	DropItem "PowerslaveSpawner" 28
	DropItem "PowerupSpawner" 
	Monster	+DONTCORPSE	RipLevelMin 1
	Radius 60
	Height 70
	Mass 7000
	Health 5000
	PainChance 32
	Speed 11
	Scale 0.7
	MeleeRange 80
	+BOSS
	+NORADIUSDMG
	+NOBLOOD
	+NOICEDEATH
	+FLOORCLIP
	SeeSound "quake4/StreamProt/Sight"
	PainSound "quake4/StreamProt/Pain"
	DeathSound "quake4/StreamProt/Death"
	ActiveSound "quake4/StreamProt/Idle"
	PainChance "Drain", 40
	PainChance "Chaos", 255
	DamageFactor "ChaosExpl1", 0
	DamageFactor "ChaosExpl2", 0
//Mechanic
	DamageFactor "Fire", 1.5
	DamageFactor "Ice", 0.75
	DamageFactor "Electric", 2.0
	DamageFactor "AEPoison", 0.5
	DamageFactor "AEBullet", 0.75
	DamageFactor "AEMagic", 0.75
 	DamageFactor "Plasma", 1.5
 	DamageFactor "PlasmaDisint", 1.5
	States
	{
	Pain.Drain:
		TNT1 A 0
		TNT1 A 0 A_SpawnItemEx("DrainGiver",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION,0)
		Goto Pain


	
	Spawn:
		Q19I A 5 A_Look
		Loop
	See:
		Q19W AB 4 A_Chase
		TNT1 A 0 A_PlaySound("quake4/StreamProt/Step",5,0.5)
		Q19W CD 4 A_Chase
		TNT1 A 0 A_PlaySound("quake4/StreamProt/Step",6,0.5)
		Q19W EF 4 A_Chase
		TNT1 A 0 A_PlaySound("quake4/StreamProt/Step",5,0.5)
		Q19W GHI 4 A_Chase
		TNT1 A 0 A_PlaySound("quake4/StreamProt/Step",6,0.5)
		Loop
	Melee:
		Q19M ABBC 4 A_FaceTarget
		TNT1 a 0 A_PlaySound("quake4/StreamProt/GroundHit")
		TNT1 a 0 A_CustomMeleeAttack(random(10,30),"quake4/Misc/MeleeHit","quake4/Misc/Swing","Normal",1)
		Q19M DE 5
		Goto See
	Missile:
		TNT1 A 0 A_JumpIfCloser(512,"FlameDecide")
		TNT1 A 0 A_Jump(256,"BlasterBig","BlasterSmall","Rockets")
	FlameDecide:
		TNT1 A 0 A_Jump(80,"FlameThrowerStart")
		Goto Missile+1

	FlameThrowerStart:
		Q19I A 3 A_FaceTarget	
		Q19A A 3 A_FaceTarget
		TNT1 A 0 A_PlaySound("quake4/LtTank/FlameStart",6)
		Q19A BC 3 A_FaceTarget
		TNT1 A 0 A_PlaySound("quake4/LtTank/FlameLoop",5,1,1)
		TNT1 A 0 A_FaceTarget
		Q19A D 3 A_CustomMissile("FTFireMon",44,16,0)
		TNT1 A 0 A_Jump(15,"BlasterBigEnd")	//is the same animation
		TNT1 a 0 A_MonsterRefire(0,"BlasterBigEnd")
		Goto FlameThrowerStart+6

	BlasterBig:
		Q19I A 3 A_FaceTarget	
		Q19A ABC 3 A_FaceTarget
		TNT1 A 0 A_PlaySound("quake4/Gladiator/BlasterShot",6)
		Q19A D 7 A_CustomMissile("Q4StrmProtBlasterShot",44,16,0)
		TNT1 A 0 A_Jump(24,"BlasterBigEnd")
		TNT1 a 0 A_MonsterRefire(0,"BlasterBigEnd")
		Goto BlasterBig+3
	BlasterBigEnd:
		TNT1 A 0 A_StopSound(5)
		Q19A CBA 5
		Goto See

	BlasterSmall:
		Q19I A 5 A_FaceTarget
		Q19C AABB 3 A_FaceTarget
		TNT1 A 0 A_PlaySound("quake4/StroggMarine/BlasterShot",6)
		TNT1 A 0 A_CustomMissile("Q4BlasterProjBoss",60,-6,0+random(4,-4))
		Q19C B 1 A_CustomMissile("Q4BlasterProjBoss",57,10,0+random(4,-4))
		TNT1 A 0 A_Jump(16,"BlasterSmallEnd")
		TNT1 a 0 A_MonsterRefire(0,"BlasterSmallEnd")
		Goto BlasterSmall+4
	BlasterSmallEnd:
		Q19C A 5
		Q19I A 10
		Goto See	

	Rockets:
		Q19E ABC 5 A_FaceTarget
		Q19E C 8 A_CustomMissile("StreamProtectorRocket",70,0,0)	TNT1 a 0 A_FaceTarget
		Q19E C 8 A_CustomMissile("StreamProtectorRocket",70,0,0)	TNT1 a 0 A_FaceTarget
		Q19E C 8 A_CustomMissile("StreamProtectorRocket",70,0,0)	TNT1 a 0 A_FaceTarget
		Q19E C 8 A_CustomMissile("StreamProtectorRocket",70,0,0)
		Q19E CBA 6
		Goto See

	Pain: 
		Q19P A 0 A_StopSound(5)
		Q19P A 8 A_Pain
		Goto See
	Death:
		TNT1 A 0 A_UnsetSolid
		Q19D A 0 A_StopSound(5)
		Q19D A 0 A_Scream
		Q19D ABCDEFGH 3
		Q19D A 0 A_Fall
		"####" "#" 0 A_QueueCorpse
		"####" "#" 0 A_ChangeFlag("CORPSE",1)
		Q19D I -1 A_KillMaster("Massacre",KILS_FOILINVUL,"None","AEoDSpawner")
		Stop 
	XDeath:
		Q19D A 0 A_StopSound(5)
		Q19D A 0 A_Scream
		Q19D ABCDE 3 A_SpawnItemEx("BossDeathExplosion",random(30,-30),random(30,-30),random(20,80),0,0,0,0,SXF_NOCHECKPOSITION)
		Q19D FGH 3
		Q19D A 0 A_Fall
		"####" "#" 0 A_QueueCorpse
		"####" "#" 0 A_ChangeFlag("CORPSE",1)
		Q19D I -1 A_KillMaster("Massacre",KILS_FOILINVUL,"None","AEoDSpawner")
		Stop
	Death.UnholyDisint:
	Death.PlasmaDisint:
	Disintegrate:
		"####" "#" 0 Thing_SetTranslation(0,50)
		"####" "#" 0 A_KillMaster("Massacre",KILS_FOILINVUL,"None","AEoDSpawner")
		"####" "#" 0 A_StopSound(5)
		"####" "#" 1 A_FadeOut(0.015)
		"####" "#" 0 A_ChangeFlag("NOINTERACTION",1)
		"####" "#" 0 A_Stop    
		"####" "#" 0 A_Fall
		"####" "#" 0 A_SpawnItemEx("DisintegrateShadowBig",0,0,45,0,0,0,0,SXF_NOCHECKPOSITION)
		"####" "#" 0 A_SpawnItemEx("DisintegrateSparksBig",0,0,45,0,0,0,0,SXF_NOCHECKPOSITION)
		"####" "##" 2 A_FadeOut(0.03)
		Goto Disintegrate+8
	}
}

Actor Q4BlasterProjBoss : Q4BlasterProjSmall
{
	Damage 8
}

//*******************************************************
Actor Q4StrmProtBlasterShot : Q4BlasterProjBig
{	Damage 20	}

//*******************************************************
Actor StreamProtectorRocket
{
	Projectile
	+RANDOMIZE
	+FORCERADIUSDMG
	+EXTREMEDEATH
	Radius 12
	Height 12
	Speed 16 
	+SEEKERMISSILE
	Damage 25
	SeeSound "quake4/NetworkGuard/RocketShot"
	DeathSound "quake4/Misc/RocketExplo"
	Scale 0.24
	States
	{
	Spawn:
		TNT1 A 0 
		TNT1 A 0 A_SpawnItemEx("QuakeGrenSmokeTrail",random(-1,-4),random(4,-4),random(4,-4),0,0,frandom(0.5,1.0),0,SXF_NOCHECKPOSITION)
		QROK A 2 A_SeekerMissile(5,5)
		Loop
	Death:
		TNT1 A 0 A_Explode(128,128,0)
		TNT1 A 0 A_CustomMissile("ExpQuakeSmall",0,0,0)
		TNT1 A 3 A_SpawnItemEx("MonExplosionMediumConcentrated",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		Stop
	}
}

//=====================================================================================
//=====================================================================================
//
//=====================================================================================
//=====================================================================================
Actor Q4StroggHover		//pain elemental
{
	DropItem "ExploBigAmmo" 128
	DropItem "ExploAmmo"
	DropItem "BulletBigAmmo"
	DropItem "PowerslaveSpawner" 28
	DropItem "PowerupSpawner" 8
	Monster	+DONTCORPSE	RipLevelMin 1
	Radius 30
	Height 56
	Mass 900
	Health 800
	PainChance 64
	Speed 11
	Scale 0.6
	+FLOAT
	+NOGRAVITY
	+MISSILEEVENMORE
	+NOBLOOD
	+FLOORCLIP
	MeleeDamage 1
	SeeSound ""
	PainSound ""
	DeathSound ""
	ActiveSound ""
	AttackSound "quake4/Sentry/Machinegun"
	PainChance "Charm", 192
	PainChance "Terror", 192
	PainChance "Defile", 0
	PainChance "Drain", 128
	PainChance "Chaos", 255
	PainChance "ChaosExpl1", 128
	PainChance "ChaosExpl2", 128
//Mechanic
	DamageFactor "Fire", 1.5
	DamageFactor "Ice", 0.75
	DamageFactor "Electric", 2.0
	DamageFactor "AEPoison", 0.5
	DamageFactor "AEBullet", 0.75
	DamageFactor "AEMagic", 0.75
 	DamageFactor "Plasma", 1.5
 	DamageFactor "PlasmaDisint", 1.5
	States
	{
	Pain.Charm:
		TNT1 A 0
		TNT1 A 0 A_ChangeFlag("FRIENDLY",1)
		Goto See
    Pain.Terror:
		TNT1 A 0
		TNT1 A 0 A_ChangeFlag("FRIGHTENED",1)
		Goto See
    Pain.Drain:
		TNT1 A 0
		TNT1 A 0 A_SpawnItemEx("DrainGiver",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION,0)
		Goto Pain
    Pain.Defile:
		TNT1 A 0
		TNT1 A 0 A_GiveInventory("DefileCheck",1)
		Goto See 


	
	Spawn:
		TNT1 A 0 
		TNT1 A 0 A_PlaySound("quake4/Flyer/FlyLoop",6,0.6,1)
		Q20W ABCDEFGH 4 A_Look
		Loop
	See:
		TNT1 A 0 A_Stop
		TNT1 A 0 A_Jump(160,"Strafe")
		Q20W ABCDEFGH 4 A_Chase
		Loop
	Strafe:
		TNT1 A 0 A_Jump(190,"StrafeLeft","StrafeRight")
	StrafeForward:
		TNT1 a 0 A_FaceTarget
		TNT1 A 0 A_ChangeVelocity(random(10,20),0,0,1)
		Goto See+2
	StrafeLeft:
		TNT1 a 0 A_FaceTarget
		TNT1 A 0 A_ChangeVelocity(0,random(20,30),0,1)
		Goto See+2
	StrafeRight:
		TNT1 a 0 A_FaceTarget
		TNT1 A 0 A_ChangeVelocity(0,random(-20,-30),0,1)
		Goto See+2

	Missile:
		TNT1 A 0 A_Jump(160,"Bullet")
		Goto Rocket
	Bullet:
		TNT1 A 0 A_FaceTarget(0,0)
		"----" A 0 A_CustomMissile("BulletTracerFX",15,24,random(-7,7),CMF_OFFSETPITCH,random(-7,7))
		TNT1 A 0 A_CustomBulletAttack(7,7,1,5)
		Q20W A 4 A_SpawnItemEx("MonMuzzleFlash",24,0,15,0,0,0,0,SXF_NOCHECKPOSITION) TNT1 A 0 A_FaceTarget
		"----" A 0 A_CustomMissile("BulletTracerFX",15,24,random(-7,7),CMF_OFFSETPITCH,random(-7,7))
		TNT1 A 0 A_CustomBulletAttack(7,7,1,5)
		Q20W B 4 A_SpawnItemEx("MonMuzzleFlash",24,0,15,0,0,0,0,SXF_NOCHECKPOSITION) TNT1 A 0 A_FaceTarget
		"----" A 0 A_CustomMissile("BulletTracerFX",15,24,random(-7,7),CMF_OFFSETPITCH,random(-7,7))
		TNT1 A 0 A_CustomBulletAttack(7,7,1,5)
		Q20W C 4 A_SpawnItemEx("MonMuzzleFlash",24,0,15,0,0,0,0,SXF_NOCHECKPOSITION) TNT1 A 0 A_FaceTarget
		"----" A 0 A_CustomMissile("BulletTracerFX",15,24,random(-7,7),CMF_OFFSETPITCH,random(-7,7))
		TNT1 A 0 A_CustomBulletAttack(7,7,1,5)
		Q20W D 4 A_SpawnItemEx("MonMuzzleFlash",24,0,15,0,0,0,0,SXF_NOCHECKPOSITION) TNT1 A 0 A_FaceTarget
		"----" A 0 A_CustomMissile("BulletTracerFX",15,24,random(-7,7),CMF_OFFSETPITCH,random(-7,7))
		TNT1 A 0 A_CustomBulletAttack(7,7,1,5)
		Q20W E 4 A_SpawnItemEx("MonMuzzleFlash",24,0,15,0,0,0,0,SXF_NOCHECKPOSITION) TNT1 A 0 A_FaceTarget
		"----" A 0 A_CustomMissile("BulletTracerFX",15,24,random(-7,7),CMF_OFFSETPITCH,random(-7,7))
		TNT1 A 0 A_CustomBulletAttack(7,7,1,5)
		Q20W F 4 A_SpawnItemEx("MonMuzzleFlash",24,0,15,0,0,0,0,SXF_NOCHECKPOSITION) TNT1 A 0 A_FaceTarget
		"----" A 0 A_CustomMissile("BulletTracerFX",15,24,random(-7,7),CMF_OFFSETPITCH,random(-7,7))
		TNT1 A 0 A_CustomBulletAttack(7,7,1,5)
		Q20W G 4 A_SpawnItemEx("MonMuzzleFlash",24,0,15,0,0,0,0,SXF_NOCHECKPOSITION) TNT1 A 0 A_FaceTarget
		"----" A 0 A_CustomMissile("BulletTracerFX",15,24,random(-7,7),CMF_OFFSETPITCH,random(-7,7))
		TNT1 A 0 A_CustomBulletAttack(7,7,1,5)
		Q20W H 4 A_SpawnItemEx("MonMuzzleFlash",24,0,15,0,0,0,0,SXF_NOCHECKPOSITION) TNT1 A 0 A_FaceTarget
		Goto See
	Rocket:
		Q20W ABC 4 A_FaceTarget
		TNT1 A 0 A_CustomMissile("StroggHoverRocket",15,0,0)
		Q20W DEF 4 A_FaceTarget
		TNT1 A 0 A_CustomMissile("StroggHoverRocket",15,0,0)
		Q20W GH 4 A_FaceTarget
		TNT1 A 0 A_CustomMissile("StroggHoverRocket",15,0,0)
		Goto See
	Pain: 
		Q20W A 4 
		Goto See
	Death:
		TNT1 A 0 A_UnsetSolid
		TNT1 A 0 A_StopSound(6)
		XTRA C 0 A_PlaySound("quake4/Misc/Explo")
		TNT1 A 0 A_SpawnItemEx("MonExplosionMediumBig",0,0,30,0,0,0,0,SXF_NOCHECKPOSITION)
		TNT1 AAAAAAAAAAAA 0 A_TossGib
		TNT1 AAAAAAAAAAAA 0 A_TossGib
		TNT1 AAAAAAAAAAAA 0 A_TossGib
		TNT1 AAAAAAAAAAAA 0 A_TossGib
		TNT1 A 1 A_Fall
		Stop
	Death.UnholyDisint:
	Death.PlasmaDisint:
	Disintegrate:
		"####" "#" 0 Thing_SetTranslation(0,50)
		"####" "#" 0 A_StopSound(6)
		"####" "#" 1 A_FadeOut(0.015)
		"####" "#" 0 A_ChangeFlag("NOINTERACTION",1)
		"####" "#" 0 A_Stop    
		"####" "#" 0 A_Fall
		"####" "#" 0 A_SpawnItemEx("DisintegrateShadowMediumBig",0,0,40,0,0,0,0,SXF_NOCHECKPOSITION)
		"####" "#" 0 A_SpawnItemEx("DisintegrateSparksMediumBig",0,0,40,0,0,0,0,SXF_NOCHECKPOSITION)
		"####" "##" 2 A_FadeOut(0.03)
		Goto Disintegrate+7
	}
}


Actor StroggHoverRocket : IronMaidenRocket 	//slower and weaker, since this guy attacks a lot more
{
	Speed 16	
	Damage 10
}


//=====================================================================================
//=====================================================================================
//
//=====================================================================================
//=====================================================================================
Actor Q4LightGuard		//zombieman
{
	DropItem "CellAmmo" 128
	DropItem "HealthHeart" 210
	DropItem "PowerSlaveSpawnerMonsterAmmo" 210
	DropItem "PowerupSpawner" 8
	Monster	+DONTCORPSE	RipLevelMin 1
	Radius 16
	Height 56
	Mass 400
	Health 40
	PainChance 200
	Speed 11
	Scale 0.43
	+FLOORCLIP
	SeeSound "quake4/StroggMarine/Sight"
	PainSound "quake4/StroggMarine/Pain"
	DeathSound "quake4/StroggMarine/Death"
	ActiveSound "quake4/StroggMarine/Idle"
	PainChance "Charm", 255
	PainChance "Terror", 255
	PainChance "Defile", 255
	PainChance "Drain", 160
	PainChance "Chaos", 255
	PainChance "ChaosExpl1", 255
	PainChance "ChaosExpl2", 255
//Armor
	DamageFactor "Electric", 1.5
	DamageFactor "Plasma", 0.75
	DamageFactor "PlasmaDisint", 0.75
	DamageFactor "AEBullet", 0.5
	States
	{
	Pain.Charm:
		TNT1 A 0
		TNT1 A 0 A_ChangeFlag("FRIENDLY",1)
		Goto See
    Pain.Terror:
		TNT1 A 0
		TNT1 A 0 A_ChangeFlag("FRIGHTENED",1)
		Goto See
    Pain.Drain:
		TNT1 A 0
		TNT1 A 0 A_SpawnItemEx("DrainGiver",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION,0)
		Goto Pain
    Pain.Defile:
		TNT1 A 0
		TNT1 A 0 A_GiveInventory("DefileCheck",1)
		Goto See 


	
	Spawn:
		Q21I A 4 A_Look
		Loop
	See:
		Q21W AABBCCDD 3 A_Chase
		TNT1 A 0 //A_JumpIfInventory("DefileCheck",1,"DefileDecide")
		Loop
	Missile:
		Q21A ABC 4 A_FaceTarget
		TNT1 a 0 A_PlaySound("quake4/StroggMarine/BlasterShot",6)
		Q21A D 4 A_CustomMissile("Q4BlasterProjSmallWeak",25,7,0+random(5,-5))
		Q21A C 4 A_FaceTarget
		TNT1 a 0 A_PlaySound("quake4/StroggMarine/BlasterShot",6)
		Q21A D 4 A_CustomMissile("Q4BlasterProjSmallWeak",25,7,0+random(5,-5))
		Q21A C 4 A_FaceTarget
		TNT1 a 0 A_PlaySound("quake4/StroggMarine/BlasterShot",6)
		Q21A D 4 A_CustomMissile("Q4BlasterProjSmallWeak",25,7,0+random(5,-5))
		Q21A C 4 A_FaceTarget
		TNT1 a 0 A_PlaySound("quake4/StroggMarine/BlasterShot",6)
		Q21A D 4 A_CustomMissile("Q4BlasterProjSmallWeak",25,7,0+random(5,-5))
		Q21A C 4 A_FaceTarget
		TNT1 a 0 A_PlaySound("quake4/StroggMarine/BlasterShot",6)
		Q21A D 4 A_CustomMissile("Q4BlasterProjSmallWeak",25,7,0+random(5,-5))
		Q21A BA 4 
		Goto See
	Pain: 
		Q21P A 7 A_Pain 
		Goto See
	Death:
		TNT1 A 0 A_UnsetSolid
		TNT1 A 0 //A_JumpIfInventory("DefileCheck",1,"DefileDeath")
		Q21D A 0 A_Scream
		Q21D ACD 3
		Q21D A 0 A_Fall
		"####" "#" 0 A_QueueCorpse
		"####" "#" 0 A_ChangeFlag("CORPSE",1)
		Q21D F -1 A_PlaySound("quake4/Misc/Body/Small")
		Stop
	XDeath:
		TNT1 A 0 //A_JumpIfInventory("DefileCheck",1,"DefileDeath")
		TNT1 A 0 A_Jump(256,"XDeathBlood")
		TNT1 AAAAAA 0 A_TossGib
		Goto Death
	XDeathBlood:
		TNT1 A 0 A_PlaySound("other/gibdeath")
		TNT1 A 0 A_SpawnItemEx("BloodGibDropper",0,0,random(20,40),0,0,0,0)
		TNT1 A 1 A_Fall
		Stop
	DefileDeath:
		TNT1 A 0 A_Die
		TNT1 A 0 A_SpawnItemEx("RedMiteSpawner",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION,0)
		Goto XDeath+1
	Death.UnholyDisint:
	Death.PlasmaDisint:
	Disintegrate:
		"####" "#" 0 Thing_SetTranslation(0,50)
		"####" "#" 1 A_FadeOut(0.015)
		"####" "#" 0 A_ChangeFlag("NOINTERACTION",1)
		"####" "#" 0 A_Stop    
		"####" "#" 0 A_Fall
		"####" "#" 0 A_SpawnItemEx("DisintegrateShadowMedium",0,0,30,0,0,0,0,SXF_NOCHECKPOSITION)
		"####" "#" 0 A_SpawnItemEx("DisintegrateSparksMedium",0,0,30,0,0,0,0,SXF_NOCHECKPOSITION)
		"####" "##" 2 A_FadeOut(0.03)
		Goto Disintegrate+6
	}
}
Actor Q4BlasterProjSmallWeak : Q4BlasterProjSmall
{
	Damage 2
	Scale 0.3
	States
	{
	Death:
		TNT1 A 4 A_SpawnItemEx("Q4BlasterProjSmallExplo",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		Stop
	}
}
//=====================================================================================
//=====================================================================================
//
//=====================================================================================
//=====================================================================================
Actor Q4MachinegunGuard	//chainguy
{
	DropItem "BulletAmmo"
	DropItem "AEoDPeaceMakerItem" 64
	DropItem "HealthHeart" 210
	DropItem "PowerSlaveSpawnerMonsterAmmo" 28
	DropItem "PowerupSpawner" 8
	Monster	+DONTCORPSE	RipLevelMin 1
	Radius 16
	Height 56
	Mass 200
	Health 100
	PainChance 90
	Speed 11
	Scale 0.43
	+FLOORCLIP
	SeeSound "quake4/StroggMarine/Sight"
	PainSound "quake4/StroggMarine/Pain"
	DeathSound "quake4/StroggMarine/Death"
	ActiveSound "quake4/StroggMarine/Idle"
	AttackSound "quake4/Sentry/Machinegun"
	PainChance "Charm", 255
	PainChance "Terror", 255
	PainChance "Defile", 255
	PainChance "Drain", 160
	PainChance "Chaos", 255
	PainChance "ChaosExpl1", 255
	PainChance "ChaosExpl2", 255
//Armor
	DamageFactor "Electric", 1.5
	DamageFactor "Plasma", 0.75
	DamageFactor "PlasmaDisint", 0.75
	DamageFactor "AEBullet", 0.5
	States
	{
	Pain.Charm:
		TNT1 A 0
		TNT1 A 0 A_ChangeFlag("FRIENDLY",1)
		Goto See
    Pain.Terror:
		TNT1 A 0
		TNT1 A 0 A_ChangeFlag("FRIGHTENED",1)
		Goto See
    Pain.Drain:
		TNT1 A 0
		TNT1 A 0 A_SpawnItemEx("DrainGiver",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION,0)
		Goto Pain
    Pain.Defile:
		TNT1 A 0
		TNT1 A 0 A_GiveInventory("DefileCheck",1)
		Goto See 
	
	
	Spawn:
		Q22I A 4 A_Look
		Loop
	See:
		Q22W AABBCCDD 3 A_Chase
		TNT1 A 0 //A_JumpIfInventory("DefileCheck",1,"DefileDecide")
		Loop
	Missile:
		TNT1 a 0 A_PlaySound("quake4/StroggMarine/ReadyMachinegun",5)
		Q22A AB 4 A_FaceTarget
		Q22A CC 2 A_FaceTarget(0,0)
		TNT1 A 0 A_SpawnItemEx("MonMuzzleFlashSmall",18,7,25,0,0,0,0,SXF_NOCHECKPOSITION)
		"----" A 0 A_CustomMissile("BulletTracerFX",25,7,random(-9,9),CMF_OFFSETPITCH,random(-9,9))
		Q22A D 3 A_CustomBulletAttack(9,9,1,4)
		TNT1 a 0 A_MonsterRefire(0,"MissileEnd")
		Goto Missile+4
	MissileEnd:
		Q22A BA 4 
		Goto See
	Pain: 
		Q22P A 8 A_Pain
		Goto See
	Death:
		TNT1 A 0 A_UnsetSolid
		TNT1 A 0 //A_JumpIfInventory("DefileCheck",1,"DefileDeath")
		Q22D A 0 A_Scream
		Q22D ACD 3
		Q22D A 0 A_Fall
		"####" "#" 0 A_QueueCorpse
		"####" "#" 0 A_ChangeFlag("CORPSE",1)
		Q22D F -1 A_PlaySound("quake4/Misc/Body/Small")
		Stop
	XDeath:
		TNT1 A 0 //A_JumpIfInventory("DefileCheck",1,"DefileDeath")
		TNT1 A 0 A_Jump(256,"XDeathBlood")
		TNT1 AAAAAA 0 A_TossGib
		Goto Death
	XDeathBlood:
		TNT1 A 0 A_PlaySound("other/gibdeath")
		TNT1 A 0 A_SpawnItemEx("BloodGibDropper",0,0,random(20,40),0,0,0,0)
		TNT1 A 1 A_Fall
		Stop
	DefileDeath:
		TNT1 A 0 A_Die
		TNT1 A 0 A_SpawnItemEx("RedMiteSpawner",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION,0)
		Goto XDeath+1
	Death.UnholyDisint:
	Death.PlasmaDisint:
	Disintegrate:
		"####" "#" 0 Thing_SetTranslation(0,50)
		"####" "#" 1 A_FadeOut(0.015)
		"####" "#" 0 A_ChangeFlag("NOINTERACTION",1)
		"####" "#" 0 A_Stop    
		"####" "#" 0 A_Fall
		"####" "#" 0 A_SpawnItemEx("DisintegrateShadowMedium",0,0,30,0,0,0,0,SXF_NOCHECKPOSITION)
		"####" "#" 0 A_SpawnItemEx("DisintegrateSparksMedium",0,0,30,0,0,0,0,SXF_NOCHECKPOSITION)
		"####" "##" 2 A_FadeOut(0.03)
		Goto Disintegrate+6
	}
}
//=====================================================================================
//=====================================================================================
//
//=====================================================================================
//=====================================================================================
Actor Q4ShotgunGuard		//shotguy
{
	DropItem "ShellAmmo"
	DropItem "HealthHeart" 210
	DropItem "PowerSlaveSpawnerShotgunner" 210
	DropItem "PowerupSpawner" 8
	Monster	+DONTCORPSE	RipLevelMin 1
	Radius 16
	Height 56
	Mass 200
	Health 60
	PainChance 200
	Speed 11
	Scale 0.43
	+FLOORCLIP
	SeeSound "quake4/StroggMarine/Sight"
	PainSound "quake4/StroggMarine/Pain"
	DeathSound "quake4/StroggMarine/Death"
	ActiveSound "quake4/StroggMarine/Idle"
	AttackSound "quake4/Weapons/Shotgun/Fire"
	PainChance "Charm", 255
	PainChance "Terror", 255
	PainChance "Defile", 255
	PainChance "Drain", 160
	PainChance "Chaos", 255
	PainChance "ChaosExpl1", 255
	PainChance "ChaosExpl2", 255
//Armor
	DamageFactor "Electric", 1.5
	DamageFactor "Plasma", 0.75
	DamageFactor "PlasmaDisint", 0.75
	DamageFactor "AEBullet", 0.5
	States
	{
	Pain.Charm:
		TNT1 A 0
		TNT1 A 0 A_ChangeFlag("FRIENDLY",1)
		Goto See
    Pain.Terror:
		TNT1 A 0
		TNT1 A 0 A_ChangeFlag("FRIGHTENED",1)
		Goto See
    Pain.Drain:
		TNT1 A 0
		TNT1 A 0 A_SpawnItemEx("DrainGiver",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION,0)
		Goto Pain
    Pain.Defile:
		TNT1 A 0
		TNT1 A 0 A_GiveInventory("DefileCheck",1)
		Goto See 


	
	Spawn:
		Q23I A 4 A_Look
		Loop
	See:
		Q23W AABBCCDD 3 A_Chase
		TNT1 A 0 //A_JumpIfInventory("DefileCheck",1,"DefileDecide")
		Loop
	Missile:
		Q21A A 0 A_PlaySound("quake4/StroggMarine/ReadyShotgun",6)
		Q23A ABBBBBB 4 A_FaceTarget(0,0)
		TNT1 A 0 A_SpawnItemEx("MonMuzzleFlashSmall",24,2,42,0,0,0,0,SXF_NOCHECKPOSITION)
		"----" AAAAA 0 A_CustomMissile("BulletTracerFX",42,2,random(-12,12),CMF_OFFSETPITCH,random(-12,12))
		TNT1 A 0 A_CustomBulletAttack(12,12,5,4)
		Q23A CCD 4 A_FaceTarget
		TNT1 A 0 A_Jump(170,"MissileEnd")
		TNT1 A 0 A_MonsterRefire(0,"MissileEnd")
		Goto Missile+3
	MissileEnd:
		Q23A A 5 
		Goto See
	Pain: 
		Q23P A 8 A_Pain
		Goto See
	Death:
		"####" "#" 0 A_UnsetSolid
		TNT1 A 0 //A_JumpIfInventory("DefileCheck",1,"DefileDeath")
		Q23D A 0 A_Scream
		Q23D ACD 3
		Q23D A 0 A_Fall
		"####" "#" 0 A_QueueCorpse
		"####" "#" 0 A_ChangeFlag("CORPSE",1)
		Q23D F -1 A_PlaySound("quake4/Misc/Body/Small")
		Stop
	XDeath:
		TNT1 A 0 //A_JumpIfInventory("DefileCheck",1,"DefileDeath")
		TNT1 A 0 A_Jump(256,"XDeathBlood")
		TNT1 AAAAAA 0 A_TossGib
		Goto Death
	XDeathBlood:
		TNT1 A 0 A_PlaySound("other/gibdeath")
		TNT1 A 0 A_SpawnItemEx("BloodGibDropper",0,0,random(20,40),0,0,0,0)
		TNT1 A 1 A_Fall
		Stop
	DefileDeath:
		TNT1 A 0 A_Die
		TNT1 A 0 A_SpawnItemEx("RedMiteSpawner",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION,0)
		Goto XDeath+1
	Death.UnholyDisint:
	Death.PlasmaDisint:
	Disintegrate:
		"####" "#" 0 Thing_SetTranslation(0,50)
		"####" "#" 1 A_FadeOut(0.015)
		"####" "#" 0 A_ChangeFlag("NOINTERACTION",1)
		"####" "#" 0 A_Stop    
		"####" "#" 0 A_Fall
		"####" "#" 0 A_SpawnItemEx("DisintegrateShadowMedium",0,0,30,0,0,0,0,SXF_NOCHECKPOSITION)
		"####" "#" 0 A_SpawnItemEx("DisintegrateSparksMedium",0,0,30,0,0,0,0,SXF_NOCHECKPOSITION)
		"####" "##" 2 A_FadeOut(0.03)
		Goto Disintegrate+6
	}
}
//=====================================================================================
//=====================================================================================
//
//=====================================================================================
//=====================================================================================
Actor Q4HyperBlasterTactical		//revenant
{
	DropItem "AEoDHyperblasterItem" 32
	DropItem "CellAmmo"
	DropItem "HealthHeart" 210
	DropItem "PowerslaveSpawner" 28
	DropItem "PowerupSpawner" 8
	Monster	+DONTCORPSE	RipLevelMin 1
	Radius 16
	Height 56
	Mass 200
	Health 450
	PainChance 64
	Speed 11
	Scale 0.415
	MeleeDamage 1
	+FLOORCLIP
	SeeSound "quake4/Tactical/Voice"
	PainSound "quake4/Tactical/Pain"
	DeathSound "quake4/Tactical/Death"
	ActiveSound "quake4/Tactical/Voice"
	PainChance "Charm", 192
	PainChance "Terror", 192
	PainChance "Defile", 255
	PainChance "Drain", 110
	PainChance "Chaos", 255
	PainChance "ChaosExpl1", 255
	PainChance "ChaosExpl2", 255
//Armor
	DamageFactor "Electric", 1.5
	DamageFactor "Plasma", 0.75
	DamageFactor "PlasmaDisint", 0.75
	DamageFactor "AEBullet", 0.5
	States
	{
	Pain.Charm:
		TNT1 A 0
		TNT1 A 0 A_ChangeFlag("FRIENDLY",1)
		Goto See
    Pain.Terror:
		TNT1 A 0
		TNT1 A 0 A_ChangeFlag("FRIGHTENED",1)
		Goto See
    Pain.Drain:
		TNT1 A 0
		TNT1 A 0 A_SpawnItemEx("DrainGiver",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION,0)
		Goto Pain
    Pain.Defile:
		TNT1 A 0
		TNT1 A 0 A_GiveInventory("DefileCheck",1)
		Goto See 
	
	
	Spawn:
		Q24I A 4 A_Look
		Loop
	See:
		Q24W AABBCCDD 3 A_Chase
		TNT1 A 0 //A_JumpIfInventory("DefileCheck",1,"DefileDecide")
		Loop
	Missile:
		Q24A AB 5 A_FaceTarget
		TNT1 a 0 A_PlaySound("quake4/Weapons/HyperBlast/Fire",5)
		TNT1 a 0 A_FaceTarget
		Q24A C 2 A_CustomMissile("Q4BlasterProjSmallWeak",44,2,0+random(1,-1))
		Q24A D 2
		TNT1 a 0 A_Jump(10,"MissileEnd")
		TNT1 a 0 A_MonsterRefire(0,"MissileEnd")
		Goto Missile+2
	MissileEnd:
		Q24A BA 6
		Goto See
	Pain: 
		Q24P A 8 A_Pain
		Goto See
	Death:		//I know is stupid they explode on death, but I couldnt rip a barely acceptable death sequence :(
		"####" "#" 0 A_UnsetSolid
		TNT1 A 0 //A_JumpIfInventory("DefileCheck",1,"DefileDeath")
		Q24D A 0 A_Scream
		Q24D ABCD 3
		Q24D E 100 A_PlaySound("quake4/Misc/Body/Small")
		TNT1 a 0 A_Jump(210,2,4,6,8)
		Q25D EEEEEEEEEEEEEE 5
		Q24D A 0 A_Fall
		TNT1 A 0 A_PlaySound("quake4/Misc/Explo",6)
		TNT1 A 0 A_Explode(50,128)
		TNT1 AAAAAAAAAAAA 0 A_TossGib
		TNT1 a 3 A_SpawnItemEx("MonExplosionMedium",0,0,25,0,0,0,0,SXF_NOCHECKPOSITION)
		Stop
	XDeath:
		TNT1 A 0 //A_JumpIfInventory("DefileCheck",1,"DefileDeath")
		TNT1 A 0 A_Jump(256,"XDeathBlood")
		TNT1 AAAAAAAAAAAAAA 0 A_TossGib
		Goto Death
	XDeathBlood:
		TNT1 A 0 A_PlaySound("other/gibdeath")
		TNT1 A 0 A_SpawnItemEx("BloodGibDropper",0,0,random(20,40),0,0,0,0)
		TNT1 AAAAAAAAA 0 A_TossGib
		TNT1 A 1 A_Fall
		Stop
	DefileDeath:
		TNT1 A 0 A_Die
		TNT1 A 0 A_SpawnItemEx("RedMiteSpawner",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION,0)
		Goto XDeath+1
	Death.UnholyDisint:
	Death.PlasmaDisint:
	Disintegrate:
		"####" "#" 0 Thing_SetTranslation(0,50)
		"####" "#" 1 A_FadeOut(0.015)
		"####" "#" 0 A_ChangeFlag("NOINTERACTION",1)
		"####" "#" 0 A_Stop    
		"####" "#" 0 A_Fall
		"####" "#" 0 A_SpawnItemEx("DisintegrateShadowMedium",0,0,30,0,0,0,0,SXF_NOCHECKPOSITION)
		"####" "#" 0 A_SpawnItemEx("DisintegrateSparksMedium",0,0,30,0,0,0,0,SXF_NOCHECKPOSITION)
		"####" "##" 2 A_FadeOut(0.03)
		Goto Disintegrate+6
	}
}

//=====================================================================================
//=====================================================================================
//
//=====================================================================================
//=====================================================================================
Actor Q4RailgunTactical	//strogg tactical railgun
{
	DropItem "AEoDRailGunItem" 32
	DropItem "ShellAmmo"
	DropItem "HealthHeart" 210
	DropItem "PowerslaveSpawner" 28
	DropItem "PowerupSpawner" 8
	Monster	+DONTCORPSE	RipLevelMin 1
	Radius 16
	Height 56
	Mass 200
	Health 450
	PainChance 128
	Speed 11
	Scale 0.415
	+FLOORCLIP
	SeeSound "quake4/Tactical/Voice"
	PainSound "quake4/Tactical/Pain"
	DeathSound "quake4/Tactical/Death"
	ActiveSound "quake4/Tactical/Voice"
	PainChance "Charm", 192
	PainChance "Terror", 192
	PainChance "Defile", 255
	PainChance "Drain", 110
	PainChance "Chaos", 255
	PainChance "ChaosExpl1", 255
	PainChance "ChaosExpl2", 255
//Armor
	DamageFactor "Electric", 1.5
	DamageFactor "Plasma", 0.75
	DamageFactor "PlasmaDisint", 0.75
	DamageFactor "AEBullet", 0.5
	States
	{
	Pain.Charm:
		TNT1 A 0
		TNT1 A 0 A_ChangeFlag("FRIENDLY",1)
		Goto See
    Pain.Terror:
		TNT1 A 0
		TNT1 A 0 A_ChangeFlag("FRIGHTENED",1)
		Goto See
    Pain.Drain:
		TNT1 A 0
		TNT1 A 0 A_SpawnItemEx("DrainGiver",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION,0)
		Goto Pain
    Pain.Defile:
		TNT1 A 0
		TNT1 A 0 A_GiveInventory("DefileCheck",1)
		Goto See 

	
	
	Spawn:
		Q25I A 4 A_Look
		Loop
	See:
		Q25W AABBCCDD 3 A_Chase
		TNT1 A 0 //A_JumpIfInventory("DefileCheck",1,"DefileDecide")
		Loop
	Missile:
		Q25A A 0 A_FaceTarget
		Q25A ABBBBBBB 4 A_FaceTarget
		TNT1 A 0 A_PlaySound("quake4/Weapons/Railgun/Fire",5)
		Q25A C 5 A_CustomRailgun(random(1,119),2,"Orange","White",RGF_SILENT|RGF_NOPIERCING,1,0)	//this can really deal any amount of damage. Average is 60
		TNT1 A 0 A_PlaySound("quake4/Weapons/Railgun/Charge",6)
		Q25A DA 6
		Goto See
	Pain: 
		Q25P A 8 A_Pain
		Goto See
	Death:
		TNT1 A 0 //A_JumpIfInventory("DefileCheck",1,"DefileDeath")
		"####" "#" 0 A_UnsetSolid
		Q25D A 0 A_Scream
		Q25D ABCD 3
		Q25D E 100 A_PlaySound("quake4/Misc/Body/Small")
		TNT1 a 0 A_Jump(210,2,4,6,8)
		Q25D EEEEEEEEEEEEEE 5
		Q25D A 0 A_Fall
		TNT1 A 0 A_PlaySound("quake4/Misc/Explo",6)
		TNT1 A 0 A_Explode(50,128)
		TNT1 AAAAAAAAAAAA 0 A_TossGib
		TNT1 a 3 A_SpawnItemEx("MonExplosionMedium",0,0,25,0,0,0,0,SXF_NOCHECKPOSITION)
		Stop
	XDeath:
		TNT1 A 0 //A_JumpIfInventory("DefileCheck",1,"DefileDeath")
		TNT1 A 0 A_Jump(256,"XDeathBlood")
		TNT1 AAAAAAAAAAAAAA 0 A_TossGib
		Goto Death
	XDeathBlood:
		TNT1 A 0 A_PlaySound("other/gibdeath")
		TNT1 A 0 A_SpawnItemEx("BloodGibDropper",0,0,random(20,40),0,0,0,0)
		TNT1 AAAAAAAAA 0 A_TossGib
		TNT1 A 1 A_Fall
		Stop
	DefileDeath:
		TNT1 A 0 A_Die
		TNT1 A 0 A_SpawnItemEx("RedMiteSpawner",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION,0)
		Goto XDeath+1
	Death.UnholyDisint:
	Death.PlasmaDisint:
	Disintegrate:
		"####" "#" 0 Thing_SetTranslation(0,50)
		"####" "#" 1 A_FadeOut(0.015)
		"####" "#" 0 A_ChangeFlag("NOINTERACTION",1)
		"####" "#" 0 A_Stop    
		"####" "#" 0 A_Fall
		"####" "#" 0 A_SpawnItemEx("DisintegrateShadowMedium",0,0,30,0,0,0,0,SXF_NOCHECKPOSITION)
		"####" "#" 0 A_SpawnItemEx("DisintegrateSparksMedium",0,0,30,0,0,0,0,SXF_NOCHECKPOSITION)
		"####" "##" 2 A_FadeOut(0.03)
		Goto Disintegrate+6
	}
}

//=====================================================================================
//=====================================================================================
//
//=====================================================================================
//=====================================================================================
Actor Q4TeleportDropper		//archvile
{
	DropItem "CellBigAmmo"
	DropItem "ShellBigAmmo"
	DropItem "HealthHeart" 210
	DropItem "PowerslaveSpawner" 
	DropItem "PowerslaveSpawner" 
	DropItem "PowerslaveSpawner" 
	DropItem "PowerupSpawner" 
	Monster	+DONTCORPSE	RipLevelMin 1
	Radius 16
	Height 56
	Mass 500
	Health 1000
	PainChance 128			//to stop the spawning 
	Speed 12
	Scale 0.45
	+MISSILEEVENMORE 		//because only on half the walk anim it can decide if attack
	+FLOORCLIP
	SeeSound "quake4/TportDropper/Sight"
	PainSound "quake4/TportDropper/Pain"
	DeathSound "quake4/TportDropper/Death"
	ActiveSound "quake4/TportDropper/Idle"
	AttackSound "quake4/Grunt/MachineGunShot"
	PainChance "Charm", 96
	PainChance "Terror", 96
	PainChance "Drain", 64
	PainChance "Defile", 0
	PainChance "Chaos", 255
	PainChance "ChaosExpl1", 128
	PainChance "ChaosExpl2", 128
//Armor
	DamageFactor "Electric", 1.5
	DamageFactor "Plasma", 0.75
	DamageFactor "PlasmaDisint", 0.75
	DamageFactor "AEBullet", 0.5
	States
	{
	Pain.Charm:
		TNT1 A 0
		TNT1 A 0 A_ChangeFlag("FRIENDLY",1)
		Goto See
    Pain.Terror:
		TNT1 A 0
		TNT1 A 0 A_ChangeFlag("FRIGHTENED",1)
		Goto See
    Pain.Drain:
		TNT1 A 0
		TNT1 A 0 A_SpawnItemEx("DrainGiver",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION,0)
		Goto Pain
    Pain.Defile:
		TNT1 A 0
		TNT1 A 0 A_GiveInventory("DefileCheck",1)
		Goto See 


	
	Spawn:
		Q26I A 4 A_Look
		Loop
	See:
		Q26W AABBCC 2 A_Chase(0,0)	//attacking while in air? Also to prevent attack spam
		Q26W DDEEFF 2 A_Chase
		Loop
	Missile:
		Q26A A 0 A_Jump(160,"AttChoose")
		
		Goto AttChoose
	AttChoose:
		TNT1 a 0 A_Jump(210,"Machinegun")
		Goto Summon
	Machinegun:
		Q26I A 4
		Q26A AB 4 A_FaceTarget(0,0)
		TNT1 A 0 A_SpawnItemEx("MonMuzzleFlashSmall",5,0,33,0,0,0,0,SXF_NOCHECKPOSITION)
		"----" A 0 A_CustomMissile("BulletTracerFX",33,0,random(-4,4),CMF_OFFSETPITCH,random(-4,4))
		Q26A C 3 A_CustomBulletAttack(4,4,1,6)	TNT1 a 0 A_FaceTarget
		TNT1 A 0 A_SpawnItemEx("MonMuzzleFlashSmall",5,0,33,0,0,0,0,SXF_NOCHECKPOSITION)
		"----" A 0 A_CustomMissile("BulletTracerFX",33,0,random(-4,4),CMF_OFFSETPITCH,random(-4,4))
		Q26A C 3 A_CustomBulletAttack(4,4,1,6)	TNT1 a 0 A_FaceTarget
		TNT1 A 0 A_SpawnItemEx("MonMuzzleFlashSmall",5,0,33,0,0,0,0,SXF_NOCHECKPOSITION)
		"----" A 0 A_CustomMissile("BulletTracerFX",33,0,random(-4,4),CMF_OFFSETPITCH,random(-4,4))
		Q26A C 3 A_CustomBulletAttack(4,4,1,6)	TNT1 a 0 A_FaceTarget
		TNT1 A 0 A_SpawnItemEx("MonMuzzleFlashSmall",5,0,33,0,0,0,0,SXF_NOCHECKPOSITION)
		"----" A 0 A_CustomMissile("BulletTracerFX",33,0,random(-4,4),CMF_OFFSETPITCH,random(-4,4))
		Q26A C 3 A_CustomBulletAttack(4,4,1,6)	TNT1 a 0 A_FaceTarget
		TNT1 A 0 A_SpawnItemEx("MonMuzzleFlashSmall",5,0,33,0,0,0,0,SXF_NOCHECKPOSITION)
		"----" A 0 A_CustomMissile("BulletTracerFX",33,0,random(-4,4),CMF_OFFSETPITCH,random(-4,4))
		Q26A C 3 A_CustomBulletAttack(4,4,1,6)	TNT1 a 0 A_FaceTarget
		TNT1 A 0 A_SpawnItemEx("MonMuzzleFlashSmall",5,0,33,0,0,0,0,SXF_NOCHECKPOSITION)
		"----" A 0 A_CustomMissile("BulletTracerFX",33,0,random(-4,4),CMF_OFFSETPITCH,random(-4,4))
		Q26A C 3 A_CustomBulletAttack(4,4,1,6)	TNT1 a 0 A_FaceTarget
		TNT1 A 0 A_SpawnItemEx("MonMuzzleFlashSmall",5,0,33,0,0,0,0,SXF_NOCHECKPOSITION)
		"----" A 0 A_CustomMissile("BulletTracerFX",33,0,random(-4,4),CMF_OFFSETPITCH,random(-4,4))
		Q26A C 3 A_CustomBulletAttack(4,4,1,6)
		Q26A BA 7
		Goto See
	Summon:
		Q26I A 4 A_FaceTarget
		TNT1 A 0 A_PlaySound("quake4/TportDropper/AttackGrowl",6)
		Q26B ABCCCCCCCCC 5 A_FaceTarget
		Q26B C 7 A_CustomMissile("TporDropBall",40,6,90+random(20,-20))
		Q26B C 7 A_CustomMissile("TporDropBall",40,-6,-90+random(20,-20))
		Q26B C 7 A_CustomMissile("TporDropBall",40,6,135+random(20,-20))
		Q26B C 7 A_CustomMissile("TporDropBall",40,-6,-135+random(20,-20))
		Q26B BA 7
		Goto See
	Pain: 
		Q26P A 8 A_Pain
		Goto See
	Death:
		"####" "#" 0 A_UnsetSolid
		Q26D A 0 A_Scream
		Q26D ABCD 3
		Q26D A 0 A_Fall
		"####" "#" 0 A_QueueCorpse
		"####" "#" 0 A_ChangeFlag("CORPSE",1)
		Q26D E -1 A_PlaySound("quake4/Misc/Body/Beefy",7)
		Stop
	XDeath:
		TNT1 A 0 A_Jump(256,"XDeathBlood")
		TNT1 AAAAAAAAAAAAAAA 0 A_TossGib
		Goto Death
	XDeathBlood:
		TNT1 A 0 A_PlaySound("other/gibdeath")
		TNT1 A 0 A_SpawnItemEx("BloodGibDropper",0,0,random(20,40),0,0,0,0)
		TNT1 AAAAAAAAAA 0 A_TossGib
		TNT1 A 1 A_Fall
		Stop
	Death.UnholyDisint:
	Death.PlasmaDisint:
	Disintegrate:
		"####" "#" 0 Thing_SetTranslation(0,50)
		"####" "#" 1 A_FadeOut(0.015)
		"####" "#" 0 A_ChangeFlag("NOINTERACTION",1)
		"####" "#" 0 A_Stop    
		"####" "#" 0 A_Fall
		"####" "#" 0 A_SpawnItemEx("DisintegrateShadowMedium",0,0,30,0,0,0,0,SXF_NOCHECKPOSITION)
		"####" "#" 0 A_SpawnItemEx("DisintegrateSparksMedium",0,0,30,0,0,0,0,SXF_NOCHECKPOSITION)
		"####" "##" 2 A_FadeOut(0.03)
		Goto Disintegrate+6
	}
}


Actor TporDropBall
{
	Speed 12
	Radius 4
	Height 4
	Damage 0
	Scale 0.4
	Projectile
	SeeSound "quake4/Weapons/GrenLaunch/Fire"
	+DONTSPLASH
	-NOGRAVITY
	States
	{
	Spawn:
		TNT1 A 0 
		TNT1 A 0 ThrustThingZ(0,20,0,1)
		MI04 AAABBBCCCDDD 1 A_SpawnItemEx("TporDropBallTrail",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		Goto Spawn+2
	Death:
		TNT1 A 0 A_SpawnItem("TeleportFog",0,0)
		TNT1 A 1 A_SpawnItem("TporDropBallSpawner",0,0)
		Stop
	}
}

Actor TporDropBallTrail
{
	+NOINTERACTIOn
	Scale 0.05
	RenderStyle Add
	Translation "0:255=%[0,0,0]:[0,0.8,0.8]"
	States
	{
	Spawn:
		PORT T 3 A_FadeOut
		Wait
	}
}

Actor TporDropBallSpawner
{
	Monster
	+NOCLIP
	-SOLID
	Health 100000000000
	Radius 0
	Height 0
	+NORADIUSDMG
	+NOBLOOD
	-COUNTKILL
	RenderStyle None
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_Jump(250,2)
		TNT1 A 1 A_SpawnItemEx("Q4LightGuard",0,0,0,0,0,0,0,0)
		Stop
		TNT1 A 0 A_Jump(250,2)
		TNT1 A 1 A_SpawnItemEx("Q4MachinegunGuard",0,0,0,0,0,0,0,0)
		Stop
		TNT1 A 0 A_Jump(250,2)
		TNT1 A 1 A_SpawnItemEx("Q4ShotgunGuard",0,0,0,0,0,0,0,0)
		Stop
		TNT1 A 0 A_Jump(250,2)
		TNT1 A 1 A_SpawnItemEx("Q4Berserker",0,0,0,0,0,0,0,0)
		Stop
		TNT1 A 0 A_Jump(250,2)
		TNT1 A 1 A_SpawnItemEx("Q4Grunt",0,0,0,0,0,0,0,0)
		Stop
		TNT1 A 0 A_Jump(250,2)
		TNT1 A 1 A_SpawnItemEx("Q4Gunner",0,0,0,0,0,0,0,0)
		Stop
		TNT1 A 0
		Loop
	Death:
		TNT1 A 3 
		Stop
	}
}
