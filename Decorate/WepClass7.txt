//================================================================================================================
//================================================================================================================
//================================================================================================================
//
//
//					AEons Of Death v6: Class 7 weapons
//
//
//================================================================================================================
//================================================================================================================




//==================================================================================
//==================================================================================

//==================================================================================
//==================================================================================

Actor AEoDLifeLeechItem : CustomInventory 6194
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL
	+FLOATBOB
	Scale 0.5
	Inventory.Amount 1
	Inventory.PickupMessage "Picked up the Life Leech"
	Inventory.PickupSound "BloodShotgun/Pickup"
	States
	{
	Spawn:
		WPLL A -1
		Loop
	Pickup:
		TNT1 A 0 A_JumpIfInventory("AEoDLifeLeech",1,"Ammo")
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",7) <= 0,"Nothing")
		TNT1 A 0 A_GiveInventory("LifeLeechDrop",1)
		TNT1 A 0 A_GiveInventory("LifeLeechTurret",1)
		TNT1 A 0 	
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDLifeLeech",1,"Ammo")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		TNT1 A 0 ACS_NamedExecute("s798",0,7,95,0)
		Fail
	Ammo:
		TNT1 A 0 A_GiveInventory("AEoDLifeLeech",1)
		Stop
	}
}

Actor AEoDLifeLeech : Weapon 6133
{ 
	+WEAPON.NOALERT
	+INVENTORY.IGNORESKILL
	+WEAPON.AMMO_OPTIONAL
	+WEAPON.CHEATNOTWEAPON
	Weapon.AmmoType "RedMana"
	Weapon.AmmoGive1 15
	Weapon.AmmoUse 1
	Weapon.SelectionOrder 11150
	Inventory.PickupMessage "Picked up the Life Leech"
	Inventory.PickupSound "BloodShotgun/Pickup"
	weapon.upsound "weapons/draw"
	Tag "Life leech"
	States 
	{ 
	Spawn: 
		WPLL A 0
		WPLL A 0 A_SpawnItem("LifeLeechPickup")
		Stop
	Ready:
		LLCH A 1 A_WeaponReady 
		Loop 
	Deselect: 
		TNT1 A 0 	
		LLCH A 1 A_Lower 
		TNT1 AA 0 A_Lower
		Loop 
	Select: 
		TNT1 A 0 	
		LLCH A 1 A_Raise
		TNT1 AA 0 A_Raise 
		Loop
	Fire: 
		LLCH A 0 A_PlayWeaponSound("LifeLeech/Fire")
		LLCH A 0 A_AlertMonsters
		LLCH ABCD 3
		LLC2 A 0 Bright A_JumpIfInventory("RedMana",1,8)
		LLC2 A 0 A_JumpIfInventory("PowerEconomizer",1,2)
		LLC2 A 0 A_FireCustomMissile("LifeLeechDamager",0,0,0,0)
		LLC2 A 1
		LLC2 A 0 Bright A_ChangeFlag("NOPAIN", 1)
		LLC2 A 0 //ACS_NamedExecute("s851",0,random(20,-20),random(-10,10),0)
		LLC2 A 1 Bright A_FireCustomMissile("LifeLeechFireball",random(-3,3),0,0,0,0)
		LLC2 A 0 A_Jump(256,3)
		LLC2 A 0 //ACS_NamedExecute("s851",0,random(20,-20),random(-10,10),0)
		LLC2 A 2 Bright A_FireCustomMissile("LifeLeechFireball",random(-3,3),1,0,0,0)
		LLC2 B 2 Bright
		LLC2 C 0 Bright A_JumpIfInventory("RedMana",1,6)
		LLC2 C 0 A_JumpIfInventory("PowerEconomizer",1,2)
		LLC2 C 0 A_FireCustomMissile("LifeLeechDamager",0,0,0,0)
		LLC2 C 0 //ACS_NamedExecute("s851",0,random(20,-20),random(-10,10),0)
		LLC2 C 2 Bright A_FireCustomMissile("LifeLeechFireball",random(-3,3),0,0,0,0)
		LLC2 C 0 A_Jump(256,3)
		LLC2 C 0 //ACS_NamedExecute("s851",0,random(20,-20),random(-10,10),0)
		LLC2 C 2 Bright A_FireCustomMissile("LifeLeechFireball",random(-3,3),1,0,0,0)
		LLC2 D 2 Bright
		LLC2 E 0 Bright A_JumpIfInventory("RedMana",1,6)
		LLC2 E 0 A_JumpIfInventory("PowerEconomizer",1,2)
		LLC2 E 0 A_FireCustomMissile("LifeLeechDamager",0,0,0,0)
		LLC2 E 0 //ACS_NamedExecute("s851",0,random(20,-20),random(-10,10),0)
		LLC2 E 2 Bright A_FireCustomMissile("LifeLeechFireball",random(-3,3),0,0,0,0)
		LLC2 E 0 A_Jump(256,3)
		LLC2 E 0 //ACS_NamedExecute("s851",0,random(20,-20),random(-10,10),0)
		LLC2 E 2 Bright A_FireCustomMissile("LifeLeechFireball",random(-3,3),1,0,0,0)
		LLC2 F 2 Bright
		LLC2 F 0 Bright A_ChangeFlag("NOPAIN", 0)
		LLC2 G 0 Bright A_JumpIfInventory("RedMana",1,8)
		LLC2 G 0 A_JumpIfInventory("PowerEconomizer",1,2)
		LLC2 G 0 A_FireCustomMissile("LifeLeechDamager",0,0,0,0)
		LLC2 G 1
		LLC2 G 0 Bright A_ChangeFlag("NOPAIN", 1)
		LLC2 G 0 //ACS_NamedExecute("s851",0,random(20,-20),random(-10,10),0)
		LLC2 G 1 Bright A_FireCustomMissile("LifeLeechFireball",random(-3,3),0,0,0,0)
		LLC2 G 0 A_Jump(256,3)
		LLC2 G 0 //ACS_NamedExecute("s851",0,random(20,-20),random(-10,10),0)
		LLC2 G 2 Bright A_FireCustomMissile("LifeLeechFireball",random(-3,3),1,0,0,0)
		LLC2 H 2 Bright
		LLC2 I 0 Bright A_JumpIfInventory("RedMana",1,6)
		LLC2 I 0 A_JumpIfInventory("PowerEconomizer",1,2)
		LLC2 I 0 A_FireCustomMissile("LifeLeechDamager",0,0,0,0)
		LLC2 I 0 //ACS_NamedExecute("s851",0,random(20,-20),random(-10,10),0)
		LLC2 I 2 Bright A_FireCustomMissile("LifeLeechFireball",random(-3,3),0,0,0,0)
		LLC2 I 0 A_Jump(256,3)
		LLC2 I 0 //ACS_NamedExecute("s851",0,random(20,-20),random(-10,10),0)
		LLC2 I 2 Bright A_FireCustomMissile("LifeLeechFireball",random(-3,3),1,0,0,0)
		LLC2 J 2 Bright
		LLC2 K 0 Bright A_JumpIfInventory("RedMana",1,6)
		LLC2 K 0 A_JumpIfInventory("PowerEconomizer",1,2)
		LLC2 K 0 A_FireCustomMissile("LifeLeechDamager",0,0,0,0)
		LLC2 K 0 //ACS_NamedExecute("s851",0,random(20,-20),random(-10,10),0)
		LLC2 K 2 Bright A_FireCustomMissile("LifeLeechFireball",random(-3,3),0,0,0,0)
		LLC2 K 0 A_Jump(256,3)
		LLC2 K 0 //ACS_NamedExecute("s851",0,random(20,-20),random(-10,10),0)
		LLC2 K 2 Bright A_FireCustomMissile("LifeLeechFireball",random(-3,3),1,0,0,0)
		LLC2 L 2 Bright
		LLC2 L 0 Bright A_ChangeFlag("NOPAIN", 0)
		LLC2 M 0 Bright A_JumpIfInventory("RedMana",1,8)
		LLC2 M 0 A_JumpIfInventory("PowerEconomizer",1,2)
		LLC2 M 0 A_FireCustomMissile("LifeLeechDamager",0,0,0,0)
		LLC2 M 1
		LLC2 M 0 Bright A_ChangeFlag("NOPAIN", 1)
		LLC2 M 0 //ACS_NamedExecute("s851",0,random(20,-20),random(-10,10),0)
		LLC2 M 1 Bright A_FireCustomMissile("LifeLeechFireball",random(-3,3),0,0,0,0)
		LLC2 M 0 A_Jump(256,3)
		LLC2 M 0 //ACS_NamedExecute("s851",0,random(20,-20),random(-10,10),0)
		LLC2 M 2 Bright A_FireCustomMissile("LifeLeechFireball",random(-3,3),1,0,0,0)
		LLC2 N 2 Bright
		LLC2 O 0 Bright A_JumpIfInventory("RedMana",1,6)
		LLC2 O 0 A_JumpIfInventory("PowerEconomizer",1,2)
		LLC2 O 0 A_FireCustomMissile("LifeLeechDamager",0,0,0,0)
		LLC2 O 0 //ACS_NamedExecute("s851",0,random(20,-20),random(-10,10),0)
		LLC2 O 2 Bright A_FireCustomMissile("LifeLeechFireball",random(-3,3),0,0,0,0)
		LLC2 O 0 A_Jump(256,3)
		LLC2 O 0 //ACS_NamedExecute("s851",0,random(20,-20),random(-10,10),0)
		LLC2 O 2 Bright A_FireCustomMissile("LifeLeechFireball",random(-3,3),1,0,0,0)
		LLC2 P 2 Bright
		LLC2 Q 0 Bright A_JumpIfInventory("RedMana",1,6)
		LLC2 Q 0 A_JumpIfInventory("PowerEconomizer",1,2)
		LLC2 Q 0 A_FireCustomMissile("LifeLeechDamager",0,0,0,0)
		LLC2 Q 0 //ACS_NamedExecute("s851",0,random(20,-20),random(-10,10),0)
		LLC2 Q 2 Bright A_FireCustomMissile("LifeLeechFireball",random(-3,3),0,0,0,0)
		LLC2 Q 0 A_Jump(256,3)
		LLC2 Q 0 //ACS_NamedExecute("s851",0,random(20,-20),random(-10,10),0)
		LLC2 Q 2 Bright A_FireCustomMissile("LifeLeechFireball",random(-3,3),1,0,0,0)
		LLC2 R 2 Bright
		LLC2 R 0 Bright A_ChangeFlag("NOPAIN", 0)
		LLC2 S 0 Bright A_JumpIfInventory("RedMana",1,8)
		LLC2 S 0 A_JumpIfInventory("PowerEconomizer",1,2)
		LLC2 S 0 A_FireCustomMissile("LifeLeechDamager",0,0,0,0)
		LLC2 S 1
		LLC2 S 0 Bright A_ChangeFlag("NOPAIN", 1)
		LLC2 S 0 //ACS_NamedExecute("s851",0,random(20,-20),random(-10,10),0)
		LLC2 S 1 Bright A_FireCustomMissile("LifeLeechFireball",random(-3,3),0,0,0,0)
		LLC2 S 0 A_Jump(256,3)
		LLC2 S 0 //ACS_NamedExecute("s851",0,random(20,-20),random(-10,10),0)
		LLC2 S 2 Bright A_FireCustomMissile("LifeLeechFireball",random(-3,3),1,0,0,0)
		LLC2 T 2 Bright
		LLC2 U 0 Bright A_JumpIfInventory("RedMana",1,6)
		LLC2 U 0 A_JumpIfInventory("PowerEconomizer",1,2)
		LLC2 U 0 A_FireCustomMissile("LifeLeechDamager",0,0,0,0)
		LLC2 U 0 //ACS_NamedExecute("s851",0,random(20,-20),random(-10,10),0)
		LLC2 U 2 Bright A_FireCustomMissile("LifeLeechFireball",random(-3,3),0,0,0,0)
		LLC2 U 0 A_Jump(256,3)
		LLC2 U 0 //ACS_NamedExecute("s851",0,random(20,-20),random(-10,10),0)
		LLC2 U 2 Bright A_FireCustomMissile("LifeLeechFireball",random(-3,3),1,0,0,0)
		LLC2 V 2 Bright
		LLC2 W 0 Bright A_JumpIfInventory("RedMana",1,6)
		LLC2 W 0 A_JumpIfInventory("PowerEconomizer",1,2)
		LLC2 W 0 A_FireCustomMissile("LifeLeechDamager",0,0,0,0)
		LLC2 W 0 //ACS_NamedExecute("s851",0,random(20,-20),random(-10,10),0)
		LLC2 W 2 Bright A_FireCustomMissile("LifeLeechFireball",random(-3,3),0,0,0,0)
		LLC2 W 0 A_Jump(256,3)
		LLC2 W 0 //ACS_NamedExecute("s851",0,random(20,-20),random(-10,10),0)
		LLC2 W 2 Bright A_FireCustomMissile("LifeLeechFireball",random(-3,3),1,0,0,0)
		LLC2 X 2 Bright
		LLC2 X 0 Bright A_ChangeFlag("NOPAIN", 0)
		LLC2 Y 0 Bright A_JumpIfInventory("RedMana",1,8)
		LLC2 Y 0 A_JumpIfInventory("PowerEconomizer",1,2)
		LLC2 Y 0 A_FireCustomMissile("LifeLeechDamager",0,0,0,0)
		LLC2 Y 1
		LLC2 Y 0 Bright A_ChangeFlag("NOPAIN", 1)
		LLC2 Y 0 //ACS_NamedExecute("s851",0,random(20,-20),random(-10,10),0)
		LLC2 Y 1 Bright A_FireCustomMissile("LifeLeechFireball",random(-3,3),0,0,0,0)
		LLC2 Y 0 A_Jump(256,3)
		LLC2 Y 0 //ACS_NamedExecute("s851",0,random(20,-20),random(-10,10),0)
		LLC2 Y 2 Bright A_FireCustomMissile("LifeLeechFireball",random(-3,3),1,0,0,0)
		LLC2 Z 2 Bright
		LLC2 "[" 0 Bright A_JumpIfInventory("RedMana",1,6)
		LLC2 "[" 0 A_JumpIfInventory("PowerEconomizer",1,2)
		LLC2 "[" 0 A_FireCustomMissile("LifeLeechDamager",0,0,0,0)
		LLC2 "[" 0 //ACS_NamedExecute("s851",0,random(20,-20),random(-10,10),0)
		LLC2 "[" 2 Bright A_FireCustomMissile("LifeLeechFireball",random(-3,3),0,0,0,0)
		LLC2 "[" 0 A_Jump(256,3)
		LLC2 "[" 0 //ACS_NamedExecute("s851",0,random(20,-20),random(-10,10),0)
		LLC2 "[" 2 Bright A_FireCustomMissile("LifeLeechFireball",random(-3,3),1,0,0,0)
		LLC3 A 2 Bright
		LLC2 "]" 0 Bright A_JumpIfInventory("RedMana",1,6)
		LLC2 "]" 0 A_JumpIfInventory("PowerEconomizer",1,2)
		LLC2 "]" 0 A_FireCustomMissile("LifeLeechDamager",0,0,0,0)
		LLC2 "]" 0 //ACS_NamedExecute("s851",0,random(20,-20),random(-10,10),0)
		LLC2 "]" 2 Bright A_FireCustomMissile("LifeLeechFireball",random(-3,3),0,0,0,0)
		LLC2 "]" 0 A_Jump(256,3)
		LLC2 "]" 0 //ACS_NamedExecute("s851",0,random(20,-20),random(-10,10),0)
		LLC2 "]" 2 Bright A_FireCustomMissile("LifeLeechFireball",random(-3,3),1,0,0,0)
		LLC2 "]" 0 Bright A_ChangeFlag("NOPAIN", 0)
		LLCH FG 3 Bright 
		LLCH H 6 Bright A_GunFlash
		LLCH GFCBA 3
		Goto Ready
	AltFire:
		LLC2 A 0 A_TakeInventory("RedMana",15)
		LLCH A 0 A_DropInventory("LifeLeechTurret")
		LLCH A 0 A_TakeInventory("Weapon7Count",1)
		LLCH A 0 A_TakeInventory("AEoDLifeLeech",1)
		Goto Ready
	Flash:
		LLFL A 6 Bright
		Stop
	}
}

Actor LifeLeechPickup : CustomInventory // 6194
{
	+FLOATBOB
	Inventory.PickupMessage "Picked up the Life Leech"
	Inventory.PickupSound "LifeLeech/Pickup"
	Scale 0.5
	States
	{
	Spawn:
		WPLL A -1
		Loop
	Pickup:
		WPLL A 0 A_GiveInventory("LifeLeechTurret",1)
		WPLL A 0 A_GiveInventory("AEoDLifeLeech",1)
		Stop
	}
}

Actor LifeLeechTurret : CustomInventory
{
	+FRIENDLY
	+LOOKALLAROUND
	+FLOORCLIP
	+MISSILEMORE
	+MISSILEEVENMORE
	+EXPLODEONWATER
	Inventory.MaxAmount 1
	Inventory.PickupMessage "Recovered the Life Leech"
	Inventory.PickupSound "BloodShotgun/Pickup"
	Radius 10
	Height 32
	Speed 0
	Scale 0.5
	States
	{
	Spawn:
		LLTU A 0 A_ChangeFlag("DROPPED",0)
		LLTU A 6
		LLTU ABCDEFGH 4 A_LookEx(0,0,512,512,360,"See")
		Goto Spawn+2
	Use:
		TNT1 A 0
		Stop
	See:
		LLTU ABCDEFGH 4 A_Chase
		Loop
	Missile:
		LLTU I 0 A_FaceTarget
		LLTU I 0 A_PlaySound("FireDemonAttack")
		LLTU I 2 Bright A_CustomMissile("TurretFireball",36,0,0)
		LLTU I 2 Bright
		LLTU I 0 A_SpidRefire
		Goto Missile
	Pickup:
		LLTU A 0 A_JumpIfInventory("AEoDLifeLeech",1,5)
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+3
		LLTU A 0 A_JumpIfInventory("Weapon7Count",3,4)
		LLTU A 0 A_GiveInventory("AEoDLifeLeech",1)
		LLTU A 0 A_GiveInventory("Weapon7Count",1)
		LLTU A 0
		Stop
		LLTU A 0 ACS_NamedExecute("s798",0,7,95,0)
		Fail
	}
}

Actor LifeLeechFireball
{
	+FIREDAMAGE
	PROJECTILE
	+NODAMAGETHRUST
	DamageType "Unholy"
	Speed 36
	Damage 6
	Radius 8
	Height 8
	DeathSound "LLFireball/Explode"
	Scale 0.45
	RenderStyle Add
	Translation "0:255=%[0,0,0]:[2,1,0]"
	States
	{
	Spawn:
		STAR J 0 A_Jump(127,3)
		STAR J 0 Bright ThrustThingZ(0,random(0,3),0,1)
		STAR J 0 A_Jump(256,2)
		STAR J 0 Bright ThrustThingZ(0,random(0,3),1,1)
		VOR2 FGHI 2 A_SpawnItemEx("LifeLeechFireballTrail",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION)
		Goto Spawn+4
	Death:
		TNT1 A 0 A_SetTranslucent(0.6,1)
		FRME A 2 Bright A_Explode(95, 80, 0)
		TNT1 AAA 0 A_SpawnItemEx("LeechExploParticle",0,0,0,frandom(0.2,1),0,frandom(1,-1),random(0,359),SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION)
		FRME BCDEFGHIJKLMNOPQRS 2 Bright A_FadeOut(0.06)
		Stop
	}
}

Actor LeechExploParticle
{
	+NOINTERACTION
	Speed 0
	Radius 3
	Height 5
	RenderStyle Add
	Alpha 0.7
	Scale 0.3
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_Jump(128,2,4,5)
		X003 ABCDE 1 Bright A_FadeOut(0.025)
		TNT1 A 0 A_ScaleVelocity(0.8)
		X003 FGHIJ 1 Bright A_FadeOut(0.025)
		TNT1 A 0 A_ScaleVelocity(0.7)
		X003 KLMNO 1 Bright A_FadeOut(0.025)
		TNT1 A 0 A_ScaleVelocity(0.55)
		X003 PQRST 1 Bright A_FadeOut(0.025)
		TNT1 A 0 A_ScaleVelocity(0.45)
		X003 UVWXYZ 1 Bright A_FadeOut(0.025)
		Stop
	}
}

Actor LifeLeechFireballTrail
{
	+NOINTERACTION
	RenderStyle Add
	Scale 0.6
	States
	{
	Spawn:
		OKSP BCDEF 3 A_FadeOut(0.1)
		OKSP F 1 A_FadeOut(0.1)
		Wait
	}
}

Actor TurretFireball
{
	PROJECTILE
	+SEEKERMISSILE
	DamageType "Unholy"
	Speed 28
	Damage 8
	Radius 3
	Height 6
	Scale 0.3
	States
	{
	Spawn:
		VOR2 FGHI 3 Bright A_SeekerMissile(4,4)
		Loop
	Death:
		TNT1 A 0
		Stop
	}
}

Actor LifeLeechDamager
{
	PROJECTILE
	+PIERCEARMOR
	+NODAMAGETHRUST
	Speed 0
	Radius 0
	Height 0
	RenderStyle None
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_Explode(2,4,1,0,1)
		Stop
	}
}

Actor LifeLeechDrop : CustomInventory
{
	Inventory.MaxAmount 1
	States
	{
	Use:
		TNT1 A 0
		TNT1 A 0 A_SpawnItemEx("DroppedLifeLeech",0,0,32,8,0,0,0,SXF_NOCHECKPOSITION,0)
		TNT1 A 0 A_TakeInventory("AEoDLifeLeech",1)
		TNT1 A 0 A_TakeInventory("LifeLeechTurret",1)
		Stop
	}
}

Actor DroppedLifeLeech
{
	Radius 16
	Height 20
	Scale 0.5
	States
	{
	Spawn:
		WPLL A 15
		TNT1 A 0 A_SpawnItemEx("AEoDLifeLeechNoAmmo",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER,0)
		Stop
	}
}

Actor AEoDLifeLeechNoAmmo : AEoDLifeLeechItem
{
	+FLOORCLIP
	+FLOATBOB
	+INVENTORY.IGNORESKILL
	Scale 0.5
	Inventory.Amount 1
	Inventory.PickupMessage "Picked up the Life Leech"
	Inventory.PickupSound "BloodShotgun/Pickup"
	States
	{
	Spawn:
		WPLL A -1
		Loop
	Pickup:
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",7) <= 0,"Nothing")
		TNT1 A 0 A_JumpIfInventory("RedMana",30,"Ammo")
		TNT1 A 0 A_GiveInventory("Weapon7Count",1)
		TNT1 A 0 A_TakeInventory("Weapon7Count",1)
		TNT1 A 0 A_GiveInventory("LifeLeechDrop",1)
		TNT1 A 0 A_GiveInventory("LifeLeechTurret",1)
		TNT1 A 0 A_GiveInventory("AEoDLifeLeech",1)
		TNT1 A 0 A_TakeInventory("RedMana",30)
		TNT1 A 0 	
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDLifeLeech",1,"Ammo")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		TNT1 A 0 ACS_NamedExecute("s798",0,7,95,0)
		Fail
	Ammo:
		TNT1 A 0 A_TakeInventory("RedMana",30)
		TNT1 A 0 A_JumpIfInventory("AEoDLifeLeech",1,2)
		TNT1 A 0 A_GiveInventory("Weapon7Count",1)
		TNT1 A 0 A_TakeInventory("Weapon7Count",1)
		TNT1 A 0 A_GiveInventory("LifeLeechDrop",1)
		TNT1 A 0 A_GiveInventory("LifeLeechTurret",1)
		TNT1 A 0 A_GiveInventory("AEoDLifeLeech",1)
		Stop
	}
}

//==================================================================================
//==================================================================================

//==================================================================================
//==================================================================================

Actor AEoDTeslaCannonItem : CustomInventory 6116
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL
	Scale 0.4
	Inventory.Amount 1
	Inventory.PickupMessage "You have obtained a tesla cannon."
	Inventory.PickupSound "reilsss/weappickup/ligthinggun"
	States
	{
	Spawn:
		TSLA A -1
		Loop

	Pickup:
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",7) <= 0,"Nothing")
		TNT1 A 0 A_JumpIfInventory("AEoDTeslaCannonCount",2,"Ammo")
		TNT1 A 0 A_JumpIfInventory("AEoDTeslaCannonCount",1,"Pickup2")
		TNT1 A 0 A_GiveInventory("Weapon7Count",1)
		TNT1 A 0 A_GiveInventory("TeslaCannonDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDTeslaCannon",1)
		TNT1 A 0 A_GiveInventory("AEoDTeslaCannonCount",1)
		TNT1 A 0 	
		TNT1 A 0 A_JumpIfInventory("NoWeaponSwitch",1,2)
		TNT1 A 0 A_SelectWeapon("AEoDTeslaCannon")
		TNT1 A 0
		Stop
	Pickup2:
		TNT1 A 0 A_GiveInventory("TeslaCannonDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDTeslaCannon",1)
		TNT1 A 0 A_GiveInventory("AEoDTeslaCannonCount",1)
		TNT1 A 0 	
		TNT1 A 0 A_JumpIfInventory("NoWeaponSwitch",1,2)
		TNT1 A 0 A_SelectWeapon("AEoDTeslaCannon")
		TNT1 A 0
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDTeslaCannonCount",2,"Ammo")
		TNT1 A 0 A_JumpIfInventory("AEoDTeslaCannonCount",1,"Pickup2")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		TNT1 A 0 ACS_NamedExecute("s798",0,7,100,0)
		Fail
	Ammo:
		TNT1 A 0 A_GiveInventory("AEoDTeslaCannon",1)
		Stop
	}
}

Actor AEoDTeslaCannon : Weapon // 6116
{
	+FLOORCLIP
	+WEAPON.CHEATNOTWEAPON
	+INVENTORY.IGNORESKILL
	Weapon.AmmoType "AECell"
	Weapon.AmmoType2 "AECell"
	Weapon.AmmoGive1 40
	Weapon.AmmoUse 1
	Weapon.AmmoUse2 30
	Weapon.SelectionOrder 10400
	Inventory.PickupMessage "You have obtained a tesla cannon."
	Obituary "%o was gooified by %k's tesla cannon."
	Inventory.PickupSound "reilsss/weappickup/ligthinggun"
	weapon.upsound "weapons/plasma/draw"
	Tag "Tesla cannon"
	Scale 0.4
	States
	{
	Spawn:
		TSLA A 10
		Loop
	Ready:
		TNT1 A 0 A_TakeInventory("TeslaCannonDropCheck",1)
		TNT1 A 0 A_JumpIfInventory("AEoDTeslaCannonCount",2,"Ready2")
		TSLA B 1 A_WeaponReady
		Loop
	Ready2:
		TNT1 A 0 A_JumpIfInventory("TeslaCannonDropCheck",1,"Ready")
		TS2A A 1 A_WeaponReady
		Loop
	Deselect:
		TNT1 A 0 	
		TNT1 A 0 A_JumpIfInventory("AEoDTeslaCannonCount",2,"Deselect2")
		TSLA B 1 A_Lower
		TNT1 AA 0 A_Lower
		Loop
	Deselect2:
		TNT1 A 0 	
		TS2A A 1 A_Lower
		TNT1 AA 0 A_Lower
		Loop
	Select:
		TNT1 A 0 	
		TNT1 A 0 A_JumpIfInventory("AEoDTeslaCannonCount",2,"Select2")
		TSLA B 1 A_Raise
		TNT1 AA 0 A_Raise
		Loop
	Select2:
		TNT1 A 0 	
		TS2A A 1 A_Raise
		TNT1 AA 0 A_Raise
		Loop
	Fire:
		TNT1 A 0 A_JumpIfInventory("AEoDTeslaCannonCount",2,"Fire2")
		TSLA B 0 A_PlayWeaponSound("caleb/tesla")
		TSLA B 1 A_GunFlash
		TNT1 A 0 A_Light1
		TNT1 A 0 //ACS_NamedExecute("s851",0,10,random(-3,3),0)
		TSLA B 2 Bright A_FireCustomMissile("TeslaShot",0,1,5,3)
		TSLA B 1 //ACS_NamedExecute("s851",0,-10,0,0)
		TNT1 A 0 A_Light0
		TSLA B 1 A_Refire
		Goto Ready
	Fire2:
		TS2A A 0 A_PlayWeaponSound("caleb/tesla")
		TS2A A 1
		TNT1 A 0 A_Light1
		TNT1 A 0 //ACS_NamedExecute("s851",0,10,random(-3,3),0)
		TS2A B 0 Bright A_FireCustomMissile("TeslaShot",0,1,5,3)
		TS2A B 2 Bright A_FireCustomMissile("TeslaShot",0,1,-5,3)
		TS2A A 1 //ACS_NamedExecute("s851",0,-10,0,0)
		TNT1 A 0 A_Light0
		TS2A A 1 A_Refire
		Goto Ready
	AltFire:
		TNT1 A 0 A_JumpIfInventory("AEoDTeslaCannonCount",2,"AltFire2")
		TSLA CDEFGHIJ 1
		TSLA J 0 Bright A_PlayWeaponSound("caleb/teslaalt")
		TSLA J 0 Bright A_Recoil(3)
		TSLA J 0 Bright A_GunFlash
		TNT1 A 0 //ACS_NamedExecute("s851",0,80,random(-3,3),0)
		TSLA J 2 Bright A_FireCustomMissile("TeslaShotAlt",0,1,5,3)
		TSLA KKLL 1 //ACS_NamedExecute("s851",0,-20,0,0)
		TSLA MN 2
		TSLA JIHGFEDC 1
		TSLA B 4
		Goto Ready
	AltFire2:
		TNT1 A 0 A_JumpIfInventory("PowerQuickFire",1,"AltFire2Quick")
		TS2A CDEFGHIJ 1
		TS2A K 0 Bright A_PlayWeaponSound("caleb/teslaalt")
		TS2A K 0 Bright A_Recoil(3)
		TNT1 A 0 //ACS_NamedExecute("s851",0,80,random(-3,3),0)
		TS2A K 1 Bright A_FireCustomMissile("TeslaShotAlt",0,1,5,3)
		TS2A LLMM 1 //ACS_NamedExecute("s851",0,-20,0,0)
		TS2A NO 1
		TS2A PQRSTU 1
		TS2A V 0 Bright A_PlayWeaponSound("caleb/teslaalt")
		TS2A V 0 Bright A_Recoil(3)
		TNT1 A 0 //ACS_NamedExecute("s851",0,80,random(-3,3),0)
		TS2A V 1 Bright A_FireCustomMissile("TeslaShotAlt",0,1,-5,3)
		TS2A WWXX 1 //ACS_NamedExecute("s851",0,-20,0,0)
		TS2A X 0 A_ReFire("AltHold2")
		TS2B JK 1
		TS2B LMNOPQRS 1
		Goto Ready
	AltFire2Quick:
		TNT1 B 0 A_JumpIfInventory("PowerQuickFire",1,1)
		Goto AltFire
		
		TS2A CEGI 1
		TS2A K 0 Bright A_PlayWeaponSound("caleb/teslaalt")
		TS2A K 0 Bright A_Recoil(3)
		TNT1 A 0 //ACS_NamedExecute("s851",0,80,random(-3,3),0)
		TS2A K 1 Bright A_FireCustomMissile("TeslaShotAlt",0,1,5,3)
		TS2A LLMM 1 //ACS_NamedExecute("s851",0,-20,0,0)
		TS2A NO 1
		TS2A PRT 1
		TS2A V 0 Bright A_PlayWeaponSound("caleb/teslaalt")
		TS2A V 0 Bright A_Recoil(3)
		TNT1 A 0 //ACS_NamedExecute("s851",0,80,random(-3,3),0)
		TS2A V 1 Bright A_FireCustomMissile("TeslaShotAlt",0,1,-5,3)
		TS2A WWXX 1 //ACS_NamedExecute("s851",0,-20,0,0)
		TS2A X 0 A_ReFire("AltHold2Quick")
		TS2B JK 1
		TS2B LNPR 1
		Goto Ready
	AltHold2:
		TNT1 A 0 A_JumpIfInventory("PowerQuickFire",1,"AltFire2Quick")
		TS2A YZ 1
		TS2B ABCDEF 1
		TS2B G 0 Bright A_PlayWeaponSound("caleb/teslaalt")
		TS2B G 0 Bright A_Recoil(3)
		TNT1 A 0 //ACS_NamedExecute("s851",0,80,random(-3,3),0)
		TS2B G 1 Bright A_FireCustomMissile("TeslaShotAlt",0,1,5,3)
		TS2B HHII 1 //ACS_NamedExecute("s851",0,-20,0,0)
		TS2A NO 1
		TS2A PQRSTU 1
		TS2A V 0 Bright A_PlayWeaponSound("caleb/teslaalt")
		TS2A V 0 Bright A_Recoil(3)
		TNT1 A 0 //ACS_NamedExecute("s851",0,80,random(-3,3),0)
		TS2A V 1 Bright A_FireCustomMissile("TeslaShotAlt",0,1,-5,3)
		TS2A WWXX 1 //ACS_NamedExecute("s851",0,-20,0,0)
		TS2A X 0 A_ReFire
		TS2B JK 1
		TS2B LMNOPQRS 1
		Goto Ready
	AltHold2Quick:
		TNT1 B 0 A_JumpIfInventory("PowerQuickFire",1,1)
		Goto AltHold2
		
		TS2A YZ 1
		TS2B ACE 1
		TS2B G 0 Bright A_PlayWeaponSound("caleb/teslaalt")
		TS2B G 0 Bright A_Recoil(3)
		TNT1 A 0 //ACS_NamedExecute("s851",0,80,random(-3,3),0)
		TS2B G 1 Bright A_FireCustomMissile("TeslaShotAlt",0,1,5,3)
		TS2B HHII 1 //ACS_NamedExecute("s851",0,-20,0,0)
		TS2A NO 1
		TS2A PRT 1
		TS2A V 0 Bright A_PlayWeaponSound("caleb/teslaalt")
		TS2A V 0 Bright A_Recoil(3)
		TNT1 A 0 //ACS_NamedExecute("s851",0,80,random(-3,3),0)
		TS2A V 1 Bright A_FireCustomMissile("TeslaShotAlt",0,1,-5,3)
		TS2A WWXX 1 //ACS_NamedExecute("s851",0,-20,0,0)
		TS2A X 0 A_ReFire
		TS2B JK 1
		TS2B LNPR 1
		Goto Ready
	Flash:
		TESF E 2 A_Light1
		TNT1 A 0 A_Light0
		Stop
	AltFlash:
		TNT1 A 1
		TESF A 2 A_Light2
		TESF B 2 A_Light1
		TESF C 2 A_Light0
		TESF D 2
		Stop
	}
}

Actor TeslaShot
{
	Speed 32
	Damage 8
	Radius 5
	Height 5
	Scale 0.4
	RenderStyle Add
	PROJECTILE
	+NODAMAGETHRUST
	DamageType "Electric"
	DeathSound "LLFireball/Explode"
	States
	{
	Spawn:
		TEFX ABCDEFGHIJKLMNOPQRST 2 Bright A_SpawnItemEx("ShuricaneSpark",0,0,0,frandom(2.0,-2.0),frandom(2.0,-2.0),frandom(2.0,-2.0),0,SXF_NOCHECKPOSITION,210)
		Loop
	Death:
		TNT1 A 10 A_SpawnItemEx("TeslaPrimaryExploSpawn",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		Stop
	}
}

Actor TeslaPrimaryExploSpawn
{
	+NOINTERACTION
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_SpawnItemEx("TeslaPrimaryExplo",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		
		TNT1 A 0 A_SpawnItemEx("TeslaFXv6",0,0,0,0, 	1.65,0.4,0,SXF_NOCHECKPOSITION)
		TNT1 A 0 A_SpawnItemEx("TeslaFXv6",0,0,0,0, 	1.2,1.2,0,SXF_NOCHECKPOSITION)
		TNT1 A 0 A_SpawnItemEx("TeslaFXv6",0,0,0,0, 	0.4,1.65,32)
		
		TNT1 A 0 A_SpawnItemEx("TeslaFXv6",0,0,0,0, 	1.65,-0.4,0,SXF_NOCHECKPOSITION)
		TNT1 A 0 A_SpawnItemEx("TeslaFXv6",0,0,0,0, 	1.2,-1.2,0,SXF_NOCHECKPOSITION)
		TNT1 A 0 A_SpawnItemEx("TeslaFXv6",0,0,0,0, 	0.4,-1.65,32)

		TNT1 A 0 A_SpawnItemEx("TeslaFXv6",0,0,0,0, 	-1.65,0.4,0,SXF_NOCHECKPOSITION)
		TNT1 A 0 A_SpawnItemEx("TeslaFXv6",0,0,0,0, 	-1.2,1.2,0,SXF_NOCHECKPOSITION)
		TNT1 A 0 A_SpawnItemEx("TeslaFXv6",0,0,0,0, 	-0.4,1.65,32)

		TNT1 A 0 A_SpawnItemEx("TeslaFXv6",0,0,0,0, 	-1.65,-0.4,0,SXF_NOCHECKPOSITION)
		TNT1 A 0 A_SpawnItemEx("TeslaFXv6",0,0,0,0, 	-1.2,-1.2,0,SXF_NOCHECKPOSITION)
		TNT1 A 0 A_SpawnItemEx("TeslaFXv6",0,0,0,0, 	-0.4,-1.65,32)

		TNT1 A 1
		Stop
	}
}

Actor TeslaPrimaryExplo
{
	+NOINTERACTION
	RenderStyle Add
	Scale 0.15
	States
	{
	Spawn:
		TXP1 A 3 Bright A_FadeOut(0.06)	TNT1 A 0 A_SetScale(scalex-0.015,scaley-0.015)
		TXP1 B 3 Bright A_FadeOut(0.06)	TNT1 A 0 A_SetScale(scalex-0.015,scaley-0.015)
		TXP1 C 3 Bright A_FadeOut(0.06)	TNT1 A 0 A_SetScale(scalex-0.015,scaley-0.015)
		TXP1 D 3 Bright A_FadeOut(0.06)	TNT1 A 0 A_SetScale(scalex-0.015,scaley-0.015)
		TXP1 E 3 Bright A_FadeOut(0.06)	TNT1 A 0 A_SetScale(scalex-0.015,scaley-0.015)
		TXP1 F 3 Bright A_FadeOut(0.06)	TNT1 A 0 A_SetScale(scalex-0.015,scaley-0.015)
		TXP1 G 3 Bright A_FadeOut(0.06)	TNT1 A 0 A_SetScale(scalex-0.015,scaley-0.015)
		TXP1 H 3 Bright A_FadeOut(0.06)	TNT1 A 0 A_SetScale(scalex-0.015,scaley-0.015)
		TXP1 I 3 Bright A_FadeOut(0.06)	TNT1 A 0 A_SetScale(scalex-0.015,scaley-0.015)
		Stop
	}
}

Actor TeslaFXv6
{
	+NOINTERACTION
	RenderStyle Add 
	Translation "0:255=%[0,0,0]:[0.6,0.6,2.0]"
	Scale 0.32
	Alpha 0.7
	States
	{
	Spawn:
		TNT1 A 0 
		TNT1 A 0 A_SetScale(frandom(0.4,0.7),frandom(0.4,0.7))
		X103 ABC 2 Bright A_FadeOut(0.07)
		//TNT1 A 0 A_ScaleVelocity(0.5)
		X103 DEF 2 Bright A_FadeOut(0.07)
		TNT1 A 0 A_ScaleVelocity(0.5)
		X103 GHIJKL 2 Bright A_FadeOut(0.07)
		TNT1 A 0 A_ScaleVelocity(0.5)
		X103 MNOPR 2 Bright A_FadeOut(0.07)
		TNT1 A 0 A_ScaleVelocity(0.5)
		X103 STUVWXYZ 2 Bright A_FadeOut(0.07)
		TNT1 A 0 A_ScaleVelocity(0.5)
		X104 ABCDEFGHIJKLMNOPQRSTUV 2 Bright A_FadeOut(0.08)
		Goto Spawn+2
	}
}

Actor TeslaFX
{
	Scale 0.35
	RenderStyle Add
	+NOINTERACTION
	States
	{
	Spawn:
		RFX1 B 2 Bright
		RFX1 B 0 A_Jump(128,1)
		Loop
		RFX1 B 2 Bright
		RFX1 B 1 Bright A_FadeOut
		Wait
	Death:
		TNT1 A 1
		Stop
	}
}

Actor TeslaShotAlt
{
	Speed 26
	Radius 5
	Height 5
	Damage 20
	Scale 0.45
	PROJECTILE
	+NODAMAGETHRUST
	RenderStyle Add		  
	DamageType "Electric"
	States
	{
	Spawn:
		X024 AABBCCDDEEFFGGHHIIJJ 1 Bright A_SpawnItemEx("TeslaShotAltTrail",0,0,0,0,0,0,32)
		Loop
	Death:
		TNT1 A 0 A_SpawnItemEx("TeslaShotAltExplode1",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION,0)
		TNT1 A 0 A_SpawnItemEx("TeslaSparksSpawner",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		TNT1 A 10 A_PlaySound("caleb/teslaalt/explode")
		Stop
	}
}

Actor TeslaShotAltTrail
{
	+NOINTERACTION
	RenderStyle Add
	Scale 0.4
	States
	{
	Spawn:
		X024 ABCDEFGHIJ 2 Bright A_FadeOut(0.1)
		Loop
	}
}

Actor TeslaSparksSpawner
{
	var int user_count;
	var int user_chance;
	+NOINTERACTION
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_SetUserVar("user_chance",250)
	Looper:
		TNT1 A 0 A_JumpIf(user_count==45,"Ender")
		TNT1 AAAAAA 0 A_SpawnItemEx("AxePuffGlowSpark",0,0,0,frandom(1,6.0),0,frandom(5,-5),random(0,359),SXF_NOCHECKPOSITION,user_chance)
		TNT1 A 0 A_SetUserVar("user_count",user_count+1)
		TNT1 A 1 A_SetUserVar("user_chance",user_chance-5)
		Loop
	Ender:
		TNT1 A 10
		Stop
	}
}


Actor TeslaShotAltExplode1
{
	+NOGRAVITY
	+NOINTERACTION
	+NODAMAGETHRUST
	+FORCERADIUSDMG
	RenderStyle Add
	DamageType "Electric"
	Scale 0.40
	States
	{
	Spawn:
		TXP1 A 0
		TXP1 A 2 Bright 
		TXP1 A 1 Bright A_Explode(50,48,1)
		TXP1 A 0 Bright A_SpawnItemEx("TeslaShotAltExplode2",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION,0)
		Stop
	}
}

Actor TeslaShotAltExplode2 : TeslaShotAltExplode1
{
	Scale 0.48
	States
	{
	Spawn:
		TXP1 B 0
		TXP1 B 2 Bright
		TXP1 B 1 Bright A_Explode(50,56,1)
		TXP1 B 0 Bright A_SpawnItemEx("TeslaShotAltExplode3",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION,0)
		Stop
	}
}

Actor TeslaShotAltExplode3 : TeslaShotAltExplode1
{
	Scale 0.56
	States
	{
	Spawn:
		TXP1 C 0
		TXP1 C 2 Bright
		TXP1 C 1 Bright A_Explode(50,64,1)
		TXP1 C 0 Bright A_SpawnItemEx("TeslaShotAltExplode4",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION,0)
		Stop
	}
}

Actor TeslaShotAltExplode4 : TeslaShotAltExplode1
{
	Scale 0.64
	States
	{
	Spawn:
		TXP1 D 0
		TXP1 D 2 Bright
		TXP1 D 1 Bright A_Explode(50,72,1)
		TXP1 D 0 Bright A_SpawnItemEx("TeslaShotAltExplode5",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION,0)
		Stop
	}
}

Actor TeslaShotAltExplode5 : TeslaShotAltExplode1
{
	Scale 0.72
	States
	{
	Spawn:
		TXP1 E 0
		TXP1 E 2 Bright
		TXP1 E 1 Bright A_Explode(50,80,1)
		TXP1 E 0 Bright A_SpawnItemEx("TeslaShotAltExplode6",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION,0)
		Stop
	}
}

Actor TeslaShotAltExplode6 : TeslaShotAltExplode1
{
	Scale 0.8
	States
	{
	Spawn:
		TXP1 F 0
		TXP1 F 2 Bright
		TXP1 F 1 Bright A_Explode(50,88,1)
		TXP1 F 0 Bright A_SpawnItemEx("TeslaShotAltExplode7",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION,0)
		Stop
	}
}

Actor TeslaShotAltExplode7 : TeslaShotAltExplode1
{
	Scale 0.88
	States
	{
	Spawn:
		TXP1 G 0
		TXP1 G 2 Bright
		TXP1 G 1 Bright A_Explode(50,96,1)
		TXP1 G 0 Bright A_SpawnItemEx("TeslaShotAltExplode8",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION,0)
		Stop
	}
}

Actor TeslaShotAltExplode8 : TeslaShotAltExplode1
{
	Scale 0.96
	States
	{
	Spawn:
		TXP1 H 0
		TXP1 H 2 Bright
		TXP1 H 1 Bright A_Explode(50,104,1)
		TXP1 H 0 Bright A_SpawnItemEx("TeslaShotAltExplode9",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION,0)
		Stop
	}
}

Actor TeslaShotAltExplode9 : TeslaShotAltExplode1
{
	Alpha 0.96
	Scale 1.04
	States
	{
	Spawn:
		TXP1 I 0
		TXP1 I 2 Bright
		TXP1 I 1 Bright A_Explode(50,112,1)
		TXP1 I 0 Bright A_SpawnItemEx("TeslaShotAltExplode10",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION,0)
		Stop
	}
}

Actor TeslaShotAltExplode10 : TeslaShotAltExplode1
{
	Alpha 0.84
	Scale 1.12
	States
	{
	Spawn:
		TXP1 J 0
		TXP1 J 2 Bright
		TXP1 J 1 Bright A_Explode(50,120,1)
		TXP1 J 0 Bright A_SpawnItemEx("TeslaShotAltExplode11",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION,0)
		Stop
	}
}

Actor TeslaShotAltExplode11 : TeslaShotAltExplode1
{
	Alpha 0.72
	Scale 1.2
	States
	{
	Spawn:
		TXP1 K 0
		TXP1 K 2 Bright
		TXP1 K 1 Bright A_Explode(50,128,1)
		TXP1 K 0 Bright A_SpawnItemEx("TeslaShotAltExplode12",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION,0)
		Stop
	}
}

Actor TeslaShotAltExplode12 : TeslaShotAltExplode1
{
	Alpha 0.6
	Scale 1.28
	States
	{
	Spawn:
		TXP1 L 0
		TXP1 L 2 Bright
		TXP1 L 1 Bright A_Explode(50,136,1)
		TXP1 L 0 Bright A_SpawnItemEx("TeslaShotAltExplode13",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION,0)
		Stop
	}
}

Actor TeslaShotAltExplode13 : TeslaShotAltExplode1
{
	Alpha 0.48
	Scale 1.36
	States
	{
	Spawn:
		TXP1 M 0
		TXP1 M 2 Bright
		TXP1 M 1 Bright A_Explode(50,144,1)
		TXP1 M 0 Bright A_SpawnItemEx("TeslaShotAltExplode14",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION,0)
		Stop
	}
}

Actor TeslaShotAltExplode14 : TeslaShotAltExplode1
{
	Alpha 0.36
	Scale 1.44
	States
	{
	Spawn:
		TXP1 N 0
		TXP1 N 2 Bright
		TXP1 N 1 Bright A_Explode(50,152,1)
		TXP1 N 0 Bright A_SpawnItemEx("TeslaShotAltExplode15",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION,0)
		Stop
	}
}

Actor TeslaShotAltExplode15 : TeslaShotAltExplode1
{
	Alpha 0.24
	Scale 1.52
	States
	{
	Spawn:
		TXP1 O 0
		TXP1 O 2 Bright
		TXP1 O 1 Bright A_Explode(50,160,1)
		TXP1 O 0 Bright A_SpawnItemEx("TeslaShotAltExplode16",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION,0)
		Stop
	}
}

Actor TeslaShotAltExplode16 : TeslaShotAltExplode1
{
	Alpha 0.12
	Scale 1.6
	States
	{
	Spawn:
		TXP1 P 0
		TXP1 P 2 Bright
		TXP1 P 1 Bright A_Explode(50,168,1)
		Stop
	}
}

Actor AEoDTeslaCannonPickup : CustomInventory //6042
{
	Inventory.PickupMessage "You have obtained a tesla cannon."
	Inventory.PickupSound "reilsss/weappickup/ligthinggun"
	Scale 0.4
	States
	{
	Spawn:
		TSLA A -1
		Loop
	Pickup:
		TNT1 A 0 A_JumpIfInventory("AEoDTeslaCannonCount",2,4)
		TNT1 A 0 A_GiveInventory("AEoDTeslaCannonCount",1)
		TNT1 A 0 A_JumpIfInventory("NoWeaponSwitch",1,2)
		TNT1 A 0 A_SelectWeapon("AEoDTeslaCannon")
		TNT1 A 0 A_GiveInventory("AEoDTeslaCannon",1)
		TNT1 A 0
		Stop
	}
}

Actor AEoDTeslaCannonCount : Inventory
{
	Inventory.MaxAmount 2
	Inventory.Amount 1
}

Actor TeslaCannonDropCheck : Inventory
{
	Inventory.Amount 1
	Inventory.MaxAmount 1
}


Actor TeslaCannonDrop : CustomInventory
{
	Inventory.Amount 1
	Inventory.MaxAmount 2
	States
	{
	Use:
		TNT1 A 0
		TNT1 A 0 A_SpawnItemEx("DroppedTeslaCannon",0,0,32,8,0,0,0,SXF_NOCHECKPOSITION,0)
		TNT1 A 0 A_TakeInventory("AEoDTeslaCannonCount",1)
		Stop
	}
}

Actor DroppedTeslaCannon
{
	Radius 16
	Height 20
	Scale 0.4
	States
	{
	Spawn:
		TSLA A 15
		TNT1 A 0 A_SpawnItemEx("AEoDTeslaCannonNoAmmo",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER,0)
		Stop
	}
}

Actor AEoDTeslaCannonNoAmmo : AEoDTeslaCannonItem
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL
	Scale 0.4
	Inventory.Amount 1
	Inventory.PickupMessage "You have obtained a tesla cannon."
	Inventory.PickupSound "reilsss/weappickup/ligthinggun"
	States
	{
	Spawn:
		TSLA A -1
		Loop
	Pickup:
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",7) <= 0,"Nothing")
		TNT1 A 0 A_JumpIfInventory("AECell",40,"Ammo")
		TNT1 A 0 A_JumpIfInventory("AEoDTeslaCannonCount",2,"Ammo")
		TNT1 A 0 A_JumpIfInventory("AEoDTeslaCannonCount",1,"Pickup2")
		TNT1 A 0 A_GiveInventory("Weapon7Count",1)
		TNT1 A 0 A_GiveInventory("TeslaCannonDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDTeslaCannon",1)
		TNT1 A 0 A_GiveInventory("AEoDTeslaCannonCount",1)
		TNT1 A 0 A_TakeInventory("AECell",40)
		TNT1 A 0 	
		TNT1 A 0 A_JumpIfInventory("NoWeaponSwitch",1,2)
		TNT1 A 0 A_SelectWeapon("AEoDTeslaCannon")
		TNT1 A 0
		Stop
	Pickup2:
		TNT1 A 0 A_JumpIfInventory("AECell",40,"Ammo")
		TNT1 A 0 A_GiveInventory("TeslaCannonDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDTeslaCannon",1)
		TNT1 A 0 A_GiveInventory("AEoDTeslaCannonCount",1)
		TNT1 A 0 A_TakeInventory("AECell",40)
		TNT1 A 0 	
		TNT1 A 0 A_JumpIfInventory("NoWeaponSwitch",1,2)
		TNT1 A 0 A_SelectWeapon("AEoDTeslaCannon")
		TNT1 A 0
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDTeslaCannonCount",2,"Ammo")
		TNT1 A 0 A_JumpIfInventory("AEoDTeslaCannonCount",1,"Pickup2")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		TNT1 A 0 ACS_NamedExecute("s798",0,7,100,0)
		Fail
	Ammo:
		TNT1 A 0 A_TakeInventory("AECell",40)
		TNT1 A 0 A_JumpIfInventory("AEoDTeslaCannonCount",1,2)
		TNT1 A 0 A_GiveInventory("Weapon7Count",1)
		TNT1 A 0 A_GiveInventory("AEoDTeslaCannonCount",1)
		TNT1 A 0 A_GiveInventory("TeslaCannonDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDTeslaCannon",1)
		Stop
	}
}

//==================================================================================
//==================================================================================

//==================================================================================
//==================================================================================

Actor AEoDDevastatorItem : CustomInventory 6042
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL
	Scale 0.7
	Inventory.Amount 1
	Inventory.PickupMessage "You got the Devastator!"
	Inventory.PickupSound "reilsss/weappickup/deverator"
	States
	{
	Spawn:
		DVST A -1
		Loop
	Pickup:
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",7) <= 0,"Nothing")
		TNT1 A 0 A_JumpIfInventory("DevastatorCount",2,"Ammo")
		TNT1 A 0 A_JumpIfInventory("DevastatorCount",1,"Pickup2")
		TNT1 A 0 A_GiveInventory("Weapon7Count",1)
		TNT1 A 0 A_GiveInventory("DevastatorDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDDevastator",1)
		TNT1 A 0 A_GiveInventory("DevastatorCount",1)
		TNT1 A 0 	
		TNT1 A 0 A_JumpIfInventory("NoWeaponSwitch",1,2)
		TNT1 A 0 A_SelectWeapon("AEoDDevastator")
		TNT1 A 0
		Stop
	Pickup2:
		TNT1 A 0 A_GiveInventory("DevastatorDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDDevastator",1)
		TNT1 A 0 A_GiveInventory("DevastatorCount",1)
		TNT1 A 0 	
		TNT1 A 0 A_JumpIfInventory("NoWeaponSwitch",1,2)
		TNT1 A 0 A_SelectWeapon("AEoDDevastator")
		TNT1 A 0
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("DevastatorCount",2,"Ammo")
		TNT1 A 0 A_JumpIfInventory("DevastatorCount",1,"Pickup2")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		TNT1 A 0 ACS_NamedExecute("s798",0,7,91,0)
		Fail
	Ammo:
		TNT1 A 0 A_GiveInventory("AEoDDevastator",1)
		Stop
	}
}

Actor AEoDDevastator : Weapon // 6042
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL
	+WEAPON.CHEATNOTWEAPON
	Weapon.AmmoType1 "MiniRockets"
	Weapon.AmmoType2 "AECell"
	Weapon.AmmoGive1 30
	Weapon.AmmoGive2 30
	Weapon.AmmoUse1 1
	Weapon.AmmoUse2 2
	Weapon.SelectionOrder 12525
	Inventory.PickupMessage "You got the Devastator!"
	Inventory.PickupSound "reilsss/weappickup/deverator"
	weapon.upsound "weapons/rlan/draw"
	Tag "Devastator"
	Scale 0.7
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_SpawnItemEx("DevastatorPickup",0,0,0,0,0,0,0,0)
		Stop
	Ready:
		TNT1 A 0 A_TakeInventory("DevastatorDropCheck",1)
		TNT1 A 0 A_JumpIfInventory("DevastatorCount",2,"Ready2")
		DEVG A 1 A_WeaponReady
		Loop
	Ready2:
		TNT1 A 0 A_JumpIfInventory("DevastatorDropCheck",1,"Ready")
		DEVG M 1 A_WeaponReady
		Loop
	Deselect:
		TNT1 A 0 A_JumpIfInventory("DevastatorCount",2,"Deselect2")
		TNT1 A 0 	
		DEVG A 1 A_Lower
		TNT1 AA 0 A_Lower
		Goto Deselect+1
	Deselect2:
		TNT1 A 0 	
		DEVG M 1 A_Lower
		TNT1 AA 0 A_Lower
		Loop
	Select:
		TNT1 A 0 A_JumpIfInventory("DevastatorCount",2,"Select2")
		TNT1 A 0 	
		DEVG A 1 A_Raise
		TNT1 AA 0 A_Raise
		Goto Select+1
	Select2:
		DEVG M 1 A_Raise
		TNT1 A 0 	
		TNT1 AA 0 A_Raise
		Loop
	Fire:
		TNT1 A 0 A_JumpIfInventory("DevastatorCount",2,"Fire2")
		TNT1 A 0 A_JumpIfInventory("DevastatorShotCount",2,"Fire13")
		TNT1 A 0 A_JumpIfInventory("DevastatorShotCount",1,"Fire12")
		TNT1 A 0 A_GiveInventory("DevastatorShotCount",1)
		TNT1 A 0 A_Light2
		TNT1 A 0 A_PlaySound("reilsss/weapons/devesatorfire", CHAN_WEAPON, 1.0, 0)
		TNT1 A 0 A_FireCustomMissile("GunSmallSmokeSpawner",0,0,6,2)
		DEVG B 0 A_FireCustomMissile("DevastatorShot",random(2,-2),1,3,3)
		TNT1 A 0 A_SetPitch(pitch-3)
		DEVG BBB 1 A_SetPitch(pitch+1)
		DEVG C 1 A_Light1
		DEVG D 1
		DEVG E 1 A_Light0
		DEVG E 0 A_ReFire("Fire12")
		Goto Ready
	Fire12:
		TNT1 A 0 A_GiveInventory("DevastatorShotCount",1)
		TNT1 A 0 A_Light2
		TNT1 A 0 A_PlaySound("reilsss/weapons/devesatorfire", CHAN_WEAPON, 1.0, 0)
		TNT1 A 0 A_FireCustomMissile("GunSmallSmokeSpawner",0,0,9,6)
		DEVG F 0 A_FireCustomMissile("DevastatorShot",random(2,-2),1,4,6)
		TNT1 A 0 A_SetPitch(pitch-3)
		DEVG FFF 1 A_SetPitch(pitch+1)
		DEVG G 1 A_Light1
		DEVG H 1
		DEVG I 1 A_Light0
		DEVG I 0 A_ReFire("Fire13")
		Goto Ready
	Fire13:
		TNT1 A 0 A_TakeInventory("DevastatorShotCount",1000,0)
		TNT1 A 0 A_Light2
		TNT1 A 0 A_PlaySound("reilsss/weapons/devesatorfire", CHAN_WEAPON, 1.0, 0)
		TNT1 A 0 A_FireCustomMissile("GunSmallSmokeSpawner",0,0,12,3)
		DEVG J 0 A_FireCustomMissile("DevastatorShot",random(2,-2),1,5,3)
		TNT1 A 0 A_SetPitch(pitch-3)
		DEVG JJJ 1 A_SetPitch(pitch+1)
		DEVG K 1 A_Light1
		DEVG L 1
		DEVG I 1 A_Light0
		DEVG A 0 A_ReFire("Fire")
		Goto Ready
	Fire2:
		TNT1 A 0 A_JumpIfInventory("DevastatorShotCount",2,"Fire23")
		TNT1 A 0 A_JumpIfInventory("DevastatorShotCount",1,"Fire22")
		TNT1 A 0 A_GiveInventory("DevastatorShotCount",1)
		TNT1 A 0 A_Light2
		TNT1 A 0 A_PlaySound("reilsss/weapons/devesatorfire", CHAN_WEAPON, 1.0, 0)
		TNT1 A 0 A_FireCustomMissile("GunSmallSmokeSpawner",0,0,6,2)
		DEVG N 0 A_FireCustomMissile("DevastatorShot",random(2,-2),1,3,3)
		"####" "#" 1 A_SetPitch(pitch-2)
		"####" "#" 1 A_SetPitch(pitch+1)
		TNT1 A 0 A_PlaySound("reilsss/weapons/devesatorfire", CHAN_WEAPON, 1.0, 0)
		TNT1 A 0 A_FireCustomMissile("GunSmallSmokeSpawner",0,0,-6,2)
		DEVG O 0 A_FireCustomMissile("DevastatorShot",random(2,-2),1,-3,3)
		"####" "#" 0 A_SetPitch(pitch-2)
		"####" "##" 1 A_SetPitch(pitch+1.5)
		DEVG P 1 A_Light1
		DEVG Q 1
		DEVG Q 0 A_Refire("Fire22")
		"####" "#" 0 A_Light0
		Goto Ready
	Fire22:
		TNT1 A 0 A_Light2
		TNT1 A 0 A_GiveInventory("DevastatorShotCount",1)
		TNT1 A 0 A_PlaySound("reilsss/weapons/devesatorfire", CHAN_WEAPON, 1.0, 0)
		TNT1 A 0 A_FireCustomMissile("GunSmallSmokeSpawner",0,0,9,6)
		DEVG R 0 A_FireCustomMissile("DevastatorShot",random(2,-2),1,4,6)
		"####" "#" 1 A_SetPitch(pitch-2)
		"####" "#" 1 A_SetPitch(pitch+1)
		TNT1 A 0 A_PlaySound("reilsss/weapons/devesatorfire", CHAN_WEAPON, 1.0, 0)
		TNT1 A 0 A_FireCustomMissile("GunSmallSmokeSpawner",0,0,-9,6)
		DEVG S 0 A_FireCustomMissile("DevastatorShot",random(2,-2),1,-4,6)
		"####" "#" 0 A_SetPitch(pitch-2)
		"####" "##" 1 A_SetPitch(pitch+1.5)
		DEVG T 1 A_Light1
		DEVG U 1
		DEVG U 0 A_Refire("Fire23")
		"####" "#" 0 A_Light0
		Goto Ready
	Fire23:
		TNT1 A 0 A_Light2
		TNT1 A 0 A_TakeInventory("DevastatorShotCount",1000,0)
		TNT1 A 0 A_PlaySound("reilsss/weapons/devesatorfire", CHAN_WEAPON, 1.0, 0)
		TNT1 A 0 A_FireCustomMissile("GunSmallSmokeSpawner",0,0,12,3)
		DEVG V 0 A_FireCustomMissile("DevastatorShot",random(2,-2),1,5,3)
		"####" "#" 1 A_SetPitch(pitch-2)
		"####" "#" 1 A_SetPitch(pitch+1)
		TNT1 A 0 A_PlaySound("reilsss/weapons/devesatorfire", CHAN_WEAPON, 1.0, 0)
		TNT1 A 0 A_FireCustomMissile("GunSmallSmokeSpawner",0,0,-12,3)
		DEVG W 0 A_FireCustomMissile("DevastatorShot",random(2,-2),1,-5,3)
		"####" "#" 0 A_SetPitch(pitch-2)
		"####" "##" 1 A_SetPitch(pitch+1.5)
		DEVG X 1 A_Light1
		DEVG U 1
		DEVG M 4 A_ReFire("Fire")
		"####" "#" 0 A_Light0
		Goto Ready
	AltFire:
		TNT1 A 0 A_JumpIfInventory("DevastatorCount",2,"AltFire2")
		TNT1 A 0 A_JumpIfInventory("MiniRockets",3,"AltFireSuccesful")
		DEVG D 4
		Goto Ready
	AltFire2:
		TNT1 A 0 A_JumpIfInventory("MiniRockets",3,"AltFire2Succesful")
		DEVG M 4
		Goto "Ready2"
	AltFireSuccesful:
		TNT1 A 0 A_JumpIfInventory("DevastatorShotCount",2,"AltFire13")
		TNT1 A 0 A_JumpIfInventory("DevastatorShotCount",1,"AltFire12")
		TNT1 A 0 A_GiveInventory("DevastatorShotCount",1)
		TNT1 A 0 A_Light2
		TNT1 A 0 A_PlaySound("reilsss/weapons/devesatorfire", CHAN_WEAPON, 1.0, 0)
		TNT1 A 0 A_JumpIfInventory("PowerEconomizer",1,3)
		TNT1 A 0 A_JumpIfInventory("InfiniteAmmo",1,2)
		TNT1 A 0 A_TakeInventory("MiniRockets",1,1)
		TNT1 A 0 A_FireCustomMissile("GunSmallSmokeSpawner",0,0,6,2)
		DEVG B 0 A_FireCustomMissile("DevastatorShot2",random(2,-2),1,3,3)
		TNT1 A 0 A_SetPitch(pitch-3)
		DEVG BBB 1 A_SetPitch(pitch+1)
		DEVG C 1 A_Light1
		DEVG D 1
		DEVG E 1 A_Light0
		DEVG E 0 A_ReFire("AltFire12")
		Goto Ready
	AltFire12:
		TNT1 A 0 A_JumpIfInventory("DevastatorCount",2,"AltFire22")
		TNT1 A 0 A_GiveInventory("DevastatorShotCount",1)
		TNT1 A 0 A_Light2
		TNT1 A 0 A_PlaySound("reilsss/weapons/devesatorfire", CHAN_WEAPON, 1.0, 0)
		TNT1 A 0 A_JumpIfInventory("PowerEconomizer",1,3)
		TNT1 A 0 A_JumpIfInventory("InfiniteAmmo",1,2)
		TNT1 A 0 A_TakeInventory("MiniRockets",1,1)
		TNT1 A 0 A_FireCustomMissile("GunSmallSmokeSpawner",0,0,9,6)
		DEVG F 0 A_FireCustomMissile("DevastatorShot2",random(2,-2),1,4,6)
		TNT1 A 0 A_SetPitch(pitch-3)
		DEVG JJJ 1 A_SetPitch(pitch+1)
		DEVG K 1 A_Light1
		DEVG L 1
		DEVG I 1 A_Light0
		DEVG I 0 A_Refire("AltFire13")
		Goto Ready
	AltFire13:
		TNT1 A 0 A_JumpIfInventory("DevastatorCount",2,"AltFire23")
		TNT1 A 0 A_TakeInventory("DevastatorShotCount",1000,0)
		TNT1 A 0 A_Light2
		TNT1 A 0 A_PlaySound("reilsss/weapons/devesatorfire", CHAN_WEAPON, 1.0, 0)
		TNT1 A 0 A_JumpIfInventory("PowerEconomizer",1,3)
		TNT1 A 0 A_JumpIfInventory("InfiniteAmmo",1,2)
		TNT1 A 0 A_TakeInventory("MiniRockets",1,1)
		TNT1 A 0 A_FireCustomMissile("GunSmallSmokeSpawner",0,0,12,3)
		DEVG J 0 A_FireCustomMissile("DevastatorShot2",random(2,-2),1,5,3)
		TNT1 A 0 A_SetPitch(pitch-3)
		DEVG JJJ 1 A_SetPitch(pitch+1)
		DEVG K 1 A_Light1
		DEVG L 1
		DEVG I 1 A_Light0
		DEVG A 4 A_ReFire("AltFire")
		Goto Ready
	AltFire2Succesful:
		TNT1 A 0 A_JumpIfInventory("DevastatorShotCount",2,"AltFire23")
		TNT1 A 0 A_JumpIfInventory("DevastatorShotCount",1,"AltFire22")
		TNT1 A 0 A_GiveInventory("DevastatorShotCount",1)
		TNT1 A 0 A_Light2
		TNT1 A 0 A_PlaySound("reilsss/weapons/devesatorfire", CHAN_WEAPON, 1.0, 0)
		TNT1 A 0 A_JumpIfInventory("PowerEconomizer",1,3)
		TNT1 A 0 A_JumpIfInventory("InfiniteAmmo",1,2)
		TNT1 A 0 A_TakeInventory("MiniRockets",1,1)
		TNT1 A 0 A_FireCustomMissile("GunSmallSmokeSpawner",0,0,6,2)
		DEVG N 0 A_FireCustomMissile("DevastatorShot2",random(2,-2),1,3,3)
		DEVG N 2 A_SetPitch(pitch-2)
		DEVG N 1 A_SetPitch(pitch+1)
		TNT1 A 0 A_PlaySound("reilsss/weapons/devesatorfire", CHAN_WEAPON, 1.0, 0)
		TNT1 A 0 A_JumpIfInventory("PowerEconomizer",1,2)
		TNT1 A 0 A_TakeInventory("MiniRockets",1)
		TNT1 A 0 A_FireCustomMissile("GunSmallSmokeSpawner",0,0,-6,2)
		DEVG O 0 A_FireCustomMissile("DevastatorShot2",random(2,-2),1,-3,3)
		DEVG O 2 A_SetPitch(pitch-2)
		DEVG OP 1 A_SetPitch(pitch+1.5)
		DEVG P 1 A_Light1
		DEVG Q 2
		DEVG Q 0 A_Refire("AltFire22")
		DEVG Q 0 A_Light0
		Goto Ready2
	AltFire22:
		TNT1 A 0 A_GiveInventory("DevastatorShotCount",1)
		TNT1 A 0 A_Light2
		TNT1 A 0 A_PlaySound("reilsss/weapons/devesatorfire", CHAN_WEAPON, 1.0, 0)
		TNT1 A 0 A_JumpIfInventory("PowerEconomizer",1,3)
		TNT1 A 0 A_JumpIfInventory("InfiniteAmmo",1,2)
		TNT1 A 0 A_TakeInventory("MiniRockets",1,1)
		TNT1 A 0 A_FireCustomMissile("GunSmallSmokeSpawner",0,0,9,6)
		DEVG R 0 A_FireCustomMissile("DevastatorShot2",random(2,-2),1,4,6)
		TNT1 A 0 A_PlaySound("reilsss/weapons/devesatorfire", CHAN_WEAPON, 1.0, 0)
		TNT1 A 0 A_JumpIfInventory("PowerEconomizer",1,3)
		TNT1 A 0 A_JumpIfInventory("InfiniteAmmo",1,2)
		TNT1 A 0 A_TakeInventory("MiniRockets",1)
		DEVG R 2 A_SetPitch(pitch-2)
		DEVG R 1 A_SetPitch(pitch+1)
		TNT1 A 0 A_FireCustomMissile("GunSmallSmokeSpawner",0,0,-9,6)
		DEVG S 0 A_FireCustomMissile("DevastatorShot2",random(2,-2),1,-4,6)
		DEVG S 2 A_SetPitch(pitch-2)
		DEVG ST 1 A_SetPitch(pitch+1.5)
		DEVG T 1 A_Light1
		DEVG U 2
		DEVG U 0 A_Refire("AltFire23")
		DEVG U 0 A_Light0
		Goto Ready2
	AltFire23:
		TNT1 A 0 A_TakeInventory("DevastatorShotCount",1000,0)
		TNT1 A 0 A_Light2
		TNT1 A 0 A_PlaySound("reilsss/weapons/devesatorfire", CHAN_WEAPON, 1.0, 0)
		TNT1 A 0 A_JumpIfInventory("PowerEconomizer",1,3)
		TNT1 A 0 A_JumpIfInventory("InfiniteAmmo",1,2)
		TNT1 A 0 A_TakeInventory("MiniRockets",1,1)
		TNT1 A 0 A_FireCustomMissile("GunSmallSmokeSpawner",0,0,12,3)
		DEVG V 0 A_FireCustomMissile("DevastatorShot2",random(2,-2),1,5,3)
		DEVG V 2 A_SetPitch(pitch-2)
		DEVG V 1 A_SetPitch(pitch+1)
		TNT1 A 0 A_PlaySound("reilsss/weapons/devesatorfire", CHAN_WEAPON, 1.0, 0)
		TNT1 A 0 A_JumpIfInventory("PowerEconomizer",1,3)
		TNT1 A 0 A_JumpIfInventory("InfiniteAmmo",1,2)
		TNT1 A 0 A_TakeInventory("MiniRockets",1)
		TNT1 A 0 A_FireCustomMissile("GunSmallSmokeSpawner",0,0,-12,3)
		DEVG W 0 A_FireCustomMissile("DevastatorShot2",random(2,-2),1,-5,3)
		DEVG W 2 A_SetPitch(pitch-2)
		DEVG WX 1 A_SetPitch(pitch+1.5)
		DEVG X 1 A_Light0
		DEVG U 2
		DEVG M 4 A_ReFire("AltFire2Succesful")
		Goto "Ready2"
	}
}

Actor DevastatorShotCount : Inventory { Inventory.MaxAmount 2 }

Actor DevastatorPickup : CustomInventory
{
	Inventory.PickupSound "reilsss/weappickup/deverator"
	Inventory.PickupMessage "You got the Devastator!"
	Scale 0.7
	States
	{
	Spawn:
		DVST A -1
		Loop
	Pickup:
		TNT1 A 0 A_JumpIfInventory("DevastatorCount",2,4)
		TNT1 A 0 A_GiveInventory("DevastatorCount",1)
		TNT1 A 0 A_JumpIfInventory("NoWeaponSwitch",1,2)
		TNT1 A 0 A_SelectWeapon("AEoDDevastator")
		TNT1 A 0 A_GiveInventory("AEoDDevastator",1)
		TNT1 A 0
		Stop
	}
}

Actor DevastatorCount : Inventory
{
	Inventory.MaxAmount 2
	Inventory.Amount 1
}

Actor DevastatorShot
{
	PROJECTILE
	+FORCERADIUSDMG
	Radius 4
	Height 4
	Speed 21
	Damage 13
	SeeSound "weapons/devlnch"
	DeathSound "reilsss/weapons/devesatorexplosion"
	Scale 0.15
	States
	{
	Spawn:
		MNSS A 0
		MNSS AA 0 A_SpawnItemEx("DevastatorExtra",0,0,0,1,0,random(-1,1),random(1,360))
		MNSS AAA 1 Bright A_SpawnItemEx("DevastatorSmoke",-4,random(2,-2),0,0,frandom(0.3,-0.3),frandom(0.1,0.4),0,SXF_NOCHECKPOSITION)
		Loop
	Death:
		TNT1 A 0 Bright A_Explode(50,40,1)
		TNT1 A 3 A_SpawnItemEx("NewExplosionSmallLittleBigger",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		Stop
	} 
}


Actor DevastatorSmoke
{
	+NOINTERACTION
	RenderStyle Add
	Scale 0.1
	States
	{
	Spawn:
		TNT1 A 0 
		X103 K 2 A_FadeOut(0.1)
		Wait
	}
}

Actor DevastatorShot2 : DevastatorShot
{
	+SEEKERMISSILE
	Damage 10
	States
	{
	Spawn:
		TNT1 A 0 
		MNSS AA 0 A_SpawnItemEx("DevastatorExtra",0,0,0,1,0,random(-1,1),random(1,360))
		MNSS A 0 Bright A_SeekerMissile(10,10, SMF_LOOK)
		MNSS AAAA 1 Bright A_SpawnItemEx("DevastatorSmoke",-4,random(2,-2),0,0,frandom(0.3,-0.3),frandom(0.1,0.4),0,SXF_NOCHECKPOSITION)
		Goto Spawn+1
	}
}

Actor DevastatorExtra
{
	+NOCLIP
	PROJECTILE
	-NOGRAVITY
	+DONTBLAST
	+LOWGRAVITY
	+DONTSPLASH
	Height 4
	Radius 4
	Speed 3
	Scale 0.25
	RenderStyle Add
	States
	{
	Spawn:
		ICPR K 0
		WRBL KKKK 3 Bright
		WRBL K 1 Bright A_FadeOut
		Wait
	}
}

Actor DevastatorDropCheck : Inventory
{
	Inventory.Amount 1
	Inventory.MaxAmount 1
}

Actor DevastatorDrop : CustomInventory
{
	Inventory.Amount 1
	Inventory.MaxAmount 2
	States
	{
	Use:
		TNT1 A 0
		TNT1 A 0 A_SpawnItemEx("DroppedDevastator",0,0,32,8,0,0,0,SXF_NOCHECKPOSITION,0)
		TNT1 A 0 A_TakeInventory("DevastatorCount",1)
		Stop
	}
}

Actor DroppedDevastator
{
	Radius 16
	Height 20
	Scale 0.7
	States
	{
	Spawn:
		DVST A 15
		TNT1 A 0 A_SpawnItemEx("AEoDDevastatorNoAmmo",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER,0)
		Stop
	}
}

Actor AEoDDevastatorNoAmmo : AEoDDevastatorItem
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL
	Scale 0.7
	Inventory.Amount 1
	Inventory.PickupMessage "You got the Devastator!"
	Inventory.PickupSound "reilsss/weappickup/deverator"
	States
	{
	Spawn:
		DVST A -1
		Loop
	Pickup:
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",7) <= 0,"Nothing")
		TNT1 A 0 A_JumpIfInventory("MiniRockets",30,"Ammo")
		TNT1 A 0 A_JumpIfInventory("AECell",30,"Ammo3")
		TNT1 A 0 A_JumpIfInventory("DevastatorCount",2,"Ammo")
		TNT1 A 0 A_JumpIfInventory("DevastatorCount",1,"Pickup2")
		TNT1 A 0 A_GiveInventory("Weapon7Count",1)
		TNT1 A 0 A_GiveInventory("DevastatorDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDDevastator",1)
		TNT1 A 0 A_GiveInventory("DevastatorCount",1)
		TNT1 A 0 A_TakeInventory("MiniRockets",30)
		TNT1 A 0 A_TakeInventory("AECell",30)
		TNT1 A 0 	
		TNT1 A 0 A_JumpIfInventory("NoWeaponSwitch",1,2)
		TNT1 A 0 A_SelectWeapon("AEoDDevastator")
		TNT1 A 0
		Stop
	Pickup2:
		TNT1 A 0 A_JumpIfInventory("MiniRockets",30,"Ammo")
		TNT1 A 0 A_JumpIfInventory("AECell",30,"Ammo")
		TNT1 A 0 A_GiveInventory("DevastatorDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDDevastator",1)
		TNT1 A 0 A_GiveInventory("DevastatorCount",1)
		TNT1 A 0 A_TakeInventory("MiniRockets",30)
		TNT1 A 0 A_TakeInventory("AECell",30)
		TNT1 A 0 	
		TNT1 A 0 A_JumpIfInventory("NoWeaponSwitch",1,2)
		TNT1 A 0 A_SelectWeapon("AEoDDevastator")
		TNT1 A 0
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("DevastatorCount",2,"Ammo")
		TNT1 A 0 A_JumpIfInventory("DevastatorCount",1,"Pickup2")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		TNT1 A 0 ACS_NamedExecute("s798",0,7,91,0)
		Fail
	Ammo:
		TNT1 A 0 A_JumpIfInventory("AECell",30,1)
		Goto Ammo2
		TNT1 A 0 A_TakeInventory("MiniRockets",30)
		TNT1 A 0 A_TakeInventory("AECell",30)
		TNT1 A 0 A_JumpIfInventory("DevastatorCount",1,2)
		TNT1 A 0 A_GiveInventory("Weapon7Count",1)
		TNT1 A 0 A_GiveInventory("DevastatorCount",1)
		TNT1 A 0 A_GiveInventory("DevastatorDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDDevastator",1)
		Stop
	Ammo2:
		TNT1 A 0 A_TakeInventory("MiniRockets",20)
		TNT1 A 0 A_JumpIfInventory("DevastatorCount",1,2)
		TNT1 A 0 A_GiveInventory("Weapon7Count",1)
		TNT1 A 0 A_GiveInventory("DevastatorCount",1)
		TNT1 A 0 A_GiveInventory("DevastatorDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDDevastator",1)
		TNT1 A 0 A_TakeInventory("AECell",6)
		Stop
	Ammo3:
		TNT1 A 0 A_TakeInventory("AECell",6)
		TNT1 A 0 A_JumpIfInventory("DevastatorCount",1,2)
		TNT1 A 0 A_GiveInventory("Weapon7Count",1)
		TNT1 A 0 A_GiveInventory("DevastatorCount",1)
		TNT1 A 0 A_GiveInventory("DevastatorDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDDevastator",1)
		TNT1 A 0 A_TakeInventory("MiniRockets",20)
		Stop
	}
}

//==================================================================================
//==================================================================================

//==================================================================================
//==================================================================================

Actor AEoDPerforatorItem : CustomInventory 6022
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL
	Scale 0.35
	Inventory.Amount 1
	Inventory.PickupMessage "You got the Perforator"
	Inventory.PickupSound "reilsss/weappickup/supernailgun"
	States
	{
	Spawn:
		NGU3 X -1
		Loop
	Pickup:
		TNT1 A 0 A_JumpIfInventory("AEoDPerforator",1,"Ammo")
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",7) <= 0,"Nothing")
		TNT1 A 0 A_GiveInventory("Weapon7Count",1)
		TNT1 A 0 A_GiveInventory("PerforatorDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDPerforator",1)
		TNT1 A 0 	
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDPerforator",1,"Ammo")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		TNT1 A 0 ACS_NamedExecute("s798",0,7,87,0)
		Fail
	Ammo:
		TNT1 A 0 A_GiveInventory("AEoDPerforator",1)
		Stop
	}
}

Actor AEoDPerforator : Weapon // 6022
{
	+FloorClip
	+INVENTORY.IGNORESKILL
	+WEAPON.CHEATNOTWEAPON
	Weapon.AmmoType1 "AENails"
	Weapon.AmmoType2 "AENails"
	Weapon.AmmoGive1 50
	Weapon.AmmoUse1 8
	Weapon.AmmoUse2 10
	Weapon.SelectionOrder 15243
	Obituary "%o was destroyed by %k's Perforator!"
	Inventory.PickupMessage "You got the Perforator"
	Inventory.PickupSound "reilsss/weappickup/supernailgun"
	weapon.upsound "weapons/draw"
	Scale 0.35
	Tag "Perforator"
	States
	{
	Spawn:
		NGU3 X 6
		Loop
	Ready:
		TNT1 A 0 A_StopSound(6)
		NGU3 A 1 A_WeaponReady
		Goto Ready+1
	Deselect:
		TNT1 A 0 A_StopSound(6)
		TNT1 A 0 	
		NGU3 A 1 A_Lower
		TNT1 AA 0 A_Lower
		Goto Deselect+1
	Select:
		TNT1 A 0 	
		NGU3 A 1 A_Raise
		TNT1 AA 0 A_Raise
		Loop
	Fire:
		TNT1 A 0 A_PlaySound("reilsss/weapons/firestormcannonspinon", 7, 0.75, 0)
		NGU3 BCD 4
		NGU3 EF 3
		NGU3 GH 2
		TNT1 A 0 A_PlaySound("reilsss/weapons/firestormcannonspin", 6, 0.5, 1)
	Hold:
		TNT1 B 0 A_JumpIfInventory("PowerQuickFire",1,"HoldQuick")
		TNT1 A 0 A_PlaySound("reilsss/weapons/perforatorfire", CHAN_WEAPON, 1.0, 0)
		TNT1 A 0 A_GunFlash
		TNT1 A 0 A_FireCustomMissile("GunSmokeSpawner",0,0,7,8)
		NGU3 I 0 Bright A_FireCustomMissile("PfNail",0,1,4,6)
		NGU3 I 1 Bright A_SetPitch(pitch-0.5)
		TNT1 A 0 A_FireCustomMissile("PerforatorCasingSpawner",-10,0, 0,-8)
		NGU3 JK 1 A_SetPitch(pitch+0.25)
		TNT1 A 0 A_JumpIfNoAmmo("HoldEndA")
		TNT1 A 0 A_PlaySound("reilsss/weapons/perforatorfire", CHAN_WEAPON, 1.0, 0)
		TNT1 A 0 A_GunFlash
		TNT1 A 0 A_FireCustomMissile("GunSmokeSpawner",0,0,7,8)
		NGU3 L 0 Bright A_FireCustomMissile("PfNail",0,1,4,6)
		"####" "#" 1 Bright A_SetPitch(pitch-0.5)
		TNT1 A 0 A_FireCustomMissile("PerforatorCasingSpawner",-10,0, 0,-8)
		NGU3 MN 1 Bright A_SetPitch(pitch+0.25)
		TNT1 A 0 A_JumpIfNoAmmo("HoldEndB")
		TNT1 A 0 A_PlaySound("reilsss/weapons/perforatorfire", CHAN_WEAPON, 1.0, 0)
		TNT1 A 0 A_GunFlash
		TNT1 A 0 A_FireCustomMissile("GunSmokeSpawner",0,0,7,8)
		NGU3 O 0 Bright A_FireCustomMissile("PfNail",0,1,4,6)
		"####" "#" 1 Bright A_SetPitch(pitch-0.5)
		TNT1 A 0 A_FireCustomMissile("PerforatorCasingSpawner",-10,0, 0,-8)
		NGU3 PQ 1 A_SetPitch(pitch+0.25)
		TNT1 A 0 A_JumpIfNoAmmo("HoldEndC")
		TNT1 A 0 A_PlaySound("reilsss/weapons/perforatorfire", CHAN_WEAPON, 1.0, 0)
		TNT1 A 0 A_GunFlash
		TNT1 A 0 A_FireCustomMissile("GunSmokeSpawner",0,0,7,8)
		NGU3 R 0 Bright A_FireCustomMissile("PfNail",0,1,4,6)
		"####" "#" 1 Bright A_SetPitch(pitch-0.5)
		TNT1 A 0 A_FireCustomMissile("PerforatorCasingSpawner",-10,0, 0,-8)
		NGU3 ST 1 A_SetPitch(pitch+0.25)
		TNT1 A 0 A_JumpIfNoAmmo("HoldEndD")
		TNT1 A 0 A_PlaySound("reilsss/weapons/perforatorfire", CHAN_WEAPON, 1.0, 0)
		TNT1 A 0 A_GunFlash
		TNT1 A 0 A_FireCustomMissile("GunSmokeSpawner",0,0,7,8)
		NGU3 U 0 Bright A_FireCustomMissile("PfNail",0,1,4,6)
		"####" "#" 1 Bright A_SetPitch(pitch-0.5)
		TNT1 A 0 A_FireCustomMissile("PerforatorCasingSpawner",-10,0, 0,-8)
		NGU3 VW 1 A_SetPitch(pitch+0.25)
		TNT1 A 0 A_JumpIfNoAmmo("HoldEndE")
		TNT1 A 0 A_ReFire
		TNT1 A 0 A_StopSound(CHAN_BODY)
		TNT1 A 0 A_PlaySound("reilsss/weapons/firestormcannonspin", 7, 0.5, 0)
		NGU3 FGH 1 A_WeaponReady
		NGU3 EFGC 2 A_WeaponReady
		NGU3 DEGH 3 A_WeaponReady
		TNT1 A 0 A_PlaySound("reilsss/weapons/firestormcannonfire", 8, 0.75, 0)
		NGU3 EFGC 4 A_WeaponReady
		NGU3 DEGH 5 A_WeaponReady
		NGU3 EFBA 6 A_WeaponReady
		Goto Ready
	HoldQuick:
		TNT1 B 0 A_JumpIfInventory("PowerQuickFire",1,1)
		Goto Hold
		TNT1 A 0 A_PlaySound("reilsss/weapons/perforatorfire", CHAN_WEAPON, 1.0, 0)
		TNT1 A 0 A_GunFlash
		TNT1 A 0 A_FireCustomMissile("GunSmokeSpawner",0,0,7,8)
		NGU3 I 0 Bright A_FireCustomMissile("PfNail",0,1,6,6)
		"####" "#" 1 Bright A_SetPitch(pitch-0.25)
		TNT1 A 0 A_FireCustomMissile("PerforatorCasingSpawner",-10,0, 0,-8)
		NGU3 J 1 A_SetPitch(pitch+0.25)
		TNT1 A 0 A_JumpIfNoAmmo("HoldEndA")
		TNT1 A 0 A_PlaySound("reilsss/weapons/perforatorfire", CHAN_WEAPON, 1.0, 0)
		TNT1 A 0 A_GunFlash
		TNT1 A 0 A_FireCustomMissile("GunSmokeSpawner",0,0,7,8)
		NGU3 L 0 Bright A_FireCustomMissile("PfNail",0,1,4,6)
		"####" "#" 1 Bright A_SetPitch(pitch-0.25)
		TNT1 A 0 A_FireCustomMissile("PerforatorCasingSpawner",-10,0, 0,-8)
		NGU3 M 1 A_SetPitch(pitch+0.25)
		TNT1 A 0 A_JumpIfNoAmmo("HoldEndB")
		TNT1 A 0 A_PlaySound("reilsss/weapons/perforatorfire", CHAN_WEAPON, 1.0, 0)
		TNT1 A 0 A_GunFlash
		TNT1 A 0 A_FireCustomMissile("GunSmokeSpawner",0,0,7,8)
		NGU3 O 0 Bright A_FireCustomMissile("PfNail",0,1,4,6)
		"####" "#" 1 Bright A_SetPitch(pitch-0.25)
		TNT1 A 0 A_FireCustomMissile("PerforatorCasingSpawner",-10,0, 0,-8)
		NGU3 P 1  A_SetPitch(pitch+0.25)
		TNT1 A 0 A_JumpIfNoAmmo("HoldEndC")
		TNT1 A 0 A_PlaySound("reilsss/weapons/perforatorfire", CHAN_WEAPON, 1.0, 0)
		TNT1 A 0 A_GunFlash
		TNT1 A 0 A_FireCustomMissile("GunSmokeSpawner",0,0,7,8)
		NGU3 R 0 Bright A_FireCustomMissile("PfNail",0,1,4,6)
		"####" "#" 1 Bright A_SetPitch(pitch-0.25)
		TNT1 A 0 A_FireCustomMissile("PerforatorCasingSpawner",-10,0, 0,-8)
		NGU3 S 1 A_SetPitch(pitch+0.25)
		TNT1 A 0 A_JumpIfNoAmmo("HoldEndD")
		TNT1 A 0 A_PlaySound("reilsss/weapons/perforatorfire", CHAN_WEAPON, 1.0, 0)
		TNT1 A 0 A_GunFlash
		TNT1 A 0 A_FireCustomMissile("GunSmokeSpawner",0,0,7,8)
		NGU3 U 0 Bright A_FireCustomMissile("PfNail",0,1,4,6)
		"####" "#" 1 Bright A_SetPitch(pitch-0.25)
		TNT1 A 0 A_FireCustomMissile("PerforatorCasingSpawner",-10,0, 0,-8)
		NGU3 V 1 A_SetPitch(pitch+0.25)
		TNT1 A 0 A_JumpIfNoAmmo("HoldEndE")
		TNT1 A 0 A_ReFire
		TNT1 A 0 A_StopSound(CHAN_BODY)
		TNT1 A 0 A_PlaySound("reilsss/weapons/firestormcannonspin", 7, 0.5, 0)
		NGU3 FGH 1 A_WeaponReady
		NGU3 EFGC 2 A_WeaponReady
		NGU3 DEGH 3 A_WeaponReady
		TNT1 A 0 A_PlaySound("reilsss/weapons/firestormcannonfire", 8, 0.75, 0)
		NGU3 EFGC 4 A_WeaponReady
		NGU3 DEGH 5 A_WeaponReady
		NGU3 EFBA 6 A_WeaponReady
		Goto Ready
	AltFire:
		TNT1 A 0 A_PlaySound("reilsss/weapons/firestormcannonspinon", 7, 0.75, 0)
		NGU3 BCD 4
		NGU3 EFGH 3
		NGU3 EFGC 2
		NGU3 DEGH 1
		TNT1 A 0 A_PlaySound("reilsss/weapons/firestormcannonspin", 6, 0.5, 1)
	AltHold:
		TNT1 B 0 A_JumpIfInventory("PowerQuickFire",1,"AltHoldQuick")
		TNT1 A 0 A_PlaySound("reilsss/weapons/perforatorfire", CHAN_WEAPON, 1.0, 0)
		TNT1 A 0 A_GunFlash
		TNT1 A 0 A_FireCustomMissile("GunSmokeSpawner",0,0,7,8)
		NGU3 I 0 Bright A_FireCustomMissile("SNail3",0,1,4,6)
		"####" "#" 1 Bright A_SetPitch(pitch-0.25)
		TNT1 A 0 A_FireCustomMissile("PerforatorCasingSpawner",-10,0, 0,-8)
		NGU3 JK 1 A_SetPitch(pitch+0.25)
		TNT1 A 0 A_JumpIfNoAmmo("HoldEndA")
		TNT1 A 0 A_PlaySound("reilsss/weapons/perforatorfire", CHAN_WEAPON, 1.0, 0)
		TNT1 A 0 A_GunFlash
		TNT1 A 0 A_FireCustomMissile("GunSmokeSpawner",0,0,7,8)
		NGU3 L 0 Bright A_FireCustomMissile("SNail3",0,1,4,6)
		"####" "#" 1 Bright A_SetPitch(pitch-0.50)
		TNT1 A 0 A_FireCustomMissile("PerforatorCasingSpawner",-10,0, 0,-8)
		NGU3 MN 1 A_SetPitch(pitch+0.25)
		TNT1 A 0 A_JumpIfNoAmmo("HoldEndB")
		TNT1 A 0 A_PlaySound("reilsss/weapons/perforatorfire", CHAN_WEAPON, 1.0, 0)
		TNT1 A 0 A_GunFlash
		TNT1 A 0 A_FireCustomMissile("GunSmokeSpawner",0,0,7,8)
		NGU3 O 1 Bright A_FireCustomMissile("SNail3",0,1,4,6)
		"####" "#" 1 Bright A_SetPitch(pitch-0.50)
		TNT1 A 0 A_FireCustomMissile("PerforatorCasingSpawner",-10,0, 0,-8)
		NGU3 PQ 1 A_SetPitch(pitch+0.25)
		TNT1 A 0 A_JumpIfNoAmmo("HoldEndC")
		TNT1 A 0 A_PlaySound("reilsss/weapons/perforatorfire", CHAN_WEAPON, 1.0, 0)
		TNT1 A 0 A_GunFlash
		TNT1 A 0 A_FireCustomMissile("GunSmokeSpawner",0,0,7,8)
		NGU3 R 1 Bright A_FireCustomMissile("SNail3",0,1,4,6)
		"####" "#" 1 Bright A_SetPitch(pitch-0.50)
		TNT1 A 0 A_FireCustomMissile("PerforatorCasingSpawner",-10,0, 0,-8)
		NGU3 ST 1 A_SetPitch(pitch+0.25)
		TNT1 A 0 A_JumpIfNoAmmo("HoldEndD")
		TNT1 A 0 A_PlaySound("reilsss/weapons/perforatorfire", CHAN_WEAPON, 1.0, 0)
		TNT1 A 0 A_GunFlash
		TNT1 A 0 A_FireCustomMissile("GunSmokeSpawner",0,0,7,8)
		NGU3 U 0 Bright A_FireCustomMissile("SNail3",0,1,4,6)
		"####" "#" 1 Bright A_SetPitch(pitch-0.50)
		TNT1 A 0 A_FireCustomMissile("PerforatorCasingSpawner",-10,0, 0,-8)
		NGU3 VW 1 A_SetPitch(pitch+0.25)
		TNT1 A 0 A_JumpIfNoAmmo("HoldEndE")
		TNT1 A 0 A_ReFire
		TNT1 A 0 A_StopSound(CHAN_BODY)
		TNT1 A 0 A_PlaySound("reilsss/weapons/firestormcannonspin", 7, 0.5, 0)
		NGU3 FGH 1 A_WeaponReady
		NGU3 EFGC 2 A_WeaponReady
		NGU3 DEGH 3 A_WeaponReady
		TNT1 A 0 A_PlaySound("reilsss/weapons/firestormcannonfire", 8, 0.75, 0)
		NGU3 EFGC 4 A_WeaponReady
		NGU3 DEGH 5 A_WeaponReady
		NGU3 EFBA 6 A_WeaponReady
		Goto Ready
	AltHoldQuick:
		TNT1 B 0 A_JumpIfInventory("PowerQuickFire",1,1)
		Goto AltHold
		TNT1 A 0 A_PlaySound("reilsss/weapons/perforatorfire", CHAN_WEAPON, 1.0, 0)
		TNT1 A 0 A_GunFlash
		TNT1 A 0 A_FireCustomMissile("GunSmokeSpawner",0,0,7,8)
		NGU3 I 0 Bright A_FireCustomMissile("SNail3",0,1,4,6)
		"####" "#" 1 Bright A_SetPitch(pitch-0.25)
		TNT1 A 0 A_FireCustomMissile("PerforatorCasingSpawner",-10,0, 0,-8)
		NGU3 J 1 A_SetPitch(pitch-0.25)
		TNT1 A 0 A_JumpIfNoAmmo("HoldEndA")
		TNT1 A 0 A_PlaySound("reilsss/weapons/perforatorfire", CHAN_WEAPON, 1.0, 0)
		TNT1 A 0 A_GunFlash
		TNT1 A 0 A_FireCustomMissile("GunSmokeSpawner",0,0,7,8)
		NGU3 L 0 Bright A_FireCustomMissile("SNail3",0,1,4,6)
		"####" "#" 1 Bright A_SetPitch(pitch-0.25)
		TNT1 A 0 A_FireCustomMissile("PerforatorCasingSpawner",-10,0, 0,-8)
		NGU3 M 1 A_SetPitch(pitch+0.25)
		TNT1 A 0 A_JumpIfNoAmmo("HoldEndB")
		TNT1 A 0 A_PlaySound("reilsss/weapons/perforatorfire", CHAN_WEAPON, 1.0, 0)
		TNT1 A 0 A_GunFlash
		TNT1 A 0 A_FireCustomMissile("GunSmokeSpawner",0,0,7,8)
		NGU3 O 0 Bright A_FireCustomMissile("SNail3",0,1,4,6)
		"####" "#" 1 Bright A_SetPitch(pitch-0.25)
		TNT1 A 0 A_FireCustomMissile("PerforatorCasingSpawner",-10,0, 0,-8)
		NGU3 P 1 A_SetPitch(pitch+0.25)
		TNT1 A 0 A_JumpIfNoAmmo("HoldEndC")
		TNT1 A 0 A_PlaySound("reilsss/weapons/perforatorfire", CHAN_WEAPON, 1.0, 0)
		TNT1 A 0 A_GunFlash
		TNT1 A 0 A_FireCustomMissile("GunSmokeSpawner",0,0,7,8)
		NGU3 R 0 Bright A_FireCustomMissile("SNail3",0,1,4,6)
		"####" "#" 1 Bright A_SetPitch(pitch-0.25)
		TNT1 A 0 A_FireCustomMissile("PerforatorCasingSpawner",-10,0, 0,-8)
		NGU3 S 1 A_SetPitch(pitch+0.25)
		TNT1 A 0 A_JumpIfNoAmmo("HoldEndD")
		TNT1 A 0 A_PlaySound("reilsss/weapons/perforatorfire", CHAN_WEAPON, 1.0, 0)
		TNT1 A 0 A_GunFlash
		TNT1 A 0 A_FireCustomMissile("GunSmokeSpawner",0,0,7,8)
		NGU3 U 0 Bright A_FireCustomMissile("SNail3",0,1,4,6)
		"####" "#" 1 Bright A_SetPitch(pitch-0.25)
		TNT1 A 0 A_FireCustomMissile("PerforatorCasingSpawner",-10,0, 0,-8)
		NGU3 V 1 A_SetPitch(pitch+0.25)
		TNT1 A 0 A_JumpIfNoAmmo("HoldEndE")
		TNT1 A 0 A_ReFire
		TNT1 A 0 A_StopSound(CHAN_BODY)
		TNT1 A 0 A_PlaySound("reilsss/weapons/firestormcannonspin", 7, 0.5, 0)
		NGU3 FGH 1 A_WeaponReady
		NGU3 EFGC 2 A_WeaponReady
		NGU3 DEGH 3 A_WeaponReady
		TNT1 A 0 A_PlaySound("reilsss/weapons/firestormcannonfire", 8, 0.75, 0)
		NGU3 EFGC 4 A_WeaponReady
		NGU3 DEGH 5 A_WeaponReady
		NGU3 EFBA 6 A_WeaponReady
		Goto Ready
	HoldEndA:
		TNT1 A 0 A_StopSound(CHAN_BODY)
		TNT1 A 0 A_PlaySound("reilsss/weapons/firestormcannonspin", 7, 0.5, 0)
		NGU3 CD 1 A_WeaponReady
		NGU3 EFGC 2 A_WeaponReady
		NGU3 DEGH 3 A_WeaponReady
		TNT1 A 0 A_PlaySound("reilsss/weapons/firestormcannonfire", 8, 0.75, 0)
		NGU3 EFGC 4 A_WeaponReady
		NGU3 DEGH 5 A_WeaponReady
		NGU3 EFBA 6 A_WeaponReady
		Goto Ready
	HoldEndB:
		TNT1 A 0 A_StopSound(CHAN_BODY)
		TNT1 A 0 A_PlaySound("reilsss/weapons/firestormcannonspin", 7, 0.5, 0)
		NGU3 GH 1 A_WeaponReady
		NGU3 EFGC 2 A_WeaponReady
		NGU3 DEGH 3 A_WeaponReady
		TNT1 A 0 A_PlaySound("reilsss/weapons/firestormcannonfire", 8, 0.75, 0)
		NGU3 EFGC 4 A_WeaponReady
		NGU3 DEGH 5 A_WeaponReady
		NGU3 EFBA 6 A_WeaponReady
		Goto Ready
	HoldEndC:
		TNT1 A 0 A_StopSound(CHAN_BODY)
		TNT1 A 0 A_PlaySound("reilsss/weapons/firestormcannonspin", 7, 0.5, 0)
		NGU3 EFGC 2 A_WeaponReady
		NGU3 DEGH 3 A_WeaponReady
		TNT1 A 0 A_PlaySound("reilsss/weapons/firestormcannonfire", 8, 0.75, 0)
		NGU3 EFGC 4 A_WeaponReady
		NGU3 DEGH 5 A_WeaponReady
		NGU3 EFBA 6 A_WeaponReady
		Goto Ready
	HoldEndD:
		TNT1 A 0 A_StopSound(CHAN_BODY)
		TNT1 A 0 A_PlaySound("reilsss/weapons/firestormcannonspin", 7, 0.5, 0)
		NGU3 HD 1 A_WeaponReady
		NGU3 EFGC 2 A_WeaponReady
		NGU3 DEGH 3 A_WeaponReady
		TNT1 A 0 A_PlaySound("reilsss/weapons/firestormcannonfire", 8, 0.75, 0)
		NGU3 EFGC 4 A_WeaponReady
		NGU3 DEGH 5 A_WeaponReady
		NGU3 EFBA 6 A_WeaponReady
		Goto Ready
	HoldEndE:
		TNT1 A 0 A_StopSound(CHAN_BODY)
		TNT1 A 0 A_PlaySound("reilsss/weapons/firestormcannonspin", 7, 0.5, 0)
		NGU3 FGCDEGH 1 A_WeaponReady
		NGU3 EFGC 2 A_WeaponReady
		NGU3 DEGH 3 A_WeaponReady
		TNT1 A 0 A_PlaySound("reilsss/weapons/firestormcannonfire", 8, 0.75, 0)
		NGU3 EFGC 4 A_WeaponReady
		NGU3 DEGH 5 A_WeaponReady
		NGU3 EFBA 6 A_WeaponReady
		Goto Ready
	Flash:
		TNT1 A 3 A_Light2
		TNT1 A 1 A_Light0
		Stop
	}
}



Actor PerforatorCasingSpawner
{
	Radius 1
	Height 1
	Speed 17
	PROJECTILE
	States
	{
	Spawn:
		TNT1 A 1
		TNT1 A 0 A_SetAngle(angle+100)
		TNT1 A 0 A_Die
		Goto Death
	Death:
		TNT1 A 0 A_CustomMissile("PerforatorCasing",0,0,random(10,-10),2,0) 
		Stop
	}
}

Actor PerforatorCasing
{
	Height 12
	Radius 9
	Speed 4
	Scale 0.35
	BounceFactor 0.4
	PROJECTILE
	BounceType "Doom"
	- NOGRAVITY
	+DONTSPLASH
	-NOBLOCKMAP
	-SOLID
	SeeSound "Casing/smallsound"
	States
	{
	Spawn:
		CSNG A 0 A_PlaySound("TNT1")
	TNT1 AAAAAA 1
		CSNG GHIJKLMNOP 1 A_SpawnItemEx("CasingSmoke",0,0,0,0,0,0,0,0)
		CSNG ABCDEFGHIJKLMNOP 1 A_SpawnItemEx("CasingSmoke",0,0,0,0,0,0,0,0)
	Death:
		CSNG A 0 A_Jump(256,1,2,3,4,5,6,7,8)
		CSNG B 350
		Stop
		CSNG C 350
		Stop
		CSNG K 350
		Stop
		CSNG L 350
		Stop
		CSNG D 350
		Stop
		CSNG J 350
		Stop
		CSNG N 350
		Stop
		CSNG B 350
		Stop
	}
}
//-----------------------------------------------------------------------
Actor SNail //: FastProjectile
{
	Projectile
	+RIPPER	RipperLevel 1
	+NODAMAGETHRUST
	+EXTREMEDEATH
	+BLOODLESSIMPACT
	+DONTREFLECT
	Radius 6
	Height 6
	Speed 30
	Damage 7
	DamageType "AEBullet"
	SeeSound "weapons/supernail"
	DeathSound "weapons/nailpuff"
	//MissileType "BoltTrail"
	//MissileHeight 8
	Scale 0.15
	States
	{
	Spawn:
		SPIK A 0 NoDelay A_Jump(128,"Bloody")
		Goto Movement
	Bloody:
		"####" "#" 0 A_ChangeFlag("BLOODLESSIMPACT",0)
	Movement:
		"####" "#" -1
		Loop
	Death:
		TNT1 A 0 A_Jump(128,1)
		TNT1 A 0 A_PlaySound("weapons/nailricochet")
		TNT1 A 3
		Stop
	}
}

Actor PfNail //: FastProjectile
{
	Projectile
	+RIPPER	RipperLevel 1
	+NODAMAGETHRUST
	+EXTREMEDEATH
	+DONTREFLECT
	Radius 6
	Height 6
	Speed 30
	Damage 13
	DamageType "AEBullet"
	//MissileType "PerforatorNailTrail"
	//MissileHeight 8
	SeeSound "weapons/supernail"
	DeathSound "weapons/nailpuff"
	Scale 0.22
	States
	{
	Spawn:
		SPIK A 1
		Loop
	Death:
		TNT1 A 0 A_SpawnItemEx("NailPuff",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		TNT1 A 0 A_Jump(128,1)
		TNT1 A 0 A_PlaySound("weapons/nailricochet")
		TNT1 A 3
		Stop
	}
}

Actor PerforatorNailTrail
{
	+NOINTERACTION
	RenderStyle Add
	Scale 0.04
	States
	{
	Spawn:
		X106 A 0
		X106 A 0 A_Jump(200,5,10,15,20)
		x105 ABCDEFGHIJKLMNOPQRSTUVWX 1 A_FadeOut(0.08)
		Goto Spawn+2
	}
}

Actor SNail3 : SNail
{
	DamageType "AEBullet"
	-RIPPER
	+HITTRACER
	Damage 5
	MissileType "PerforatorNailTrail"
	MissileHeight 8
	States
	{
	Crash:
	XDeath:
		TNT1 A 0 A_CheckFlag("SHOOTABLE",1,AAPTR_TRACER)
		Goto Death
		TNT1 AAAAAAAA 0 A_SpawnItemEx("SNail",0,0,0,34,0,random(-10,10),random(0,359),0)
		TNT1 A 0 A_CheckFlag("NOBLOOD",1,AAPTR_TRACER)
		Stop
		TNT1 A 0 A_SpawnItemEx("NewPuff1",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		Stop
	Death:
		TNT1 A 0 A_SpawnItemEx("NewPuff1",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		TNT1 A 0 A_CheckFloor("Floor")
		TNT1 A 0 A_CheckCeiling("Ceiling")
		TNT1 AAAAAAAA 0 A_SpawnItemEx("SNail",0,0,0,34,0,random(-10,10),180+random(-90,90),0)
		Stop
	Floor:
		TNT1 AAAAAAAA 0 A_SpawnItemEx("SNail",0,0,0,34,0,random(1,10),180+random(-90,90),0)
		Stop
	Ceiling:
		TNT1 AAAAAAAA 0 A_SpawnItemEx("SNail",0,0,0,34,0,-random(1,10),180+random(-90,90),0)
		Stop
	}
}

Actor PerforatorDrop : CustomInventory
{
	Inventory.MaxAmount 1
	States
	{
	Use:
		TNT1 A 0
		TNT1 A 0 A_StopSound(6)
		TNT1 A 0 A_SpawnItemEx("DroppedPerforator",0,0,32,8,0,0,0,SXF_NOCHECKPOSITION,0)
		Stop
	}
}

Actor DroppedPerforator
{
	Radius 16
	Height 20
	Scale 0.35
	States
	{
	Spawn:
		NGU3 X 15
		TNT1 A 0 A_SpawnItemEx("AEoDPerforatorNoAmmo",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER,0)
		Stop
	}
}

Actor AEoDPerforatorNoAmmo : AEoDPerforatorItem
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL
	Scale 0.35
	Inventory.Amount 1
	Inventory.PickupMessage "You got the Perforator"
	Inventory.PickupSound "reilsss/weappickup/supernailgun"
	States
	{
	Spawn:
		NGU3 X -1
		Loop
	Pickup:
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",7) <= 0,"Nothing")
		TNT1 A 0 A_JumpIfInventory("AENails",50,"Ammo")
		TNT1 A 0 A_GiveInventory("Weapon7Count",1)
		TNT1 A 0 A_GiveInventory("PerforatorDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDPerforator",1)
		TNT1 A 0 A_TakeInventory("AENails",50)
		TNT1 A 0 	
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDPerforator",1,"Ammo")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		TNT1 A 0 ACS_NamedExecute("s798",0,7,87,0)
		Fail
	Ammo:
		TNT1 A 0 A_TakeInventory("AENails",50)
		TNT1 A 0 A_JumpIfInventory("AEoDPerforator",1,2)
		TNT1 A 0 A_GiveInventory("Weapon7Count",1)
		TNT1 A 0 A_GiveInventory("PerforatorDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDPerforator",1)
		Stop
	}
}

//==================================================================================
//==================================================================================

//==================================================================================
//==================================================================================

Actor AEoDPlutoniumCannonItem : CustomInventory 6082
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL
	Scale 0.3
	Inventory.Amount 1
	Inventory.PickupMessage "You got the Plutonium Cannon."
	Inventory.PickupSound "reilsss/weappickup/darkcannon"
	States
	{
	Spawn:
		GGUP A -1
		Loop
	Pickup:
		TNT1 A 0 A_JumpIfInventory("AEoDPlutoniumCannon",1,"Ammo")
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",7) <= 0,"Nothing")
		TNT1 A 0 A_GiveInventory("Weapon7Count",1)
		TNT1 A 0 A_GiveInventory("PlutoniumCannonDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDPlutoniumCannon",1)
		TNT1 A 0 	
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDPlutoniumCannon",1,"Ammo")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		TNT1 A 0 ACS_NamedExecute("s798",0,7,98,0)
		Fail
	Ammo:
		TNT1 A 0 A_GiveInventory("AEoDPlutoniumCannon",1)
		Stop
	}
}

Actor AEoDPlutoniumCannon : Weapon // 6082
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL
	+WEAPON.CHEATNOTWEAPON
	Weapon.SelectionOrder 150
	Weapon.Ammotype1 "MiniRockets"
	Weapon.Ammotype2 "PlasmaRod"
	Weapon.AmmoGive1 20
	Weapon.AmmoGive2 20
	Weapon.AmmoUse1 3
	Weapon.AmmoUse2 35
	Weapon.SelectionOrder 5250
	Obituary "%o glowed out from %k's plutonium cannon."
	Inventory.PickupMessage "You got the Plutonium Cannon."
	Inventory.PickupSound "reilsss/weappickup/darkcannon"
	weapon.upsound "weapons/plasma/draw"
	Scale 0.3
	Tag "Plutonium cannon"
	States
	{
	Spawn:
		GGUP A -1
		Loop
	Ready:
		TNT1 A 0 A_PlaySound("reilsss/weapons/laseridle1", 6, 1.0, 1)
		GGUN A 30 A_WeaponReady
		Goto Ready+1
	Deselect:
		TNT1 A 0 A_StopSound(6)
		TNT1 A 0 	
		GGUN A 1 A_Lower
		TNT1 AA 0 A_Lower
		Goto Deselect+1
	Select:
		TNT1 A 0 	
		GGUN A 1 A_Raise
		TNT1 AA 0 A_Raise
		Loop	 
	Fire: 
		GGUN A 1 A_GunFlash
		TNT1 A 0 //ACS_NamedExecute("s851",0,25,random(-20,20),0)
		TNT1 A 0 A_PlaySound("reilsss/weapons/plutoniumcannonfire",5)
		GGUN H 1 Bright A_FireCustomMissile("DarkCannonBMissPlayer", 0, 1, 4, 2)
		GGUN I 1 //ACS_NamedExecute("s851",0,-25,0,0)
		GGUN IJJ 1
		GGUN A 4
		TNT1 A 0 A_ReFire
		Goto Ready
	AltFire: 
		TNT1 A 0 A_JumpIfInventory("PlasmaRod",20,1)
		Goto Ready
		TNT1 A 0 A_PlaySound("reilsss/weapons/plutoniumcannoncharge", 7, 1.0, 0)
		GGUN A 30 A_GunFlash
		TNT1 A 0 A_SetBlend("DarkGreen",1,50)
		TNT1 A 0 //ACS_NamedExecute("s851",0,90,random(-10,10),0)
		GGUN B 2 Bright A_FireCustomMissile("DCBMiss1AltPlayer", 0, 2, 4, 2)
		GGUN CDF 2 //ACS_NamedExecute("s851",0,-30,0,0)
		GGUN EFGA 4 
		TNT1 A 0 A_ReFire
		Goto Ready
	Flash:
		TNT1 A 3 A_Light1
		TNT1 A 1 A_Light0
		Stop
	} 
} 

Actor DCBMiss32
{
	+BLOODLESSIMPACT
	+RIPPER	RipperLevel 1
	Projectile
	DamageType "Plasma"
	Radius 1
	Height 1
	Health 5
	Speed 8
	Damage 0
	Scale 2
	SeeSound "h2necromancer/magiccast"
	States
	{
	Spawn:
		TNT1 A 2 A_Gravity
		Loop
	Death:
		FSFX NOPQRSTNOPQRST 1 Bright
		FSFX Z 0 A_CustomMissile("DCBMiss3M2",0,0,180)
		Stop
	}
}

Actor DCBMiss3M2
{
	+FLOORHUGGER
	+DONTSPLASH
	Projectile
	Radius 10
	Height 10
	Speed 28
	Damage 5
	Scale 1.3
	DamageType "Plasma"
	DeathSound "comet/explosion"
	States
	{
	Spawn:
		FSFX NOPQRSTNOPQRST 1 Bright A_SpawnItem("DCBMiss3MG",0,0)
		Loop
	Death:
		TNT1 A 0 A_Explode(128,128)
		FSFX UVW 3
		Stop
	}
}

Actor DarkCannonBMiss
{
	+RocketTrail
	Projectile
	Radius 12
	Height 8
	Health 5
	Speed 28
	Damage 11
	SeeSound "q2weapon/rocketlauncherfire"
	DeathSound "q2weapon/rocketexplo"
	DamageType "Plasma"
	Translation "160:167=120:127", "208:223=120:127"
	States
	{
	Spawn:
		MICR A 2 Bright A_SpawnItemEx("DarkCannonBMissExtra",0,0,0,1,0,random(-1,1),random(1,360))
		Loop
	Death:
		TNT1 AAAAA 0 A_SpawnItemEx("DarkCannonBMissExtra",0,0,0,1,0,random(1,5),random(1,360))
		TNT1 A 0 A_Explode(128,64)
		FSFX DEFGHIJKLM 2 Bright
		Stop
	}
}

Actor DarkCannonBMissExtra
{
	+NOCLIP
	PROJECTILE
	-NOGRAVITY
	+DONTBLAST
	+LOWGRAVITY
	+DONTSPLASH
	Height 4
	Radius 4
	Speed 3
	RenderStyle Add
	Scale 0.25
	States
	{
	Spawn:
		FX20 HHHHHH 3 Bright
		FX20 H 1 Bright A_FadeOut
		Wait
	}
}

//IN order for DBT to keep all I need in one decorate file
//and in order to show less warnings in ZDoom loading log, I cloned these
//projectiles from the late loaded MonCustom.AED to right here where its needed first
//Also Actor cloning was necessary for adding sounds.
Actor DCBMiss1Player
{
	+SEEKERMISSILE
	+EXTREMEDEATH
	+FORCERADIUSDMG
	Projectile
	Radius 12
	Height 8
	Health 5
	Speed 16
	Damage 50
	DamageType "Plasma"
	SeeSound "reilsss/weapons/plutoniumcannonfire"
	DeathSound "reilsss/weapons/plutoniumexplosion"
	States
	{
	Spawn:
		CBTS A 2 Bright A_SeekerMissile(1,90)
		TNT1 A 0 Bright A_CustomMissile("DCBM1TrailPlayer",0,0,0)
		CBTS B 2 Bright A_SeekerMissile(1,90)
		TNT1 A 0 Bright A_CustomMissile("DCBM1TrailPlayer",0,0,0)
		CBTS C 2 Bright A_SeekerMissile(1,90)
		TNT1 A 0 Bright A_CustomMissile("DCBM1TrailPlayer",0,0,0)
		CBTS D 2 Bright A_SeekerMissile(1,90)
		TNT1 A 0 Bright A_CustomMissile("DCBM1TrailPlayer",0,0,0)
		CBTS E 2 Bright A_SeekerMissile(1,90)
		TNT1 A 0 Bright A_CustomMissile("DCBM1TrailPlayer",0,0,0)
		CBTS F 2 Bright A_SeekerMissile(1,90)
		TNT1 A 0 Bright A_CustomMissile("DCBM1TrailPlayer",0,0,0)
		CBTS G 2 Bright A_SeekerMissile(1,90)
		TNT1 A 0 Bright A_CustomMissile("DCBM1TrailPlayer",0,0,0)
		CBTS H 2 Bright A_SeekerMissile(1,90)
		TNT1 A 0 Bright A_CustomMissile("DCBM1TrailPlayer",0,0,0)
		CBTS I 2 Bright A_SeekerMissile(1,90)
		TNT1 A 0 Bright A_CustomMissile("DCBM1TrailPlayer",0,0,0)
		CBTS J 2 Bright A_SeekerMissile(1,90)
		TNT1 A 0 Bright A_CustomMissile("DCBM1TrailPlayer",0,0,0)
		Loop
		Death:
		TNT1 A 0 A_Explode(128,128,0)
		TNT1 AAAAAAAAAAAAAAAAAAAAAAAA 0 A_SpawnItemEx("DarkCannonBMissExtra",0,0,0,random(-3,3),random(-3,3),random(-3,3),random(1,360))
		CBTS KLMNOPQRSTUVW 2 Bright
		Stop
	}
}

Actor DCBM1TrailPlayer
{   
	+NOCLIP
	PROJECTILE
	Radius 1
	Height 1
	Speed 0
	Scale 0.8
	RENDERSTYLE Translucent
	ALPHA 0.6
	States
	{
	Spawn:
		TNT1 A 4
		CBTS NOPQRST 2 Bright
		Stop
	}
}

Actor DarkCannonBMissPlayer
{
	Projectile
	+FORCERADIUSDMG
	+EXTREMEDEATH
	DamageType "Plasma"
	Radius 12
	Height 8
	Health 5
	Speed 28
	Damage 25
	Translation "160:167=120:127", "208:223=120:127"
	DeathSound "reilsss/weapons/plutoniumcannonhold"
	States
	{
	Spawn:
		TNT1 A 0
		MICR A 1 Bright A_SpawnItemEx("Q2RocketAltSmoke",-4,random(3,-3),0,0,frandom(0.3,-0.3),frandom(0.3,0.75),0,SXF_NOCHECKPOSITION)
		MICR AA 0 Bright A_SpawnItemEx("DarkCannonBMissExtra",0,0,0,1,0,random(-1,1),random(1,360))
		MICR A 1 Bright A_SpawnItemEx("Q2RocketAltSmoke",-4,random(3,-3),0,0,frandom(0.3,-0.3),frandom(0.3,0.75),0,SXF_NOCHECKPOSITION)
		MICR AA 0 Bright A_SpawnItemEx("DarkCannonBMissExtra",0,0,0,1,0,random(-1,1),random(1,360))
		Loop
	Death:
		TNT1 AAAAAAAA 0 A_SpawnItemEx("DarkCannonBMissExtra",0,0,0,1,0,random(1,5),random(1,360))
		TNT1 A 0 A_Explode(random(110,145),64,0)
		TNT1 A 0 A_SetTranslucent(0.9,1)
		TNT1 A 0 A_SpawnItemEx("NewExplosionSmallLittleBigger",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		FSFX DEFGHIJKLM 2 Bright A_FadeOut(0.1)
		Stop
	}
}

Actor DCBMiss1AltPlayer
{
	Radius 12
	Height 8
	Health 5
	Speed 22
	Damage 35
	Projectile
	DamageType "Plasma"
	+SEEKERMISSILE
	+EXTREMEDEATH
	+FORCERADIUSDMG
	SeeSound "q2weapon/bfgball"
	DeathSound "q2weapon/bfgballexplo"
	States
	{
	Spawn:
		CBTS A 1 Bright A_SeekerMissile(1,10,1)
		TNT1 A 0 Bright A_CustomMissile("DCBM1Trail",0,0,0)
		CBTS B 1 Bright A_SeekerMissile(1,10,1)
		TNT1 A 0 Bright A_CustomMissile("DCBM1Trail",0,0,0)
		CBTS C 1 Bright A_SeekerMissile(1,10,1)
		TNT1 A 0 Bright A_CustomMissile("DCBM1Trail",0,0,0)
		CBTS D 1 Bright A_SeekerMissile(1,10,1)
		TNT1 A 0 Bright A_CustomMissile("DCBM1Trail",0,0,0)
		CBTS E 1 Bright A_SeekerMissile(1,10,1)
		TNT1 A 0 Bright A_CustomMissile("DCBM1Trail",0,0,0)
		CBTS F 1 Bright A_SeekerMissile(1,10,1)
		TNT1 A 0 Bright A_CustomMissile("DCBM1Trail",0,0,0)
		CBTS G 1 Bright A_SeekerMissile(1,10,1)
		TNT1 A 0 Bright A_CustomMissile("DCBM1Trail",0,0,0)
		CBTS H 1 Bright A_SeekerMissile(1,10,1)
		TNT1 A 0 Bright A_CustomMissile("DCBM1Trail",0,0,0)
		CBTS I 1 Bright A_SeekerMissile(1,10,1)
		TNT1 A 0 Bright A_CustomMissile("DCBM1Trail",0,0,0)
		CBTS J 1 Bright A_SeekerMissile(1,10,1)
		TNT1 A 0 Bright A_CustomMissile("DCBM1Trail",0,0,0)
		Loop
	Death:
		TNT1 A 0 A_Explode(random(300,600),128,0)
		TNT1 AAAAAAAAAAA 0 A_SpawnItemEx("BFGBallSmoke",0,0,0,random(3,-3)/(2*1.05),random(3,-3)/(2*1.05),random(3,-3)/(2*1.05),0,SXF_NOCHECKPOSITION)
		TNT1 AAAAAAAAAAAAAAAAAAA 0 A_SpawnItemEx("DarkCannonBMissExtra",0,0,0,random(-3,3),random(-3,3),random(-3,3),random(1,360))
		CBTS KLMNOP 2 Bright
		TNT1 A 4 A_SpawnItemEx("PhotonReactorCannonExplosion",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)	//see WepClass9.AED
		CBTS QRSTUVW 2 Bright
		Stop
	}
}

Actor PlutoniumCannonDrop : CustomInventory
{
	Inventory.MaxAmount 1
	States
	{
	Use:
		TNT1 A 0
		TNT1 A 0 A_StopSound(6)
		TNT1 A 0 A_SpawnItemEx("DroppedPlutoniumCannon",0,0,32,8,0,0,0,SXF_NOCHECKPOSITION,0)
		Stop
	}
}

Actor DroppedPlutoniumCannon
{
	Radius 16
	Height 20
	Scale 0.3
	States
	{
	Spawn:
		GGUP A 15
		TNT1 A 0 A_SpawnItemEx("AEoDPlutoniumCannonNoAmmo",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER,0)
		Stop
	}
}

Actor AEoDPlutoniumCannonNoAmmo : AEoDPlutoniumCannonItem
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL
	Scale 0.3
	Inventory.Amount 1
	Inventory.PickupMessage "You got the Plutonium Cannon."
	Inventory.PickupSound "reilsss/weappickup/darkcannon"
	States
	{
	Spawn:
		GGUP A -1
		Loop
	Pickup:
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",7) <= 0,"Nothing")
		TNT1 A 0 A_JumpIfInventory("MiniRockets",20,"Ammo")
		TNT1 A 0 A_JumpIfInventory("PlasmaRod",20,"Ammo3")
		TNT1 A 0 A_GiveInventory("Weapon7Count",1)
		TNT1 A 0 A_GiveInventory("PlutoniumCannonDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDPlutoniumCannon",1)
		TNT1 A 0 A_TakeInventory("MiniRockets",20)
		TNT1 A 0 A_TakeInventory("PlasmaRod",20)
		TNT1 A 0 	
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDPlutoniumCannon",1,"Ammo")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		TNT1 A 0 ACS_NamedExecute("s798",0,7,98,0)
		Fail
	Ammo:
		TNT1 A 0 A_JumpIfInventory("PlasmaRod",20,1)
		Goto Ammo2
		TNT1 A 0 A_TakeInventory("MiniRockets",20)
		TNT1 A 0 A_TakeInventory("PlasmaRod",20)
		TNT1 A 0 A_JumpIfInventory("AEoDPlutoniumCannon",1,2)
		TNT1 A 0 A_GiveInventory("Weapon7Count",1)
		TNT1 A 0 A_GiveInventory("PlutoniumCannonDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDPlutoniumCannon",1)
		Stop
	Ammo2:
		TNT1 A 0 A_TakeInventory("MiniRockets",20)
		TNT1 A 0 A_GiveInventory("Weapon7Count",1)
		TNT1 A 0 A_GiveInventory("PlutoniumCannonDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDPlutoniumCannon",1)
		TNT1 A 0 A_TakeInventory("PlasmaRod",20)
		Stop
	Ammo3:
		TNT1 A 0 A_TakeInventory("PlasmaRod",20)
		TNT1 A 0 A_GiveInventory("Weapon7Count",1)
		TNT1 A 0 A_GiveInventory("PlutoniumCannonDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDPlutoniumCannon",1)
		TNT1 A 0 A_TakeInventory("MiniRockets",20)
		Stop
	}
}

//==================================================================================
//==================================================================================

//==================================================================================
//==================================================================================

Actor AEoDThunderBoltItem : CustomInventory 6021
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL
	Inventory.Amount 1
	Scale 0.15
	Inventory.PickupMessage "You get the ThunderBolt"
	Inventory.PickupSound "reilsss/weappickup/ligthinggun"
	States
	{
	Spawn:
		WTHN A 3
		Loop
	Pickup:
		TNT1 A 0 A_JumpIfInventory("AEoDThunderBolt",1,"Ammo")
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",7) <= 0,"Nothing")
		TNT1 A 0 A_GiveInventory("Weapon7Count",1)
		TNT1 A 0 A_GiveInventory("ThunderBoltDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDThunderBolt",1)
		TNT1 A 0 	
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDThunderBolt",1,"Ammo")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		TNT1 A 0 ACS_NamedExecute("s798",0,7,86,0)
		Fail
	Ammo:
		TNT1 A 0 A_GiveInventory("AEoDThunderBolt",1)
		Stop
	}
}

Actor AEoDThunderBolt : Weapon // 6021
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL
	+WEAPON.CHEATNOTWEAPON
	Scale 0.15
	Weapon.AmmoType1 "AECell"
	Weapon.AmmoType2 "AECell"
	Weapon.AmmoGive1 50
	Weapon.AmmoUse1 1
	Weapon.AmmoUse2 1
	Weapon.SelectionOrder 10850
	Obituary "%o was electrocuted by %k's ThunderBolt."
	Inventory.PickupMessage "You get the ThunderBolt"
	Inventory.PickupSound "reilsss/weappickup/ligthinggun"
	AttackSound "reilsss/weapons/thunderboltfire2"
	weapon.upsound "weapons/plasma/draw"
	Tag "Thunderbolt"
	States
	{
	Spawn:
		WTHN A 3
		Loop
	Ready:
		TNT1 A 0 A_PlaySound("reilsss/weapons/electricidle2", 6, 0.4, 1)
		THNB AABBCCDDAABBCCDD 1 A_WeaponReady
		Goto Ready+1
	Ready2:
		TNT1 A 0 A_PlaySound("reilsss/weapons/electricidle2", 6, 0.4, 1)
		LGUN AABBCCDDAABBCCDDAABBCCDDAABBCCDD 3 A_WeaponReady
		Goto Ready+1
	Deselect:
		TNT1 A 0 	
		TNT1 A 0 A_StopSound(CHAN_WEAPON)
		TNT1 A 0 A_StopSound(5)
		TNT1 A 0 A_StopSound(6)
		THNB A 1 A_Lower
		TNT1 AA 0 A_Lower
		Loop
	Select:
		TNT1 A 0 	
		THNB A 1 A_Raise
		TNT1 AA 0 A_Raise
		Loop
	Fire:
		TNT1 A 0 A_PlaySound("weapons/thunderbolt/fire1", 7, 1.0, 0)
	Hold:
		TNT1 A 0 A_GunFlash
		TNT1 A 0 A_PlaySound("weapons/thunderbolt/fire2", CHAN_WEAPON, 0.9, 1)
		TNT1 A 0 A_PlaySound("weapons/thunderbolt/fire3", 5, 0.4, 1)
		TNT1 A 0 A_SetBlend("LightBlue1",0.1,10)
		TNT1 A 0 //ACS_NamedExecute("s851",0,random(-10,10),random(-10,10),0)
		THNB IJ 1 A_FireCustomMissile("ThunderBoltLightning",0,1,8,2,0)
		TNT1 A 0 A_GunFlash
		TNT1 A 0 //ACS_NamedExecute("s851",0,random(-10,10),random(-10,10),0)
		THNB KL 1 A_FireCustomMissile("ThunderBoltLightning",0,0,8,2,0)
		TNT1 A 0 A_GunFlash
		TNT1 A 0 A_SetBlend("LightBlue1",0.1,10)
		TNT1 A 0 //ACS_NamedExecute("s851",0,random(-10,10),random(-10,10),0)
		THNB IJ 1 A_FireCustomMissile("ThunderBoltLightning",0,1,8,2,0)
		TNT1 A 0 A_GunFlash
		TNT1 A 0 //ACS_NamedExecute("s851",0,random(-10,10),random(-10,10),0)
		THNB KL 1 A_FireCustomMissile("ThunderBoltLightning",0,0,8,2,0)
		TNT1 A 0 A_GunFlash
		TNT1 A 0 //ACS_NamedExecute("s851",0,random(-10,10),random(-10,10),0)
		THNB IJ 1 A_FireCustomMissile("ThunderBoltLightning",0,1,8,2,0)
		TNT1 A 0 A_GunFlash
		TNT1 A 0 //ACS_NamedExecute("s851",0,random(-10,10),random(-10,10),0)
		THNB KL 1 A_FireCustomMissile("ThunderBoltLightning",0,0,8,2,0)
		THNB L 2 A_ReFire
		TNT1 A 0 A_StopSound(CHAN_WEAPON)
		TNT1 A 0 A_StopSound(5)
		THNB A 2 A_PlaySound("reilsss/weapons/electroidle", 7, 1.0, 0)
		Goto Ready
	AltFire:
		TNT1 A 0 A_JumpIfInventory("InfiniteAmmo",1,3)
		TNT1 A 0 A_JumpIfInventory("PowerEconomizer",1,2)
		TNT1 A 0 A_JumpIfInventory("AECell",50,1)
		Goto Deny
		
		TNT1 A 0 A_JumpIfInventory("ThunderRingCount",6,"BuffTimer")
		TNT1 A 0 A_GiveInventory("ThunderRingCount",6)
		TNT1 A 0 A_SetBlend("LightBlue1",0.3,15)
		TNT1 A 0 A_PlaySound("Thunderbolt/Thunder",CHAN_BODY,1,0,ATTN_NONE)
		THNB B 0 A_TakeInventory("AECell",50,1)
		THNB A 0 A_FireCustomMissile("ThunderRingSpawner",0,0)
		THNB AABBCCDDAABBCCDDAABBCCDDAABB 1 A_WeaponReady(WRF_NOBOB|WRF_NOFIRE)
		Goto Ready
	BuffTimer:
		THNB A 0 A_SetBlend("LightBlue1",0.3,15)
		THNB A 0 A_PlaySound("Thunderbolt/Thunder",CHAN_BODY,1,0,ATTN_NONE)
		THNB A 0 A_GiveInventory("ThunderTimerIncreaseToken",6)
		THNB A 0 A_JumpIfInventory("PowerEconomizer",1,2)
		THNB A 0 A_TakeInventory("AECell",50,1)
		THNB AABBCCDDAABBCCDDAABBCCDDAABB 1 A_WeaponReady(WRF_NOBOB|WRF_NOFIRE)
		Goto Ready
	Deny:
		THNB A 0 A_PlaySound("rgp/no", CHAN_AUTO, 1.0, 0)
		THNB AABBCCDDAABBCC 1 A_WeaponReady(WRF_NOSECONDARY)
		Goto Ready
	Flash:
		ZZZZ C 1 A_Light2
		ZZZZ C 0 A_Light0
		Stop
	}
}

Actor ThunderTimerIncreaseToken : Inventory {	Inventory.MaxAmount 1	}

Actor ThunderRingSpawner
{
	Projectile
	+NOINTERACTION
	+FORCERADIUSDMG
	Radius 2
	Height 2
	DamageType "Electric"
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_Explode(random(50,250),128,0)
		TNT1 AAAAAA 4 A_SpawnItemEx("ThunderRingShocker",0,0,16,4,0,0,0,SXF_NOCHECKPOSITION|SXF_TRANSFERPOINTERS)
		TNT1 AA 16 A_Explode(random(50,250),128,0)
		Stop
	}
}

Actor ThunderRingShocker
{
	var int user_life[3];
	//[0] = Time left before expiring
	//[1] = Delay between shots
	//[2] = Time enhancer cooldown
	var int user_angle[2];
	//Translation "0:255=%[1,1,1]:[0,0,0]"
	//RenderStyle Add
	Projectile
	Height 1
	Radius 1
	Damage 1
	Scale 0.07
	+STRIFEDAMAGE
	+NOINTERACTION
	+SEEKERMISSILE
	+VISIBILITYPULSE
	+RANDOMIZE
	DeathSound "weapons/plasmax"
	States
	{
	Spawn:
	S1:
		NB03 D 0
		Goto Playoff
	Playoff:
		"####" "#" 8 A_SetUserArray("user_life",0,2105)
	Looping:
		"####" "#" 0 A_SeekerMissile(0,0,1,128)
		"####" "#" 1 Bright A_Warp(AAPTR_TARGET,64,0,32,16,WARPF_INTERPOLATE|WARPF_USECALLERANGLE|WARPF_NOCHECKPOSITION)
		"####" "#" 0 A_JumpIf(user_life[2]>=1,2)
		"####" "#" 0 A_JumpIfInventory("ThunderTimerIncreaseToken",1,"IncreaseTime",AAPTR_TARGET)
		"####" "#" 0 A_SetUserArray("user_life",0,user_life[0]-1)
		"####" "#" 0 A_SetUserArray("user_life",1,user_life[1]-1)
		"####" "#" 0 A_SetUserArray("user_life",2,user_life[2]-1)
		"####" "#" 0 A_JumpIf(user_life[0]<=0,"ExplodeEnd")
		"####" "#" 0 A_JumpIf(user_life[1]>=1,2)
		"####" "#" 0 A_JumpIfTracerCloser(512,"Shocker")
		"####" "#" 0 A_RearrangePointers(AAPTR_DEFAULT,AAPTR_DEFAULT,AAPTR_NULL,PTROP_NOSAFEGUARDS)
		Loop
	IncreaseTime:
		"####" "#" 0 A_TakeInventory("ThunderTimerIncreaseToken",1,0,AAPTR_TARGET)
		"####" "#" 0 A_SetUserArray("user_life",0,user_life[0]+2105)
		"####" "#" 0 A_SetUserArray("user_life",2,35)
		Goto Looping
	Death:
	ExplodeEnd:
		TNT1 A 0 A_TakeInventory("ThunderRingCount",1,0,AAPTR_TARGET)
		PLSE ABCDE 3 Bright A_Stop
		Stop
	Shocker:
		"####" "#" 0 A_SetUserArray("user_angle",0,angle) //Store the original angle.
		"####" "#" 0 A_FaceTracer
		"####" "#" 0 A_PlaySound("weapons/thunderbolt/fire1", 7, 1.0, 0)
		"####" "#" 0 A_CustomMissile("ThunderBoltLightning2",0,0,0,6)//A_CustomRailgun(20,0,none,"Black",RGF_SILENT|RGF_NOPIERCING,0,0,"ElectricPuff")
		"####" "#" 0 A_SetUserArray("user_life",1,10)
	Return:
		"####" "#" 0 A_SetAngle(user_angle[0]) //Retrieve the original angle.
		Goto Looping
	}
}

Actor ThunderRingCount : Inventory
{	Inventory.MaxAmount 1	}

Actor ElectricPuff
{
	DamageType "Electric"
	Radius 1
	Height 2
	States
	{
	Spawn:
		TNT1 A 2
		Stop
	}
}

Actor ElectricPuff2 : ElectricPuff
{
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 0 A_SpawnItemEx("ShuricaneSpark",0,0,0,frandom(2.0,-2.0),frandom(2.0,-2.0),frandom(2.0,-2.0),0,SXF_NOCHECKPOSITION)
		TNT1 A 1
		Stop
	}
}

Actor ThunderBoltLightning 
{
	var int user_life;
	Projectile
	+DONTREFLECT
	Speed 8
	Radius 8
	Height 12
	Damage 1
	RenderStyle Add
	DamageType "Electric"
	ReactionTime 6
	Scale 0.17
	States
	{
	Spawn:
		TNT1 A 0
	Movement:
		TNT1 A 0 A_SpawnItemEx("ThunderBoltLightTrail",0,frandom(-1,1),frandom(-1,1),0,0,0,0,SXF_NOCHECKPOSITION)
		TNT1 A 0 A_SetUserVar("user_life",user_life+1)
		TNT1 A 0 A_JumpIf(user_life>=125,2)
		TNT1 A 0 A_Warp(AAPTR_DEFAULT,velx,vely,velz,0,WARPF_ABSOLUTEOFFSET,"Movement")
		TNT1 A 1
	Death:
		TNT1 A 0 A_Jump(256,"Type1","Type2","Type3","Type4","Type5")
	Type1:
		ZAP9 A 1 Bright A_FadeOut(0.3)
		Wait
	Type2:
		ZAP9 B 1 Bright A_FadeOut(0.3)
		Wait
	Type3:
		ZAP9 C 1 Bright A_FadeOut(0.3)
		Wait
	Type4:
		ZAP9 D 1 Bright A_FadeOut(0.3)
		Wait
	Type5:
		ZAP9 E 1 Bright A_FadeOut(0.3)
		Wait
	}
}

Actor ThunderBoltLightning2 : FastProjectile
{
	Speed 1	//170
	Radius 8
	Height 12
	Damage 1
	+STRIFEDAMAGE
	+EXTREMEDEATH
	+SEEKERMISSILE
	RenderStyle Add
	DamageType "Electric"
	DeathType "Disintegrate"
	MissileType "ThunderBoltLightTrail"
	MissileHeight 8
	ReactionTime 12
	Scale 0.3
	States
	{
	Spawn:
		TNT1 A 0 //Done to stop the Actor from moving forward upon first initialization.
		TNT1 A 0 A_SeekerMissile(0,0,3,256)
		TNT1 A 0 A_FaceTracer
		TNT1 A 0 A_ScaleVelocity(170)
	Travelling:
		TNT1 A 1 A_CountDown
		Loop
	Death:
		TNT1 A 0 A_Jump(256,"Type1","Type2","Type3","Type4","Type5")
	Type1:
		ZAP9 A 1 Bright A_FadeOut(0.3)
		Wait
	Type2:
		ZAP9 B 1 Bright A_FadeOut(0.3)
		Wait
	Type3:
		ZAP9 C 1 Bright A_FadeOut(0.3)
		Wait
	Type4:
		ZAP9 D 1 Bright A_FadeOut(0.3)
		Wait
	Type5:
		ZAP9 E 1 Bright A_FadeOut(0.3)
		Wait
	}
}


Actor ThunderBoltLightTrail
{
	+NOINTERACTION
	Scale 0.28
	+NOCLIP
	RenderStyle Add
	Translation "0:255=%[0,0,0]:[0.7,0.7,1.3]"
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_Jump(256,"Type1","Type2","Type3","Type4","Type5","Type6","Type7","Type8","Type9")
	Type1:
		TNT1 A 0 A_SpawnItemEx("PsychLightningSpark",0,0,0,frandom(2.0,-2.0),frandom(2.0,-2.0),frandom(2.0,-2.0),0,SXF_NOCHECKPOSITION,253)
		HSPL A 1 Bright A_FadeOut(0.4)
		Loop
	Type2:
		TNT1 A 0 A_SpawnItemEx("PsychLightningSpark",0,0,0,frandom(2.0,-2.0),frandom(2.0,-2.0),frandom(2.0,-2.0),0,SXF_NOCHECKPOSITION,253)
		HSPL B 1 Bright A_FadeOut(0.4)
		Loop
	Type3:
		TNT1 A 0 A_SpawnItemEx("PsychLightningSpark",0,0,0,frandom(2.0,-2.0),frandom(2.0,-2.0),frandom(2.0,-2.0),0,SXF_NOCHECKPOSITION,253)
		HSPL C 1 Bright A_FadeOut(0.4)
		Loop
	Type4:
		TNT1 A 0 A_SpawnItemEx("PsychLightningSpark",0,0,0,frandom(2.0,-2.0),frandom(2.0,-2.0),frandom(2.0,-2.0),0,SXF_NOCHECKPOSITION,253)
		HSPL d 1 Bright A_FadeOut(0.4)
		Loop
	Type5:
		TNT1 A 0 A_SpawnItemEx("PsychLightningSpark",0,0,0,frandom(2.0,-2.0),frandom(2.0,-2.0),frandom(2.0,-2.0),0,SXF_NOCHECKPOSITION,253)
		HSPL E 1 Bright A_FadeOut(0.4)
		Loop
	Type6:
		TNT1 A 0 A_SpawnItemEx("PsychLightningSpark",0,0,0,frandom(2.0,-2.0),frandom(2.0,-2.0),frandom(2.0,-2.0),0,SXF_NOCHECKPOSITION,253)
		HSPL F 1 Bright A_FadeOut(0.4)
		Loop
	Type7:
		TNT1 A 0 A_SpawnItemEx("PsychLightningSpark",0,0,0,frandom(2.0,-2.0),frandom(2.0,-2.0),frandom(2.0,-2.0),0,SXF_NOCHECKPOSITION,253)
		HSPL G 1 Bright A_FadeOut(0.4)
		Loop
	Type8:
		TNT1 A 0 A_SpawnItemEx("PsychLightningSpark",0,0,0,frandom(2.0,-2.0),frandom(2.0,-2.0),frandom(2.0,-2.0),0,SXF_NOCHECKPOSITION,253)
		HSPL H 1 Bright A_FadeOut(0.4)
		Loop
	Type9:
		TNT1 A 0 A_SpawnItemEx("PsychLightningSpark",0,0,0,frandom(2.0,-2.0),frandom(2.0,-2.0),frandom(2.0,-2.0),0,SXF_NOCHECKPOSITION,253)
		HSPL I 1 Bright A_FadeOut(0.4)
		Loop
	}
}


Actor ThunderboltBeam : MageWandMissile
{
	Speed 200
	Radius 3
	Height 3
	Damage (random(6,12)) //Oldsetup was 20 to 50 (Railgun Damage) 
	Decal DoomImpScorch
	damagetype "Electric"
	SeeSound ""
	Scale 0.4
	states
	{
	Spawn:
		TNT1 A 1
		Loop
	Death:
		TNT1 A 0
		Stop
	}
}

Actor ThunderboltTrail : MageWandSmoke replaces MageWandSmoke
{
	RenderStyle Add
	Scale 0.4
	States
	{
	Spawn:
		PLSE BCD 1 Bright
		stop
	}
}

Actor ThunderboltBeam2 : ThunderboltBeam { Damage (random(50,80)) }

Actor ThunderBoltDrop : CustomInventory
{
	Inventory.MaxAmount 1
	States
	{
	Use:
		TNT1 A 0
		TNT1 A 0 A_StopSound(CHAN_WEAPON)
		TNT1 A 0 A_StopSound(5)
		TNT1 A 0 A_StopSound(6)
		TNT1 A 0 A_SpawnItemEx("DroppedThunderBolt",0,0,32,8,0,0,0,SXF_NOCHECKPOSITION,0)
		Stop
	}
}

Actor DroppedThunderBolt
{
	Radius 16
	Height 20
	Scale 0.15
	States
	{
	Spawn:
		WTHN A 15
		TNT1 A 0 A_SpawnItemEx("AEoDThunderBoltNoAmmo",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER,0)
		Stop
	}
}

Actor AEoDThunderBoltNoAmmo : AEoDThunderBoltItem
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL
	Inventory.Amount 1
	Scale 0.15
	Inventory.PickupMessage "You get the ThunderBolt"
	Inventory.PickupSound "reilsss/weappickup/ligthinggun"
	States
	{
	Spawn:
		WTHN A 3
		Loop
	Pickup:
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",7) <= 0,"Nothing")
		TNT1 A 0 A_JumpIfInventory("AECell",40,"Ammo")
		TNT1 A 0 A_GiveInventory("Weapon7Count",1)
		TNT1 A 0 A_GiveInventory("ThunderBoltDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDThunderBolt",1)
		TNT1 A 0 A_TakeInventory("AECell",40)
		TNT1 A 0 	
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDThunderBolt",1,"Ammo")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		TNT1 A 0 ACS_NamedExecute("s798",0,7,86,0)
		Fail
	Ammo:
		TNT1 A 0 A_TakeInventory("AECell",40)
		TNT1 A 0 A_JumpIfInventory("AEoDThunderBolt",1,2)
		TNT1 A 0 A_GiveInventory("Weapon7Count",1)
		TNT1 A 0 A_GiveInventory("ThunderBoltDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDThunderBolt",1)
		Stop
	}
}

//==================================================================================
//==================================================================================

//==================================================================================
//==================================================================================

Actor AEoDVulcanCannonItem : CustomInventory 6053
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL
	Scale 0.7
	Inventory.Amount 1
	Inventory.PickupMessage "Picked up the Vulcan Cannon!"
	Inventory.PickupSound "reilsss/weappickup/flyergun" 
	States
	{
	Spawn:
		W001 H -1
		Loop
	Pickup:
		TNT1 A 0 A_JumpIfInventory("AEoDVulcanCannon",1,"Ammo")
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",7) <= 0,"Nothing")
		TNT1 A 0 A_GiveInventory("Weapon7Count",1)
		TNT1 A 0 A_GiveInventory("VulcanCannonDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDVulcanCannon",1)
		TNT1 A 0 	
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDVulcanCannon",1,"Ammo")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		TNT1 A 0 ACS_NamedExecute("s798",0,7,102,0)
		Fail
	Ammo:
		TNT1 A 0 A_GiveInventory("AEoDVulcanCannon",1)
		Stop
	}
}

Actor AEoDVulcanCannon : Weapon // 6053
{ 
	+FLOORCLIP
	+INVENTORY.IGNORESKILL
	+WEAPON.CHEATNOTWEAPON
	Weapon.Kickback 90
	Weapon.AmmoType1 "AEClip" 
	Weapon.AmmoType2 "AEShell" 
	Weapon.AmmoGive1 100
	Weapon.AmmoGive2 16
	Weapon.AmmoUse1 3
	Weapon.AmmoUse2 3
	Weapon.SelectionOrder 11790
	Obituary "%o was slaughtered by %k's Vulcan Cannon."
	Inventory.PickupMessage "Picked up the Vulcan Cannon!"
	Inventory.PickupSound "reilsss/weappickup/flyergun" 
	weapon.upsound "BS/Hailstorm/Raise"
	Scale 0.7
	Tag "Vulcan cannon"
	States 
	{ 
	Spawn: 
		W001 H -1
		Loop 
	Ready: 
		W001 A 1 A_WeaponReady 
		Loop
	Deselect: 
		"----" A 0 A_StopSound(CHAN_WEAPON)
		"----" A 0 A_StopSound(5)
		"----" A 0 A_StopSound(6)
		"----" A 1 A_Lower 
		"----" AA 0 A_Lower
		Goto Deselect+1
	Select: 
		W001 A 0 	
		W001 A 1 A_Raise
		W001 AA 0 A_Raise 
		Loop 
	Fire:
		W001 A 0 A_StopSound(CHAN_WEAPON)
		W001 A 0 A_StopSound(5)
		W001 A 0 A_PlaySound("VulcanCannon/StartLoop",5,1,1)
		W001 BCD 3
		W001 EFG 2
		W001 ABC 2
		W001 D 0 A_Refire("F2")
		Goto WindDown
	F2:
		W001 D 0 A_PlaySound("VulcanCannon/FireLoop",CHAN_WEAPON,1,1)
	Hold: 
		"----" A 0 A_GunFlash
		"----" A 0 A_QuakeEx(1,1,1,5,0,2,"",QF_RELATIVE)
		"----" A 0 A_Recoil(0.08)
		"####" I 1 Bright A_FireBullets(4, 4, 3, 7, "NewPuff1", 1)
		"----" A 0 A_Jump(252,2)
		"----" A 0 A_FireBullets(0,0,1,0,"BDPuff2",0)
		"----" A 0 A_SetPitch(pitch-1.2)
		"----" A 0 A_FireCustomMissile("PistolCasingSpawnerLow",-50,0, 0,0)
		"----" A 0 Bright A_FireCustomMissile("GunSmokeSpawner",0+random(-7,7),0,6,6)
		"----" A 0 A_Recoil(0.08)
		"####" J 1 Bright A_FireBullets(4, 4, 3, 7, "NewPuff1", 0)
		"----" A 0 A_Jump(252,2)
		"----" A 0 A_FireBullets(0,0,1,0,"BDPuff2",0)
		"----" A 0 A_SetPitch(pitch+1.2)
		"----" A 0 A_FireCustomMissile("PistolCasingSpawnerLow",-50,0, 0,0)
		"----" A 0 Bright A_FireCustomMissile("GunSmokeSpawner",0+random(-7,7),0,6,6)
		"----" A 0 A_Recoil(0.08)
		"####" K 1 Bright A_FireBullets(4, 4, 3, 7, "NewPuff1", 1)
		"----" A 0 A_Jump(252,2)
		"----" A 0 A_FireBullets(0,0,1,0,"BDPuff2",0)
		"----" A 0 A_SetPitch(pitch-1.2)
		"----" A 0 A_FireCustomMissile("PistolCasingSpawnerLow",-50,0, 0,0)
		"----" A 0 Bright A_FireCustomMissile("GunSmokeSpawner",0+random(-7,7),0,6,6)
		"----" A 0 A_Recoil(0.08)
		"####" L 1 Bright A_FireBullets(4, 4, 3, 7, "NewPuff1", 1)
		"----" A 0 A_Jump(252,2)
		"----" A 0 A_FireBullets(0,0,1,0,"BDPuff2",0)
		"----" A 0 A_SetPitch(pitch+1.2)
		"----" A 0 A_FireCustomMissile("PistolCasingSpawnerLow",-50,0, 0,0)
		"----" A 0 Bright A_FireCustomMissile("GunSmokeSpawner",0+random(-7,7),0,6,6)
		"----" A 0 A_Recoil(0.08)
		"----" A 0 A_Refire("Hold")
		Goto PreWindDown
	PreWindDown: //Only for primary!
		"####" "#" 0 A_QuakeEx(1,1,1,5,0,4,"",QF_RELATIVE|QF_SCALEDOWN)
		"####" "#" 0 A_PlaySound("VulcanCannon/FinalShot",6,1,0)
	WindDown:
		"----" A 0 A_StopSound(CHAN_WEAPON)
		"----" A 0 A_PlaySound("VulcanCannon/WindDown",5,1,0)//("reilsss/weapons/vulcanspinoff",CHAN_AUTO,1.0,0)
		W001 A 2
		W001 B 2
		W001 C 3
		W001 D 3
		W001 EEEFFFFGGGG 1 A_WeaponReady 
		W001 AAAABBBBBCCCCCDDDDDDEEEEEEFFFFFFFGGGGGGG 1 A_WeaponReady 
		Goto Ready 
	AltFire:
		"####" B 0 A_JumpIfInventory("PowerQuickFire",1,"AltFireQuick")
		"####" B 3 A_PlaySound("VulcanCannon/StartLoop",5,1,1)
		"####" CDE 3
		"####" FGABCD 2
		"----" A 0 A_GunFlash
		"----" A 0 A_Recoil(0.08)
		"----" A 0 A_PlaySound("weapons/shotgunfire",CHAN_WEAPON,1,0)
		"----" A 0 Bright A_FireBullets(7,7,15,6,"BulletDamagePuff",1)
		"----" AA 0 A_FireCustomMissile("ShotgunCasingSpawner",-50,0, 0,0)
		"####" I 1 Bright A_SetPitch(pitch-1.2)
		"####" FG 1 Bright A_SetPitch(pitch+0.6)
		"####" ABCD 1 Bright 
		"----" A 0 Bright A_ReFire
		"####" EFG 1 bright
		"----" A 0 A_StopSound(6)
		Goto WindDown
	AltFireQuick:
		"----" A 0 A_JumpIfInventory("PowerQuickFire",1,1)
		Goto AltFire
		"####" A 3 A_PlaySound("VulcanCannon/StartLoop",5,1,1)
		"####" CDE 3
		"####" FGABCD 2
		W001 A 0 A_GunFlash
		W001 A 0 A_Recoil(0.08)
		W001 A 0 A_PlaySound("weapons/shotgunfire",CHAN_WEAPON,1,0)
		W001 I 0 Bright A_FireBullets(7,7,15,6,"BulletDamagePuff",1)
		W001 I 0 Bright A_FireBullets(7,7,15,6,"BulletDamagePuff",1)
		"----" AA 0 A_FireCustomMissile("ShotgunCasingSpawner",-50,0, 0,0)
		W001 I 1 Bright A_SetPitch(pitch-1.2)
		W001 FG 1 Bright A_SetPitch(pitch+0.6)
		W001 ABCD 1 Bright 
		W001 G 0 Bright A_ReFire
		W001 EFG 1 bright
		W001 G 0 A_StopSound(6)
		Goto WindDown
	AltHold: 
		"----" A 0 A_JumpIfInventory("PowerQuickFire",1,"AltFireQuickHold")
		"----" A 0 A_GunFlash
		"----" A 0 A_Recoil(0.08)
		"----" A 0 A_PlaySound("weapons/shotgunfire",CHAN_WEAPON,1,0)
		"####" I 0 Bright A_FireBullets(7,7,15,6,"BulletDamagePuff",1)
		"----" AA 0 A_FireCustomMissile("ShotgunCasingSpawner",-50,0, 0,0)
		"####" I 1 Bright A_SetPitch(pitch-1.2)
		W001 FG 1 Bright A_SetPitch(pitch+0.6)
		W001 ABCD 1 Bright 
		"----" A 0 Bright A_ReFire
		W001 EFG 1 bright
		"----" A 0 A_StopSound(6)
		Goto WindDown
	AltFireQuickHold:
		"----" A 0 A_GunFlash
		"----" A 0 A_Recoil(0.08)
		"----" A 0 A_PlaySound("weapons/shotgunfire",CHAN_WEAPON,1,0)
		"----" I 0 Bright A_FireBullets(7,7,15,6,"BulletDamagePuff",1)
		"----" I 0 Bright A_FireBullets(7,7,15,6,"BulletDamagePuff",1)
		"----" AA 0 A_FireCustomMissile("ShotgunCasingSpawner",-50,0, 0,0)
		W001 I 1 Bright A_SetPitch(pitch-1.2)
		W001 FG 1 Bright A_SetPitch(pitch+0.6)
		W001 ABCD 1 Bright 
		"----" G 0 Bright A_ReFire
		W001 EFG 1 bright
		"----" G 0 A_StopSound(6)
		Goto WindDown
	Flash: 
		TNT1 A 1 Bright A_Light2 
		TNT1 A 2 Bright A_Light1 
		TNT1 A 3 Bright A_Light0
		Stop 
	}
}
Actor FlayerGunPuff
{
	+NOINTERACTION
	+PUFFONACTORS
	RenderStyle Translucent
	Alpha 0.8
	Scale 0.20
	States
	{
	Spawn:
		EXPL B 2 Bright A_Pain
		EXPL C 1 A_PlaySound("weapons/rockexplo")
		EXPL DEFGHIJKLMNOPQRSTU 1 Bright
		Stop
	}
}

Actor VulcanCannonDrop : CustomInventory
{
	Inventory.MaxAmount 1
	States
	{
	Use:
		TNT1 A 0
		TNT1 A 0 A_StopSound(6)
		TNT1 A 0 A_SpawnItemEx("DroppedVulcanCannon",0,0,32,8,0,0,0,SXF_NOCHECKPOSITION,0)
		Stop
	}
}

Actor DroppedVulcanCannon
{
	Radius 16
	Height 20
	Scale 0.7
	States
	{
	Spawn:
		W001 H 15
		TNT1 A 0 A_SpawnItemEx("AEoDVulcanCannonNoAmmo",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER,0)
		Stop
	}
}

Actor AEoDVulcanCannonNoAmmo : AEoDVulcanCannonItem
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL
	Scale 0.7
	Inventory.Amount 1
	Inventory.PickupMessage "Picked up the Vulcan Cannon!"
	Inventory.PickupSound "reilsss/weappickup/flyergun" 
	States
	{
	Spawn:
		W001 H -1
		Loop
	Pickup:
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",7) <= 0,"Nothing")
		TNT1 A 0 A_JumpIfInventory("AEClip",100,"Ammo")
		TNT1 A 0 A_JumpIfInventory("AEShell",16,"Ammo3")
		TNT1 A 0 A_GiveInventory("Weapon7Count",1)
		TNT1 A 0 A_GiveInventory("VulcanCannonDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDVulcanCannon",1)
		TNT1 A 0 A_TakeInventory("AEClip",100)
		TNT1 A 0 A_TakeInventory("AEShell",16)
		TNT1 A 0 	
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDVulcanCannon",1,"Ammo")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		TNT1 A 0 ACS_NamedExecute("s798",0,7,102,0)
		Fail
	Ammo:
		TNT1 A 0 A_JumpIfInventory("AEShell",16,1)
		Goto Ammo2
		TNT1 A 0 A_TakeInventory("AEClip",100)
		TNT1 A 0 A_TakeInventory("AEShell",16)
		TNT1 A 0 A_JumpIfInventory("AEoDVulcanCannon",1,2)
		TNT1 A 0 A_GiveInventory("Weapon7Count",1)
		TNT1 A 0 A_GiveInventory("VulcanCannonDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDVulcanCannon",1)
		Stop
	Ammo2:
		TNT1 A 0 A_TakeInventory("AEClip",100)
		TNT1 A 0 A_GiveInventory("Weapon7Count",1)
		TNT1 A 0 A_GiveInventory("VulcanCannonDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDVulcanCannon",1)
		TNT1 A 0 A_TakeInventory("AEShell",16)
		Stop
	Ammo3:
		TNT1 A 0 A_TakeInventory("AEShell",16)
		TNT1 A 0 A_GiveInventory("Weapon7Count",1)
		TNT1 A 0 A_GiveInventory("VulcanCannonDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDVulcanCannon",1)
		TNT1 A 0 A_TakeInventory("AEClip",100)
		Stop
	}
}

//==================================================================================
//==================================================================================

//==================================================================================
//==================================================================================

Actor AEoDRipperGunItem : CustomInventory 6038
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL
	Inventory.Amount 1
	Inventory.PickupMessage "You picked up the Ripper Gun!"
	Inventory.PickupSound "reilsss/weappickup/railgun"
	States
	{
	Spawn:
		R027 KLMNOPQRSTUVWXYZ 3
		R026 WXYZ 3
		Loop
	Pickup:
		TNT1 A 0 A_JumpIfInventory("AEoDRipperGun",1,"Ammo")
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",7) <= 0,"Nothing")
		TNT1 A 0 A_GiveInventory("Weapon7Count",1)
		TNT1 A 0 A_GiveInventory("RipperGunDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDRipperGun",1)
		TNT1 A 0 	
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDRipperGun",1,"Ammo")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		TNT1 A 0 ACS_NamedExecute("s798",0,7,94,0)
		Fail
	Ammo:
		TNT1 A 0 A_GiveInventory("AEoDRipperGun",1)
		Stop
	}
}

Actor AEoDRipperGun : Weapon // 6038
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL
	Weapon.AmmoType1 "AEClip"
	Weapon.AmmoType2 "AEClip"
	Weapon.AmmoGive1 50
	Weapon.AmmoUse1 1
	Weapon.AmmoUse2 1
	Weapon.SelectionOrder 11860
	Obituary "%o got ripped by %k."
	Inventory.PickupMessage "You picked up the Ripper Gun!"
	Inventory.PickupSound "reilsss/weappickup/railgun"
	AttackSound "reilsss/weapons/railgunsmallfire"
	Weapon.upsound "weapons/plasma/draw"
	Tag "Ripper gun"
	States
	{
	Spawn:
		R027 KLMNOPQRSTUVWXYZ 3
		R026 WXYZ 3
		Loop
	Ready:
		TNT1 A 0 A_PlaySound("reilsss/weapons/railgunidle2", 6, 0.45, 1)
		R027 A 1 A_WeaponReady
		Goto Ready+1
	Deselect:
		TNT1 A 0 A_StopSound(6)
		TNT1 A 0 A_StopSound(7)
		TNT1 A 0 	
		R027 A 1 A_Lower
		TNT1 AA 0 A_Lower
		Goto Deselect+2
	Select:
		TNT1 A 0 	
		R027 A 1 A_Raise
		TNT1 AA 0 A_Raise
		Goto Select
	Fire:
		TNT1 A 0 A_PlaySound("reilsss/weapons/vulcanspin", 7, 1.0, 1)
		TNT1 A 0 A_GunFlash
		TNT1 A 0 A_Recoil(0.1)
		TNT1 A 0 Bright //ACS_NamedExecute("s851",0,20,0,0)
		R027 C 2 Bright A_RailAttack(random(10,20),4,1,none,"D7 AB 00",0,1,"EnBulletPuff", 1,1,0, 10,2.0,1.5) 
		R027 B 1 Bright //ACS_NamedExecute("s851",0,-20,0,0)
		R027 B 1 Bright

		TNT1 A 0 A_GunFlash
		TNT1 A 0 A_Recoil(0.1)
		TNT1 A 0 Bright //ACS_NamedExecute("s851",0,20,0,0)
		R027 E 2 Bright A_RailAttack(random(10,20),3,1,none,"D7 AB 00",0,1,"EnBulletPuff", 1,1,0, 10,2.0,1.5) 
		R027 B 1 Bright //ACS_NamedExecute("s851",0,-20,0,0)
		R027 B 1 Bright

		TNT1 A 0 A_GunFlash
		TNT1 A 0 A_Recoil(0.1)
		TNT1 A 0 Bright //ACS_NamedExecute("s851",0,20,0,0)
		R027 G 2 Bright A_RailAttack(random(10,20),4,1,none,"D7 AB 00",0,1,"EnBulletPuff", 1,1,0, 10,2.0,1.5) 
		R027 B 1 Bright //ACS_NamedExecute("s851",0,-20,0,0)
		R027 B 1 Bright

		TNT1 A 0 A_GunFlash
		TNT1 A 0 A_Recoil(0.1)
		TNT1 A 0 Bright //ACS_NamedExecute("s851",0,20,0,0)
		R027 I 2 Bright A_RailAttack(random(10,20),3,1,none,"D7 AB 00",0,1,"EnBulletPuff", 1,1,0, 10,2.0,1.5) 
		R027 B 1 Bright //ACS_NamedExecute("s851",0,-20,0,0)
		R027 B 1 Bright

		TNT1 A 0 A_ReFire
		TNT1 A 0 A_StopSound(7)
		R027 A 3 A_FireCustomMissile("GunSmallSmokeSpawner",0,0,4.5,7)
		Goto ready
	Hold:
		TNT1 A 0 A_GunFlash
		TNT1 A 0 A_Recoil(0.1)
		TNT1 A 0 Bright //ACS_NamedExecute("s851",0,20,0,0)
		R027 C 2 Bright A_RailAttack(random(10,20),4,1,none,"D7 AB 00",0,1,"EnBulletPuff", 1,1,0, 10,2.0,1.5) 
		R027 B 1 Bright //ACS_NamedExecute("s851",0,-20,0,0)
		R027 B 1 Bright

		TNT1 A 0 A_GunFlash
		TNT1 A 0 A_Recoil(0.1)
		TNT1 A 0 Bright //ACS_NamedExecute("s851",0,20,0,0)
		R027 E 2 Bright A_RailAttack(random(10,20),3,1,none,"D7 AB 00",0,1,"EnBulletPuff", 1,1,0, 10,2.0,1.5) 
		R027 B 1 Bright //ACS_NamedExecute("s851",0,-20,0,0)
		R027 B 1 Bright

		TNT1 A 0 A_GunFlash
		TNT1 A 0 A_Recoil(0.1)
		TNT1 A 0 Bright //ACS_NamedExecute("s851",0,20,0,0)
		R027 G 2 Bright A_RailAttack(random(10,20),4,1,none,"D7 AB 00",0,1,"EnBulletPuff", 1,1,0, 10,2.0,1.5) 
		R027 B 1 Bright //ACS_NamedExecute("s851",0,-20,0,0)
		R027 B 1 Bright

		TNT1 A 0 A_GunFlash
		TNT1 A 0 A_Recoil(0.1)
		TNT1 A 0 Bright //ACS_NamedExecute("s851",0,20,0,0)
		R027 I 2 Bright A_RailAttack(random(10,20),3,1,none,"D7 AB 00",0,1,"EnBulletPuff", 1,1,0, 10,2.0,1.5) 
		R027 B 1 Bright //ACS_NamedExecute("s851",0,-20,0,0)
		R027 B 1 Bright
		TNT1 A 0 A_ReFire
		TNT1 A 0 A_StopSound(7)
		TNT1 AAAA 0 A_FireCustomMissile("GunSmokeSpawner",0,0,3,9)
		R027 A 3 
		Goto ready
	AltFire:
		TNT1 A 0 A_PlaySound("reilsss/weapons/vulcanspinon", 8, 1.0, 0)
		R027 AB 4
		R027 ABAB 3
		R027 ABABAB 2
		TNT1 A 0 A_PlaySound("reilsss/weapons/vulcanspin", 7, 1.0, 1)
		TNT1 A 0 A_GunFlash
		TNT1 A 0 A_Recoil(0.3)
		TNT1 A 0 Bright //ACS_NamedExecute("s851",0,20,random(-2,2),random(-2,2))
		TNT1 A 0 A_PlaySound("reilsss/weapons/railgunsmallfire", CHAN_WEAPON, 1.0, 0)
		R027 C 1 Bright A_RailAttack(random(20,40),3,1,none,"D7 AB 00",0,2,"BulletDamagePuff", 1,1,0, 10,2.0,1.5)
		R027 D 1 Bright //ACS_NamedExecute("s851",0,-20,0,0)
		TNT1 A 0 A_GunFlash
		TNT1 A 0 A_Recoil(0.3)
		TNT1 A 0 Bright //ACS_NamedExecute("s851",0,20,random(-2,2),random(-2,2))
		TNT1 A 0 A_PlaySound("reilsss/weapons/railgunsmallfire", CHAN_WEAPON, 1.0, 0)
		R027 E 1 Bright A_RailAttack(random(20,40),3,1,none,"D7 AB 00",0,2,"BulletDamagePuff", 1,1,0, 10,2.0,1.5)
		R027 F 1 Bright //ACS_NamedExecute("s851",0,-20,0,0)
		TNT1 A 0 A_GunFlash
		TNT1 A 0 A_Recoil(0.3)
		TNT1 A 0 Bright //ACS_NamedExecute("s851",0,20,random(-2,2),random(-2,2))
		TNT1 A 0 A_PlaySound("reilsss/weapons/railgunsmallfire", CHAN_WEAPON, 1.0, 0)
		R027 G 1 Bright A_RailAttack(random(20,40),3,1,none,"D7 AB 00",0,2,"BulletDamagePuff", 1,1,0, 10,2.0,1.5)
		R027 H 1 Bright //ACS_NamedExecute("s851",0,-20,0,0)
		TNT1 A 0 A_GunFlash
		TNT1 A 0 A_Recoil(0.3)
		TNT1 A 0 Bright //ACS_NamedExecute("s851",0,20,random(-2,2),random(-2,2))
		TNT1 A 0 A_PlaySound("reilsss/weapons/railgunsmallfire", CHAN_WEAPON, 1.0, 0)
		R027 I 1 Bright A_RailAttack(random(20,40),3,1,none,"D7 AB 00",0,2,"BulletDamagePuff", 1,1,0, 10,2.0,1.5)
		R027 J 1 Bright //ACS_NamedExecute("s851",0,-20,0,0)
		TNT1 A 0 A_ReFire
		TNT1 A 0 A_StopSound(7)
		TNT1 A 0 A_PlaySound("reilsss/weapons/vulcanspinoff", 8, 1.0, 0)
		R027 ABABAB 2 A_FireCustomMissile("GunSmallSmokeSpawner",0,0,3+random(-2,2),9+random(-2,2))
		R027 ABAB 3 A_FireCustomMissile("GunSmallSmokeSpawner",0,0,3+random(-2,2),9+random(-2,2))
		R027 AB 4 A_FireCustomMissile("GunSmallSmokeSpawner",0,0,3+random(-2,2),9+random(-2,2))
		Goto Ready
	AltHold:
		TNT1 A 0 A_GunFlash
		TNT1 A 0 A_Recoil(0.3)
		TNT1 A 0 Bright //ACS_NamedExecute("s851",0,20,random(-2,2),random(-2,2))
		TNT1 A 0 A_PlaySound("reilsss/weapons/railgunsmallfire", CHAN_WEAPON, 1.0, 0)
		R027 C 1 Bright A_RailAttack(random(20,40),3,1,none,"D7 AB 00",0,2,"BulletDamagePuff", 1,1,0, 10,2.0,1.5)
		R027 D 1 Bright //ACS_NamedExecute("s851",0,-20,0,0)
		TNT1 A 0 A_GunFlash
		TNT1 A 0 A_Recoil(0.3)
		TNT1 A 0 Bright //ACS_NamedExecute("s851",0,20,random(-2,2),random(-2,2))
		TNT1 A 0 A_PlaySound("reilsss/weapons/railgunsmallfire", CHAN_WEAPON, 1.0, 0)
		R027 E 1 Bright A_RailAttack(random(20,40),3,1,none,"D7 AB 00",0,2,"BulletDamagePuff", 1,1,0, 10,2.0,1.5)
		R027 F 1 Bright //ACS_NamedExecute("s851",0,-20,0,0)
		TNT1 A 0 A_GunFlash
		TNT1 A 0 A_Recoil(0.3)
		TNT1 A 0 Bright //ACS_NamedExecute("s851",0,20,random(-2,2),random(-2,2))
		TNT1 A 0 A_PlaySound("reilsss/weapons/railgunsmallfire", CHAN_WEAPON, 1.0, 0)
		R027 G 1 Bright A_RailAttack(random(20,40),3,1,none,"D7 AB 00",0,2,"BulletDamagePuff", 1,1,0, 10,2.0,1.5)
		R027 H 1 Bright //ACS_NamedExecute("s851",0,-20,0,0)
		TNT1 A 0 A_GunFlash
		TNT1 A 0 A_Recoil(0.3)
		TNT1 A 0 Bright //ACS_NamedExecute("s851",0,20,random(-2,2),random(-2,2))
		TNT1 A 0 A_PlaySound("reilsss/weapons/railgunsmallfire", CHAN_WEAPON, 1.0, 0)
		R027 I 1 Bright A_RailAttack(random(20,40),3,1,none,"D7 AB 00",0,2,"BulletDamagePuff", 1,1,0, 10,2.0,1.5)
		R027 J 1 Bright //ACS_NamedExecute("s851",0,-20,0,0)
		TNT1 A 0 A_ReFire
		TNT1 A 0 A_StopSound(7)
		TNT1 A 0 A_PlaySound("reilsss/weapons/vulcanspinoff", 8, 1.0, 0)
		R027 ABABAB 2 A_FireCustomMissile("GunSmallSmokeSpawner",0,0,3+random(-2,2),9+random(-2,2))
		R027 ABAB 3 A_FireCustomMissile("GunSmallSmokeSpawner",0,0,3+random(-2,2),9+random(-2,2))
		R027 AB 4 A_FireCustomMissile("GunSmallSmokeSpawner",0,0,3+random(-2,2),9+random(-2,2))
		Goto Ready
	AltFlash:
		TNT1 A 1 A_Light2
		TNT1 A 1 A_light1
		Goto lightdone
	Flash:
		TNT1 A 2 A_Light2
		TNT1 A 2 A_light1
		Goto lightdone
	}
}

Actor RipperGunDrop : CustomInventory
{
	Inventory.MaxAmount 1
	States
	{
	Use:
		TNT1 A 0
		TNT1 A 0 A_StopSound(6)
		TNT1 A 0 A_SpawnItemEx("DroppedRipperGun",0,0,32,8,0,0,0,SXF_NOCHECKPOSITION,0)
		Stop
	}
}

Actor DroppedRipperGun
{
	Radius 16
	Height 20
	States
	{
	Spawn:
		R027 K 15
		TNT1 A 0 A_SpawnItemEx("AEoDRipperGunNoAmmo",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER,0)
		Stop
	}
}

Actor AEoDRipperGunNoAmmo : AEoDRipperGunItem
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL
	Inventory.Amount 1
	Inventory.PickupMessage "You picked up the Ripper Gun!"
	Inventory.PickupSound "reilsss/weappickup/railgun"
	States
	{
	Spawn:
		R027 KLMNOPQRSTUVWXYZ 3
		R026 WXYZ 3
		Loop
	Pickup:
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",7) <= 0,"Nothing")
		TNT1 A 0 A_JumpIfInventory("AEClip",50,"Ammo")
		TNT1 A 0 A_GiveInventory("Weapon7Count",1)
		TNT1 A 0 A_GiveInventory("RipperGunDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDRipperGun",1)
		TNT1 A 0 A_TakeInventory("AEClip",50)
		TNT1 A 0 	
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDRipperGun",1,"Ammo")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		TNT1 A 0 ACS_NamedExecute("s798",0,7,94,0)
		Fail
	Ammo:
		TNT1 A 0 A_TakeInventory("AEClip",50)
		TNT1 A 0 A_JumpIfInventory("AEoDRipperGun",1,2)
		TNT1 A 0 A_GiveInventory("Weapon7Count",1)
		TNT1 A 0 A_GiveInventory("RipperGunDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDRipperGun",1)
		Stop
	}
}

//==================================================================================
//==================================================================================

//==================================================================================
//==================================================================================

Actor AEoDPrismaCannonItem : CustomInventory 6104
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL
	Scale 0.3
	Inventory.Amount 1
	Inventory.PickupMessage "You got the Prisma Cannon!"
	Inventory.PickupSound "misc/w_pkup" 
	States
	{
	Spawn:
		PCAN A -1
		Loop

	Pickup:
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",7) <= 0,"Nothing")
		TNT1 A 0 A_JumpIfInventory("AEoDPrismaCannonCount",2,"Ammo")
		TNT1 A 0 A_JumpIfInventory("AEoDPrismaCannonCount",1,"Pickup2")
		TNT1 A 0 A_GiveInventory("Weapon7Count",1)
		TNT1 A 0 A_GiveInventory("PrismaCannonDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDPrismaCannon",1)
		TNT1 A 0 A_GiveInventory("AEoDPrismaCannonCount",1)
		TNT1 A 0 	
		TNT1 A 0 A_JumpIfInventory("NoWeaponSwitch",1,2)
		TNT1 A 0 A_SelectWeapon("AEoDPrismaCannon")
		TNT1 A 0
		Stop
	Pickup2:
		TNT1 A 0 A_GiveInventory("PrismaCannonDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDPrismaCannon",1)
		TNT1 A 0 A_GiveInventory("AEoDPrismaCannonCount",1)
		TNT1 A 0 	
		TNT1 A 0 A_JumpIfInventory("NoWeaponSwitch",1,2)
		TNT1 A 0 A_SelectWeapon("AEoDPrismaCannon")
		TNT1 A 0
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDPrismaCannonCount",2,"Ammo")
		TNT1 A 0 A_JumpIfInventory("AEoDPrismaCannonCount",1,"Pickup2")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		
		TNT1 A 0 ACS_NamedExecute("s798",0,7,88,0)
		Fail
	Ammo:
		TNT1 A 0 A_GiveInventory("AEoDPrismaCannon",1)
		Stop
	}
}

Actor AEoDPrismaCannon : Weapon // 6104
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL
	+WEAPON.CHEATNOTWEAPON
	Weapon.AmmoType1 "AECell" 
	Weapon.AmmoType2 "AECell"
	Weapon.AmmoGive1 25
	Weapon.AmmoUse1 1
	Weapon.AmmoUse2 2
	Weapon.SelectionOrder 10650
	Obituary "%o was melted by %k's Prisma Cannon"
	Inventory.PickupMessage "You got the Prisma Cannon!"
	AttackSound "Nutcracker/Laser"
	weapon.upsound "weapons/plasma/draw"
	Inventory.PickupSound "misc/w_pkup"
	Scale 0.3
	Tag "Prisma cannon"
	States 
	{
	Spawn:
		PCAN A 1
		Loop
	Ready:
		TNT1 A 0 A_TakeInventory("PrismaCannonDropCheck",1)
		TNT1 A 0 A_JumpIfInventory("AEoDPrismaCannonCount",2,"Ready2")
		PCAN B 2 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("AEoDPrismaCannonCount",2,"Ready2")
		PCAN B 2 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("AEoDPrismaCannonCount",2,"Ready2")
		PCAN B 2 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("AEoDPrismaCannonCount",2,"Ready2")
		PCAN B 2 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("AEoDPrismaCannonCount",2,"Ready2")
		PCAN B 2 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("AEoDPrismaCannonCount",2,"Ready2")
		PCAN B 2 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("AEoDPrismaCannonCount",2,"Ready2")
		PCAN B 2 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("AEoDPrismaCannonCount",2,"Ready2")
		PCAN B 2 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("AEoDPrismaCannonCount",2,"Ready2")
		PCAN B 2 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("AEoDPrismaCannonCount",2,"Ready2")
		PCAN B 2 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("AEoDPrismaCannonCount",2,"Ready2")
		PCAN B 2 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("AEoDPrismaCannonCount",2,"Ready2")
		PCAN B 2 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("AEoDPrismaCannonCount",2,"Ready2")
		PCAN B 2 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("AEoDPrismaCannonCount",2,"Ready2")
		PCAN B 2 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("AEoDPrismaCannonCount",2,"Ready2")
		PCAN B 2 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("AEoDPrismaCannonCount",2,"Ready2")
		PCAN B 2 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("AEoDPrismaCannonCount",2,"Ready2")
		PCAN B 2 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("AEoDPrismaCannonCount",2,"Ready2")
		PCAN B 2 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("AEoDPrismaCannonCount",2,"Ready2")
		PCAN B 2 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("AEoDPrismaCannonCount",2,"Ready2")
		PCAN B 2 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("AEoDPrismaCannonCount",2,"Ready2")
		PCAN B 2 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("AEoDPrismaCannonCount",2,"Ready2")
		PCAN B 2 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("AEoDPrismaCannonCount",2,"Ready2")
		PCAN B 2 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("AEoDPrismaCannonCount",2,"Ready2")
		PCAN B 2 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("AEoDPrismaCannonCount",2,"Ready2")
		PCAN B 2 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("AEoDPrismaCannonCount",2,"Ready2")
		PCAN K 3 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("AEoDPrismaCannonCount",2,"Ready2")
		PCAN L 3 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("AEoDPrismaCannonCount",2,"Ready2")
		PCAN M 3 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("AEoDPrismaCannonCount",2,"Ready2")
		PCAN N 3 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("AEoDPrismaCannonCount",2,"Ready2")
		PCAN O 3 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("AEoDPrismaCannonCount",2,"Ready2")
		PCAN N 3 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("AEoDPrismaCannonCount",2,"Ready2")
		PCAN M 3 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("AEoDPrismaCannonCount",2,"Ready2")
		PCAN L 3 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("AEoDPrismaCannonCount",2,"Ready2")
		PCAN K 3 A_WeaponReady
		Loop
	Ready2:
		TNT1 A 0 A_JumpIfInventory("PrismaCannonDropCheck",1,"Ready")
		PCN2 A 2 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("PrismaCannonDropCheck",1,"Ready")
		PCN2 A 2 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("PrismaCannonDropCheck",1,"Ready")
		PCN2 A 2 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("PrismaCannonDropCheck",1,"Ready")
		PCN2 A 2 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("PrismaCannonDropCheck",1,"Ready")
		PCN2 A 2 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("PrismaCannonDropCheck",1,"Ready")
		PCN2 A 2 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("PrismaCannonDropCheck",1,"Ready")
		PCN2 A 2 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("PrismaCannonDropCheck",1,"Ready")
		PCN2 A 2 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("PrismaCannonDropCheck",1,"Ready")
		PCN2 A 2 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("PrismaCannonDropCheck",1,"Ready")
		PCN2 A 2 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("PrismaCannonDropCheck",1,"Ready")
		PCN2 A 2 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("PrismaCannonDropCheck",1,"Ready")
		PCN2 A 2 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("PrismaCannonDropCheck",1,"Ready")
		PCN2 A 2 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("PrismaCannonDropCheck",1,"Ready")
		PCN2 A 2 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("PrismaCannonDropCheck",1,"Ready")
		PCN2 A 2 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("PrismaCannonDropCheck",1,"Ready")
		PCN2 A 2 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("PrismaCannonDropCheck",1,"Ready")
		PCN2 A 2 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("PrismaCannonDropCheck",1,"Ready")
		PCN2 A 2 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("PrismaCannonDropCheck",1,"Ready")
		PCN2 A 2 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("PrismaCannonDropCheck",1,"Ready")
		PCN2 A 2 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("PrismaCannonDropCheck",1,"Ready")
		PCN2 A 2 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("PrismaCannonDropCheck",1,"Ready")
		PCN2 A 2 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("PrismaCannonDropCheck",1,"Ready")
		PCN2 A 2 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("PrismaCannonDropCheck",1,"Ready")
		PCN2 A 2 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("PrismaCannonDropCheck",1,"Ready")
		PCN2 A 2 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("PrismaCannonDropCheck",1,"Ready")
		PCN2 B 3 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("PrismaCannonDropCheck",1,"Ready")
		PCN2 C 3 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("PrismaCannonDropCheck",1,"Ready")
		PCN2 D 3 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("PrismaCannonDropCheck",1,"Ready")
		PCN2 E 3 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("PrismaCannonDropCheck",1,"Ready")
		PCN2 F 3 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("PrismaCannonDropCheck",1,"Ready")
		PCN2 E 3 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("PrismaCannonDropCheck",1,"Ready")
		PCN2 D 3 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("PrismaCannonDropCheck",1,"Ready")
		PCN2 C 3 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("PrismaCannonDropCheck",1,"Ready")
		PCN2 B 3 A_WeaponReady
		Loop
	Deselect:
		TNT1 A 0 	
		TNT1 A 0 A_JumpIfInventory("AEoDPrismaCannonCount",2,"Deselect2")
		PCAN B 1 A_Lower
		TNT1 AA 0 A_Lower
		Loop
	Deselect2:
		TNT1 A 0 	
		PCN2 A 1 A_Lower
		TNT1 AA 0 A_Lower
		Loop
	Select:
		TNT1 A 0 	
		TNT1 A 0 A_JumpIfInventory("AEoDPrismaCannonCount",2,"Select2")
		PCAN B 1 A_Raise
		TNT1 AA 0 A_Raise
		Loop
	Select2:
		TNT1 A 0 	
		PCN2 A 1 A_Raise
		TNT1 AA 0 A_Raise
		Loop
	Fire:
		TNT1 A 0 A_JumpIfInventory("AEoDPrismaCannonCount",2,"Fire2")
		TNT1 B 0 A_JumpIfInventory("PowerQuickFire",1,"FireQuick")
		TNT1 A 0 //ACS_NamedExecute("s851",0,random(-15,15),random(-12,12),0)
		PCAN C 1 A_FireBullets(5,8,3,2,"LaserPuff",1)
		TNT1 A 0 //ACS_NamedExecute("s851",0,random(-15,15),random(-12,12),0)
		PCAN D 1 A_FireBullets(5,8,3,2,"LaserPuff",0)
		TNT1 A 0 //ACS_NamedExecute("s851",0,random(-15,15),random(-12,12),0)
		PCAN E 1 A_FireBullets(5,4,3,0,"LaserPuffLighter",0)
		TNT1 A 0 //ACS_NamedExecute("s851",0,random(-15,15),random(-12,12),0)
		PCAN F 1 A_FireBullets(5,4,3,2,"LaserPuff",0)
		TNT1 A 0 //ACS_NamedExecute("s851",0,random(-15,15),random(-12,12),0)
		PCAN C 1 A_FireBullets(5,4,3,2,"LaserPuff",1)
		TNT1 A 0 //ACS_NamedExecute("s851",0,random(-15,15),random(-12,12),0)
		PCAN D 1 A_FireBullets(5,4,3,2,"LaserPuff",0)
		TNT1 A 0 //ACS_NamedExecute("s851",0,random(-15,15),random(-12,12),0)
		PCAN E 1 A_FireBullets(5,4,3,0,"LaserPuffLighter",0)
		TNT1 A 0 //ACS_NamedExecute("s851",0,random(-15,15),random(-12,12),0)
		PCAN F 1 A_FireBullets(5,4,3,0,"LaserPuffLighter",0)
		PCAN F 0 A_ReFire
		PCAN NMLK 3
		Goto Ready
	FireQuick:
		TNT1 B 0 A_JumpIfInventory("PowerQuickFire",1,1)
		Goto Fire
		TNT1 A 0 //ACS_NamedExecute("s851",0,random(-15,15),random(-12,12),0)
		PCAN C 1 A_FireBullets(5,8,3,2,"LaserPuff",1)
		TNT1 A 0 //ACS_NamedExecute("s851",0,random(-15,15),random(-12,12),0)
		PCAN D 0 A_FireBullets(5,8,3,2,"LaserPuff",0)
		TNT1 A 0 //ACS_NamedExecute("s851",0,random(-15,15),random(-12,12),0)
		PCAN E 1 A_FireBullets(5,4,3,0,"LaserPuffLighter",0)
		TNT1 A 0 //ACS_NamedExecute("s851",0,random(-15,15),random(-12,12),0)
		PCAN F 0 A_FireBullets(5,4,3,2,"LaserPuff",0)
		TNT1 A 0 //ACS_NamedExecute("s851",0,random(-15,15),random(-12,12),0)
		PCAN C 1 A_FireBullets(5,4,3,2,"LaserPuff",1)
		TNT1 A 0 //ACS_NamedExecute("s851",0,random(-15,15),random(-12,12),0)
		PCAN D 0 A_FireBullets(5,4,3,2,"LaserPuff",0)
		TNT1 A 0 //ACS_NamedExecute("s851",0,random(-15,15),random(-12,12),0)
		PCAN E 1 A_FireBullets(5,4,3,0,"LaserPuffLighter",0)
		TNT1 A 0 //ACS_NamedExecute("s851",0,random(-15,15),random(-12,12),0)
		PCAN F 0 A_FireBullets(5,4,3,0,"LaserPuffLighter",0)
		PCAN F 0 A_ReFire
		PCAN NMLK 2
		Goto Ready
	Fire2:
		TNT1 B 0 A_JumpIfInventory("PowerQuickFire",1,"Fire2Quick")
		TNT1 A 0 //ACS_NamedExecute("s851",0,random(-15,15),random(-12,12),0)
		PCN2 G 0 A_FireBullets(5,8,3,2,"LaserPuff",0)
		PCN2 G 1 A_FireBullets(5,8,3,2,"LaserPuff",1)
		TNT1 A 0 //ACS_NamedExecute("s851",0,random(-15,15),random(-12,12),0)
		PCN2 H 0 A_FireBullets(5,8,3,2,"LaserPuff",0)
		PCN2 H 1 A_FireBullets(5,8,3,2,"LaserPuff",0)
		TNT1 A 0 //ACS_NamedExecute("s851",0,random(-15,15),random(-12,12),0)
		PCN2 I 0 A_FireBullets(5,4,3,0,"LaserPuffLighter",0)
		PCN2 I 1 A_FireBullets(5,4,3,0,"LaserPuffLighter",1)
		TNT1 A 0 //ACS_NamedExecute("s851",0,random(-15,15),random(-12,12),0)
		PCN2 G 0 A_FireBullets(5,8,3,2,"LaserPuff",0)
		PCN2 J 1 A_FireBullets(5,4,3,2,"LaserPuff",0)
		TNT1 A 0 //ACS_NamedExecute("s851",0,random(-15,15),random(-12,12),0)
		PCN2 G 0 A_FireBullets(5,8,3,2,"LaserPuff",0)
		PCN2 G 1 A_FireBullets(5,4,3,2,"LaserPuff",1)
		TNT1 A 0 //ACS_NamedExecute("s851",0,random(-15,15),random(-12,12),0)
		PCN2 G 0 A_FireBullets(5,8,3,2,"LaserPuff",0)
		PCN2 H 1 A_FireBullets(5,4,3,2,"LaserPuff",0)
		TNT1 A 0 //ACS_NamedExecute("s851",0,random(-15,15),random(-12,12),0)
		PCN2 I 0 A_FireBullets(5,4,3,0,"LaserPuffLighter",0)
		PCN2 I 1 A_FireBullets(5,4,3,0,"LaserPuffLighter",1)
		TNT1 A 0 //ACS_NamedExecute("s851",0,random(-15,15),random(-12,12),0)
		PCN2 J 0 A_FireBullets(5,4,3,0,"LaserPuffLighter",0)
		PCN2 J 1 A_FireBullets(5,4,3,0,"LaserPuffLighter",0)
		PCN2 J 0 A_ReFire
		PCN2 EDCB 3
		Goto Ready
	Fire2Quick:
		TNT1 B 0 A_JumpIfInventory("PowerQuickFire",1,1)
		Goto Fire2
		TNT1 A 0 //ACS_NamedExecute("s851",0,random(-15,15),random(-12,12),0)
		PCN2 G 0 A_FireBullets(5,8,3,2,"LaserPuff",0)
		PCN2 G 1 A_FireBullets(5,8,3,2,"LaserPuff",1)
		TNT1 A 0 //ACS_NamedExecute("s851",0,random(-15,15),random(-12,12),0)
		PCN2 H 0 A_FireBullets(5,8,3,2,"LaserPuff",0)
		PCN2 H 0 A_FireBullets(5,8,3,2,"LaserPuff",0)
		TNT1 A 0 //ACS_NamedExecute("s851",0,random(-15,15),random(-12,12),0)
		PCN2 I 0 A_FireBullets(5,4,3,0,"LaserPuffLighter",0)
		PCN2 I 1 A_FireBullets(5,4,3,0,"LaserPuffLighter",1)
		TNT1 A 0 //ACS_NamedExecute("s851",0,random(-15,15),random(-12,12),0)
		PCN2 G 0 A_FireBullets(5,8,3,2,"LaserPuff",0)
		PCN2 J 0 A_FireBullets(5,4,3,2,"LaserPuff",0)
		TNT1 A 0 //ACS_NamedExecute("s851",0,random(-15,15),random(-12,12),0)
		PCN2 G 0 A_FireBullets(5,8,3,2,"LaserPuff",0)
		PCN2 G 1 A_FireBullets(5,4,3,2,"LaserPuff",1)
		TNT1 A 0 //ACS_NamedExecute("s851",0,random(-15,15),random(-12,12),0)
		PCN2 G 0 A_FireBullets(5,8,3,2,"LaserPuff",0)
		PCN2 H 0 A_FireBullets(5,4,3,2,"LaserPuff",0)
		TNT1 A 0 //ACS_NamedExecute("s851",0,random(-15,15),random(-12,12),0)
		PCN2 I 0 A_FireBullets(5,4,3,0,"LaserPuffLighter",0)
		PCN2 I 1 A_FireBullets(5,4,3,0,"LaserPuffLighter",1)
		TNT1 A 0 //ACS_NamedExecute("s851",0,random(-15,15),random(-12,12),0)
		PCN2 J 0 A_FireBullets(5,4,3,0,"LaserPuffLighter",0)
		PCN2 J 0 A_FireBullets(5,4,3,0,"LaserPuffLighter",0)
		PCN2 J 0 A_ReFire
		PCN2 EDCB 2
		Goto Ready
	AltFire:
		TNT1 A 0 A_JumpIfInventory("AEoDPrismaCannonCount",2,"AltFire2")
		TNT1 A 0 A_GunFlash
		TNT1 A 0 A_PlaySound("weapons/prototypepistolattack2", CHAN_WEAPON, 1.0, 0)
		TNT1 A 0 //ACS_NamedExecute("s851",0,25,random(-12,12),0)
		TNT1 AAA 0 Bright A_FireCustomMissile("RazorShot1",random(-8,8),1,random(8,12),random(0,4),0)
		PCAN G 2 Bright
		TNT1 A 0 //ACS_NamedExecute("s851",0,-25,0,0)
		PCAN HIJ 2 Bright
		PCAN K 2
		PCAN B 5
		Goto Ready
	AltFire2:
		TNT1 A 0 A_GunFlash
		TNT1 A 0 A_PlaySound("weapons/prototypepistolattack2", CHAN_WEAPON, 1.0, 0)
		TNT1 A 0 //ACS_NamedExecute("s851",0,25,random(-12,12),0)
		TNT1 AAA 0 Bright A_FireCustomMissile("RazorShot1",random(-8,8),1,random(9,12),random(0,4),0)
		PCN2 K 2 Bright
		TNT1 A 0
		PCN2 LM 2 Bright
		TNT1 A 0 A_GunFlash
		TNT1 A 0 A_PlaySound("weapons/prototypepistolattack2", CHAN_WEAPON, 1.0, 0)
		TNT1 A 0 //ACS_NamedExecute("s851",0,25,random(-12,12),0)
		TNT1 AAA 0 Bright A_FireCustomMissile("RazorShot1",random(-8,8),1,random(-8,-12),random(0,4),0)
		PCN2 N 2 Bright
		TNT1 A 0 //ACS_NamedExecute("s851",0,-25,0,0)
		PCN2 OP 2 Bright
		PCN2 QR 2
		Goto Ready
	Flash:
		TNT1 A 8 A_Light1
		TNT1 A 0 A_Light0
		Stop
	}
}
//----------------------------------------------------------
Actor Laserpuff
{
	Mass 1
	Radius 1
	Height 1
	+NOBLOCKMAP
	+NOGRAVITY
	+PUFFONACTORS
	RenderStyle Add
	DamageType "Plasma"
	Scale 0.2
	States
	{
	spawn:
		PUF4 A 0
		PUF4 A 0 A_SpawnItemEx("LightningBallTrailParticle1",0,0,0,frandom(-0.2,-1),0,random(-2,2),0,SXF_NOCHECKPOSITION,210) // see WepClass6.AED
		TNT1 A 0 A_SpawnItemEx("TeslaFXv6",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		PUF4 ABCDEF 3 BRIGHT
		stop
	}
}

Actor LaserPuffLighter : Laserpuff
{
	States
	{
	spawn:
		PUF4 A 0
		PUF4 A 0 A_SpawnItemEx("LightningBallTrailParticle1",0,0,0,frandom(-0.2,-1),0,random(-2,2),0,SXF_NOCHECKPOSITION,210) // see WepClass6.AED
		TNT1 A 0 A_SpawnItemEx("TeslaFXv6",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		PUF4 ABCDEF 3 Light("BlueSmallFlicker3") BRIGHT
		stop
	}
}

//----------------------------------------------------------
Actor RazorShot1
{
	PROJECTILE
	+THRUGHOST
	+RIPPER	RipperLevel 1
	Radius 4
	Height 6
	Speed 50
	Damage 6
	RenderStyle None
	DamageType "Plasma"
	DeathSound "weapons/glahit"
	States
	{
	Spawn:
		TNT1 AAAAAAAA 1 Bright A_SpawnItemEx("RazorTrailBig",0,0,0,0,0,0,0,SXF_CLIENTSIDE,0)
		TNT1 AAAA 0 A_SpawnItemEx("RazorShot2",0,0,0,25,random(-4,4),(momz/2)+random(-3,3),0,0,0)
		TNT1 AAAA 0 A_SpawnItemEx("RazorShot3",0,0,0,25,random(-4,4),(momz/2)+random(-3,3),0,0,0)
		Stop
	Death:
		TNT1 A 1
		Stop
	}
}

Actor RazorShot2
{
	PROJECTILE
	+THRUGHOST
	Radius 2
	Height 4
	Speed 35
	Damage 4
	DamageType "Plasma"
	DeathSound "weapons/thornx"
	States
	{
	Spawn:
		RFX1 A 1 Bright A_SpawnItemEx("RazorTrail",0,0,0,0,0,0,0,SXF_CLIENTSIDE,0)
		Loop
	Death:
		RFX1 G 0 Bright A_SetTranslucent(0.67,1)
		RFX1 GHIJCDEF 3 Bright
		Stop
	}
}

Actor RazorShot3 : RazorShot2 {}

Actor Razortrail
{   
	+NOINTERACTION
	Radius 1
	Height 1
	RENDERSTYLE ADD
	ALPHA 0.50
	States
	{
	Spawn:
		RFX1 BCDEF 2 Bright
		Stop 
	}
}

Actor RazortrailBig : Razortrail { Scale 1.1 }

Actor AEoDPrismaCannonPickup : CustomInventory //6042
{
	Inventory.PickupMessage "You got the Prisma Cannon!"
	Inventory.PickupSound "misc/w_pkup" 
	Scale 0.3
	States
	{
	Spawn:
		PCAN A -1
		Loop
	Pickup:
		TNT1 A 0 A_JumpIfInventory("AEoDPrismaCannonCount",2,4)
		TNT1 A 0 A_GiveInventory("AEoDPrismaCannonCount",1)
		TNT1 A 0 A_JumpIfInventory("NoWeaponSwitch",1,2)
		TNT1 A 0 A_SelectWeapon("AEoDPrismaCannon")
		TNT1 A 0 A_GiveInventory("AEoDPrismaCannon",1)
		TNT1 A 0
		Stop
	}
}

Actor AEoDPrismaCannonCount : Inventory
{
	Inventory.MaxAmount 2
	Inventory.Amount 1
}

Actor PrismaCannonDropCheck : Inventory
{
	Inventory.Amount 1
	Inventory.MaxAmount 1
}

Actor PrismaCannonDrop : CustomInventory
{
	Inventory.Amount 1
	Inventory.MaxAmount 2
	States
	{
	Use:
		TNT1 A 0
		TNT1 A 0 A_SpawnItemEx("DroppedPrismaCannon",0,0,32,8,0,0,0,SXF_NOCHECKPOSITION,0)
		TNT1 A 0 A_TakeInventory("AEoDPrismaCannonCount",1)
		Stop
	}
}

Actor DroppedPrismaCannon
{
	Radius 16
	Height 20
	Scale 0.3
	States
	{
	Spawn:
		PCAN A 15
		TNT1 A 0 A_SpawnItemEx("AEoDPrismaCannonNoAmmo",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER,0)
		Stop
	}
}

Actor AEoDPrismaCannonNoAmmo : AEoDPrismaCannonItem
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL
	Scale 0.3
	Inventory.Amount 1
	Inventory.PickupMessage "You got the Prisma Cannon!"
	Inventory.PickupSound "misc/w_pkup" 
	States
	{
	Spawn:
		PCAN A -1
		Loop
	Pickup:
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",7) <= 0,"Nothing")
		TNT1 A 0 A_JumpIfInventory("AECell",25,"Ammo")
		TNT1 A 0 A_JumpIfInventory("AEoDPrismaCannonCount",2,"Ammo")
		TNT1 A 0 A_JumpIfInventory("AEoDPrismaCannonCount",1,"Pickup2")
		TNT1 A 0 A_GiveInventory("Weapon7Count",1)
		TNT1 A 0 A_GiveInventory("PrismaCannonDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDPrismaCannon",1)
		TNT1 A 0 A_GiveInventory("AEoDPrismaCannonCount",1)
		TNT1 A 0 A_TakeInventory("AECell",25)
		TNT1 A 0 	
		TNT1 A 0 A_JumpIfInventory("NoWeaponSwitch",1,2)
		TNT1 A 0 A_SelectWeapon("AEoDPrismaCannon")
		TNT1 A 0
		Stop
	Pickup2:
		TNT1 A 0 A_JumpIfInventory("AECell",25,"Ammo")
		TNT1 A 0 A_GiveInventory("PrismaCannonDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDPrismaCannon",1)
		TNT1 A 0 A_GiveInventory("AEoDPrismaCannonCount",1)
		TNT1 A 0 A_TakeInventory("AECell",25)
		TNT1 A 0 	
		TNT1 A 0 A_JumpIfInventory("NoWeaponSwitch",1,2)
		TNT1 A 0 A_SelectWeapon("AEoDPrismaCannon")
		TNT1 A 0
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDPrismaCannonCount",2,"Ammo")
		TNT1 A 0 A_JumpIfInventory("AEoDPrismaCannonCount",1,"Pickup2")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		TNT1 A 0 ACS_NamedExecute("s798",0,7,88,0)
		Fail
	Ammo:
		TNT1 A 0 A_TakeInventory("AECell",25)
		TNT1 A 0 A_JumpIfInventory("AEoDPrismaCannonCount",1,2)
		TNT1 A 0 A_GiveInventory("Weapon7Count",1)
		TNT1 A 0 A_GiveInventory("AEoDPrismaCannonCount",1)
		TNT1 A 0 A_GiveInventory("PrismaCannonDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDPrismaCannon",1)
		Stop
	}
}

//==================================================================================
//==================================================================================

//==================================================================================
//==================================================================================

Actor AEoDPulsegunItem : CustomInventory 6105
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL
	Scale 0.2
	Inventory.Amount 1
	Inventory.PickupMessage "You got the Pulse gun!"
	Inventory.PickupSound "reilsss/weappickup/laserrifle"
	States
	{
	Spawn:
		D006 Z -1
		Stop
	Pickup:
		TNT1 A 0 A_JumpIfInventory("AEoDPulsegun",1,"Ammo")
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",7) <= 0,"Nothing")
		TNT1 A 0 A_GiveInventory("Weapon7Count",1)
		TNT1 A 0 A_GiveInventory("PulsegunDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDPulsegun",1)
		TNT1 A 0 	
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDPulsegun",1,"Ammo")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		TNT1 A 0 ACS_NamedExecute("s798",0,7,83,0)
		Fail
	Ammo:
		TNT1 A 0 A_GiveInventory("AEoDPulseGun",1)
		Stop
	}
}

//=====================================================================================
//=====================================================================================
//	NuclearGun
// Slot 7 (replaces AEoDPulseGun)
//=====================================================================================
//=====================================================================================
Actor AEoDPulseGun : Weapon 
{
	+FloorClip
	+INVENTORY.IGNORESKILL
	Weapon.AmmoType1 "PlasmaRod"
	Weapon.AmmoType2 "PlasmaRod"
	Weapon.AmmoGive1 50
	Weapon.AmmoUse1 8
	Weapon.AmmoUse2 1
	Weapon.SelectionOrder 7777
	Scale 0.2
	Tag "Pulse gun"
	Weapon.upsound "weapons/draw"
	States
	{
	Spawn:
		D006 Z -1
		Stop
	Ready:
		TNT1 A 0 	
		D006 E 0 A_StopSound(6)
		D006 EEEE 1 A_WeaponReady
		Loop
	Deselect:
		TNT1 A 0 	
		D006 E 0 A_StopSound(6)
		D006 E 1 A_Lower
		TNT1 AA 0 A_Lower
		Loop
	Select:
		D006 E 1 A_Raise
		TNT1 AA 0 A_Raise
		Loop
	Fire:
		D006 A 0 A_PlaySound("painkiller/weapon/nucleargun/PrimaryShoot",5)
		D006 A 2
		TNT1 A 0 A_FireCustomMissile("PulseBallGrenade",0,1,6)
		D006 B 2 A_SetPitch(pitch-4)
		D006 C 4
		D006 CCCCDDEE 2  A_SetPitch(pitch+0.5)
		D006 EEEEEEEE 4
		Goto Ready
	AltFire:
		TNT1 A 0 A_PlaySound("painkiller/weapon/nucleargun/MachineryStart",5)
		D006 FGH 3
	AltHold:
		TNT1 A 0 A_PlaySound("painkiller/weapon/nucleargun/MachineryLoop",6,1,1)
		D006 A 0 A_FireCustomMissile("PulseBall",0,1,11)		D006 I 3 A_FireCustomMissile("PulseBall",0,0,8)
		D006 A 0 A_FireCustomMissile("PulseBall",0,1,11)		D006 J 3 A_FireCustomMissile("PulseBall",0,0,8)
		D006 A 0 A_FireCustomMissile("PulseBall",0,1,11)		D006 K 3 A_FireCustomMissile("PulseBall",0,0,8)
		D006 A 0 A_FireCustomMissile("PulseBall",0,1,11)		D006 L 3 A_FireCustomMissile("PulseBall",0,0,8)
		TNT1 A 0 A_Refire
		TNT1 A 0 A_PlaySound("painkiller/weapon/nucleargun/MachineryStop",5)
		D006 MNO 4
		Goto Ready
	}
}


//------------------------------------------------------------
Actor PulseBall
{
	PROJECTILE
	+RANDOMIZE
	+FORCERADIUSDMG
	Radius 4
	Height 8
	Speed 25
	Damage 2
	Scale 0.35
	RENDERSTYLE Add
	Alpha 0.8
	Translation "0:255=%[0,0,0]:[0,1,0]"
	DamageType "Plasma"
	Deathsound "reilsss/weapons/serpentstaffexplosion"
	States
	{
	Spawn:
		PULS AB 6 bright
		Loop
	Death:
		TNT1 A 0 A_Explode(16,24,0) 
		TNT1 A 0 A_SetScale(0.5)
		TNT1 AAA 0 A_SpawnItemEx("BSSpitExtra",0,0,0,random(1,-1),random(1,-1),random(0,2),0,0)
		PULE ABCDE 4 bright
		Stop
	}
}


//------------------------------------------------------------
Actor PulseBallGrenade
{
	PROJECTILE
	BounceType "Doom"
	+CANBOUNCEWATER
	-NOGRAVITY
	+EXTREMEDEATH
	+FORCERADIUSDMG
	DamageType "Plasma"
	Radius 8
	Height 8
	Speed 18
	Gravity 0.4
	Damage 15
	BounceFactor 0.6
	SeeSound "reilsss/weapons/hellstafffire"
	DeathSound "reilsss/weapons/fulerodexplsion"
	Translation "0:255=%[0,0,0]:[0,1,0]"
	alpha 0.75
	Scale 0.74
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 ThrustThingZ(0,7,0,1)
		TNT1 A 0 A_StopSound
		X008 AAABBBCCCDDD 1 Bright A_SpawnItemEx("PulseGrenadeTrail",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		Goto Spawn+3
	Death:
		TNT1 A 0 A_QuakeEx(3,3,0, 15,0,5,"", QF_SCALEDOWN)
		TNT1 A 0 A_Explode(150,160,1)
		TNT1 A 0 A_NoGravity
		TNT1 A 0 A_SetScale(2)
		TNT1 A 0 A_SetTranslucent(1,1)
		TNT1 AAAAAAAA 0 A_SpawnItemEx("BioSlug",0,0,0,random(3,-3),random(3,-3),random(1,8),random(1,360),SXF_NOCHECKPOSITION)
		TNT1 AAAAAAAAAAAAA 0 A_SpawnItemEx("PulseGrenadeExploParticle",0,0,0,frandom(0.5,2.8),0,frandom(0,3),random(0,359),SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION)
		TNT1 AAAAAAAAA 0 A_SpawnItemEx("BSSpitExtra",0,0,0,random(1,-1),random(1,-1),random(0,4),0,0)
		TNT1 A 0 A_CustomMissile("STroopGrenExplo",0,0,0)
		X009 AABBCCDDEEFFGGHHIIJJKKLLMMNNOO 1 Bright A_FadeOut(0.03)
		Stop
	}
}

Actor PulseGrenadeTrail
{
	+NOINTERACTION
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 AA 0 A_SpawnItemEx("STroopGrenExploGas",random(4,-4),random(4,-4),random(4,-4),0,0,0.8,0,SXF_NOCHECKPOSITION) 
		Stop
	}
}


Actor PulseGrenadeExploParticle
{
	+NOINTERACTION
	RenderStyle Add
	Scale 0.12
	Translation "0:255=%[0,0,0]:[0.50,1.4,0.2]"
	States
	{
	Spawn:
		TNT1 A 0 
		TNT1 A 0 A_Jump(256,"Type1","Type2")
	Type1:
		TNT1 A 0 A_SetScale(0.12)
		TNT1 A 0 A_Jump(250,2,4,6,8,10,12,14,16,18,20,22)
		X101 A 1 Bright A_FadeOut(0.032)	TNT1 A 0 A_SetScale(scalex+0.035,scaley+0.035)
		X101 B 1 Bright A_FadeOut(0.032)	TNT1 A 0 A_SetScale(scalex+0.035,scaley+0.035)
		X101 C 1 Bright A_FadeOut(0.032)	TNT1 A 0 A_SetScale(scalex+0.035,scaley+0.035)
		X101 D 1 Bright A_FadeOut(0.032)	TNT1 A 0 A_SetScale(scalex+0.035,scaley+0.035)
		X101 E 1 Bright A_FadeOut(0.032)	TNT1 A 0 A_SetScale(scalex+0.035,scaley+0.035)
		X101 F 1 Bright A_FadeOut(0.032)	TNT1 A 0 A_SetScale(scalex+0.035,scaley+0.035)
		X101 G 1 Bright A_FadeOut(0.032)	TNT1 A 0 A_SetScale(scalex+0.035,scaley+0.035)
		X101 H 1 Bright A_FadeOut(0.032)	TNT1 A 0 A_SetScale(scalex+0.035,scaley+0.035)
		X101 I 1 Bright A_FadeOut(0.032)	TNT1 A 0 A_SetScale(scalex+0.035,scaley+0.035)
		X101 J 1 Bright A_FadeOut(0.032)	TNT1 A 0 A_SetScale(scalex+0.035,scaley+0.035)
		X101 K 1 Bright A_FadeOut(0.032)	TNT1 A 0 A_SetScale(scalex+0.035,scaley+0.035)
		X101 L 1 Bright A_FadeOut(0.032)	TNT1 A 0 A_SetScale(scalex+0.035,scaley+0.035)
		X101 M 1 Bright A_FadeOut(0.032)	TNT1 A 0 A_SetScale(scalex+0.035,scaley+0.035)
		X101 N 1 Bright A_FadeOut(0.032)	TNT1 A 0 A_SetScale(scalex+0.035,scaley+0.035)
		X101 O 1 Bright A_FadeOut(0.032)	TNT1 A 0 A_SetScale(scalex+0.035,scaley+0.035)
		X101 P 1 Bright A_FadeOut(0.032)	TNT1 A 0 A_SetScale(scalex+0.035,scaley+0.035)
		Goto Type1+2
	Type2:
		TNT1 A 0 A_SetScale(0.14)
		TNT1 A 0 A_Jump(250,2,4,6,8,10,12,14,16,18,20,22,24,26,28,30,32,34,36,38)
		X102 A 1 Bright A_FadeOut(0.032)	TNT1 A 0 A_SetScale(scalex+0.035,scaley+0.035)
		X102 B 1 Bright A_FadeOut(0.032)	TNT1 A 0 A_SetScale(scalex+0.035,scaley+0.035)
		X102 C 1 Bright A_FadeOut(0.032)	TNT1 A 0 A_SetScale(scalex+0.035,scaley+0.035)
		X102 D 1 Bright A_FadeOut(0.032)	TNT1 A 0 A_SetScale(scalex+0.035,scaley+0.035)
		X102 E 1 Bright A_FadeOut(0.032)	TNT1 A 0 A_SetScale(scalex+0.035,scaley+0.035)
		X102 F 1 Bright A_FadeOut(0.032)	TNT1 A 0 A_SetScale(scalex+0.035,scaley+0.035)
		X102 G 1 Bright A_FadeOut(0.032)	TNT1 A 0 A_SetScale(scalex+0.035,scaley+0.035)
		X102 H 1 Bright A_FadeOut(0.032)	TNT1 A 0 A_SetScale(scalex+0.035,scaley+0.035)
		X102 I 1 Bright A_FadeOut(0.032)	TNT1 A 0 A_SetScale(scalex+0.035,scaley+0.035)
		X102 J 1 Bright A_FadeOut(0.032)	TNT1 A 0 A_SetScale(scalex+0.035,scaley+0.035)
		X102 K 1 Bright A_FadeOut(0.032)	TNT1 A 0 A_SetScale(scalex+0.035,scaley+0.035)
		X102 L 1 Bright A_FadeOut(0.032)	TNT1 A 0 A_SetScale(scalex+0.035,scaley+0.035)
		X102 M 1 Bright A_FadeOut(0.032)	TNT1 A 0 A_SetScale(scalex+0.035,scaley+0.035)
		X102 N 1 Bright A_FadeOut(0.032)	TNT1 A 0 A_SetScale(scalex+0.035,scaley+0.035)
		X102 O 1 Bright A_FadeOut(0.032)	TNT1 A 0 A_SetScale(scalex+0.035,scaley+0.035)
		X102 P 1 Bright A_FadeOut(0.032)	TNT1 A 0 A_SetScale(scalex+0.035,scaley+0.035)
		X102 Q 1 Bright A_FadeOut(0.032)	TNT1 A 0 A_SetScale(scalex+0.035,scaley+0.035)
		X102 R 1 Bright A_FadeOut(0.032)	TNT1 A 0 A_SetScale(scalex+0.035,scaley+0.035)
		X102 S 1 Bright A_FadeOut(0.032)	TNT1 A 0 A_SetScale(scalex+0.035,scaley+0.035)
		X102 T 1 Bright A_FadeOut(0.032)	TNT1 A 0 A_SetScale(scalex+0.035,scaley+0.035)
		X102 U 1 Bright A_FadeOut(0.032)	TNT1 A 0 A_SetScale(scalex+0.035,scaley+0.035)
		X102 V 1 Bright A_FadeOut(0.032)	TNT1 A 0 A_SetScale(scalex+0.035,scaley+0.035)
		Goto Type2+2
	}
}




Actor PulsegunDrop : CustomInventory
{
	Inventory.MaxAmount 1
	States
	{
	Use:
		TNT1 A 0
		TNT1 A 0 A_StopSound(6)
		TNT1 A 0 A_SpawnItemEx("DroppedPulsegun",0,0,32,8,0,0,0,SXF_NOCHECKPOSITION,0)
		Stop
	}
}

Actor DroppedPulsegun
{
	Radius 16
	Height 20
	Scale 0.2
	States
	{
	Spawn:
		D006 Z 15
		TNT1 A 0 A_SpawnItemEx("AEoDPulsegunNoAmmo",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER,0)
		Stop
	}
}

Actor AEoDPulsegunNoAmmo : AEoDPulsegunItem
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL
	Scale 0.2
	Inventory.Amount 1
	Inventory.PickupMessage "You got the Pulsegun!"
	Inventory.PickupSound "reilsss/weappickup/laserrifle"
	States
	{
	Spawn:
		D006 Z -1
		Loop
	Pickup:
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",7) <= 0,"Nothing")
		TNT1 A 0 A_JumpIfInventory("PlasmaRod",50,"Ammo")
		TNT1 A 0 A_GiveInventory("Weapon7Count",1)
		TNT1 A 0 A_GiveInventory("PulsegunDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDPulsegun",1)
		TNT1 A 0 A_TakeInventory("PlasmaRod",50)
		TNT1 A 0 	
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDPulsegun",1,"Ammo")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		TNT1 A 0 ACS_NamedExecute("s798",0,7,83,0)
		Fail
	Ammo:
		TNT1 A 0 A_TakeInventory("PlasmaRod",50)
		TNT1 A 0 A_JumpIfInventory("AEoDPulsegun",1,2)
		TNT1 A 0 A_GiveInventory("Weapon7Count",1)
		TNT1 A 0 A_GiveInventory("PulsegunDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDPulsegun",1)
		Stop
	}
}

//==================================================================================
//==================================================================================

//==================================================================================
//==================================================================================

Actor AEoDRaptorItem : CustomInventory 6070
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL
	Scale 0.4
	Inventory.Amount 1
	Inventory.PickupMessage "You got a Raptor." 
	Inventory.PickupSound "reilsss/weappickup/perforator"
	States
	{
	Spawn:
		R028 Q -1
		Loop
	Pickup:
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",7) <= 0,"Nothing")
		TNT1 A 0 A_JumpIfInventory("AEoDRaptorCount",2,"Ammo")
		TNT1 A 0 A_JumpIfInventory("AEoDRaptorCount",1,"Pickup2")
		TNT1 A 0 A_GiveInventory("Weapon7Count",1)
		TNT1 A 0 A_GiveInventory("RaptorDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDRaptor",1)
		TNT1 A 0 A_GiveInventory("AEoDRaptorCount",1)
		TNT1 A 0 	
		TNT1 A 0 A_JumpIfInventory("NoWeaponSwitch",1,2)
		TNT1 A 0 A_SelectWeapon("AEoDRaptor")
		TNT1 A 0
		Stop
	Pickup2:
		TNT1 A 0 A_GiveInventory("RaptorDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDRaptor",1)
		TNT1 A 0 A_GiveInventory("AEoDRaptorCount",1)
		TNT1 A 0 	
		TNT1 A 0 A_JumpIfInventory("NoWeaponSwitch",1,2)
		TNT1 A 0 A_SelectWeapon("AEoDRaptor")
		TNT1 A 0
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDRaptorCount",2,"Ammo")
		TNT1 A 0 A_JumpIfInventory("AEoDRaptorCount",1,"Pickup2")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		TNT1 A 0 ACS_NamedExecute("s798",0,7,99,0)
		Fail
	Ammo:
		TNT1 A 0 A_GiveInventory("AEoDRaptor",1)
		Stop
	}
}

Actor AEoDRaptor : Weapon // 6070
{ 
	+FLOORCLIP
	+INVENTORY.IGNORESKILL
	+WEAPON.CHEATNOTWEAPON
	Inventory.MaxAmount 2 
	Weapon.AmmoType1 "AENails"
	Weapon.AmmoType2 "AEGrenade"
	Weapon.AmmoGive1 50
	Weapon.AmmoGive2 5
	Weapon.AmmoUse1 2
	Weapon.AmmoUse2 5
	Weapon.SelectionOrder 11300
	Obituary "%o was ripped and torn apart by %k's Raptor!"
	Inventory.PickupMessage "You got a Raptor." 
	Inventory.PickupSound "reilsss/weappickup/perforator"
	weapon.upsound "weapons/draw"
	Tag "Raptor"
	States 
	{ 
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_SpawnItemEx("AEoDRaptorPickup",0,0,0,0,0,0,0,0)
		Stop
	Ready:
		TNT1 A 0 A_StopSound(6)
		TNT1 A 0 A_TakeInventory("RaptorDropCheck",1)
		TNT1 A 0 A_JumpIfInventory("AEoDRaptorCount",2,"Ready2")
		R028 A 1 A_WeaponReady
		Goto Ready+1
	Ready2:
		TNT1 A 0 A_StopSound(6)
		TNT1 A 0 A_JumpIfInventory("RaptorDropCheck",1,"Ready")
		R029 A 1 A_WeaponReady
		Goto Ready2+1
	Deselect:
		TNT1 A 0 A_StopSound(6)
		TNT1 A 0 A_JumpIfInventory("AEoDRaptorCount",2,"Deselect2")
		TNT1 A 0 	
		R028 A 1 A_Lower
		TNT1 AA 0 A_Lower
		Goto Deselect+2
	Deselect2:
		TNT1 A 0 A_StopSound(6)
		TNT1 A 0 	
		R029 A 1 A_Lower
		TNT1 AA 0 A_Lower
		Goto Deselect2+1
	Select:
		TNT1 A 0 A_JumpIfInventory("AEoDRaptorCount",2,"Select2")
		TNT1 A 0 	
		R028 A 1 A_Raise
		TNT1 AA 0 A_Raise
		Goto Select+1
	Select2:
		R029 A 1 A_Raise
		TNT1 A 0 	
		TNT1 AA 0 A_Raise
		Loop
	Fire:
		TNT1 A 0 A_JumpIfInventory("AEoDRaptorCount",2,"Fire2")
		R028 A 4 A_PlaySound("reilsss/weapons/chaingunspinon", 7, 1.0, 0)
		R028 B 4
		R028 CD 3
		R028 EF 2
		R028 HG 1
		TNT1 A 0 A_PlaySound("reilsss/weapons/chaingunspin", 6, 1.0, 1)
		TNT1 A 0 A_ReFire
		Goto Ready
	Fire2:
		R029 A 4 A_PlaySound("reilsss/weapons/chaingunspinon", 7, 1.0, 0)
		R029 B 4
		R029 CD 3
		R029 EF 2
		R029 HG 1
		TNT1 A 0 A_PlaySound("reilsss/weapons/chaingunspin", 6, 1.0, 1)
		TNT1 A 0 A_ReFire
		Goto "Ready2"
	Hold:
		TNT1 B 0 A_JumpIfInventory("PowerQuickFire",1,"HoldQuick")
		TNT1 A 0 A_JumpIfInventory("AEoDRaptorCount",2,"Hold2")
		TNT1 A 0 A_Recoil(0.3)
		TNT1 A 0 A_GunFlash
		TNT1 A 0 A_FireCustomMissile("PistolCasingSpawner",-50,0, 0,0)
		TNT1 A 0 A_PlaySound("reilsss/weapons/supernailgunfire", CHAN_WEAPON, 1.0, 0)
		R028 II 0 Bright A_FireCustomMissile("RNail",0,1,5,3)
		TNT1 A 0 A_FireCustomMissile("GunSmokeSpawner",0,0,7,8)
		R028 I 1 Bright A_SetPitch(pitch-0.75)
		R028 JK 1 Bright A_SetPitch(pitch+0.375)
		R028 L 1 Bright
		TNT1 A 0 A_JumpIfNoAmmo("HoldEnd")
		TNT1 A 0 A_Recoil(0.3)
		TNT1 A 0 A_GunFlash
		TNT1 A 0 A_FireCustomMissile("PistolCasingSpawner",-50,0, 0,0)
		TNT1 A 0 A_PlaySound("reilsss/weapons/supernailgunfire", CHAN_WEAPON, 1.0, 0)
		R028 MM 0 Bright A_FireCustomMissile("RNail",0,1,5,3)
		TNT1 A 0 A_FireCustomMissile("GunSmokeSpawner",0,0,7,8)
		R028 M 1 Bright A_SetPitch(pitch-0.75)
		R028 NO 1 Bright A_SetPitch(pitch+0.375)
		R028 P 1 bright
		TNT1 A 0 A_JumpIfNoAmmo("HoldEnd")
		TNT1 A 0 A_ReFire
		Goto HoldEnd
	Hold2:
		TNT1 B 0 A_JumpIfInventory("PowerQuickFire",1,"Hold2Quick")
		TNT1 A 0 A_Recoil(0.3)
		TNT1 A 0 A_GunFlash
		TNT1 A 0 A_PlaySound("reilsss/weapons/supernailgunfire", CHAN_WEAPON, 1.0, 0)
		R029 II 0 Bright A_FireCustomMissile("RNail",0,1,5,3)
		R029 II 0 Bright A_FireCustomMissile("RNail",0,1,-5,3)
		R029 I 1 Bright A_SetPitch(pitch-0.75)
		TNT1 A 0 
		TNT1 A 0 A_FireCustomMissile("GunSmokeSpawner",0,0,7,8)
		TNT1 A 0  A_FireCustomMissile("PistolCasingSpawner",-50,0, 0,0)
		TNT1 A 0 A_PlaySound("reilsss/weapons/supernailgunfire", CHAN_WEAPON, 1.0, 0)
		R029 JK 1 Bright A_SetPitch(pitch+0.375)
		R029 L 1 bright
		TNT1 A 0 A_FireCustomMissile("GunSmokeSpawner",0,0,-7,8)
		TNT1 A 0 A_FireCustomMissile("PistolCasingSpawner",50,0, 0,0)
		TNT1 A 0 A_JumpIfNoAmmo("HoldEnd2")
		TNT1 A 0 A_Recoil(0.3)
		TNT1 A 0 A_GunFlash
		TNT1 A 0 A_PlaySound("reilsss/weapons/supernailgunfire", CHAN_WEAPON, 1.0, 0)
		R029 MM 0 Bright A_FireCustomMissile("RNail",0,1,5,3)
		TNT1 A 0 
		TNT1 A 0 A_FireCustomMissile("GunSmokeSpawner",0,0,7,8)
		TNT1 A 0 A_FireCustomMissile("PistolCasingSpawner",-50,0, 0,0)
		TNT1 A 0 A_PlaySound("reilsss/weapons/supernailgunfire", CHAN_WEAPON, 1.0, 0)
		R029 MNOP 1 Bright 
		TNT1 A 0 A_FireCustomMissile("GunSmokeSpawner",0,0,-7,8)
		TNT1 A 0 A_FireCustomMissile("PistolCasingSpawner",50,0, 0,0)
		TNT1 A 0 A_JumpIfNoAmmo("HoldEnd2")
		TNT1 A 0 A_ReFire
		Goto HoldEnd2
	HoldQuick:
		TNT1 B 0 A_JumpIfInventory("PowerQuickFire",1,1)
		Goto Hold
		TNT1 A 0 A_JumpIfInventory("AEoDRaptorCount",2,"Hold2")
		TNT1 A 0 A_Recoil(0.3)
		TNT1 A 0 A_GunFlash
		TNT1 A 0 A_FireCustomMissile("PistolCasingSpawner",-50,0, 0,0)
		TNT1 A 0 A_PlaySound("reilsss/weapons/supernailgunfire", CHAN_WEAPON, 1.0, 0)
		R028 I 1 Bright A_FireCustomMissile("RNail",0,1,5,3)
		TNT1 A 0 A_FireCustomMissile("GunSmokeSpawner",0,0,7,8)
		R028 JL 1 Bright
		TNT1 A 0 A_JumpIfNoAmmo("HoldEnd")
		TNT1 A 0 A_Recoil(0.3)
		TNT1 A 0 A_GunFlash
		TNT1 A 0 A_FireCustomMissile("PistolCasingSpawner",-50,0, 0,0)
		TNT1 A 0 A_PlaySound("reilsss/weapons/supernailgunfire", CHAN_WEAPON, 1.0, 0)
		R028 M 1 Bright A_FireCustomMissile("RNail",0,1,5,3)
		TNT1 A 0 A_FireCustomMissile("GunSmokeSpawner",0,0,7,8)
		R028 NP 1 Bright
		TNT1 A 0 A_JumpIfNoAmmo("HoldEnd")
		TNT1 A 0 A_ReFire
		Goto HoldEnd
	Hold2Quick:
		TNT1 B 0 A_JumpIfInventory("PowerQuickFire",1,1)
		Goto Hold2
		TNT1 A 0 A_Recoil(0.3)
		TNT1 A 0 A_GunFlash
		TNT1 A 0 A_PlaySound("reilsss/weapons/supernailgunfire", CHAN_WEAPON, 1.0, 0)
		R029 I 1 Bright A_FireCustomMissile("RNail",0,1,5,3)
		TNT1 A 0 
		TNT1 A 0 A_FireCustomMissile("GunSmokeSpawner",0,0,7,8)
		TNT1 A 0 A_FireCustomMissile("PistolCasingSpawner",-50,0, 0,0)
		TNT1 A 0 A_PlaySound("reilsss/weapons/supernailgunfire", CHAN_WEAPON, 1.0, 0)
		R029 JL 1 Bright A_FireCustomMissile("RNail",0,1,-5,3)
		TNT1 A 0 A_FireCustomMissile("GunSmokeSpawner",0,0,-7,8)
		TNT1 A 0 A_FireCustomMissile("PistolCasingSpawner",50,0, 0,0)
		TNT1 A 0 A_JumpIfNoAmmo("HoldEnd2")
		TNT1 A 0 A_Recoil(0.3)
		TNT1 A 0 A_GunFlash
		TNT1 A 0 A_PlaySound("reilsss/weapons/supernailgunfire", CHAN_WEAPON, 1.0, 0)
		R029 M 1 Bright A_FireCustomMissile("RNail",0,1,5,3)
		TNT1 A 0 
		TNT1 A 0 A_FireCustomMissile("GunSmokeSpawner",0,0,7,8)
		TNT1 A 0 A_FireCustomMissile("PistolCasingSpawner",-50,0, 0,0)
		TNT1 A 0 A_PlaySound("reilsss/weapons/supernailgunfire", CHAN_WEAPON, 1.0, 0)
		R029 NP 1 Bright A_FireCustomMissile("RNail",0,1,-5,3)
		TNT1 A 0 A_FireCustomMissile("GunSmokeSpawner",0,0,-7,8)
		TNT1 A 0 A_FireCustomMissile("PistolCasingSpawner",50,0, 0,0)
		TNT1 A 0 A_JumpIfNoAmmo("HoldEnd2")
		TNT1 A 0 A_ReFire
		Goto HoldEnd2
	HoldEnd:
		TNT1 A 0 A_StopSound(6)
		TNT1 A 0 A_PlaySound("reilsss/weapons/chaingunspin", 7, 1.0, 0)
		R028 ABCD 2 A_WeaponReady
		TNT1 A 0 A_PlaySound("reilsss/weapons/chaingunspinoff", 8, 1.0, 0)
		R028 EFGH 3 A_WeaponReady
		R028 ABCD 4 A_WeaponReady
		R028 EF 5 A_WeaponReady
		R028 GH 6 A_WeaponReady
		Goto Ready
	HoldEnd2:
		TNT1 A 0 A_StopSound(6)
		TNT1 A 0 A_PlaySound("reilsss/weapons/chaingunspin", 7, 1.0, 0)
		R029 ABCD 2 A_WeaponReady
		TNT1 A 0 A_PlaySound("reilsss/weapons/chaingunspinoff", 8, 1.0, 0)
		R029 EFGH 3 A_WeaponReady
		R029 ABCD 4 A_WeaponReady
		R029 EF 5 A_WeaponReady
		R029 GH 6 A_WeaponReady
		Goto Ready2
	AltFire:
		TNT1 A 0 A_JumpIfInventory("AEoDRaptorCount",2,"AltFire2")
		TNT1 A 0 A_StopSoundEx("SoundSlot6")
		R028 A 4 A_PlaySound("reilsss/weapons/chaingunspinon", 7, 1.0, 0)
		R028 B 4
		R028 CD 3
		R028 EF 2
		R028 HG 1
		TNT1 A 0 A_PlaySound("reilsss/weapons/chaingunspin", 6, 1.0, 1)
		TNT1 A 0 A_PlaySound("reilsss/weapons/howitzerfire", CHAN_WEAPON, 1.0, 0)
		TNT1 A 0 A_GunFlash
		TNT1 A 0 A_FireCustomMissile("GunSmokeSpawner",0,0,7,8)
		R028 I 0 Bright A_FireCustomMissile("NailGrenade",0,1,6,6)
		R028 I 2 Bright A_SetPitch(pitch-8)
		R028 JJKK 1 
		R028 LLEEFFGG 1 A_SetPitch(pitch+1)
		R028 H 2
		TNT1 A 0 A_StopSound(6)
		TNT1 A 0 A_PlaySound("reilsss/weapons/chaingunspin", 7, 1.0, 0)
		R028 ABCD 2
		TNT1 A 0 A_PlaySound("reilsss/weapons/chaingunspinoff", 8, 1.0, 0)
		R028 EFGH 3
		R028 ABCD 4
		R028 EF 5 A_WeaponReady
		R028 GH 6 A_WeaponReady
		Goto Ready
	AltFire2:
		TNT1 A 0 A_StopSoundEx("SoundSlot6")
		R029 A 4 A_PlaySound("reilsss/weapons/chaingunspinon", 7, 1.0, 0)
		R029 B 4
		R029 CD 3
		R029 EF 2
		R029 HG 1
		TNT1 A 0 A_PlaySound("reilsss/weapons/chaingunspin", 6, 1.0, 1)
		TNT1 A 0 A_PlaySound("reilsss/weapons/howitzerfire", CHAN_WEAPON, 1.0, 0)
		TNT1 A 0 A_GunFlash
		TNT1 A 0 A_FireCustomMissile("GunSmokeSpawner",0,0,7,8)
		TNT1 A 0 A_FireCustomMissile("NailGrenade",0,1,-6,6)
		TNT1 A 0 A_FireCustomMissile("NailGrenade2",0,1,6,6)
		R029 I 3 Bright A_SetPitch(pitch-8)
		R029 JJKK 1
		R029 LLEEFFGG 1 A_SetPitch(pitch+1)
		R029 H 2
		TNT1 A 0 A_StopSound(6)
		TNT1 A 0 A_PlaySound("reilsss/weapons/chaingunspin", 7, 1.0, 0)
		R029 ABCD 2
		TNT1 A 0 A_PlaySound("reilsss/weapons/chaingunspinoff", 8, 1.0, 0)
		R029 EFGH 3
		R029 ABCD 4
		R029 EF 5 A_WeaponReady
		R029 GH 6 A_WeaponReady
		Goto Ready2
	Flash:
		TNT1 A 3 A_Light2
		TNT1 A 1 A_Light0
		Stop
	} 
}

Actor AEoDRaptorPickup : CustomInventory //6042
{
	Inventory.PickupSound "reilsss/weappickup/perforator"
	Inventory.PickupMessage "You got the Raptor!"
	Scale 0.40
	States
	{
	Spawn:
		R028 Q 3
		Loop
	Pickup:
		TNT1 A 0 A_JumpIfInventory("AEoDRaptorCount",2,3)
		TNT1 A 0 A_GiveInventory("AEoDRaptorCount",1)
		TNT1 A 0 A_SelectWeapon("AEoDRaptor")
		TNT1 A 0 A_GiveInventory("AEoDRaptor",1)
		TNT1 A 0
		Stop
	}
}

Actor AEoDRaptorCount : Inventory
{
	Inventory.MaxAmount 2
	Inventory.Amount 1
}

Actor RNail : FastProjectile
{
	Projectile
	Radius 6
	Height 6
	Speed 90
	+RIPPER	RipperLevel 1
	Damage 2
	DeathSound "weapons/nailpuff"
	Scale 0.14
	//MissileType "PerforatorNailTrail"
	//MissileHeight 8
	+BLOODSPLATTER
	DamageType "AEBullet"
	States
	{
	Spawn:
		SPIK A 3
		Loop
	Death:
		TNT1 A 0 A_SpawnItemEx("NewPuff1",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		TNT1 A 0 A_Jump(128,1)
		TNT1 A 0 A_PlaySound("weapons/nailricochet")
		TNT1 A 3
		Stop
	}
}

Actor RNail2 : RNail
{
	Speed 60
	-RIPPER
	Damage 8
	States
	{
	Crash:
		TNT1 AAA 0 A_SpawnItemEx("RNail",0,0,0,34,0,random(1,10),random(0,359),0)
		TNT1 A 0 A_SpawnItemEx("NewPuff1",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		TNT1 A 0
		Stop
	Xdeath:
		TNT1 AAA 0 A_SpawnItemEx("RNail",0,0,0,34,0,random(1,10),random(0,359),0)
		TNT1 A 0 
		TNT1 A 0
		Stop
	Death:
		TNT1 AAA 0 A_SpawnItemEx("RNail",0,0,0,34,0,random(1,10),random(0,359),0)
		TNT1 A 0 A_SpawnItemEx("NewPuff1",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		TNT1 A 0
		Stop
	}
}

Actor NailGrenade
{
	PROJECTILE
	-SHOOTABLE
	+HERETICBOUNCE
	+FORCERADIUSDMG
	+RANDOMIZE
	-NOGRAVITY
	+CANBOUNCEWATER
	+EXTREMEDEATH
	Speed 45
	Radius 10
	Height 12
	Damage 5
	ReactionTime 6
	SeeSound "Weapons/NBBounce"
	DeathSound "Weapons/NailBombExp"
	Scale 0.15
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_StopSound
		NAGR ABCDEFGHIJKLMNOPQRSTUVWX 1 A_SpawnItemEx("QuakeGrenSmokeTrail",random(0,-3),random(2,-2),random(2,-2),0,0,0.8,0,SXF_NOCHECKPOSITION, 100)
		TNT1 A 0 A_CountDown
		Goto Spawn+1
	Death:
		NAGR A 1 A_Explode(35,70,1)
		TNT1 A 0 A_CustomMissile("ExploSmokeGeneralSmall",0,0,0)
		TNT1 A 0 A_SpawnItemEx("NewExplosionMediumConcentrated",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION,0)
		TNT1 A 0 A_CustomMissile("SNail",5,0,0,6,0)
		TNT1 A 0 A_CustomMissile("SNail",5,0,10,6,0)
		TNT1 A 0 A_CustomMissile("SNail",5,0,20,6,0)
		TNT1 A 0 A_CustomMissile("SNail",5,0,30,6,0)
		TNT1 A 0 A_CustomMissile("SNail",5,0,40,6,0)
		TNT1 A 0 A_CustomMissile("SNail",5,0,50,6,0)
		TNT1 A 0 A_CustomMissile("SNail",5,0,60,6,0)
		TNT1 A 0 A_CustomMissile("SNail",5,0,70,6,0)
		TNT1 A 0 A_CustomMissile("SNail",5,0,80,6,0)
		TNT1 A 0 A_CustomMissile("SNail",5,0,90,6,0)
		TNT1 A 0 A_CustomMissile("SNail",5,0,100,6,0)
		TNT1 A 0 A_CustomMissile("SNail",5,0,110,6,0)
		TNT1 A 0 A_CustomMissile("SNail",5,0,120,6,0)
		TNT1 A 0 A_CustomMissile("SNail",5,0,130,6,0)
		TNT1 A 0 A_CustomMissile("SNail",5,0,140,6,0)
		TNT1 A 0 A_CustomMissile("SNail",5,0,150,6,0)
		TNT1 A 0 A_CustomMissile("SNail",5,0,160,6,0)
		TNT1 A 0 A_CustomMissile("SNail",5,0,170,6,0)
		TNT1 A 0 A_CustomMissile("SNail",5,0,180,6,0)
		TNT1 A 0 A_CustomMissile("SNail",5,0,190,6,0)
		TNT1 A 0 A_CustomMissile("SNail",5,0,200,6,0)
		TNT1 A 0 A_CustomMissile("SNail",5,0,210,6,0)
		TNT1 A 0 A_CustomMissile("SNail",5,0,220,6,0)
		TNT1 A 0 A_CustomMissile("SNail",5,0,230,6,0)
		TNT1 A 0 A_CustomMissile("SNail",5,0,240,6,0)
		TNT1 A 0 A_CustomMissile("SNail",5,0,250,6,0)
		TNT1 A 0 A_CustomMissile("SNail",5,0,260,6,0)
		TNT1 A 0 A_CustomMissile("SNail",5,0,270,6,0)
		TNT1 A 0 A_CustomMissile("SNail",5,0,280,6,0)
		TNT1 A 0 A_CustomMissile("SNail",5,0,290,6,0)
		TNT1 A 0 A_CustomMissile("SNail",5,0,300,6,0)
		TNT1 A 0 A_CustomMissile("SNail",5,0,310,6,0)
		TNT1 A 0 A_CustomMissile("SNail",5,0,320,6,0)
		TNT1 A 0 A_CustomMissile("SNail",5,0,330,6,0)
		TNT1 A 0 A_CustomMissile("SNail",5,0,340,6,0)
		TNT1 A 0 A_CustomMissile("SNail",5,0,350,6,0)
		Stop
	}
}

Actor NailGrenade2 : NailGrenade
{
	States
	{
	Death:
		NAGR A 1 A_Explode(35,70,1)
		TNT1 A 0 A_CustomMissile("ExploSmokeGeneralSmall",0,0,0)
		TNT1 A 0 A_SpawnItemEx("NewExplosionMediumConcentrated",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION,0)
		TNT1 A 0 A_CustomMissile("SNail",5,0,5,6,0)
		TNT1 A 0 A_CustomMissile("SNail",5,0,15,6,0)
		TNT1 A 0 A_CustomMissile("SNail",5,0,25,6,0)
		TNT1 A 0 A_CustomMissile("SNail",5,0,35,6,0)
		TNT1 A 0 A_CustomMissile("SNail",5,0,45,6,0)
		TNT1 A 0 A_CustomMissile("SNail",5,0,55,6,0)
		TNT1 A 0 A_CustomMissile("SNail",5,0,65,6,0)
		TNT1 A 0 A_CustomMissile("SNail",5,0,75,6,0)
		TNT1 A 0 A_CustomMissile("SNail",5,0,85,6,0)
		TNT1 A 0 A_CustomMissile("SNail",5,0,95,6,0)
		TNT1 A 0 A_CustomMissile("SNail",5,0,105,6,0)
		TNT1 A 0 A_CustomMissile("SNail",5,0,115,6,0)
		TNT1 A 0 A_CustomMissile("SNail",5,0,125,6,0)
		TNT1 A 0 A_CustomMissile("SNail",5,0,135,6,0)
		TNT1 A 0 A_CustomMissile("SNail",5,0,145,6,0)
		TNT1 A 0 A_CustomMissile("SNail",5,0,155,6,0)
		TNT1 A 0 A_CustomMissile("SNail",5,0,165,6,0)
		TNT1 A 0 A_CustomMissile("SNail",5,0,175,6,0)
		TNT1 A 0 A_CustomMissile("SNail",5,0,185,6,0)
		TNT1 A 0 A_CustomMissile("SNail",5,0,195,6,0)
		TNT1 A 0 A_CustomMissile("SNail",5,0,205,6,0)
		TNT1 A 0 A_CustomMissile("SNail",5,0,215,6,0)
		TNT1 A 0 A_CustomMissile("SNail",5,0,225,6,0)
		TNT1 A 0 A_CustomMissile("SNail",5,0,235,6,0)
		TNT1 A 0 A_CustomMissile("SNail",5,0,245,6,0)
		TNT1 A 0 A_CustomMissile("SNail",5,0,255,6,0)
		TNT1 A 0 A_CustomMissile("SNail",5,0,265,6,0)
		TNT1 A 0 A_CustomMissile("SNail",5,0,275,6,0)
		TNT1 A 0 A_CustomMissile("SNail",5,0,285,6,0)
		TNT1 A 0 A_CustomMissile("SNail",5,0,295,6,0)
		TNT1 A 0 A_CustomMissile("SNail",5,0,305,6,0)
		TNT1 A 0 A_CustomMissile("SNail",5,0,315,6,0)
		TNT1 A 0 A_CustomMissile("SNail",5,0,325,6,0)
		TNT1 A 0 A_CustomMissile("SNail",5,0,335,6,0)
		TNT1 A 0 A_CustomMissile("SNail",5,0,345,6,0)
		TNT1 A 0 A_CustomMissile("SNail",5,0,355,6,0)
		Stop
	}
}

Actor RaptorDropCheck : Inventory
{
	Inventory.Amount 1
	Inventory.MaxAmount 1
}

Actor RaptorDrop : CustomInventory
{
	Inventory.Amount 1
	Inventory.MaxAmount 2
	States
	{
	Use:
		TNT1 A 0
		TNT1 A 0 A_StopSound(6)
		TNT1 A 0 A_SpawnItemEx("DroppedRaptor",0,0,32,8,0,0,0,SXF_NOCHECKPOSITION,0)
		TNT1 A 0 A_TakeInventory("AEoDRaptorCount",1)
		Stop
	}
}

Actor DroppedRaptor
{
	Radius 16
	Height 20
	Scale 0.4
	States
	{
	Spawn:
		R028 Q 15
		TNT1 A 0 A_SpawnItemEx("AEoDRaptorNoAmmo",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER,0)
		Stop
	}
}

Actor AEoDRaptorNoAmmo : AEoDRaptorItem
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL
	Scale 0.4
	Inventory.Amount 1
	Inventory.PickupMessage "You got a Raptor." 
	Inventory.PickupSound "reilsss/weappickup/perforator"
	States
	{
	Spawn:
		R028 Q -1
		Loop
	Pickup:
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",7) <= 0,"Nothing")
		TNT1 A 0 A_JumpIfInventory("AENails",50,"Ammo")
		TNT1 A 0 A_JumpIfInventory("AEGrenade",5,"Ammo3")
		TNT1 A 0 A_JumpIfInventory("AEoDRaptorCount",2,"Ammo")
		TNT1 A 0 A_JumpIfInventory("AEoDRaptorCount",1,"Pickup2")
		TNT1 A 0 A_GiveInventory("Weapon7Count",1)
		TNT1 A 0 A_GiveInventory("RaptorDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDRaptor",1)
		TNT1 A 0 A_GiveInventory("AEoDRaptorCount",1)
		TNT1 A 0 A_TakeInventory("AENails",50)
		TNT1 A 0 A_TakeInventory("AEGrenade",5)
		TNT1 A 0 	
		TNT1 A 0 A_JumpIfInventory("NoWeaponSwitch",1,2)
		TNT1 A 0 A_SelectWeapon("AEoDRaptor")
		TNT1 A 0
		Stop
	Pickup2:
		TNT1 A 0 A_JumpIfInventory("AENails",50,"Ammo")
		TNT1 A 0 A_JumpIfInventory("AEGrenade",5,"Ammo")
		TNT1 A 0 A_GiveInventory("RaptorDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDRaptor",1)
		TNT1 A 0 A_GiveInventory("AEoDRaptorCount",1)
		TNT1 A 0 A_TakeInventory("AENails",50)
		TNT1 A 0 A_TakeInventory("AEGrenade",5)
		TNT1 A 0 	
		TNT1 A 0 A_JumpIfInventory("NoWeaponSwitch",1,2)
		TNT1 A 0 A_SelectWeapon("AEoDRaptor")
		TNT1 A 0
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDRaptorCount",2,"Ammo")
		TNT1 A 0 A_JumpIfInventory("AEoDRaptorCount",1,"Pickup2")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		TNT1 A 0 ACS_NamedExecute("s798",0,7,99,0)
		Fail
	Ammo:
		TNT1 A 0 A_JumpIfInventory("AEGrenade",5,1)
		Goto Ammo2
		TNT1 A 0 A_TakeInventory("AENails",50)
		TNT1 A 0 A_TakeInventory("AEGrenade",5)
		TNT1 A 0 A_JumpIfInventory("AEoDRaptorCount",1,2)
		TNT1 A 0 A_GiveInventory("Weapon7Count",1)
		TNT1 A 0 A_GiveInventory("AEoDRaptorCount",1)
		TNT1 A 0 A_GiveInventory("RaptorDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDRaptor",1)
		Stop
	Ammo2:
		TNT1 A 0 A_TakeInventory("AENails",50)
		TNT1 A 0 A_JumpIfInventory("AEoDRaptorCount",1,2)
		TNT1 A 0 A_GiveInventory("Weapon7Count",1)
		TNT1 A 0 A_GiveInventory("AEoDRaptorCount",1)
		TNT1 A 0 A_GiveInventory("RaptorDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDRaptor",1)
		TNT1 A 0 A_TakeInventory("AEGrenade",5)
		Stop
	Ammo3:
		TNT1 A 0 A_TakeInventory("AEGrenade",5)
		TNT1 A 0 A_JumpIfInventory("AEoDRaptorCount",1,2)
		TNT1 A 0 A_GiveInventory("Weapon7Count",1)
		TNT1 A 0 A_GiveInventory("AEoDRaptorCount",1)
		TNT1 A 0 A_GiveInventory("RaptorDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDRaptor",1)
		TNT1 A 0 A_TakeInventory("AENails",50)
		Stop
	}
}

//==================================================================================
//==================================================================================

//==================================================================================
//==================================================================================

Actor AEoDIncineratorItem : CustomInventory 6134
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL
	+FLOATBOB
	Scale 0.3
	Inventory.Amount 1
	Inventory.PickupMessage "You got the incinerator!"
	Inventory.PickupSound "weaponbuild"
	States
	{
	Spawn:
		07RO ABCDEFGHIJKLMNOPQR 3
		Loop
	Pickup:
		TNT1 A 0 A_JumpIfInventory("AEoDIncinerator",1,"Ammo")
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",7) <= 0,"Nothing")
		TNT1 A 0 A_GiveInventory("Weapon7Count",1)
		TNT1 A 0 A_GiveInventory("IncineratorDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDIncinerator",1)
		TNT1 A 0 	
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDIncinerator",1,"Ammo")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		TNT1 A 0 ACS_NamedExecute("s798",0,7,85,0)
		Fail
	Ammo:
		TNT1 A 0 A_GiveInventory("AEoDIncinerator",1)
		Stop
	}
}

Actor AEoDIncinerator : Weapon // 6134
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL
	+WEAPON.CHEATNOTWEAPON
	+FLOATBOB
	Weapon.AmmoType1 "RedMana"
	Weapon.AmmoType2 "RedMana"
	Weapon.AmmoGive1 25
	Weapon.AmmoUse1 1
	Weapon.AmmoUse2 20
	Weapon.SelectionOrder 14995
	Inventory.PickupMessage "You got the incinerator!"
	Inventory.PickupSound "weaponbuild"
	weapon.upsound "weapons/draw"
	Scale 0.3
	Tag "Incinerator"
	States
	{
	Spawn:
		07RO ABCDEFGHIJKLMNOPQR 3
		Loop
	Ready:
		W08I A 3 A_WeaponReady
		Loop
	Deselect:
		TNT1 A 0 	
		W08I A 1 A_Lower
		W08I AA 0 A_Lower
		Loop
	Select:
		TNT1 A 0 	
		W08I A 1 A_Raise
		W08I AA 0 A_Raise
		Loop
	Fire:
		TNT1 A 0 A_Jump(128,"FireB")
		TNT1 A 0 A_PlaySound("reilsss/weapons/incineratorfire", 7, 1.0, 0)
		TNT1 A 0 A_SetBlend("Orange",0.15,3)
		TNT1 A 0 A_GunFlash
		TNT1 A 0 //ACS_NamedExecute("s851",0,8,random(-2,2),0)
		W08F A 2 A_FireCustomMissile("IncineratorFireBall",0,1,-9,0)
		TNT1 A 0 //ACS_NamedExecute("s851",0,-8,random(-2,2),0)
		W08F BC 2 
		TNT1 A 0 A_PlaySound("reilsss/weapons/incineratorfire", 7, 1.0, 0)
		TNT1 A 0 A_SetBlend("Orange",0.15,3)
		TNT1 A 0 A_GunFlash
		TNT1 A 0 //ACS_NamedExecute("s851",0,8,random(-2,2),0)
		W08F D 2 A_FireCustomMissile("IncineratorFireBall",0,1,9,0)
		TNT1 A 0 //ACS_NamedExecute("s851",0,-8,random(-2,2),0)
		W08F EF 2 
		Goto Ready
	FireB:
		TNT1 A 0 A_PlaySound("reilsss/weapons/incineratorfire", 7, 1.0, 0)
		TNT1 A 0 A_SetBlend("Orange",0.15,3)
		TNT1 A 0 A_GunFlash
		TNT1 A 0 //ACS_NamedExecute("s851",0,8,random(-2,2),0)
		W08F G 2 A_FireCustomMissile("IncineratorFireBall",0,1,-9,0)
		TNT1 A 0 //ACS_NamedExecute("s851",0,-8,random(-2,2),0)
		W08F HI 2 
		TNT1 A 0 A_PlaySound("reilsss/weapons/incineratorfire", 7, 1.0, 0)
		TNT1 A 0 A_SetBlend("Orange",0.15,3)
		TNT1 A 0 A_GunFlash
		TNT1 A 0 //ACS_NamedExecute("s851",0,8,random(-2,2),0)
		W08F J 2 A_FireCustomMissile("IncineratorFireBall",0,1,9,0)
		TNT1 A 0 //ACS_NamedExecute("s851",0,-8,random(-2,2),0)
		W08F KL 2 
		Goto Ready
	AltFire:
		W08G ABC 3 
		TNT1 A 0 A_SetBlend("Orange",0.75,10)
		TNT1 A 0 A_PlaySound("ediolon/fireballbig", CHAN_WEAPON, 1.0, 0)
		TNT1 A 0 A_GunFlash
		TNT1 A 0 //ACS_NamedExecute("s851",0,100,random(-5,5),0)
		W08G D 3 A_FireCustomMissile("IncineratorFireBallBig",0,1,0,0)
		W08G EEFF 2 //ACS_NamedExecute("s851",0,-25,0,0)
		W08G GHI 4 
		Goto Ready
	Flash:
		TNT1 A 1
		Stop
	}
}
//**********************************************
Actor IncineratorFireBall : FastProjectile
{
	PROJECTILE
	+FORCERADIUSDMG
	Radius 6
	Height 8
	Speed 30
	Damage 7
	SeeSound "reilsss/weapons/incineratorexplosion"
	Scale 0.25
	DamageType "Fire"
	RenderStyle Add
	MissileType "IFBTrail"
	MissileHeight 8
	States
	{
	Spawn:
		PROJ AAABBBCCCDDD 1 Bright A_SpawnItemEx("NewExploSmallSmoke",0,0,0,0,0,frandom(0.1,0.5),0,SXF_NOCHECKPOSITION,190)
		Loop
	Death:
		TNT1 AAA 0 A_SpawnItemEx("NewExploSmallSmoke",0,0,0,random(10,-10)/(10*2.5),random(10,-10)/(10*2.5),random(10,-10)/(10*2.5),0,SXF_NOCHECKPOSITION)
		TNT1 A 0 A_SpawnItemEx("NewExploSmallSmoke",0,0,0,random(4,-4)/(4*2),0,random(4,-4)/(4*6.0),0,SXF_NOCHECKPOSITION)
		TNT1 A 0 A_SpawnItemEx("NewExploSmallSmoke",0,0,0,random(4,-4)/(4*2),0,random(4,-4)/(4*6.0),40,SXF_NOCHECKPOSITION)
		TNT1 A 0 A_SpawnItemEx("NewExploSmallSmoke",0,0,0,random(4,-4)/(4*2),0,random(4,-4)/(4*6.0),80,SXF_NOCHECKPOSITION)
		TNT1 A 0 A_SpawnItemEx("NewExploSmallSmoke",0,0,0,random(4,-4)/(4*2),0,random(4,-4)/(4*6.0),120,SXF_NOCHECKPOSITION)
		TNT1 A 0 A_SpawnItemEx("NewExploSmallSmoke",0,0,0,random(4,-4)/(4*2),0,random(4,-4)/(4*6.0),160,SXF_NOCHECKPOSITION)
		TNT1 A 0 A_SpawnItemEx("NewExploSmallSmoke",0,0,0,random(4,-4)/(4*2),0,random(4,-4)/(4*6.0),-40,SXF_NOCHECKPOSITION)
		TNT1 A 0 A_SpawnItemEx("NewExploSmallSmoke",0,0,0,random(4,-4)/(4*2),0,random(4,-4)/(4*6.0),-80,SXF_NOCHECKPOSITION)
		TNT1 A 0 A_SpawnItemEx("NewExploSmallSmoke",0,0,0,random(4,-4)/(4*2),0,random(4,-4)/(4*6.0),-120,SXF_NOCHECKPOSITION)
		TNT1 A 0 A_SpawnItemEx("NewExploSmallSmoke",0,0,0,random(4,-4)/(4*2),0,random(4,-4)/(4*6.0),-160,SXF_NOCHECKPOSITION)
		TNT1 AAA 0 A_SpawnItemEx("GargoyleBall2Trail",0,0,0,random(1,-1),random(1,-1),random(1,-1),random(0,359),0)
		TNT1 A 0 Bright A_Explode(40,32,0)
		MIS6 BBBCCCDDDEEEFFF 1 Bright A_FadeOut(0.05)
		Wait
	}
}

Actor IncineratorFireBallSlow : IncineratorFireBall
{
	Speed 15
	States
	{
	Spawn:
		PROJ AAABBBCCCDDD 2 Bright A_CustomMissile("IFBTrail",0,0,0)
		Loop
	}
}

Actor IncineratorFireBall2 : IncineratorFireBall
{
	States
	{
	Death:
		MIS6 B 5 Bright 
		MIS6 CDEF 3 Bright
		Stop
	}
}

Actor IFBTrail
{
	+NOINTERACTION
	RenderStyle Add
	Alpha 0.4
	Scale 0.15
	States
	{
	Spawn:
		TNT1 A 3
		PROJ DEFG 2 Bright
		PROJ HHII 1 Bright A_FadeOut(0.04)
		Wait
	}
}
//**********************************************
Actor IncineratorFireBallBig
{
	PROJECTILE
	+FORCERADIUSDMG
	DamageType "Fire"
	Radius 6
	Height 8
	Speed 30
	Damage 45
	//RenderStyle Add
	SeeSound "h2paladin/purifierpowered"
	DeathSound ""
	States
	{
	Spawn:
		TNT1 AAA 0 A_SpawnItemEx("IFBBTrail",0,0,0,0,frandom(2.4,4.4),frandom(2,-2),0,SXF_NOCHECKPOSITION)
		TNT1 AAA 0 A_SpawnItemEx("IFBBTrail",0,0,0,0,frandom(-2.4,-4.4),frandom(2,-2),0,SXF_NOCHECKPOSITION)
		PROJ A 1 Bright A_SpawnItemEx("IFBBTrail2",0,0,0,-4,0,0,0,SXF_NOCHECKPOSITION)
		Loop
	Crash:	//if hits a nonbleeding actor
	XDeath:	//if hits a bleeding actor
		TNT1 A 0 A_CustomMissile("FireStormFlame",0,0,0)
		TNT1 A 0 A_CustomMissile("FireStormFlame",0,0,45)
		TNT1 A 0 A_CustomMissile("FireStormFlame",0,0,90)
		TNT1 A 0 A_CustomMissile("FireStormFlame",0,0,135)
		TNT1 A 0 A_CustomMissile("FireStormFlame",0,0,-45)
		TNT1 A 0 A_CustomMissile("FireStormFlame",0,0,-90)
		TNT1 A 0 A_CustomMissile("FireStormFlame",0,0,-135)
		TNT1 A 0 A_CustomMissile("FireStormFlame",0,0,180)
	Death:	//if hits a wall or something like that
	CommonDeath:
		TNT1 A 0 A_SpawnItemEx("NewExplosionMediumBig",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		MIS6 B 0 Bright A_Explode(200,160,0)
		MIS6 B 1 Bright A_Explode(32,160,1)
		Stop
	}
}

Actor IFBBTrail
{
	+NOINTERACTION
	RenderStyle Add
	Alpha 0.6
	Scale 0.8
	States
	{
	Spawn:
		PROJ DDDEEEFFFGGGHHHIII 1 Bright A_FadeOut(0.03)
		Stop
	}
}

Actor IFBBTrail2 : IFBBTrail { Speed 0 }

Actor IncineratorDrop : CustomInventory
{
	Inventory.MaxAmount 1
	States
	{
	Use:
		TNT1 A 0
		TNT1 A 0 A_SpawnItemEx("DroppedIncinerator",0,0,32,8,0,0,0,SXF_NOCHECKPOSITION,0)
		Stop
	}
}

Actor DroppedIncinerator
{
	Radius 16
	Height 20
	Scale 0.3
	States
	{
	Spawn:
		07RO A 15
		TNT1 A 0 A_SpawnItemEx("AEoDIncineratorNoAmmo",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER,0)
		Stop
	}
}

Actor AEoDIncineratorNoAmmo : AEoDIncineratorItem
{
	+FLOORCLIP
	+FLOATBOB
	+INVENTORY.IGNORESKILL
	Scale 0.3
	Inventory.Amount 1
	Inventory.PickupMessage "You got the incinerator!"
	Inventory.PickupSound "weaponbuild"
	States
	{
	Spawn:
		07RO ABCDEFGHIJKLMNOPQR 3
		Loop
	Pickup:
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",7) <= 0,"Nothing")
		TNT1 A 0 A_JumpIfInventory("RedMana",25,"Ammo")
		TNT1 A 0 A_GiveInventory("Weapon7Count",1)
		TNT1 A 0 A_GiveInventory("IncineratorDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDIncinerator",1)
		TNT1 A 0 A_TakeInventory("RedMana",25)
		TNT1 A 0 	
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDIncinerator",1,"Ammo")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		TNT1 A 0 ACS_NamedExecute("s798",0,7,85,0)
		Fail
	Ammo:
		TNT1 A 0 A_TakeInventory("RedMana",25)
		TNT1 A 0 A_JumpIfInventory("AEoDIncinerator",1,2)
		TNT1 A 0 A_GiveInventory("Weapon7Count",1)
		TNT1 A 0 A_GiveInventory("IncineratorDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDIncinerator",1)
		Stop
	}
}

//==================================================================================
//==================================================================================

//==================================================================================
//==================================================================================

Actor AEoDGuardianHeadItem : CustomInventory 6135
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL
	Scale 0.6
	Inventory.Amount 1
	Inventory.PickupMessage "You picked up a severed Guardian head!"
	Inventory.PickupSound "weaponbuild"
	States
	{
	Spawn:
		GUAH A -1
		Loop
	Pickup:
		TNT1 A 0 A_JumpIfInventory("AEoDGuardianHead",1,"Ammo")
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",7) <= 0,"Nothing")
		TNT1 A 0 A_GiveInventory("Weapon7Count",1)
		TNT1 A 0 A_GiveInventory("GuardianHeadDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDGuardianHead",1)
		TNT1 A 0 	
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDGuardianHead",1,"Ammo")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		TNT1 A 0 ACS_NamedExecute("s798",0,7,92,0)
		Fail
	Ammo:
		TNT1 A 0 A_GiveInventory("AEoDGuardianHead",1)
		Stop
	}
}

Actor AEoDGuardianHead : Weapon // 6135
{
	+FLOORCLIP
	+WEAPON.NOALERT
	+INVENTORY.IGNORESKILL
	+WEAPON.CHEATNOTWEAPON
	Weapon.AmmoType1 "RedMana"
	Weapon.AmmoGive1 25
	Weapon.AmmoUse1 2
	Weapon.SelectionOrder 11955
	Inventory.PickupMessage "You picked up a severed Guardian head!"
	Inventory.PickupSound "weaponbuild"
	Weapon.UpSound "weapons/draw"
	Scale 0.6
	Tag "Guardian head"
	States
	{
	Spawn:
		GUAH A 3
		Loop
	Ready:
		GUAH B 0 A_JumpIfInventory("GHeadCount",2,"Ready3")
		GUAH B 0 A_JumpIfInventory("GHeadCount",1,"Ready2")
	Ready1:
		GUAH B 1 A_WeaponReady
		Goto Ready1
	Ready2:
		GUAH C 1 A_WeaponReady
		Goto Ready2
	Ready3:
		GUAH D 1 A_WeaponReady
		Goto Ready3
	Deselect:
		GUAH B 0 A_JumpIfInventory("GHeadCount",2,"Deselect3")
		GUAH B 0 A_JumpIfInventory("GHeadCount",1,"Deselect2")
	Deselect1:
		TNT1 A 0 	
		GUAH B 1 A_Lower
		TNT1 AA 0 A_Lower
		Goto Deselect1
	Deselect2:
		TNT1 A 0 	
		GUAH C 1 A_Lower
		TNT1 AA 0 A_Lower
		Goto Deselect2
	Deselect3:
		TNT1 A 0 	
		GUAH D 1 A_Lower
		TNT1 AA 0 A_Lower
		Goto Deselect3
	Select:
		GUAH B 0 A_JumpIfInventory("GHeadCount",2,"Select3")
		GUAH B 0 A_JumpIfInventory("GHeadCount",1,"Select2")
	Select1:
		TNT1 A 0 	
		GUAH B 1 A_Raise
		TNT1 AA 0 A_Raise
		Goto Select1
	Select2:
		TNT1 A 0 	
		GUAH C 1 A_Raise
		TNT1 AA 0 A_Raise
		Goto Select2
	Select3:
		TNT1 A 0 	
		GUAH D 1 A_Raise
		TNT1 AA 0 A_Raise
		Goto Select3
	Fire:
		GUAH B 0 A_AlertMonsters
		GUAH B 0 A_JumpIfInventory("GHeadCount",2,"Fire3")
		GUAH B 0 A_JumpIfInventory("GHeadCount",1,"Fire2")
	Fire1:
		GUAH B 0 A_JumpIfInventory("GHeadMode1Check",5,4)
		GUAH B 3 Bright A_FireCustomMissile("GuardianHeadFire",0,0,4,4)
		GUAH B 0 A_GiveInventory("GHeadMode1Check",1)
		GUAH B 0 A_Jump(256,3)
		GUAH B 0 A_TakeInventory("GHeadMode1Check",5)
		GUAH B 3 Bright A_FireCustomMissile("GuardianHeadFire",0,1,4,4)
		GUAH B 0 A_ReFire
		Goto Ready
	Fire2:
		GUAH C 0 A_JumpIfInventory("GHeadSoundCount",2,3)
		GUAH C 0 A_GiveInventory("GHeadSoundCount",1)
		GUAH C 0 A_Jump(256,3)
		GUAH C 0 A_PlayWeaponSound("swguardian/fire")
		GUAH C 0 A_TakeInventory("GHeadSoundCount",2)
		GUAH C 0 A_JumpIfNoAmmo(135)
		GUAH C 0 A_SpawnItemEx("GuardianHeadFireShield",75,0,32,0,0,0,0,SXF_NOCHECKPOSITION,0)
		GUAH C 0 A_SpawnItemEx("GuardianHeadFireShield",-75,0,32,0,0,0,0,SXF_NOCHECKPOSITION,0)
		GUAH C 0 A_SpawnItemEx("GuardianHeadFireShield",0,75,32,0,0,0,0,SXF_NOCHECKPOSITION,0)
		GUAH C 0 A_SpawnItemEx("GuardianHeadFireShield",0,-75,32,0,0,0,0,SXF_NOCHECKPOSITION,0)
		GUAH C 0 A_SpawnItemEx("GuardianHeadFireShield",55,55,32,0,0,0,0,SXF_NOCHECKPOSITION,0)
		GUAH C 0 A_SpawnItemEx("GuardianHeadFireShield",55,-55,32,0,0,0,0,SXF_NOCHECKPOSITION,0)
		GUAH C 0 A_SpawnItemEx("GuardianHeadFireShield",-55,55,32,0,0,0,0,SXF_NOCHECKPOSITION,0)
		GUAH C 0 A_SpawnItemEx("GuardianHeadFireShield",-55,-55,32,0,0,0,0,SXF_NOCHECKPOSITION,0)
		GUAH C 0 A_SpawnItemEx("GuardianHeadFireShield",70,30,32,0,0,0,0,SXF_NOCHECKPOSITION,0)
		GUAH C 0 A_SpawnItemEx("GuardianHeadFireShield",-70,30,32,0,0,0,0,SXF_NOCHECKPOSITION,0)
		GUAH C 0 A_SpawnItemEx("GuardianHeadFireShield",70,-30,32,0,0,0,0,SXF_NOCHECKPOSITION,0)
		GUAH C 0 A_SpawnItemEx("GuardianHeadFireShield",-70,-30,32,0,0,0,0,SXF_NOCHECKPOSITION,0)
		GUAH C 0 A_SpawnItemEx("GuardianHeadFireShield",30,70,32,0,0,0,0,SXF_NOCHECKPOSITION,0)
		GUAH C 0 A_SpawnItemEx("GuardianHeadFireShield",-30,70,32,0,0,0,0,SXF_NOCHECKPOSITION,0)
		GUAH C 0 A_SpawnItemEx("GuardianHeadFireShield",30,-70,32,0,0,0,0,SXF_NOCHECKPOSITION,0)
		GUAH C 1 Bright A_SpawnItemEx("GuardianHeadFireShield",-30,-70,32,0,0,0,0,SXF_NOCHECKPOSITION,0)
		GUAH C 0 A_SpawnItemEx("GuardianHeadFireShield",75,4,32,0,0,0,0,SXF_NOCHECKPOSITION,0)
		GUAH C 0 A_SpawnItemEx("GuardianHeadFireShield",-75,-4,32,0,0,0,0,SXF_NOCHECKPOSITION,0)
		GUAH C 0 A_SpawnItemEx("GuardianHeadFireShield",4,-75,32,0,0,0,0,SXF_NOCHECKPOSITION,0)
		GUAH C 0 A_SpawnItemEx("GuardianHeadFireShield",-4,75,32,0,0,0,0,SXF_NOCHECKPOSITION,0)
		GUAH C 0 A_SpawnItemEx("GuardianHeadFireShield",69,34,32,0,0,0,0,SXF_NOCHECKPOSITION,0)
		GUAH C 0 A_SpawnItemEx("GuardianHeadFireShield",-69,-34,32,0,0,0,0,SXF_NOCHECKPOSITION,0)
		GUAH C 0 A_SpawnItemEx("GuardianHeadFireShield",-34,69,32,0,0,0,0,SXF_NOCHECKPOSITION,0)
		GUAH C 0 A_SpawnItemEx("GuardianHeadFireShield",34,-69,32,0,0,0,0,SXF_NOCHECKPOSITION,0)
		GUAH C 0 A_SpawnItemEx("GuardianHeadFireShield",53,58,32,0,0,0,0,SXF_NOCHECKPOSITION,0)
		GUAH C 0 A_SpawnItemEx("GuardianHeadFireShield",-53,-58,32,0,0,0,0,SXF_NOCHECKPOSITION,0)
		GUAH C 0 A_SpawnItemEx("GuardianHeadFireShield",58,-53,32,0,0,0,0,SXF_NOCHECKPOSITION,0)
		GUAH C 0 A_SpawnItemEx("GuardianHeadFireShield",-58,53,32,0,0,0,0,SXF_NOCHECKPOSITION,0)
		GUAH C 0 A_SpawnItemEx("GuardianHeadFireShield",27,72,32,0,0,0,0,SXF_NOCHECKPOSITION,0)
		GUAH C 0 A_SpawnItemEx("GuardianHeadFireShield",-27,-72,32,0,0,0,0,SXF_NOCHECKPOSITION,0)
		GUAH C 0 A_SpawnItemEx("GuardianHeadFireShield",72,-27,32,0,0,0,0,SXF_NOCHECKPOSITION,0)
		GUAH C 1 Bright A_SpawnItemEx("GuardianHeadFireShield",-72,27,32,0,0,0,0,SXF_NOCHECKPOSITION,0)
		GUAH C 0 A_SpawnItemEx("GuardianHeadFireShield",75,8,32,0,0,0,0,SXF_NOCHECKPOSITION,0)
		GUAH C 0 A_SpawnItemEx("GuardianHeadFireShield",-75,-8,32,0,0,0,0,SXF_NOCHECKPOSITION,0)
		GUAH C 0 A_SpawnItemEx("GuardianHeadFireShield",8,-75,32,0,0,0,0,SXF_NOCHECKPOSITION,0)
		GUAH C 0 A_SpawnItemEx("GuardianHeadFireShield",-8,75,32,0,0,0,0,SXF_NOCHECKPOSITION,0)
		GUAH C 0 A_SpawnItemEx("GuardianHeadFireShield",67,37,32,0,0,0,0,SXF_NOCHECKPOSITION,0)
		GUAH C 0 A_SpawnItemEx("GuardianHeadFireShield",-67,-37,32,0,0,0,0,SXF_NOCHECKPOSITION,0)
		GUAH C 0 A_SpawnItemEx("GuardianHeadFireShield",-37,67,32,0,0,0,0,SXF_NOCHECKPOSITION,0)
		GUAH C 0 A_SpawnItemEx("GuardianHeadFireShield",37,-67,32,0,0,0,0,SXF_NOCHECKPOSITION,0)
		GUAH C 0 A_SpawnItemEx("GuardianHeadFireShield",50,60,32,0,0,0,0,SXF_NOCHECKPOSITION,0)
		GUAH C 0 A_SpawnItemEx("GuardianHeadFireShield",-50,-60,32,0,0,0,0,SXF_NOCHECKPOSITION,0)
		GUAH C 0 A_SpawnItemEx("GuardianHeadFireShield",60,-50,32,0,0,0,0,SXF_NOCHECKPOSITION,0)
		GUAH C 0 A_SpawnItemEx("GuardianHeadFireShield",-60,50,32,0,0,0,0,SXF_NOCHECKPOSITION,0)
		GUAH C 0 A_SpawnItemEx("GuardianHeadFireShield",23,73,32,0,0,0,0,SXF_NOCHECKPOSITION,0)
		GUAH C 0 A_SpawnItemEx("GuardianHeadFireShield",-23,-73,32,0,0,0,0,SXF_NOCHECKPOSITION,0)
		GUAH C 0 A_SpawnItemEx("GuardianHeadFireShield",73,-23,32,0,0,0,0,SXF_NOCHECKPOSITION,0)
		GUAH C 1 Bright A_SpawnItemEx("GuardianHeadFireShield",-73,23,32,0,0,0,0,SXF_NOCHECKPOSITION,0)
		GUAH C 0 A_SpawnItemEx("GuardianHeadFireShield",75,12,32,0,0,0,0,SXF_NOCHECKPOSITION,0)
		GUAH C 0 A_SpawnItemEx("GuardianHeadFireShield",-75,-12,32,0,0,0,0,SXF_NOCHECKPOSITION,0)
		GUAH C 0 A_SpawnItemEx("GuardianHeadFireShield",12,-75,32,0,0,0,0,SXF_NOCHECKPOSITION,0)
		GUAH C 0 A_SpawnItemEx("GuardianHeadFireShield",-12,75,32,0,0,0,0,SXF_NOCHECKPOSITION,0)
		GUAH C 0 A_SpawnItemEx("GuardianHeadFireShield",65,41,32,0,0,0,0,SXF_NOCHECKPOSITION,0)
		GUAH C 0 A_SpawnItemEx("GuardianHeadFireShield",-65,-41,32,0,0,0,0,SXF_NOCHECKPOSITION,0)
		GUAH C 0 A_SpawnItemEx("GuardianHeadFireShield",-41,65,32,0,0,0,0,SXF_NOCHECKPOSITION,0)
		GUAH C 0 A_SpawnItemEx("GuardianHeadFireShield",41,-65,32,0,0,0,0,SXF_NOCHECKPOSITION,0)
		GUAH C 0 A_SpawnItemEx("GuardianHeadFireShield",47,62,32,0,0,0,0,SXF_NOCHECKPOSITION,0)
		GUAH C 0 A_SpawnItemEx("GuardianHeadFireShield",-47,-62,32,0,0,0,0,SXF_NOCHECKPOSITION,0)
		GUAH C 0 A_SpawnItemEx("GuardianHeadFireShield",62,-47,32,0,0,0,0,SXF_NOCHECKPOSITION,0)
		GUAH C 0 A_SpawnItemEx("GuardianHeadFireShield",-62,47,32,0,0,0,0,SXF_NOCHECKPOSITION,0)
		GUAH C 0 A_SpawnItemEx("GuardianHeadFireShield",20,74,32,0,0,0,0,SXF_NOCHECKPOSITION,0)
		GUAH C 0 A_SpawnItemEx("GuardianHeadFireShield",-20,-74,32,0,0,0,0,SXF_NOCHECKPOSITION,0)
		GUAH C 0 A_SpawnItemEx("GuardianHeadFireShield",74,-20,32,0,0,0,0,SXF_NOCHECKPOSITION,0)
		GUAH C 1 Bright A_SpawnItemEx("GuardianHeadFireShield",-74,20,32,0,0,0,0,SXF_NOCHECKPOSITION,0)
		GUAH C 0 A_SpawnItemEx("GuardianHeadFireShield",74,16,32,0,0,0,0,SXF_NOCHECKPOSITION,0)
		GUAH C 0 A_SpawnItemEx("GuardianHeadFireShield",-74,16,32,0,0,0,0,SXF_NOCHECKPOSITION,0)
		GUAH C 0 A_SpawnItemEx("GuardianHeadFireShield",74,-16,32,0,0,0,0,SXF_NOCHECKPOSITION,0)
		GUAH C 0 A_SpawnItemEx("GuardianHeadFireShield",-74,-16,32,0,0,0,0,SXF_NOCHECKPOSITION,0)
		GUAH C 0 A_SpawnItemEx("GuardianHeadFireShield",16,74,32,0,0,0,0,SXF_NOCHECKPOSITION,0)
		GUAH C 0 A_SpawnItemEx("GuardianHeadFireShield",-16,74,32,0,0,0,0,SXF_NOCHECKPOSITION,0)
		GUAH C 0 A_SpawnItemEx("GuardianHeadFireShield",16,-74,32,0,0,0,0,SXF_NOCHECKPOSITION,0)
		GUAH C 0 A_SpawnItemEx("GuardianHeadFireShield",-16,-74,32,0,0,0,0,SXF_NOCHECKPOSITION,0)
		GUAH C 0 A_SpawnItemEx("GuardianHeadFireShield",44,63,32,0,0,0,0,SXF_NOCHECKPOSITION,0)
		GUAH C 0 A_SpawnItemEx("GuardianHeadFireShield",-44,63,32,0,0,0,0,SXF_NOCHECKPOSITION,0)
		GUAH C 0 A_SpawnItemEx("GuardianHeadFireShield",44,-63,32,0,0,0,0,SXF_NOCHECKPOSITION,0)
		GUAH C 0 A_SpawnItemEx("GuardianHeadFireShield",-44,-63,32,0,0,0,0,SXF_NOCHECKPOSITION,0)
		GUAH C 0 A_SpawnItemEx("GuardianHeadFireShield",63,44,32,0,0,0,0,SXF_NOCHECKPOSITION,0)
		GUAH C 0 A_SpawnItemEx("GuardianHeadFireShield",-63,44,32,0,0,0,0,SXF_NOCHECKPOSITION,0)
		GUAH C 0 A_SpawnItemEx("GuardianHeadFireShield",63,-44,32,0,0,0,0,SXF_NOCHECKPOSITION,0)
		GUAH C 1 Bright A_SpawnItemEx("GuardianHeadFireShield",-63,-44,32,0,0,0,0,SXF_NOCHECKPOSITION,0)
		GUAH C 0 A_SpawnItemEx("GuardianHeadFireShield",74,20,32,0,0,0,0,SXF_NOCHECKPOSITION,0)
		GUAH C 0 A_SpawnItemEx("GuardianHeadFireShield",-74,-20,32,0,0,0,0,SXF_NOCHECKPOSITION,0)
		GUAH C 0 A_SpawnItemEx("GuardianHeadFireShield",20,-74,32,0,0,0,0,SXF_NOCHECKPOSITION,0)
		GUAH C 0 A_SpawnItemEx("GuardianHeadFireShield",-20,74,32,0,0,0,0,SXF_NOCHECKPOSITION,0)
		GUAH C 0 A_SpawnItemEx("GuardianHeadFireShield",62,47,32,0,0,0,0,SXF_NOCHECKPOSITION,0)
		GUAH C 0 A_SpawnItemEx("GuardianHeadFireShield",-62,-47,32,0,0,0,0,SXF_NOCHECKPOSITION,0)
		GUAH C 0 A_SpawnItemEx("GuardianHeadFireShield",-47,62,32,0,0,0,0,SXF_NOCHECKPOSITION,0)
		GUAH C 0 A_SpawnItemEx("GuardianHeadFireShield",47,-62,32,0,0,0,0,SXF_NOCHECKPOSITION,0)
		GUAH C 0 A_SpawnItemEx("GuardianHeadFireShield",41,65,32,0,0,0,0,SXF_NOCHECKPOSITION,0)
		GUAH C 0 A_SpawnItemEx("GuardianHeadFireShield",-41,-65,32,0,0,0,0,SXF_NOCHECKPOSITION,0)
		GUAH C 0 A_SpawnItemEx("GuardianHeadFireShield",65,-41,32,0,0,0,0,SXF_NOCHECKPOSITION,0)
		GUAH C 0 A_SpawnItemEx("GuardianHeadFireShield",-65,41,32,0,0,0,0,SXF_NOCHECKPOSITION,0)
		GUAH C 0 A_SpawnItemEx("GuardianHeadFireShield",12,75,32,0,0,0,0,SXF_NOCHECKPOSITION,0)
		GUAH C 0 A_SpawnItemEx("GuardianHeadFireShield",-12,-75,32,0,0,0,0,SXF_NOCHECKPOSITION,0)
		GUAH C 0 A_SpawnItemEx("GuardianHeadFireShield",75,-12,32,0,0,0,0,SXF_NOCHECKPOSITION,0)
		GUAH C 1 Bright A_SpawnItemEx("GuardianHeadFireShield",-75,12,32,0,0,0,0,SXF_NOCHECKPOSITION,0)
		GUAH C 0 A_SpawnItemEx("GuardianHeadFireShield",8,75,32,0,0,0,0,SXF_NOCHECKPOSITION,0)
		GUAH C 0 A_SpawnItemEx("GuardianHeadFireShield",-8,-75,32,0,0,0,0,SXF_NOCHECKPOSITION,0)
		GUAH C 0 A_SpawnItemEx("GuardianHeadFireShield",75,-8,32,0,0,0,0,SXF_NOCHECKPOSITION,0)
		GUAH C 0 A_SpawnItemEx("GuardianHeadFireShield",-75,8,32,0,0,0,0,SXF_NOCHECKPOSITION,0)
		GUAH C 0 A_SpawnItemEx("GuardianHeadFireShield",37,67,32,0,0,0,0,SXF_NOCHECKPOSITION,0)
		GUAH C 0 A_SpawnItemEx("GuardianHeadFireShield",-37,-67,32,0,0,0,0,SXF_NOCHECKPOSITION,0)
		GUAH C 0 A_SpawnItemEx("GuardianHeadFireShield",-67,37,32,0,0,0,0,SXF_NOCHECKPOSITION,0)
		GUAH C 0 A_SpawnItemEx("GuardianHeadFireShield",67,-37,32,0,0,0,0,SXF_NOCHECKPOSITION,0)
		GUAH C 0 A_SpawnItemEx("GuardianHeadFireShield",60,50,32,0,0,0,0,SXF_NOCHECKPOSITION,0)
		GUAH C 0 A_SpawnItemEx("GuardianHeadFireShield",-60,-50,32,0,0,0,0,SXF_NOCHECKPOSITION,0)
		GUAH C 0 A_SpawnItemEx("GuardianHeadFireShield",50,-60,32,0,0,0,0,SXF_NOCHECKPOSITION,0)
		GUAH C 0 A_SpawnItemEx("GuardianHeadFireShield",-50,60,32,0,0,0,0,SXF_NOCHECKPOSITION,0)
		GUAH C 0 A_SpawnItemEx("GuardianHeadFireShield",73,23,32,0,0,0,0,SXF_NOCHECKPOSITION,0)
		GUAH C 0 A_SpawnItemEx("GuardianHeadFireShield",-73,-23,32,0,0,0,0,SXF_NOCHECKPOSITION,0)
		GUAH C 0 A_SpawnItemEx("GuardianHeadFireShield",23,-73,32,0,0,0,0,SXF_NOCHECKPOSITION,0)
		GUAH C 1 Bright A_SpawnItemEx("GuardianHeadFireShield",-23,73,32,0,0,0,0,SXF_NOCHECKPOSITION,0)
		GUAH C 0 A_SpawnItemEx("GuardianHeadFireShield",4,75,32,0,0,0,0,SXF_NOCHECKPOSITION,0)
		GUAH C 0 A_SpawnItemEx("GuardianHeadFireShield",-4,-75,32,0,0,0,0,SXF_NOCHECKPOSITION,0)
		GUAH C 0 A_SpawnItemEx("GuardianHeadFireShield",75,-4,32,0,0,0,0,SXF_NOCHECKPOSITION,0)
		GUAH C 0 A_SpawnItemEx("GuardianHeadFireShield",-75,4,32,0,0,0,0,SXF_NOCHECKPOSITION,0)
		GUAH C 0 A_SpawnItemEx("GuardianHeadFireShield",34,69,32,0,0,0,0,SXF_NOCHECKPOSITION,0)
		GUAH C 0 A_SpawnItemEx("GuardianHeadFireShield",-34,-69,32,0,0,0,0,SXF_NOCHECKPOSITION,0)
		GUAH C 0 A_SpawnItemEx("GuardianHeadFireShield",-69,34,32,0,0,0,0,SXF_NOCHECKPOSITION,0)
		GUAH C 0 A_SpawnItemEx("GuardianHeadFireShield",69,-34,32,0,0,0,0,SXF_NOCHECKPOSITION,0)
		GUAH C 0 A_SpawnItemEx("GuardianHeadFireShield",58,53,32,0,0,0,0,SXF_NOCHECKPOSITION,0)
		GUAH C 0 A_SpawnItemEx("GuardianHeadFireShield",-58,-53,32,0,0,0,0,SXF_NOCHECKPOSITION,0)
		GUAH C 0 A_SpawnItemEx("GuardianHeadFireShield",53,-58,32,0,0,0,0,SXF_NOCHECKPOSITION,0)
		GUAH C 0 A_SpawnItemEx("GuardianHeadFireShield",-53,58,32,0,0,0,0,SXF_NOCHECKPOSITION,0)
		GUAH C 0 A_SpawnItemEx("GuardianHeadFireShield",72,27,32,0,0,0,0,SXF_NOCHECKPOSITION,0)
		GUAH C 0 A_SpawnItemEx("GuardianHeadFireShield",-72,-27,32,0,0,0,0,SXF_NOCHECKPOSITION,0)
		GUAH C 0 A_SpawnItemEx("GuardianHeadFireShield",27,-72,32,0,0,0,0,SXF_NOCHECKPOSITION,0)
		GUAH C 1 Bright A_SpawnItemEx("GuardianHeadFireShield",-27,72,32,0,0,0,0,SXF_NOCHECKPOSITION,0)
		GUAH C 0 A_JumpIfInventory("GHeadAmmoCount",2,3)
		GUAH C 0 A_GiveInventory("GHeadAmmoCount",1)
		GUAH C 0 A_Jump(256,3)
		GUAD C 0 A_FireCustomMissile("AmmoUser",0,1,0,0)
		GUAH C 0 A_TakeInventory("GHeadAmmoCount",2)
		GUAH C 0 A_ReFire
		Goto Ready
	Fire3:
		GUAH D 0 A_PlayWeaponSound("minotaur/attack1")
		GUAH D 0 A_FireCustomMissile("GuardianHeadFloorAttack",0,0,0)
		GUAH D 0 A_FireCustomMissile("GuardianHeadFloorAttack2",-5,0,8,0)
		GUAH D 7 Bright A_FireCustomMissile("GuardianHeadFloorAttack2",5,0,-8,0)
		GUAH DDD 0 A_FireCustomMissile("AmmoUser",0,1,0,0)
		GUAH D 28
		Goto Ready
	AltFire:
		GUAH B 0 A_JumpIfInventory("GHeadCount",2,"AltFire3")
		GUAH B 0 A_JumpIfInventory("GHeadCount",1,"AltFire2")
	AltFire1:
		GUAH C 0 A_GiveInventory("GHeadCount",1)
		GUAH C 1 A_PlayWeaponSound("weapons/guardianhead/switch")
		GUAH C 12
		Goto Ready
	AltFire2:
		GUAH D 0 A_GiveInventory("GHeadCount",1)
		GUAH D 1 A_PlayWeaponSound("weapons/guardianhead/switch")
		GUAH D 12
		Goto Ready
	AltFire3:
		GUAH B 0 A_TakeInventory("GHeadCount",2)
		GUAH B 1 A_PlayWeaponSound("weapons/guardianhead/switch")
		GUAH B 12
		Goto Ready
	}
}

Actor GHeadCount : Inventory { Inventory.MaxAmount 3 }

Actor GHeadSoundCount : Inventory { Inventory.MaxAmount 2 }

Actor GHeadAmmoCount : Inventory { Inventory.MaxAmount 2 }

Actor GHeadMode1Check : Inventory { Inventory.MaxAmount 5 }

Actor GuardianHeadFire
{
	Projectile
	Radius 8
	Height 10
	Speed 26
	Damage 8
	DamageType "Fire"
	RenderStyle Add
	Scale 0.25
	SeeSound "swguardian/fire"
	States
	{
	Spawn:
		GDFX A 1 Bright A_CustomMissile("GuardianHeadFireTrail",0,0,0)
		GDFX A 1
		GDFX A 1 Bright A_CustomMissile("GuardianHeadFireTrail",0,0,0)
		GDFX B 1
		GDFX B 1 Bright A_CustomMissile("GuardianHeadFireTrail",0,0,0)
		GDFX B 1
		GDFX C 1 Bright A_CustomMissile("GuardianHeadFireTrail",0,0,0)
		GDFX C 1
		GDFX C 1 Bright A_CustomMissile("GuardianHeadFireTrail",0,0,0)
		GDFX D 1
		GDFX D 1 Bright A_CustomMissile("GuardianHeadFireTrail",0,0,0)
		GDFX D 1
		Loop
	Death:
		GDFX EFGHI 3 Bright
		GDFX I 1 Bright A_FadeOut
		Wait
	}
}

Actor GuardianHeadFireTrail
{
	Projectile
	+NOCLIP
	Speed 0
	RenderStyle Add
	Alpha 0.8
	Scale 0.25
	States
	{
	Spawn:
		GDFX ACBD 2 A_FadeOut(0.08)
		Loop
	}
}

Actor GuardianHeadFireShield
{
	PROJECTILE
	+RIPPER	RipperLevel 1
	DamageType "Fire"
	+NOTIMEFREEZE
	+STRIFEDAMAGE
	+NODAMAGETHRUST
	+BLOODLESSIMPACT
	RenderStyle Add
	Scale 0.33
	Radius 8
	Height 10
	Speed 0
	Damage 2
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_Jump(256,1,3,5,7)
		GDFX AB 1
		Stop
		
		GDFX BC 1
		Stop
		
		GDFX CD 1
		Stop
		
		GDFX DA 1
		Stop
	}
}

Actor GuardianHeadFloorAttack
{
	Projectile
	Speed 22
	Radius 12
	Height 12
	Damage 22
	DamageType "Fire"
	+RIPPER	RipperLevel 1
	+BLOODLESSIMPACT
	+FLOORHUGGER
	+NODAMAGETHRUST
	States
	{
	Spawn:
		TNT1 A 4
		TNT1 A 0 A_PlaySound("shadowninja/attack")
		TNT1 A 0
		TNT1 A 0 A_SpawnItemEx("SNinjaFloorFire",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION,0)
		TNT1 A 0
		Loop
	Death:
		TNT1 A 1
		Stop
	}
}

Actor GuardianHeadFloorAttack2 : GuardianHeadFloorAttack
{
	States
	{
	Spawn:
		TNT1 A 4
		TNT1 A 0
		TNT1 A 0 A_SpawnItemEx("SNinjaFloorFire",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION,0)
		TNT1 A 0
		Loop
	Death:
		TNT1 A 1
		Stop
	}
}

Actor GuardianHeadDrop : CustomInventory
{
	Inventory.MaxAmount 1
	States
	{
	Use:
		TNT1 A 0
		TNT1 A 0 A_SpawnItemEx("DroppedGuardianHead",0,0,32,8,0,0,0,SXF_NOCHECKPOSITION,0)
		Stop
	}
}

Actor DroppedGuardianHead
{
	Radius 16
	Height 20
	Scale 0.6
	States
	{
	Spawn:
		GUAH A 15
		TNT1 A 0 A_SpawnItemEx("AEoDGuardianHeadNoAmmo",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER,0)
		Stop
	}
}

Actor AEoDGuardianHeadNoAmmo : AEoDGuardianHeadItem
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL
	Scale 0.6
	Inventory.Amount 1
	Inventory.PickupMessage "You picked up a severed Guardian head!"
	Inventory.PickupSound "weaponbuild"
	States
	{
	Spawn:
		GUAH A -1
		Loop
	Pickup:
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",7) <= 0,"Nothing")
		TNT1 A 0 A_JumpIfInventory("RedMana",25,"Ammo")
		TNT1 A 0 A_GiveInventory("Weapon7Count",1)
		TNT1 A 0 A_GiveInventory("GuardianHeadDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDGuardianHead",1)
		TNT1 A 0 A_TakeInventory("RedMana",25)
		TNT1 A 0 	
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDGuardianHead",1,"Ammo")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		TNT1 A 0 ACS_NamedExecute("s798",0,7,92,0)
		Fail
	Ammo:
		TNT1 A 0 A_TakeInventory("RedMana",25)
		TNT1 A 0 A_JumpIfInventory("AEoDGuardianHead",1,2)
		TNT1 A 0 A_GiveInventory("Weapon7Count",1)
		TNT1 A 0 A_GiveInventory("GuardianHeadDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDGuardianHead",1)
		Stop
	}
}

//==================================================================================
//==================================================================================

//==================================================================================
//==================================================================================

Actor AEoDIceWandItem : CustomInventory 6076
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL
	+FLOATBOB
	Inventory.Amount 1
	Inventory.PickupMessage "You discovered the ice wand!"
	Inventory.PickupSound "weapons/icewand/pickup"
	Scale 0.11
	States
	{
	Spawn:
		IWND K -1
		Loop
	Pickup:
		TNT1 A 0 A_JumpIfInventory("AEoDIceWand",1,"Ammo")
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",7) <= 0,"Nothing")
		TNT1 A 0 A_GiveInventory("Weapon7Count",1)
		TNT1 A 0 A_GiveInventory("IceWandDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDIceWand",1)
		TNT1 A 0 	
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDIceWand",1,"Ammo")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		TNT1 A 0 ACS_NamedExecute("s798",0,7,90,0)
		Fail
	Ammo:
		TNT1 A 0 A_GiveInventory("AEoDIceWand",1)
		Stop
	}
}

Actor AEoDIceWand : Weapon // 6076
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL
	+WEAPON.CHEATNOTWEAPON
	+FLOATBOB
	Weapon.AmmoType1 "GreenMana"
	Weapon.AmmoType2 "RedMana"
	Weapon.AmmoGive1 40
	Weapon.AmmoGive2 12
	Weapon.AmmoUse1 1
	Weapon.AmmoUse2 8
	Weapon.SelectionOrder 10050
	Inventory.PickupMessage "You discovered the ice wand!"
	Inventory.PickupSound "weapons/icewand/pickup"
	weapon.upsound "weapons/draw"
	Scale 0.11
	Tag "Ice wand"
	States
	{ 
	Spawn: 
		IWND K -1
		Loop
	Ready:
		TNT1 A 0 A_PlaySound("weapons/icewand/idle", 7, 0.3, 1)
		TNT1 A 0 A_FireCustomMissile("IceWandSmokeSpawner",0,0,8,7)
		IWND AA 1 A_WeaponReady
		Loop
	Deselect:
		TNT1 A 0 	
		IWND A 0 A_StopSound(7)
		IWND A 1 A_Lower
		TNT1 AA 0 A_Lower
		Loop
	Select: 
		TNT1 A 0 	
		IWND A 1 A_Raise
		TNT1 AA 0 A_Raise 
		Loop
	Fire:
		TNT1 A 0 A_JumpIfNoAmmo(1)
		TNT1 A 0 A_PlaySound("weapons/icewand/fire", CHAN_WEAPON, 0.7, 1)
		TNT1 A 0 //ACS_NamedExecute("s851",0,random(5,-5),random(-3,3),0)
		TNT1 A 0 A_FireCustomMissile("IceWandSmokeSpawner",0,0,8,7)
		IWND B 1 A_FireCustomMissile("FreezeVapor", 0, 1, 5, 8)
		TNT1 A 0 //ACS_NamedExecute("s851",0,random(5,-5),random(-3,3),0)
		IWND B 1 A_FireCustomMissile("FreezeVapor2", 0, 0, 5, 8)
		TNT1 A 0 //ACS_NamedExecute("s851",0,random(5,-5),random(-3,3),0)
		TNT1 A 0 A_FireCustomMissile("IceWandSmokeSpawner",0,0,8,7)
		IWND C 1 A_FireCustomMissile("FreezeVapor2", 0, 0, 5, 8)
		TNT1 A 0 //ACS_NamedExecute("s851",0,random(5,-5),random(-3,3),0)
		IWND C 1 A_FireCustomMissile("FreezeVapor2", 0, 0, 5, 8)
		TNT1 A 0 //ACS_NamedExecute("s851",0,random(5,-5),random(-3,3),0)
		TNT1 A 0 A_FireCustomMissile("IceWandSmokeSpawner",0,0,8,7)
		IWND D 1 A_FireCustomMissile("FreezeVapor", 0, 0, 5, 8)
		TNT1 A 0 //ACS_NamedExecute("s851",0,random(5,-5),random(-3,3),0)
		IWND D 1 A_FireCustomMissile("FreezeVapor2", 0, 1, 5, 8)
		TNT1 A 0 //ACS_NamedExecute("s851",0,random(5,-5),random(-3,3),0)
		TNT1 A 0 A_FireCustomMissile("IceWandSmokeSpawner",0,0,8,7)
		IWND E 1 A_FireCustomMissile("FreezeVapor2", 0, 0, 5, 8)
		TNT1 A 0 //ACS_NamedExecute("s851",0,random(5,-5),random(-3,3),0)
		IWND E 1 A_FireCustomMissile("FreezeVapor2", 0, 0, 5, 8)
		TNT1 A 0 //ACS_NamedExecute("s851",0,random(5,-5),random(-3,3),0)
		TNT1 A 0 A_FireCustomMissile("IceWandSmokeSpawner",0,0,8,7)
		IWND E 1 A_FireCustomMissile("FreezeVapor", 0, 0, 5, 8)
		TNT1 A 0 //ACS_NamedExecute("s851",0,random(5,-5),random(-3,3),0)
		IWND E 1 A_FireCustomMissile("FreezeVapor2", 0, 0, 5, 8)
		TNT1 A 0 //ACS_NamedExecute("s851",0,random(5,-5),random(-3,3),0)
		TNT1 A 0 A_FireCustomMissile("IceWandSmokeSpawner",0,0,8,7)
		IWND E 1 A_FireCustomMissile("FreezeVapor2", 0, 1, 5, 8)
		TNT1 A 0 //ACS_NamedExecute("s851",0,random(5,-5),random(-3,3),0)
		IWND E 1 A_FireCustomMissile("FreezeVapor2", 0, 0, 5, 8)
		TNT1 A 0 //ACS_NamedExecute("s851",0,random(5,-5),random(-3,3),0)
		TNT1 A 0 A_FireCustomMissile("IceWandSmokeSpawner",0,0,8,7)
		IWND E 1 A_FireCustomMissile("FreezeVapor2", 0, 0, 5, 8)
		TNT1 A 0 //ACS_NamedExecute("s851",0,random(5,-5),random(-3,3),0)
		IWND E 1 A_FireCustomMissile("FreezeVapor2", 0, 0, 5, 8)
		TNT1 A 0 //ACS_NamedExecute("s851",0,random(5,-5),random(-3,3),0)
		TNT1 A 0 A_FireCustomMissile("IceWandSmokeSpawner",0,0,8,7)
		IWND E 1 A_FireCustomMissile("FreezeVapor2", 0, 0, 5, 8)
		TNT1 A 0 //ACS_NamedExecute("s851",0,random(5,-5),random(-3,3),0)
		IWND E 1 A_FireCustomMissile("FreezeVapor2", 0, 0, 5, 8)
		IWND A 0 A_ReFire
		TNT1 A 0 A_StopSound(CHAN_WEAPON)
		TNT1 A 0 A_FireCustomMissile("IceWandSmokeSpawner",0,0,8,7)
		IWND E 2
		TNT1 A 0 A_FireCustomMissile("IceWandSmokeSpawner",0,0,8,7)
		IWND D 2
		TNT1 A 0 A_FireCustomMissile("IceWandSmokeSpawner",0,0,8,7)
		IWND C 2
		TNT1 A 0 A_FireCustomMissile("IceWandSmokeSpawner",0,0,8,7)
		IWND B 2
		TNT1 A 0 A_FireCustomMissile("IceWandSmokeSpawner",0,0,8,7)
		IWND A 2
		Goto Ready
	Hold:
		TNT1 A 0 A_JumpIfNoAmmo(1)
		TNT1 A 0 A_PlaySound("weapons/icewand/fire", CHAN_WEAPON, 0.7, 1)
		TNT1 A 0 //ACS_NamedExecute("s851",0,random(5,-5),random(-3,3),0)
		TNT1 A 0 A_FireCustomMissile("IceWandSmokeSpawner",0,0,8,7)
		IWND E 1 A_FireCustomMissile("FreezeVapor", 0, 1, 5, 8)
		TNT1 A 0 //ACS_NamedExecute("s851",0,random(5,-5),random(-3,3),0)
		IWND E 1 A_FireCustomMissile("FreezeVapor2", 0, 0, 5, 8)
		TNT1 A 0 //ACS_NamedExecute("s851",0,random(5,-5),random(-3,3),0)
		TNT1 A 0 A_FireCustomMissile("IceWandSmokeSpawner",0,0,8,7)
		IWND E 1 A_FireCustomMissile("FreezeVapor2", 0, 0, 5, 8)
		TNT1 A 0 //ACS_NamedExecute("s851",0,random(5,-5),random(-3,3),0)
		IWND E 1 A_FireCustomMissile("FreezeVapor2", 0, 0, 5, 8)
		TNT1 A 0 //ACS_NamedExecute("s851",0,random(5,-5),random(-3,3),0)
		TNT1 A 0 A_FireCustomMissile("IceWandSmokeSpawner",0,0,8,7)
		IWND E 1 A_FireCustomMissile("FreezeVapor", 0, 0, 5, 8)
		TNT1 A 0 //ACS_NamedExecute("s851",0,random(5,-5),random(-3,3),0)
		IWND E 1 A_FireCustomMissile("FreezeVapor2", 0, 1, 5, 8)
		TNT1 A 0 //ACS_NamedExecute("s851",0,random(5,-5),random(-3,3),0)
		TNT1 A 0 A_FireCustomMissile("IceWandSmokeSpawner",0,0,8,7)
		IWND E 1 A_FireCustomMissile("FreezeVapor2", 0, 0, 5, 8)
		TNT1 A 0 //ACS_NamedExecute("s851",0,random(5,-5),random(-3,3),0)
		IWND E 1 A_FireCustomMissile("FreezeVapor2", 0, 0, 5, 8)
		TNT1 A 0 //ACS_NamedExecute("s851",0,random(5,-5),random(-3,3),0)
		TNT1 A 0 A_FireCustomMissile("IceWandSmokeSpawner",0,0,8,7)
		IWND E 1 A_FireCustomMissile("FreezeVapor", 0, 0, 5, 8)
		TNT1 A 0 //ACS_NamedExecute("s851",0,random(5,-5),random(-3,3),0)
		IWND E 1 A_FireCustomMissile("FreezeVapor2", 0, 0, 5, 8)
		TNT1 A 0 //ACS_NamedExecute("s851",0,random(5,-5),random(-3,3),0)
		TNT1 A 0 A_FireCustomMissile("IceWandSmokeSpawner",0,0,8,7)
		IWND E 1 A_FireCustomMissile("FreezeVapor2", 0, 0, 5, 8)
		TNT1 A 0 //ACS_NamedExecute("s851",0,random(5,-5),random(-3,3),0)
		IWND E 1 A_FireCustomMissile("FreezeVapor2", 0, 1, 5, 8)
		TNT1 A 0 //ACS_NamedExecute("s851",0,random(5,-5),random(-3,3),0)
		TNT1 A 0 A_FireCustomMissile("IceWandSmokeSpawner",0,0,8,7)
		IWND E 1 A_FireCustomMissile("FreezeVapor2", 0, 0, 5, 8)
		TNT1 A 0 //ACS_NamedExecute("s851",0,random(5,-5),random(-3,3),0)
		IWND E 1 A_FireCustomMissile("FreezeVapor2", 0, 0, 5, 8)
		TNT1 A 0 //ACS_NamedExecute("s851",0,random(5,-5),random(-3,3),0)
		TNT1 A 0 A_FireCustomMissile("IceWandSmokeSpawner",0,0,8,7)
		IWND E 1 A_FireCustomMissile("FreezeVapor2", 0, 0, 5, 8)
		TNT1 A 0 //ACS_NamedExecute("s851",0,random(5,-5),random(-3,3),0)
		IWND E 1 A_FireCustomMissile("FreezeVapor2", 0, 0, 5, 8)
		IWND A 0 A_ReFire
		TNT1 A 0 A_StopSound(CHAN_WEAPON)
		TNT1 A 0 A_FireCustomMissile("IceWandSmokeSpawner",0,0,8,7)
		IWND E 2
		TNT1 A 0 A_FireCustomMissile("IceWandSmokeSpawner",0,0,8,7)
		IWND D 2
		TNT1 A 0 A_FireCustomMissile("IceWandSmokeSpawner",0,0,8,7)
		IWND C 2
		TNT1 A 0 A_FireCustomMissile("IceWandSmokeSpawner",0,0,8,7)
		IWND B 2
		TNT1 A 0 A_FireCustomMissile("IceWandSmokeSpawner",0,0,8,7)
		IWND A 2
		Goto Ready
	AltFire:
		IWND B 0 A_PlaySound("weapons/icewand/charge",6,1.0,0)
		IWND B 2
		TNT1 A 0 A_FireCustomMissile("IceWandSmokeSpawner",0,0,8,7)
		IWND BC 1
		TNT1 A 0 A_FireCustomMissile("IceWandSmokeSpawner",0,0,8,7)
		IWND C 2
		TNT1 A 0 A_FireCustomMissile("IceWandSmokeSpawner",0,0,8,7)
		IWND D 2
		TNT1 A 0 A_FireCustomMissile("IceWandSmokeSpawner",0,0,8,7)
		IWND DE 1
		TNT1 A 0 A_FireCustomMissile("IceWandSmokeSpawner",0,0,8,7)
		IWND E 2
		TNT1 A 0 A_FireCustomMissile("IceWandSmokeSpawner",0,0,8,7)
		IWND F 2
		TNT1 A 0 A_FireCustomMissile("IceWandSmokeSpawner",0,0,8,7)
		IWND FG 1
		TNT1 A 0 A_FireCustomMissile("IceWandSmokeSpawner",0,0,8,7)
		IWND G 2
		TNT1 A 0 A_FireCustomMissile("IceWandSmokeSpawner",0,0,8,7)
		IWND H 2
		TNT1 A 0 A_FireCustomMissile("IceWandSmokeSpawner",0,0,8,7)
		IWND HI 1
		TNT1 A 0 A_FireCustomMissile("IceWandSmokeSpawner",0,0,8,7)
		IWND I 2
		TNT1 A 0 A_FireCustomMissile("IceWandSmokeSpawner",0,0,8,7)
		IWND J 2
		TNT1 A 0 A_FireCustomMissile("IceWandSmokeSpawner",0,0,8,7)
		IWND J 2
		IWND J 0 A_PlaySound("weapons/icewand/altfire",CHAN_WEAPON,1.0,0)
		IWND J 0 A_FireCustomMissile("IceDragonHead",0,1,5,8)
		IWND J 2
		TNT1 A 0 A_FireCustomMissile("IceWandSmokeSpawner",0,0,8,7)
		IWND JI 1
		TNT1 A 0 A_FireCustomMissile("IceWandSmokeSpawner",0,0,8,7)
		IWND I 2
		TNT1 A 0 A_FireCustomMissile("IceWandSmokeSpawner",0,0,8,7)
		IWND H 2
		TNT1 A 0 A_FireCustomMissile("IceWandSmokeSpawner",0,0,8,7)
		IWND HG 1
		TNT1 A 0 A_FireCustomMissile("IceWandSmokeSpawner",0,0,8,7)
		IWND G 2
		TNT1 A 0 A_FireCustomMissile("IceWandSmokeSpawner",0,0,8,7)
		IWND F 2
		TNT1 A 0 A_FireCustomMissile("IceWandSmokeSpawner",0,0,8,7)
		IWND FE 1
		TNT1 A 0 A_FireCustomMissile("IceWandSmokeSpawner",0,0,8,7)
		IWND E 2
		TNT1 A 0 A_FireCustomMissile("IceWandSmokeSpawner",0,0,8,7)
		IWND D 2
		TNT1 A 0 A_FireCustomMissile("IceWandSmokeSpawner",0,0,8,7)
		IWND DC 1
		TNT1 A 0 A_FireCustomMissile("IceWandSmokeSpawner",0,0,8,7)
		IWND C 2
		TNT1 A 0 A_FireCustomMissile("IceWandSmokeSpawner",0,0,8,7)
		IWND B 2
		TNT1 A 0 A_FireCustomMissile("IceWandSmokeSpawner",0,0,8,7)
		IWND BA 1
		TNT1 A 0 A_FireCustomMissile("IceWandSmokeSpawner",0,0,8,7)
		IWND A 2
		Goto Ready
	}
}

Actor FreezeVapor
{
	PROJECTILE
	+RIPPER	RipperLevel 1
	DamageType Ice
	+DONTSPLASH
	+BLOODLESSIMPACT
	+NODAMAGETHRUST
	+RANDOMIZE
	Speed 15
	Damage (Random(1,3))
	Radius 2
	Height 2
	RENDERSTYLE ADD
	ALPHA 0.2
	States
	{
	Spawn:
		PLSK AB 1
		PLSS CDEFGHIJKLMNOPQRSTUVWXYZ 1
		PLSZ ABC 1
		Stop
	Death:
		PLSZ C 1
		Stop 
	} 
}

Actor FreezeVapor2 : FreezeVapor { +PAINLESS }

Actor IceDragonHead
{
	PROJECTILE
	+DONTSPLASH
	+SEEKERMISSILE
	+FORCERADIUSDMG
	Mass 500
	Radius 6
	Height 6
	Speed 16
	Damage 30
	Scale 0.25
	DamageType "Ice"
	RenderStyle Add
	Alpha 0.3
	Translation "96:111=192:207","5:8=240:243"
	DeathSound "reilsss/weapons/rocketexplosion1"
	States
	{
	Spawn:
		TNT1 A 0 A_SpawnItemEx("IceDragonTail",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
		TNT1 A 0 A_SpawnItemEx("IceDragonTail",8,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
		TNT1 A 0 A_BishopMissileWeave
		DKDH A 1 A_SeekerMissile(2,2)
		TNT1 A 0 A_SpawnItemEx("IceDragonTail",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
		TNT1 A 0 A_SpawnItemEx("IceDragonTail",8,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
		DKDH A 1 A_SeekerMissile(2,2)
		Loop
	Death:
		TNT1 AAAAAAAAAAAAAAAAAA 0 A_SpawnItemEx("IceDragonExploSprite",0,0,0,random(10,-10)/(3*1.05),random(10,-10)/(3*1.05),random(1,10)/(3*1.05),0,SXF_NOCHECKPOSITION)
		TNT1 A 0 A_Explode(128,256,0)
		TNT1 A 0 A_CustomMissile("IceDragonExplo",6,0,0,2,0)
		TNT1 A 0 A_CustomMissile("IceDragonExplo",6,0,8,2,0)
		TNT1 A 0 A_CustomMissile("IceDragonExplo",6,0,16,2,0)
		TNT1 A 0 A_CustomMissile("IceDragonExplo",6,0,24,2,0)
		TNT1 A 0 A_CustomMissile("IceDragonExplo",6,0,32,2,0)
		TNT1 A 0 A_CustomMissile("IceDragonExplo",6,0,40,2,0)
		TNT1 A 0 A_CustomMissile("IceDragonExplo",6,0,48,2,0)
		TNT1 A 0 A_CustomMissile("IceDragonExplo",6,0,56,2,0)
		TNT1 A 0 A_CustomMissile("IceDragonExplo",6,0,64,2,0)
		TNT1 A 0 A_CustomMissile("IceDragonExplo",6,0,72,2,0)
		TNT1 A 0 A_CustomMissile("IceDragonExplo",6,0,80,2,0)
		TNT1 A 0 A_CustomMissile("IceDragonExplo",6,0,88,2,0)
		TNT1 A 0 A_CustomMissile("IceDragonExplo",6,0,96,2,0)
		TNT1 A 0 A_CustomMissile("IceDragonExplo",6,0,104,2,0)
		TNT1 A 0 A_CustomMissile("IceDragonExplo",6,0,112,2,0)
		TNT1 A 0 A_CustomMissile("IceDragonExplo",6,0,120,2,0)
		TNT1 A 0 A_CustomMissile("IceDragonExplo",6,0,128,2,0)
		TNT1 A 0 A_CustomMissile("IceDragonExplo",6,0,136,2,0)
		TNT1 A 0 A_CustomMissile("IceDragonExplo",6,0,144,2,0)
		TNT1 A 0 A_CustomMissile("IceDragonExplo",6,0,152,2,0)
		TNT1 A 0 A_CustomMissile("IceDragonExplo",6,0,160,2,0)
		TNT1 A 0 A_CustomMissile("IceDragonExplo",6,0,168,2,0)
		TNT1 A 0 A_CustomMissile("IceDragonExplo",6,0,176,2,0)
		TNT1 A 0 A_CustomMissile("IceDragonExplo",6,0,184,2,0)
		TNT1 A 1 A_CustomMissile("IceDragonExplo",6,0,192,2,0)
		TNT1 A 0 A_CustomMissile("IceDragonExplo",6,0,200,2,0)
		TNT1 A 0 A_CustomMissile("IceDragonExplo",6,0,208,2,0)
		TNT1 A 0 A_CustomMissile("IceDragonExplo",6,0,216,2,0)
		TNT1 A 0 A_CustomMissile("IceDragonExplo",6,0,224,2,0)
		TNT1 A 0 A_CustomMissile("IceDragonExplo",6,0,232,2,0)
		TNT1 A 0 A_CustomMissile("IceDragonExplo",6,0,240,2,0)
		TNT1 A 0 A_CustomMissile("IceDragonExplo",6,0,248,2,0)
		TNT1 A 0 A_CustomMissile("IceDragonExplo",6,0,256,2,0)
		TNT1 A 0 A_CustomMissile("IceDragonExplo",6,0,264,2,0)
		TNT1 A 0 A_CustomMissile("IceDragonExplo",6,0,272,2,0)
		TNT1 A 0 A_CustomMissile("IceDragonExplo",6,0,280,2,0)
		TNT1 A 0 A_CustomMissile("IceDragonExplo",6,0,288,2,0)
		TNT1 A 0 A_CustomMissile("IceDragonExplo",6,0,296,2,0)
		TNT1 A 0 A_CustomMissile("IceDragonExplo",6,0,304,2,0)
		TNT1 A 0 A_CustomMissile("IceDragonExplo",6,0,312,2,0)
		TNT1 A 0 A_CustomMissile("IceDragonExplo",6,0,320,2,0)
		TNT1 A 0 A_CustomMissile("IceDragonExplo",6,0,328,2,0)
		TNT1 A 0 A_CustomMissile("IceDragonExplo",6,0,336,2,0)
		TNT1 A 0 A_CustomMissile("IceDragonExplo",6,0,344,2,0)
		TNT1 A 0 A_CustomMissile("IceDragonExplo",6,0,352,2,0)
		Stop
	}
}

Actor IceDragonTail
{
	PROJECTILE
	+DONTSPLASH
	+NOINTERACTION
	Mass 500
	Radius 6
	Height 6
	Scale 0.5
	Speed 0
	RenderStyle Add
	Alpha 0.3
	Translation "96:111=192:207","5:8=240:243"
	States
	{
	Spawn:
		TNT1 A 3
		DKDT AAAABBBBCCCCDDDDEEEEFFFF 1
		Goto Death
	Death:
		DKDT GGGHHHIII 1
		Stop
	}
}

Actor IceDragonExploSprite
{
	+NOINTERACTION
	RenderStyle Add
	Scale 0.5
	States
	{
	Spawn:
		X033 ABCDEFGHIJKLMNOPQR 2 Bright A_FadeOut(0.04)
		Stop
	}
}

Actor IceDragonExplo
{
	PROJECTILE
	+RIPPER	RipperLevel 1
	+DONTSPLASH
	DamageType "Ice"
	Mass 1
	Speed 9
	Damage (Random(2,6))
	Radius 2
	Height 2
	RenderStyle Add
	Alpha 0.6
	Scale 0.6
	States
	{
	Spawn:
		X033 ABCD 2 Bright A_FadeOut(0.02)
		TNT1 A 0 A_ScaleVelocity(0.9)
		X033 EFGH 2 Bright A_FadeOut(0.02)
		TNT1 A 0 A_ScaleVelocity(0.75)
		X033 IJKL 2 Bright A_FadeOut(0.02)
		TNT1 A 0 A_ScaleVelocity(0.6)
		X033 MNOP 2 Bright A_FadeOut(0.02)
		TNT1 A 0 A_ScaleVelocity(0.6)
		X033 QR 2 Bright A_FadeOut(0.05)
		Wait
	Death:
		TNT1 A 1
		Stop 
	}
}

Actor IceWandSmokeSpawner
{
	Radius 1
	Height 1
	Speed 14
	PROJECTILE
	+NOTIMEFREEZE
	States
	{
	Spawn:
		TNT1 A 1
		TNT1 A 0 A_Die
		Goto Death
	Death:
		TNT1 A 0 A_SpawnItemEx("IceWandSmoke",0,0,-2,0,0,0.3,0,SXF_NOCHECKPOSITION,0)
		Stop
	}
}

Actor IceWandSmoke
{
	Radius 1
	Height 1
	PROJECTILE
	+NOGRAVITY
	+FLOORCLIP
	+NOBLOCKMAP
	Alpha 0.25
	Scale 0.16
	Mass 0
	RenderStyle Add
	+FORCEXYBILLBOARD
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_Jump(210,4,6,8,10,12)
		WPXS ABCDEFGHIJKLMNOPQRSTUVWXYZ 1 A_FadeOut(0.01)
		WPXZ ABC 1 A_FadeOut(0.01)
		Stop
	}
}

Actor IceWandDrop : CustomInventory
{
	Inventory.MaxAmount 1
	States
	{
	Use:
		TNT1 A 0
		TNT1 A 0 A_StopSound(7)
		TNT1 A 0 A_SpawnItemEx("DroppedIceWand",0,0,32,8,0,0,0,SXF_NOCHECKPOSITION,0)
		Stop
	}
}

Actor DroppedIceWand
{
	Radius 16
	Height 20
	Scale 0.11
	States
	{
	Spawn:
		IWND K 15
		TNT1 A 0 A_SpawnItemEx("AEoDIceWandNoAmmo",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER,0)
		Stop
	}
}

Actor AEoDIceWandNoAmmo : AEoDIceWandItem
{
	+FLOORCLIP
	+FLOATBOB
	+INVENTORY.IGNORESKILL
	Inventory.Amount 1
	Inventory.PickupMessage "You discovered the ice wand!"
	Inventory.PickupSound "weapons/icewand/pickup"
	Scale 0.11
	States
	{
	Spawn:
		IWND K -1
		Loop
	Pickup:
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",7) <= 0,"Nothing")
		TNT1 A 0 A_JumpIfInventory("GreenMana",40,"Ammo")
		TNT1 A 0 A_JumpIfInventory("RedMana",12,"Ammo3")
		TNT1 A 0 A_GiveInventory("Weapon7Count",1)
		TNT1 A 0 A_GiveInventory("IceWandDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDIceWand",1)
		TNT1 A 0 A_TakeInventory("GreenMana",40)
		TNT1 A 0 A_TakeInventory("RedMana",12)
		TNT1 A 0 	
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDIceWand",1,"Ammo")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		TNT1 A 0 ACS_NamedExecute("s798",0,7,90,0)
		Fail
	Ammo:
		TNT1 A 0 A_JumpIfInventory("RedMana",12,1)
		Goto Ammo2
		TNT1 A 0 A_TakeInventory("GreenMana",40)
		TNT1 A 0 A_TakeInventory("RedMana",12)
		TNT1 A 0 A_JumpIfInventory("AEoDIceWand",1,2)
		TNT1 A 0 A_GiveInventory("Weapon7Count",1)
		TNT1 A 0 A_GiveInventory("IceWandDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDIceWand",1)
		Stop
	Ammo2:
		TNT1 A 0 A_TakeInventory("GreenMana",40)
		TNT1 A 0 A_GiveInventory("Weapon7Count",1)
		TNT1 A 0 A_GiveInventory("IceWandDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDIceWand",1)
		TNT1 A 0 A_TakeInventory("RedMana",12)
		Stop
	Ammo3:
		TNT1 A 0 A_TakeInventory("RedMana",12)
		TNT1 A 0 A_GiveInventory("Weapon7Count",1)
		TNT1 A 0 A_GiveInventory("IceWandDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDIceWand",1)
		TNT1 A 0 A_TakeInventory("GreenMana",40)
		Stop
	}
}

//==================================================================================
//==================================================================================

//==================================================================================
//==================================================================================

Actor AEoDArbalestItem : CustomInventory 6059
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL
	+FLOATBOB
	Inventory.Amount 1
	Inventory.PickupMessage "You now possess the Wormwood Arbalest!"
	Inventory.PickupSound "weaponbuild"
	Scale 0.16
	States
	{
	Spawn:
		WARB ABCDEFGHIJKLMNOPQRSTUVWX 3
		Loop
	Pickup:
		TNT1 A 0 A_JumpIfInventory("AEoDArbalest",1,"Ammo")
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",7) <= 0,"Nothing")
		TNT1 A 0 A_GiveInventory("Weapon7Count",1)
		TNT1 A 0 A_GiveInventory("ArbalestDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDArbalest",1)
		TNT1 A 0 	
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDArbalest",1,"Ammo")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		TNT1 A 0 ACS_NamedExecute("s798",0,7,96,0)
		Fail
	Ammo:
		TNT1 A 0 A_GiveInventory("AEoDArbalest",1)
		Stop
	}
}

Actor AEoDArbalest : Weapon // 6059
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL
	+WEAPON.CHEATNOTWEAPON
	+FLOATBOB
	Weapon.AmmoType1 "GreenMana"
	Weapon.AmmoType2 "DarkMana"
	Weapon.YAdjust 20
	Weapon.AmmoGive1 21
	Weapon.AmmoGive2 4
	Weapon.AmmoUse1 10
	Weapon.AmmoUse2 3
	Weapon.SelectionOrder 11930
	Inventory.PickupMessage "You now possess the Wormwood Arbalest!"
	Inventory.PickupSound "weaponbuild"
	weapon.upsound "weapons/draw"
	Scale 0.16
	Tag "Wormwood arbalest"
	States
	{ 
	Spawn: 
		WARB ABCDEFGHIJKLMNOPQRSTUVWX 3
		Loop
	Ready:
		ARBL A 1 A_WeaponReady
		Loop
	Deselect:
		TNT1 A 0 	
		ARBL A 1 A_Lower
		TNT1 AA 0 A_Lower
		Loop
	Select: 
		TNT1 A 0 	
		ARBL A 1 A_Raise
		TNT1 AA 0 A_Raise 
		Loop
	Fire:
		TNT1 A 0 A_PlaySound("diablo2/amazoncast/poisoncast", CHAN_WEAPON, 1.0, 0)
		ARBL B 2 A_FireCustomMissile("WormwoodBolt", 0, 1, 0, 0)
		ARBL CDEFG 2
		ARBL H 2 A_PlaySound("arbalest/draw",CHAN_BODY,1.0,0)
		ARBL IJKLMNOPQRSTA 2
		Goto Ready
	AltFire:
		TNT1 A 0 A_PlaySound("andariel/cast", CHAN_WEAPON, 1.0, 0)
		ARBL B 2 A_FireCustomMissile("WormwoodBigBolt", 0, 1, 0, 0)
		ARBL CDEF 2
		ARBL G 25
		ARBL H 2 A_PlaySound("arbalest/draw",CHAN_BODY,1.0,0)
		ARBL IJKLMNOPQRST 2
		ARBL A 2
		Goto Ready
	}
}

Actor WormwoodBolt
{
	Scale 0.35
	Radius 4
	Height 4
	Speed 26
	Damage 5
	PoisonDamage 15
	DamageType "Wormwood"
	PROJECTILE
	+RIPPER
	RipperLevel 3
	+EXTREMEDEATH
	+NODAMAGETHRUST
	States
	{
	Spawn:
		ARRW A 0 A_SpawnItemEx("WormwoodBoltTrail",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION,0)
		ARRW A 0 A_SpawnItemEx("WormwoodBoltTrail",-8,0,0,0,0,0,0,SXF_NOCHECKPOSITION,0)
		ARRW A 1 A_SpawnItemEx("WormwoodBoltTrail",-16,0,0,0,0,0,0,SXF_NOCHECKPOSITION,0)
		Loop
	Death:
		TNT1 AAAAAAAAAAAA 0 A_SpawnItemEx("CrossbowArrow2Extra",0,0,0,random(1,4),random(1,4),random(1,4),random(0,359),SXF_TRANSFERTRANSLATION)
		ARRW A 0 A_PlaySound("archer/arrowcrash1")
		ARRW A 10
		ARRW A 1 A_FadeOut(0.015)
		Wait
	}
}

Actor WormwoodBoltTrail
{
	Height 4
	Radius 4
	Speed 0
	Damage 4
	PoisonDamage 30
	DamageType "Wormwood"
	Alpha 0.80
	Scale 0.55
	RenderStyle Add
	Translation "0:255=%[0.0,0.0,0.0]:[0.74,1.3,0.2]"
	PROJECTILE
	+RIPPER
	RipperLevel 3
	+EXTREMEDEATH
	+BLOODLESSIMPACT
	+NODAMAGETHRUST
	States
	{
	Spawn:
		WPXS A 0
		WPXS A 0 A_Jump(230,7,19,31,43,55,67,79)
		WPXS AAABBBCCCDDDEEEFFFGGGHHHIIIJJJKKKLLLMMMNNNOOOPPPQQQRRRSSSTTTUUUVVVWWWXXXYYYZZZ 1 A_FadeOut(0.01)
		WPXZ AAABBBCCC 1 A_FadeOut(0.01)
		Stop
	}
}

Actor WormwoodBigBolt : WormwoodBolt
{
	var int user_angle;
	Speed 34
	Damage 20
	-RIPPER
	+SEEKERMISSILE
	+FORCERADIUSDMG
	+DONTREFLECT
	States
	{
	Spawn:
		ARRW A 0 A_SeekerMissile(5,5,1)
		ARRW A 0 A_SpawnItemEx("WormwoodBoltTrail",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION,0)
		ARRW A 0 A_SpawnItemEx("WormwoodBoltTrail",-8,0,0,0,0,0,0,SXF_NOCHECKPOSITION,0)
		ARRW A 1 A_SpawnItemEx("WormwoodBoltTrail",-16,0,0,0,0,0,0,SXF_NOCHECKPOSITION,0)
		Loop
	Death:
		TNT1 AAAAAAAAAAAA 0 A_SpawnItemEx("CrossbowArrow2Extra",0,0,0,random(1,4),random(1,4),random(1,4),random(0,359),SXF_TRANSFERTRANSLATION)
		TNT1 A 0 A_PlaySound("torturedsoul/poison")
		FRME A 0 Bright A_Explode(128,128,0)
		TNT1 A 0 A_SetUserVar("user_angle",0)
	Clouder:
		TNT1 A 0 A_SpawnItemEx("WormwoodBoltCloudSpawner",0,0,0,10,0,0,user_angle,SXF_NOCHECKPOSITION,0)
		TNT1 A 0 A_SetUserVar("user_angle",user_angle+10)
		TNT1 A 0 A_JumpIf(user_angle>=360,1)
		Loop
		
		ARRW A 10
		ARRW A 1 A_FadeOut(0.015)
		Wait
	}
}

Actor WormwoodBoltCloudSpawner
{
	Projectile
	Speed 10
	Damage 0
	Radius 3
	Height 3
	ReactionTime 15
	+NODAMAGETHRUST
	+THRUACTORS
	+EXTREMEDEATH
	+STEPMISSILE
	BounceType "Doom"
	WallBounceFactor 1
	MaxStepHeight 64
	DamageType "Wormwood"
	States
	{
	Spawn:
		//TNT1 A 0 A_Jump(128,2)
		TNT1 A 0 A_CountDown
		TNT1 A 2 A_CustomMissile("WormwoodCloud2",random(0,5),random(35,-35),random(0,359),6,0)
		TNT1 A 2 A_CustomMissile("WormwoodCloud1",random(0,5),random(35,-35),random(0,359),6,0)
		Loop
	Death:
		TNT1 A 1
		Stop
	}
}

Actor WormwoodCloud1
{
	Radius 5
	Height 5
	Projectile
	Speed 0
	Damage (random(3,6))
	Scale 0.4
	+RIPPER	RipperLevel 2
	+BLOODLESSIMPACT
	+EXTREMEDEATH
	+NODAMAGETHRUST
	DamageType "Wormwood"
	RenderStyle Add
	Alpha 0.67
	Translation "0:255=%[0.0,0.0,0.0]:[0.74,1.3,0.2]"
	States
	{
	Spawn:
		PLSS C 2 NoDelay ThrustThingZ(0,randompick(-2,2),0,1)
		Goto "Ripping"
	Ripping:
		PLSS DEFGHIJKLMNOPQRSTUVWXYZ 2
		PLSZ ABC 2
		Stop
	}
}

Actor WormwoodCloud2
{
	Radius 5
	Height 5
	Projectile
	Speed 0
	Damage (random(3,6))
	Scale 0.4
	+RIPPER	RipperLevel 2
	+BLOODLESSIMPACT
	+EXTREMEDEATH
	+NODAMAGETHRUST
	BounceFactor 1
	WallBounceFactor 1
	DamageType "Wormwood"
	RenderStyle Add
	Alpha 0.67
	Translation "0:255=%[0.0,0.0,0.0]:[0.74,1.3,0.2]"
	States
	{
	Spawn:
		PLSS C 2 NoDelay ThrustThingZ(0,randompick(-3,3),0,1)
		Goto "Ripping"
	Ripping:
		PLSS DEFGHIJKLMNOPQRSTUVWXYZ 2
		PLSZ ABC 2
		Stop
	}
}

Actor ArbalestDrop : CustomInventory
{
	Inventory.MaxAmount 1
	States
	{
	Use:
		TNT1 A 0
		TNT1 A 0 A_SpawnItemEx("DroppedArbalest",0,0,32,8,0,0,0,SXF_NOCHECKPOSITION,0)
		Stop
	}
}

Actor DroppedArbalest
{
	Radius 16
	Height 20
	Scale 0.16
	States
	{
	Spawn:
		WARB A 15
		TNT1 A 0 A_SpawnItemEx("AEoDArbalestNoAmmo",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER,0)
		Stop
	}
}

Actor AEoDArbalestNoAmmo : AEoDArbalestItem
{
	+FLOORCLIP
	+FLOATBOB
	+INVENTORY.IGNORESKILL
	Inventory.Amount 1
	Inventory.PickupMessage "You now possess the Wormwood Arbalest!"
	Inventory.PickupSound "weaponbuild"
	Scale 0.16
	States
	{
	Spawn:
		WARB ABCDEFGHIJKLMNOPQRSTUVWX 3
		Loop
	Pickup:
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",7) <= 0,"Nothing")
		TNT1 A 0 A_JumpIfInventory("GreenMana",30,"Ammo")
		TNT1 A 0 A_JumpIfInventory("RedMana",20,"Ammo3")
		TNT1 A 0 A_GiveInventory("Weapon7Count",1)
		TNT1 A 0 A_GiveInventory("ArbalestDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDArbalest",1)
		TNT1 A 0 A_TakeInventory("GreenMana",30)
		TNT1 A 0 A_TakeInventory("RedMana",20)
		TNT1 A 0 	
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDArbalest",1,"Ammo")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		TNT1 A 0 ACS_NamedExecute("s798",0,7,96,0)
		Fail
	Ammo:
		TNT1 A 0 A_JumpIfInventory("RedMana",20,1)
		Goto Ammo2
		TNT1 A 0 A_TakeInventory("GreenMana",30)
		TNT1 A 0 A_TakeInventory("RedMana",20)
		TNT1 A 0 A_JumpIfInventory("AEoDArbalest",1,2)
		TNT1 A 0 A_GiveInventory("Weapon7Count",1)
		TNT1 A 0 A_GiveInventory("ArbalestDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDArbalest",1)
		Stop
	Ammo2:
		TNT1 A 0 A_TakeInventory("GreenMana",30)
		TNT1 A 0 A_GiveInventory("Weapon7Count",1)
		TNT1 A 0 A_GiveInventory("ArbalestDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDArbalest",1)
		TNT1 A 0 A_TakeInventory("RedMana",20)
		Stop
	Ammo3:
		TNT1 A 0 A_TakeInventory("RedMana",20)
		TNT1 A 0 A_GiveInventory("Weapon7Count",1)
		TNT1 A 0 A_GiveInventory("ArbalestDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDArbalest",1)
		TNT1 A 0 A_TakeInventory("GreenMana",30)
		Stop
	}
}
//==================================================================================
//==================================================================================
// This one is tricky. In open space is going to take even more grenades to kill
// a monster than with regular grenades. However, fire this into an small room
// and madness is bound to occur. -DBT
//==================================================================================
//==================================================================================

Actor AEoDFragLauncherItem : CustomInventory 6164
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL
	Scale 0.185
	Inventory.Amount 1
	Inventory.PickupMessage "Picked up a Frag Grenade Launcher."
	Inventory.PickupSound "weapons/stroggarmsaw/pickup" 
	States
	{
	Spawn:
		Q4GL A -1
		Loop
	Pickup:
		TNT1 A 0 A_JumpIfInventory("AEoDFragLauncher",1,"Ammo")
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",7) <= 0,"Nothing")
		TNT1 A 0 A_GiveInventory("Weapon7Count",1)
		TNT1 A 0 A_GiveInventory("FragLauncherDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDFragLauncher",1)
		TNT1 A 0 	
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDFragLauncher",1,"Ammo")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		TNT1 A 0 ACS_NamedExecute("s798",0,7,93,0)
		Fail
	Ammo:
		TNT1 A 0 A_GiveInventory("AEoDFragLauncher",1)
		Stop
	}
}



ACTOR AEoDFragLauncher : Weapon
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL
	+CHEATNOTWEAPON
	Weapon.Kickback 20
	Weapon.AmmoType1 "AEGrenade" 
	Weapon.AmmoType2 "AEGrenade" 
	Weapon.AmmoGive1 8
	Weapon.AmmoUse1 2
	Weapon.AmmoUse2 2
	Weapon.SelectionOrder 14980
	Obituary "%o was victim of %k's Frag Grenades."
	Inventory.PickupMessage "Picked up a Frag Grenade Launcher."
	Inventory.PickupSound "weapons/stroggarmsaw/pickup" 
	weapon.upsound "weapons/rlan/draw"
	Scale 0.185
	Tag "Frag Grenade launcher"
	States 
	{ 
	Spawn: 
		Q4GL A -1 
		LOOP
	Deselect: 
		TNT1 A 0 //ACS_NamedExecute("s799",0,0,0,0)
		R089 A 1 A_Lower 
		TNT1 AA 0 A_Lower
		Loop 
	Select:
		TNT1 A 0 //ACS_NamedExecute("s799",0,16,0,0)
		R089 A 1 A_Raise 
		TNT1 AA 0 A_Raise
		Loop 
	Ready:  
		R089 A 4 A_WeaponReady 
		Loop
	Fire:
		TNT1 A 0 A_Recoil(2)
		TNT1 A 0 //ACS_NamedExecute("s851",0,80,random(-20,20),0)
		TNT1 A 0 A_PlaySound("GLFIRE", CHAN_WEAPON, 1.0, 0)
		TNT1 A 0 A_FireCustomMissile("GunSmokeSpawner",0,0,7,8)
		TNT1 A 0 Bright A_FireCustomMissile("FragmentationGrenade",0,1,3,4)
		Goto "FinishFire"
	AltFire:
		TNT1 A 0 A_Recoil(2)
		TNT1 A 0 //ACS_NamedExecute("s851",0,80,random(-20,20),0)
		TNT1 A 0 A_PlaySound("GLFIRE", CHAN_WEAPON, 1.0, 0)
		TNT1 A 0 A_FireCustomMissile("GunSmokeSpawner",0,0,7,8)
		TNT1 A 0 Bright A_FireCustomMissile("FragProxGrenade",0,1,3,4)
		Goto "FinishFire"
	FinishFire:
		R089 B 4 bright A_GunFlash
		R089 CC 4 //ACS_NamedExecute("s851",0,-40,0,0)
		R089 DE 3
		R089 F 3 A_PlaySound("reilsss/weapons/hegrenadelauncherreload", 6, 1.0, 0)
		R089 AA 3
		R089 A 1 A_ReFire
		Goto Ready
	Flash:
		TNT1 A 3 BRIGHT A_Light1 
		TNT1 A 4 BRIGHT A_Light0
		Stop 
	} 
}

Actor FragmentationGrenade
{
	PROJECTILE
	+CANBOUNCEWATER
	-NOGRAVITY
	+FORCERADIUSDMG
	+EXTREMEDEATH
	Radius 4
	Height 9
	Health 40
	Damage 40
	Speed 27
	Mass 0
	Gravity 0.7
	BounceFactor 0.6
	ReactionTime 135
	BounceType "Doom"
	BounceSound "quake4/Weapons/GrenLaunch/Bounce"
	Obituary "Was killed by a Frag Grenade."
	Scale 0.1
	States
	{
	Spawn:
		R090 AAABBBCCCDDDEEEFFFGGGHHH 1 Bright A_SpawnItemEx("QuakeGrenSmokeTrail",random(5,-5),random(5,-5),random(5,-5),0,0,1,0,SXF_NOCHECKPOSITION)
		Loop
	Death:
		TNT1 A 0 A_PlaySound("quake4/Misc/GrenadeExplo",6,1.0,0)
		TNT1 A 0 A_QuakeEx(3,3,0, 15,0,10,"", QF_SCALEDOWN)
		TNT1 A 0 A_Explode(random(150,350),150,1)
		EXP3 AAAAAAA 0 A_CustomMissile("HandGrenadeBitWeak", 8, 0, random(0,359))
		EXP3 AAAAAAA 0 A_CustomMissile("HandGrenadeBitWeak2", 8, 0, random(0,359))
		EXP3 AAAAAAA 0 A_CustomMissile("HandGrenadeBitWeak3", 8, 0, random(0,359))
		TNT1 A 15 A_SpawnItemEx("NewExplosionMedium",0,0,0,0,0,0,0)
		Stop
	}
}

Actor FragProxGrenade
{
	Speed 32
	Radius 10
	Height 12
	Damage 45
	DeathSound "q2weapon/grenadeexplosion"
	Scale 0.13
	Translation "104:111=152:159","3:3=159:159","5:8=9:12","0:0=1:1"
	PROJECTILE
	+RANDOMIZE
	+FORCERADIUSDMG
	+EXTREMEDEATH
	-NOGRAVITY
	+NODAMAGETHRUST
	+THRUGHOST
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_StopSound
		NAGR ABCDEFGHIJKLMNOPQRSTUVWX 1 Bright A_SpawnItemEx("QuakeGrenSmokeTrail",random(5,-5),random(5,-5),random(5,-5),0,0,1,0,SXF_NOCHECKPOSITION)
		Goto Spawn+2
	Death:
		NAGR A 1 Bright
		TNT1 A 1 A_SpawnItemEx("FragProxOnWall",0,0,0,0,0,0,0,SXF_CLIENTSIDE)
		Stop
	XDeath:
		TNT1 A 0 A_PlaySound("quake4/Misc/GrenadeExplo",6,1.0,0)
		TNT1 A 0 A_QuakeEx(3,3,0, 15,0,10,"", QF_SCALEDOWN)
		TNT1 A 0 A_Explode(150,350,1)
		EXP3 AAAAAAA 0 A_SpawnItemEx("HandGrenadeBitWeak",0,0,0,frandom(-16,16),frandom(-16,16),frandom(1,3),random(0,360),SXF_NOCHECKPOSITION)
		EXP3 AAAAAAA 0 A_SpawnItemEx("HandGrenadeBitWeak2",0,0,0,frandom(-16,16),frandom(-16,16),frandom(1,3),random(0,360),SXF_NOCHECKPOSITION)
		EXP3 AAAAAAA 0 A_SpawnItemEx("HandGrenadeBitWeak3",0,0,0,frandom(-16,16),frandom(-16,16),frandom(1,3),random(0,360),SXF_NOCHECKPOSITION)
		TNT1 A 15 A_SpawnItemEx("NewExplosionMedium",0,0,0,0,0,0,0)
		Stop
	Crash:
		TNT1 A 0 A_PlaySound("GEXPLOD",6,1.0,0)
		TNT1 A 0 A_QuakeEx(3,3,0, 15,0,10,"", QF_SCALEDOWN)
		TNT1 A 0 A_Explode(random(100,250),150,1)
		EXP3 AAAAAAA 0 A_SpawnItemEx("HandGrenadeBitWeak",0,0,0,frandom(-16,16),frandom(-10,10),frandom(1,3),random(0,360),SXF_NOCHECKPOSITION)
		EXP3 AAAAAAA 0 A_SpawnItemEx("HandGrenadeBitWeak2",0,0,0,frandom(-16,16),frandom(-10,10),frandom(1,3),random(0,360),SXF_NOCHECKPOSITION)
		EXP3 AAAAAAA 0 A_SpawnItemEx("HandGrenadeBitWeak3",0,0,0,frandom(-16,16),frandom(-10,10),frandom(1,3),random(0,360),SXF_NOCHECKPOSITION)
		TNT1 A 15 A_SpawnItemEx("NewExplosionMedium",0,0,0,0,0,0,0)
		Stop
	}
}

Actor FragProxOnWall
{
	+SHOOTABLE
	+FORCERADIUSDMG
	+EXTREMEDEATH
	+NOBLOOD
	+FRIENDLY
	+NOGRAVITY
	+GHOST
	-COUNTKILL
	Translation "104:111=152:159","3:3=159:159","5:8=9:12","0:0=1:1"
	Health 10
	Radius 8
	Height 15
	Speed 0
	Scale 0.13
	Mass 0xFFFFFFFFFF
	States
	{
	Spawn:
		NAGR AAAAAAAAAAAA 3 Bright A_LookEx(2,0,80,0,360,"See")
		TNT1 A 0 Bright A_PlaySound("reilsss/weapons/minepipe",CHAN_VOICE,0.5,0,ATTN_IDLE) 
		Loop
	See:
		TNT1 A 0 A_PlaySound("GEXPLOD",6,1.0,0)
		TNT1 A 0 A_QuakeEx(3,3,0, 15,0,10,"", QF_SCALEDOWN)
		TNT1 A 0 A_Explode(200,150,1)
		EXP3 AAAAAAA 0 A_SpawnItemEx("HandGrenadeBitWeak",0,0,0,frandom(-16,16),frandom(-16,16),frandom(1,3),random(0,360),SXF_NOCHECKPOSITION)
		EXP3 AAAAAAA 0 A_SpawnItemEx("HandGrenadeBitWeak2",0,0,0,frandom(-16,16),frandom(-16,16),frandom(1,3),random(0,360),SXF_NOCHECKPOSITION)
		EXP3 AAAAAAA 0 A_SpawnItemEx("HandGrenadeBitWeak3",0,0,0,frandom(-16,16),frandom(-16,16),frandom(1,3),random(0,360),SXF_NOCHECKPOSITION)
		TNT1 A 15 A_SpawnItemEx("NewExplosionMedium",0,0,0,0,0,0,0)
		Stop
	Death:
		TNT1 A 0 A_PlaySound("GEXPLOD",6,1.0,0)
		TNT1 A 0 A_QuakeEx(3,3,0, 15,0,10,"", QF_SCALEDOWN)
		TNT1 A 0 A_Explode(200,150,1)
		EXP3 AAAAAAA 0 A_SpawnItemEx("HandGrenadeBitWeak",0,0,0,frandom(-16,16),frandom(-16,16),frandom(1,3),random(0,360),SXF_NOCHECKPOSITION)
		EXP3 AAAAAAA 0 A_SpawnItemEx("HandGrenadeBitWeak2",0,0,0,frandom(-16,16),frandom(-16,16),frandom(1,3),random(0,360),SXF_NOCHECKPOSITION)
		EXP3 AAAAAAA 0 A_SpawnItemEx("HandGrenadeBitWeak3",0,0,0,frandom(-16,16),frandom(-16,16),frandom(1,3),random(0,360),SXF_NOCHECKPOSITION)
		TNT1 A 15 A_SpawnItemEx("NewExplosionMedium",0,0,0,0,0,0,0)
		Stop
	}
}


Actor FragGrenadeCluster : FragmentationGrenade
{
	States
	{
	Death:
		TNT1 A 0 A_PlaySound("GEXPLOD",6,1.0,0)
		TNT1 A 0 A_QuakeEx(3,3,0, 15,0,10,"", QF_SCALEDOWN)
		TNT1 A 0 A_SpawnItemEx("NewExplosionMedium",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		TNT1 A 0 Bright A_Explode(150,150,1)
		TNT1 AAAAAAAAA 0 A_SpawnItemEx("MorserSwarm",0,0,0,random(-2,2),random(-2,2),random(5,15),random(0,359),SXF_NOCHECKPOSITION)
		TNT1 A 15
		Stop
	}
}

Actor FragLauncherDrop : CustomInventory
{
	Inventory.MaxAmount 1
	States
	{
	Use:
		TNT1 A 0
		TNT1 A 0 A_SpawnItemEx("DroppedFragLauncher",0,0,32,8,0,0,0,SXF_NOCHECKPOSITION,0)
		Stop
	}
}

Actor DroppedFragLauncher
{
	Radius 16
	Height 20
	Scale 0.185
	States
	{
	Spawn:
		Q4GL A 15
		TNT1 A 0 A_SpawnItemEx("AEoDFragLauncherNoAmmo",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER,0)
		Stop
	}
}

Actor AEoDFragLauncherNoAmmo : AEoDFragLauncherItem
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL
	Scale 0.185
	Inventory.Amount 1
	Inventory.PickupMessage "Picked up a Frag Grenade Launcher."
	Inventory.PickupSound "weapons/stroggarmsaw/pickup" 
	States
	{
	Spawn:
		Q4GL A -1
		Loop
	Pickup:
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",7) <= 0,"Nothing")
		TNT1 A 0 A_JumpIfInventory("AEGrenade",8,"Ammo")
		TNT1 A 0 A_GiveInventory("Weapon7Count",1)
		TNT1 A 0 A_GiveInventory("FragLauncherDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDFragLauncher",1)
		TNT1 A 0 A_TakeInventory("AEGrenade",8)
		TNT1 A 0 	
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDFragLauncher",1,"Ammo")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		TNT1 A 0 ACS_NamedExecute("s798",0,7,93,0)
		Fail
	Ammo:
		TNT1 A 0 A_TakeInventory("AEGrenade",8)
		TNT1 A 0 A_JumpIfInventory("AEoDFragLauncher",1,2)
		TNT1 A 0 A_GiveInventory("Weapon7Count",1)
		TNT1 A 0 A_GiveInventory("FragLauncherDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDFragLauncher",1)
		Stop
	}
}

//==================================================================================
//==================================================================================

//==================================================================================
//==================================================================================

Actor AEoDConcussionLauncherItem : CustomInventory 6165
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL
	Scale 0.24
	Inventory.Amount 1
	Inventory.PickupMessage "You picked up a concussion rocket launcher!"
	Inventory.PickupSound "weapons/stroggarmsaw/pickup" 
	States
	{
	Spawn:
		Q4RL A -1
		Loop
	Pickup:
		TNT1 A 0 A_JumpIfInventory("AEoDConcussionLauncher",1,"Ammo")
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",7) <= 0,"Nothing")
		TNT1 A 0 A_GiveInventory("Weapon7Count",1)
		TNT1 A 0 A_GiveInventory("ConcussionLauncherDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDConcussionLauncher",1)
		TNT1 A 0 	
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDConcussionLauncher",1,"Ammo")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		TNT1 A 0 ACS_NamedExecute("s798",0,7,97,0)
		Fail
	Ammo:
		TNT1 A 0 A_GiveInventory("AEoDConcussionLauncher",1)
		Stop
	}
}

ACTOR AEoDConcussionLauncher : Weapon
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL
	+CHEATNOTWEAPON
	Weapon.Kickback 30
	Weapon.AmmoType1 "AERocket"
	Weapon.AmmoType2 "AERocket"
	Weapon.AmmoGive1 6
	Weapon.AmmoUse1 1
	Weapon.AmmoUse2 5
	Weapon.SelectionOrder 12630
	Obituary "%o was exploded by %k's rockets."
	Inventory.PickupMessage "You picked up a concussion rocket launcher!"
	Inventory.PickupSound "weapons/stroggarmsaw/pickup"
	weapon.upsound "weapons/rlan/draw"
	Scale 0.24
	Tag "Conussion rocket launcher"
	States
	{
	Spawn:
		Q4RL A -1
		Loop
	Deselect:
		TNT1 A 0 //ACS_NamedExecute("s799",0,0,0,0)
		RLM2 A 1 A_Lower
		TNT1 AA 0 A_Lower
		Loop
	Select:
		TNT1 A 0 //ACS_NamedExecute("s799",0,17,0,0)
		RLM2 A 1 A_Raise
		TNT1 AA 0 A_Raise
		Loop
	Ready:
		RLM2 A 1 A_WeaponReady
		Loop
	Fire:
		TNT1 A 0 A_Recoil(1)
		TNT1 A 0 //ACS_NamedExecute("s851",0,120,random(-5,5),0)
		TNT1 A 0 A_PlaySound("ROCKT_F", CHAN_WEAPON, 1.0, 0)
		TNT1 A 0 A_FireCustomMissile("ConcussionMissile", 0, 1, 3, 5.5)
		RLM2 B 3 Bright A_GunFlash
		RLM2 B 0 A_PlaySound("WARHEAD", 7, 1.0, 0)
		RLM2 CCDD 2 bright //ACS_NamedExecute("s851",0,-30,0,0)
		RLM2 E 4 
		RLM2 F 4
		RLM2 G 4
		RLM2 A 8 A_ReFire
		Goto "Ready"
	AltFire:
		TNT1 A 0 A_Recoil(1)
		TNT1 A 0 //ACS_NamedExecute("s851",0,120,random(-5,5),0)
		TNT1 A 0 A_PlaySound("ROCKT_F", CHAN_WEAPON, 1.0, 0)
		TNT1 A 0 A_FireCustomMissile("DrunkMissile", frandom(-2,2), 1, 3, 5.5)
		TNT1 AAAAA 0 A_FireCustomMissile("DrunkMissile", frandom(-2,2), 0, 3, 5.5)
		RLM2 B 3 Bright A_GunFlash
		RLM2 B 0 A_PlaySound("WARHEAD", 7, 1.0, 0)
		RLM2 CCDD 2 bright //ACS_NamedExecute("s851",0,-30,0,0)
		RLM2 E 4 
		RLM2 F 4
		RLM2 G 4
		RLM2 A 8 A_ReFire
		Goto "Ready"
	Flash:
		TNT1 A 3 A_Light2
		TNT1 A 2 A_Light1
		TNT1 A 0 A_Light0
		Stop
	}
}

Actor ConcussionMissile : FastProjectile
{
	Projectile
	+RANDOMIZE
	+DEHEXPLOSION
	+ROCKETTRAIL
	+FORCERADIUSDMG
	+EXTREMEDEATH
	Radius 8
	Height 8
	Speed 100
	Damage 20
	SeeSound "RLSTEREO"
	DeathSound "RLXPLOD"
	Scale 0.9
	MissileType "ConcussionMissileSmokeSpawner"
	MissileHeight 8
	States
	{
	Spawn:
		QROK AA 1 Bright A_SpawnItemEx("Q2RocketExtra",0,0,0,1,0,random(-1,1),random(1,360))
		TNT1 A 0 Bright A_PlaySound("RLFLY",5,1,1)
		Loop
	Death:
		TNT1 AAA 0 A_PlaySound("RLXPLOD",CHAN_AUTO,1.0,0)
		TNT1 A 0 A_SpawnItemEx("NewExplosionMedium",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		TNT1 A 0 A_CustomMissile("ExpQuakeSmall",0,0,0)
		TNT1 A 10 A_Explode(160,64,1)
		Stop
	}
}

Actor ConcussionMissileSmokeSpawner
{
	+NOINTERACTION
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_SpawnItemEx("ConcussionMissileSmoke",-4,random(3,-3),0,0,frandom(0.3,-0.3),frandom(0.3,0.75),0,SXF_NOCHECKPOSITION)
		TNT1 A 1
		Stop
	}
}

Actor ConcussionMissileSmoke : Q2RocketAltSmoke { Scale 0.05 }

Actor DrunkMissile : ConcussionMissile
{
	Damage 12
	Speed 20
	Scale 0.55
	+SEEKERMISSILE
	MissileType ""
	States
	{
	Spawn:
		TNT1 A 0
		QROK A 1 Bright A_SeekerMissile(10,10,1)
		TNT1 A 0 A_SpawnItemEx("Q2RocketAltSmoke",-4,random(3,-3),0,0,frandom(0.3,-0.3),frandom(0.3,0.75),0,SXF_NOCHECKPOSITION)
		QROK A 1 Bright A_SeekerMissile(10,10,1)
		TNT1 A 0 A_SpawnItemEx("Q2RocketAltSmoke",-4,random(3,-3),0,0,frandom(0.3,-0.3),frandom(0.3,0.75),0,SXF_NOCHECKPOSITION)
		QROK A 0 Bright A_SpawnItemEx("DrunkMissile",0,0,0,20,frandom(-4,4),momz+(frandom(-1,1)),frandom(-2,2),SXF_NOCHECKPOSITION,0)
		Stop
	Death:
		TNT1 A 0 A_PlaySound("RLXPLOD",CHAN_AUTO,1.0,0)
		TNT1 A 0 A_SpawnItemEx("NewExplosionMedium",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		TNT1 A 0 A_CustomMissile("ExpQuakeSmall",0,0,0)
		TNT1 A 2 Bright A_Explode(115,150,1)
		Stop
	}
}

Actor ConcussionLauncherDrop : CustomInventory
{
	Inventory.MaxAmount 1
	States
	{
	Use:
		TNT1 A 0
		TNT1 A 0 A_SpawnItemEx("DroppedConcussionLauncher",0,0,32,8,0,0,0,SXF_NOCHECKPOSITION,0)
		Stop
	}
}

Actor DroppedConcussionLauncher
{
	Radius 16
	Height 20
	Scale 0.24
	States
	{
	Spawn:
		Q4RL A 15
		TNT1 A 0 A_SpawnItemEx("AEoDConcussionLauncherNoAmmo",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER,0)
		Stop
	}
}

Actor AEoDConcussionLauncherNoAmmo : AEoDConcussionLauncherItem
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL
	Scale 0.24
	Inventory.Amount 1
	Inventory.PickupMessage "You picked up a concussion rocket launcher!"
	Inventory.PickupSound "weapons/stroggarmsaw/pickup"
	States
	{
	Spawn:
		Q4RL A -1
		Loop
	Pickup:
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",7) <= 0,"Nothing")
		TNT1 A 0 A_JumpIfInventory("AERocket",6,"Ammo")
		TNT1 A 0 A_GiveInventory("Weapon7Count",1)
		TNT1 A 0 A_GiveInventory("ConcussionLauncherDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDConcussionLauncher",1)
		TNT1 A 0 A_TakeInventory("AERocket",6)
		TNT1 A 0 	
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDConcussionLauncher",1,"Ammo")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		TNT1 A 0 ACS_NamedExecute("s798",0,7,97,0)
		Fail
	Ammo:
		TNT1 A 0 A_TakeInventory("AERocket",6)
		TNT1 A 0 A_JumpIfInventory("AEoDConcussionLauncher",1,2)
		TNT1 A 0 A_GiveInventory("Weapon7Count",1)
		TNT1 A 0 A_GiveInventory("ConcussionLauncherDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDConcussionLauncher",1)
		Stop
	}
}


//=====================================================================================
//=====================================================================================

//	ElectroDriver

//=====================================================================================
//=====================================================================================

Actor AEoDElectroDriverItem : CustomInventory
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL
	Scale 0.2
	Inventory.Amount 1
	Inventory.PickupMessage "You got yourself the Electrodriver! Tits on fire!"
	Inventory.PickupSound "painkiller/weapon/electrodriver/PickWeapon"
	States
	{
	Spawn:
		D005 Z -1
		Loop
	Pickup:
		TNT1 A 0 A_JumpIfInventory("AEoDElectroDriver",1,"Ammo")
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",7) <= 0,"Nothing")
		TNT1 A 0 A_GiveInventory("Weapon7Count",1)
		TNT1 A 0 A_GiveInventory("ElectroDriverDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDElectroDriver",1)
		TNT1 A 0 	
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDElectroDriver",1,"Ammo")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		TNT1 A 0 ACS_NamedExecute("s798",0,7,89,0)
		Fail
	Ammo:
		TNT1 A 0 A_GiveInventory("AEoDElectroDriver",1)
		Stop
	}
}



Actor ElectroDriverDrop : CustomInventory
{
	Inventory.MaxAmount 1
	States
	{
	Use:
	   TNT1 A 0
	   TNT1 A 0 A_SpawnItemEx("DroppedElectroDriver",0,0,32,8,0,0,0,SXF_NOCHECKPOSITION,0)
	   Stop
	}
}

Actor DroppedElectroDriver
{
	Radius 16
	Height 20
	Scale 0.2
	States
	{
	Spawn:
		D005 Z 15
		TNT1 A 0 A_SpawnItemEx("AEoDElectroDriverNoAmmo",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER,0)
		Stop
	}
}

Actor AEoDElectroDriverNoAmmo : AEoDElectroDriverItem
{
	+INVENTORY.IGNORESKILL
	States
	{
	Spawn:
		D005 Z -1
		Loop
	Pickup:
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",7) <= 0,"Nothing")
		TNT1 A 0 A_JumpIfInventory("AENails",40,"Ammo")
		TNT1 A 0 A_JumpIfInventory("AECell",60,"Ammo3")
		TNT1 A 0 A_GiveInventory("Weapon7Count",1)
		TNT1 A 0 A_GiveInventory("ElectroDriverDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDElectroDriver",1)
		TNT1 A 0 A_TakeInventory("AENails",40)
		TNT1 A 0 A_TakeInventory("AECell",60)
		TNT1 A 0 	
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDElectroDriver",1,"Ammo")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		TNT1 A 0 ACS_NamedExecute("s798",0,7,89,0)
		Fail
	Ammo:
		TNT1 A 0 A_JumpIfInventory("AECell",60,1)
		Goto Ammo2
		TNT1 A 0 A_TakeInventory("AENails",40)
		TNT1 A 0 A_TakeInventory("AECell",60)
		TNT1 A 0 A_JumpIfInventory("AEoDElectroDriver",1,2)
		TNT1 A 0 A_GiveInventory("Weapon7Count",1)
		TNT1 A 0 A_GiveInventory("ElectroDriverDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDElectroDriver",1)
		Stop
	Ammo2:
		TNT1 A 0 A_TakeInventory("AENails",40)
		TNT1 A 0 A_GiveInventory("Weapon7Count",1)
		TNT1 A 0 A_GiveInventory("ElectroDriverDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDElectroDriver",1)
		TNT1 A 0 A_TakeInventory("AECell",60)
		Stop
	Ammo3:
		TNT1 A 0 A_TakeInventory("AECell",60)
		TNT1 A 0 A_GiveInventory("Weapon7Count",1)
		TNT1 A 0 A_GiveInventory("ElectroDriverDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDElectroDriver",1)
		TNT1 A 0 A_TakeInventory("AENails",40)
		Stop
	}
}






Actor AEoDElectroDriver : Weapon
{
	Weapon.AmmoType "AENails"
	Weapon.AmmoUse 2
	Weapon.AmmoGive 40
	Weapon.AmmoType2 "AECell"
	Weapon.AmmoUse2 1
	Weapon.AmmoGive2 60
	Weapon.SelectionOrder 11770
	Scale 0.2
	Inventory.PickupSound "painkiller/weapon/electrodriver/PickWeapon"
	weapon.upsound "weapons/rlan/draw"
	Inventory.PickupMessage "You got yourself the Electrodriver! Tits on fire!"
	Tag "Electrodriver"
	States
	{
	Spawn:
		D005 Z -1
		Stop
	Ready:
		D005 D 0 A_StopSound(5)
		D005 DDDDD 1 A_WeaponReady
		TNT1 A 0 A_TakeInventory("ElectroDriverToken",1)
		Loop
	Deselect:
		D005 D 0 A_StopSound(5) 
		TNT1 A 0 	
		D005 D 1 A_Lower
		TNT1 AA 0 A_Lower
		Loop
	Select:
		D005 D 0 A_StopSound(5)
		TNT1 A 0 	
		D005 D 1 A_Raise
		TNT1 AA 0 A_Raise
		Loop
	Fire:
		TNT1 A 0 A_JumpIfInventory("ElectroDriverToken",1,"ShuricaneAtt")
		TNT1 A 0 A_TakeInventory("ElectroDriverToken",1)
		D005 A 0 A_PlaySound("painkiller/weapon/electrodriver/ShurikenShoot",5)
		D005 A 0 A_FireCustomMissile("ElectDrvrShuriken",0,1,6)
		D005 A 2 A_SetPitch(pitch-0.6)
		D005 B 2 A_SetPitch(pitch+0.6)
		D005 C 2 
		D005 C 0 A_ReFire("Hold1")
		D005 D 2 
		Goto Ready
	Hold1:
		D005 D 0 A_PlaySound("painkiller/weapon/electrodriver/ShurikenShoot",5)
		D005 D 0 A_FireCustomMissile("ElectDrvrShuriken",0,1,6)
		D005 D 2 A_SetPitch(pitch-0.6)
		D005 A 2 A_SetPitch(pitch+0.6)
		D005 B 2 
		D005 B 0 A_ReFire("Hold2")
		D005 CD 2
		Goto Ready
	Hold2:
		D005 A 0 A_PlaySound("painkiller/weapon/electrodriver/ShurikenShoot",5)
		D005 A 0 A_FireCustomMissile("ElectDrvrShuriken",0,1,6)
		D005 C 2 A_SetPitch(pitch-0.6)
		D005 D 2 A_SetPitch(pitch+0.6)
		D005 A 2
		D005 A 0 A_ReFire("Hold3")
		D005 BCD 2 
		Goto Ready
	Hold3:
		D005 A 0 A_PlaySound("painkiller/weapon/electrodriver/ShurikenShoot",5)
		D005 A 0 A_FireCustomMissile("ElectDrvrShuriken",0,1,6)
		D005 B 2 A_SetPitch(pitch-0.6)
		D005 C 2 A_SetPitch(pitch+0.6)
		D005 D 2
		Goto Ready
	AltFire:
		D005 D 0 A_PlayWeaponSound("painkiller/weapon/electrodriver/ElectricShoot")
		D005 D 0 A_GiveInventory("ElectroDriverToken")
		D005 D 0 A_WeaponReady(WRF_NOSECONDARY|WRF_DISABLESWITCH|WRF_NOBOB)	
		D005 D 1 A_FireCustomMissile("ElectroDriverLightning",0,1,6)
		D005 D 0 A_WeaponReady(WRF_NOSECONDARY|WRF_DISABLESWITCH|WRF_NOBOB)	
		D005 D 1 A_FireCustomMissile("ElectroDriverLightning",0,0,6)
		D005 D 0 A_WeaponReady(WRF_NOSECONDARY|WRF_DISABLESWITCH|WRF_NOBOB)	D005 D 0 A_SetPitch(pitch+frandom(0.4,-0.4))	TNT1 A 0 A_SetAngle(angle+frandom(0.4,-0.4))
		D005 D 1 A_FireCustomMissile("ElectroDriverLightning",0,0,6)
		D005 M 0 A_WeaponReady(WRF_NOSECONDARY|WRF_DISABLESWITCH|WRF_NOBOB)	
		D005 M 1 A_FireCustomMissile("ElectroDriverLightning",0,0,6)
		D005 M 0 A_WeaponReady(WRF_NOSECONDARY|WRF_DISABLESWITCH|WRF_NOBOB)	
		D005 M 1 A_FireCustomMissile("ElectroDriverLightning",0,0,6)
		D005 M 0 A_WeaponReady(WRF_NOSECONDARY|WRF_DISABLESWITCH|WRF_NOBOB)	D005 M 0 A_SetPitch(pitch+frandom(0.4,-0.4))	TNT1 A 0 A_SetAngle(angle+frandom(0.4,-0.4))
		D005 M 1 A_FireCustomMissile("ElectroDriverLightning",0,0,6)
		D005 D 0 A_TakeInventory("ElectroDriverToken",32767)
		D005 M 0 A_ReFire("AltHold")
		Goto Ready
	AltHold:
		D005 D 0 A_GiveInventory("ElectroDriverToken")
		D005 D 0 A_PlaySound("painkiller/weapon/electrodriver/ElectricLoop",5,1,1)
		D005 D 0 A_WeaponReady(WRF_NOSECONDARY|WRF_DISABLESWITCH|WRF_NOBOB)	
		D005 D 1 A_FireCustomMissile("ElectroDriverLightning",0,1,6)
		D005 D 0 A_WeaponReady(WRF_NOSECONDARY|WRF_DISABLESWITCH|WRF_NOBOB)	
		D005 D 1 A_FireCustomMissile("ElectroDriverLightning",0,0,6)
		D005 D 0 A_WeaponReady(WRF_NOSECONDARY|WRF_DISABLESWITCH|WRF_NOBOB)	D005 D 0 A_SetPitch(pitch+frandom(0.4,-0.4))	TNT1 A 0 A_SetAngle(angle+frandom(0.4,-0.4))
		D005 D 1 A_FireCustomMissile("ElectroDriverLightning",0,0,6)
		D005 M 0 A_WeaponReady(WRF_NOSECONDARY|WRF_DISABLESWITCH|WRF_NOBOB)	
		D005 M 1 A_FireCustomMissile("ElectroDriverLightning",0,0,6)
		D005 M 0 A_WeaponReady(WRF_NOSECONDARY|WRF_DISABLESWITCH|WRF_NOBOB)	
		D005 M 1 A_FireCustomMissile("ElectroDriverLightning",0,0,6)
		D005 M 0 A_WeaponReady(WRF_NOSECONDARY|WRF_DISABLESWITCH|WRF_NOBOB)	D005 M 0 A_SetPitch(pitch+frandom(0.4,-0.4))	TNT1 A 0 A_SetAngle(angle+frandom(0.4,-0.4))
		D005 M 1 A_FireCustomMissile("ElectroDriverLightning",0,0,6)
		D005 M 0 A_TakeInventory("ElectroDriverToken",32767)
		D005 M 0 A_ReFire("AltHold")
		Goto Ready
	ShuricaneAtt:
		TNT1 A 0 A_TakeInventory("ElectroDriverToken",32767)
		TNT1 A 0 A_JumpIfInventory("PowerEconomizer",1,"CheckCellOK")
		TNT1 A 0 A_JumpIfInventory("InfiniteAmmo",1,"CheckCellOK")
		TNT1 A 0 A_JumpIfInventory("AENails",20,"CheckNailOK")
		TNT1 A 0 A_TakeInventory("ElectroDriverToken",1)
		Goto Fire+1
	CheckNailOK:
		TNT1 A 0 A_JumpIfInventory("AECell",5,"CheckCellOK")  //even though it takes 30, if you at least have 10, that'll do
		TNT1 A 0 A_TakeInventory("ElectroDriverToken",1)
		Goto Fire+1
	CheckCellOK:
		TNT1 A 0 A_TakeInventory("ElectroDriverToken",1)
		TNT1 A 0 A_TakeInventory("AENails",20,1) //The A_TakeInventory's "1" flag after the amount is IMPORTANT for Ammo.
		TNT1 A 0 A_TakeInventory("AECell",30,1)
		TNT1 A 0 A_PlayWeaponSound("painkiller/weapon/electrodriver/ShuricaneShoot")
		TNT1 A 0 A_FireCustomMissile("ShuricaneProj",0,0,6)
		D005 E 4 A_SetPitch(pitch-6)
		D005 FFFFFFFFFFFF 2 A_SetPitch(pitch+0.5)
		D005 GHKLM 5
		Goto Ready
	}
}

Actor ElectroDriverToken : Inventory {	Inventory.MaxAmount 1	}

//***************************************************************
Actor ElectDrvrShuriken : FastProjectile	
{
	Projectile
	Radius 6
	Height 10
	Speed 40
	Damage 8		//even though it uses 2 nails, it isnt stronger because it doesnt have any special damage, ergo, deals the same to all monsters. while...
				//on flesh monsters it might look like a disadvantage, vs armor, or mechanical, even against ethereal ones, it does wonders
	+BLOODSPLATTER
	SeeSound ""
	DeathSound ""
	MissileType "EDShurikenTrail"
	MissileHeight 8
	Scale 0.08
	States
	{
	Spawn:
		SHUR ABCD 3 
		Loop
	XDeath:
	Crash:
		TNT1 A 1
		Stop
	Death:
		"####" "#" 1 A_FadeOut(0.03)
		Wait
	}
}
Actor EDShurikenTrail
{
	Scale 0.08
	+NOINTERACTION
	RenderStyle Add
	Alpha 0.8
	States
	{
	Spawn:
		SHUR AABBCCDD 1 A_FadeOut(0.3)
		Loop
	}
}

//***************************************************************

Actor ElectroDriverLightning
{
	var int user_life;
	Projectile
	+DONTREFLECT
	Speed 8
	Radius 8
	Height 12
	Damage (random(1,2))
	RenderStyle Add
	DamageType "Electric"
	ReactionTime 6
	Scale 0.2
	States
	{
	Spawn:
		TNT1 A 0
	Movement:
		TNT1 A 0 A_SpawnItemEx("ElecDrvrLightTrail",0,frandom(-1,1),frandom(-1,1),0,0,0,0,SXF_NOCHECKPOSITION)
		TNT1 A 0 A_SetUserVar("user_life",user_life+1)
		TNT1 A 0 A_JumpIf(user_life>=125,2)
		TNT1 A 0 A_Warp(AAPTR_DEFAULT,velx,vely,velz,0,WARPF_ABSOLUTEOFFSET,"Movement")
		TNT1 A 1
	Death:
		TNT1 A 0 A_Jump(256,"Type1","Type2","Type3","Type4","Type5")
	Type1:
		ZAP9 A 1 Bright A_FadeOut(0.3)
		Wait
	Type2:
		ZAP9 B 1 Bright A_FadeOut(0.3)
		Wait
	Type3:
		ZAP9 C 1 Bright A_FadeOut(0.3)
		Wait
	Type4:
		ZAP9 D 1 Bright A_FadeOut(0.3)
		Wait
	Type5:
		ZAP9 E 1 Bright A_FadeOut(0.3)
		Wait
	}
}



Actor ElecDrvrLightTrail
{
	+NOINTERACTION
	Scale 0.1
	+NOCLIP
	RenderStyle Add
	Translation "0:255=%[0,0,0]:[0.8,0.8,1.1]"
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_Jump(256,"Type1","Type2","Type3","Type4","Type5","Type6","Type7","Type8")
	Type1:
		TNT1 A 0 A_SpawnItemEx("ElectDrSpark",0,0,0,frandom(2.0,-2.0),frandom(2.0,-2.0),frandom(2.0,-2.0),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION,254)
		HSPL A 1 Bright A_FadeOut(0.4)
		Loop
	Type2:
		HSPL B 1 Bright A_FadeOut(0.4)
		Loop
	Type3:
		HSPL C 1 Bright A_FadeOut(0.4)
		Loop
	Type4:
		HSPL d 1 Bright A_FadeOut(0.4)
		Loop
	Type5:
		TNT1 A 0 A_SpawnItemEx("ElectDrSpark",0,0,0,frandom(2.0,-2.0),frandom(2.0,-2.0),frandom(2.0,-2.0),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION,254)
		HSPL E 1 Bright A_FadeOut(0.4)
		Loop
	Type6:
		HSPL F 1 Bright A_FadeOut(0.4)
		Loop
	Type7:
		HSPL G 1 Bright A_FadeOut(0.4)
		Loop
	Type8:
		HSPL H 1 Bright A_FadeOut(0.4)
		Loop
	}
}

Actor ElectDrSpark
{
	Translation "0:255=%[0,0,0]:[0.75,0.75,2.0]"
	+NOINTERACTION
	Scale 0.08
	RenderStyle Add
	Alpha 1.0
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_Jump(256,"S1","S2","S3","S4","S5","S6","S7","S8")
	S1:	X079 A 0	
	Goto Perform
	S2:	X079 B 0	
	Goto Perform
	S3:	X079 C 0	
	Goto Perform
	S4:	X079 D 0	
	Goto Perform
	S5:	X079 E 0	
	Goto Perform
	S6:	X079 F 0	
	Goto Perform
	S7:	X079 G 0	
	Goto Perform
	S8: X079 H 0	
	Goto Perform
	Perform:
		"####" "#" 1 Bright A_SetScale(ScaleX+0.0025)
		"####" "#" 0 A_FadeOut(0.07)
		Loop
	}
}



//***************************************************************

Actor ShuricaneProj
{
	var int user_counter;
	var int user_z;
	var int user_angle[2];
	Projectile
	+SEEKERMISSILE
	+DONTREFLECT
	+FORCERADIUSDMG
	Radius 6
	Height 10
	Speed 40
	Damage 100		//if it hits a monster, it will hurt badly, for 30 cells and 20 nails, it must
	SeeSound ""
	DeathSound ""
	Scale 0.3
	States
	{
	Spawn:
		SHUR A 0
	Looping:
		"####" AAABBBCCCDDD 1 A_SpawnItemEx("ShuricaneSparkSpawner",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		Loop
	
//By request of DBThanatos, this projectile now glues to targets and zaps them
//until they die.
	Death:
		"####" A 0 A_ChangeFlag("THRUACTORS",1)
		"####" A 0 A_SeekerMissile(0,0,1,256)
		"####" A 0 A_Stop
		"####" A 0 A_CheckCeiling("ShearCeiling")
	Shear:
		"####" A 0 A_SpawnItemEx("ElectDrSpark",0,0,0,frandom(2.0,-2.0),0,frandom(2.0,-2.0),random(0,359),SXF_NOCHECKPOSITION)
		"####" A 2 A_SpawnItemEx("ShuricanRailer",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_TRANSFERPOINTERS)
		"####" A 0 A_SetUserVar("user_counter",user_counter+1)
		"####" A 0 A_JumpIf(user_counter>=80,"DeathEnd")
		Loop
	ShearCeiling:
		"####" A 0 A_SpawnItemEx("ElectDrSpark",0,0,0,frandom(2.0,-2.0),0,frandom(2.0,-2.0),random(0,359),SXF_NOCHECKPOSITION)
		"####" A 2 A_SpawnItemEx("ShuricanRailer",0,0,-12,0,0,0,0,SXF_NOCHECKPOSITION|SXF_TRANSFERPOINTERS)
		"####" A 0 A_SetUserVar("user_counter",user_counter+1)
		"####" A 0 A_JumpIf(user_counter>=80,"DeathEnd")
		Loop
	Crash:
	XDeath:
		TNT1 A 0 A_ChangeFlag("THRUACTORS",1)
		TNT1 A 0 A_SetSpeed(0)
		TNT1 A 0 A_SeekerMissile(0,0,1,256)
		TNT1 A 0 A_SetUserVar(user_z,z)
		TNT1 A 0 A_SetUserArray(user_angle,0,angle)
		TNT1 A 0 A_Warp(AAPTR_TRACER,0,0,0,0,WARPF_NOCHECKPOSITION)
		TNT1 A 0 A_SetUserVar(user_z,user_z-z)
		TNT1 A 0 A_SetUserArray(user_angle,1,angle)
	Warp:
		SHUR A 0 A_JumpIfTargetInLOS(1,0,JLOSF_PROJECTILE|JLOSF_DEADNOJUMP)
		Goto End
		SHUR A 0 A_Warp(AAPTR_TRACER,-15,0,user_z,user_angle[0]-user_angle[1],WARPF_COPYINTERPOLATION|WARPF_NOCHECKPOSITION)
		SHUR A 0 A_Explode(6*random(1,4),32,0,0,32) //Respect the old damages
		SHUR A 0 A_SpawnItemEx("ElectDrSpark",0,0,0,frandom(2.0,-2.0),0,frandom(2.0,-2.0),random(0,359),SXF_NOCHECKPOSITION)
		SHUR A 1 A_SetUserVar("user_counter",user_counter+1)
		TNT1 A 0 A_JumpIf(user_counter>=80,1)
		Loop
		TNT1 A 0 A_SetUserVar("user_counter",0)
		SHUR A 0 A_LowGravity
		SHUR A 0 A_ChangeFlag("NOEXPLODEFLOOR",1)
	End:
		TNT1 AA 0 A_SpawnItemEx("ElectDrSpark",0,0,0,frandom(2.0,-2.0),0,frandom(2.0,-2.0),random(0,359),SXF_NOCHECKPOSITION,64)
		TNT1 A 1 A_SetUserVar("user_counter",user_counter+1)
		TNT1 A 0 A_JumpIf(user_counter>=70,1)
		Loop
	DeathEnd:
		SHUR A 1 A_FadeOut
		Wait
	}
}

Actor ShuricanRailer
{
	Projectile
	+NOINTERACTION
	+SEEKERMISSILE
	VSpeed 0
	Speed 0
	Radius 8
	Height 12
	States
	{
	Spawn:
		TNT1 A 0 NoDelay A_RearrangePointers(AAPTR_DEFAULT,AAPTR_DEFAULT,AAPTR_NULL)
		TNT1 A 0 A_SeekerMissile(90,90,1,256)
		TNT1 A 0 A_Stop
		TNT1 A 0 A_JumpIfTargetInLOS("Railer",360,JLOSF_PROJECTILE|JLOSF_DEADNOJUMP)
		Stop
	Railer:
		TNT1 A 0 A_FaceTracer
		TNT1 A 0 A_CustomMissile("FakeStartElecDrLghtSmll",6,0,0,0)
		//TNT1 A 1 A_CustomMissile("ElectroDriverLightningSmall",6,0,0,6)
		TNT1 A 1 A_CustomMissile("ElectroDriverLightningSeeker",6,0,0,CMF_TRACKOWNER|CMF_AIMDIRECTION)
		Stop
	}
}

Actor ElectroDriverLightningSeeker
{
	var int user_life;
	Projectile
	+DONTREFLECT
	+SEEKERMISSILE
	Speed 8
	Radius 4
	Height 4
	Damage (random(5,12))
	RenderStyle Add
	DamageType "Electric"
	ReactionTime 6
	Scale 0.2
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_SeekerMissile(90,90,3,256)
		TNT1 A 0 A_FaceTracer
	Movement:
		TNT1 A 0 A_SpawnItemEx("ElecDrvrLightTrail",0,frandom(-1,1),frandom(-1,1),0,0,0,0,SXF_NOCHECKPOSITION)
		TNT1 A 0 A_SetUserVar("user_life",user_life+1)
		TNT1 A 0 A_JumpIf(user_life>=125,2)
		TNT1 A 0 A_Warp(AAPTR_DEFAULT,velx,vely,velz,0,WARPF_ABSOLUTEOFFSET,"Movement")
		TNT1 A 1
	Death:
		TNT1 A 0 A_Jump(256,"Type1","Type2","Type3","Type4","Type5")
	Type1:
		ZAP9 A 1 Bright A_FadeOut(0.3)
		Wait
	Type2:
		ZAP9 B 1 Bright A_FadeOut(0.3)
		Wait
	Type3:
		ZAP9 C 1 Bright A_FadeOut(0.3)
		Wait
	Type4:
		ZAP9 D 1 Bright A_FadeOut(0.3)
		Wait
	Type5:
		ZAP9 E 1 Bright A_FadeOut(0.3)
		Wait
	}
}


Actor FakeStartElecDrLghtSmll
{
	Projectile
	Speed 20
	Damage 0
	Radius 2
	Height 2
	+NOCLIP
	Scale 0.22
	RenderStyle None
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 AA 1 A_SpawnItemEx("ElecDrvrLightTrailSmall",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		Stop
	}
}

Actor ElecDrvrLightTrailSmall : ElecDrvrLightTrail
{
	+NOINTERACTION
	Scale 0.12
}

Actor ShuricaneSparkSpawner
{
	+NOINTERACTION
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 AAAA 0 A_SpawnItemEx("ElectDrSpark",0,0,0,frandom(-0.1,-1.0),frandom(1.0,-1.0),frandom(1.0,-1.0),0,SXF_NOCHECKPOSITION)
		TNT1 A 1
		Stop
	}
}

Actor ShuricaneSparkSpawner2	//for when it hits a monster
{
	+NOINTERACTION
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 AAAAAAAAAAAAAAA 0 A_SpawnItemEx("ElectDrSpark",0,0,0,frandom(2.0,-2.0),frandom(2.0,-2.0),frandom(2.0,-2.0),0,SXF_NOCHECKPOSITION)
		TNT1 A 1
		Stop
	}
}

Actor ShuricaneSpark
{
	Translation "112:127=192:195"
	+NOINTERACTION
	Scale 0.3
	RenderStyle Add
	States
	{
	Spawn:
		EBLT ABCDEF 3 Bright
		Stop
	}
}


//=====================================================================================
//=====================================================================================
//	Small Chaingun
//	a.k.a. the Lizard Eater (Eidechsenesser in German)
//	pronounced Eye-Deck-Sen-esser
// Sprites and sounds ripped from Painkiller.
//=====================================================================================
//=====================================================================================

Actor AEoDEidechsenesserItem : CustomInventory
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL
	Scale 0.2
	Inventory.Amount 1
	Inventory.PickupMessage "You found the Eidechsenesser!"
	Inventory.PickupSound "weapons/stroggarmsaw/pickup"
	States
	{
	Spawn:
		D0A3 Z -1
		Loop
	Pickup:
		TNT1 A 0 A_JumpIfInventory("AEoDEidechsenesser",1,"Ammo")
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",7) <= 0,"Nothing")
		TNT1 A 0 A_GiveInventory("Weapon7Count",1)
		TNT1 A 0 A_GiveInventory("EidechsenesserDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDEidechsenesser",1)
		TNT1 A 0 	
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDEidechsenesser",1,"Ammo")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		TNT1 A 0 ACS_NamedExecute("s798",0,7,83,0)
		Fail
	Ammo:
		TNT1 A 0 A_GiveInventory("AEoDEidechsenesser",1)
		Stop
	}
}



Actor EidechsenesserDrop : CustomInventory
{
	Inventory.MaxAmount 1
	States
	{
	Use:
		TNT1 A 0
		TNT1 A 0 A_SpawnItemEx("DroppedEidechsenesser",0,0,32,8,0,0,0,SXF_NOCHECKPOSITION,0)
		Stop
	}
}

Actor DroppedEidechsenesser
{
	Radius 16
	Height 20
	Scale 0.2
	States
	{
	Spawn:
		D0A3 Z 15
		TNT1 A 0 A_SpawnItemEx("AEoDEidechsenesserNoAmmo",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER,0)
		Stop
	}
}

Actor AEoDEidechsenesserNoAmmo : AEoDEidechsenesserItem
{
	+INVENTORY.IGNORESKILL
	States
	{
	Spawn:
		D0A3 Z -1
		Loop
	Pickup:
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",7) <= 0,"Nothing")
		TNT1 A 0 A_JumpIfInventory("AEClip",60,"Ammo")
		TNT1 A 0 A_JumpIfInventory("MiniRockets",15,"Ammo3")
		TNT1 A 0 A_GiveInventory("Weapon7Count",1)
		TNT1 A 0 A_GiveInventory("EidechsenesserDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDEidechsenesser",1)
		TNT1 A 0 A_TakeInventory("AEClip",60)
		TNT1 A 0 A_TakeInventory("MiniRockets",15)
		TNT1 A 0 	
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDEidechsenesser",1,"Ammo")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		TNT1 A 0 ACS_NamedExecute("s798",0,7,83,0)
		Fail
	Ammo:
		TNT1 A 0 A_JumpIfInventory("MiniRockets",15,1)
		Goto Ammo2
		TNT1 A 0 A_TakeInventory("AEClip",60)
		TNT1 A 0 A_TakeInventory("MiniRockets",15)
		TNT1 A 0 A_JumpIfInventory("AEoDEidechsenesser",1,2)
		TNT1 A 0 A_GiveInventory("Weapon7Count",1)
		TNT1 A 0 A_GiveInventory("EidechsenesserDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDEidechsenesser",1)
		Stop
	Ammo2:
		TNT1 A 0 A_TakeInventory("AEClip",60)
		TNT1 A 0 A_GiveInventory("Weapon7Count",1)
		TNT1 A 0 A_GiveInventory("EidechsenesserDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDEidechsenesser",1)
		TNT1 A 0 A_TakeInventory("MiniRockets",15)
		Stop
	Ammo3:
		TNT1 A 0 A_TakeInventory("MiniRockets",15)
		TNT1 A 0 A_GiveInventory("Weapon7Count",1)
		TNT1 A 0 A_GiveInventory("EidechsenesserDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDEidechsenesser",1)
		TNT1 A 0 A_TakeInventory("AEClip",60)
		Stop
	}
}





Actor AEoDEidechsenesser : Weapon
{
	Weapon.AmmoType "AEClip"
	Weapon.AmmoUse 1
	Weapon.AmmoGive 60
	Weapon.AmmoType2 "MiniRockets"
	Weapon.AmmoUse2 3
	Weapon.AmmoGive2 15
	Weapon.SelectionOrder 11050
	Scale 0.2
	Inventory.PickupSound "painkiller/weapon/chaingun/PickWeapon"
	weapon.upsound "weapons/draw"
	AttackSound "reilsss/weapons/mp5fire2"
	Inventory.PickupMessage "You found the Eidechsenesser!"
	Tag "Eidechsenesser"
	States
	{
	Spawn:
		D0A3 Z -1
		Stop
	Ready:
		D003 D 1 A_WeaponReady
		Loop
	Deselect:
		TNT1 A 0 	
		D003 D 1 A_Lower
		TNT1 AA 0 A_Lower
		Loop
	Select:
		TNT1 A 0 	
		D003 D 1 A_Raise
		TNT1 AA 0 A_Raise
		Loop
	Fire:
		TNT1 A 0 A_FireBullets(5,5,1,10,"BulletPuff")
		D003 M 1 Bright A_SetPitch(pitch-1)
		TNT1 A 0 A_FireCustomMissile("PistolCasingSpawner",-50,0, 0,0)
		D003 M 1 Bright A_SetPitch(pitch+1)
		D003 B 1 
		D003 B 1
		TNT1 A 0 A_Refire("Type2")
		Goto Ready
	Type2:
		TNT1 A 0 A_FireBullets(5,5,1,10,"BulletPuff")
		D003 N 1 Bright A_SetPitch(pitch-1)
		TNT1 A 0 A_FireCustomMissile("PistolCasingSpawner",-50,0, 0,0)
		D003 N 1 Bright A_SetPitch(pitch+1)
		D003 B 1 
		D003 B 1
		TNT1 A 0 A_Refire("Fire")
		Goto Ready
	AltFire:
		TNT1 A 0 A_FireCustomMissile("MuzzleFlashOrange",0,0,4,7)
		TNT1 A 0 A_PlayWeaponSound("painkiller/weapon/smallchaingun/RocketShoot")
		TNT1 A 0 Bright A_FireCustomMissile("MCHBomb",0,1,0,0)
		TNT1 A 0 Bright A_FireCustomMissile("MCHBomb2",0,0,0,0)
		TNT1 A 0 Bright A_FireCustomMissile("MCHBomb3",0,0,0,0)
		TNT1 A 0 A_SetPitch(pitch-6)
		TNT1 A 0 A_GunFlash("AltFlash")
		D016 LMN 1 Bright
		D016 OPZ 1 Bright A_SetPitch(pitch+1)
		D003 FFF 1 A_SetPitch(pitch+1)
		D003 GHIJKL 4
		Goto Ready
	AltFlash:
		D003 E 4
		D003 F 2
		Stop
	}
}

Actor MCHBomb
{
	Projectile
	Speed 20
	Damage 17
	Radius 8
	Height 12
	Scale 0.3
	+EXTREMEDEATH
	DeathSound "painkiller/weapon/boltgun/GrenExplo"
	Translation "0:255=%[0,0,0]:[0.5,0.5,0.5]"
	States
	{
	Spawn:
		MI04 A 0
		MI04 A 1 Bright A_Weave(3,3,1.0,1.0)	TNT1 A 0 A_SpawnItemEx("MCHBombTrail",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		MI04 A 1 Bright A_Weave(3,3,1.0,1.0)	TNT1 A 0 A_SpawnItemEx("MCHBombTrail",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		MI04 A 1 Bright A_Weave(3,3,1.0,1.0)	TNT1 A 0 A_SpawnItemEx("MCHBombTrail",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		MI04 B 1 Bright A_Weave(3,3,1.0,1.0)	TNT1 A 0 A_SpawnItemEx("MCHBombTrail",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		MI04 B 1 Bright A_Weave(3,3,1.0,1.0)	TNT1 A 0 A_SpawnItemEx("MCHBombTrail",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		MI04 B 1 Bright A_Weave(3,3,1.0,1.0)	TNT1 A 0 A_SpawnItemEx("MCHBombTrail",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		MI04 C 1 Bright A_Weave(3,3,1.0,1.0)	TNT1 A 0 A_SpawnItemEx("MCHBombTrail",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		MI04 C 1 Bright A_Weave(3,3,1.0,1.0)	TNT1 A 0 A_SpawnItemEx("MCHBombTrail",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		MI04 C 1 Bright A_Weave(3,3,1.0,1.0)	TNT1 A 0 A_SpawnItemEx("MCHBombTrail",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		MI04 D 1 Bright A_Weave(3,3,1.0,1.0)	TNT1 A 0 A_SpawnItemEx("MCHBombTrail",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		MI04 D 1 Bright A_Weave(3,3,1.0,1.0)	TNT1 A 0 A_SpawnItemEx("MCHBombTrail",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		MI04 D 1 Bright A_Weave(3,3,1.0,1.0)	TNT1 A 0 A_SpawnItemEx("MCHBombTrail",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		Loop
	Death:
		TNT1 A 0 A_Explode(40,128)
		TNT1 A 3 A_SpawnItemEx("NewExplosionSmallLittleBigger",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		Stop
	}
}

Actor MCHBomb2 : MCHBomb
{
	States
	{
	Spawn:
		MI04 AAABBBCC 1 Bright A_SpawnItemEx("MCHBombTrail",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		MI04 C 1 Bright A_Weave(3,3,1.0,1.0)	TNT1 A 0 A_SpawnItemEx("MCHBombTrail",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		MI04 D 1 Bright A_Weave(3,3,1.0,1.0)	TNT1 A 0 A_SpawnItemEx("MCHBombTrail",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		MI04 D 1 Bright A_Weave(3,3,1.0,1.0)	TNT1 A 0 A_SpawnItemEx("MCHBombTrail",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		MI04 D 1 Bright A_Weave(3,3,1.0,1.0)	TNT1 A 0 A_SpawnItemEx("MCHBombTrail",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		MI04 A 1 Bright A_Weave(3,3,1.0,1.0)	TNT1 A 0 A_SpawnItemEx("MCHBombTrail",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		MI04 A 1 Bright A_Weave(3,3,1.0,1.0)	TNT1 A 0 A_SpawnItemEx("MCHBombTrail",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		MI04 A 1 Bright A_Weave(3,3,1.0,1.0)	TNT1 A 0 A_SpawnItemEx("MCHBombTrail",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		MI04 B 1 Bright A_Weave(3,3,1.0,1.0)	TNT1 A 0 A_SpawnItemEx("MCHBombTrail",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		MI04 B 1 Bright A_Weave(3,3,1.0,1.0)	TNT1 A 0 A_SpawnItemEx("MCHBombTrail",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		MI04 B 1 Bright A_Weave(3,3,1.0,1.0)	TNT1 A 0 A_SpawnItemEx("MCHBombTrail",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		MI04 C 1 Bright A_Weave(3,3,1.0,1.0)	TNT1 A 0 A_SpawnItemEx("MCHBombTrail",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		MI04 C 1 Bright A_Weave(3,3,1.0,1.0)	TNT1 A 0 A_SpawnItemEx("MCHBombTrail",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		Goto Spawn+8
	}
}
Actor MCHBomb3 : MCHBomb
{
	States
	{
	Spawn:
		MI04 AAABBBCCCDDDAAA 1 Bright A_SpawnItemEx("MCHBombTrail",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		
		MI04 B 1 Bright A_Weave(3,3,1.0,1.0)	TNT1 A 0 A_SpawnItemEx("MCHBombTrail",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		MI04 B 1 Bright A_Weave(3,3,1.0,1.0)	TNT1 A 0 A_SpawnItemEx("MCHBombTrail",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		MI04 B 1 Bright A_Weave(3,3,1.0,1.0)	TNT1 A 0 A_SpawnItemEx("MCHBombTrail",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		MI04 C 1 Bright A_Weave(3,3,1.0,1.0)	TNT1 A 0 A_SpawnItemEx("MCHBombTrail",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		MI04 C 1 Bright A_Weave(3,3,1.0,1.0)	TNT1 A 0 A_SpawnItemEx("MCHBombTrail",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		MI04 C 1 Bright A_Weave(3,3,1.0,1.0)	TNT1 A 0 A_SpawnItemEx("MCHBombTrail",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		MI04 D 1 Bright A_Weave(3,3,1.0,1.0)	TNT1 A 0 A_SpawnItemEx("MCHBombTrail",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		MI04 D 1 Bright A_Weave(3,3,1.0,1.0)	TNT1 A 0 A_SpawnItemEx("MCHBombTrail",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		MI04 D 1 Bright A_Weave(3,3,1.0,1.0)	TNT1 A 0 A_SpawnItemEx("MCHBombTrail",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		MI04 A 1 Bright A_Weave(3,3,1.0,1.0)	TNT1 A 0 A_SpawnItemEx("MCHBombTrail",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		MI04 A 1 Bright A_Weave(3,3,1.0,1.0)	TNT1 A 0 A_SpawnItemEx("MCHBombTrail",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		MI04 A 1 Bright A_Weave(3,3,1.0,1.0)	TNT1 A 0 A_SpawnItemEx("MCHBombTrail",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		Goto Spawn+15
	}
}

Actor BSGShardTrailCopy
{
	+NOINTERACTION
	Scale 0.07
	RenderStyle Translucent
	Alpha 0.7
	States
	{
	Spawn:
		FX04 D 1 Bright A_FadeOut(0.05)
		Wait
	}
}

Actor MCHBombTrail : BSGShardTrailCopy
{
	Scale 0.3
	Alpha 0.4
}





//======================================================================================
//======================================================================================
// This weapon is the direct competitor of the Vulcan cannon. It has the same strength,
// kills just as fast, but the difference is how they work. The Vulcan you need to keep
// firing and hope you can control the bursts. This one however, is much easier to
// control due to the spinning only mode, triggered with "alt fire button". So, the
// bursts are much more controlled now. So that's a big gain there. However, the vulcan
// still has as altfire the shell massacre mode, where using shotgun shells, you can
// kill almost about anything when at full Ammo.
//======================================================================================
//======================================================================================
Actor AEoDHailstormItem : CustomInventory
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL
	Inventory.Amount 1
	Inventory.PickupMessage "You found the Hailstorm Minigun! So drool-worthy..."
	Inventory.PickupSound "BS/Hailstorm/Pickup"
	Scale 0.23
	States
	{
	Spawn:
		D014 I -1
		Loop
	Pickup:
		TNT1 A 0 A_JumpIfInventory("AEoDHailstorm",1,"Ammo")
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",7) <= 0,"Nothing")
		TNT1 A 0 A_GiveInventory("Weapon7Count",1)
		TNT1 A 0 A_GiveInventory("HailstormDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDHailstorm",1)
		TNT1 A 0 	
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDHailstorm",1,"Ammo")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		TNT1 A 0 ACS_NamedExecute("s798",0,7,101,0)
		Fail
	Ammo:
		TNT1 A 0 A_GiveInventory("AEoDHailstorm",1)
		Stop
	}
}

Actor HailstormDrop : CustomInventory
{
	Inventory.MaxAmount 1
	States
	{
	Use:
		TNT1 A 0
		TNT1 A 0 A_SpawnItemEx("DroppedHailstorm",0,0,32,8,0,0,0,SXF_NOCHECKPOSITION,0)
		Stop
	}
}

Actor DroppedHailstorm
{
	Radius 16
	Height 20
	Scale 0.23
	States
	{
	Spawn:
		D014 I 15
		TNT1 A 0 A_SpawnItemEx("AEoDHailstormNoAmmo",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER,0)
		Stop
	}
}

Actor AEoDHailstormNoAmmo : AEoDHailstormItem
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL
	Inventory.Amount 1
	Inventory.PickupMessage "You found the Hailstorm Minigun! So drool-worthy..."
	Inventory.PickupSound "BS/Hailstorm/Pickup"
	Scale 0.23
	States
	{
	Spawn:
		D014 I -1
		Loop
	Pickup:
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",7) <= 0,"Nothing")
		TNT1 A 0 A_JumpIfInventory("AEClip",100,"Ammo")
		TNT1 A 0 A_GiveInventory("Weapon7Count",1)
		TNT1 A 0 A_GiveInventory("HailstormDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDHailstorm",1)
		TNT1 A 0 A_TakeInventory("AEClip",100)
		TNT1 A 0 	
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDHailstorm",1,"Ammo")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		TNT1 A 0 ACS_NamedExecute("s798",0,7,101,0)
		Fail
	Ammo:
		TNT1 A 0 A_TakeInventory("AEClip",100)
		TNT1 A 0 A_JumpIfInventory("AEoDHailstorm",1,2)
		TNT1 A 0 A_GiveInventory("Weapon7Count",1)
		TNT1 A 0 A_GiveInventory("HailstormDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDHailstorm",1)
		Stop
	}
}

Actor AEoDHailstorm : Weapon
{
	+WEAPON.AMMO_OPTIONAL
	+WEAPON.ALT_AMMO_OPTIONAL
	Weapon.AmmoType "AEClip"
	Weapon.AmmoUse 2
	Weapon.AmmoGive 100
	Weapon.SelectionOrder 11250
	Inventory.PickupSound "BS/Hailstorm/Pickup"
	Inventory.PickupMessage "You found the Hailstorm Minigun! So drool-worthy..."
	Weapon.UpSound "BS/Hailstorm/Raise"
	Tag "Hailstorm minigun"
	Scale 0.23
	States
	{
	Spawn: 
		D014 I -1
		Stop
	Ready:
		D014 A 1 A_WeaponReady
		Loop
	Select:
		TNT1 A 0 	
		D014 A 0 A_TakeInventory("HailstormSpinup",100)
		D014 A 1 A_Raise
		D014 AA 0 A_Raise
		Loop
	Deselect:
		"####" "#" 0 	
		"####" "#" 0 A_TakeInventory("HailstormSpinup",100)
		"####" "#" 0 A_StopSound(6)
		"####" "#" 1 A_Lower
		"####" "##" 0 A_Lower
		Loop
	Fire:
		D014 A 0 A_JumpIfInventory("HailstormSpinup",1,"SpinFire")
		Goto SpinningUp
	Deny:
		D014 A 0 A_PlaySound("rgp/no",CHAN_WEAPON,1,0)
		D014 A 50 A_WeaponReady(WRF_NOFIRE)
		Goto Ready
	Hold:
		D014 A 0
		Goto SpinningUp
	AltFire:
		D014 A 0 A_JumpIfInventory("HailstormSpinup",1,"Taker")
		D014 A 0 A_GiveInventory("HailstormSpinup",1)
		Goto SpinningUp
	Taker:
		D014 A 0 A_TakeInventory("HailstormSpinup",1000)
		Goto SpinDown
	SpinningUp:
		D014 A 0 A_JumpIfInventory("PowerEconomizer",1,3)
		D014 A 0 A_JumpIfInventory("InfiniteAmmo",1,2)
		D014 A 0 A_JumpIfInventory("AEClip",2,1)
		Goto Deny
		D014 A 0 A_StopSound(5)
		D014 A 0 A_StopSound(6)
		D014 A 0 A_StopSound(7)
		D014 A 0 A_PlaySound("BS/Hailstorm/SpinUp",6,1,0)
		D014 ABCD 3
		D014 ABCD 2 
		Goto SpinReady
	SpinDown:
		D014 A 0 A_StopSound(5)
		D014 A 0 A_StopSound(6)
		D014 A 0 A_StopSound(7)
		D014 A 0 A_PlaySound("BS/Hailstorm/SpinDown1",5,1,0)
		D014 A 0 A_PlaySound("BS/Hailstorm/SpinDown2",6,1,0)
		D014 A 0 A_PlaySound("BS/Hailstorm/SpinDown3",7,1,0)
		D014 A 0 A_TakeInventory("HailstormSpinup",1000)
		D014 ABCD 1 
		D014 AABBCCDD 1
		D014 AABBCCDD 1 A_WeaponReady
		D014 AAABBBCCCDDDAAABBBCCCDDDAAABBBCCCDDD 1 A_WeaponReady
		Goto Ready
	SpinReady:
		D014 A 0 A_StopSound(5)
		D014 A 0 A_PlaySound("BS/Hailstorm/BarrelSpinLoop",6,0.4,1)
		D014 A 0 A_JumpIfInventory("HailstormSpinup",1,"SR2")
		Goto SpinFire
	SR2:
		D014 A 0 A_JumpIfInventory("PowerEconomizer",1,3)
		D014 A 0 A_JumpIfInventory("InfiniteAmmo",1,2)
		D014 A 0 A_JumpIfInventory("AEClip",2,1)
		Goto SRNoAmmo
		D014 ABCD 1 A_WeaponReady(WRF_NOBOB)
		Loop
	SRNoAmmo:
		D014 A 0 A_JumpIfInventory("HailstormSpinup",1,"SRNoAmmoSecondary")
		D014 A 0 A_StopSound(5)
		D014 A 0 A_JumpIfInventory("PowerEconomizer",1,"SR2")
		D014 A 0 A_JumpIfInventory("InfiniteAmmo",1,"SR2")
		D014 A 0 A_JumpIfInventory("AEClip",2,"SR2")
		D014 ABCD 1 A_WeaponReady(WRF_NOBOB|WRF_NOFIRE)
		Goto SpinDown
	SRNoAmmoSecondary:
		D014 A 0 A_JumpIfInventory("HailstormSpinup",1,1)
		Goto SRNoAmmo
		D014 A 0 A_StopSound(5)
		D014 A 0 A_JumpIfInventory("PowerEconomizer",1,"SR2")
		D014 A 0 A_JumpIfInventory("InfiniteAmmo",1,"SR2")
		D014 A 0 A_JumpIfInventory("AEClip",2,"SR2")
		D014 ABCD 1 A_WeaponReady(WRF_NOBOB|WRF_NOPRIMARY)
		Loop
	SpinFire:
		D014 A 0 A_PlaySound("BS/Hailstorm/FireLoop",5,1,1)
	SpinFire1:
		D014 A 0 A_JumpIfInventory("PowerEconomizer",1,3)
		D014 A 0 A_JumpIfInventory("InfiniteAmmo",1,2)
		D014 E 0 A_JumpIfInventory("AEClip",2,1)
		Goto SRNoAmmo
		TNT1 A 0 A_FireCustomMissile("GunSmallSmokeSpawner",0,0,3,8)
		TNT1 A 0 A_Recoil(0.16)
		D014 E 1 Bright A_FireBullets(4, 4, 4, 5, "BDPuff2", 1)
		D014 A 0 A_SetPitch(pitch-0.8)
		TNT1 A 0 A_FireCustomMissile("PistolCasingSpawner",-55,0, 0,0)
		D014 E 0 A_ReFire("SpinFire2")
		D014 E 0 A_JumpIfInventory("HailstormSpinup",1,1)
		Goto SpinDown
		D014 E 0 A_StopSound(5)
		Goto SpinReady
	SpinFire2:
		TNT1 A 0 A_FireCustomMissile("GunSmallSmokeSpawner",0,0,3,8)
		TNT1 A 0 A_Recoil(0.16)
		D014 F 1 Bright A_FireBullets(4, 4, 4, 5, "BDPuff2", 1)
		D014 A 0 A_SetPitch(pitch+0.8)
		TNT1 A 0 A_FireCustomMissile("PistolCasingSpawner",-55,0, 0,0)
		D014 E 0 A_ReFire("SpinFire3")
		D014 E 0 A_JumpIfInventory("HailstormSpinup",1,1)
		Goto SpinDown
		D014 E 0 A_StopSound(5)
		Goto SpinReady
	SpinFire3:
		TNT1 A 0 A_FireCustomMissile("GunSmallSmokeSpawner",0,0,3,8) 
		TNT1 A 0 A_Recoil(0.16)
		D014 G 1 Bright A_FireBullets(4, 4, 4, 5, "BDPuff2", 1)
		D014 A 0 A_SetPitch(pitch-0.8)
		TNT1 A 0 A_FireCustomMissile("PistolCasingSpawner",-55,0, 0,0)
		D014 E 0 A_ReFire("SpinFire4")
		D014 E 0 A_JumpIfInventory("HailstormSpinup",1,1)
		Goto SpinDown
		D014 E 0 A_StopSound(5)
		Goto SpinReady
	SpinFire4:
		TNT1 A 0 A_FireCustomMissile("GunSmallSmokeSpawner",0,0,3,8)
		TNT1 A 0 A_Recoil(0.16)
		D014 H 1 Bright A_FireBullets(4, 4, 4, 5, "BDPuff2", 1)
		D014 A 0 A_SetPitch(pitch+0.8)
		TNT1 A 0 A_FireCustomMissile("PistolCasingSpawner",-55,0, 0,0)
		D014 E 0 A_ReFire("SpinFire1")
		D014 E 0 A_JumpIfInventory("HailstormSpinup",1,1)
		Goto SpinDown
		D014 E 0 A_StopSound(5)
		Goto SpinReady
	}
}

Actor HailstormSpinup : Inventory
{	Inventory.MaxAmount 1	}