//================================================================================================================
//================================================================================================================
//
//
//					AEons Of Death v6: Class 9 weapons
//
//
//================================================================================================================
//================================================================================================================




//==================================================================================
//==================================================================================
// Original weapon from Daniel's Arsenal
// Slightly modified by DBT for AEoD
// Weapon graphics by Eriance
//==================================================================================
//==================================================================================

Actor AEoDSoulReaverItem : CustomInventory 6122
{
	+FLOORCLIP
	+FLOATBOB
	+INVENTORY.IGNORESKILL
	Inventory.Amount 1
	Inventory.PickupMessage "You have acquired the Soul Reaver!"
	Inventory.PickupSound "weaponbuild" 
	Scale 0.6
	States
	{
	Spawn:
		T001 H -1
		Loop
	Pickup:
		TNT1 A 0 A_JumpIfInventory("AEoDSoulReaver",1,"Ammo")
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",9) <= 0,"Nothing")
		TNT1 A 0 A_GiveInventory("Weapon9Count",1)
		TNT1 A 0 A_GiveInventory("SoulReaverDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDSoulReaver",1)
		TNT1 A 0 	
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDSoulReaver",1,"Ammo")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		TNT1 A 0 ACS_NamedExecute("s798",0,9,0,0)
		Fail
	Ammo:
		TNT1 A 0 A_GiveInventory("AEoDSoulReaver",1)
		Stop
	}
}

Actor AEoDSoulReaver : Weapon // 6122
{
	Weapon.SelectionOrder 50
	+WEAPON.CHEATNOTWEAPON
	+INVENTORY.IGNORESKILL
	Inventory.PickupMessage "You have acquired the Soul Reaver!"
	Obituary "%o was erased by %k's Soul Reaver."
	weapon.upsound "weapons/draw"
	Weapon.AmmoType1 "RedMana"
	Weapon.AmmoType2 "RedMana"
	Weapon.AmmoGive 30
	Weapon.AmmoUse1 5
	Weapon.AmmoUse2 10
	Weapon.SelectionOrder 18800
	Scale 0.6
	+INVENTORY.FANCYPICKUPSOUND
	Tag "Soul reaver"
	States
	{
	Spawn:
		T001 H -1 Bright
		Stop
	Ready:
		T001 A 1 A_WeaponReady
		Loop
	Deselect:
		TNT1 A 0 	
		T001 A 1 A_Lower
		T001 AA 0 A_Lower
		Loop
	Select:
		TNT1 A 0 	
		T001 A 1 A_Raise
		T001 AA 0 A_Raise
		Loop
	Fire:
		T001 C 2 Bright A_Light2
		T001 B 0 A_SetBlend("CC 00 00",0.5,10)
		T001 B 0 A_PlaySound("Firestorm/Cast",CHAN_WEAPON,1,0) //A_PlayWeaponSound("Diablo/Melee1")
		T001 B 2 Bright A_FireCustomMissile("FireStormBigBall",0,1,0,0) //A_FireCustomMissile("SkullgunShot",0,1,0,5)
		TNT1 A 0 A_SetPitch(pitch+2)
		T001 B 0 A_Light1
		T001 B 1 A_SetPitch(pitch-1)
		T001 A 0 A_Light0
		T001 A 15 A_SetPitch(pitch-1)
		Goto Ready
	AltFire:
		T001 A 5 A_PlayWeaponSound("Gargoyle/Idle")
		T001 CDEF 5 Bright
		T001 B 0 A_SetBlend("CC 00 00",0.8,35)
		T001 B 0 A_PlayWeaponSound("Lich/Attack1")
		T001 G 0 Bright A_FireCustomMissile("SkullgunAltShot",0,1,0,9)
		T001 G 3 A_SetPitch(pitch+7)
		T001 GGGGGGG 1 Bright A_SetPitch(pitch-1)
		T001 FEDCA 3
		Goto Ready
	}
}

Actor FireStormBigBall
{
	var int user_z[3];
	//[0] = The z Height where the fireball hit the actor
	//[1] = The base of the actor
	//[2] = [0] - [1]
	var int user_count;
	var int user_angle;
	var int user_silent;
	var int user_damage;
	var int user_dmgmax;
	var int user_distance;
	Projectile
	Radius 8
	Height 8
	+HITTRACER //This will set our warping enemy for us.
	+DONTREFLECT
	+FORCERADIUSDMG
	+SEEKERMISSILE
	+EXTREMEDEATH
	+NODAMAGETHRUST
	DamageType "Unholy"
	DeathType "Extreme"
	Translation "0:255=%[0,0,0]:[1,0,0]"
	RenderStyle Add
	Damage 0 //NEVER set this value higher! Otherwise, it will spazz out!
	Speed 40
	Scale 0.65
	Alpha 0.75
	States
	{
	Spawn:
		GDBA A 0 NoDelay A_SetUserVar("user_count",45) //Set up how long it can last before "coming to a close".
		GDBA A 0 A_SetUserVar("user_damage",40) //the max amount of damage within the explosions random number damage.
		GDBA A 0 A_SetUserVar("user_distance",60)
		GDBA A 0 A_SetUserVar("user_dmgmax",user_damage*user_count) //Set up the max amount of damage it can give.
	Moving:
		GDBA A 1 Bright A_SpawnItemEx("FirestormBallTrail2",0,0,0,0,0,0,0,32|SXF_TRANSFERTRANSLATION|SXF_TRANSFERSCALE)
		GDBA A 0 A_SeekerMissile(7,7)
		Loop
	Crash:
	XDeath:
	Death.Extreme:
		GDBA A 0 A_ChangeFlag("NOINTERACTION",1) //Disallow any extra interactions.
		GDBA A 0 A_SetUserVar("user_count",45) //Set up how long it can last before "coming to a close".
		GDBA A 0 A_SetUserVar("user_damage",40) //the max amount of damage within the explosions random number damage.
		GDBA A 0 A_SetUserVar("user_distance",60)
		GDBA A 0 A_SetUserVar("user_dmgmax",user_damage*user_count) //Set up the max amount of damage it can give.
		TNT1 A 0 A_Stop		
		Goto Check
		//We no longer need to perform A_SeekerMissile thanks to +HITTRACER.
	Check:
		//Get Height offsets. That's what this section deals with. See flail gun.
		TNT1 A 0 A_SetUserArray("user_z",0,z) 
		TNT1 A 0 A_Warp(AAPTR_TRACER,0,0,0,0,WARPF_NOCHECKPOSITION)
		TNT1 A 0 A_SetUserArray("user_z",1,z)
		TNT1 A 0 A_SetUserArray("user_z",2,(user_z[0]-user_z[1]))
	Firestorm:
		TNT1 A 0 A_Warp(AAPTR_TRACER,0,0,user_z[2],0,WARPF_NOCHECKPOSITION) //Restore original height.
		TNT1 A 0 A_SpawnItemEx("FirestormSwirly",0,0,0,0,0,0,0,32|SXF_TRANSFERPOINTERS|SXF_SETMASTER|SXF_ORIGINATOR)
		TNT1 AAAA 0 A_SpawnItemEx("FirestormSpinner",0,0,0,0,0,0,0,32|SXF_TRANSFERPOINTERS|SXF_SETMASTER|SXF_ORIGINATOR) //Fireballz!
		TNT1 A 1 A_PlaySound("Firestorm/Loop",5,1,1)
	Burning:
		TNT1 A 0 A_Warp(AAPTR_TRACER,0,0,user_z[2],0,WARPF_NOCHECKPOSITION,1)
		Goto End
		//ARE... YOU... DEAD... YET!? - Children of Bodom
		TNT1 A 0 A_JumpIfHealthLower(1,"End",AAPTR_TRACER)//A_JumpIfTargetInLOS(1,360,JLOSF_PROJECTILE|JLOSF_DEADNOJUMP|JLOSF_NOSIGHT)
		TNT1 A 0 A_Explode(random((user_damage/2.0),(user_damage)),user_distance,0,0,user_distance)
		TNT1 A 0 A_SetUserVar("user_count",user_count-1)
		TNT1 A 1 A_SetUserVar("user_dmgmax",(user_damage*user_count)) //A bit more accurate than before.
		TNT1 A 0 A_JumpIf(user_count <= 0,1)
		Loop
	//Shut off the sound. Funny thing is, in Magic Carpet 2: The Netherworlds, this
	//just constantly played one sound and overrode it over and over again.
	//Zdoom doesn't exactly handle with such finesse considering frame rates...
	//So I just recorded the loop and had it play in the mean time.
		TNT1 A 0 A_PlaySound("Firestorm/Explosion",6,1,0) 
		TNT1 A 20 A_StopSound(5)
	End:
		TNT1 A 0 A_JumpIf(user_count <= 0,3)
		TNT1 A 0 A_RearrangePointers(AAPTR_PLAYER1,AAPTR_DEFAULT,AAPTR_DEFAULT,4)
		TNT1 A 0 A_Explode(user_dmgmax,192,0,0,128,0,0) //Whatever's left over, spread it out.
		TNT1 A 0 A_StopSound(5)
		TNT1 A 0 A_PlaySound("Firestorm/Explosion",5,1,0)
		TNT1 A 0 A_Warp(AAPTR_TRACER,0,0,user_z[2],0,WARPF_NOCHECKPOSITION)
		TNT1 A 0 Thing_SetTranslation(0,0)
		X125 ABCDEFG random(1,3) Bright A_Stop
		X125 HIJKLMNOPQR 1 Bright A_FadeOut(0.05)
		Wait
	Death:
		TNT1 A 0 A_ChangeFlag("NOINTERACTION",1)
		TNT1 A 0 A_Stop
		TNT1 A 0 A_SetUserVar("user_count",45) //Set up how long it can last before "coming to a close".
		TNT1 A 0 A_SetUserVar("user_damage",40) //the max amount of damage within the explosions random number damage.
		TNT1 A 0 A_SetUserVar("user_dmgmax",user_damage*user_count) //Set up the max amount of damage it can give.
		TNT1 A 0 A_CheckFloor("Floor")
		TNT1 A 0 A_CheckCeiling("Ceiling")
		Goto Set
	Floor:
		TNT1 A 0 A_Warp(AAPTR_DEFAULT,0,0,16,0,WARPF_NOCHECKPOSITION)
		Goto Set
	Ceiling:
		TNT1 A 0 A_Warp(AAPTR_DEFAULT,0,0,-32,0,WARPF_NOCHECKPOSITION)
		Goto Set
	Set:
		TNT1 A 0 A_SpawnItemEx("FirestormMasterSpawner",0,0,0,0,0,0,0,32)
	Ticker:
		TNT1 A 0 A_Explode(user_damage,user_distance,0,0,user_distance)
		TNT1 A 1 A_SetUserVar("user_count",user_count-1) //A_PlaySound("Firestorm/Explosion",6,1,0)
		TNT1 A 0 A_JumpIf(user_count <= 0,1)
		Loop
		TNT1 A 20 Thing_SetTranslation(0,0)
		X125 ABCDEFG random(1,3) Bright
		X125 HIJKLMNOPQR 1 Bright A_FadeOut(0.05)
		Wait
	}
}

//	Purely cosmetic. Does nothing but play a sound when an enemy is 
//	"standing within the storm".
Actor FirestormMasterSpawner
{
	var int user_count;
	var int user_contact;
	Radius 1
	Height 1
	Monster
	+FRIENDLY
	+NOINTERACTION
	-COUNTKILL
	+NODAMAGE
	+NOPAIN
	+INVULNERABLE
	+NONSHOOTABLE
	+NOTARGETSWITCH
	+LOOKALLAROUND
	+NOTONAUTOMAP
	DamageFactor 0.0
	DamageFactor "Normal", 0.0
	+DONTTHRUST
	States
	{
	Spawn:
		TNT1 A 0 NoDelay A_SetUserVar("user_count",45)
		TNT1 AAAA 0 A_SpawnItemEx("FirestormSpinner",0,0,0,0,0,0,0,32|SXF_SETMASTER,0,9001)
		TNT1 A 0 A_SpawnItemEx("FirestormSwirly",0,0,0,0,0,0,0,32|SXF_SETMASTER,0,9001)
	Idle:
		TNT1 A 0 A_LookEx(LOF_NOSOUNDCHECK,0,120,1,360,"See")
		TNT1 A 1 A_SetUserVar("user_count",user_count-1)
		TNT1 A 0 A_JumpIf(user_count <= 0, "End")
		Loop
	See:
		TNT1 A 0 A_FaceTarget
		TNT1 A 0 A_PlaySound("Firestorm/Loop",5,1,1)
		TNT1 A 0 A_StopSound(6)
		TNT1 A 1 A_SetUserVar("user_count",user_count-1)
		TNT1 A 0 A_JumpIf(user_count <= 0, "End")
		TNT1 A 0 A_CheckLOF("Watching",CLOFF_ALLOWNULL|CLOFF_JUMPFRIEND|CLOFF_JUMPENEMY|CLOFF_JUMPOBJECT|CLOFF_MUSTBESHOOTABLE|CLOFF_CHECKPARTIAL|CLOFF_JUMPNONHOSTILE|CLOFF_FROMBASE,120,0,0,0,0,0,AAPTR_TARGET)
		Goto Reset
	Watching:
		TNT1 A 0 A_FaceTarget
		TNT1 A 0 A_SetUserVar("user_contact",1)
		TNT1 A 1 A_SetUserVar("user_count",user_count-1)
		TNT1 A 0 A_JumpIf(user_count <= 0, "End")
		//TNT1 A 0 A_JumpIfTargetInLOS("Watching",360,JLOSF_DEADNOJUMP,60)
		TNT1 A 0 A_CheckLOF("Watching",CLOFF_ALLOWNULL|CLOFF_JUMPFRIEND|CLOFF_JUMPENEMY|CLOFF_JUMPOBJECT|CLOFF_MUSTBESHOOTABLE|CLOFF_CHECKPARTIAL|CLOFF_JUMPNONHOSTILE|CLOFF_FROMBASE,120,0,0,0,0,0,AAPTR_TARGET)
		Goto Reset
	Reset:
		TNT1 A 0 A_ClearTarget
		TNT1 A 0 A_ClearSoundTarget
		TNT1 A 0 A_SetUserVar("user_contact",0)
		TNT1 A 0 A_PlaySound("Firestorm/Explode",6,1,0)
		TNT1 A 0 A_StopSound(5)
		Goto Idle
	End:
		TNT1 A 0 A_JumpIf(user_contact <= 0,2)
		TNT1 A 0 A_PlaySound("Firestorm/Explosion",6,1,0)
		TNT1 A 20 A_StopSound(5)
		TNT1 A 1 A_PlaySound("Firestorm/Explosion",7,1,0)
		Stop
	}
}

Actor FirestormSpinner
{
	var int user_mini;
	var int user_max;
	var int user_angle;
	var int user_distance[2];
	//[0] = Current distance
	//[1] = Maximum distance
	var int user_s;
	var int user_variance[2];
	var int user_count;
	var int user_z[3];
	var int user_special;
	var int user_m2;
	Projectile
	+SEEKERMISSILE
	+NOINTERACTION
	+BRIGHT
	RenderStyle Normal
	Translation "0:255=%[0,0,0]:[1,0,0]"
	Scale 0.60
	Alpha 1.0
	States
	{
	Spawn:
		//Set the distance first.
		GDBA A 0 NoDelay A_SetUserArray("user_distance",1,random(250,450))
		GDBA A 0 A_SetUserVar(user_m2,random(1,19))
		//GDBA A 0 A_SetUserVar("user_count",65) //Life time, including shrinking (+20)
		//Done to avoid making multiple versions of the same Actor needlessly.
		GDBA A 0 A_JumpIf(tid == 0,"S1") 
		Goto SetSpecial
	SetSpecial:
		GDBA A 0 A_SetUserVar("user_special",1) //The fireball didn't hit anything.
		GDBA A 0 Thing_ChangeTID(0,0)
	S1:
		"####" "#" 0 A_SetUserArray("user_z",0,z)
		"####" "#" 0 A_JumpIf(user_special==1,"S1D")
	S1C:
		//Warp around the enemy the fireball hit
		"####" "#" 0 A_Warp(AAPTR_TRACER,0,0,0,0,WARPF_NOCHECKPOSITION|WARPF_STOP) 
		Goto S2
		//Warp around the FirestormMasterSpawner if it didn't hit an enemy
	S1D:
		"####" "#" 0 A_Warp(AAPTR_TARGET,0,0,0,0,WARPF_NOCHECKPOSITION|WARPF_STOP)
		Goto S2
	S2:
		//Establish Z position in the air at what Height it hit the enemy. Makes
		//it look more consistent and believable.
		"####" "#" 0 A_SetUserArray("user_z",1,z)
		"####" "#" 0 A_SetUserArray("user_z",2,(user_z[0]-user_z[1]))
		"####" "#" 0 A_SetAngle(random(0,359))
		"####" "#" 0 A_SetUserVar("user_angle",random(-15,15))
		"####" "#" 0 A_SetUserArray("user_variance",1,random(8,24)*randompick(-1,1))
		
//Adjusts angle based upon the user_angle var.
//Checks to ensure if the target dies, that it explodes too.
//No check needed for FirestormMasterSpawner.
//Warps with the following coordinates in mind:

//	X: Cosine of user_variance[0], multiplied by user_distance which is divided 
//		by 10 (or multiplied by 0.1*).
//	Y: 0. We want to keep it centered in this regard.
//	Z: Same as X, except use sine instead of cosine. Also, add offset of Z Height 
//		as calculated above. Makes it stick to their target at that height.

//* - Bear in mind that user variables cannot contain floats, so to use decimals
//we haven't a choice but to multiply it in the warping parameters themselves.
	LoopStart:
		"####" "#" 0 A_JumpIf(user_max >= 1,"Looping")
		"####" "#" 0 A_JumpIf(user_distance[0] >= user_distance[1],"LL")
		Goto LS1
	LL:
		"####" "#" 0 A_SetUserArray("user_distance",0,user_distance[1])
		"####" "#" 0 A_SetUserVar("user_max",1)
		Goto Looping
	LS1:
		"####" "#" 0 A_SetUserArray("user_distance",0,(user_distance[0]+(user_distance[1]*0.05)))
	Looping:
		"####" "#" 0 A_SetAngle(angle+user_angle)
		"####" "#" 0 A_JumpIf(user_count <= 0,2) //stop the spawning when it's working on the z calculations.
		"####" "#" 0 A_SpawnItemEx("FirestormBallTrail2",0,0,0,0,0,0,0,
			SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION|SXF_TRANSFERSCALE)
		"####" "#" 0 A_JumpIf(CheckClass("FireStormMasterSpawner",AAPTR_TARGET,0) || (user_special != 0),"LC1")
	LA1:
		"####" "#" 0 A_JumpIf(user_m2 <= 0,"LB1")
		"####" "#" 0 A_SetUserVar(user_m2,user_m2 - 1)
		Goto LC1
	LB1:
		"####" "#" 0 A_SpawnItemEx("DMSoulFragment",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION,200,1)
		"####" "#" 0 A_SetUserVar(user_m2,random(5,15))
	LC1:
		"####" "#" 0 A_JumpIf(user_special==1,"L2")
		"####" "#" 0 A_JumpIfHealthLower(1,"MiniSplode",AAPTR_TRACER)//TargetInLOS(1,360,JLOSF_PROJECTILE|JLOSF_DEADNOJUMP|JLOSF_NOSIGHT)
		//Goto MiniSplode //If TargetInLOS's needed, uncomment this.
		"####" "#" 0 Bright A_Warp(AAPTR_TRACER,(cos(user_variance[0])*(user_distance[0]*0.1)),0,(sin(user_variance[0])*(user_distance[0]*0.1))+user_z[2],0,WARPF_NOCHECKPOSITION|WARPF_USECALLERANGLE|WARPF_INTERPOLATE|WARPF_STOP,"Cont")
		Goto MiniSplode
	L2:
		"####" "#" 0 Bright A_Warp(AAPTR_TARGET,(cos(user_variance[0])*(user_distance[0]*0.1)),0,(sin(user_variance[0])*(user_distance[0]*0.1)),0,WARPF_NOCHECKPOSITION|WARPF_USECALLERANGLE|WARPF_INTERPOLATE|WARPF_STOP,"Cont")
		Goto MiniSplode
//Moves the ball around, for the next warp.
	Cont:
		"####" "#" 0 A_SetUserArray("user_variance",0,(user_variance[0]+user_variance[1]))	
		"####" "#" 1 A_SetUserVar("user_count",user_count+1)
		"####" "#" 0 A_JumpIf(user_count >= 40,"Con2")
		"####" "#" 0 A_JumpIf(user_max == 0,"LoopStart")
		Goto Looping
//This part causes the ball to get closer to the object it's warping around until
//it's dead center, then explodes.		
	Con2:
		"####" "#" 0 A_SetUserArray("user_distance",0,(user_distance[0]-(user_distance[1]*0.02)))
		"####" "#" 0 A_JumpIf((user_count >= 65) || (user_distance[0] <= 0), "MiniSplode")
		Goto Looping
	MiniSplode:
		TNT1 A 0 Thing_SetTranslation(0,0)
		X125 A random(1,3) A_Stop
		X125 BCDEFG random(1,3) Bright
		X125 HIJKLMNOPQR 1 Bright A_FadeOut(0.05)
		Wait
	}
}

Actor FirestormSwirly
{
	var int user_angle;
	var int user_distance;
	var int user_s;
	var int user_scale;
	var int user_variance[2];
	var int user_count;
	var int user_z[3];
	var int user_special;
	Projectile
	+SEEKERMISSILE
	+NOINTERACTION
	RenderStyle Add
	Translation "0:255=%[0,0,0]:[1,0,0]"
	Scale 0.50
	States
	{
	Spawn:
		X122 A 0 NoDelay A_SetUserVar("user_count",45)
		X122 A 0 A_SetUserVar("user_s",90)
		X122 A 0 A_JumpIf(tid == 0,"S1")
		Goto Simple
	Simple:
		X122 ABCDEFGHIJKLMNOP 1 Bright //16
		X122 ABCDEFGHIJKLMNOP 1 Bright //32
		X122 ABCDEFGHIJKLM 1 Bright //44
		X122 N 1 Bright A_SetUserVar("user_scale",(ScaleX*100))
		X122 N 0 A_SetUserVar("user_s",user_s-9)
	SimpleOut:
		"----" O 0 A_SetScale(cos(user_s)*(user_scale*0.01))	X122 O 1 Bright A_SetUserVar("user_s",user_s-9)
		"----" P 0 A_SetScale(cos(user_s)*(user_scale*0.01))	X122 P 1 Bright A_SetUserVar("user_s",user_s-9)
		"----" A 0 A_SetScale(cos(user_s)*(user_scale*0.01))	X122 A 1 Bright A_SetUserVar("user_s",user_s-9)
		"----" B 0 A_SetScale(cos(user_s)*(user_scale*0.01))	X122 B 1 Bright A_SetUserVar("user_s",user_s-9)
		"----" C 0 A_SetScale(cos(user_s)*(user_scale*0.01))	X122 C 1 Bright A_SetUserVar("user_s",user_s-9)
		"----" D 0 A_SetScale(cos(user_s)*(user_scale*0.01))	X122 D 1 Bright A_SetUserVar("user_s",user_s-9)
		"----" E 0 A_SetScale(cos(user_s)*(user_scale*0.01))	X122 E 1 Bright A_SetUserVar("user_s",user_s-9)
		"----" F 0 A_SetScale(cos(user_s)*(user_scale*0.01))	X122 F 1 Bright A_SetUserVar("user_s",user_s-9)
		X122 G 1 Bright A_SetScale(cos(user_s)*(user_scale*0.01))
		Stop
	S1:
		"----" A 0 A_SetUserArray("user_z",0,z)
		"----" A 0 A_Warp(AAPTR_TRACER,0,0,0,0,WARPF_NOCHECKPOSITION|WARPF_INTERPOLATE|WARPF_STOP)
		"----" A 0 A_SetUserArray("user_z",1,z)
		"----" A 0 A_SetUserArray("user_z",2,(user_z[0]-user_z[1]))
	S2:
		"####" "#" 0 A_JumpIf(user_count <= 0,"End")	X122 A 1 Bright A_SetUserVar("user_count",user_count-1)	"####" "#" 0 A_Warp(AAPTR_TRACER,0,0,user_z[2],0,WARPF_NOCHECKPOSITION,1)
		Goto End
		"####" "#" 0 A_JumpIf(user_count <= 0,"End")	X122 B 1 Bright A_SetUserVar("user_count",user_count-1)	"####" "#" 0 A_Warp(AAPTR_TRACER,0,0,user_z[2],0,WARPF_NOCHECKPOSITION,1)		Goto End
		"####" "#" 0 A_JumpIf(user_count <= 0,"End")	X122 C 1 Bright A_SetUserVar("user_count",user_count-1)	"####" "#" 0 A_Warp(AAPTR_TRACER,0,0,user_z[2],0,WARPF_NOCHECKPOSITION,1)		Goto End
		"####" "#" 0 A_JumpIf(user_count <= 0,"End")	X122 D 1 Bright A_SetUserVar("user_count",user_count-1)	"####" "#" 0 A_Warp(AAPTR_TRACER,0,0,user_z[2],0,WARPF_NOCHECKPOSITION,1)		Goto End
		"####" "#" 0 A_JumpIf(user_count <= 0,"End")	X122 E 1 Bright A_SetUserVar("user_count",user_count-1)	"####" "#" 0 A_Warp(AAPTR_TRACER,0,0,user_z[2],0,WARPF_NOCHECKPOSITION,1)		Goto End
		"####" "#" 0 A_JumpIf(user_count <= 0,"End")	X122 F 1 Bright A_SetUserVar("user_count",user_count-1)	"####" "#" 0 A_Warp(AAPTR_TRACER,0,0,user_z[2],0,WARPF_NOCHECKPOSITION,1)		Goto End
		"####" "#" 0 A_JumpIf(user_count <= 0,"End")	X122 G 1 Bright A_SetUserVar("user_count",user_count-1)	"####" "#" 0 A_Warp(AAPTR_TRACER,0,0,user_z[2],0,WARPF_NOCHECKPOSITION,1)		Goto End
		"####" "#" 0 A_JumpIf(user_count <= 0,"End")	X122 H 1 Bright A_SetUserVar("user_count",user_count-1)	"####" "#" 0 A_Warp(AAPTR_TRACER,0,0,user_z[2],0,WARPF_NOCHECKPOSITION,1)		Goto End
		"####" "#" 0 A_JumpIf(user_count <= 0,"End")	X122 I 1 Bright A_SetUserVar("user_count",user_count-1)	"####" "#" 0 A_Warp(AAPTR_TRACER,0,0,user_z[2],0,WARPF_NOCHECKPOSITION,1)		Goto End
		"####" "#" 0 A_JumpIf(user_count <= 0,"End")	X122 J 1 Bright A_SetUserVar("user_count",user_count-1)	"####" "#" 0 A_Warp(AAPTR_TRACER,0,0,user_z[2],0,WARPF_NOCHECKPOSITION,1)		Goto End
		"####" "#" 0 A_JumpIf(user_count <= 0,"End")	X122 K 1 Bright A_SetUserVar("user_count",user_count-1)	"####" "#" 0 A_Warp(AAPTR_TRACER,0,0,user_z[2],0,WARPF_NOCHECKPOSITION,1)		Goto End
		"####" "#" 0 A_JumpIf(user_count <= 0,"End")	X122 L 1 Bright A_SetUserVar("user_count",user_count-1)	"####" "#" 0 A_Warp(AAPTR_TRACER,0,0,user_z[2],0,WARPF_NOCHECKPOSITION,1)		Goto End
		"####" "#" 0 A_JumpIf(user_count <= 0,"End")	X122 M 1 Bright A_SetUserVar("user_count",user_count-1)	"####" "#" 0 A_Warp(AAPTR_TRACER,0,0,user_z[2],0,WARPF_NOCHECKPOSITION,1)		Goto End
		"####" "#" 0 A_JumpIf(user_count <= 0,"End")	X122 N 1 Bright A_SetUserVar("user_count",user_count-1)	"####" "#" 0 A_Warp(AAPTR_TRACER,0,0,user_z[2],0,WARPF_NOCHECKPOSITION,1)		Goto End
		"####" "#" 0 A_JumpIf(user_count <= 0,"End")	X122 O 1 Bright A_SetUserVar("user_count",user_count-1)	"####" "#" 0 A_Warp(AAPTR_TRACER,0,0,user_z[2],0,WARPF_NOCHECKPOSITION,1)		Goto End
		"####" "#" 0 A_JumpIf(user_count <= 0,"End")	X122 P 1 Bright A_SetUserVar("user_count",user_count-1)	"####" "#" 0 A_Warp(AAPTR_TRACER,0,0,user_z[2],0,WARPF_NOCHECKPOSITION,"S2")		Goto End
	End:
		"####" "#" 0 A_SetUserVar("user_scale",(ScaleX*100))
	Looping:
		"####" "#" 0 A_SetScale((cos(user_s))*(user_scale*.01))
		"####" "#" 1 Bright A_SetUserVar("user_s",user_s-3)
		"####" "#" 0 A_JumpIf(user_s <= 0,"Ending")
		Loop
	Ending:
		TNT1 A 0
		Stop
	}
}
	
Actor FirestormBallTrail2
{
	var int user_scale;
	var int user_s;
	var int user_count;
	+NOINTERACTION
	+BRIGHT
	RenderStyle Add
	Translation "0:255=%[0,0,0]:[1,0,0]"
	Scale 0.40
	Alpha 0.3
	States
	{
	Spawn:
		GDBA A 1 NoDelay A_SetUserVar("user_s",0)
		GDBA A 0 A_SetUserVar("user_scale",(ScaleX*100))
	Looping:
		GDBA A 0 A_SetScale(((cos(user_s)+1)*0.5)*(user_scale*.01))
		GDBA A 1 A_SetUserVar("user_s",user_s+6)
		GDBA A 0 A_JumpIf(user_s >= 180,"End")
		Loop
	End:
		TNT1 A 0
		Stop
	}
}

Actor SkullgunAltShotAttack
{  
	var int user_x;
	var int user_y;
	var int user_z;
	Projectile
	+NOINTERACTION
	+SEEKERMISSILE
	+FLOATBOB
	Scale 0.5
	//RenderStyle Add
	Alpha 1
	Speed 0
	Obituary "%o was killed by a Skull Evil."
	SeeSound "weapons/skullgunactive"
	ActiveSound "weapons/skullgunactive"
	DeathSound "weapons/skullgunactive"
	DamageType "Unholy"
	ReactionTime 25
	FloatBobPhase 1
	States
	{
	Spawn:
		ZKLS F 12 A_CountDown
		ZKLS F 0 A_SeekerMissile(0,0,SMF_LOOK|SMF_PRECISE,256)
		ZKLS F 0 A_JumpIf(IsPointerEqual(AAPTR_TRACER,AAPTR_NULL),"Spawn")
		ZKLS F 0 A_FaceTracer(0,0,0,0,FAF_TOP)
		ZKLS F 0 A_SpawnItemEx("SkullgunAltShotAttackShot",0,0,0,cos(-pitch)*25,0,sin(pitch)*25,0,32|SXF_TRANSFERPOINTERS)
		ZKLS F 0 A_RearrangePointers(AAPTR_DEFAULT,AAPTR_DEFAULT,AAPTR_NULL,4)
		Loop
	Death:
		ZKLS GHIJK 4 Bright
		Stop
	}
}
Actor SkullGunCheck : Inventory { Inventory.MaxAmount 256 }


Actor SkullgunAltShotAttackShot
{
	var int user_i;
	var int user_z;
	Radius 2
	Height 4
	Speed 25
	Damage 1
	Projectile
	+SEEKERMISSILE
	+HITTRACER
	+NODAMAGETHRUST
	+DONTREFLECT
	SeeSound "weapons/skullgunskull"
	RenderStyle Add
	Scale 0.5
	Alpha 1
	DamageType "Unholy"
	States
	{
	Spawn:
		ZKLS F 1 Bright A_SeekerMissile(45,45,SMF_PRECISE)
		ZKLS F 1 Bright A_CustomMissile("SkullgunAltShotTrail1",0,0,0,2,0)
		Loop
	Crash:
	XDeath:
		TNT1 A 0 A_Warp(AAPTR_TRACER,0,0,z-floorz,0,WARPF_NOCHECKPOSITION|WARPF_USECALLERANGLE|WARPF_TOFLOOR)
	Death:
		ZKLS G 0 A_SpawnItemEx("SkullGunMiniBolt",0,0,0,3,0,0,user_i,32|SXF_TRANSFERPOINTERS)
		"####" "#" 0 A_SetUserVar(user_i,user_i+45)
		"####" "#" 0 A_JumpIf(user_i < 360,"Death")
		ZKLS GGGGHHHHIIIIJJJJKKKK 1 Bright A_FadeOut(0.5)
		Stop
	}
}

Actor SkullGunMiniBolt
{
	Projectile
	+RIPPER
	+DONTREFLECT
	+EXTREMEDEATH
	+BOUNCEONFLOORS
	+BOUNCEONWALLS
	+BOUNCEONCEILINGS
	+DONTSPLASH
	+EXPLODEONWATER
	+SKYEXPLODE
	+NODAMAGETHRUST
	//+ALLOWBOUNCEONACTORS
	RipperLevel 4
	+BRIGHT
	Radius 4
	Height 4
	Damage 1
	Speed 3
	Scale 0.3
	Alpha 1
	BounceFactor 0.85
	DamageType "Unholy"
	Translation "0:255=%[0,0,0]:[2,0,0]"
	States
	{
	Spawn:
		D004 T 1 A_FadeOut(0.05)
		Wait
	Death:
		TNT1 A 0
		Stop
	}
}

Actor SkullgunShot
{
	Radius 4
	Height 8
	Speed 16
	Damage 20
	BounceFactor 1
	PROJECTILE
	+SEEKERMISSILE
	+EXTREMEDEATH
	+NOWALLBOUNCESND
	+FRIENDLY
	+LOOKALLAROUND
	+BOUNCEONFLOORS
	+DONTREFLECT
	+NODAMAGETHRUST
	RenderStyle Translucent
	Alpha 0.8
	Translation "0:255=%[0,0,0]:[2,0,0]"
	Scale 0.4
	Alpha 1
	DeathSound "MageStaffExplode"
	DamageType "Unholy"
	States
	{
	Spawn:
		MSP2 AA 0 Bright A_SeekerMissile(10,30,SMF_LOOK)
	
		TNT1 A 0 A_SpawnItemEx("SkullgunShotTrailGeneral",0,0,0,0,0,1*2,0,0)	TNT1 A 0 A_SpawnItemEx("SkullgunShotTrailGeneral",0,0,0,0,1*2,0,0,0)
		MSP2 A 1 A_SeekerMissile(20,25,SMF_LOOK)
		TNT1 A 0 A_SpawnItemEx("SkullgunShotTrailGeneral",0,0,0,0,0,-1*2,0,0)	TNT1 A 0 A_SpawnItemEx("SkullgunShotTrailGeneral",0,0,0,0,-1*2,0,0,0)
		MSP2 A 1
		TNT1 A 0 A_SpawnItemEx("SkullgunShotTrailGeneral",0,0,0,0,0.4*2,0.8*2,0,0)	TNT1 A 0 A_SpawnItemEx("SkullgunShotTrailGeneral",0,0,0,0,0.8*2,-0.4*2,0,0)
		MSP2 A 1 A_SeekerMissile(20,25,SMF_LOOK)
		TNT1 A 0 A_SpawnItemEx("SkullgunShotTrailGeneral",0,0,0,0,-0.4*2,-0.8*2,0,0)	TNT1 A 0 A_SpawnItemEx("SkullgunShotTrailGeneral",0,0,0,0,-0.8*2,0.4*2,0,0)
		MSP2 B 1
		TNT1 A 0 A_SpawnItemEx("SkullgunShotTrailGeneral",0,0,0,0,0.8*2,0.4*2,0,0)	TNT1 A 0 A_SpawnItemEx("SkullgunShotTrailGeneral",0,0,0,0,0.4*2,-0.8*2,0,0)
		MSP2 B 1 A_SeekerMissile(20,25,SMF_LOOK)
		TNT1 A 0 A_SpawnItemEx("SkullgunShotTrailGeneral",0,0,0,0,-0.8*2,-0.4*2,0,0)	TNT1 A 0 A_SpawnItemEx("SkullgunShotTrailGeneral",0,0,0,0,-0.4*2,0.8*2,0,0)
		MSP2 B 1
		TNT1 A 0 A_SpawnItemEx("SkullgunShotTrailGeneral",0,0,0,0,0,1*2,0,0)	TNT1 A 0 A_SpawnItemEx("SkullgunShotTrailGeneral",0,0,0,0,1*2,0,0,0)
		MSP2 C 1 A_SeekerMissile(20,25,SMF_LOOK)
		TNT1 A 0 A_SpawnItemEx("SkullgunShotTrailGeneral",0,0,0,0,0,-1*2,0,0)	TNT1 A 0 A_SpawnItemEx("SkullgunShotTrailGeneral",0,0,0,0,-1*2,0,0,0)
		MSP2 C 1
		TNT1 A 0 A_SpawnItemEx("SkullgunShotTrailGeneral",0,0,0,0,0.4*2,0.8*2,0,0)	TNT1 A 0 A_SpawnItemEx("SkullgunShotTrailGeneral",0,0,0,0,0.8*2,-0.4*2,0,0)
		MSP2 C 1 A_SeekerMissile(20,25,SMF_LOOK)
		TNT1 A 0 A_SpawnItemEx("SkullgunShotTrailGeneral",0,0,0,0,-0.4*2,-0.8*2,0,0)	TNT1 A 0 A_SpawnItemEx("SkullgunShotTrailGeneral",0,0,0,0,-0.8*2,0.4*2,0,0)
		MSP2 D 1
		TNT1 A 0 A_SpawnItemEx("SkullgunShotTrailGeneral",0,0,0,0,0.8*2,0.4*2,0,0)	TNT1 A 0 A_SpawnItemEx("SkullgunShotTrailGeneral",0,0,0,0,0.4*2,-0.8*2,0,0)
		MSP2 D 1 A_SeekerMissile(20,25,SMF_LOOK)
		TNT1 A 0 A_SpawnItemEx("SkullgunShotTrailGeneral",0,0,0,0,-0.8*2,-0.4*2,0,0)	TNT1 A 0 A_SpawnItemEx("SkullgunShotTrailGeneral",0,0,0,0,-0.4*2,0.8*2,0,0)
		MSP2 D 1
		Goto Spawn+2
	Crash:
	XDeath:
		TNT1 A 3 A_SpawnItemEx("SkullgunShotPrepper",0,0,0,-10,-5,0,-45,SXF_NOCHECKPOSITION|SXF_TRANSFERPOINTERS)
		TNT1 A 10 A_SpawnItemEx("SkullgunExplo1",0,0,0,0,0,0,0,32)
		Stop
	Death:
		TNT1 A 10 A_SpawnItemEx("SkullgunExplo1",0,0,0,0,0,0,0,32)
		Stop
	}
}

Actor SkullgunExplo1
{
	+NOINTERACTION
	Scale 0.18
	States
	{
	Spawn:
		X126 ABCDEFGHIKLMNOP 2 Bright
		Stop
	}
}

Actor SkullgunShotPrepper
{
	Projectile
	Radius 5
	Height 9
	+BOUNCEONWALLS
	+BOUNCEONFLOORS
	+BOUNCEONCEILINGS
	+DONTREFLECT
	+CANBOUNCEWATER
	+THRUACTORS
	+SEEKERMISSILE
	+SKYEXPLODE
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 AAAAAAAAAAAA 1 A_FaceTracer
		TNT1 A 0 A_JumpIfTargetInLOS(1,0,JLOSF_PROJECTILE|JLOSF_DEADNOJUMP|JLOSF_NOSIGHT)
		Goto End
		TNT1 A 0 A_SpawnItemEx("SkullgunShot",16,0,0,0,0,0,0,32|SXF_TRANSFERPOINTERS)
	End:
		TNT1 A 0
		Stop
	}
}

Actor SkullgunShotTrailGeneral
{
	+NOINTERACTION
	RenderStyle Add
	Alpha 0.7
	Scale 0.2
	Translation "0:255=%[0,0,0]:[2,0,0]"
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_Jump(220,2,3,4,5,6,7,8,9,10)
		X105 ABCDEFGHIJKLMNOPQRSTUVWX 1 Bright A_FadeOut(0.05)
		Goto Spawn+2
	}
}

Actor SkullgunShotTrail1
{
	Radius 2
	Height 4
	Speed 2
	+NOBLOCKMAP
	+NOGRAVITY
	+DROPOFF
	+MISSILE
	+NOTELEPORT
	RenderStyle Add
	Scale 0.4
	Alpha 0.6
	States
	{
	Spawn:
		ZKLS ABCDE 3 Bright
		Stop
	Death:
		ZKLS E 3 Bright
		Stop
	}
}

Actor SkullgunShotTrail2 : SkullgunShotTrail1
{
	Speed 1
	Scale 0.3
	Alpha 0.5
}

Actor SkullgunShotAttack
{ 
	Radius 1
	Height 1
	Monster
	+FRIENDLY
	+NOGRAVITY
	+NOCLIP
	+QUICKTORETALIATE
	+LOOKALLAROUND
	RenderStyle None
	Obituary "%o was killed by a Skull gun shot."
	States
	{
	Spawn:
		ZKLS AA 0 A_Look
	See:
		ZKLS A 0 A_Chase
	Missile:
		ZKLS A 0 A_FaceTarget
		ZKLS A 0 A_CustomMissile("SkullgunShot",0,180,6,10)
		ZKLS A 1
		Stop
	}
}

Actor SkullgunAltShot
{
	var int user_angle;
	var int user_aim;
	Radius 4
	Height 8
	Speed 15
	Damage 10
	PROJECTILE
	RipperLevel 667
	+RIPPER
	+EXTREMEDEATH
	+DONTREFLECT
	RenderStyle Add
	Scale 0.5
	Alpha 1
	DeathSound "MageStaffExplode"
	DamageType "Wormwood"
	States
	{
	Spawn:
		ZKLS F 0
		ZKLS F 1 Bright
		ZKLS FFFFFFFFFF 1 Bright A_CustomMissile("SkullgunAltShotTrail1",0,0,0,2,0)
	Death:
		ZKLS F 0 A_CustomMissile("SkullgunAltShotTrail",0,0,330,2,60)
		ZKLS F 0 A_CustomMissile("SkullgunAltShotTrail",0,0,300,2,60)
		ZKLS F 0 A_CustomMissile("SkullgunAltShotTrail",0,0,270,2,60)
		ZKLS F 0 A_CustomMissile("SkullgunAltShotTrail",0,0,240,2,60)
		ZKLS F 0 A_CustomMissile("SkullgunAltShotTrail",0,0,210,2,60)
		ZKLS F 0 A_CustomMissile("SkullgunAltShotTrail",0,0,180,2,60)
		ZKLS F 0 A_CustomMissile("SkullgunAltShotTrail",0,0,150,2,60)
		ZKLS F 0 A_CustomMissile("SkullgunAltShotTrail",0,0,120,2,60)
		ZKLS F 0 A_CustomMissile("SkullgunAltShotTrail",0,0,90,2,60)
		ZKLS F 0 A_CustomMissile("SkullgunAltShotTrail",0,0,60,2,60)
		ZKLS F 0 A_CustomMissile("SkullgunAltShotTrail",0,0,30,2,60)
		ZKLS F 0 A_CustomMissile("SkullgunAltShotTrail",0,0,0,2,60)
		ZKLS F 0 A_CustomMissile("SkullgunAltShotTrail",0,0,330,2,30)
		ZKLS F 0 A_CustomMissile("SkullgunAltShotTrail",0,0,300,2,30)
		ZKLS F 0 A_CustomMissile("SkullgunAltShotTrail",0,0,270,2,30)
		ZKLS F 0 A_CustomMissile("SkullgunAltShotTrail",0,0,240,2,30)
		ZKLS F 0 A_CustomMissile("SkullgunAltShotTrail",0,0,210,2,30)
		ZKLS F 0 A_CustomMissile("SkullgunAltShotTrail",0,0,180,2,30)
		ZKLS F 0 A_CustomMissile("SkullgunAltShotTrail",0,0,150,2,30)
		ZKLS F 0 A_CustomMissile("SkullgunAltShotTrail",0,0,120,2,30)
		ZKLS F 0 A_CustomMissile("SkullgunAltShotTrail",0,0,90,2,30)
		ZKLS F 0 A_CustomMissile("SkullgunAltShotTrail",0,0,60,2,30)
		ZKLS F 0 A_CustomMissile("SkullgunAltShotTrail",0,0,30,2,30)
		ZKLS F 0 A_CustomMissile("SkullgunAltShotTrail",0,0,0,2,30)
		ZKLS F 0 A_CustomMissile("SkullgunAltShotTrail",0,0,330,2,0)
		ZKLS F 0 A_CustomMissile("SkullgunAltShotTrail",0,0,300,2,0)
		ZKLS F 0 A_CustomMissile("SkullgunAltShotTrail",0,0,270,2,0)
		ZKLS F 0 A_CustomMissile("SkullgunAltShotTrail",0,0,240,2,0)
		ZKLS F 0 A_CustomMissile("SkullgunAltShotTrail",0,0,210,2,0)
		ZKLS F 0 A_CustomMissile("SkullgunAltShotTrail",0,0,180,2,0)
		ZKLS F 0 A_CustomMissile("SkullgunAltShotTrail",0,0,150,2,0)
		ZKLS F 0 A_CustomMissile("SkullgunAltShotTrail",0,0,120,2,0)
		ZKLS F 0 A_CustomMissile("SkullgunAltShotTrail",0,0,90,2,0)
		ZKLS F 0 A_CustomMissile("SkullgunAltShotTrail",0,0,60,2,0)
		ZKLS F 0 A_CustomMissile("SkullgunAltShotTrail",0,0,30,2,0)
		ZKLS F 0 A_CustomMissile("SkullgunAltShotTrail",0,0,0,2,0)
		ZKLS F 0 A_CustomMissile("SkullgunAltShotTrail",0,0,330,2,330)
		ZKLS F 0 A_CustomMissile("SkullgunAltShotTrail",0,0,300,2,330)
		ZKLS F 0 A_CustomMissile("SkullgunAltShotTrail",0,0,270,2,330)
		ZKLS F 0 A_CustomMissile("SkullgunAltShotTrail",0,0,240,2,330)
		ZKLS F 0 A_CustomMissile("SkullgunAltShotTrail",0,0,210,2,330)
		ZKLS F 0 A_CustomMissile("SkullgunAltShotTrail",0,0,180,2,330)
		ZKLS F 0 A_CustomMissile("SkullgunAltShotTrail",0,0,150,2,330)
		ZKLS F 0 A_CustomMissile("SkullgunAltShotTrail",0,0,120,2,330)
		ZKLS F 0 A_CustomMissile("SkullgunAltShotTrail",0,0,90,2,330)
		ZKLS F 0 A_CustomMissile("SkullgunAltShotTrail",0,0,60,2,330)
		ZKLS F 0 A_CustomMissile("SkullgunAltShotTrail",0,0,30,2,330)
		ZKLS F 0 A_CustomMissile("SkullgunAltShotTrail",0,0,0,2,330)
		ZKLS F 0 A_CustomMissile("SkullgunAltShotTrail",0,0,330,2,300)
		ZKLS F 0 A_CustomMissile("SkullgunAltShotTrail",0,0,300,2,300)
		ZKLS F 0 A_CustomMissile("SkullgunAltShotTrail",0,0,270,2,300)
		ZKLS F 0 A_CustomMissile("SkullgunAltShotTrail",0,0,240,2,300)
		ZKLS F 0 A_CustomMissile("SkullgunAltShotTrail",0,0,210,2,300)
		ZKLS F 0 A_CustomMissile("SkullgunAltShotTrail",0,0,180,2,300)
		ZKLS F 0 A_CustomMissile("SkullgunAltShotTrail",0,0,150,2,300)
		ZKLS F 0 A_CustomMissile("SkullgunAltShotTrail",0,0,120,2,300)
		ZKLS F 0 A_CustomMissile("SkullgunAltShotTrail",0,0,90,2,300)
		ZKLS F 0 A_CustomMissile("SkullgunAltShotTrail",0,0,60,2,300)
		ZKLS F 0 A_CustomMissile("SkullgunAltShotTrail",0,0,30,2,300)
		ZKLS F 0 A_CustomMissile("SkullgunAltShotTrail",0,0,0,2,300)
		ZKLS F 0 A_SpawnItemEx("SkullgunAltShotAttack",0,0,0,0,0,0,0,32|SXF_SETMASTER)
		Stop
	}
}

Actor SkullgunAltShotTrail1
{
	Radius 2
	Height 4
	Speed 4
	+NOGRAVITY
	+NOCLIP
	+NOTELEPORT
	RenderStyle Add
	DamageType "Wormwood"
	Scale 0.5
	Alpha 0.9
	States
	{
	Spawn:
		ZKLS FFFFFFFFFFFFFFFFFF 1 Bright A_FadeOut(0.05)
		Stop
	}
}

Actor SkullgunAltShotTrail	//this are the ones who causes a lot of damage
{
	Radius 2
	Height 4
	Speed 3.5
	Damage (random(2,6)) 	//was 8
	Projectile
	+DONTREFLECT
	+RIPPER
	RipperLevel 667
	+EXTREMEDEATH
	Scale 0.3
	Alpha 0.8
	Translation "0:255=%[0,0,0]:[2,0,0]"
	FloatBobPhase 1
	States
	{
	Spawn:
		D004 T 0
		D004 TTTTTTT 1 Bright 
		TNT1 A 0 A_ChangeFlag("FLOATBOB",1)
		D004 T 1 Bright A_Stop 
		D004 TTTTTTT 35 bright
	Death:
		D004 A 0 
		D004 T 1 Bright A_FadeOut
		Wait
	}
}

Actor SoulReaverTrailBurster
{
	+NOINTERACTION
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_Jump(256,1,2)
		TNT1 A 0 A_SetAngle(angle+45)
		Goto Playoff
	Playoff:
		TNT1 A 0 A_SpawnItemEx("SkullgunShotTrailGeneral",0,0,0,5,0,0,0,32)
		TNT1 A 0 A_SpawnItemEx("SkullgunShotTrailGeneral",0,0,0,5,0,0,90,32)
		TNT1 A 0 A_SpawnItemEx("SkullgunShotTrailGeneral",0,0,0,5,0,0,180,32)
		TNT1 A 0 A_SpawnItemEx("SkullgunShotTrailGeneral",0,0,0,5,0,0,270,32)
		TNT1 A 0 A_SpawnItemEx("SkullgunShotTrailGeneral",0,0,0,0,0,5,0,32)
		TNT1 A 0 A_SpawnItemEx("SkullgunShotTrailGeneral",0,0,0,0,0,-5,0,32)
		Stop
	}
}

Actor SkullgunAltShotTrail2 : SkullgunAltShotTrail
{
	Speed 0
	States
	{
	Spawn:
	Death:
		ZKLS A 0
		ZKLS AAAAAA 1 Bright
		ZKLS A 1 Bright A_CustomMissile("SkullgunAltShotTrail3",0,0,75,0,0)
		Stop
	}
}

Actor SkullgunAltShotTrail3 : SkullgunAltShotTrail
{
	Health 1
	Mass 10000000
	Speed 0
	+SHOOTABLE
	+DONTFALL
	+REFLECTIVE
	+VISIBILITYPULSE
	Alpha 1
	States
	{
	Spawn:
		ZKLS A 0
		ZKLS A 0 A_ChangeFlag("FLOATBOB",1)
		ZKLS A 1 Bright Thing_ChangeTID(0,2404)
		Goto Spawn+2
	Death:
		ZKLS BBBBBCCCCCDDDDD 1 Bright
		ZKLS EEEEE 1 Bright Thing_Destroy(2405,0)
		Stop
	}
}

Actor SoulReaverDrop : CustomInventory
{
	Inventory.MaxAmount 1
	States
	{
	Use:
		TNT1 A 0
		TNT1 A 0 A_SpawnItemEx("DroppedSoulReaver",0,0,32,8,0,0,0,32,0)
		Stop
	}
}

Actor DroppedSoulReaver
{
	Radius 16
	Height 20
	Scale 0.6
	States
	{
	Spawn:
		T001 H 15
		TNT1 A 0 A_SpawnItemEx("AEoDSoulReaverNoAmmo",0,0,0,0,0,0,0,48,0)
		Stop
	}
}

Actor AEoDSoulReaverNoAmmo : AEoDSoulReaverItem
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL
	Inventory.Amount 1
	Inventory.PickupMessage "You have acquired the Soul Reaver!"
	Inventory.PickupSound "weaponbuild" 
	Scale 0.6
	States
	{
	Spawn:
		T001 H -1
		Loop
	Pickup:
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",9) <= 0,"Nothing")
		TNT1 A 0 A_JumpIfInventory("RedMana",30,"Ammo")
		TNT1 A 0 A_GiveInventory("Weapon9Count",1)
		TNT1 A 0 A_GiveInventory("SoulReaverDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDSoulReaver",1)
		TNT1 A 0 A_TakeInventory("RedMana",30)
		TNT1 A 0 	
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDSoulReaver",1,"Ammo")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		TNT1 A 0 ACS_NamedExecute("s798",0,9,0,0)
		Fail
	Ammo:
		TNT1 A 0 A_TakeInventory("RedMana",30)
		TNT1 A 0 A_JumpIfInventory("AEoDSoulReaver",1,2)
		TNT1 A 0 A_GiveInventory("Weapon9Count",1)
		TNT1 A 0 A_GiveInventory("SoulReaverDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDSoulReaver",1)
		Stop
	}
}
//==================================================================================
//==================================================================================
//Gluon Gun
//by Major Cooke
//Old sprites from AEoD
//New graphics found by Reilsss
//==================================================================================
//==================================================================================

Actor AEoDGluonGunItem : CustomInventory 6123
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL
	Inventory.Amount 1
	Inventory.PickupMessage "You found the Gluon Gun."
	Inventory.PickupSound "misc/w_pkup" 
	Scale 0.3
	States
	{
	Spawn:
		RFLG A -1
		Loop
	Pickup:
		TNT1 A 0 A_JumpIfInventory("AEoDGluonGun",1,"Ammo")
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",9) <= 0,"Nothing")
		TNT1 A 0 A_GiveInventory("Weapon9Count",1)
		TNT1 A 0 A_GiveInventory("GluonGunDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDGluonGun",1)
		TNT1 A 0 	
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDGluonGun",1,"Ammo")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		TNT1 A 0 ACS_NamedExecute("s798",0,9,0,0)
		Fail
	Ammo:
		TNT1 A 0 A_GiveInventory("AEoDGluonGun",1)
		Stop
	}
}

Actor AEoDGluonGun : Weapon // 6123
	{
	Weapon.AmmoUse1 3
	Weapon.AmmoUse2 100
	Weapon.AmmoType1 "AECell"
	Weapon.AmmoType2 "AECell"
	Weapon.AmmoGive1 100
	Weapon.UpSound "weapons/plasma/draw"
	Weapon.SelectionOrder 10333
	Inventory.PickupMessage "You found the Gluon Gun."
	Inventory.PickupSound "misc/w_pkup" 
	+INVENTORY.IGNORESKILL
	+FLOORCLIP
	+WEAPON.CHEATNOTWEAPON
	Tag "Gluon gun"
	Scale 0.3
	States
	{
	Spawn:
		RFLG A -1
		Loop
	Select:
		TNT1 A 0 
		TNT1 A 0 
		TNT1 A 0 
		RFLP A 1 A_Raise
		RFLP AA 0 A_Raise
		Loop
	Deselect:
		TNT1 A 0 
		TNT1 A 0 A_TakeInventory("GluonRunning",9999)
		TNT1 A 0 A_TakeInventory("GluonSoundCountdown",9999)
		RFLP A 1 A_Lower
		RFLP AA 0 A_Lower
		Loop
	Ready:
		RFLP A 0
		RFLP A 0 A_TakeInventory("GluonRunning",9999)
		RFLP A 0 A_TakeInventory("GluonSoundCountdown",9999)
		RFLP A 1 A_WeaponReady
		Goto Ready+3
	Fire:
		TNT1 A 0
		TNT1 A 0 A_GiveInventory("GluonSoundCountdown",5) //Just to ensure that it's there.
		RFLP A 0 Bright A_PlayWeaponSound("weapons/gluonstart")
		RFLP A 0 Bright A_FireCustomMissile("GluonPrimaryBurst",0,1,4,2)
		RFLP A 0 Bright A_FireCustomMissile("GluonFire4",0,0,4,2)
		RFLP A 2 Bright A_FireCustomMissile("GluonFire5",0,0,4,2)	

		RFLP A 0 Bright A_ReFire("Shot2")
		RFLP A 0 Bright A_PlayWeaponSound("weapons/gluonoff")
		RFLP BA 3 
		Goto Ready
	Hold:
	Shot2:
		RFLP A 0 Bright A_FireCustomMissile("GluonPrimaryBurst",0,1,4,2) //GluonPrimaryBurst2
		RFLP A 0 Bright A_FireCustomMissile("GluonFire",0,0,4,2)
		RFLP A 0 Bright A_FireCustomMissile("GluonFire2",0,0,4,2)
		RFLP A 2 Bright A_FireCustomMissile("GluonFire3",0,0,4,2)
		RFLP A 0 Bright A_FireCustomMissile("GluonPrimaryBurst",0,1,4,2) //GluonPrimaryBurst3
		RFLP A 0 Bright A_FireCustomMissile("GluonFire4",0,0,4,2)
		RFLP A 0 Bright A_FireCustomMissile("GluonFire5",0,0,4,2)
		RFLP A 2 bright
		RFLP A 0 A_ReFire("Shot3")
		Goto Powerdown
	Shot3:
		RFLP A 0 Bright A_FireCustomMissile("GluonPrimaryBurst",0,1,4,2) //GluonPrimaryBurst4
		RFLP A 0 Bright A_FireCustomMissile("GluonFire",0,0,4,2)
		RFLP A 0 Bright A_FireCustomMissile("GluonFire2",0,0,4,2)
		RFLP A 2 Bright A_FireCustomMissile("GluonFire3",0,0,4,2)
		RFLP A 0 Bright A_FireCustomMissile("GluonPrimaryBurst",0,1,4,2) //GluonPrimaryBurst5
		RFLP A 0 Bright A_FireCustomMissile("GluonFire4",0,0,4,2)
		RFLP A 0 Bright A_FireCustomMissile("GluonFire5",0,0,4,2)
		RFLP A 2 bright
		RFLP A 0 A_ReFire("Shot4")
		Goto Powerdown
	Shot4:
		RFLP A 0 Bright A_FireCustomMissile("GluonPrimaryBurst",0,1,4,2) //GluonPrimaryBurst6
		RFLP A 0 Bright A_FireCustomMissile("GluonFire",0,0,4,2)
		RFLP A 0 Bright A_FireCustomMissile("GluonFire2",0,0,4,2)
		RFLP A 2 Bright A_FireCustomMissile("GluonFire3",0,0,4,2)
		RFLP A 0 Bright A_FireCustomMissile("GluonPrimaryBurst",0,1,4,2) //GluonPrimaryBurst7
		RFLP A 0 Bright A_FireCustomMissile("GluonFire4",0,0,4,2)
		RFLP A 0 Bright A_FireCustomMissile("GluonFire5",0,0,4,2)
		RFLP A 2 bright
		RFLP A 0 A_ReFire("Shot5")
		Goto Powerdown
	Shot5:
		RFLP A 0 Bright A_FireCustomMissile("GluonPrimaryBurst",0,1,4,2) //GluonPrimaryBurst8
		RFLP A 0 Bright A_FireCustomMissile("GluonFire",0,0,4,2)
		RFLP A 0 Bright A_FireCustomMissile("GluonFire2",0,0,4,2)
		RFLP A 2 Bright A_FireCustomMissile("GluonFire3",0,0,4,2)
		RFLP A 0 Bright A_FireCustomMissile("GluonPrimaryBurst",0,1,4,2) //GluonPrimaryBurst9
		RFLP A 0 Bright A_FireCustomMissile("GluonFire4",0,0,4,2)
		RFLP A 0 Bright A_FireCustomMissile("GluonFire5",0,0,4,2)
		RFLP A 2 bright
		RFLP A 0 A_ReFire("Shot6")
		Goto Powerdown
	Shot6:
		RFLP A 0 Bright A_FireCustomMissile("GluonPrimaryBurst",0,1,4,2) //GluonPrimaryBurst10
		RFLP A 0 Bright A_FireCustomMissile("GluonFire",0,0,4,2)
		RFLP A 0 Bright A_FireCustomMissile("GluonFire2",0,0,4,2)
		RFLP A 2 Bright A_FireCustomMissile("GluonFire3",0,0,4,2)
		RFLP A 0 Bright A_FireCustomMissile("GluonPrimaryBurst",0,1,4,2) //GluonPrimaryBurst11
		RFLP A 0 Bright A_FireCustomMissile("GluonFire4",0,0,4,2)
		RFLP A 0 Bright A_FireCustomMissile("GluonFire5",0,0,4,2)
		RFLP A 2 bright
		RFLP A 0 A_ReFire("Shot7")
		Goto Powerdown
	Shot7:
		RFLP A 0 Bright A_FireCustomMissile("GluonPrimaryBurst",0,1,4,2)	//GluonPrimaryBurst12
		RFLP A 0 Bright A_FireCustomMissile("GluonFire",0,0,4,2)
		RFLP A 0 Bright A_FireCustomMissile("GluonFire2",0,0,4,2)
		RFLP A 2 Bright A_FireCustomMissile("GluonFire3",0,0,4,2)
		RFLP A 0 Bright A_FireCustomMissile("GluonPrimaryBurst",0,1,4,2) //same
		RFLP A 0 Bright A_FireCustomMissile("GluonFire4",0,0,4,2)
		RFLP A 0 Bright A_FireCustomMissile("GluonFire5",0,0,4,2)
		RFLP A 2 Bright 
		TNT1 A 0 A_TakeInventory("GluonSoundCountdown",1)
		TNT1 A 0 A_JumpIfInventory("GluonSoundCountdown",1,4)
		TNT1 A 0 A_JumpIfInventory("GluonRunning",1,3)
		TNT1 A 0 A_GiveInventory("GluonRunning",1)
		RFLP A 0 Bright A_PlaySound("weapons/gluonrun", CHAN_WEAPON, 1, 1)
		RFLP A 0 A_ReFire("Shot2")
		Goto Powerdown
	Powerdown:
		RFLP A 0 A_StopSound(CHAN_WEAPON)
		RFLP A 0 A_PlayWeaponSound("weapons/gluonoff")
		RFLP A 3
		Goto Ready
	AltFire:
		RFLP A 0 Bright A_PlayWeaponSound("weapons/gluoncharge")
		RFLP BCDEFGHIJKLMNOPQ 2
		RFLP R 18 
		RFLP RRRRRRRRRR 1  A_SetPitch(pitch+3)
		RFLP R 0 Bright A_Recoil(15)
		RFLP R 0 Bright A_PlaySound("weapons/gluonshockfire",CHAN_WEAPON)
		RFLP R 0 Bright A_FireCustomMissile("ShockwaveStarter",0,1)
		RFLP RRRRRRRRRR 1  A_SetPitch(pitch-3)
		RFLP QPONMLKJIHGFEDCB 2 
		Goto Ready
	}
}

Actor GluonRunning : Inventory { Inventory.MaxAmount 10 }

Actor GluonSoundCountdown : Inventory { Inventory.MaxAmount 5 }

//=========================================
//The main projectiles fired. Their all parents of GluonPrimaryBurst with the only difference
//being the outer-trail spawn locations. I'm going for a spiral after all...
//Skip past GluonPrimaryBurst12 for the effects.
//=========================================

Actor GluonPrimaryBurst
{
	var int user_x;
	var int user_y;
	var int user_z;
	var int user_life[2];
	var int user_movement[2];
	Speed 2
	Damage (random(1,6))
	Radius 2
	Height 2
	Scale .75
	RenderStyle None
	Projectile
	+DONTREFLECT
	+EXTREMEDEATH
	+FORCERADIUSDMG
	+NODAMAGETHRUST
	+SEEKERMISSILE
	+SKYEXPLODE
	+EXPLODEONWATER
	+NOTIMEFREEZE
	DamageType "PlasmaDisint"
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_SpawnItemEx("GluonSpiral",0,0,8,velx,vely,velz,0,32|SXF_ABSOLUTEMOMENTUM)
		TNT1 A 0 A_SpawnItemEx("GluonFakeBurstDelay",0,0,0,0,0,0,0,32)
	Movement:
		LPUF A 0 A_JumpIf(user_life[0]>=25000,"Death")
	//This must be done multiple times, or else it will jump beyond walls. This could
	//easily cause an engine overload.
		LPUF A 0 A_Warp(AAPTR_DEFAULT,velx,vely,velz,0,WARPF_ABSOLUTEOFFSET,1) 
		Goto MoveOut
		
		LPUF A 0 A_Warp(AAPTR_DEFAULT,velx,vely,velz,0,WARPF_ABSOLUTEOFFSET,1) 
		Goto MoveOut
		
		LPUF A 0 A_Warp(AAPTR_DEFAULT,velx,vely,velz,0,WARPF_ABSOLUTEOFFSET,1) 
		Goto MoveOut
		
		LPUF A 0 A_Warp(AAPTR_DEFAULT,velx,vely,velz,0,WARPF_ABSOLUTEOFFSET,1) 
		Goto MoveOut
		
		LPUF A 0 A_Warp(AAPTR_DEFAULT,velx,vely,velz,0,WARPF_ABSOLUTEOFFSET,1) 
		Goto MoveOut
		
		LPUF A 0 A_JumpIf(user_life[0]>=400,3)
		LPUF A 0 A_CheckSight(2)
		LPUF A 0 A_SpawnItemEx("GluonTrailV2",velx+frandom(-1.0,1.0),0,velz+frandom(-1.0,1.0),0,0,0,0,32|SXF_ABSOLUTEMOMENTUM)
		LPUF A 0 A_SetUserArray("user_life",0,user_life[0]+1)
		Loop
	MoveOut:
		TNT1 AAAAA 1
		Goto Movement
	Death:
		TNT1 A 0 A_Explode(random(40,60),75,0)
		TNT1 A 0 A_CustomMissile("GluonTrail",0,0,0)
		TNT1 A 1 A_CustomMissile("RipperEffect",0,0,0,6)
		Stop
	}
}

Actor GluonFakeBurst //: FastProjectile
{
	var int user_x;
	var int user_y;
	var int user_z;
	var int user_life[2];
	var int user_movement[2];
	Speed 2
	Damage 0
	Radius 2
	Height 2
	Scale .75
	RenderStyle None
	Projectile
	+PAINLESS
	+BLOODLESSIMPACT
	+DONTSPLASH
	+DONTREFLECT
	+EXTREMEDEATH
	+FORCERADIUSDMG
	+NODAMAGETHRUST
	+SEEKERMISSILE
	+SKYEXPLODE
	+EXPLODEONWATER
	+NOTIMEFREEZE
	DamageType "PlasmaDisint"
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_SpawnItemEx("GluonSpiral",0,0,8,velx,vely,velz,0,32|SXF_ABSOLUTEMOMENTUM)
	Movement:
		LPUF A 0 A_JumpIf(user_life[0]>=20000,"Death")
		LPUF A 0 A_Warp(AAPTR_DEFAULT,velx,vely,velz,0,WARPF_ABSOLUTEOFFSET,1) 
		Goto MoveOut
		
		LPUF A 0 A_Warp(AAPTR_DEFAULT,velx,vely,velz,0,WARPF_ABSOLUTEOFFSET,1) 
		Goto MoveOut
		
		LPUF A 0 A_Warp(AAPTR_DEFAULT,velx,vely,velz,0,WARPF_ABSOLUTEOFFSET,1) 
		Goto MoveOut
		
		LPUF A 0 A_Warp(AAPTR_DEFAULT,velx,vely,velz,0,WARPF_ABSOLUTEOFFSET,1) 
		Goto MoveOut
		
		LPUF A 0 A_Warp(AAPTR_DEFAULT,velx,vely,velz,0,WARPF_ABSOLUTEOFFSET,1) 
		Goto MoveOut
		
		LPUF A 0 A_JumpIf(user_life[0]>=4000,3)
		LPUF A 0 A_CheckSight(2)
		LPUF A 0 A_SpawnItemEx("GluonTrailV2",velx+frandom(-1.0,1.0),0,velz+frandom(-1.0,1.0),0,0,0,0,32|SXF_ABSOLUTEMOMENTUM)
		LPUF A 0 A_SetUserArray("user_life",0,user_life[0]+1)
		Loop
	MoveOut:
	Death:
		TNT1 A 1
		Stop
	}
}

Actor GluonFakeBurstDelay
{
	+NOINTERACTION
	+NOTIMEFREEZE
	RenderStyle None
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 1
		TNT1 A 0 A_GiveInventory("GluonFakeBurstSpawn",1,AAPTR_PLAYER1)
		Stop
	}
}

Actor GluonFakeBurstSpawn : CustomInventory
{
	+NOTIMEFREEZE
	+INVENTORY.ALWAYSPICKUP
	States
	{
	Pickup:
		TNT1 A 0 A_FireCustomMissile("GluonFakeBurst",0,0,4,2)
		Stop
	}
}

Actor GluonSpiral
{
	var int user_count;
	var int user_life;
	Projectile
	+DONTREFLECT
	+PAINLESS
	+BLOODLESSIMPACT
	+NOTIMEFREEZE
	Damage 0
	Radius 5
	Height 5
	Speed 5
	WeaveIndexZ 16
	States
	{
	Spawn:
		TNT1 A 0
		Goto Jumping
	Jumping:
		TNT1 A 0 A_JumpIfInventory("GluonTrailToken",14,"T14",AAPTR_PLAYER1)
		TNT1 A 0 A_JumpIfInventory("GluonTrailToken",13,"T13",AAPTR_PLAYER1)
		TNT1 A 0 A_JumpIfInventory("GluonTrailToken",12,"T12",AAPTR_PLAYER1)
		TNT1 A 0 A_JumpIfInventory("GluonTrailToken",11,"T11",AAPTR_PLAYER1)
		TNT1 A 0 A_JumpIfInventory("GluonTrailToken",10,"T10",AAPTR_PLAYER1)
		TNT1 A 0 A_JumpIfInventory("GluonTrailToken",9,"T9",AAPTR_PLAYER1)
		TNT1 A 0 A_JumpIfInventory("GluonTrailToken",8,"T8",AAPTR_PLAYER1)
		TNT1 A 0 A_JumpIfInventory("GluonTrailToken",7,"T7",AAPTR_PLAYER1)
		TNT1 A 0 A_JumpIfInventory("GluonTrailToken",6,"T6",AAPTR_PLAYER1)
		TNT1 A 0 A_JumpIfInventory("GluonTrailToken",5,"T5",AAPTR_PLAYER1)
		TNT1 A 0 A_JumpIfInventory("GluonTrailToken",4,"T4",AAPTR_PLAYER1)
		TNT1 A 0 A_JumpIfInventory("GluonTrailToken",3,"T3",AAPTR_PLAYER1)
		TNT1 A 0 A_JumpIfInventory("GluonTrailToken",2,"T2",AAPTR_PLAYER1)
		TNT1 A 0 A_JumpIfInventory("GluonTrailToken",1,"T1",AAPTR_PLAYER1)
		Goto TokenUp
	T14:
		TNT1 A 0 A_TakeInventory("GluonTrailToken",1000,0,AAPTR_PLAYER1)
		TNT1 AAAAA 0 A_Weave(-1,-1,1,1)
	T13:
		TNT1 AAAAA 0 A_Weave(-1,-1,1,1)
	T12:
		TNT1 AAAAA 0 A_Weave(-1,-1,1,1)
	T11:
		TNT1 AAAAA 0 A_Weave(-1,-1,1,1)
	T10:
		TNT1 AAAAA 0 A_Weave(-1,-1,1,1)
	T9:
		TNT1 AAAAA 0 A_Weave(-1,-1,1,1)
	T8:
		TNT1 AAAAA 0 A_Weave(-1,-1,1,1)
	T7:
		TNT1 AAAAA 0 A_Weave(-1,-1,1,1)
	T6:
		TNT1 AAAAA 0 A_Weave(-1,-1,1,1)
	T5:
		TNT1 AAAAA 0 A_Weave(-1,-1,1,1)
	T4:
		TNT1 AAAAA 0 A_Weave(-1,-1,1,1)
	T3:
		TNT1 AAAAA 0 A_Weave(-1,-1,1,1)
	T2:
		TNT1 AAAAA 0 A_Weave(-1,-1,1,1)
	T1:
		TNT1 AAAAA 0 A_Weave(-1,-1,1,1)
	TokenUp:
		TNT1 A 0 A_GiveInventory("GluonTrailToken",1,AAPTR_PLAYER1)
	Moving:
		TNT1 A 0 A_Warp(AAPTR_DEFAULT,velx,vely,velz,0,WARPF_ABSOLUTEOFFSET|WARPF_INTERPOLATE,1)
		Goto Death
		
		TNT1 A 0 A_Weave(1,1,1,1)
		TNT1 A 0 A_SpawnItemEx("GluonTrailV3",0,0,0,0,0,0,0,32)
		TNT1 A 0 A_SetUserVar("user_life",user_life+1)
		TNT1 A 0 A_JumpIf(user_life>=350,"Death")
		Loop
	Death:
		TNT1 A 1
		Stop
	}
}

Actor GluonTrailToken : Inventory { Inventory.MaxAmount 14 }

Actor GluonTrailV2
{
	+NOTIMEFREEZE
	+NOINTERACTION
	Scale 0.2 //0.45
	RenderStyle Add
	Translation "0:255=%[0,0,0]:[0.15,0.15,1]"
	Alpha 0.25
	States
	{
	Spawn:
		TNT1 A 0
		PLSE B 0 A_SetScale(frandom(0.2,0.35))
		PLSE B 0 A_Jump(256,1,2,3)
		PLSE B 1 bright
		Stop
		
		PLSE C 1 bright
		Stop
		
		PLSE D 1 bright
		Stop
	}
}

Actor GluonTrailV3 : GluonTrailV2
{
	Scale 0.2
	Alpha 0.25
	States
	{
	Spawn:
		LPUF A 0
		LPUF A 1
		Stop
	}
}



Actor GluonPrimaryBurst2 : GluonPrimaryBurst
{
	States
	{
	Spawn:
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,90,2,30)
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,90,2,60)
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,90,2,90)
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,-90,2,60)
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,-90,2,30)
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,-90,2,0)
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,-90,2,-30)
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,-90,2,-60)
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,-90,2,-90)
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,90,2,-60)
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,90,2,-30)
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,90,2,0)
		Loop
	}
}

Actor GluonPrimaryBurst3 : GluonPrimaryBurst
{
	States
	{
	Spawn:
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,90,2,60)
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,90,2,90)
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,-90,2,60)
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,-90,2,30)
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,-90,2,0)
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,-90,2,-30)
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,-90,2,-60)
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,-90,2,-90)
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,90,2,-60)
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,90,2,-30)
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,90,2,0)
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,90,2,30)
		Loop
	}
}

Actor GluonPrimaryBurst4 : GluonPrimaryBurst
{
	States
	{
	Spawn:
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,90,2,90)
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,-90,2,60)
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,-90,2,30)
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,-90,2,0)
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,-90,2,-30)
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,-90,2,-60)
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,-90,2,-90)
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,90,2,-60)
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,90,2,-30)
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,90,2,0)
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,90,2,30)
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,90,2,60)
		Loop
	}
}

Actor GluonPrimaryBurst5 : GluonPrimaryBurst
{
	States
	{
	Spawn:
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,-90,2,60)
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,-90,2,30)
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,-90,2,0)
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,-90,2,-30)
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,-90,2,-60)
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,-90,2,-90)
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,90,2,-60)
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,90,2,-30)
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,90,2,0)
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,90,2,30)
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,90,2,60)
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,90,2,90)
		Loop
	}
}

Actor GluonPrimaryBurst6 : GluonPrimaryBurst
{
	States
	{
	Spawn:
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,-90,2,30)
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,-90,2,0)
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,-90,2,-30)
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,-90,2,-60)
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,-90,2,-90)
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,90,2,-60)
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,90,2,-30)
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,90,2,0)
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,90,2,30)
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,90,2,60)
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,90,2,90)
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,-90,2,60)
		Loop
	}
}

Actor GluonPrimaryBurst7 : GluonPrimaryBurst
{
	States
	{
	Spawn:
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,-90,2,0)
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,-90,2,-30)
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,-90,2,-60)
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,-90,2,-90)
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,90,2,-60)
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,90,2,-30)
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,90,2,0)
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,90,2,30)
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,90,2,60)
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,90,2,90)
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,-90,2,60)
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,-90,2,30)
		Loop
	}
}

Actor GluonPrimaryBurst8 : GluonPrimaryBurst
{
	States
	{
	Spawn:
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,-90,2,-30)
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,-90,2,-60)
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,-90,2,-90)
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,90,2,-60)
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,90,2,-30)
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,90,2,0)
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,90,2,30)
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,90,2,60)
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,90,2,90)
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,-90,2,60)
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,-90,2,30)
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,-90,2,0)
		Loop
	}
}

Actor GluonPrimaryBurst9 : GluonPrimaryBurst
{
	States
	{
	Spawn:
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,-90,2,-60)
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,-90,2,-90)
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,90,2,-60)
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,90,2,-30)
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,90,2,0)
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,90,2,30)
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,90,2,60)
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,90,2,90)
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,-90,2,60)
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,-90,2,30)
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,-90,2,0)
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,-90,2,-30)
		Loop
	}
}

Actor GluonPrimaryBurst10 : GluonPrimaryBurst
{
	States
	{
	Spawn:
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,-90,2,-90)
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,90,2,-60)
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,90,2,-30)
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,90,2,0)
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,90,2,30)
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,90,2,60)
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,90,2,90)
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,-90,2,60)
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,-90,2,30)
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,-90,2,0)
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,-90,2,-30)
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,-90,2,-60)
		Loop
	}
}

Actor GluonPrimaryBurst11 : GluonPrimaryBurst
{
	States
	{
	Spawn:
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,90,2,-60)
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,90,2,-30)
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,90,2,0)
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,90,2,30)
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,90,2,60)
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,90,2,90)
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,-90,2,60)
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,-90,2,30)
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,-90,2,0)
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,-90,2,-30)
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,-90,2,-60)
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,-90,2,-90)
		Loop
	}
}

Actor GluonPrimaryBurst12 : GluonPrimaryBurst
{
	States
	{
	Spawn:
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,90,2,-30)
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,90,2,0)
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,90,2,30)
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,90,2,60)
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,90,2,90)
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,-90,2,60)
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,-90,2,30)
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,-90,2,0)
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,-90,2,-30)
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,-90,2,-60)
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,-90,2,-90)
		LPUF A 1 Bright A_CustomMissile("GluonOutsideTrailSpawner",0,0,90,2,-60)
		Loop
	}
}

//The Gluon "flash", which up close, is deadly to those who get in front of the gun.

Actor GluonFire
{
	Speed 20
	Damage 1
	Radius 1
	Height 1
	Projectile
	+RIPPER
	RipperLevel 2
	+DONTREFLECT
	+EXTREMEDEATH
	DamageType "PlasmaDisint"
	States
	{
	Spawn:
		TNT1 A 1
		Stop
	}
}

Actor GluonFire2 : GluonFire
{
	States
	{
	Spawn:
		TNT1 A 2
		Stop
	}
}

Actor GluonFire3 : GluonFire
{
	States
	{
	Spawn:
		TNT1 A 3
		Stop
	}
}

Actor GluonFire4 : GluonFire { Speed 30 }

Actor GluonFire5 : GluonFire2 { Speed 30 }


Actor GluonTrail
{
	Scale 1.15
	Projectile
	+NOINTERACTION
	RenderStyle Add
	Alpha .45
	States
	{
	Spawn:
		LPUF ABCDE 2 
		Stop
	}
}

Actor GluonExplosion : GluonTrail
{
	Scale 1.15
	Projectile
	+NOCLIP
	+EXTREMEDEATH
	+FORCERADIUSDMG
	RenderStyle Add
	DamageType "PlasmaDisint"
	Alpha .45
	States
	{
	Spawn:
		LPUF A 0
		LPUF A 0 A_Explode(10,75,0)
		Stop
	}
}

Actor GluonOutsideTrailSpawner
{
	+NOINTERACTION
	States
	{
	Spawn:
		TNT1 A 1
		TNT1 A 0 A_CustomMissile("GluonTrail",0,0)
		Stop
	}
}
	

Actor GluonTrailSmall : GluonTrail { Scale .95 }

Actor RipperEffect
{
	Projectile
	+RIPPER
	RipperLevel 2
	+EXTREMEDEATH
	+DONTREFLECT
	+PAINLESS
	Speed 1
	Damage 1
	Radius 1
	Height 1
	DamageType "PlasmaDisint"
	States
	{
	Spawn:
		TNT1 A 1
		Stop
	}
}

//Secondary shot. Produces straight-forward shockwaves in a wall formation.

Actor ShockwaveStarter
{
	Radius 16
	Height 12
	Speed 6
	Damage 15
	Projectile
	//+RIPPER
	+THRUACTORS
	+FLOORHUGGER
	+DONTREFLECT
	+EXTREMEDEATH
	+DONTSPLASH 
	+FORCERADIUSDMG
	//+NODAMAGETHRUST
	DeathSound "weapons/shockwaveboom"
	RenderStyle Add
	ReactionTime 20
	DamageType "PlasmaDisint"
	Alpha .5
	+NODAMAGETHRUST
	+PAINLESS
	States
	{
	Spawn:
		MI04 A 0
		MI04 A 0 A_PlaySound("weapons/shockwaveactive",CHAN_BODY,1,1)
		MI04 A 0 A_SpawnItemEx("ShockwaveWingSpawner",-2,0,0,6,0,0,0,32|SXF_TRANSFERPOINTERS)
	ShockLoop:
		MI04 A 0 A_CustomMissile("ShockwaveFX",0,0,0,6)	MI04 A 2 A_Explode(random(20,50),80,0)
		MI04 A 0 A_CustomMissile("ShockwaveFX",0,0,0,6)	MI04 B 2 A_Explode(random(20,50),80,0)
		MI04 A 0 A_CustomMissile("ShockwaveFX",0,0,0,6)	MI04 C 2 A_Explode(random(20,50),80,0)
		MI04 A 0 A_CustomMissile("ShockwaveFX",0,0,0,6)	MI04 D 2 A_Explode(random(20,50),80,0)
		MI04 A 0 A_CountDown
		Loop
	Death:
		//TNT1 A 0 A_StopSound(CHAN_BODY)
		TNT1 A 0 A_Scream
		TNT1 A 0 A_CustomMissile("ShockwaveFX",0,0,0,6)
		Stop
	}
}

Actor ShockwaveSide : ShockwaveStarter
{
	DamageType "Plasma"
	DeathType "Disintegrate"
	States
	{
	Spawn:
		MI04 A 0 A_CustomMissile("ShockwaveFX",0,0,0,6)	MI04 A 2 A_Explode(30,120,0)
		MI04 A 0 A_CustomMissile("ShockwaveFX",0,0,0,6)	MI04 B 2 A_Explode(30,120,0)
		MI04 A 0 A_CustomMissile("ShockwaveFX",0,0,0,6)	MI04 C 2 A_Explode(30,120,0)
		MI04 A 0 A_CustomMissile("ShockwaveFX",0,0,0,6)	MI04 D 2 A_Explode(30,120,0)
		MI04 A 0 A_CountDown
		Loop
	}
}

Actor ShockwaveWingSpawner
{
	var int user_flipper[4];
	//[0] = First side
	//[1] = Second side
	//[2] = Incremental adder
	//[3] = # of times this has occured.
	Projectile
	+FLOORHUGGER
	+NOCLIP
	+DONTSPLASH
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_SetUserArray("user_flipper",2,32)
		TNT1 A 0 A_SetUserArray("user_flipper",0,(user_flipper[0]+user_flipper[2]))
		TNT1 A 4 A_SetUserArray("user_flipper",1,(user_flipper[0]*-1))
	Perform:
		TNT1 A 0 A_SpawnItemEx("ShockwaveSide",0,user_flipper[0],0,6,0,0,0,32|SXF_TRANSFERPOINTERS)
		TNT1 A 0 A_SpawnItemEx("ShockwaveSide",0,user_flipper[1],0,6,0,0,0,32|SXF_TRANSFERPOINTERS)
		TNT1 A 0 A_SetUserArray("user_flipper",0,(user_flipper[0]+user_flipper[2]))
		TNT1 A 0 A_SetUserArray("user_flipper",1,(user_flipper[0]*-1))
		TNT1 A 4 A_SetUserArray("user_flipper",3,user_flipper[3]+1)
		TNT1 A 0 A_JumpIf(user_flipper[3]>=8,"End")
		Loop
	End:
		TNT1 A 0
		Stop
	}
}

Actor ShockwaveFX
{
	+DONTSPLASH 
	Projectile
	+NOINTERACTION
	+EXTREMEDEATH
	+FORCERADIUSDMG
	+NODAMAGETHRUST 
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_CustomMissile("ShockSmoke",0,2,0+random(-90,90),2,0+random(80,90))
		TNT1 A 0 A_CustomMissile("ShockSmoke",0,1,90,2)
		TNT1 A 0 A_CustomMissile("ShockSmoke",0,1,-90,2)
		TNT1 A 0 A_CustomMissile("SparkUp",0,1,0+random(-90,90),2,0+random(80,90))
		TNT1 A 0 A_CustomMissile("SparkUp",0,1,0+random(-90,90),2,0+random(80,90))
		TNT1 A 0 A_CustomMissile("SparkUp",0,1,0+random(-90,90),2,0+random(80,90))
		TNT1 A 5 A_QuakeEx(3,3,0, 15,0,30,"", QF_SCALEDOWN)
		Stop
	}
}

Actor ShockSmoke
{
	+DONTSPLASH 
	Speed 3
	Projectile
	+NOINTERACTION
	RenderStyle Add
	Alpha .45
	States
	{
	Spawn:
		TNT1 A 0
		WPXS ABCDEFGHIJKLMNOPQRSTUVWXYZ 1
		WPXZ ABC 1 A_FadeOut(0.1)
		Stop
	}
}

Actor SparkUp
{
	+DONTSPLASH 
	Speed 15
	Scale .15
	Projectile
	+NOINTERACTION
	RenderStyle Add
	Alpha .65
	States
	{
	Spawn:
		LEXP ABCDEFGHIJ 1 A_FadeOut(0.1)
		Stop
	}
}





Actor GluonGunDrop : CustomInventory
{
	Inventory.MaxAmount 1
	States
	{
	Use:
		TNT1 A 0
		TNT1 A 0 A_SpawnItemEx("DroppedGluonGun",0,0,32,8,0,0,0,32,0)
		Stop
	}
}

Actor DroppedGluonGun
{
	Radius 16
	Height 20
	States
	{
	Spawn:
		RFLG A 15
		TNT1 A 0 A_SpawnItemEx("AEoDGluonGunNoAmmo",0,0,0,0,0,0,0,48,0)
		Stop
	}
}

Actor AEoDGluonGunNoAmmo : AEoDGluonGunItem
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL
	Inventory.Amount 1
	Inventory.PickupMessage "You found the Gluon Gun."
	Inventory.PickupSound "misc/w_pkup" 
	States
	{
	Spawn:
		RFLG A -1
		Loop
	Pickup:
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",9) <= 0,"Nothing")
		TNT1 A 0 A_JumpIfInventory("AECell",45,"Ammo")
		TNT1 A 0 A_GiveInventory("Weapon9Count",1)
		TNT1 A 0 A_GiveInventory("GluonGunDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDGluonGun",1)
		TNT1 A 0 A_TakeInventory("AECell",45)
		TNT1 A 0 	
		Stop
		Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDGluonGun",1,"Ammo")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		TNT1 A 0 ACS_NamedExecute("s798",0,9,0,0)
		Fail
	Ammo:
		TNT1 A 0 A_TakeInventory("AECell",45)
		TNT1 A 0 A_JumpIfInventory("AEoDGluonGun",1,2)
		TNT1 A 0 A_GiveInventory("Weapon9Count",1)
		TNT1 A 0 A_GiveInventory("GluonGunDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDGluonGun",1)
		Stop
	}
}

//==================================================================================
//==================================================================================

//==================================================================================
//==================================================================================

Actor AEoDTempestStaffItem : CustomInventory 6162
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL
	+FLOATBOB
	Scale 0.16
	Inventory.Amount 1
	Inventory.PickupSound "weaponbuild"
	Inventory.PickupMessage "You wield the tempest staff!"
	States
	{
	Spawn:
		WTMP ABCDEFGHIJKL 3
		Loop
	Pickup:
		TNT1 A 0 A_JumpIfInventory("AEoDTempestStaff",1,"Ammo")
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",9) <= 0,"Nothing")
		TNT1 A 0 A_GiveInventory("Weapon9Count",1)
		TNT1 A 0 A_GiveInventory("TempestStaffDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDTempestStaff",1)
		TNT1 A 0 	
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDTempestStaff",1,"Ammo")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		TNT1 A 0 ACS_NamedExecute("s798",0,9,0,0)
		Fail
	Ammo:
		TNT1 A 0 A_GiveInventory("AEoDTempestStaff",1)
		Stop
	}
}

Actor AEoDTempestStaff : Weapon // 6162
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL
	+FLOATBOB
	+WEAPON.CHEATNOTWEAPON
	Weapon.AmmoType "BlueMana"
	Weapon.AmmoType2 "RedMana"
	Weapon.AmmoGive1 50
	Weapon.AmmoGive2 40
	Weapon.AmmoUse 2
	Weapon.AmmoUse2 40
	Weapon.SelectionOrder 9900
	Scale 0.16
	Inventory.PickupSound "weaponbuild"
	Weapon.UpSound "weapons/draw"
	Inventory.PickupMessage "You wield the tempest staff!"
	Obituary "%o was blown away by %k's tempest staff."
	Tag "Tempest staff"
	States
	{
	Spawn:
		WTMP ABCDEFGHIJKL 3
		Loop
	Ready:
		TPST A 1 A_WeaponReady
		Loop
	Deselect:
		TNT1 A 0 	
		TPST A 0 A_StopSound(6)
		TPST A 0 A_StopSound(CHAN_WEAPON)
		TPST A 0 A_ClearReFire
		TPST A 1 A_Lower
		TNT1 AA 0 A_Lower
		Loop
	Select:
		TNT1 A 0 	
		TPST A 1 A_Raise
		TNT1 AA 0 A_Raise
		Loop
	Fire:
		TNT1 B 0 A_JumpIfInventory("PowerQuickFire",1,"FireQuick")
		TPST B 0 A_PlaySound("weapons/tempeststaff/fire",6,0.8,1)
		TPST BCDEFGHI 2
		TPST I 0 A_PlaySound("diablo2/sorceresscast/thunderbolt",CHAN_VOICE,1.0,0)
		TPST I 0 A_PlaySound("heresiarch/lightning",CHAN_WEAPON,1.0,1)
		TNT1 A 0 A_SetBlend("FireBrick1",0.1,10)
		TPST I 0 A_FireCustomMissile("TempestLightning",random(8,-8),0,0,0)
		TPST I 1 A_FireCustomMissile("TempestLightning",random(8,-8),0,0,0)
		TPST I 0 A_SetPitch(pitch-0.25)////ACS_NamedExecute("s851",0,10,random(-10,10),0)
		TPST I 0 A_SetAngle(angle+frandom(-0.25,0.25))
		TPST I 0 A_FireCustomMissile("TempestLightning",random(8,-8),0,0,0)
		TPST I 1 A_FireCustomMissile("TempestLightning",random(8,-8),0,0,0)
		TNT1 A 0 A_SetBlend("FireBrick1",0.1,10)
		TPST I 0 A_FireCustomMissile("TempestLightning",random(8,-8),0,0,0)
		TPST I 1 A_FireCustomMissile("TempestLightning",random(8,-8),0,0,0)
		TPST I 0 A_SetPitch(pitch+0.25)////ACS_NamedExecute("s851",0,-10,random(-10,10),0)
		TPST I 0 A_SetAngle(angle+frandom(-0.25,0.25))
		TPST I 0 A_FireCustomMissile("TempestLightning",random(8,-8),0,0,0)
		TPST I 1 A_FireCustomMissile("TempestLightning",random(8,-8),1,0,0)
		TPST I 0 A_ReFire
		TPST I 0 A_StopSound(6)
		TPST I 0 A_StopSound(CHAN_WEAPON)
		TPST HGFEDCBA 2
		TPST A 5
		Goto Ready
	FireQuick:
		TNT1 B 0 A_JumpIfInventory("PowerQuickFire",1,1)
		Goto Fire
		TPST B 0 A_PlaySound("weapons/tempeststaff/fire",6,0.8,1)
		TPST BCDEFGHI 2
		TPST I 0 A_PlaySound("diablo2/sorceresscast/thunderbolt",CHAN_VOICE,1.0,0)
		TPST I 0 A_PlaySound("heresiarch/lightning",CHAN_WEAPON,1.0,1)
		TNT1 A 0 A_SetBlend("FireBrick1",0.1,10)
		TPST I 0 A_FireCustomMissile("TempestLightning",random(8,-8),0,0,0)
		TPST I 0 A_FireCustomMissile("TempestLightning",random(8,-8),0,0,0)
		TPST I 1 A_FireCustomMissile("TempestLightning",random(8,-8),0,0,0)
		TPST I 0 A_SetPitch(pitch-0.25)////ACS_NamedExecute("s851",0,10,random(-10,10),0)
		TPST I 0 A_SetAngle(angle+frandom(-0.25,0.25))
		TPST I 0 A_FireCustomMissile("TempestLightning",random(8,-8),0,0,0)
		TPST I 0 A_FireCustomMissile("TempestLightning",random(8,-8),0,0,0)
		TPST I 1 A_FireCustomMissile("TempestLightning",random(8,-8),1,0,0)
		TNT1 A 0 A_SetBlend("FireBrick1",0.1,10)
		TPST I 0 A_FireCustomMissile("TempestLightning",random(8,-8),0,0,0)
		TPST I 0 A_FireCustomMissile("TempestLightning",random(8,-8),0,0,0)
		TPST I 1 A_FireCustomMissile("TempestLightning",random(8,-8),0,0,0)
		TPST I 0 A_SetPitch(pitch+0.25)////ACS_NamedExecute("s851",0,10,random(-10,10),0)
		TPST I 0 A_SetAngle(angle+frandom(-0.25,0.25))
		TPST I 0 A_FireCustomMissile("TempestLightning",random(8,-8),0,0,0)
		TPST I 0 A_FireCustomMissile("TempestLightning",random(8,-8),0,0,0)
		TPST I 1 A_FireCustomMissile("TempestLightning",random(8,-8),1,0,0)
		TPST I 0 A_ReFire
		TPST I 0 A_StopSound(6)
		TPST I 0 A_StopSound(CHAN_WEAPON)
		TPST HGFEDCBA 1
		TPST A 5
		Goto Ready
	Hold:
		TNT1 B 0 A_JumpIfInventory("PowerQuickFire",1,"HoldQuick")
		TPST I 0 A_PlaySound("weapons/tempeststaff/fire",6,0.8,1)
		TNT1 A 0 A_SetBlend("FireBrick1",0.1,10)
		TPST I 0 A_FireCustomMissile("TempestLightning",random(8,-8),0,0,0)
		TPST I 1 A_FireCustomMissile("TempestLightning",random(8,-8),0,0,0)
		TPST I 0 A_SetPitch(pitch-0.25)////ACS_NamedExecute("s851",0,10,random(-10,10),0)
		TPST I 0 A_SetAngle(angle+frandom(-0.25,0.25))
		TPST I 0 A_FireCustomMissile("TempestLightning",random(8,-8),0,0,0)
		TPST I 1 A_FireCustomMissile("TempestLightning",random(8,-8),0,0,0)
		TNT1 A 0 A_SetBlend("FireBrick1",0.1,10)
		TPST I 0 A_FireCustomMissile("TempestLightning",random(8,-8),0,0,0)
		TPST I 1 A_FireCustomMissile("TempestLightning",random(8,-8),0,0,0)
		TPST I 0 A_SetPitch(pitch+0.25)////ACS_NamedExecute("s851",0,10,random(-10,10),0)
		TPST I 0 A_SetAngle(angle+frandom(-0.25,0.25))
		TPST I 0 A_FireCustomMissile("TempestLightning",random(8,-8),0,0,0)
		TPST I 1 A_FireCustomMissile("TempestLightning",random(8,-8),1,0,0)
		TPST I 0 A_ReFire
		TPST I 0 A_StopSound(6)
		TPST I 0 A_StopSound(CHAN_WEAPON)
		TPST HGFEDCBA 2
		TPST A 5
		Goto Ready
	HoldQuick:
		TNT1 B 0 A_JumpIfInventory("PowerQuickFire",1,1)
		Goto Hold
		TPST I 0 A_PlaySound("weapons/tempeststaff/fire",6,0.8,1)
		TNT1 A 0 A_SetBlend("FireBrick1",0.1,10)
		TPST I 0 A_FireCustomMissile("TempestLightning",random(8,-8),0,0,0)
		TPST I 0 A_FireCustomMissile("TempestLightning",random(8,-8),0,0,0)
		TPST I 1 A_FireCustomMissile("TempestLightning",random(8,-8),0,0,0)
		TPST I 0 A_SetPitch(pitch-0.25)////ACS_NamedExecute("s851",0,10,random(-10,10),0)
		TPST I 0 A_SetAngle(angle+frandom(-0.25,0.25))
		TPST I 0 A_FireCustomMissile("TempestLightning",random(8,-8),0,0,0)
		TPST I 0 A_FireCustomMissile("TempestLightning",random(8,-8),0,0,0)
		TPST I 1 A_FireCustomMissile("TempestLightning",random(8,-8),1,0,0)
		TNT1 A 0 A_SetBlend("FireBrick1",0.1,10)
		TPST I 0 A_FireCustomMissile("TempestLightning",random(8,-8),0,0,0)
		TPST I 0 A_FireCustomMissile("TempestLightning",random(8,-8),0,0,0)
		TPST I 1 A_FireCustomMissile("TempestLightning",random(8,-8),0,0,0)
		TPST I 0 A_SetPitch(pitch+0.25)////ACS_NamedExecute("s851",0,10,random(-10,10),0)
		TPST I 0 A_SetAngle(angle+frandom(-0.25,0.25))
		TPST I 0 A_FireCustomMissile("TempestLightning",random(8,-8),0,0,0)
		TPST I 0 A_FireCustomMissile("TempestLightning",random(8,-8),0,0,0)
		TPST I 1 A_FireCustomMissile("TempestLightning",random(8,-8),1,0,0)
		TPST I 0 A_ReFire
		TPST I 0 A_StopSound(6)
		TPST I 0 A_StopSound(CHAN_WEAPON)
		TPST HGFEDCBA 1
		TPST A 5
		Goto Ready

	AltFire:
		TPST B 0 A_PlaySound("praevus/teleportout")
		TPST BCDEFGHI 3
		TPST I 0 A_PlayWeaponSound("other/meltfireshot")
		TPST I 0 A_SetBlend("FF D7 BB",0.85,30)
		TPST I 0 Bright A_FireCustomMissile("TempestFireWind",20,0,0,0)
		TPST I 0 Bright A_FireCustomMissile("TempestFireWind",40,0,0,0)
		TPST I 0 Bright A_FireCustomMissile("TempestFireWind",-20,0,0,0)
		TPST I 0 Bright A_FireCustomMissile("TempestFireWind",-40,0,0,0)
		TPST I 5 Bright A_FireCustomMissile("TempestFireWind",0,1,0,0)
		TPST HGFEDCBA 3
		TPST A 10
		Goto Ready
	}
}

Actor TempestLightning
{
	Radius 6
	Height 8
	PROJECTILE
	+RANDOMIZE
	+DONTSPLASH
	Damage 3
	DamageType "Electric"
	//DamageType "Tempest"
	Scale 0.3
	Speed 28
	RenderStyle Add
	DeathSound "heresiarch/lightning/hit"
	Alpha 0.7
	States
	{
	Spawn:
		HSPL A 0
		HSPL A 0 A_Jump(64,"WithLight")
		Goto NoLight
	WithLight:
		HSPL ABCDEFGHIJABCDEFGHIJ 3 Light("TempestLightningFlicker") Bright
		HSPL ABCDEFGHIJ 3 Light("TempestLightningFlicker") Bright A_FadeOut
		Stop
	NoLight:
		HSPL ABCDEFGHIJABCDEFGHIJ 3 Bright
		HSPL ABCDEFGHIJ 3 Bright A_FadeOut
		Stop	
	Death:
		TNT1 A 0
		Stop
	Crash:
	XDeath:
		TNT1 A 20 A_Scream
		Stop
	}
}

Actor TempestFireWind
{
	Projectile
	Speed 12
	Damage (random(3,10)) //3
	Radius 16
	Height 12
	DamageType "Fire"
	+CANBOUNCEWATER
	+RIPPER	RipperLevel 1
	+BLOODLESSIMPACT
	+SEEKERMISSILE
	-EXTREMEDEATH
	-FOILINVUL
	Scale 0.6
	ReactionTime 40
	BounceType "Doom"
	BounceFactor 0.05
	RenderStyle Add
	Translation "96:101=160:165","102:111=70:79","5:5=1:1"
	Alpha 0.67
	States
	{
	Spawn:
		FX07 D 1 Bright
		FX07 DDD 0 A_CustomMissile("GunSmokeSpawner",random(20,40),random(12,-12),random(0,360),2,random(-5,5))
		FX07 D 1 Bright
		FX07 DDD 0 A_CustomMissile("GunSmokeSpawner",random(20,40),random(12,-12),random(0,360),2,random(-5,5))
		FX07 D 1 Bright
		FX07 DDD 0 A_CustomMissile("GunSmokeSpawner",random(20,40),random(12,-12),random(0,360),2,random(-5,5))
		FX07 E 1 Bright
		FX07 EEE 0 A_CustomMissile("GunSmokeSpawner",random(20,40),random(12,-12),random(0,360),2,random(-5,5))
		FX07 E 1 Bright
		FX07 EEE 0 A_CustomMissile("GunSmokeSpawner",random(20,40),random(12,-12),random(0,360),2,random(-5,5))
		FX07 E 1 Bright
		FX07 EEE 0 A_CustomMissile("GunSmokeSpawner",random(20,40),random(12,-12),random(0,360),2,random(-5,5))
		FX07 F 1 Bright
		FX07 FFF 0 A_CustomMissile("GunSmokeSpawner",random(20,40),random(12,-12),random(0,360),2,random(-5,5))
		FX07 F 1 Bright
		FX07 FFF 0 A_CustomMissile("GunSmokeSpawner",random(20,40),random(12,-12),random(0,360),2,random(-5,5))
		FX07 F 1 Bright
		FX07 FFF 0 A_CustomMissile("GunSmokeSpawner",random(20,40),random(12,-12),random(0,360),2,random(-5,5))
		FX07 G 1 Bright
		FX07 GGG 0 A_CustomMissile("GunSmokeSpawner",random(20,40),random(12,-12),random(0,360),2,random(-5,5))
		FX07 G 1 Bright
		FX07 GGG 0 A_CustomMissile("GunSmokeSpawner",random(20,40),random(12,-12),random(0,360),2,random(-5,5))
		FX07 G 1 Bright
		FX07 GGG 0 A_CustomMissile("GunSmokeSpawner",random(20,40),random(12,-12),random(0,360),2,random(-5,5))
		TNT1 A 0 Bright A_CountDown
		FX07 A 1 Bright A_SeekerMissile(10,10,SMF_LOOK,256)
		FX07 AAA 0 Bright A_CustomMissile("GunSmokeSpawner",random(20,40),random(12,-12),random(0,360),2,random(-5,5))
		FX07 A 1 Bright A_SeekerMissile(10,10,SMF_LOOK,256)
		TNT1 AAA 0 Bright A_SpawnItemEx("FireWindExp",0,0,random(10,40),random(-5,5),random(-5,5),random(-5,5),random(1,360))
		FX07 B 1 Bright A_SeekerMissile(10,10,SMF_LOOK,256)
		FX07 BBB 0 Bright A_CustomMissile("GunSmokeSpawner",random(20,40),random(12,-12),random(0,360),2,random(-5,5))
		FX07 B 1 Bright A_SeekerMissile(10,10,SMF_LOOK,256)
		TNT1 AAA 0 Bright A_SpawnItemEx("FireWindExp",0,0,random(10,40),random(-5,5),random(-5,5),random(-5,5),random(1,360))
		FX07 C 1 Bright A_SeekerMissile(10,10,SMF_LOOK,256)
		FX07 CCC 0 Bright A_CustomMissile("GunSmokeSpawner",random(20,40),random(12,-12),random(0,360),2,random(-5,5))
		FX07 C 1 Bright A_SeekerMissile(10,10,SMF_LOOK,256)
		TNT1 AAA 0 Bright A_SpawnItemEx("FireWindExp",0,0,random(10,40),random(-5,5),random(-5,5),random(-5,5),random(1,360))
		FX07 B 1 Bright A_SeekerMissile(10,10,SMF_LOOK,256)
		FX07 BBB 0 Bright A_CustomMissile("GunSmokeSpawner",random(20,40),random(12,-12),random(0,360),2,random(-5,5))
		FX07 B 1 Bright A_SeekerMissile(10,10,SMF_LOOK,256)
		TNT1 AAA 0 Bright A_SpawnItemEx("FireWindExp",0,0,random(10,40),random(-5,5),random(-5,5),random(-5,5),random(1,360))
		TNT1 A 0 A_Jump(40,1)
		Goto Spawn+48
		
		TNT1 A 0 A_PlaySound("ironlich/attack3")
		Goto Spawn+48
	Death:
		FX07 GFED 3 Bright
		FX07 D 1 Bright A_FadeOut
		Wait
	}
}

Actor FireWindExp
{
	Projectile
	Damage 0
	+RIPPER	RipperLevel 1
	+BLOODLESSIMPACT
	Speed 0
	Radius 1
	Height 1
	Scale 0.18
	RenderStyle Translucent
	+NOINTERACTION
	Translation "4:4=160:160","81:94=161:165","96:96=70:70","100:111=71:77"
	States
	{
	Spawn:
		PUF2 AAA 1
		TNT1 A 0 A_Jump(160,1)
		Loop
		
		PUF2 AAA 1
		PUF2 A 1 A_FadeOut
		Wait
	Death:
		TNT1 A 1
		Stop
	}
}

Actor TempestStaffDrop : CustomInventory
{
	Inventory.MaxAmount 1
	States
	{
	Use:
		TNT1 A 0
		TNT1 I 0 A_StopSound(6)
		TNT1 I 0 A_StopSound(CHAN_WEAPON)
		TNT1 A 0 A_SpawnItemEx("DroppedTempestStaff",0,0,32,8,0,0,0,32,0)
		Stop
	}
}

Actor DroppedTempestStaff
{
	Radius 16
	Height 20
	Scale 0.16
	States
	{
	Spawn:
		WTMP A 15
		TNT1 A 0 A_SpawnItemEx("AEoDTempestStaffNoAmmo",0,0,0,0,0,0,0,48,0)
		Stop
	}
}

Actor AEoDTempestStaffNoAmmo : AEoDTempestStaffItem
{
	+FLOORCLIP
	+FLOATBOB
	+INVENTORY.IGNORESKILL
	Scale 0.16
	Inventory.Amount 1
	Inventory.PickupSound "weaponbuild"
	Inventory.PickupMessage "You wield the tempest staff!"
	States
	{
	Spawn:
		WTMP ABCDEFGHIJKL 3
		Loop
	Pickup:
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",9) <= 0,"Nothing")
		TNT1 A 0 A_JumpIfInventory("BlueMana",50,"Ammo")
		TNT1 A 0 A_JumpIfInventory("RedMana",40,"Ammo3")
		TNT1 A 0 A_GiveInventory("Weapon9Count",1)
		TNT1 A 0 A_GiveInventory("TempestStaffDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDTempestStaff",1)
		TNT1 A 0 A_TakeInventory("BlueMana",50)
		TNT1 A 0 A_TakeInventory("RedMana",40)
		TNT1 A 0 	
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDTempestStaff",1,"Ammo")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		
		TNT1 A 0 ACS_NamedExecute("s798",0,9,0,0)
		Fail
	Ammo:
		TNT1 A 0 A_JumpIfInventory("RedMana",40,1)
		Goto Ammo2
		TNT1 A 0 A_TakeInventory("BlueMana",50)
		TNT1 A 0 A_TakeInventory("RedMana",40)
		TNT1 A 0 A_JumpIfInventory("AEoDTempestStaff",1,2)
		TNT1 A 0 A_GiveInventory("Weapon9Count",1)
		TNT1 A 0 A_GiveInventory("TempestStaffDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDTempestStaff",1)
		Stop
	Ammo2:
		TNT1 A 0 A_TakeInventory("BlueMana",50)
		TNT1 A 0 A_GiveInventory("Weapon9Count",1)
		TNT1 A 0 A_GiveInventory("TempestStaffDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDTempestStaff",1)
		TNT1 A 0 A_TakeInventory("RedMana",40)
		Stop
	Ammo3:
		TNT1 A 0 A_TakeInventory("RedMana",40)
		TNT1 A 0 A_GiveInventory("Weapon9Count",1)
		TNT1 A 0 A_GiveInventory("TempestStaffDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDTempestStaff",1)
		TNT1 A 0 A_TakeInventory("BlueMana",50)
		Stop
	}
}

//==================================================================================
//==================================================================================

//==================================================================================
//==================================================================================

Actor AEoDBloodScourgeItem : CustomInventory 6025
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL
	+FLOATBOB
	Scale 0.7
	Inventory.Amount 1
	Inventory.PickupMessage "Picked up the BloodScourge Staff!!"
	Inventory.PickupSound "pickuppiece" 
	States
	{
	Spawn:
		WMS1 A -1
		Loop
	Pickup:
		TNT1 A 0 A_JumpIfInventory("AEoDBloodScourge",1,"Ammo")
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",9) <= 0,"Nothing")
		TNT1 A 0 A_GiveInventory("Weapon9Count",1)
		TNT1 A 0 A_GiveInventory("BloodScourgeDrop2",1)
		TNT1 A 0 A_GiveInventory("AEoDBloodScourge",1)
		TNT1 A 0 	
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDBloodScourge",1,"Ammo")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		
		TNT1 A 0 ACS_NamedExecute("s798",0,9,0,0)
		Fail
	Ammo:
		TNT1 A 0 A_GiveInventory("AEoDBloodScourge",1)
		Stop
	}
}

Actor AEoDBloodScourge : MWeapBloodScourge // 6025
{ 
	+FLOORCLIP
	+INVENTORY.IGNORESKILL
	+WEAPON.CHEATNOTWEAPON 
	-PRIMARY_USES_BOTH
	+FLOATBOB
	Weapon.AmmoType1 "RedMana" 
	Weapon.AmmoType2 "RedMana" 
	Weapon.AmmoGive1 0
	Weapon.AmmoUse1 14
	Weapon.AmmoUse2 20
	Weapon.SelectionOrder 11975
	Obituary "%o was incinerated by %k's BloodScourge Staff."
	Inventory.PickupMessage "Picked up the BloodScourge Staff!!"
	Inventory.PickupSound "pickuppiece" 
	Weapon.upsound "weapons/draw"
	Scale 0.7
	Tag "Bloodscourge staff"
	States 
	{ 
	Spawn: 
		WMS1 A -1 
		Loop 
	Ready:
		MSTF ABCDEF 5 A_WeaponReady
		Goto Ready+1
	Deselect: 
		TNT1 A 0 A_StopSound(6)
		TNT1 A 0 	
		MSTF A 1 A_Lower
		TNT1 AA 0 A_Lower 
		Goto Deselect+1
	Select: 
		TNT1 A 0 	
		MSTF A 1 A_Raise
		TNT1 AA 0 A_Raise 
		Loop 
	Fire: 
		MSTF G 5 Bright 
		MSTF G 0 Bright A_Light2
		MSTF A 0 A_Recoil(2)
		TNT1 A 0 A_PlaySound("reilsss/weapons/bloodsourgefire", CHAN_WEAPON, 1.0, 0)
		TNT1 A 0 A_SetBlend("Orange",0.5,5)
		MSTF F 0 Bright A_FireCustomMissile("MageStaffFXPlayer", 0, 1, 0, 0)
		MSTF F 0 Bright A_FireCustomMissile("MageStaffFXPlayer", 6, 0, 0, 0)
		MSTF F 0 Bright A_FireCustomMissile("MageStaffFXPlayer", -6, 0, 0, 0)
		MSTF H 1 Bright A_SetPitch(pitch-4)
		MSTF HHHH 1 Bright A_SetPitch(pitch+0.5)
		MSTF G 0 Bright A_Light0
		MSTF IIII 1 Bright A_SetPitch(pitch+0.5)
		MSTF J 5 Bright 
		Goto Ready 
	AltFire: 
		MSTF G 7 Bright 
		MSTF G 0 Bright A_Light2
		MSTF A 0 A_Recoil(4)
		TNT1 A 0 A_SetBlend("Orange",0.5,8)
		MSTF F 0 Bright A_FireCustomMissile("StaffFire2", 0, 1, 0, 0)
		MSTF HH 1 Bright A_SetPitch(pitch-3)
		MSTF HHHHHI 1 Bright A_SetPitch(pitch+1)
		MSTF I 6 Bright A_Light0
		MSTF J 7 Bright 
		MSTF ABCDEF 6 Bright
		Goto Ready 
	}
} 

Actor MageStaffFXNew : MageStaffFX2 replaces MageStaffFX2
{
	Damage 20
	States
	{
	Death:
		TNT1 A 0 A_SpawnItemEx("MageStaffFXExtraLight",0,0,0,0,0,0,0,32)
		TNT1 AAAAAAAAAAAAAAA 0 A_SpawnItemEx("MageStaffFXExtra",0,0,6,random(4,-4)/(2*1.5),random(4,-4)/(2*1.5),random(4,-4)/(2*1.5),random(1,359),32)
		TNT1 A 0 A_SetTranslucent(1,1)
		MSP1 G 2 Bright A_Explode(80,192,0)
		MSP1 HIJKLMOP 2 Bright A_FadeOut(0.08)
		Stop
	}
}

Actor MageStaffFXPlayer
{
	Speed 17
	Height 8
	Radius 8
	Damage 20
	DamageType "Unholy"
	Projectile
	+RIPPER	RipperLevel 1
	+NOBOSSRIP
	+SEEKERMISSILE
	+SCREENSEEKER
	+EXTREMEDEATH
	+FORCERADIUSDMG
	+NODAMAGETHRUST
	DeathSound "MageStaffExplode"
	States
	{
	Spawn:
		MSP2 AAAA 0 A_SpawnItemEx("BloodScourgeTrail",0,0,0,0,0,0,0,32,128)
		MSP2 A 2 Bright A_SeekerMissile(2,10,1)
		MSP2 AAAA 0 A_SpawnItemEx("BloodScourgeTrail",0,0,0,0,0,0,0,32,128)
		MSP2 B 2 Bright A_SeekerMissile(2,10,1)
		MSP2 AAAA 0 A_SpawnItemEx("BloodScourgeTrail",0,0,0,0,0,0,0,32,128)
		MSP2 C 2 Bright A_SeekerMissile(2,10,1)
		MSP2 AAAA 0 A_SpawnItemEx("BloodScourgeTrail",0,0,0,0,0,0,0,32,128)
		MSP2 D 2 Bright A_SeekerMissile(2,10,1)
	Loop
	Crash:
	Death:
		"####" "####" 0 A_SpawnItemEx("WarAxeRedExploSprite",0,0,0,frandom(-4,4),0,frandom(-4,4),random(0,359),32)
		"####" "########" 0 A_SpawnItemEx("WarAxeRedExploSprite",0,0,0,frandom(-4,4),0,frandom(-4,4),random(0,359),32,192)
		"####" "#" 0 A_SpawnItemEx("MageStaffFXExtraLight",0,0,0,0,0,0,0,32)
		"####" "#######" 0 A_SpawnItemEx("MageStaffFXExtra",0,0,6,random(4,-4)/(2*1.5),random(4,-4)/(2*1.5),random(4,-4)/(2*1.5),random(1,359),32)
		"####" "#" 0 A_SetTranslucent(1,1)
		"####" "#" 0 Bright A_Explode(160,192,0)
	Perform:
		"####" "#" 0 A_SetScale(ScaleX+(0.02))
		"####" "#" 1 
		Stop
	}
}

Actor BloodScourgeTrail
{
	+NOINTERACTION
	RenderStyle Add
	Scale 0.8
	Translation "0:255=%[0,0,0]:[1,0.05,0.05]"
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_Jump(256,"S1","S2","S3","S4")
	S1:
		MSP2 A 0
		Goto Acting
	S2:
		MSP2 B 0
		Goto Acting
	S3:
		MSP2 C 0
		Goto Acting
	S4:
		MSP2 D 0
		Goto Acting
	Acting:
		"####" "#" 0 A_Warp(AAPTR_DEFAULT,frandom(0,4),0,frandom(-4,4),random(0,359),WARPF_NOCHECKPOSITION)
		"####" "#" 1 Bright A_ChangeVelocity(frandom(-1,1),0,frandom(-1,1),3)
	Perform:
		"####" "#" 0 A_ScaleVelocity(frandom(1.01,1.05))
		"####" "#" 1 A_SetScale(ScaleX-(frandom(0.01,0.02)))
		"####" "#" 0 A_JumpIf(ScaleX<=0,"End")
		Loop
	End:
		TNT1 A 0
		Stop
	}
}


Actor MageStaffFXExtra
{
	+NOINTERACTION
	Scale 0.9
	RenderStyle Add
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_Jump(200,3,4,6,8)
		BRNR CCCCDDDDEEEEFFFFGGGHHHH 1 Bright A_FadeOut(0.035)
		Wait
	}
}

Actor MageStaffFXExtraLight : MageStaffFXExtra { }

Actor StaffFire2
{
	Projectile
	+EXTREMEDEATH
	Radius 8
	Height 8
	Speed 20
	Damage 100
	SeeSound "reilsss/weapons/bloodsourgefire"
	DeathSound "reilsss/weapons/bloodsourgeexplosion"
	Scale 1.5
	DamageType "Unholy"
	States
	{
	Spawn:
		MSP1 CDEF 2 Bright
		MSP1 A 0 Bright A_CustomMissile("StaffFireSS",0,0,45,6)
		MSP1 A 2 Bright A_CustomMissile("StaffFireSS",0,0,-45,6)
		MSP1 B 0 Bright A_CustomMissile("StaffFireSS",0,0,90,6)
		MSP1 B 2 Bright A_CustomMissile("StaffFireSS",0,0,-90,6)
		MSP1 C 0 Bright A_CustomMissile("StaffFireSS",0,0,135,6)
		MSP1 C 2 Bright A_CustomMissile("StaffFireSS",0,0,-135,6)
		MSP1 D 0 Bright A_CustomMissile("StaffFireSS",0,0,180,6)
		MSP1 D 2 Bright A_CustomMissile("StaffFireSS",0,0,-180,6)
		MSP1 E 0 Bright A_CustomMissile("StaffFireSS",0,0,225,6)
		MSP1 E 2 Bright A_CustomMissile("StaffFireSS",0,0,-225,6)
		MSP1 F 0 Bright A_CustomMissile("StaffFireSS",0,0,270,6)
		MSP1 F 2 Bright A_CustomMissile("StaffFireSS",0,0,-270,6)
		MSP1 A 0 Bright A_CustomMissile("StaffFireSS",0,0,315,6)
		MSP1 A 2 Bright A_CustomMissile("StaffFireSS",0,0,-315,6)
		Goto Spawn+2
	Death:
		TNT1 A 0 A_SpawnItemEx("MageStaffFXExtraLight",0,0,0,0,0,0,0,32)
		TNT1 AAAAAAAAAAAAAAA 0 A_SpawnItemEx("MageStaffFXExtra",0,0,6,random(4,-4)/(2*1.5),random(4,-4)/(2*1.5),random(4,-4)/(2*1.5),random(1,359),32)
		MSP1 G 2 Bright A_Explode(512,192,0)
		MSP1 HIJKLMOP 2 Bright 
		Stop
	}
}

Actor StaffFireSS
{
	Projectile
	+EXPLODEONWATER
	+EXTREMEDEATH
	+DONTSPLASH
	+FORCERADIUSDMG
	+DONTREFLECT
	Radius 12
	Height 8
	Speed 10
	Damage 15
	SeeSound "vile/firecrkl"
	DeathSound "reilsss/weapons/bloodsourgeexplosion"
	DamageType "Unholy"
	States
	{
	Spawn:
		MSP2 A 0 A_JumpIf(waterlevel == 3,"Death")
		MSP2 A 0 A_LowGravity
		MSP2 A 3 Bright A_SpawnItemEx("ExtensionBall",0,0,0,0,0,1,0,32|SXF_TRANSFERPOINTERS)
		MSP2 A 0 A_JumpIf(waterlevel == 3,"Death")
		MSP2 A 0 A_LowGravity
		MSP2 B 3 Bright A_SpawnItemEx("ExtensionBall",0,0,0,0,0,1,0,32|SXF_TRANSFERPOINTERS)//A_CustomMissile("ExtensionBall",0,0,20)
		MSP2 A 0 A_JumpIf(waterlevel == 3,"Death")
		MSP2 A 0 A_LowGravity
		MSP2 C 3 Bright A_SpawnItemEx("ExtensionBall",0,0,0,0,0,1,0,32|SXF_TRANSFERPOINTERS)
		MSP2 A 0 A_JumpIf(waterlevel == 3,"Death")
		MSP2 A 0 A_LowGravity
		MSP2 D 3 Bright A_SpawnItemEx("ExtensionBall",0,0,0,0,0,1,0,32|SXF_TRANSFERPOINTERS)
		Loop
	Death:
		TNT1 A 0 A_SetTranslucent(1,1)
		TNT1 A 0 A_SpawnItemEx("MageStaffFXExtraLight",0,0,0,0,0,0,0,32)
		TNT1 AAAAAAAAAAAAAA 0 A_SpawnItemEx("MageStaffFXExtra",0,0,6,random(4,-4)/(2*1.5),random(4,-4)/(2*1.5),random(6,1)/(2*1.5),random(1,359),32)
		MSP1 G 2 Bright A_Explode(96,96,0)
		MSP1 HIJKLMOP 2 Bright A_FadeOut
		Stop
	}
}

Actor ExtensionBall
{
	PROJECTILE
	+DONTSPLASH
	+BLOODLESSIMPACT
	+EXPLODEONWATER
	+FORCERADIUSDMG
	+EXTREMEDEATH
	+DONTREFLECT
	Radius 8
	Height 6
	Speed 0
	Damage 10
	-NOGRAVITY
	Gravity 0.5
	DeathSound "reilsss/weapons/bloodsourgeexplosion"
	DamageType "Unholy"
	RenderStyle Add
	States
	{
	Spawn:
		WRBL A 0
		WRBL A 0 A_JumpIf(waterlevel == 1, "Death")
		WRBL A 0 A_JumpIf(waterlevel == 2, "Death")
		WRBL A 0 A_JumpIf(waterlevel == 3, "Death")
		WRBL A 4 Bright
		WRBL B 0 A_JumpIf(waterlevel == 1, "Death")
		WRBL B 0 A_JumpIf(waterlevel == 2, "Death")
		WRBL B 0 A_JumpIf(waterlevel == 3, "Death")
		WRBL B 4 Bright
		WRBL C 0 A_JumpIf(waterlevel == 1, "Death")
		WRBL C 0 A_JumpIf(waterlevel == 2, "Death")
		WRBL C 0 A_JumpIf(waterlevel == 3, "Death")
		WRBL C 4 Bright
		Loop
	Death:
		TNT1 A 0 A_Explode(32,32,0)
		TNT1 A 0 A_SpawnItemEx("MageStaffFXExtra",random(4,-4),random(4,-4),random(0,4),0,0,random(10,1)/(8*1.05),0,32)
		DKB2 DDEEFFGGHHII 2 Bright A_FadeOut(0.08)
		Stop
	}
}


Actor BloodScourgeDrop2 : CustomInventory
{
	Inventory.MaxAmount 1
	States
	{
	Use:
		TNT1 A 0
		TNT1 A 0 A_StopSound(6)
		TNT1 A 0 A_SpawnItemEx("DroppedBloodScourge",0,0,32,8,0,0,0,32,0)
		Stop
	}
}

Actor DroppedBloodScourge
{
	Radius 16
	Height 20
	Scale 0.7
	States
	{
	Spawn:
		WMS1 A 15
		TNT1 A 0 A_SpawnItemEx("AEoDBloodScourgeNoAmmo",0,0,0,0,0,0,0,48,0)
		Stop
	}
}

Actor AEoDBloodScourgeNoAmmo : AEoDBloodScourgeItem
{
	+FLOORCLIP
	+FLOATBOB
	+INVENTORY.IGNORESKILL
	Scale 0.7
	Inventory.Amount 1
	Inventory.PickupMessage "Picked up the BloodScourge Staff!!"
	Inventory.PickupSound "pickuppiece" 
	States
	{
	Spawn:
		WMS1 A -1
		Loop
	Pickup:
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",9) <= 0,"Nothing")
		TNT1 A 0 A_JumpIfInventory("RedMana",20,"Ammo")
		TNT1 A 0 A_GiveInventory("Weapon9Count",1)
		TNT1 A 0 A_GiveInventory("BloodScourgeDrop2",1)
		TNT1 A 0 A_GiveInventory("AEoDBloodScourge",1)
		TNT1 A 0 A_TakeInventory("RedMana",20)
		TNT1 A 0 	
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDBloodScourge",1,"Ammo")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		TNT1 A 0 ACS_NamedExecute("s798",0,9,0,0)
		Fail
	Ammo:
		TNT1 A 0 A_TakeInventory("RedMana",20)
		TNT1 A 0 A_JumpIfInventory("AEoDBloodScourge",1,2)
		TNT1 A 0 A_GiveInventory("Weapon9Count",1)
		TNT1 A 0 A_GiveInventory("BloodScourgeDrop2",1)
		TNT1 A 0 A_GiveInventory("AEoDBloodScourge",1)
		Stop
	}
}

//==================================================================================
//==================================================================================

//==================================================================================
//==================================================================================

Actor AEoDHellCoreItem : CustomInventory 6015
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL
	+FLOATBOB
	Inventory.PickupMessage "You found the Hellcore!"
	Inventory.PickupSound "weaponbuild"
	States
	{
	Spawn:
		FHMR H -1
		Loop
	Pickup:
		TNT1 A 0 A_JumpIfInventory("AEoDHellCore",1,"Ammo")
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",9) <= 0,"Nothing")
		TNT1 A 0 A_GiveInventory("Weapon9Count",1)
		TNT1 A 0 A_GiveInventory("HellCoreDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDHellCore",1)
		TNT1 A 0 	
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDHellCore",1,"Ammo")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		
		TNT1 A 0 ACS_NamedExecute("s798",0,9,0,0)
		Fail
	Ammo:
		TNT1 A 0 A_GiveInventory("AEoDHellCore",1)
		Stop
	}
}

Actor AEoDHellCore : Weapon//FWeapHammer //What is this I don't even... // 6015
{ 
	+FLOORCLIP
	+INVENTORY.IGNORESKILL
	+WEAPON.CHEATNOTWEAPON
	+FLOATBOB
	Weapon.AmmoType1 "RedMana"
	Weapon.AmmoType2 "RedMana"
	Weapon.AmmoGive1 20
	Weapon.AmmoUse1 8
	Weapon.AmmoUse2 20
	Weapon.KickBack 25
	Weapon.SelectionOrder 11978
	Obituary "%o felt %k's Hellcore." 
	Inventory.PickupMessage "You found the Hellcore!"
	Inventory.PickupSound "weaponbuild"
	Weapon.upsound "weapons/draw"
	Tag "HellCore"
	States 
	{  
	Spawn: 
		FHMR H 1
		Loop
	Deselect: 
		TNT1 A 0 	
		FHMR A 1 A_Lower 
		TNT1 AA 0 A_Lower
		Loop 
	Select: 
		TNT1 A 0 	
		FHMR A 1 A_Raise
		TNT1 AA 0 A_Raise 
		Loop 
	Ready:
		FHMR A 1 A_WeaponReady
		Goto Ready
	Fire:
		FHMR D 0 A_JumpIfInventory("RedMana",4,1)
		Goto Ready
		FHMR D 3
		FHMR E 3 A_PlaySound("reilsss/weapons/hellcorefire", CHAN_WEAPON, 1.0, 0)
		FHMR F 3 A_FireCustomMissile("HellcoreShot",0,1)
		FHMR G 3
		FHMR CBA 5
		Goto Ready
	AltFire:
		FHMR D 5
		FHMR E 5 A_PlaySound("reilsss/weapons/hellcorefire", CHAN_WEAPON, 1.0, 0)
		FHMR F 5 A_FireCustomMissile("HellcoreShot2",0,1)
		FHMR G 5
		FHMR C 10
		FHMR B 15
		FHMR A 20
		Goto Ready
	}
}

//----------------------------------------------------------
Actor HellcoreShot 
{
	PROJECTILE
	+FORCERADIUSDMG
	+EXTREMEDEATH
	Radius 8
	Height 12
	Speed 25
	Damage 20
	DamageType Fire
	DeathSound "reilsss/weapons/hellcoreexplosion"
	Obituary "%o felt %k's Hellcore."
	RenderStyle Add
	Alpha 0.95
	Scale 0.5
	States
	{
	Spawn: 
		OKFX AAABBBCCC 1 Bright A_SpawnItemEx("HellcoreTrail1",0,random(4,-4),random(4,-4),0,0,random(10,-10)/(5*1.7),0,32)
		Loop
	Death:
		TNT1 A 0 A_Explode(200,128,0)
		TNT1 A 0 A_SpawnItemEx("NewExplosionMedium",0,0,0,0,0,0,0,32)
		TNT1 A 0 A_CustomMissile("HellCoreInfernotShooter",0,0,0+random(-10,10),1)
		TNT1 A 0 A_CustomMissile("HellCoreInfernotShooter",0,0,45+random(-10,10),1)
		TNT1 A 0 A_CustomMissile("HellCoreInfernotShooter",0,0,90+random(-10,10),1)
		TNT1 A 0 A_CustomMissile("HellCoreInfernotShooter",0,0,135+random(-10,10),1)
		TNT1 A 0 A_CustomMissile("HellCoreInfernotShooter",0,0,180+random(-10,10),1)
		TNT1 A 0 A_CustomMissile("HellCoreInfernotShooter",0,0,225+random(-10,10),1)
		TNT1 A 0 A_CustomMissile("HellCoreInfernotShooter",0,0,270+random(-10,10),1)
		TNT1 A 0 A_CustomMissile("HellCoreInfernotShooter",0,0,315+random(-10,10),1)
		OKFX DEFGHI 3 Bright A_FadeOut(0.03)
		OKFX I 1 Bright A_FadeOut(0.3)
		Wait
	}
}

Actor HellCoreInfernotShooter
{
	Radius 1
	Height 1
	Projectile
	Speed 1
	+NOCLIP
	RenderStyle None
	States
	{
	Spawn:
		TNT1 A 1
		TNT1 A 0 A_Stop
		TNT1 AAAAAAAAA 2 A_SpawnItemEx("HellCoreInfernoShot",0,0,0,9,0,0,0,32)
		TNT1 A 1
		Stop
	}
}

Actor HellCoreInfernoShot
{
	Projectile
	+BLOODLESSIMPACT
	+RIPPER	RipperLevel 1
	+EXTREMEDEATH
	Radius 4
	Height 8
	Speed 8
	+STRIFEDAMAGE
	DamageType "Fire"
	Damage 1
	RenderStyle Add
	Scale 0.6
	States
	{
	Spawn:
		TNT1 A 0 
		INFE ABCDEFGHIJKLMNOPQRST 1 Bright A_FadeOut(0.03)
		Stop
	}
}

Actor HellcoreTrail1
{
	+NOINTERACTION
	Scale 0.18
	RenderStyle Add
	Alpha 0.7
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 AA 0 A_SpawnItemEx("FTFlameTrailMini1",random(-7,7),random(-3,3),random(-3,0),0,0,frandom(0,0.5),0,32)
		SMOK ABCDEFGHIJKLMNOPQ 1 A_FadeOut(0.03)
		Wait
	}
}

Actor HellcoreSubtrail1
{
	+NOINTERACTION
	Scale 0.6
	RenderStyle Add
	Alpha 0.8
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_Jump(210,2,4,6,8,10)
		PYFX EEEEEEEEEEEEEEEEEEE 1 Bright A_FadeOut(0.04)
		Wait
	}
}


//----------------------------------------------------------
Actor HellcoreShot2
{
	PROJECTILE
	+FORCERADIUSDMG
	+EXTREMEDEATH
	Radius 8
	Height 12
	Speed 25
	Damage 20
	DamageType Fire
	DeathSound "reilsss/weapons/hellcoreexplosion"
	RenderStyle Add
	Alpha 0.95
	Scale 0.8
	States
	{
	Spawn: 
		TNT1 A 0
		OKFX AA 0 Bright A_SpawnItemEx("HellcoreTrail2b",0,random(4,-4),random(4,-4),0,0,random(10,-10)/(5*1.7),0,32)
		OKFX A 1 Bright A_SpawnItemEx("HellcoreTrail2",0,random(4,-4),random(4,-4),0,0,random(10,-10)/(5*1.7),0,32)
		OKFX AA 0 Bright A_SpawnItemEx("HellcoreTrail2b",0,random(4,-4),random(4,-4),0,0,random(10,-10)/(5*1.7),0,32)
		OKFX A 1 Bright A_SpawnItemEx("HellcoreTrail2",0,random(4,-4),random(4,-4),0,0,random(10,-10)/(5*1.7),0,32)
		OKFX AA 0 Bright A_SpawnItemEx("HellcoreTrail2b",0,random(4,-4),random(4,-4),0,0,random(10,-10)/(5*1.7),0,32)
		OKFX A 1 Bright A_SpawnItemEx("HellcoreTrail2",0,random(4,-4),random(4,-4),0,0,random(10,-10)/(5*1.7),0,32)
		OKFX AA 0 Bright A_SpawnItemEx("HellcoreTrail2b",0,random(4,-4),random(4,-4),0,0,random(10,-10)/(5*1.7),0,32)
		OKFX B 1 Bright A_SpawnItemEx("HellcoreTrail2",0,random(4,-4),random(4,-4),0,0,random(10,-10)/(5*1.7),0,32)
		OKFX AA 0 Bright A_SpawnItemEx("HellcoreTrail2b",0,random(4,-4),random(4,-4),0,0,random(10,-10)/(5*1.7),0,32)
		OKFX B 1 Bright A_SpawnItemEx("HellcoreTrail2",0,random(4,-4),random(4,-4),0,0,random(10,-10)/(5*1.7),0,32)
		OKFX AA 0 Bright A_SpawnItemEx("HellcoreTrail2b",0,random(4,-4),random(4,-4),0,0,random(10,-10)/(5*1.7),0,32)
		OKFX B 1 Bright A_SpawnItemEx("HellcoreTrail2",0,random(4,-4),random(4,-4),0,0,random(10,-10)/(5*1.7),0,32)
		OKFX AA 0 Bright A_SpawnItemEx("HellcoreTrail2b",0,random(4,-4),random(4,-4),0,0,random(10,-10)/(5*1.7),0,32)
		OKFX C 1 Bright A_SpawnItemEx("HellcoreTrail2",0,random(4,-4),random(4,-4),0,0,random(10,-10)/(5*1.7),0,32)
		OKFX AA 0 Bright A_SpawnItemEx("HellcoreTrail2b",0,random(4,-4),random(4,-4),0,0,random(10,-10)/(5*1.7),0,32)
		OKFX C 1 Bright A_SpawnItemEx("HellcoreTrail2",0,random(4,-4),random(4,-4),0,0,random(10,-10)/(5*1.7),0,32)
		OKFX AA 0 Bright A_SpawnItemEx("HellcoreTrail2b",0,random(4,-4),random(4,-4),0,0,random(10,-10)/(5*1.7),0,32)
		OKFX C 1 Bright A_SpawnItemEx("HellcoreTrail2",0,random(4,-4),random(4,-4),0,0,random(10,-10)/(5*1.7),0,32)
		Loop
	Death:
		TNT1 A 0 A_Explode(128,128,0)
		TNT1 A 0 A_SpawnItemEx("HellShotExplosionSet",0,0,0,0,0,0,0,32)
		TNT1 A 0 A_SpawnItemEx("NewExplosionMedium",0,0,0,0,0,0,0,32)
		TNT1 A 0 A_CustomMissile("HellShotW",0,0,0+random(-10,10),6)
		TNT1 A 0 A_CustomMissile("HellShotW",0,0,45+random(-10,10),6)
		TNT1 A 0 A_CustomMissile("HellShotW",0,0,90+random(-10,10),6)
		TNT1 A 0 A_CustomMissile("HellShotW",0,0,135+random(-10,10),6)
		TNT1 A 0 A_CustomMissile("HellShotW",0,0,180+random(-10,10),6)
		TNT1 A 0 A_CustomMissile("HellShotW",0,0,225+random(-10,10),6)
		TNT1 A 0 A_CustomMissile("HellShotW",0,0,270+random(-10,10),6)
		TNT1 A 0 A_CustomMissile("HellShotW",0,0,315+random(-10,10),6)
		OKFX DEFGHI 3 Bright A_FadeOut(0.03)
		OKFX I 1 Bright A_FadeOut(0.3)
		Wait
	}
}


Actor HellcoreTrail2
{
	+NOINTERACTION
	Scale 0.2
	RenderStyle Add
	Alpha 0.7
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 AAAA 0 A_SpawnItemEx("FTFlameTrailMini1",random(-7,7),random(-3,3),random(-3,0),0,0,frandom(0,0.5),0,32)
		SMOK ABCDEFGHIJKLMNOPQ 1 A_FadeOut(0.03)
		Wait
	}
}

Actor HellcoreTrail2b
{
	+NOINTERACTION
	Scale 0.25
	RenderStyle Add
	Alpha 0.7
	States
	{
	Spawn:
		SMOK ABCDEFGHIJKLMNOPQ 1 A_FadeOut(0.03)
		Wait
	}
}

Actor HellShotW
{
	PROJECTILE
	+FORCERADIUSDMG
	+NODAMAGETHRUST
	+EXTREMEDEATH
	Radius 8
	Height 12
	Speed 18
	Damage 3
	DamageType Fire
	DeathSound "reilsss/weapons/hellcoreexplosion"
	RenderStyle Translucent
	Alpha 0.95
	ReactionTime 6
	States
	{
	Spawn: 
		TNT1 A 0 A_CountDown
		HEPA ABC 2 Bright A_SpawnItem("HellShotWTrail",0,0)	//
		TNT1 A 0 A_CountDown
		HEPA DEF 2 Bright A_SpawnItem("HellShotWTrail",0,0)
		Loop
	Death:
		TNT1 A 0 A_SpawnItemEx("HellShotExplosionSet",0,0,0,0,0,0,0,32)
		Stop
	}
}

Actor HellShotWTrail
{
	//var int user_scaleup;
	+NOINTERACTION
	RenderStyle Add
	Scale 0.2
	Alpha 0.99
	Translation "0:255=%[0,0,0]:[1,0.15,0.15]"
	States
	{
	Spawn:
		TNT1 A 0
	Perform:
		X126 A 0 A_SetScale(ScaleX+(0.02))
		X126 A 1 A_FadeOut(0.04)
		Loop
	}
}


Actor HellShotExplosionSet
{
	Projectile
	+EXTREMEDEATH
	+FORCERADIUSDMG
	+NOINTERACTION
	Radius 1
	Height 1
	Speed 0
	RenderStyle Add
	DamageType Fire
	DeathSound "reilsss/weapons/hellcoreexplosion"
	States
	{
	Spawn:
		TNT1 A 0
		Goto Death
	Death:
		TNT1 A 0 A_Explode(128,128,0)
		TNT1 AAAAAAAA 0 A_SpawnItemEx("MageStaffFXExtra",0,0,6,random(4,-4)/(2*1.5),random(4,-4)/(2*1.5),random(4,-4)/(2*1.5),random(1,359),32)
		TNT1 AAAAAAAA 0 A_SpawnItemEx("WarAxeRedExploSprite",0,0,0,frandom(-5,5),0,frandom(-5,5),random(0,359),32,128)	//see WepClass6.AED
		TNT1 A 0 A_SpawnItemEx("NewExploMediumSmoke",0,0,0,frandom(-.5,.5),0,frandom(-.5,.5),   0,32)
		TNT1 A 0 A_SpawnItemEx("NewExploMediumSmoke",0,0,0,frandom(-.5,.5),0,frandom(-.5,.5),  20,32)
		TNT1 A 0 A_SpawnItemEx("NewExploMediumSmoke",0,0,0,frandom(-.5,.5),0,frandom(-.5,.5),  40,32)
		TNT1 A 0 A_SpawnItemEx("NewExploMediumSmoke",0,0,0,frandom(-.5,.5),0,frandom(-.5,.5),  60,32)
		TNT1 A 0 A_SpawnItemEx("NewExploMediumSmoke",0,0,0,frandom(-.5,.5),0,frandom(-.5,.5),  80,32)
		TNT1 A 0 A_SpawnItemEx("NewExploMediumSmoke",0,0,0,frandom(-.5,.5),0,frandom(-.5,.5), 100,32)
		TNT1 A 0 A_SpawnItemEx("NewExploMediumSmoke",0,0,0,frandom(-.5,.5),0,frandom(-.5,.5), 120,32)
		TNT1 A 0 A_SpawnItemEx("NewExploMediumSmoke",0,0,0,frandom(-.5,.5),0,frandom(-.5,.5), 140,32)
		TNT1 A 0 A_SpawnItemEx("NewExploMediumSmoke",0,0,0,frandom(-.5,.5),0,frandom(-.5,.5), 160,32)
		TNT1 A 0 A_SpawnItemEx("NewExploMediumSmoke",0,0,0,frandom(-.5,.5),0,frandom(-.5,.5), 180,32)
		TNT1 A 0 A_SpawnItemEx("NewExploMediumSmoke",0,0,0,frandom(-.5,.5),0,frandom(-.5,.5), -20,32)
		TNT1 A 0 A_SpawnItemEx("NewExploMediumSmoke",0,0,0,frandom(-.5,.5),0,frandom(-.5,.5), -40,32)
		TNT1 A 0 A_SpawnItemEx("NewExploMediumSmoke",0,0,0,frandom(-.5,.5),0,frandom(-.5,.5), -60,32)
		TNT1 A 0 A_SpawnItemEx("NewExploMediumSmoke",0,0,0,frandom(-.5,.5),0,frandom(-.5,.5), -80,32)
		TNT1 A 0 A_SpawnItemEx("NewExploMediumSmoke",0,0,0,frandom(-.5,.5),0,frandom(-.5,.5),-100,32)
		TNT1 A 0 A_SpawnItemEx("NewExploMediumSmoke",0,0,0,frandom(-.5,.5),0,frandom(-.5,.5),-120,32)
		TNT1 A 0 A_SpawnItemEx("NewExploMediumSmoke",0,0,0,frandom(-.5,.5),0,frandom(-.5,.5),-140,32)
		TNT1 A 0 A_SpawnItemEx("NewExploMediumSmoke",0,0,0,frandom(-.5,.5),0,frandom(-.5,.5),-160,32)
		HELX A 3 Bright
		TNT1 A 0 Bright A_CustomMissile("HellBoomW",0,0,  0,2)
		TNT1 A 0 Bright A_CustomMissile("HellBoomW",0,0, 45,2)
		TNT1 A 0 Bright A_CustomMissile("HellBoomW",0,0, 90,2)
		TNT1 A 0 Bright A_CustomMissile("HellBoomW",0,0,135,2)
		TNT1 A 0 Bright A_CustomMissile("HellBoomW",0,0,180,2)
		TNT1 A 0 Bright A_CustomMissile("HellBoomW",0,0,225,2)
		TNT1 A 0 Bright A_CustomMissile("HellBoomW",0,0,270,2)
		TNT1 A 0 Bright A_CustomMissile("HellBoomW",0,0,315,2)
		HELX B 0 Bright A_Explode(24,128,0)
		HELX CD 3 Bright A_Explode(24,160,0)
		HELX EF 3 Bright A_Explode(24,210,0)
		HELX GH 3 Bright A_Explode(24,256,0)
		HELX IJ 3 Bright A_Explode(24,300,0)
		TNT1 AA 3 Bright A_Explode(24,350,0)	
		Stop
	}
}
	
Actor HellBoomW
{
	PROJECTILE
	+THRUACTORS
	+EXTREMEDEATH
	Radius 1
	Height 1
	Speed 6
	Damage 0
	SeeSound "reilsss/weapons/hellcoreexplosion"
	RenderStyle Add
	Alpha 0.80
	States
	{
	Spawn:
		TNT1 AAAAA 6 A_SpawnItemEx("HellFXW",0,0,0,0,0,0,0,32)
		Stop
	}
}

Actor HellFXW
{   
	+NOINTERACTION
	SeeSound "reilsss/weapons/hellcoreexplosion"
	RenderStyle Add
	States
	{
	Spawn:
		TNT1 A 0 
		TNT1 AA 0 A_SpawnItemEx("WarAxeRedExploSprite",0,0,0,frandom(-4,4),0,frandom(-4,4),random(0,359),32,128)	//see WepClass6.AED
		TNT1 AAA 0 A_SpawnItemEx("NewExploMediumSmoke",0,0,6,random(10,-10)/(10*1.95),random(10,-10)/(10*1.95),random(10,-10)/(10*1.95),0,32)
		HELX A 3 Bright
		HELX B 3 Bright
		HELX CDEFGHIJ 3 Bright
		Stop
	}
}

Actor RedPuffW
{   
	PROJECTILE
	Radius 0
	Height 1
	Speed 0
	RenderStyle Add
	Alpha 0.85
	States
	{
	Spawn:
		TNT1 A 3 Bright
		RPUF ABCDE 3 Bright
		Stop 
	}
}

Actor HellCoreDrop : CustomInventory
{
	Inventory.MaxAmount 1
	States
	{
	Use:
		TNT1 A 0
		TNT1 A 0 A_SpawnItemEx("DroppedHellCore",0,0,32,8,0,0,0,32,0)
		Stop
	}
}

Actor DroppedHellCore
{
	Radius 16
	Height 20
	States
	{
	Spawn:
		FHMR H 15
		TNT1 A 0 A_SpawnItemEx("AEoDHellCoreNoAmmo",0,0,0,0,0,0,0,48,0)
		Stop
	}
}

Actor AEoDHellCoreNoAmmo : AEoDHellCoreItem
{
	+FLOORCLIP
	+FLOATBOB
	+INVENTORY.IGNORESKILL
	Inventory.PickupMessage "You found the Hellcore!"
	Inventory.PickupSound "weaponbuild"
	States
	{
	Spawn:
		FHMR H -1
		Loop
	Pickup:
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",9) <= 0,"Nothing")
		TNT1 A 0 A_JumpIfInventory("RedMana",20,"Ammo")
		TNT1 A 0 A_GiveInventory("Weapon9Count",1)
		TNT1 A 0 A_GiveInventory("HellCoreDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDHellCore",1)
		TNT1 A 0 A_TakeInventory("RedMana",20)
		TNT1 A 0 	
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDHellCore",1,"Ammo")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		TNT1 A 0 ACS_NamedExecute("s798",0,9,0,0)
		Fail
	Ammo:
		TNT1 A 0 A_TakeInventory("RedMana",20)
		TNT1 A 0 A_JumpIfInventory("AEoDHellCore",1,2)
		TNT1 A 0 A_GiveInventory("Weapon9Count",1)
		TNT1 A 0 A_GiveInventory("HellCoreDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDHellCore",1)
		Stop
	}
}

//==================================================================================
//==================================================================================

//==================================================================================
//==================================================================================

Actor AEoDHERocketLauncherItem : CustomInventory 6048
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL
	Inventory.Amount 1
	Scale 1.2
	Inventory.PickupMessage "You found a heavy rocket launcher. Be careful with this thing."
	Inventory.PickupSound "reilsss/weappickup/heavyrocketlauncher"
	States
	{
	Spawn:
		W006 J -1
		Loop
	Pickup:
		TNT1 A 0 A_JumpIfInventory("AEoDHERocketLauncher",1,"Ammo")
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",9) <= 0,"Nothing")
		TNT1 A 0 A_GiveInventory("Weapon9Count",1)
		TNT1 A 0 A_GiveInventory("HERocketLauncherDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDHERocketLauncher",1)
		TNT1 A 0 	
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDHERocketLauncher",1,"Ammo")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		TNT1 A 0 ACS_NamedExecute("s798",0,9,0,0)
		Fail
	Ammo:
		TNT1 A 0 A_GiveInventory("AEoDHERocketLauncher",1)
		Stop
	}
}

Actor AEoDHERocketLauncher : Weapon // 6048
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL
	+WEAPON.CHEATNOTWEAPON
	Weapon.AmmoType1 "AERocket"
	Weapon.AmmoType2 "AERocket"
	Weapon.AmmoGive1 10
	Weapon.AmmoUse1 5
	Weapon.AmmoUse2 8
	Weapon.SelectionOrder 14990
	Scale 1.2
	Inventory.PickupMessage "You found a heavy rocket launcher. Be careful with this thing."
	Inventory.PickupSound "reilsss/weappickup/heavyrocketlauncher"
	Weapon.upsound "weapons/rlan/draw"
	Tag "Heavy Rocket launcher"
	States
	{
	Spawn:
		W006 J -1
		Loop
	Ready:
		W006 A 1 A_WeaponReady
		Loop
	Deselect:
		TNT1 A 0 	
		W006 A 1 A_Lower
		TNT1 AA 0 A_Lower
		Loop
	Select:
		TNT1 A 0 	
		W006 A 1 A_Raise
		TNT1 AA 0 A_Raise
		Loop
	Fire:
		W006 B 0 A_PlaySound("reilsss/weapons/herocketlauncherfire", CHAN_WEAPON, 1.0, 0)
		W006 A 0 A_Light2
		TNT1 A 0 A_Recoil(7)
		W006 B 0 A_FireCustomMissile("SuperRocket",0,1,5,5)
		W006 BB 1 Bright A_SetPitch(pitch-5)
		W006 B 0 A_SetPitch(pitch-0.5)
		W006 A 0 A_Light0
		W006 A 0 A_CheckReload
		W006 CCD 1 A_SetPitch(pitch+1)
		W006 AAAAA 1 A_SetPitch(pitch+0.8)
		W006 AAAAAAA 1 A_SetPitch(pitch+0.5)
		W006 A 20
		Goto Ready
	AltFire:
		W006 B 0 A_PlaySound("reilsss/weapons/herocketlauncherfire", CHAN_WEAPON, 1.0, 0)
		W006 A 0 A_Light2
		TNT1 A 0 A_Recoil(10)
		W006 B 0 Bright A_FireCustomMissile("FirebombRocket",0,1,5,5)
		W006 BB 1 Bright A_SetPitch(pitch-5)
		W006 B 0 A_SetPitch(pitch-0.5)
		W006 A 0 A_Light0
		W006 A 0 A_CheckReload
		W006 CCD 1 A_SetPitch(pitch+1)
		W006 AAAAA 1 A_SetPitch(pitch+0.8)
		W006 AAAAAAA 1 A_SetPitch(pitch+0.5)
		W006 A 20
		Goto Ready
	}
}

Actor SuperRocket
{
	PROJECTILE
	+EXTREMEDEATH
	+ROCKETTRAIL
	+FORCERADIUSDMG
	Radius 5
	Height 5
	Speed 30
	Damage 80
	SeeSound "weapons/devlnch"
	DeathSound "weapons/rockexplo"
	Scale 0.7
	States
	{
	Spawn:
		MI13 A 1 Bright A_CustomMissile("QRockTrail",0,0,0,0)
		TNT1 A 0 A_CustomMissile("BarbasRocket1Trail2",random(3,-3),random(3,-3),0)
		TNT1 AA 0 A_CustomMissile("BarbasRocket1Trail1",random(3,-3),random(3,-3),0)
		Loop
	Death:
		FRME A 0 Bright A_Explode(random(300,800),320,1) //(512,256,1)
		TNT1 A 0 A_SPawnItemEx("PBExplosionSpawner",0,0,0,0,0,0,0,32)
		TNT1 AAAAAAAAAAAAAAA 0 A_SpawnItemEx("Q2RocketExtra",0,0,0,1,0,random(-1,3),random(1,360))
		TNT1 A 0 A_CustomMissile("SuperRocketBit2",0,0,45)
		TNT1 A 0 A_CustomMissile("SuperRocketBit",0,0,90)
		TNT1 A 0 A_CustomMissile("SuperRocketBit2",0,0,0)
		TNT1 A 0 A_CustomMissile("SuperRocketBit",0,0,135)
		TNT1 A 0 A_CustomMissile("SuperRocketBit2",0,0,180)
		TNT1 A 0 A_CustomMissile("SuperRocketBit",0,0,225)
		TNT1 A 0 A_CustomMissile("SuperRocketBit2",0,0,270)
		TNT1 A 0 A_CustomMissile("SuperRocketBit",0,0,315)
		TNT1 A 0 A_CustomMissile("SuperRocketBit2",0,0,66)
		TNT1 A 0 A_CustomMissile("SuperRocketBit",0,0,155)
		TNT1 A 0 A_CustomMissile("SuperRocketBit2",0,0,245)
		TNT1 A 20 A_QuakeEx(8,8,0, 20,0,35,"", QF_SCALEDOWN)
		Stop
	}
}

Actor SuperRocketBit2
{
	PROJECTILE
	+RIPPER	RipperLevel 1
	+DONTSPLASH
	Mass 1
	Radius 8
	Height 6
	Speed 20
	Damage 0
	BounceType "Doom" 
	States
	{
	Spawn:
		WRBL P 1 Bright A_Gravity
		Loop
	Death:
		WRBL P 40 Bright 
		Stop
	}
}

//New Fx
Actor HERocketBoomFX
{   
	PROJECTILE
	+NOINTERACTION
	Radius 5
	Height 5
	Speed 0
	RenderStyle Add
	Alpha 0.50
	Scale 1.9
	States
	{
	Spawn:
		TNT1 A 1
		TNT1 A 0 A_CustomMissile ("HERocketSmokeFX",0,0,   0)
		TNT1 A 0 A_CustomMissile ("HERocketSmokeFX",0,0,  20)
		TNT1 A 0 A_CustomMissile ("HERocketSmokeFX",0,0,  40)
		TNT1 A 0 A_CustomMissile ("HERocketSmokeFX",0,0,  60)
		TNT1 A 0 A_CustomMissile ("HERocketSmokeFX",0,0,  80)
		TNT1 A 0 A_CustomMissile ("HERocketSmokeFX",0,0, 100)
		TNT1 A 0 A_CustomMissile ("HERocketSmokeFX",0,0, 120)
		TNT1 A 0 A_CustomMissile ("HERocketSmokeFX",0,0, 140)
		TNT1 A 0 A_CustomMissile ("HERocketSmokeFX",0,0, 160)
		TNT1 A 0 A_CustomMissile ("HERocketSmokeFX",0,0, 180)
		TNT1 A 0 A_CustomMissile ("HERocketSmokeFX",0,0, -20)
		TNT1 A 0 A_CustomMissile ("HERocketSmokeFX",0,0, -40)
		TNT1 A 0 A_CustomMissile ("HERocketSmokeFX",0,0, -60)
		TNT1 A 0 A_CustomMissile ("HERocketSmokeFX",0,0, -80)
		TNT1 A 0 A_CustomMissile ("HERocketSmokeFX",0,0,-100)
		TNT1 A 0 A_CustomMissile ("HERocketSmokeFX",0,0,-120)
		TNT1 A 0 A_CustomMissile ("HERocketSmokeFX",0,0,-140)
		TNT1 A 0 A_CustomMissile ("HERocketSmokeFX",0,0,-160)
		TNT1 A 0 A_CustomMissile ("HERocketSmokeFX",0,0,-180)
		TNT1 A 1
		Stop
	}
}

Actor HERocketSmokeFX
{   
	PROJECTILE
	Radius 2
	Height 2
	Speed 5
	RenderStyle Translucent
	Alpha 0.50
	Scale 0.50
	States
	{
	Spawn:
		TNT1 A 1
		W006 RSTUV 4 
		W006 W 4 A_FadeOut(0.10)
		Stop
	}
}

//Added by Reilsss
//Fire Bomb Launcher Fire
//By: Daniel

Actor FirebombRocket
{
	PROJECTILE
	+FORCERADIUSDMG
	+EXTREMEDEATH
	Radius 11
	Height 8
	Speed 22
	Damage 150
	Obituary "%o was killed by %k's Firebomb rocket."
	DeathSound "weapons/rockexplo"
	States
	{
	Spawn:
		MI13 A 1 Bright A_CustomMissile("QRockTrail",0,0,0,0)
		MISS A 0 A_CustomMissile("BarbasRocket1Trail2",random(3,-3),random(3,-3),0)
		TNT1 AA 0 A_CustomMissile("BarbasRocket1Trail1",random(3,-3),random(3,-3),0)
		Loop
	Death:
		FRME A 0 Bright A_Explode(random(300,800),384,1)
		TNT1 A 0 A_SPawnItemEx("PBExplosionSpawner",0,0,0,0,0,0,0,32)
		TNT1 A 0 A_CustomMissile("SuperRocketBit",0,0,45)
		TNT1 A 0 A_CustomMissile("SuperRocketBit",0,0,90)
		TNT1 A 0 A_CustomMissile("SuperRocketBit",0,0,0)
		TNT1 A 0 A_CustomMissile("SuperRocketBit",0,0,135)
		TNT1 A 0 A_CustomMissile("SuperRocketBit",0,0,180)
		TNT1 A 0 A_CustomMissile("SuperRocketBit",0,0,225)
		TNT1 A 0 A_CustomMissile("SuperRocketBit",0,0,270)
		TNT1 A 0 A_CustomMissile("SuperRocketBit",0,0,315)
		TNT1 A 0 A_CustomMissile("SuperRocketBit",0,0,66)
		TNT1 A 0 A_CustomMissile("SuperRocketBit",0,0,155)
		TNT1 A 0 A_CustomMissile("SuperRocketBit",0,0,245)
		TNT1 A 0 A_SpawnItemEx("RPGFirebombExp1",0,0,0,10,0,0,45,32)
		TNT1 A 0 A_SpawnItemEx("RPGFirebombExp1",0,0,0,10,0,0,135,32)
		TNT1 A 0 A_SpawnItemEx("RPGFirebombExp1",0,0,0,10,0,0,225,32)
		TNT1 A 0 A_SpawnItemEx("RPGFirebombExp1",0,0,0,10,0,0,315,32)
		TNT1 A 10 A_QuakeEx(8,8,0, 20,0,35,"", QF_SCALEDOWN)
		Stop
	}
}

Actor RPGFirebombExp1
{
	Projectile
	+FORCERADIUSDMG
	-NOGRAVITY
	Radius 4
	RenderStyle Add
	Alpha 0.7
	Scale 0.25
	Height 8
	Speed 15
	Damage 15
	Obituary "%o was killed by a Firebomb explosion."
	ReactionTime 50
	States
	{
	Spawn:
		FRME A 0
		FRME A 0 A_StopSound
		TNT1 A 0 A_CheckCeiling("CeilingHit")
		TNT1 A 0 ThrustThingZ(0,20,0,1)
		FRME A 1 Bright A_CountDown
		Wait
	CeilingHit:		//it doesnt have a Z thrust
		FRME A 1 Bright A_CountDown
		Loop
	Death:
		GRNE A 0 A_SetTranslucent(0.99)
		TNT1 A 0 A_CustomMissile("ExpQuakeSmall",0,0,0)
		TNT1 AAAAAAA 0 A_SpawnItemEx("ExplosionMediumSprite",0,0,0,random(3,-3)/(2*1.05),random(3,-3)/(2*1.05),random(4,1)/(2*1.05),0,32)
		TNT1 A 0 A_SpawnItemEx("NewExploMediumSmoke",0,0,0,random(4,-4)/(4*2.0),0,random(4,1)/(4*2.0),0,32)
		TNT1 A 0 A_SpawnItemEx("NewExploMediumSmoke",0,0,0,random(4,-4)/(4*2.0),0,random(4,1)/(4*2.0),20,32)
		TNT1 A 0 A_SpawnItemEx("NewExploMediumSmoke",0,0,0,random(4,-4)/(4*2.0),0,random(4,1)/(4*2.0),40,32)
		TNT1 A 0 A_SpawnItemEx("NewExploMediumSmoke",0,0,0,random(4,-4)/(4*2.0),0,random(4,1)/(4*2.0),60,32)
		TNT1 A 0 A_SpawnItemEx("NewExploMediumSmoke",0,0,0,random(4,-4)/(4*2.0),0,random(4,1)/(4*2.0),80,32)
		TNT1 A 0 A_SpawnItemEx("NewExploMediumSmoke",0,0,0,random(4,-4)/(4*2.0),0,random(4,1)/(4*2.0),100,32)
		TNT1 A 0 A_SpawnItemEx("NewExploMediumSmoke",0,0,0,random(4,-4)/(4*2.0),0,random(4,1)/(4*2.0),120,32)
		TNT1 A 0 A_SpawnItemEx("NewExploMediumSmoke",0,0,0,random(4,-4)/(4*2.0),0,random(4,1)/(4*2.0),140,32)
		TNT1 A 0 A_SpawnItemEx("NewExploMediumSmoke",0,0,0,random(4,-4)/(4*2.0),0,random(4,1)/(4*2.0),160,32)
		TNT1 A 0 A_SpawnItemEx("NewExploMediumSmoke",0,0,0,random(4,-4)/(4*2.0),0,random(4,1)/(4*2.0),180,32)
		TNT1 A 0 A_SpawnItemEx("NewExploMediumSmoke",0,0,0,random(4,-4)/(4*2.0),0,random(4,1)/(4*2.0),-20,32)
		TNT1 A 0 A_SpawnItemEx("NewExploMediumSmoke",0,0,0,random(4,-4)/(4*2.0),0,random(4,1)/(4*2.0),-40,32)
		TNT1 A 0 A_SpawnItemEx("NewExploMediumSmoke",0,0,0,random(4,-4)/(4*2.0),0,random(4,1)/(4*2.0),-60,32)
		TNT1 A 0 A_SpawnItemEx("NewExploMediumSmoke",0,0,0,random(4,-4)/(4*2.0),0,random(4,1)/(4*2.0),-80,32)
		TNT1 A 0 A_SpawnItemEx("NewExploMediumSmoke",0,0,0,random(4,-4)/(4*2.0),0,random(4,1)/(4*2.0),-100,32)
		TNT1 A 0 A_SpawnItemEx("NewExploMediumSmoke",0,0,0,random(4,-4)/(4*2.0),0,random(4,1)/(4*2.0),-120,32)
		TNT1 A 0 A_SpawnItemEx("NewExploMediumSmoke",0,0,0,random(4,-4)/(4*2.0),0,random(4,1)/(4*2.0),-140,32)
		TNT1 A 0 A_SpawnItemEx("NewExploMediumSmoke",0,0,0,random(4,-4)/(4*2.0),0,random(4,1)/(4*2.0),-160,32)
		GRNE A 0 A_PlaySound("reilsss/weapons/hefirebombexplosion")
		GRNE A 0 Bright A_Explode(128,128,1)
		GRNE B 0 Bright A_SpawnItemEx("RPGFirebombExp2",0,0,10,10,0,0,0,32)
		Stop
	}
}

Actor RPGFirebombExp2 : RPGFirebombExp1
{
	Damage 12
	States
	{
	Spawn:
		FRME A 0
		TNT1 A 0 ThrustThingZ(0,14,0,1)
		FRME A 0 A_StopSound
		FRME A 1 Bright A_CountDown
		Wait
	Death:
		GRNE A 0 A_SetTranslucent(0.99)
		TNT1 AAAAAAA 0 A_SpawnItemEx("ExplosionMediumSprite",0,0,0,random(3,-3)/(2*1.05),random(3,-3)/(2*1.05),random(4,1)/(2*1.05),0,32)
		TNT1 A 0 A_SpawnItemEx("NewExploMediumSmoke",0,0,0,random(4,-4)/(4*2.0),0,random(4,1)/(4*2.0),0,32)
		TNT1 A 0 A_SpawnItemEx("NewExploMediumSmoke",0,0,0,random(4,-4)/(4*2.0),0,random(4,1)/(4*2.0),20,32)
		TNT1 A 0 A_SpawnItemEx("NewExploMediumSmoke",0,0,0,random(4,-4)/(4*2.0),0,random(4,1)/(4*2.0),40,32)
		TNT1 A 0 A_SpawnItemEx("NewExploMediumSmoke",0,0,0,random(4,-4)/(4*2.0),0,random(4,1)/(4*2.0),60,32)
		TNT1 A 0 A_SpawnItemEx("NewExploMediumSmoke",0,0,0,random(4,-4)/(4*2.0),0,random(4,1)/(4*2.0),80,32)
		TNT1 A 0 A_SpawnItemEx("NewExploMediumSmoke",0,0,0,random(4,-4)/(4*2.0),0,random(4,1)/(4*2.0),100,32)
		TNT1 A 0 A_SpawnItemEx("NewExploMediumSmoke",0,0,0,random(4,-4)/(4*2.0),0,random(4,1)/(4*2.0),120,32)
		TNT1 A 0 A_SpawnItemEx("NewExploMediumSmoke",0,0,0,random(4,-4)/(4*2.0),0,random(4,1)/(4*2.0),140,32)
		TNT1 A 0 A_SpawnItemEx("NewExploMediumSmoke",0,0,0,random(4,-4)/(4*2.0),0,random(4,1)/(4*2.0),160,32)
		TNT1 A 0 A_SpawnItemEx("NewExploMediumSmoke",0,0,0,random(4,-4)/(4*2.0),0,random(4,1)/(4*2.0),180,32)
		TNT1 A 0 A_SpawnItemEx("NewExploMediumSmoke",0,0,0,random(4,-4)/(4*2.0),0,random(4,1)/(4*2.0),-20,32)
		TNT1 A 0 A_SpawnItemEx("NewExploMediumSmoke",0,0,0,random(4,-4)/(4*2.0),0,random(4,1)/(4*2.0),-40,32)
		TNT1 A 0 A_SpawnItemEx("NewExploMediumSmoke",0,0,0,random(4,-4)/(4*2.0),0,random(4,1)/(4*2.0),-60,32)
		TNT1 A 0 A_SpawnItemEx("NewExploMediumSmoke",0,0,0,random(4,-4)/(4*2.0),0,random(4,1)/(4*2.0),-80,32)
		TNT1 A 0 A_SpawnItemEx("NewExploMediumSmoke",0,0,0,random(4,-4)/(4*2.0),0,random(4,1)/(4*2.0),-100,32)
		TNT1 A 0 A_SpawnItemEx("NewExploMediumSmoke",0,0,0,random(4,-4)/(4*2.0),0,random(4,1)/(4*2.0),-120,32)
		TNT1 A 0 A_SpawnItemEx("NewExploMediumSmoke",0,0,0,random(4,-4)/(4*2.0),0,random(4,1)/(4*2.0),-140,32)
		TNT1 A 0 A_SpawnItemEx("NewExploMediumSmoke",0,0,0,random(4,-4)/(4*2.0),0,random(4,1)/(4*2.0),-160,32)
		GRNE A 0 A_PlaySound("reilsss/weapons/hefirebombexplosion")
		GRNE A 0 Bright A_Explode(64,128,1)
		TNT1 A 0 A_CustomMissile("ExpQuakeSmall",0,0,0)
		GRNE B 0 Bright A_SpawnItemEx("RPGFirebombExp3",0,0,10,10,0,0,0,32)
		Stop
	}
}

Actor RPGFirebombExp3 : RPGFirebombExp2
{
	Damage 8
	States
	{
	Death:
		GRNE A 0 A_SetTranslucent(0.99)
		TNT1 AAAAAAA 0 A_SpawnItemEx("ExplosionMediumSprite",0,0,0,random(3,-3)/(2*1.05),random(3,-3)/(2*1.05),random(4,1)/(2*1.05),0,32)
		TNT1 A 0 A_SpawnItemEx("NewExploMediumSmoke",0,0,0,random(4,-4)/(4*2.0),0,random(4,1)/(4*2.0),0,32)
		TNT1 A 0 A_SpawnItemEx("NewExploMediumSmoke",0,0,0,random(4,-4)/(4*2.0),0,random(4,1)/(4*2.0),20,32)
		TNT1 A 0 A_SpawnItemEx("NewExploMediumSmoke",0,0,0,random(4,-4)/(4*2.0),0,random(4,1)/(4*2.0),40,32)
		TNT1 A 0 A_SpawnItemEx("NewExploMediumSmoke",0,0,0,random(4,-4)/(4*2.0),0,random(4,1)/(4*2.0),60,32)
		TNT1 A 0 A_SpawnItemEx("NewExploMediumSmoke",0,0,0,random(4,-4)/(4*2.0),0,random(4,1)/(4*2.0),80,32)
		TNT1 A 0 A_SpawnItemEx("NewExploMediumSmoke",0,0,0,random(4,-4)/(4*2.0),0,random(4,1)/(4*2.0),100,32)
		TNT1 A 0 A_SpawnItemEx("NewExploMediumSmoke",0,0,0,random(4,-4)/(4*2.0),0,random(4,1)/(4*2.0),120,32)
		TNT1 A 0 A_SpawnItemEx("NewExploMediumSmoke",0,0,0,random(4,-4)/(4*2.0),0,random(4,1)/(4*2.0),140,32)
		TNT1 A 0 A_SpawnItemEx("NewExploMediumSmoke",0,0,0,random(4,-4)/(4*2.0),0,random(4,1)/(4*2.0),160,32)
		TNT1 A 0 A_SpawnItemEx("NewExploMediumSmoke",0,0,0,random(4,-4)/(4*2.0),0,random(4,1)/(4*2.0),180,32)
		TNT1 A 0 A_SpawnItemEx("NewExploMediumSmoke",0,0,0,random(4,-4)/(4*2.0),0,random(4,1)/(4*2.0),-20,32)
		TNT1 A 0 A_SpawnItemEx("NewExploMediumSmoke",0,0,0,random(4,-4)/(4*2.0),0,random(4,1)/(4*2.0),-40,32)
		TNT1 A 0 A_SpawnItemEx("NewExploMediumSmoke",0,0,0,random(4,-4)/(4*2.0),0,random(4,1)/(4*2.0),-60,32)
		TNT1 A 0 A_SpawnItemEx("NewExploMediumSmoke",0,0,0,random(4,-4)/(4*2.0),0,random(4,1)/(4*2.0),-80,32)
		TNT1 A 0 A_SpawnItemEx("NewExploMediumSmoke",0,0,0,random(4,-4)/(4*2.0),0,random(4,1)/(4*2.0),-100,32)
		TNT1 A 0 A_SpawnItemEx("NewExploMediumSmoke",0,0,0,random(4,-4)/(4*2.0),0,random(4,1)/(4*2.0),-120,32)
		TNT1 A 0 A_SpawnItemEx("NewExploMediumSmoke",0,0,0,random(4,-4)/(4*2.0),0,random(4,1)/(4*2.0),-140,32)
		TNT1 A 0 A_SpawnItemEx("NewExploMediumSmoke",0,0,0,random(4,-4)/(4*2.0),0,random(4,1)/(4*2.0),-160,32)
		GRNE A 0 A_PlaySound("reilsss/weapons/hefirebombexplosion")
		GRNE A 0 Bright A_Explode(32,64,1)
		Stop
	}
}

Actor HERocketLauncherDrop : CustomInventory
{
	Inventory.MaxAmount 1
	States
	{
	Use:
		TNT1 A 0
		TNT1 A 0 A_SpawnItemEx("DroppedHERocketLauncher",0,0,32,8,0,0,0,32,0)
		Stop
	}
}

Actor DroppedHERocketLauncher
{
	Radius 16
	Height 20
	Scale 1.2
	States
	{
	Spawn:
		W006 J 15
		TNT1 A 0 A_SpawnItemEx("AEoDHERocketLauncherNoAmmo",0,0,0,0,0,0,0,48,0)
		Stop
	}
}

Actor AEoDHERocketLauncherNoAmmo : AEoDHERocketLauncherItem
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL
	Scale 1.2
	Inventory.PickupMessage "You found a heavy rocket launcher. Be careful with this thing."
	Inventory.PickupSound "reilsss/weappickup/heavyrocketlauncher"
	States
	{
	Spawn:
		W006 J -1
		Loop
	Pickup:
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",9) <= 0,"Nothing")
		TNT1 A 0 A_JumpIfInventory("AERocket",4,"Ammo")
		TNT1 A 0 A_GiveInventory("Weapon9Count",1)
		TNT1 A 0 A_GiveInventory("HERocketLauncherDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDHERocketLauncher",1)
		TNT1 A 0 A_TakeInventory("AERocket",4)
		TNT1 A 0 	
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDHERocketLauncher",1,"Ammo")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		TNT1 A 0 ACS_NamedExecute("s798",0,9,0,0)
		Fail
	Ammo:
		TNT1 A 0 A_TakeInventory("AERocket",4)
		TNT1 A 0 A_JumpIfInventory("AEoDHERocketLauncher",1,2)
		TNT1 A 0 A_GiveInventory("Weapon9Count",1)
		TNT1 A 0 A_GiveInventory("HERocketLauncherDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDHERocketLauncher",1)
		Stop
	}
}

//==================================================================================
//==================================================================================

//==================================================================================
//==================================================================================

Actor AEoDPrototypeItem : CustomInventory 6084
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL
	Inventory.Amount 1
	Inventory.PickupMessage "You got the Prototype!"
	Inventory.PickupSound "reilsss/weappickup/prototyperifle"
	States
	{
	Spawn:
		FGUN A -1
		Loop
	Pickup:
		TNT1 A 0 A_JumpIfInventory("AEoDPrototype",1,"Ammo")
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",9) <= 0,"Nothing")
		TNT1 A 0 A_GiveInventory("Weapon9Count",1)
		TNT1 A 0 A_GiveInventory("PrototypeDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDPrototype",1)
		TNT1 A 0 	
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDPrototype",1,"Ammo")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		TNT1 A 0 ACS_NamedExecute("s798",0,9,0,0)
		Fail
	Ammo:
		TNT1 A 0 A_GiveInventory("AEoDProtoType",1)
		Stop
	}
}

Actor AEoDPrototype : Weapon // 6084
{
	+WEAPON.NOALERT
	+INVENTORY.IGNORESKILL
	+WEAPON.CHEATNOTWEAPON
	Weapon.Kickback 300
	Weapon.Ammotype "AECell"
	Weapon.Ammouse 5
	Weapon.Ammogive1 60
	Weapon.SelectionOrder 15551
	Obituary "%o has no chance to survive because of %k's prototype."
	Inventory.PickupMessage "You got the Prototype!"
	Inventory.PickupSound "reilsss/weappickup/prototyperifle"
	Weapon.upsound "weapons/bfg/draw"
	Tag "Prototype gun"
	States
	{
	Spawn:
		FGUN A -1
		Loop
	Ready:
		TNT1 A 0 A_StopSound(6)
		TNT1 A 0 A_PlaySound("reilsss/weapons/prototypeidle1", 6, 1.0, 1)
		BFGN A 0 A_JumpIfInventory("firemodechecker2",1,"Ready2")
		BFGN ABCDAB 5 A_WeaponReady
		BFGN CD 4 A_WeaponReady
		Goto Ready+2
	Ready2:
		TNT1 A 0 A_StopSound(6)
		TNT1 A 0 A_PlaySound("reilsss/weapons/prototypeidle1", 6, 1.0, 1)
		BFG2 A 0 A_JumpIfInventory("firemodechecker2",2,"Ready3")
		BFG2 ABCDAB 5 A_WeaponReady
		BFG2 CD 4 A_WeaponReady
		Goto Ready2+2
	Ready3:
		TNT1 A 0 A_StopSound(6)
		TNT1 A 0 A_PlaySound("reilsss/weapons/prototypeidle1", 6, 1.0, 1)
		BFG9 A 0 A_JumpIfInventory("firemodechecker2",3,"Ready4")
		BFG9 ABCDAB 5 A_WeaponReady
		BFG9 CD 4 A_WeaponReady
		Goto Ready3+2
	Ready4:
		TNT1 A 0 A_StopSound(6)
		TNT1 A 0 A_PlaySound("reilsss/weapons/prototypeidle1", 6, 1.0, 1)
		BFG4 A 0 A_JumpIfInventory("firemodechecker2",4,"Ready5")
		BFG4 ABCDAB 5 A_WeaponReady
		BFG4 CD 4 A_WeaponReady
		Goto Ready4+2
	Ready5:
		TNT1 A 0 A_StopSound(6)
		TNT1 A 0 A_PlaySound("reilsss/weapons/prototypeidle1", 6, 1.0, 1)
		BFG5 A 0 A_JumpIfInventory("firemodechecker2",5,"Ready6")
		BFG5 ABCDAB 5 A_WeaponReady
		BFG5 CD 4 A_WeaponReady
		Goto Ready5+2
	Ready6:
		TNT1 A 0 A_StopSound(6)
		TNT1 A 0 A_PlaySound("reilsss/weapons/prototypeidle1", 6, 1.0, 1)
		BFG8 A 0 A_JumpIfInventory("firemodechecker2",6,"Ready7")
		BFG8 ABCDAB 5 A_WeaponReady
		BFG8 CD 4 A_WeaponReady
		Goto Ready6+2
	Ready7:
		TNT1 A 0 A_StopSound(6)
		TNT1 A 0 A_PlaySound("reilsss/weapons/prototypeidle1", 6, 1.0, 1)
		BFG6 A 0 A_JumpIfInventory("firemodechecker2",7,"Ready8")
		BFG6 ABCDAB 5 A_WeaponReady
		BFG6 CD 4 A_WeaponReady
		Goto Ready7+2
	Ready8:
		TNT1 A 0 A_StopSound(6)
		TNT1 A 0 A_PlaySound("reilsss/weapons/prototypeidle1", 6, 1.0, 1)
		BFG7 ABCDAB 5 A_WeaponReady
		BFG7 CD 4 A_WeaponReady
		Goto Ready8+2
	Deselect:
		TNT1 A 0 A_StopSound(6)
		TNT1 A 0 	
		BFGN S 1 A_Lower
		TNT1 AA 0 A_Lower
		Goto Deselect+1
	Select:
		TNT1 A 0 	
		BFGN S 1 A_Raise
		TNT1 AA 0 A_Raise
		Loop
	Fire:
		BFGN E 0 A_JumpIfInventory("firemodechecker2",7,"Fire8")
		BFGN E 0 A_JumpIfInventory("firemodechecker2",6,"Fire7")
		BFGN E 0 A_JumpIfInventory("firemodechecker2",5,"Fire6")
		BFGN E 0 A_JumpIfInventory("firemodechecker2",4,"Fire5")
		BFGN E 0 A_JumpIfInventory("firemodechecker2",3,"Fire4")
		BFGN E 0 A_JumpIfInventory("firemodechecker2",2,"Fire3")
		BFGN E 0 A_JumpIfInventory("firemodechecker2",1,"Fire2")	
	Fire1:
		TNT1 A 0 A_CheckReload
		BFGN E 7 A_PlaySound("reilsss/weapons/prototypebfgfire", CHAN_WEAPON, 1.0, 0)
		BFGN FGHI 5
		BFGN J 6 
		TNT1 A 0 A_SetBlend("Green",0.3,8)
		TNT1 AAAAA 0 A_FireCustomMissile("PrototypeAmmoWaster",0,1,0,0)
		BFGN K 0 A_FireCustomMissile("BFG10KShot2",0,0,6,0)
		BFGN K 5 A_SetPitch(pitch-3)
		BFGN L 0 A_Firecustommissile("CheapAlert2",0,0,0,0)
		BFGN LLLLL 1 A_SetPitch(pitch+0.6)
		BFGN MN 3
		BFGN OPQR 3
		Goto Ready	
	Fire2:
		TNT1 A 0 A_JumpIfInventory("AECell",20,"Fire2Possible")
		BFG2 EFGHI 2			//this makes sure it doesnt fire a thing.
		BFG2 J 1 A_PlaySound("weapons/prototyperiflefire2", CHAN_WEAPON, 1.0, 0)
		TNT1 A 0 A_SetBlend("Red",0.3,8)
		TNT1 AA 0 A_FireCustomMissile("PrototypeAmmoWaster",0,1,0,0)
		BFG2 J 1 A_Firecustommissile("redplasmaball",random(-5,5),0,4+random(-10,10),random(-10,10))
		BFG2 KL 2 A_Firecustommissile("redplasmaball",random(-5,5),0,6+random(-10,10),random(-10,10))
		BFG2 MN 2
		BFG2 OPQR 2
		Goto "Ready2"	
	Fire2Possible:
		BFG2 EFGHI 2
		BFG2 J 1 A_PlaySound("weapons/prototyperiflefire2", CHAN_WEAPON, 1.0, 0)
		TNT1 A 0 A_SetBlend("Red",0.3,8)
		TNT1 AA 0 A_FireCustomMissile("PrototypeAmmoWaster",0,1,0,0)
		BFG2 J 1 A_Firecustommissile("redplasmaball",random(-5,5),0,4+random(-10,10),random(-10,10))
		BFG2 J 0 A_SetPitch(pitch+frandom(-0.2,0.2))
		BFG2 J 0 A_SetAngle(angle+frandom(-0.2,0.2))
		BFG2 KKKKKKKK 0 A_Firecustommissile("redplasmaball",random(-5,5),0,6+random(-10,10),random(-10,10))
		BFG2 KKKKK 1 A_Firecustommissile("redplasmaball",random(-5,5),0,6+random(-10,10),random(-10,10))
		BFG2 K 0 A_SetPitch(pitch+frandom(-0.2,0.2))
		BFG2 K 0 A_SetAngle(angle+frandom(-0.2,0.2))
		BFG2 LLL 1 A_Firecustommissile("redplasmaball",random(-5,5),0,6+random(-10,10),random(-10,10))
		BFG2 L 0 A_SetPitch(pitch+frandom(-0.2,0.2))
		BFG2 L 0 A_SetAngle(angle+frandom(-0.2,0.2))
		BFG2 M 1  A_Firecustommissile("redplasmaball",random(-5,5),0,6+random(-10,10),random(-10,10))
		BFG2 M 1 A_Firecustommissile("CheapAlert2",0,0,0,0)
		BFG2 N 2
		BFG2 OPQR 2
		Goto "Ready2"	
	Fire3:
		BFG9 EFGHI 2	
		BFG9 J 2 A_PlaySound("weapons/prototyperiflefire3", CHAN_WEAPON, 1.0, 0)
		TNT1 A 0 A_GunFlash
		TNT1 A 0 A_SetBlend("77 44 22",0.3,8)
		TNT1 AA 0 A_FireCustomMissile("PrototypeAmmoWaster",0,1,0,0)
		BFG9 K 0 A_RailAttack(450,4.5,0,"3E 01 4F", "17 01 1D",0,2,"ExtremePuff")
		BFG9 KK 1 A_SetPitch(pitch-1.5)
		BFG9 L 0 A_Firecustommissile("CheapAlert2",0,0,0,0)
		BFG9 LLMMNN 1 A_SetPitch(pitch+0.5)
		BFG9 OPQR 2
		Goto "Ready3"	
	Fire4:
		BFG4 EFGHIJ 2	
		TNT1 A 0 A_SetBlend("Blue",0.3,8)
		BFG4 J 0 A_PlaySound("weapons/prototyperiflefire4", CHAN_WEAPON, 1.0, 0)
		BFG4 K 0 A_FireCustomMissile("BlueFireBall",0,1,8,0)
		BFG4 KK 1 A_SetPitch(pitch-1.5)
		BFG4 L 0 A_Firecustommissile("CheapAlert2",0,0,0,0)
		BFG4 LLMMNN 1 A_SetPitch(pitch+0.5)
		BFG4 OPQR 2
		Goto "Ready4"	
	Fire5:
		BFG5 EFGHIJ 2	
		TNT1 A 0 A_SetBlend("Gray",0.3,8)
		BFG5 J 0 A_PlaySound("weapons/prototyperiflefire5", CHAN_WEAPON, 1.0, 0)
		TNT1 AA 0 A_FireCustomMissile("PrototypeAmmoWaster",0,1,0,0)
		BFG5 K 0 A_Firecustommissile("whiteripper",0,0,8,2,1)
		BFG5 KK 1 A_SetPitch(pitch-1.5)
		BFG5 L 0 A_Firecustommissile("CheapAlert2",0,0,0,0)
		BFG5 LLLLMM 1 A_SetPitch(pitch+0.5)
		BFG5 NOPQR 2
		Goto "Ready5"	
	Fire6:
		BFG8 EFGHIJ 2	
		TNT1 A 0 A_SetBlend("Orange",0.3,8)
		BFG8 J 0 A_PlaySound("weapons/prototyperiflefire6", CHAN_WEAPON, 1.0, 0)
		BFG8 K 0 A_FireBullets(2,2,1,60,"Explosion")
		BFG8 KK 1 A_SetPitch(pitch-1.5)
		BFG8 L 0 A_Firecustommissile("CheapAlert2",0,0,0,0)
		BFG8 LLLLMM 1 A_SetPitch(pitch+0.5)
		BFG8 NOPQR 2
		Goto "Ready6"	
	Fire7:
		BFG6 EFGHIJ 1	
		TNT1 A 0 A_SetBlend("PaleGreen",0.3,8)
		BFG6 J 0 A_PlaySound("weapons/prototyperiflefire7", CHAN_WEAPON, 1.0, 0)
		TNT1 A 0 A_JumpIfInventory("PowerEconomizer",1,3)
		TNT1 A 0 A_JumpIfInventory("InfiniteAmmo",1,2)
		TNT1 A 0 A_TakeInventory("AECell",1)
		BFG6 K 0 A_Firecustommissile("SPBall",0,0,6,2)
		BFG6 K 1 A_SetPitch(pitch-1.5)
		BFG6 L 0 A_Firecustommissile("CheapAlert2",0,0,0,0)
		BFG6 L 1 A_SetPitch(pitch+0.75)
		BFG6 M 0 A_PlaySound("weapons/prototyperiflefire7", CHAN_WEAPON, 1.0, 0)
		BFG6 M 1 A_SetPitch(pitch+0.75)
		TNT1 A 0 A_JumpIfInventory("PowerEconomizer",1,3)
		TNT1 A 0 A_JumpIfInventory("InfiniteAmmo",1,2)
		TNT1 A 0 A_TakeInventory("AECell",1)
		BFG6 K 0 A_Firecustommissile("SPBall",0,0,6,2)
		BFG6 K 1 A_SetPitch(pitch-1.5)
		BFG6 L 0 A_Firecustommissile("CheapAlert2",0,0,0,0)
		BFG6 L 1 A_SetPitch(pitch+0.75)
		BFG6 M 0 A_PlaySound("weapons/prototyperiflefire7", CHAN_WEAPON, 1.0, 0)
		BFG6 M 1 A_SetPitch(pitch+0.75)
		TNT1 A 0 A_JumpIfInventory("PowerEconomizer",1,3)
		TNT1 A 0 A_JumpIfInventory("InfiniteAmmo",1,2)
		TNT1 A 0 A_TakeInventory("AECell",1)
		BFG6 K 0 A_Firecustommissile("SPBall",0,0,6,2)
		BFG6 K 1 A_SetPitch(pitch-1.5)
		BFG6 L 0 A_Firecustommissile("CheapAlert2",0,0,0,0)
		BFG6 LM 1 A_SetPitch(pitch+0.75)
		BFG6 NOPQR 1
		Goto "Ready7"	
	Fire8:	
		BFG7 EFGHIJ 2	
		TNT1 A 0 A_SetBlend("Yellow",0.3,8)
		BFG8 J 0 A_PlaySound("weapons/rocketlaunch", CHAN_WEAPON, 1.0, 0)
		TNT1 AAA 0 A_FireCustomMissile("PrototypeAmmoWaster",0,1,0,0)
		BFG7 K 0 A_FireBullets(4,4,6,50,"YellowPuff",0)
		BFG7 L 0 A_Firecustommissile("CheapAlert2",0,0,0,0)
		BFG7 KK 1 A_SetPitch(pitch-0.75)
		BFG7 KLLLMM 1 A_SetPitch(pitch+0.25)
		BFG7 NOPQR 2
		Goto "Ready8"	
	Flash:
		TRAN A 2 Bright A_Light1
		TRAN A 0 Bright A_Light0
		Stop
	AltFire: 
		BFGN S 0 A_PlaySound("weapons/prototyperifleswitch", CHAN_WEAPON, 1.0, 0) 
		BFGN S 0 A_GiveInventory("firemodechecker2",1) 
		BFGN S 0 A_JumpIfInventory("firemodechecker2",0,2) 
		BFGN S 10 
		Goto Ready 
		BFGN S 10 A_TakeInventory("firemodechecker2",20) 
		Goto Ready
	}
}

Actor PrototypeAmmoWaster
{
	Projectile
	+NOINTERACTION
	States
	{
	Spawn:
		TNT1 A 0
		Stop
	}
}

Actor firemodechecker2 : Inventory
{
	Inventory.Amount 0
	Inventory.MaxAmount 8
}

Actor SPBall
{
	Projectile
	Speed 24
	Damage 9
	Radius 10
	Height 10
	SeeSound ""
	DeathSound ""
	RenderStyle Add
	DamageType "Plasma"
	Scale 0.5
	States
	{
	Spawn:
		CURS ABCDEF 1 Bright A_SpawnItemEx("SPBallTrail",0,0,0,0,0,0,0,32)
		Loop
	Death:
		TNT1 AAAAAA 0 A_SpawnItemEx("MutantElectLeak",0,0,0,random(2,-2),random(2,-2),random(1,3),random(0,359),0)
		CURS GHIJKL 3 Bright
		Stop
	}
}

Actor SPBallTrail
{
	Projectile
	+NOCLIP
	Speed 0
	Damage 0
	Radius 10
	Height 10
	RenderStyle Add
	Scale 0.3
	States
	{
	Spawn:
		TNT1 A 1
		CURS ABCDEF 1 Bright A_FadeOut
		Goto Spawn+2
	Death:
		TNT1 A 0
		Stop
	}
}

Actor BlueFireBall
{
	Projectile
	+SEEKERMISSILE
	Speed 30 
	Damage 20
	SeeSound ""
	DeathSound ""
	RenderStyle Add
	Radius 5
	Height 7
	ReactionTime 10
	DamageType "Plasma"
	Scale 0.7
	States
	{
	Spawn:
		ANFB A 2 Bright A_SeekerMissile(20,20)
		TNT1 A 0 A_CountDown
		TNT1 A 0 A_SpawnItem("BFBTrail",1)
		ANFB B 2 Bright A_SeekerMissile(20,20)
		TNT1 A 0 A_SpawnItem("BFBTrail",1)
		TNT1 A 0 A_SpawnItem("BFBTrail2",1)
		ANFB C 2 Bright A_SeekerMissile(20,20)
		TNT1 A 0 A_SpawnItem("BFBTrail",1)
		ANFB A 2 Bright A_SeekerMissile(20,20)
		TNT1 A 0 A_SpawnItem("BFBTrail",1)
		TNT1 A 0 A_SpawnItem("BFBTrail2",1)
		ANFB B 2 Bright A_SeekerMissile(20,20)
		TNT1 A 0 A_SpawnItem("BFBTrail",1)
		ANFB C 2 Bright A_SeekerMissile(20,20)
		TNT1 A 0 A_SpawnItem("BFBTrail2",1)
		TNT1 A 0 A_SpawnItem("BFBTrail",1)
		Loop
	Death:
		TNT1 A 0 A_Explode(128,64,0)
		TNT1 AAAAAAAAAAAAA 0 A_SpawnItemEx("CrystalSmoke22",0,0,0,random(3,-3)/(2*1.05),random(3,-3)/(2*1.05),random(3,-3)/(2*1.05),random(1,359),32)
		ANFB DEFG 4 Bright
		Stop
	}
}

Actor BFBTrail
{
	Projectile
	+NOCLIP
	Speed 0
	Damage 0
	RenderStyle Add
	Translation "168:191=192:207"
	Alpha 0.7
	Scale 0.7
	States
	{
	Spawn:
		TNT1 A 2
		TRNG DCBA 2 Bright
		TRNG A 2 Bright A_FadeOut
		Wait
	}
}

Actor BFBTrail2
{
	Projectile
	+NOCLIP
	Speed 0
	Damage 0
	RenderStyle Add
	Alpha 0.4
	Scale 0.7
	States
	{
	Spawn:
		TNT1 A 2
		PLS3 AB 1 Bright
		PLSS CDEFGHIJKLMNOPQRSTUVWXYZ 1 Bright
		PLSZ AB 1
		PLSZ C 1 A_FadeOut
		Wait
	}
}

Actor Explosion
{
	+NOCLIP
	+NOGRAVITY
	+PUFFONACTORS
	Seesound "weapons/explosion"
	RenderStyle Translucent
	Alpha 0.8
	Scale 0.85
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_SpawnItemEx("PBExplosionSpawnerHalf",0,0,0,0,0,0,0,32)
		BFE1 G 1 Bright A_Explode(160,128)
		BFE1 HIJKLMNOPQRSTUVW 1 Bright
		Stop
	}
}

Actor whiteripper
{
	PROJECTILE
	+RIPPER	RipperLevel 1
	+SEEKERMISSILE
	Radius 4
	Height 6
	Speed 15
	Damage 3
	Scale 0.4
	Deathsound "weapons/bluelaserexplode"
	RenderStyle Add
	DamageType "Plasma"
	Alpha 0.60
	States
	{
	Spawn:
		TNT1 A 0 
		TNT1 A 0 A_JumpIfInventory("DurationCheck",80,"Fading")
		TNT1 A 0 A_GiveInventory("DurationCheck",1)
		TNT1 AAA 0 A_SpawnItemEx("WhiteRipperTrail1",random(4,-4),random(4,-4),random(4,-4),0,0,0,0,32)
		TNT1 A 0 A_SpawnItemEx("WhiteRipperTrail2",0,0,-1,0,0,0,0,32)
		RPPR P 1 Bright A_SeekerMissile(10,30,SMF_LOOK)
		Loop
	Fading:
		TNT1 AAA 0 A_SpawnItemEx("WhiteRipperTrail1",random(4,-4),random(4,-4),random(4,-4),0,0,0,0,32)
		TNT1 A 0 A_SpawnItemEx("WhiteRipperTrail2",0,0,-1,0,0,0,0,32)
		RPPR P 1 A_FadeOut(0.06)
		Loop
	}
}

Actor DurationCheck : Inventory { Inventory.MaxAmount 80 }

Actor WhiteRipperTrail1
{
	+NOINTERACTION
	RenderStyle Add
	Scale 0.22
	States
	{
	Spawn:
		LBA2 HIJK 3 Bright A_FadeOut
		Wait
	}
}
Actor WhiteRipperTrail2 : WhiteRipperTrail1
{
	Scale 0.35
	+RANDOMIZE
	States
	{
	Spawn:
		VOR2 FGH 2 Bright A_FadeOut(0.027)
		Loop
	}
}

Actor YellowPuff
{
	+NOCLIP
	+NOGRAVITY
	+PUFFONACTORS
	Painsound "weapons/bluelaserexplode"
	RenderStyle Translucent
	Alpha 0.8
	Scale 0.5
	DamageType "Fire"
	States
	{
	Spawn:
		TNT1 AA 0 A_SpawnItemEx("NewExplosionSmall",0,0,0,0,0,0,0,32)
		CFCF Q 3 Bright A_Pain
		CFCF RSTUVWXYZ 2 Bright
		Stop
	}
}

Actor CheapAlert2
{
	PROJECTILE
	+NOCLIP
	Health 1000
	Radius 1
	Height 1
	Speed  0
	Damage 0
	Mass   1   
	States
	{
	Spawn:
		TNT1 A 0 
		TNT1 A 1 A_AlertMonsters
		Stop
	}
}

Actor redplasmaball
{
	PROJECTILE
	Radius 8
	Height 6
	Speed 50
	Damage 12
	Deathsound "weapons/plasmax"
	RenderStyle Add
	DamageType "Plasma"
	Scale 0.2
	States
	{
	Spawn:
		MSP1 ABCDEF 2 Bright
		Goto Spawn
	Death:
		TNT1 AAAAAAAAA 0 A_SpawnItemEx("RedPlasmaballExtra",0,0,1,random(8,-8)/(8*1.9),random(8,-8)/(8*1.9),random(8,-8)/(8*1.9),random(1,359),32)
		MSP1 GHIJKLM 3 Bright
		MSP1 NNNOOO 1 Bright A_FadeOut
		MSP1 P 1 Bright A_FadeOut
		Stop
	}
}


Actor RedPlasmaballExtra
{
	+NOINTERACTION
	Scale 0.16
	RenderStyle Add
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_Jump(200,3,4,6,8)
		BRNR CCCCDDDDEEEEFFFFGGGHHHH 1 Bright A_FadeOut(0.02)
		Wait
	}
}

Actor killerblast
{
	PROJECTILE
	Radius 6
	Height 8
	Speed 18
	Damage 150
	DeathSound "weapons/superexplosion"
	RenderStyle Add
	Alpha 0.7
	States
	{
	Spawn:
		M031 FFFFGGGG 1 Bright A_SpawnItem("killerblast2",1,0,0)
		Loop
	Death:
		M031 A 0 Bright A_Explode
		M031 AB 6 Bright A_Explode
		M031 CDE 6 Bright
		Stop
	}
}

Actor killerblast2
{  
	MONSTER
	+FRIENDLY
	+NOGRAVITY
	+NOCLIP
	Radius 1
	Height 1
	Speed 0
	States
	{
	Spawn:
		TNT1 A 0 A_Look
	See:
		TNT1 A 0 A_Chase
	Missile:
		TNT1 A 0 A_FaceTarget
		TNT1 A 0 A_CustomMissile("deathbeam",6,0,0)
		Stop
	}
}

Actor deathbeam
{
	PROJECTILE
	Radius 3
	Height 4
	Speed 40
	Damage 2
	RenderStyle Add
	Alpha 0.7
	Scale 0.15
	States
	{
	Spawn:
		M031 FG 2 Bright
		Loop
	Death:
		M031 F 2 Bright A_FadeOut
		Wait
	}
}

Actor BFG10KShot2
{
	PROJECTILE
	+RIPPER	RipperLevel 1
	Radius 6
	Height 10
	Speed 10
	Damage 4
	DeathSound "q2weapon/bfgballexplo"
	RenderStyle Add
	DamageType "Plasma"
	Alpha 0.8
	Scale 0.5
	States
	{
	Spawn:
		BFS1 AAAAA 1 Bright A_SpawnItemEx("BFG10KTrailA2",random(10,-10),random(10,-10),random(10,-10),0,0,0,0,32)
		BFS1 BBBBB 1 Bright A_SpawnItemEx("BFG10KTrailB2",random(10,-10),random(10,-10),random(10,-10),0,0,0,0,32)
		TNT1 A 0 A_SpawnItemEx("BFGTurn22",0,0,0,0,0,0,0,32|SXF_TRANSFERPOINTERS)
		BFS1 A 1 Bright A_SpawnItemEx("BFG10KTrailA2",random(10,-10),random(10,-10),random(10,-10),0,0,0,0,32)
		TNT1 A 0 A_SpawnItemEx("BFGTurn22",0,0,0,0,0,0,0,32|SXF_TRANSFERPOINTERS)
		BFS1 A 1 Bright A_SpawnItemEx("BFG10KTrailA2",random(10,-10),random(10,-10),random(10,-10),0,0,0,0,32)
		TNT1 A 0 A_SpawnItemEx("BFGTurn22",0,0,0,0,0,0,0,32|SXF_TRANSFERPOINTERS)
		BFS1 A 1 Bright A_SpawnItemEx("BFG10KTrailA2",random(10,-10),random(10,-10),random(10,-10),0,0,0,0,32)
		TNT1 A 0 A_SpawnItemEx("BFGTurn22",0,0,0,0,0,0,0,32|SXF_TRANSFERPOINTERS)
		BFS1 A 1 Bright A_SpawnItemEx("BFG10KTrailA2",random(10,-10),random(10,-10),random(10,-10),0,0,0,0,32)
		TNT1 A 0 A_SpawnItemEx("BFGTurn22",0,0,0,0,0,0,0,32|SXF_TRANSFERPOINTERS)
		BFS1 A 1 Bright A_SpawnItemEx("BFG10KTrailA2",random(10,-10),random(10,-10),random(10,-10),0,0,0,0,32)
		TNT1 A 0 A_SpawnItemEx("BFGTurn22",0,0,0,0,0,0,0,32|SXF_TRANSFERPOINTERS)
		BFS1 B 1 Bright A_SpawnItemEx("BFG10KTrailB2",random(10,-10),random(10,-10),random(10,-10),0,0,0,0,32)
		TNT1 A 0 A_SpawnItemEx("BFGTurn22",0,0,0,0,0,0,0,32|SXF_TRANSFERPOINTERS)
		BFS1 B 1 Bright A_SpawnItemEx("BFG10KTrailB2",random(10,-10),random(10,-10),random(10,-10),0,0,0,0,32)
		TNT1 A 0 A_SpawnItemEx("BFGTurn22",0,0,0,0,0,0,0,32|SXF_TRANSFERPOINTERS)
		BFS1 B 1 Bright A_SpawnItemEx("BFG10KTrailB2",random(10,-10),random(10,-10),random(10,-10),0,0,0,0,32)
		TNT1 A 0 A_SpawnItemEx("BFGTurn22",0,0,0,0,0,0,0,32|SXF_TRANSFERPOINTERS)
		BFS1 B 1 Bright A_SpawnItemEx("BFG10KTrailB2",random(10,-10),random(10,-10),random(10,-10),0,0,0,0,32)
		TNT1 A 0 A_SpawnItemEx("BFGTurn22",0,0,0,0,0,0,0,32|SXF_TRANSFERPOINTERS)
		BFS1 B 1 Bright A_SpawnItemEx("BFG10KTrailB2",random(10,-10),random(10,-10),random(10,-10),0,0,0,0,32)
		Goto Spawn+8
	Death:
		TNT1 AAAAAAAAAAAAAAAAAAAAAAAAA 0 A_SpawnItemEx("BFG10Extra2",0,0,10,random(-4,4),random(-4,4),random(-4,4),random(1,360))
		BFE1 A 4 Bright A_Explode(128,128,0)
		BFE1 BCDEF 4 Bright
		Stop
	}
}

Actor BFG10KTrailA2 : PlasmaBall
{ 
	+NOINTERACTION
	Alpha 0.8
	Scale 0.2
	States
	{
	Spawn:
		BFS1 A 1 Bright A_FadeOut(0.04)
		Wait
	}
}

Actor BFG10KTrailB2 : PlasmaBall
{ 
	+NOINTERACTION
	Alpha 0.8
	Scale 0.2
	States
	{
	Spawn:
		BFS1 B 1 Bright A_FadeOut(0.04)
		Wait
	}
}

Actor BFGTurn22
{
	var int user_railflags;
	Projectile
	+SEEKERMISSILE
	+THRUACTORS
	Radius 1
	Height 1
	Speed 0
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_SeekerMissile(90,90,1,256)
		TNT1 A 0 A_JumpIf(!(IsPointerEqual(AAPTR_TRACER,AAPTR_NULL)),"Railer")
		Stop
	Railer:
		TNT1 A 0 A_FaceTracer(0,0,0,0,FAF_MIDDLE)
	R1: //Just make sure it's not shooting the player first.
		TNT1 A 0 A_CheckLOF(1,CLOFF_SETTRACER|CLOFF_NOAIM|CLOFF_JUMPENEMY|CLOFF_JUMPFRIEND|CLOFF_SKIPOBJECT|CLOFF_JUMPNONHOSTILE,0,0,0,0,0,0,AAPTR_TRACER)
		TNT1 A 0 A_JumpIf(!(IsPointerEqual(AAPTR_TRACER,AAPTR_TARGET)),1)
		Stop
		TNT1 A 0 A_CheckLOF(1,CLOFF_SKIPOBSTACLES|CLOFF_JUMPFRIEND|CLOFF_NOAIM,0,0,0,0,0,0,AAPTR_TARGET)
		Goto Railing //If the player's behind the tracer, don't pierce so we don't hurt him.
		TNT1 A 0 A_SetUserVar(user_railflags,RGF_NOPIERCING)
	Railing:
		TNT1 A 1 A_CustomRailgun(10,0,none,"Green",(1+user_railflags),0,0,"BFGPuff", 0,0,0, 5,1.5,1.0)
		Stop
	ShooterInWay:
		TNT1 A 0
		Stop
	}
}

Actor BFGPuff
{
	DamageType "Plasma"
	RenderStyle None
	+NOINTERACTION
	+EXTREMEDEATH
	States
	{
	Spawn:
		TNT1 A 2
		Stop
	}
}

Actor PrototypeDrop : CustomInventory
{
	Inventory.MaxAmount 1
	States
	{
	Use:
		TNT1 A 0
		TNT1 A 0 A_StopSound(6)
		TNT1 A 0 A_SpawnItemEx("DroppedPrototype",0,0,32,8,0,0,0,32,0)
		Stop
	}
}

Actor DroppedPrototype
{
	Radius 16
	Height 20
	States
	{
	Spawn:
		FGUN A 15
		TNT1 A 0 A_SpawnItemEx("AEoDPrototypeNoAmmo",0,0,0,0,0,0,0,48,0)
		Stop
	}
}

Actor AEoDPrototypeNoAmmo : AEoDPrototypeItem
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL
	Inventory.Amount 1
	Inventory.PickupMessage "You got the Prototype!"
	Inventory.PickupSound "reilsss/weappickup/prototyperifle"
	States
	{
	Spawn:
		FGUN A -1
		Loop
	Pickup:
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",9) <= 0,"Nothing")
		TNT1 A 0 A_JumpIfInventory("AECell",60,"Ammo")
		TNT1 A 0 A_GiveInventory("Weapon9Count",1)
		TNT1 A 0 A_GiveInventory("PrototypeDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDPrototype",1)
		TNT1 A 0 A_TakeInventory("AECell",60)
		TNT1 A 0 	
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDPrototype",1,"Ammo")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		TNT1 A 0 ACS_NamedExecute("s798",0,9,0,0)
		Fail
	Ammo:
		TNT1 A 0 A_TakeInventory("AECell",60)
		TNT1 A 0 A_JumpIfInventory("AEoDPrototype",1,2)
		TNT1 A 0 A_GiveInventory("Weapon9Count",1)
		TNT1 A 0 A_GiveInventory("PrototypeDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDPrototype",1)
		Stop
	}
}

//==================================================================================
//==================================================================================

//==================================================================================
//==================================================================================

Actor AEoDRailGunPrototypeItem : CustomInventory 6051
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL
	Scale 0.4
	Inventory.Amount 1
	Inventory.PickupMessage "You found the Railgun MK2 Prototype! WARNING: Unstable!"
	Inventory.PickupSound "reilsss/weappickup/railgun"
	States
	{
	Spawn:
		NEUP A -1
		Loop
	Pickup:
		TNT1 A 0 A_JumpIfInventory("AEoDRailGunPrototype",1,"Ammo")
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",9) <= 0,"Nothing")
		TNT1 A 0 A_GiveInventory("Weapon9Count",1)
		TNT1 A 0 A_GiveInventory("RailGunPrototypeDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDRailGunPrototype",1)
		TNT1 A 0 	
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDRailGunPrototype",1,"Ammo")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		TNT1 A 0 ACS_NamedExecute("s798",0,9,0,0)
		Fail
	Ammo:
		TNT1 A 0 A_GiveInventory("AEoDRailGunPrototype",1)
		Stop
	}
}

Actor AEoDRailGunPrototype : Weapon // 6051
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL
	+WEAPON.CHEATNOTWEAPON
	Weapon.AmmoType1 AEClip
	Weapon.AmmoType2 AEClip
	Weapon.AmmoGive1 50
	Weapon.AmmoUse1 6
	Weapon.AmmoUse2 15
	Weapon.SelectionOrder 11985
	Obituary "%o was ripped apart by %k's Railgun MK2 Prototype."
	Inventory.PickupMessage "You found the Railgun MK2 Prototype! WARNING: Unstable!"
	Inventory.PickupSound "reilsss/weappickup/railgun"
	AttackSound "reilsss/weapons/railgunprotoypefire"
	Weapon.upsound "weapons/plasma/draw"
	Tag "Railgun prototype"
		Scale 0.4
	States
	{
	Spawn:
		NEUP A 3
		Loop
	Select:
		TNT1 A 0 	
		NEUC A 1 A_Raise
		TNT1 AA 0 A_Raise
		Loop
	Deselect:
		TNT1 A 0 A_StopSound(6)
		TNT1 A 0 	
		NEUC A 1 A_Lower
		TNT1 AA 0 A_Lower
		Goto Deselect+1
	Ready:
		TNT1 A 0 A_PlaySound("reilsss/weapons/railgunidle2", 6, 1.0, 1)
		NEUC AAAAABBBBBCCCCC 1 A_WeaponReady
		Goto Ready+1	
	Fire:
		TNT1 A 0 A_PlaySound("reilsss/weapons/railgunprotoypefire", CHAN_WEAPON, 1.0, 0)
		TNT1 A 0 A_SetBlend("red",0.1,6)
		TNT1 A 0 A_GunFlash
		NEUC D 0 A_RailAttack(random(450,700),4,1,"FF 33 00", "FF 66 00",0,2,"BulletDamagePuff", 0,0,0, 35,1.0,1.95)
		NEUC DD 1 A_SetPitch(pitch-1.5)
		TNT1 A 0 A_PlaySound("reilsss/weapons/railgunreload", CHAN_AUTO, 1.0, 0)
		NEUF EEEFFF 1 A_SetPitch(pitch+0.5)
		NEUF GH 2
		NEUC CABC 3 
		TNT1 A 0 A_ReFire
		Goto Ready
	AltFire:
		NEUI A 0 A_ReFire("AltFire1")
	AltHold:
	AltFire1:
		NEUI A 10 A_PlaySound("rgp/c1", 7, 1.0, 0)
		NEUI ABCD 6 Bright 
		NEUI A 0 A_ReFire("AltFire2")
		TNT1 A 0 A_SetBlend("red",0.4,8)
		TNT1 A 0 A_GunFlash
		NEUF A 0 Bright A_RailAttack(random(500,800),4,1,"FF 33 00", "FF FF FF",0,2,"Sniperextremepuff", 0,0,0, 35,1.0,1.75)
		NEUF AA 1 A_SetPitch(pitch-0.5)
		NEUF AA 1 A_SetPitch(pitch+0.1)
		NEUF B 0 Bright A_PlaySound("reilsss/weapons/railgunreload", 7, 1.0, 0)
		NEUF BBBBCCCC 1 Bright A_SetPitch(pitch+0.1)
		Goto FinishAltFire
	AltFire2:
		NEUI EF 6 Bright 
		NEUI A 0 A_Refire("AltFire3")
		TNT1 A 0 A_SetBlend("red",0.5,12)
		TNT1 A 0 A_FireCustomMissile("Waste",0,1)
		TNT1 A 0 A_GunFlash
		NEUF A 0 Bright A_RailAttack(random(600,950),4,1,"FF 33 00", "FF BB BB",0,2,"Sniperextremepuff", 0,0,0, 35,1.0,1.5)
		NEUF AA 1 A_SetPitch(pitch-1)
		NEUF AA 1 A_SetPitch(pitch+0.2)
		NEUF B 0 Bright A_PlaySound("reilsss/weapons/railgunreload", 7, 1.0, 0)
		NEUF BBBBCCCC 1 Bright A_SetPitch(pitch+0.2)
		Goto FinishAltFire
	AltFire3:
		NEUI GH 4 Bright 
		NEUI A 0 A_Refire("AltFire4")
		TNT1 A 0 A_SetBlend("red",0.6,18)
		TNT1 AA 0 A_FireCustomMissile("Waste",0,1)
		TNT1 A 0 A_GunFlash
		NEUF A 0 Bright A_RailAttack(random(800,1200),4,1,"FF 44 00", "FF 88 88",0,2,"Sniperextremepuff", 0,0,0, 35,1.0,1.2)
		NEUF AAAA 1 A_SetPitch(pitch-1)
		NEUF B 0 Bright A_PlaySound("reilsss/weapons/railgunreload", 7, 1.0, 0)
		NEUF BBBBCCCC 1 Bright A_SetPitch(pitch+0.5)
		Goto FinishAltFire
	AltFire4:
		NEUI GHI 4 Bright 
		TNT1 A 0 A_Refire("AltFireHolding")
		TNT1 A 0 A_SetBlend("red",0.6,22)
		TNT1 AA 0 A_FireCustomMissile("Waste",0,1)
		TNT1 A 0 A_GunFlash
		NEUF A 0 Bright A_RailAttack(random(1200,1650),4,1,"FF 44 00", "FF 44 44",0,2,"Sniperextremepuff", 0,0,0, 35,1.0,1.0)
		NEUF AAAA 1 A_SetPitch(pitch-2)
		NEUF B 0 Bright A_PlaySound("reilsss/weapons/railgunreload", 7, 1.0, 0)
		NEUF BBBBCCCC 1 Bright A_SetPitch(pitch+1)
		Goto FinishAltFire
	AltFireHolding:
		TNT1 A 0 A_PlaySound("rgp/no", CHAN_AUTO, 1.0, 0)
		NEUI JKJKJK 4 Bright 
		TNT1 A 0 A_Refire("Danger")
		TNT1 A 0 A_SetBlend("red",0.6,22)
		TNT1 AAA 0 A_FireCustomMissile("Waste",0,1)
		TNT1 A 0 A_GunFlash
		NEUF A 0 Bright A_RailAttack(random(1500,3500),4,1,"FF 55 00", "FF 44 22",0,2,"Sniperextremepuff", 0,0,0, 35,1.0,0.5)
		NEUF AAAA 1 A_SetPitch(pitch-3)
		NEUF B 0 Bright A_PlaySound("reilsss/weapons/railgunreload", 7, 1.0, 0)
		NEUF BBBBCCCC 1 Bright A_SetPitch(pitch+1.5)
		Goto FinishAltFire
	Danger:
		TNT1 A 0 A_PlaySound("rgp/no",CHAN_VOICE,1.0,0)
		TNT1 A 0 A_PlaySound("rgp/h",CHAN_AUTO,1.0,0)
		NEUI LMLMLM 4 Bright 
		TNT1 A 0 A_Refire("ExplosiveShot")
		TNT1 A 0 A_SetBlend("red",0.6,22)
		TNT1 AAA 0 A_FireCustomMissile("Waste",0,1)
		TNT1 A 0 A_GunFlash
		NEUF A 0 Bright A_RailAttack(random(4200,7800),4,1,"FF 66 00", "FF 10 10",0,2,"Sniperextremepuff", 0,0,0, 78,1.0,0.5)
		NEUF AAAA 1 A_SetPitch(pitch-4)
		NEUF B 0 Bright A_PlaySound("reilsss/weapons/railgunreload", 7, 1.0, 0)
		NEUF BBBBCCCC 1 Bright A_SetPitch(pitch+2)
		Goto FinishAltFire
		//Explosion Shot
		//Whatever you do, don't use this near a cliff. You'll go flying sky high.
	ExplosiveShot:
		TNT1 A 0 A_SetBlend("red",0.6,22)
		TNT1 A 0 A_PlaySound("shredderstaff/altfire",CHAN_WEAPON,1,0)
		TNT1 A 0 A_GunFlash
		NEUF A 0 Bright A_RailAttack(random(8500,25000),4,1,"FF 66 00", "FF 00 00",RGF_SILENT,2,"Sniperextremepuff", 0,0,0, 85,1.0,0.5)
		TNT1 AAAAAAAA 0 A_FireCustomMissile("Waste",0,1)
		NEUF A 0 A_JumpIfInventory("PowerInvulBase",1,2)
		NEUF A 0 Bright DamageThing(random(40,100)) //Explodes and takes a portion of your health
		NEUF A 0 A_Recoil((cos(pitch)*40)) //And just because we can... =P - M.C.
		NEUF A 0 A_JumpIf(pitch>=180,2) //RAILGUN JUMPING WOO!!!
		NEUF A 0 A_ChangeVelocity(0,0,(sin(pitch)*40),1)
		NEUF AA 1 A_SetPitch(pitch-15)
		NEUF AACCCC 1 Bright A_SetPitch(pitch+5)
		Goto FinishAltFire
	FinishAltFire:
		NEUF DE 4 Bright
		NEUF F 5
		NEUF GHIJKL 6
		Goto Ready
	Flash:
		TNT1 A 3
		Stop
	}
}	

Actor NewRailGunPCheck : Inventory { Inventory.MaxAmount 10 }

Actor RedBlasterBall : PlasmaBall
{
	PROJECTILE
	Radius 3
	Height 3
	Speed 20
	Damage 3
	SeeSound "q2weapon/hyperblastershot"
	DeathSound "q2weapon/laserhit"
	Translation "192:207=175:185"
	Scale 0.27
	DamageType "Plasma"
}

Actor RedBlasterBall2 : BFGBall
{
	PROJECTILE
	Radius 10
	Height 10
	Speed 30
	Damage 25
	SeeSound "q2weapon/bfgball"
	DeathSound "q2weapon/bfgballexplo"
	Translation "112:127=175:185"
	Scale 0.3
	DamageType "Plasma"
	States
	{
	Death:
		BFE1 A 3 Bright
		BFE1 B 0 Bright A_CustomMissile("RedBlasterBall3",0,0,10)
		BFE1 B 0 Bright A_CustomMissile("RedBlasterBall3",0,0,20)
		BFE1 B 0 Bright A_CustomMissile("RedBlasterBall3",0,0,40)
		BFE1 B 0 Bright A_CustomMissile("RedBlasterBall3",0,0,60)
		BFE1 B 0 Bright A_CustomMissile("RedBlasterBall3",0,0,80)
		BFE1 B 0 Bright A_CustomMissile("RedBlasterBall3",0,0,100)
		BFE1 B 0 Bright A_CustomMissile("RedBlasterBall3",0,0,120)
		BFE1 B 0 Bright A_CustomMissile("RedBlasterBall3",0,0,140)
		BFE1 B 0 Bright A_CustomMissile("RedBlasterBall3",0,0,160)
		BFE1 B 0 Bright A_CustomMissile("RedBlasterBall3",0,0,180)
		BFE1 B 0 Bright A_CustomMissile("RedBlasterBall3",0,0,200)
		BFE1 B 0 Bright A_CustomMissile("RedBlasterBall3",0,0,220)
		BFE1 B 0 Bright A_CustomMissile("RedBlasterBall3",0,0,240)
		BFE1 B 0 Bright A_CustomMissile("RedBlasterBall3",0,0,260)
		BFE1 B 0 Bright A_CustomMissile("RedBlasterBall3",0,0,280)
		BFE1 B 0 Bright A_CustomMissile("RedBlasterBall3",0,0,300)
		BFE1 B 0 Bright A_CustomMissile("RedBlasterBall3",0,0,320)
		BFE1 B 0 Bright A_CustomMissile("RedBlasterBall3",0,0,340)
		BFE1 B 0 Bright A_CustomMissile("RedBlasterBall3",0,0,350)
		BFE1 BCDEF 3 Bright
		Stop
	}
}

Actor RedBlasterBall3 : RedBlasterBall 
{
	+RIPPER	RipperLevel 1
	+StrifeDamage
	Damage 3
	SeeSound "q2weapon/lasershot"
	Scale 0.24
}

Actor RailGunPrototypeDrop : CustomInventory
{
	Inventory.MaxAmount 1
	States
	{
	Use:
		TNT1 A 0
		TNT1 A 0 A_StopSound(6)
		TNT1 A 0 A_SpawnItemEx("DroppedRailGunPrototype",0,0,32,8,0,0,0,32,0)
		Stop
	}
}

Actor DroppedRailGunPrototype
{
	Radius 16
	Height 20
	Scale 0.4
	States
	{
	Spawn:
		NEUP A 15
		TNT1 A 0 A_SpawnItemEx("AEoDRailGunPrototypeNoAmmo",0,0,0,0,0,0,0,48,0)
		Stop
	}
}

Actor AEoDRailGunPrototypeNoAmmo : AEoDRailGunPrototypeItem
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL
	Scale 0.4 
	Inventory.Amount 1
	Inventory.PickupMessage "You found the Railgun MK2 Prototype! WARNING: Unstable!"
	Inventory.PickupSound "reilsss/weappickup/railgun"
	States
	{
	Spawn:
		NEUP A -1
		Loop
	Pickup:
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",9) <= 0,"Nothing")
		TNT1 A 0 A_JumpIfInventory("AEClip",50,"Ammo")
		TNT1 A 0 A_GiveInventory("Weapon9Count",1)
		TNT1 A 0 A_GiveInventory("RailGunPrototypeDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDRailGunPrototype",1)
		TNT1 A 0 A_TakeInventory("AEClip",50)
		TNT1 A 0 	
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDRailGunPrototype",1,"Ammo")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		TNT1 A 0 ACS_NamedExecute("s798",0,9,0,0)
		Fail
	Ammo:
		TNT1 A 0 A_TakeInventory("AEClip",50)
		TNT1 A 0 A_JumpIfInventory("AEoDRailGunPrototype",1,2)
		TNT1 A 0 A_GiveInventory("Weapon9Count",1)
		TNT1 A 0 A_GiveInventory("RailGunPrototypeDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDRailGunPrototype",1)
		Stop
	}
}

//==================================================================================
//==================================================================================

//==================================================================================
//==================================================================================

Actor AEoDSoulleechItem : CustomInventory 6079
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL
	+FLOATBOB
	Scale 0.7
	Inventory.Amount 1
	Inventory.PickupMessage "You got the Souleech!"
	Inventory.PickupSound "weaponbuild"
	States
	{
	Spawn:
		WLEC AB 4 Bright
		Loop
	Pickup:
		TNT1 A 0 A_JumpIfInventory("AEoDSoulleech",1,"Ammo")
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",9) <= 0,"Nothing")
		TNT1 A 0 A_GiveInventory("Weapon9Count",1)
		TNT1 A 0 A_GiveInventory("SoulleechDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDSoulleech",1)
		TNT1 A 0 	
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDSoulleech",1,"Ammo")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		TNT1 A 0 ACS_NamedExecute("s798",0,9,0,0)
		Fail
	Ammo:
		TNT1 A 0 A_GiveInventory("AEoDSoulleech",1)
		Stop
	}
}

Actor AEoDSoulleech : Weapon // 6079
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL
	+WEAPON.CHEATNOTWEAPON
	+FOILINVUL
	+FLOATBOB
	+WEAPON.AXEBLOOD
	Weapon.AmmoType1 "BlueMana"
	Weapon.AmmoType2 "RedMana"
	Weapon.AmmoGive1 40
	Weapon.AmmoGive2 20
	Weapon.AmmoUse1 3
	Weapon.AmmoUse2 20
	Weapon.SelectionOrder 9933
	Obituary "%k drained all of %o's life."
	Inventory.PickupMessage "You got the Souleech!"
	Inventory.PickupSound "weaponbuild"
	AttackSound "weapons/gnthit"
	Weapon.upsound "weapons/draw"
	Scale 0.7
	Tag "Soul leech"
	States
	{
	Spawn:
		WLEC AB 4 Bright
		Loop
	Ready:
		LEEG A 5 A_WeaponReady
		Loop
	Deselect:
		TNT1 A 0 	
		TNT1 A 0 A_TakeInventory("AxeBlood2Check",1)
		LEEG A 1 A_Lower
		TNT1 AA 0 A_Lower
		Loop
	Select:
		TNT1 A 0 	
		TNT1 A 0 A_GiveInventory("AxeBlood2Check",1)
		LEEG A 1 A_Raise
		TNT1 AA 0 A_Raise
		Loop
	Fire:
		LEEG G 2 Bright
		LEEG I 0 Bright A_FireBullets(4,3,1,18,"LeechPuff1")
		LEEG I 0 A_SetPitch(pitch+frandom(-0.4,0.4))
		LEEG I 0 A_SetAngle(angle+frandom(-0.4,0.4))
		LEEG IG 2 Bright
		LEEG I 0 Bright A_FireBullets(4,3,1,18,"LeechPuff1")
		LEEG I 0 A_SetPitch(pitch+frandom(-0.4,0.4))
		LEEG G 0 A_SetAngle(angle+frandom(-0.4,0.4))
		LEEG IG 2 Bright
		LEEG I 0 Bright A_FireBullets(4,3,1,18,"LeechPuff1",0)
		LEEG I 0 A_SetPitch(pitch+frandom(-0.4,0.4))
		LEEG I 2 A_SetAngle(angle+frandom(-0.4,0.4))
		LEEG G 4 Bright A_Refire
		Goto Ready
	Hold:
		LEEG I 0 Bright A_FireBullets(4,3,1,18,"LeechPuff1")
		LEEG I 0 A_SetPitch(pitch+frandom(-0.4,0.4))
		LEEG I 0 A_SetAngle(angle+frandom(-0.4,0.4))
		LEEG IG 2 Bright
		LEEG I 0 Bright A_FireBullets(4,3,1,18,"LeechPuff1")
		LEEG I 0 A_SetPitch(pitch+frandom(-0.4,0.4))
		LEEG I 0 A_SetAngle(angle+frandom(-0.4,0.4))
		LEEG IG 2 Bright
		LEEG I 0 Bright A_FireBullets(4,3,1,18,"LeechPuff1",0)
		LEEG I 0 A_SetPitch(pitch+frandom(-0.4,0.4))
		LEEG I 2 A_SetAngle(angle+frandom(-0.4,0.4))
		LEEG G 2 Bright A_Refire
		Goto Ready
	AltFire:
		LEEG A 4 Bright
		LEEG BCDEFGH 2 Bright 
		LEEG I 2 Bright A_SetBlend("White",0.7,10)
		LEEG J 0 Bright A_FireCustomMissile("TechnoBall2",0,3,0)
		LEEG JJ 1 A_SetPitch(pitch-1.5)
		LEEG IIHHGG 1 A_SetPitch(pitch+0.5)
		LEEG FEDCB 2 Bright 
		Goto Ready
	}
}

Actor TechnoBall2
{
	PROJECTILE
	+FORCERADIUSDMG
	+EXTREMEDEATH
	Mass 1
	Radius 10
	Height 10
	Speed 20
	Damage 100
	SeeSound "reilsss/weapons/soulleechfire"
	DeathSound "reilsss/weapons/soulleechexplosion"
	RenderStyle Add
	Alpha 0.7
	Scale 0.66
	DamageType "Holy"
	States
	{
	Spawn:
		TNT1 AA 0 A_CustomMissile("SLGas",0+random(20,-20),0+random(20,-20),random(15,-15),0)
		VOR2 F 1 Bright A_CustomMissile("TBTrail",0,0,random(45,-45))
		TNT1 AA 0 A_CustomMissile("SLGas",0+random(20,-20),0+random(20,-20),random(15,-15),0)
		VOR2 G 1 Bright A_CustomMissile("TBTrail",0,0,random(45,-45))
		TNT1 AA 0 A_CustomMissile("SLGas",0+random(20,-20),0+random(20,-20),random(15,-15),0)
		VOR2 H 1 Bright A_CustomMissile("TBTrail",0,0,random(45,-45))
		TNT1 AAA 0 A_CustomMissile("SLGas",0+random(20,-20),0+random(20,-20),random(15,-15),0)
		VOR2 I 1 Bright A_CustomMissile("TBTrail",0,0,random(45,-45))
		Loop
	Death:
		TNT1 A 0 A_Explode(random(100,1250),400,0)
		TNT1 AAAAAAAAAAAAAAAAAA 0 A_SpawnItemEx("LeechBallExtraFX",0,0,0,frandom(1,3),0,frandom(3,-3),random(0,359),32)
		TNT1 AAAAAAAAAAAAAAAAAA 0 A_SpawnItemEx("LeechBallExtraFX",0,0,0,frandom(1,3),0,frandom(3,-3),random(0,359),32)
		TNT1 AAAAAAAAAAAAAAAAAA 0 A_SpawnItemEx("LeechBallExtraFX",0,0,0,frandom(1,3),0,frandom(3,-3),random(0,359),32)
		TNT1 A 10
		Stop
	}
}

Actor LeechBallExtraFX
{
	+NOINTERACTION
	RenderStyle Add
	Scale 1.5
	Alpha 0.0
	States
	{
	Spawn:
		X110 A 0
		TNT1 A 0 
		X110 ABCD 2 A_Fadeto(0.8,0.08)
		TNT1 A 0 A_ScaleVelocity(0.8)
		X110 EFGHI 2 A_Fadeto(0.8,0.08)
		TNT1 A 0 A_ScaleVelocity(0.8)
		X110 JKLMNOP 2 A_Fadeto(0.8,0.08)
		TNT1 A 0 A_ScaleVelocity(0.67)
		X110 QRSTUVWXY 2 
		TNT1 A 0 A_ScaleVelocity(0.67)
		X110 ABCDEFGHIJK 2
		TNT1 A 0 A_ScaleVelocity(0.67)
		X110 LMNOPQRSTUVWXY 2
	Outer:
		X110 ABCDEFGHIJKLMNOPQRSTUVWXY 2 A_FadeOut(0.03)
		Loop
	}
}

Actor LeechPuff1
{
	PROJECTILE
	+ALWAYSPUFF
	+EXTREMEDEATH
	+PUFFONACTORS
	+PUFFGETSOWNER
	+NOGRAVITY
	+ISMONSTER
	+NOTARGET
	-COUNTKILL
	+FOILINVUL
	+LOOKALLAROUND
	DamageType "Holy"
	Radius 0
	Height 3
	RENDERSTYLE ADD
	ALPHA 0.75
	Scale 0.67
	States
	{
	Spawn:
		LBA1 H 0
		LBA1 H 1 Bright A_SpawnItemEx("LeechPuff2Fx",0,random(4,-4),random(4,-4),0,0,random(8,1)/(4*1.9),random(0,359),32)
		LBA1 I 0 Bright A_Jump(128,7)
		LBA1 II 0 Bright A_Look
	See:
		LBA1 I 0 Bright A_Chase
		LBA1 I 0 Bright A_FaceTarget
		LBA1 I 0 Bright A_GiveToTarget("LeechBall1",random(1,2))
		LBA1 I 0 Bright A_CustomMissile("LeechBall1Fake",0,0,0,0)
		LBA1 H 3 Bright A_Playsound("weapons/leechh")
		LBA1 I 4 Bright A_SpawnItemEx("LeechPuff2Fx",0,random(4,-4),random(4,-4),0,0,random(8,1)/(4*1.9),random(0,359),32)
		LBA1 JK 4 Bright A_SpawnItemEx("LeechPuff2Fx",0,random(4,-4),random(4,-4),0,0,random(8,1)/(4*1.9),random(0,359),32)
		LBA1 K 4 A_FadeOut(0.10)
		Goto Spawn+11
	Crash:
		LBA1 CDEFG 4 Bright A_SpawnItemEx("LeechPuff1Fx",0,random(2,-2),random(2,-2),0,0,random(8,1)/(8*1.9),random(0,359),32)
		Stop
	}
}

Actor LeechPuff1Fx
{
	+NOINTERACTION
	Scale 0.2
	RenderStyle Add
	Alpha 0.8
	States
	{
	Spawn:
		LBA1 HHHIIIJJJKKK 1 A_FadeOut(0.04)
		Wait
	}
}

Actor LeechPuff2Fx
{
	+NOINTERACTION
	Scale 0.45
	RenderStyle Add
	Alpha 0.8
	States
	{
	Spawn:
		LBA1 HHHIIIJJJKKK 1 A_FadeOut(0.04)
		Wait
	}
}


Actor LeechBall1 : HealthBonus
{
	+NOGRAVITY
	+SEEKERMISSILE
	+MISSILE
	+DROPOFF
	+NOBLOCKMONST
	+CANPASS
	+RIPPER
	RipperLevel 667
	+BLOODLESSIMPACT
	+NODAMAGETHRUST
	-COUNTITEM
	Radius 8
	Height 12
	Speed 35
	Damage 0
	Inventory.Amount 5
	Inventory.MaxAmount 500
	Inventory.PickupSound "SpiritDie"
	Inventory.PickupMessage ""
	SeeSound "weapons/leechb"
	DeathSound "weapons/leech"
	RENDERSTYLE ADD
	ALPHA 0.75
	Scale 0.67
	States
	{
	Spawn:
		TNT1 A 0
		LBA1 A 2 Bright A_SeekerMissile(20,20)
		LBA1 A 0 Bright A_ChangeFlag("RIPPER",0)
		LBA1 A 2 Bright A_SeekerMissile(20,20)
		LBA1 A 0 Bright A_SpawnItem("LeechFX1",0,0)
		LBA1 B 2 Bright A_SeekerMissile(20,20)
		LBA1 B 2 Bright A_SeekerMissile(20,20)
		LBA1 B 0 Bright A_SpawnItem("LeechFX1",0,0)
		Loop
	Death:
		LBA1 A 0
		Stop
	}
}

Actor LeechBall1Fake : LeechBall1 { Inventory.Amount 0 }

Actor LeechFX1
{
	PROJECTILE
	Radius 0
	Height 1
	RENDERSTYLE ADD
	ALPHA 0.75
	Scale 0.67
	States
	{
	Spawn:
		TNT1 A 3
		LBA1 CDEFG 4 Bright
		Stop
	}
}

Actor LeechFX2 : LeechFX1
{
	Scale 1.0
	States
	{
	Spawn:
		TNT1 A 3
		LBA2 CDEFG 4 Bright
		Stop
	}
}

Actor SoulleechDrop : CustomInventory
{
	Inventory.MaxAmount 1
	States
	{
	Use:
		TNT1 A 0
		TNT1 A 0 A_SpawnItemEx("DroppedSoulleech",0,0,32,8,0,0,0,32,0)
		Stop
	}
}

Actor DroppedSoulleech
{
	Radius 16
	Height 20
	Scale 0.7
	States
	{
	Spawn:
		WLEC A 15 Bright
		TNT1 A 0 A_SpawnItemEx("AEoDSoulleechNoAmmo",0,0,0,0,0,0,0,48,0)
		Stop
	}
}

Actor AEoDSoulleechNoAmmo : AEoDSoulleechItem
{
	+FLOORCLIP
	+FLOATBOB
	+INVENTORY.IGNORESKILL
	Scale 0.7
	Inventory.Amount 1
	Inventory.PickupMessage "You got the Souleech!"
	Inventory.PickupSound "weaponbuild"
	States
	{
	Spawn:
		WLEC AB 4 Bright
		Loop
	Pickup:
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",9) <= 0,"Nothing")
		TNT1 A 0 A_JumpIfInventory("BlueMana",40,"Ammo")
		TNT1 A 0 A_JumpIfInventory("RedMana",20,"Ammo3")
		TNT1 A 0 A_GiveInventory("Weapon9Count",1)
		TNT1 A 0 A_GiveInventory("SoulleechDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDSoulleech",1)
		TNT1 A 0 A_TakeInventory("BlueMana",40)
		TNT1 A 0 A_TakeInventory("RedMana",20)
		TNT1 A 0 	
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDSoulleech",1,"Ammo")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		TNT1 A 0 ACS_NamedExecute("s798",0,9,0,0)
		Fail
	Ammo:
		TNT1 A 0 A_JumpIfInventory("RedMana",20,1)
		Goto Ammo2
		TNT1 A 0 A_TakeInventory("BlueMana",40)
		TNT1 A 0 A_TakeInventory("RedMana",20)
		TNT1 A 0 A_JumpIfInventory("AEoDSoulleech",1,2)
		TNT1 A 0 A_GiveInventory("Weapon9Count",1)
		TNT1 A 0 A_GiveInventory("SoulleechDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDSoulleech",1)
		Stop
	Ammo2:
		TNT1 A 0 A_TakeInventory("BlueMana",40)
		TNT1 A 0 A_GiveInventory("Weapon9Count",1)
		TNT1 A 0 A_GiveInventory("SoulleechDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDSoulleech",1)
		TNT1 A 0 A_TakeInventory("RedMana",20)
		Stop
	Ammo3:
		TNT1 A 0 A_TakeInventory("RedMana",20)
		TNT1 A 0 A_GiveInventory("Weapon9Count",1)
		TNT1 A 0 A_GiveInventory("SoulleechDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDSoulleech",1)
		TNT1 A 0 A_TakeInventory("BlueMana",40)
		Stop
	}
}

//==================================================================================
//==================================================================================

//==================================================================================
//==================================================================================

Actor AEoDWraithVergeItem : CustomInventory 6027
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL
	+FLOATBOB
	Scale 0.8
	Inventory.Amount 1
	Inventory.PickupMessage "You get the wraithverge!"
	Inventory.PickupSound "pickuppiece" 
	States
	{
	Spawn:
		WCHS A -1
		Loop
	Pickup:
		TNT1 A 0 A_JumpIfInventory("AEoDWraithVerge",1,"Ammo")
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",9) <= 0,"Nothing")
		TNT1 A 0 A_GiveInventory("Weapon9Count",1)
		TNT1 A 0 A_GiveInventory("WraithVergeDrop2",1)
		TNT1 A 0 A_GiveInventory("AEoDWraithVerge",1)
		TNT1 A 0 	
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDWraithVerge",1,"Ammo")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		TNT1 A 0 ACS_NamedExecute("s798",0,9,0,0)
		Fail
	Ammo:
		TNT1 A 0 A_GiveInventory("AEoDWraithVerge",1)
		Stop
	}
}

Actor AEoDWraithVerge : CWeapWraithVerge // 6027
{ 
	+FLOORCLIP
	+INVENTORY.IGNORESKILL
	-PRIMARY_USES_BOTH
	+WEAPON.CHEATNOTWEAPON 
	+FLOATBOB
	Weapon.AmmoType1 "RedMana"
	Weapon.AmmoType2 "RedMana"
	Weapon.AmmoGive1 0
	Weapon.AmmoUse1 7
	Weapon.AmmoUse2 14
	Weapon.SelectionOrder 11960
	Obituary "%o saw %k's soul, or maybe another one."
	Inventory.PickupMessage "You get the wraithverge!"
	Inventory.PickupSound "pickuppiece" 
	Weapon.upsound "weapons/draw"
	Scale 0.8
	Tag "Wraithverge"
	States 
	{ 
	Spawn: 
		WCHS A -1 
		Loop 
	Deselect: 
		TNT1 A 0 	
		CHLY A 1 A_Lower
		TNT1 AA 0 A_Lower 
		Loop 
	Select: 
		TNT1 A 0 	
		CHLY A 1 A_Raise
		TNT1 AA 0 A_Raise 
		Loop 
	Fire:
		CHLY BCD 2
		TNT1 A 0 A_PlaySound("reilsss/weapons/wraithfire", CHAN_WEAPON, 1.0, 0)
		CHLY EF 2 Bright
		TNT1 A 0 A_Recoil(6)
		CHLY G 0 Bright A_FireCustomMissile("WVSpell1",0,0,0,0)
		CHLY G 0 Bright A_FireCustomMissile("WVSpell2",0,0,0,0)
		CHLY G 0 Bright A_FireCustomMissile("WVSpell3",0,0,0,0)
		CHLY G 5 Bright A_FireCustomMissile("WVSpell4",0,1,0,0)
		CHLY F 4 Bright
		CHLY EDCB 3
		Goto Ready 
	AltFire: 
		CHLY BCD 4 
		TNT1 A 0 A_PlaySound("reilsss/weapons/wraithfire", CHAN_WEAPON, 1.0, 0)
		CHLY HI 4 Bright
		TNT1 A 0 A_SetBlend("Gray",0.35,8)
		TNT1 A 0 A_Recoil(2)
		CHLY J 0 A_FireCustomMissile("HolyMissileDMG", 0, 1, 0, 0)
		CHLY JJ 1 Bright A_SetPitch(pitch+1.5)
		CHLY JJDDDD 1 Bright A_SetPitch(pitch-0.5)
		CHLY CCCBBBA 1
		Goto Ready 
	}
}

Actor HolyMissileDMG 	: HolyMissile { DamageType "Holy" }
Actor HolySpiritDMG 	: HolySpirit 	replaces HolySpirit { DamageType "Holy" }
Actor HolyPuffDMG 		: HolyPuff 		replaces HolyPuff 	{ DamageType "Holy" }

Actor WVSpell1
{
	Speed 20
	Damage 20
	Scale 0.35
	Radius 6
	Height 12
	RenderStyle Add
	Alpha 0.75
	PROJECTILE
	+SEEKERMISSILE
	+EXTREMEDEATH
	SeeSound "whiteballbsee"
	DeathSound "whiteballbdeth"
	DamageType "Holy"
	States
	{
	Spawn:
		PSMM A 1 Bright A_SeekerMissile(25,10)
		TNT1 A 0 Bright A_Weave(2,2,2.0,2.0)
		TNT1 A 0 A_CustomMissile("SLM2Trail",0,0,0)
		PSMM A 1 Bright A_SeekerMissile(25,10)
		TNT1 A 0 Bright A_Weave(2,2,2.0,2.0)
		TNT1 A 0 A_CustomMissile("SLM2Trail",0,0,0)
		PSMM A 1 Bright A_SeekerMissile(25,10)
		TNT1 A 0 Bright A_Weave(2,2,2.0,2.0)
		TNT1 A 0 A_CustomMissile("SLM2Trail",0,0,0)
		PSMM A 1 Bright A_SeekerMissile(25,10)
		TNT1 A 0 Bright A_Weave(2,2,2.0,2.0)
		TNT1 A 0 A_CustomMissile("SLM2Trail",0,0,0)
		PSMM B 1 Bright A_SeekerMissile(25,10)
		TNT1 A 0 Bright A_Weave(2,2,2.0,2.0)
		TNT1 A 0 A_CustomMissile("SLM2Trail",0,0,0)
		PSMM B 1 Bright A_SeekerMissile(25,10)
		TNT1 A 0 Bright A_Weave(2,2,2.0,2.0)
		TNT1 A 0 A_CustomMissile("SLM2Trail",0,0,0)
		PSMM B 1 Bright A_SeekerMissile(25,10)
		TNT1 A 0 Bright A_Weave(2,2,2.0,2.0)
		TNT1 A 0 A_CustomMissile("SLM2Trail",0,0,0)
		PSMM B 1 Bright A_SeekerMissile(25,10)
		TNT1 A 0 Bright A_Weave(2,2,2.0,2.0)
		TNT1 A 0 A_CustomMissile("SLM2Trail",0,0,0)
		PSMM C 1 Bright A_SeekerMissile(25,10)
		TNT1 A 0 Bright A_Weave(2,2,2.0,2.0)
		TNT1 A 0 A_CustomMissile("SLM2Trail",0,0,0)
		PSMM C 1 Bright A_SeekerMissile(25,10)
		TNT1 A 0 Bright A_Weave(2,2,2.0,2.0)
		TNT1 A 0 A_CustomMissile("SLM2Trail",0,0,0)
		PSMM C 1 Bright A_SeekerMissile(25,10)
		TNT1 A 0 Bright A_Weave(2,2,2.0,2.0)
	Looper:
		TNT1 A 0 A_CustomMissile("SLM2Trail",0,0,0)
		PSMM D 1 Bright A_SeekerMissile(25,10)
		TNT1 A 0 Bright A_Weave(2,2,2.0,2.0)
		TNT1 A 0 A_CustomMissile("SLM2Trail",0,0,0)
		PSMM D 1 Bright A_SeekerMissile(25,10)
		TNT1 A 0 Bright A_Weave(2,2,2.0,2.0)
		TNT1 A 0 A_CustomMissile("SLM2Trail",0,0,0)
		PSMM E 1 Bright A_SeekerMissile(25,10)
		TNT1 A 0 Bright A_Weave(2,2,2.0,2.0)
		TNT1 A 0 A_CustomMissile("SLM2Trail",0,0,0)
		PSMM E 1 Bright A_SeekerMissile(25,10)
		TNT1 A 0 Bright A_Weave(2,2,2.0,2.0)
		TNT1 A 0 A_CustomMissile("SLM2Trail",0,0,0)
		PSMM F 1 Bright A_SeekerMissile(25,10)
		TNT1 A 0 Bright A_Weave(2,2,2.0,2.0)
		TNT1 A 0 A_CustomMissile("SLM2Trail",0,0,0)
		PSMM F 1 Bright A_SeekerMissile(25,10)
		TNT1 A 0 Bright A_Weave(2,2,2.0,2.0)
		TNT1 A 0 A_CustomMissile("SLM2Trail",0,0,0)
		Goto Looper
	Death:
		PSMM G 0 
		PSMM G 0 A_Explode(140,150,0)
		PSMM GGHHIIJJKKLLMM 2 Bright A_FadeOut(0.05)
		Stop
	}
}

Actor WVSpell2 : WVSpell1
{
	States
	{
	Spawn:
		TNT1 A 0 A_SeekerMissile(25,10)
		PSMM A 1 Bright
		TNT1 A 0 A_CustomMissile("SLM2Trail",0,0,0)
		TNT1 A 0 A_SeekerMissile(25,10)
		PSMM A 1 Bright
		TNT1 A 0 A_CustomMissile("SLM2Trail",0,0,0)
		TNT1 A 0 A_SeekerMissile(25,10)
		PSMM A 1 Bright
		TNT1 A 0 A_CustomMissile("SLM2Trail",0,0,0)
		TNT1 A 0 A_SeekerMissile(25,10)
		PSMM A 1 Bright
		TNT1 A 0 A_CustomMissile("SLM2Trail",0,0,0)
		TNT1 A 0 A_SeekerMissile(25,10)
		PSMM B 1 Bright
		TNT1 A 0 A_CustomMissile("SLM2Trail",0,0,0)
		TNT1 A 0 A_SeekerMissile(25,10)
		PSMM B 1 Bright
		TNT1 A 0 A_CustomMissile("SLM2Trail",0,0,0)
		TNT1 A 0 A_SeekerMissile(25,10)
		PSMM B 1 Bright
		TNT1 A 0 A_CustomMissile("SLM2Trail",0,0,0)
		TNT1 A 0 A_SeekerMissile(25,10)
		PSMM B 1 Bright
		TNT1 A 0 A_CustomMissile("SLM2Trail",0,0,0)
		TNT1 A 0 A_SeekerMissile(25,10)
		PSMM C 1 Bright
		TNT1 A 0 A_CustomMissile("SLM2Trail",0,0,0)
		TNT1 A 0 A_SeekerMissile(25,10)
		PSMM C 1 Bright
		TNT1 A 0 A_CustomMissile("SLM2Trail",0,0,0)
		TNT1 A 0 A_SeekerMissile(25,10)
		PSMM C 1 Bright
		TNT1 A 0 A_CustomMissile("SLM2Trail",0,0,0)
		TNT1 A 0 A_SeekerMissile(25,10)
		PSMM C 1 Bright
		TNT1 A 0 A_CustomMissile("SLM2Trail",0,0,0)
		TNT1 A 0 A_SeekerMissile(25,10)
		PSMM D 1 Bright
		TNT1 A 0 A_CustomMissile("SLM2Trail",0,0,0)
		TNT1 A 0 A_SeekerMissile(25,10)
		PSMM D 1 Bright
		TNT1 A 0 A_CustomMissile("SLM2Trail",0,0,0)
		TNT1 A 0 A_SeekerMissile(25,10)
		PSMM E 1 Bright
		TNT1 A 0 A_CustomMissile("SLM2Trail",0,0,0)
		TNT1 A 0 A_SeekerMissile(25,10)
		PSMM E 1 Bright
		TNT1 A 0 A_CustomMissile("SLM2Trail",0,0,0)
	Looper:
		TNT1 A 0 A_SeekerMissile(25,10)
		PSMM F 1 Bright A_Weave(2,2,2.0,2.0)
		TNT1 A 0 A_CustomMissile("SLM2Trail",0,0,0)
		TNT1 A 0 A_SeekerMissile(25,10)
		PSMM F 1 Bright A_Weave(2,2,2.0,2.0)
		TNT1 A 0 A_CustomMissile("SLM2Trail",0,0,0)
		TNT1 A 0 A_SeekerMissile(25,10)
		PSMM D 1 Bright A_Weave(2,2,2.0,2.0)
		TNT1 A 0 A_CustomMissile("SLM2Trail",0,0,0)
		TNT1 A 0 A_SeekerMissile(25,10)
		PSMM D 1 Bright A_Weave(2,2,2.0,2.0)
		TNT1 A 0 A_CustomMissile("SLM2Trail",0,0,0)
		TNT1 A 0 A_SeekerMissile(25,10)
		PSMM E 1 Bright A_Weave(2,2,2.0,2.0)
		TNT1 A 0 A_CustomMissile("SLM2Trail",0,0,0)
		TNT1 A 0 A_SeekerMissile(25,10)
		PSMM E 1 Bright A_Weave(2,2,2.0,2.0)
		TNT1 A 0 A_CustomMissile("SLM2Trail",0,0,0)
		Goto Looper
	}
}

Actor WVSpell3 : WVSpell1
{
	States
	{
	Spawn:
		TNT1 A 0 A_SeekerMissile(25,10)
		PSMM A 1 Bright
		TNT1 A 0 A_CustomMissile("SLM2Trail",0,0,0)
		TNT1 A 0 A_SeekerMissile(25,10)
		PSMM A 1 Bright
		TNT1 A 0 A_CustomMissile("SLM2Trail",0,0,0)
		TNT1 A 0 A_SeekerMissile(25,10)
		PSMM A 1 Bright
		TNT1 A 0 A_CustomMissile("SLM2Trail",0,0,0)
		TNT1 A 0 A_SeekerMissile(25,10)
		PSMM A 1 Bright
		TNT1 A 0 A_CustomMissile("SLM2Trail",0,0,0)
		TNT1 A 0 A_SeekerMissile(25,10)
		PSMM B 1 Bright
		TNT1 A 0 A_CustomMissile("SLM2Trail",0,0,0)
		TNT1 A 0 A_SeekerMissile(25,10)
		PSMM B 1 Bright
		TNT1 A 0 A_CustomMissile("SLM2Trail",0,0,0)
		TNT1 A 0 A_SeekerMissile(25,10)
		PSMM B 1 Bright
		TNT1 A 0 A_CustomMissile("SLM2Trail",0,0,0)
		TNT1 A 0 A_SeekerMissile(25,10)
		PSMM B 1 Bright
		TNT1 A 0 A_CustomMissile("SLM2Trail",0,0,0)
		TNT1 A 0 A_SeekerMissile(25,10)
		PSMM C 1 Bright A_Weave(2,2,2.0,2.0)
		TNT1 A 0 A_CustomMissile("SLM2Trail",0,0,0)
		TNT1 A 0 A_SeekerMissile(25,10)
		PSMM C 1 Bright A_Weave(2,2,2.0,2.0)
		TNT1 A 0 A_CustomMissile("SLM2Trail",0,0,0)
		TNT1 A 0 A_SeekerMissile(25,10)
		PSMM C 1 Bright A_Weave(2,2,2.0,2.0)
		TNT1 A 0 A_CustomMissile("SLM2Trail",0,0,0)
		TNT1 A 0 A_SeekerMissile(25,10)
		PSMM C 1 Bright A_Weave(2,2,2.0,2.0)
		TNT1 A 0 A_CustomMissile("SLM2Trail",0,0,0)
	Looper:
		TNT1 A 0 A_SeekerMissile(25,10)
		PSMM D 1 Bright A_Weave(2,2,2.0,2.0)
		TNT1 A 0 A_CustomMissile("SLM2Trail",0,0,0)
		TNT1 A 0 A_SeekerMissile(25,10)
		PSMM D 1 Bright A_Weave(2,2,2.0,2.0)
		TNT1 A 0 A_CustomMissile("SLM2Trail",0,0,0)
		TNT1 A 0 A_SeekerMissile(25,10)
		PSMM E 1 Bright A_Weave(2,2,2.0,2.0)
		TNT1 A 0 A_CustomMissile("SLM2Trail",0,0,0)
		TNT1 A 0 A_SeekerMissile(25,10)
		PSMM E 1 Bright A_Weave(2,2,2.0,2.0)
		TNT1 A 0 A_CustomMissile("SLM2Trail",0,0,0)
		TNT1 A 0 A_SeekerMissile(25,10)
		PSMM F 1 Bright A_Weave(2,2,2.0,2.0)
		TNT1 A 0 A_CustomMissile("SLM2Trail",0,0,0)
		TNT1 A 0 A_SeekerMissile(25,10)
		PSMM F 1 Bright A_Weave(2,2,2.0,2.0)
		TNT1 A 0 A_CustomMissile("SLM2Trail",0,0,0)
		Goto Looper
	}
}

Actor WVSpell4 : WVSpell1
{
	States
	{
	Spawn:
		TNT1 A 0 A_SeekerMissile(25,10)
		PSMM A 1 Bright
		TNT1 A 0 A_CustomMissile("SLM2Trail",0,0,0)
		TNT1 A 0 A_SeekerMissile(25,10)
		PSMM A 1 Bright
		TNT1 A 0 A_CustomMissile("SLM2Trail",0,0,0)
		TNT1 A 0 A_SeekerMissile(25,10)
		PSMM A 1 Bright
		TNT1 A 0 A_CustomMissile("SLM2Trail",0,0,0)
		TNT1 A 0 A_SeekerMissile(25,10)
		PSMM A 1 Bright
		TNT1 A 0 A_CustomMissile("SLM2Trail",0,0,0)
		TNT1 A 0 A_SeekerMissile(25,10)
		PSMM B 1 Bright
		TNT1 A 0 A_CustomMissile("SLM2Trail",0,0,0)
		TNT1 A 0 A_SeekerMissile(25,10)
		PSMM B 1 Bright
		TNT1 A 0 A_CustomMissile("SLM2Trail",0,0,0)
		TNT1 A 0 A_SeekerMissile(25,10)
		PSMM B 1 Bright
		TNT1 A 0 A_CustomMissile("SLM2Trail",0,0,0)
		TNT1 A 0 A_SeekerMissile(25,10)
		PSMM B 1 Bright
		TNT1 A 0 A_CustomMissile("SLM2Trail",0,0,0)
		TNT1 A 0 A_SeekerMissile(25,10)
		PSMM C 1 Bright
		TNT1 A 0 A_CustomMissile("SLM2Trail",0,0,0)
		TNT1 A 0 A_SeekerMissile(25,10)
		PSMM C 1 Bright
		TNT1 A 0 A_CustomMissile("SLM2Trail",0,0,0)
		TNT1 A 0 A_SeekerMissile(25,10)
		PSMM C 1 Bright
		TNT1 A 0 A_CustomMissile("SLM2Trail",0,0,0)
		TNT1 A 0 A_SeekerMissile(25,10)
		PSMM C 1 Bright
		TNT1 A 0 A_CustomMissile("SLM2Trail",0,0,0)
		TNT1 A 0 A_SeekerMissile(25,10)
		PSMM D 1 Bright
		TNT1 A 0 A_CustomMissile("SLM2Trail",0,0,0)
		TNT1 A 0 A_SeekerMissile(25,10)
		PSMM D 1 Bright
		TNT1 A 0 A_CustomMissile("SLM2Trail",0,0,0)
		TNT1 A 0 A_SeekerMissile(25,10)
		PSMM E 1 Bright
		TNT1 A 0 A_CustomMissile("SLM2Trail",0,0,0)
		TNT1 A 0 A_SeekerMissile(25,10)
		PSMM E 1 Bright
		TNT1 A 0 A_CustomMissile("SLM2Trail",0,0,0)
		TNT1 A 0 A_SeekerMissile(25,10)
		PSMM F 1 Bright
		TNT1 A 0 A_CustomMissile("SLM2Trail",0,0,0)
		TNT1 A 0 A_SeekerMissile(25,10)
		PSMM F 1 Bright
		TNT1 A 0 A_CustomMissile("SLM2Trail",0,0,0)
		TNT1 A 0 A_SeekerMissile(25,10)
		PSMM D 1 Bright
		TNT1 A 0 A_CustomMissile("SLM2Trail",0,0,0)
		TNT1 A 0 A_SeekerMissile(25,10)
		PSMM D 1 Bright
		TNT1 A 0 A_CustomMissile("SLM2Trail",0,0,0)
		TNT1 A 0 A_SeekerMissile(25,10)
		PSMM E 1 Bright
		TNT1 A 0 A_CustomMissile("SLM2Trail",0,0,0)
		TNT1 A 0 A_SeekerMissile(25,10)
		PSMM E 1 Bright
		TNT1 A 0 A_CustomMissile("SLM2Trail",0,0,0)
		TNT1 A 0 A_SeekerMissile(25,10)
		PSMM F 1 Bright
		TNT1 A 0 A_CustomMissile("SLM2Trail",0,0,0)
		TNT1 A 0 A_SeekerMissile(25,10)
		PSMM F 1 Bright
		TNT1 A 0 A_CustomMissile("SLM2Trail",0,0,0)
	Looper:
		TNT1 A 0 A_SeekerMissile(25,10)
		PSMM D 1 Bright A_Weave(2,2,2.0,2.0)
		TNT1 A 0 A_CustomMissile("SLM2Trail",0,0,0)
		TNT1 A 0 A_SeekerMissile(25,10)
		PSMM D 1 Bright A_Weave(2,2,2.0,2.0)
		TNT1 A 0 A_CustomMissile("SLM2Trail",0,0,0)
		TNT1 A 0 A_SeekerMissile(25,10)
		PSMM E 1 Bright A_Weave(2,2,2.0,2.0)
		TNT1 A 0 A_CustomMissile("SLM2Trail",0,0,0)
		TNT1 A 0 A_SeekerMissile(25,10)
		PSMM E 1 Bright A_Weave(2,2,2.0,2.0)
		TNT1 A 0 A_CustomMissile("SLM2Trail",0,0,0)
		TNT1 A 0 A_SeekerMissile(25,10)
		PSMM F 1 Bright A_Weave(2,2,2.0,2.0)
		TNT1 A 0 A_CustomMissile("SLM2Trail",0,0,0)
		TNT1 A 0 A_SeekerMissile(25,10)
		PSMM F 1 Bright A_Weave(2,2,2.0,2.0)
		TNT1 A 0 A_CustomMissile("SLM2Trail",0,0,0)
		Goto Looper
	}
}

Actor WraithVergeDrop2 : CustomInventory
{
	Inventory.MaxAmount 1
	States
	{
	Use:
		TNT1 A 0
		TNT1 A 0 A_SpawnItemEx("DroppedWraithVerge",0,0,32,8,0,0,0,32,0)
		Stop
	}
}

Actor DroppedWraithVerge
{
	Radius 16
	Height 20
	Scale 0.8
	States
	{
	Spawn:
		WCHS A 15
		TNT1 A 0 A_SpawnItemEx("AEoDWraithVergeNoAmmo",0,0,0,0,0,0,0,48,0)
		Stop
	}
}

Actor AEoDWraithVergeNoAmmo : AEoDWraithVergeItem
{
	+FLOORCLIP
	+FLOATBOB
	+INVENTORY.IGNORESKILL
	Scale 0.8
	Inventory.Amount 1
	Inventory.PickupMessage "You get the wraithverge!"
	Inventory.PickupSound "pickuppiece" 
	States
	{
	Spawn:
		WCHS A -1
		Loop
	Pickup:
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",9) <= 0,"Nothing")
		TNT1 A 0 A_JumpIfInventory("RedMana",20,"Ammo")
		TNT1 A 0 A_GiveInventory("Weapon9Count",1)
		TNT1 A 0 A_GiveInventory("WraithVergeDrop2",1)
		TNT1 A 0 A_GiveInventory("AEoDWraithVerge",1)
		TNT1 A 0 A_TakeInventory("RedMana",20)
		TNT1 A 0 	
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDWraithVerge",1,"Ammo")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		TNT1 A 0 ACS_NamedExecute("s798",0,9,0,0)
		Fail
	Ammo:
		TNT1 A 0 A_TakeInventory("RedMana",20)
		TNT1 A 0 A_JumpIfInventory("AEoDWraithVerge",1,2)
		TNT1 A 0 A_GiveInventory("Weapon9Count",1)
		TNT1 A 0 A_GiveInventory("WraithVergeDrop2",1)
		TNT1 A 0 A_GiveInventory("AEoDWraithVerge",1)
		Stop
	}
}

//---------------------------------------------------------------------

//Crawler Weapon Definition

Actor AEoDCrawlerItem : CustomInventory 6030
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL
	Scale 0.475
	Inventory.Amount 1
	Inventory.PickupMessage "You picked up the Crawler"
	Inventory.PickupSound "reilsss/weappickup/bfgs"
	States
	{
	Spawn:
		R036 S -1
		Loop
	Pickup:
		TNT1 A 0 A_JumpIfInventory("AEoDCrawler",1,"Ammo")
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",9) <= 0,"Nothing")
		TNT1 A 0 A_GiveInventory("Weapon9Count",1)
		TNT1 A 0 A_GiveInventory("CrawlerDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDCrawler",1)
		TNT1 A 0 	
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDCrawler",1,"Ammo")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		TNT1 A 0 ACS_NamedExecute("s798",0,9,0,0)
		Fail
	Ammo:
		TNT1 A 0 A_GiveInventory("AEoDCrawler",1)
		Stop
	}
}

Actor AEoDCrawler : Mauler2 
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL
	+WEAPON.CHEATNOTWEAPON
	+WEAPON.NOALERT
	Game Doom
	Weapon.AmmoType1 "AECell"
	Weapon.AmmoGive1 50
	Weapon.AmmoUse1 5
	Weapon.SelectionOrder 7400
	Inventory.PickupMessage "You picked up the Crawler"
	Inventory.PickupSound "reilsss/weappickup/bfgs"
	Weapon.upsound "weapons/bfg/draw"
	Scale 0.475
	Tag "Crawler"
	States
	{
	Spawn:
		R036 S -1
		Loop
	Deselect:
		TNT1 A 0 A_JumpIfInventory("CrawlerModeChecker",1,"Deselect2")
		TNT1 A 0 	
		TNT1 A 0 A_StopSound(6)
		R036 A 1 A_Lower
		TNT1 AA 0 A_Lower
		Goto Deselect+1
	Deselect2:
		TNT1 A 0 A_StopSound(6)
		TNT1 A 0 	
		R036 F 1 A_Lower
		TNT1 AA 0 A_Lower
		Goto Deselect2+1
	Select:
		TNT1 A 0 A_JumpIfInventory("CrawlerModeChecker",1,"Select2")
		TNT1 A 0 	
		R036 A 1 A_Raise
		TNT1 AA 0 A_Raise
		Goto Select+1
	Select2:
		TNT1 A 0 	
		R036 F 1 A_Raise
		TNT1 AA 0 A_Raise
		Loop
	Ready:
		TNT1 A 0 A_PlaySound("reilsss/weapons/mauleridle1", 6, 1.0, 1)
		TNT1 A 0 A_JumpIfInventory("CrawlerModeChecker",1,"Ready2")
		R036 AAAAAAAAAAAAAAAA 6 A_WeaponReady
		TNT1 A 0 A_Jump(32,1)
		Goto Ready+2
		TNT1 A 0 A_PlaySound("reilsss/weapons/hissidle1", 8, 1.0, 0)
		R036 BCDE 3 A_WeaponReady
		Goto Ready+2
	Ready2:
		R036 FFFFFFFFFFFFFFFF 6 A_WeaponReady
		TNT1 A 0 A_Jump(32,1)
		Goto Ready2
		TNT1 A 0 A_PlaySound("reilsss/weapons/hissidle1", 8, 1.0, 0)
		R036 HIJF 3 A_WeaponReady
		Goto Ready2
	Fire:
		TNT1 A 0 A_JumpIfInventory("CrawlerModeChecker",1,"Fire2")
		TNT1 A 0 A_PlaySound("reilsss/weapons/ligthingcannonfire", CHAN_WEAPON, 1.0, 0)
		TNT1 A 0 A_Firecustommissile("CheapAlert2",0,0,0,0)
		TNT1 A 0 A_FireCustomMissile("AmmoUser",0,1,0,0)
		R036 K 0 Bright A_FireBullets(6,6,20,14,"MaulerPuff2",1)
		R036 K 1 A_SetPitch(pitch-1.5)
		R036 KKK 1 Bright A_SetPitch(pitch+0.5)
		R036 L 3 Bright A_Light1
		R036 M 4 A_Light2
		R036 N 4 A_Light0
		R036 A 4 A_CheckReload
		R036 A 18
		Goto Ready
	Fire2:
		TNT1 A 0 A_PlaySound("reilsss/weapons/maulerfire", CHAN_WEAPON, 1.0, 0)
		R036 F 10
		R036 HIJF 4 A_Light1
		TNT1 A 0 A_Firecustommissile("CheapAlert2",0,0,0,0)
		R036 F 20 
		TNT1 AAAAAAA 0 A_FireCustomMissile("AmmoUser",0,1,0,0)
		R036 O 0 Bright A_FireCustomMissile("FMaulerTorpedo", 0, 4, 3, 0) // see MaulerTorpedo
		R036 OO 1 A_SetPitch(pitch-1.5)
		R036 O 0 Bright A_Light2
		R036 OOPPPP 1 Bright A_SetPitch(pitch+0.5)
		R036 Q 4 A_Light0
		R036 R 7 A_ReFire
		R036 F 4
		R036 F 10
		Goto Ready
	AltFire:
		BFGN E 0 A_JumpIfInventory("CrawlerModeChecker",1,"AltFire2")
		TNT1 A 0 A_GiveInventory("CrawlerModeChecker",1)
		TNT1 A 0 A_StopSound(6)
		R036 A 6 A_PlaySound("reilsss/weapons/hissidle1", 8, 1.0, 0)
		R036 GHIJ 3
		Goto Ready
	AltFire2: 
		TNT1 A 0 A_TakeInventory("CrawlerModeChecker",20) 
		TNT1 A 0 A_StopSound(6)
		R036 A 6 A_PlaySound("reilsss/weapons/hissidle1", 8, 1.0, 0)
		R036 BCDE 3
		Goto Ready
	}
}

Actor CrawlerModeChecker : Inventory
{
	Inventory.Amount 0
	Inventory.MaxAmount 3
}

Actor FMaulerTorpedo : MaulerTorpedo replaces MaulerTorpedo
{
	var int user_angle;
	RenderStyle Translucent
	Alpha 0.77
	Radius 8
	Height 10
	SeeSound "none"
	DeathSound "reilsss/weapons/mauleraltexplosion"
	Damage 50 
	DamageType "PlasmaDisint"
	States
	{
	Spawn:
		TORP A 0 A_SetUserVar("user_angle",0)
		TORP AABBCCDD 2 Bright A_SpawnItemEx("MaulerTorpTrail",0,0,0,0,0,0,0,32)
		Loop
	Death:
		THIT AB 2 Bright
	Sprayer:
		THIT C 0 A_CustomMissile("MaulerTorpedoWave2",0,0,user_angle,6,0)
		THIT C 0 A_SetUserVar("user_angle",user_angle+9)
		THIT C 0 A_JumpIf(user_angle>=360,1)
		Loop
		THIT CDE 2 Bright
		Stop
	}
}

Actor MaulerTorpTrail
{
	+NOINTERACTION
	Scale 0.7
	RenderStyle Translucent
	Alpha 0.6
	States
	{
	Spawn:
		TORP ABCD 4 Bright A_FadeOut
		Loop
	}
}

Actor MaulerTorpedoWave2
{
	Speed 32
	Radius 13
	Height 13
	Damage 10
	Projectile
	+RIPPER
	RipperLevel 2
	+BLOODLESSIMPACT
	+STEPMISSILE
	DamageType "PlasmaDisint"
	MaxStepHeight 48
	RenderStyle Translucent
	Alpha 0.5
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_SpawnItemEx("MaulerTorpWavFx",0,0,0,0,0,0,0,32)
		TNT1 A 0 A_Explode(5,64,0)
		TWAV A 1 Bright A_FadeOut(0.02)
		Loop
	}
}

Actor MaulerTorpWavFx
{
	PROJECTILE
	+NOINTERACTION
	Damage 0
	RenderStyle Translucent
	Alpha 0.4
	Scale 0.75
	States
	{
	Spawn:
		TWAV A 1 Bright A_FadeOut(0.02)
		Wait
	}
}
	

Actor MaulerPuff2
{
	+NOBLOCKMAP
	+NOGRAVITY
	+PUFFONACTORS
	RenderStyle None
	Scale 0.5
	DamageType "PlasmaDisint"
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_SpawnItemEx("MaulerPuffExtra",0,0,0,0,0,0,0,32)
		MPUF AB 3
		TNT1 A 0 A_SpawnItemEx("MaulerPuffExtra2",0,0,0,0,0,0,0,32)
		POW1 AABBCCDDEE 1 A_fadeOut
		Wait
	}
}

Actor MaulerPuffExtra
{
	+NOINTERACTION
	Scale 0.15
	RenderStyle Add
	Translation "112:127=176:191"
	//Alpha 0.9
	States
	{
	Spawn:
		SHOK ABCDEFGHIJKLMNOPQR 1 Bright A_FadeOut(0.06)
		Stop
	}
}

Actor MaulerPuffExtra2 : MaulerPuffExtra
{
	Scale 0.19
	Translation "112:127=80:95"
}

Actor CrawlerDrop : CustomInventory
{
	Inventory.MaxAmount 1
	States
	{
	Use:
		TNT1 A 0
		TNT1 A 0 A_StopSound(6)
		TNT1 A 0 A_SpawnItemEx("DroppedCrawler",0,0,32,8,0,0,0,32,0)
		Stop
	}
}

Actor DroppedCrawler
{
	Radius 16
	Height 20
	Scale 0.475
	States
	{
	Spawn:
		R036 S 15
		TNT1 A 0 A_SpawnItemEx("AEoDCrawlerNoAmmo",0,0,0,0,0,0,0,48,0)
		Stop
	}
}

Actor AEoDCrawlerNoAmmo : AEoDCrawlerItem
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL
	Scale 0.475
	Inventory.Amount 1
	Inventory.PickupMessage "You picked up the Crawler"
	Inventory.PickupSound "reilsss/weappickup/bfgs"
	States
	{
	Spawn:
		R036 S -1
		Loop
	Pickup:
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",9) <= 0,"Nothing")
		TNT1 A 0 A_JumpIfInventory("AECell",50,"Ammo")
		TNT1 A 0 A_GiveInventory("Weapon9Count",1)
		TNT1 A 0 A_GiveInventory("CrawlerDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDCrawler",1)
		TNT1 A 0 A_TakeInventory("AECell",50)
		TNT1 A 0 	
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDCrawler",1,"Ammo")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		TNT1 A 0 ACS_NamedExecute("s798",0,9,0,0)
		Fail
	Ammo:
		TNT1 A 0 A_TakeInventory("AECell",50)
		TNT1 A 0 A_JumpIfInventory("AEoDCrawler",1,2)
		TNT1 A 0 A_GiveInventory("Weapon9Count",1)
		TNT1 A 0 A_GiveInventory("CrawlerDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDCrawler",1)
		Stop
	}
}

//==================================================================================
//==================================================================================

//==================================================================================
//==================================================================================

Actor AEoDPhotonCannonItem : CustomInventory 6110
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL
	Scale 0.25 
	Inventory.Amount 1
	Inventory.PickupMessage "You picked up the Photon ReActor Cannon"
	Inventory.PickupSound "reilsss/weappickup/ligthinggun"
	States
	{
	Spawn:
		SNGU A -1
		Loop
	Pickup:
		TNT1 A 0 A_JumpIfInventory("AEoDPhotonCannon",1,"Ammo")
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",9) <= 0,"Nothing")
		TNT1 A 0 A_GiveInventory("Weapon9Count",1)
		TNT1 A 0 A_GiveInventory("PhotonCannonDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDPhotonCannon",1)
		TNT1 A 0 	
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDPhotonCannon",1,"Ammo")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		TNT1 A 0 ACS_NamedExecute("s798",0,9,0,0)
		Fail
	Ammo:
		TNT1 A 0 A_GiveInventory("AEoDPhotonCannon",1)
		Stop
	}
}

Actor AEoDPhotonCannon : Weapon // 6110
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL
	+WEAPON.CHEATNOTWEAPON
	Weapon.AmmoType1 "PlasmaRod"
	Weapon.AmmoType2 "PlasmaRod"
	Weapon.AmmoGive1 40
	Weapon.AmmoUse1 20
	Weapon.AmmoUse2 80		//because is a bosskiller -DBT
	Weapon.SelectionOrder 11995
	Inventory.PickupMessage "You picked up the Photon ReActor Cannon"
	Inventory.PickupSound "reilsss/weappickup/ligthinggun"
	Weapon.upsound "weapons/plasma/draw"
	Scale 0.25
	Tag "Photon cannon"
	States
	{
	Spawn:
		SNGU A 3
		Loop
	Deselect:
		SNGU B 0 A_StopSound(6)
		TNT1 A 0 	
		SNGU B 1 A_Lower
		TNT1 AA 0 A_Lower
		Goto Deselect+1
	Select:
		TNT1 A 0 	
		SNGU B 1 A_Raise
		TNT1 AA 0 A_Raise
		Loop
	Ready:
		TNT1 A 0 A_PlaySound("reilsss/weapons/railgunidle1", 6, 1.0, 1)
		SNGU BBBBBB 1 A_WeaponReady
		Goto Ready+1
	Fire:
		SNGU B 6 Bright A_PlaySound("reilsss/weapons/photonreactorfire", CHAN_WEAPON, 1.0, 0)
		SNGU B 10 Bright
		SNGU B 8 Bright
		SNGU B 8 Bright
		TNT1 B 0 A_Recoil(5)
		TNT1 B 0 A_Light2
		SNGU B 0 A_GunFlash
		SNGU B 0 Bright A_FireCustomMissile("PhotonReactorCannonShot",0,1,10,0)
		SNGU BB 1 A_SetPitch(pitch-2.5)
		TNT1 A 0 A_SetBlend("GREEN",0.2,10)
		TNT1 A 0 A_Light0
		SNGU BBBBB 1 Bright A_SetPitch(pitch+1)
		SNGU B 12 Bright
		TNT1 A 0 A_ReFire
		Goto Ready
	AltFire:
		SNGU C 3 Bright A_PlaySound("reilsss/weapons/protoncannonaltcharge", CHAN_WEAPON, 1.0, 0)
		SNGU DEFGHI 3 Bright
		SNGU J 20 Bright
		SNGU K 4 Bright
		SNGU LM 3 Bright
		SNGU NOJ 2 Bright
		SNGU KLMNO 1 Bright A_Light1
		TNT1 A 0 A_Recoil(16)
		TNT1 A 0 A_Light2
		SNGU J 0 A_GunFlash
		SNGU J 0 Bright A_PlaySound("reilsss/weapons/protoncannonaltfire", CHAN_WEAPON, 1.0, 0)
		SNGU J 0 Bright A_FireCustomMissile("PhotonReactorCannonAltShot1",0,1,5,2)
		SNGU J 1 Bright A_SetPitch(pitch-8)
		TNT1 A 0 A_SetBlend("GREEN",0.5,25)
		TNT1 A 0 A_Light0
		SNGU KLMNOJKL 1 A_SetPitch(pitch+1)
		SNGU MNOJKLMNOJKLMN 1 Bright
		SNGU O 0 A_JumpIfNoAmmo(2)
		SNGU O 1 A_ReFire
		SNGU KLMNO 1 Bright
		SNGU JKL 2 Bright
		SNGU MN 3 Bright
		SNGU O 4 Bright
		SNGU J 8 Bright
		SNGU IHGFEDC 3 Bright
		SNGU B 8
		Goto Ready
	AltHold:
		SNGU JKLMNOJKLMNOJKLMNOJ 1 Bright
		SNGU KLMNO 1 Bright A_Light1
		TNT1 A 0 A_Recoil(16)
		TNT1 A 0 A_Light2
		SNGU J 0 A_GunFlash
		SNGU J 0 Bright A_PlaySound("reilsss/weapons/protoncannonaltfire", CHAN_WEAPON, 1.0, 0)
		SNGU J 0 Bright A_FireCustomMissile("PhotonReactorCannonAltShot1",0,1,5,5)
		SNGU J 1 Bright A_SetPitch(pitch-8)
		TNT1 A 0 A_SetBlend("GREEN",0.5,25)
		TNT1 A 0 A_Light0
		SNGU KLMNOJKL 1 A_SetPitch(pitch+1)
		SNGU MNOJKLMNOJKLMN 1 Bright
		SNGU O 0 A_JumpIfNoAmmo(2)
		SNGU O 1 A_ReFire
		SNGU KLMNO 1 Bright
		SNGU JKL 2 Bright
		SNGU MN 3 Bright
		SNGU O 4 Bright
		SNGU J 8 Bright
		SNGU IHGFEDC 3 Bright
		SNGU B 8
		Goto Ready
	Flash:
		SNGF A 5 A_Light1
		TNT1 A 0 A_Light0
		Stop
	AltFlash:
		SNGF AB 1 A_Light2
		SNGF CD 1 A_Light1
		SNGF EF 1 A_Light0
		Stop
	}
}

Actor PhotonReactorCannonShot
{
	PROJECTILE
	+FORCERADIUSDMG
	+EXTREMEDEATH
	Radius 6
	Height 8
	Speed 35
	Damage 45
	Obituary "%o was destroyed by a Photon ReActor Cannon shot."
	DeathSound "reilsss/weapons/photonreactorboom"
	DamageType "PlasmaDisint"
	RenderStyle Add
	Alpha 1.00
	States
	{
	Spawn:
		R074 N 1 A_Explode(64,96,0)
		R074 N 0 A_CustomMissile("PhotonReactorCannonShotTrail",0,0,180,2)
		R074 N 1 A_Explode(64,96,0)
		Goto Spawn+1
	Death:
		TNT1 A 0 Bright A_Explode(256,96,0)
		TNT1 AAAAAAAAAAAAAA 0 A_SpawnItemEx("PhotonReactorCannonSpark",0,0,0,frandom(1,3),0,random(-3,3),random(1,360),32)
		TNT1 A 4 A_SpawnItemEx("PhotonReactorCannonExplosion",0,0,0,0,0,0,0,32)
		Stop
	}
}

Actor PhotonReactorCannonSpark
{
	Translation "0:255=%[0,0,0]:[0.2,1.2,0.2]"
	+NOINTERACTION
	Scale 0.1
	RenderStyle Add
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_Jump(256,"S1","S2","S3","S4","S5","S6","S7","S8")
	S1:	X079 A 0	
	Goto Perform
	S2:	X079 B 0	
	Goto Perform
	S3:	X079 C 0	
	Goto Perform
	S4:	X079 D 0	
	Goto Perform
	S5:	X079 E 0	
	Goto Perform
	S6:	X079 F 0	
	Goto Perform
	S7:	X079 G 0	
	Goto Perform
	S8: X079 H 0	
	Goto Perform
	Perform:
		"####" "#" 1 Bright A_SetScale(ScaleX+0.01)
		"####" "#" 0 A_FadeOut(0.03)
		Loop
	}
}

Actor PhotonReactorCannonShotTrail
{
	var int user_count;
	+FORCEXYBILLBOARD
	+NOINTERACTION
	RenderStyle Add
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_SetUserVar("user_count",20)
	SizeLoop:
		TNT1 A 0 A_SetScale((user_count*0.01))
		TNT1 A 0 A_JumpIf(user_count>=150,"LoopEnd") 
		R075 Q 1 Bright A_FadeOut(0.04)
		TNT1 A 0 A_SetUserVar("user_count",user_count+7)
		Loop	  
	LoopEnd:
		R075 Q 1 Bright A_FadeOut(0.1)
		Wait
	}
}

Actor PhotonReactorCannonExplosion
{
	var int user_count;
	+FORCEXYBILLBOARD
	+NOINTERACTION
	RenderStyle Add
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_SetUserVar("user_count",20)
	SizeLoop:
		TNT1 A 0 A_SetScale((user_count*0.01))
		TNT1 A 0 A_JumpIf(user_count>=95,"LoopEnd") 
		X060 B 2 Bright A_FadeOut(0.06)
		TNT1 A 0 A_SetUserVar("user_count",user_count+5)
		Loop	  
	LoopEnd:
		X060 B 2 Bright A_FadeOut(0.1)
		Wait
	}
}

//-----------------------------------------------------------
Actor PhotonReactorCannonAltShot1
{
	var int user_angle;
	PROJECTILE
	+FORCERADIUSDMG
	+EXTREMEDEATH
	Radius 6
	Height 12
	Speed 25
	Damage 50
	Obituary "%o was destroyed by a Photon ReActor Cannon shot."
	DeathSound "reilsss/weapons/photonreactorcrash"
	DamageType "PlasmaDisint"
	RenderStyle Add
	Alpha 1.00
	Scale 0.7
	States
	{
	Spawn:
		TNT1 A 0
		X018 A 1 Bright A_SpawnItemEx("PhotonCannonAltTrailInwards",0,0,0,0,0,0,0,32)
		X018 B 1 Bright A_SpawnItemEx("PhotonCannonAltTrailOutwards",0,0,0,0,0,0,0,32)
		X018 C 1 Bright A_SpawnItemEx("PhotonCannonAltTrailInwards",0,0,0,0,0,0,0,32)
		X018 D 1 Bright A_SpawnItemEx("PhotonCannonAltTrailOutwards",0,0,0,0,0,0,0,32)
		X018 E 1 Bright A_SpawnItemEx("PhotonCannonAltTrailInwards",0,0,0,0,0,0,0,32)
		X018 F 1 Bright A_SpawnItemEx("PhotonCannonAltTrailOutwards",0,0,0,0,0,0,0,32)
		X018 G 1 Bright A_SpawnItemEx("PhotonCannonAltTrailInwards",0,0,0,0,0,0,0,32)
		X018 H 1 Bright A_SpawnItemEx("PhotonCannonAltTrailOutwards",0,0,0,0,0,0,0,32)
		X018 I 1 Bright A_SpawnItemEx("PhotonCannonAltTrailInwards",0,0,0,0,0,0,0,32)
		X018 J 1 Bright A_SpawnItemEx("PhotonCannonAltTrailOutwards",0,0,0,0,0,0,0,32)
		X018 K 1 Bright A_SpawnItemEx("PhotonCannonAltTrailInwards",0,0,0,0,0,0,0,32)
		X018 L 1 Bright A_SpawnItemEx("PhotonCannonAltTrailOutwards",0,0,0,0,0,0,0,32)
		X018 M 1 Bright A_SpawnItemEx("PhotonCannonAltTrailInwards",0,0,0,0,0,0,0,32)
		X018 N 1 Bright A_SpawnItemEx("PhotonCannonAltTrailOutwards",0,0,0,0,0,0,0,32)
		X018 O 1 Bright A_SpawnItemEx("PhotonCannonAltTrailInwards",0,0,0,0,0,0,0,32)
		X018 P 1 Bright A_SpawnItemEx("PhotonCannonAltTrailOutwards",0,0,0,0,0,0,0,32)
		X018 Q 1 Bright A_SpawnItemEx("PhotonCannonAltTrailInwards",0,0,0,0,0,0,0,32)
		X018 R 1 Bright A_SpawnItemEx("PhotonCannonAltTrailOutwards",0,0,0,0,0,0,0,32)
		X018 S 1 Bright A_SpawnItemEx("PhotonCannonAltTrailInwards",0,0,0,0,0,0,0,32)
		X018 T 1 Bright A_SpawnItemEx("PhotonCannonAltTrailOutwards",0,0,0,0,0,0,0,32)
		X018 U 1 Bright A_SpawnItemEx("PhotonCannonAltTrailInwards",0,0,0,0,0,0,0,32)
		X018 V 1 Bright A_SpawnItemEx("PhotonCannonAltTrailOutwards",0,0,0,0,0,0,0,32)
		X018 W 1 Bright A_SpawnItemEx("PhotonCannonAltTrailInwards",0,0,0,0,0,0,0,32)
		X018 X 1 Bright A_SpawnItemEx("PhotonCannonAltTrailOutwards",0,0,0,0,0,0,0,32)
		Loop
	Death:
		R074 A 0 A_Explode(400,128,0)
		TNT1 A 0 A_SetUserVar("user_angle",0)
	Looper1:
		TNT1 A 0 A_JumpIf(user_angle>=360,"EndLoop1")
		R074 A 0 A_CustomMissile("PhotonReactorCannonAltShot2",0,0,user_angle,6)
		TNT1 A 0 A_SetUserVar("user_angle",user_angle+15)
		Loop
	EndLoop1:
		TNT1 A 5 A_SetUserVar("user_angle",0)
	Looper2:
		TNT1 A 0 A_JumpIf(user_angle>=360,"EndLoop2")
		TNT1 A 0 A_CustomMissile("PhotonReactorCannonAltShot3",0,0,user_angle,6)
		TNT1 A 0 A_SetUserVar("user_angle",user_angle+15)
		Loop
	EndLoop2:
		TNT1 A 10
		Stop
	}
}

Actor PhotonCannonAltTrailInwards
{
	var int user_count;
	+FORCEXYBILLBOARD
	+NOINTERACTION
	RenderStyle Add
	Alpha 1.0
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_SetUserVar("user_count",75)
	SizeLoop:
		TNT1 A 0 A_SetScale((user_count*0.01))
		TNT1 A 0 A_JumpIf(user_count<=0.05,"LoopEnd") 
		R075 Q 1 Bright 
		TNT1 A 0 A_SetUserVar("user_count",user_count-5)
		Loop	  
	LoopEnd:
		R075 Q 1 Bright A_FadeOut(0.1)
		Wait
	}
}

Actor PhotonCannonAltTrailOutwards
{
	var int user_count;
	+FORCEXYBILLBOARD
	+NOINTERACTION
	RenderStyle Add
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_SetUserVar("user_count",20)
	SizeLoop:
		TNT1 A 0 A_SetScale((user_count*0.01))
		TNT1 A 0 A_JumpIf(user_count>=150,"LoopEnd") 
		R075 Q 1 Bright A_FadeOut(0.06)
		TNT1 A 0 A_SetUserVar("user_count",user_count+8)
		Loop	  
	LoopEnd:
		R075 Q 1 Bright A_FadeOut(0.1)
		Wait
	}
}

Actor PhotonReactorCannonAltShot2
{
	PROJECTILE
	+FORCERADIUSDMG
	Radius 6
	Height 8
	Speed 35
	Damage 20
	Obituary "%o was destroyed by a Photon ReActor Cannon shot."
	DeathSound "reilsss/weapons/photonreactorboom"
	RenderStyle Add
	DamageType "PlasmaDisint"
	Alpha 1.00
	States
	{
	Spawn:
		TNT1 A 0
		R074 N 1 A_Explode(32,80,0)
		R074 N 0 A_CustomMissile("PhotonReactorCannonShotTrail",0,0,180,2)
		R074 N 1 A_Explode(32,80,0)
		R074 N 0 A_CustomMissile("PhotonReactorCannonShotTrail",0,0,180,2)
		Loop
	Death:
		TNT1 A 0 Bright A_Explode(64,128,0)
		TNT1 A 10 A_SpawnItemEx("PhotonReactorCannonExplosionAlt",0,0,0,0,0,0,0,32)
		Stop
	}
}

Actor PhotonReactorCannonExplosionAlt
{
	var int user_count;
	+FORCEXYBILLBOARD
	+NOINTERACTION
	RenderStyle Add
	Alpha 1.0
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_SetUserVar("user_count",20)
	SizeLoop:
		TNT1 A 0 A_SetScale((user_count*0.01))
		TNT1 A 0 A_JumpIf(user_count>=200,"LoopEnd") 
		X060 A 1 Bright A_FadeOut(0.03)
		TNT1 A 0 A_SetUserVar("user_count",user_count+5)
		Loop	  
	LoopEnd:
		X060 A 2 Bright A_FadeOut(0.1)
		Wait
	}
}

Actor PhotonReactorCannonAltShot3
{
	PROJECTILE
	+FORCERADIUSDMG
	Radius 6
	Height 8
	Speed 35
	Damage 5
	Obituary "%o was destroyed by a Photon ReActor Cannon shot."
	DeathSound "reilsss/weapons/photonreactorboom"
	DamageType "PlasmaDisint"
	RenderStyle Add
	Alpha 1
	Scale 0.3
	States
	{
	Spawn:
		X018 ABCDEWFGHIJKLMNOPQRSTUVWXY 2 Bright
		Loop
	Death:
		R073 A 0 A_Explode(32,64,0)
		TNT1 A 6 A_SpawnItemEx("PhotonReactorCannonShotTrail",0,0,0,0,0,0,0,32)
		TNT1 A 6 A_SpawnItemEx("PhotonReactorCannonShotTrail",0,0,0,0,0,0,0,32)
		Stop
	}
}

Actor PhotonReactorCannonAltShotTrail
{
	Projectile
	+NOINTERACTION
	Radius 6
	Height 8
	Speed 15
	RenderStyle Translucent
	Alpha 0.4
	States
	{
	Spawn:
		R075 QQQQRRRRSSSSTTTTUUUU 1 Bright A_FadeOut(0.02)
		Stop
	}
}

Actor PhotonCannonDrop : CustomInventory
{
	Inventory.MaxAmount 1
	States
	{
	Use:
		TNT1 A 0
		TNT1 A 0 A_StopSound(6)
		TNT1 A 0 A_SpawnItemEx("DroppedPhotonCannon",0,0,32,8,0,0,0,32,0)
		Stop
	}
}

Actor DroppedPhotonCannon
{
	Radius 16
	Height 20
	Scale 0.25
	States
	{
	Spawn:
		SNGU A 15
		TNT1 A 0 A_SpawnItemEx("AEoDPhotonCannonNoAmmo",0,0,0,0,0,0,0,48,0)
		Stop
	}
}

Actor AEoDPhotonCannonNoAmmo : AEoDPhotonCannonItem
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL
	Scale 0.25
	Inventory.Amount 1
	Inventory.PickupMessage "You picked up the Photon ReActor Cannon"
	Inventory.PickupSound "reilsss/weappickup/ligthinggun"
	States
	{
	Spawn:
		SNGU A -1
		Loop
	Pickup:
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",9) <= 0,"Nothing")
		TNT1 A 0 A_JumpIfInventory("PlasmaRod",40,"Ammo")
		TNT1 A 0 A_GiveInventory("Weapon9Count",1)
		TNT1 A 0 A_GiveInventory("PhotonCannonDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDPhotonCannon",1)
		TNT1 A 0 A_TakeInventory("PlasmaRod",40)
		TNT1 A 0 	
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDPhotonCannon",1,"Ammo")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		TNT1 A 0 ACS_NamedExecute("s798",0,9,0,0)
		Fail
	Ammo:
		TNT1 A 0 A_TakeInventory("PlasmaRod",40)
		TNT1 A 0 A_JumpIfInventory("AEoDPhotonCannon",1,2)
		TNT1 A 0 A_GiveInventory("Weapon9Count",1)
		TNT1 A 0 A_GiveInventory("PhotonCannonDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDPhotonCannon",1)
		Stop
	}
}

//==================================================================================
//==================================================================================

//==================================================================================
//==================================================================================

Actor AEoDProteusDynamoItem : CustomInventory 6109
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL
	Inventory.Amount 1
	Inventory.PickupSound "reilsss/weappickup/ligthinggun"
	Inventory.PickupMessage "You pilfered a Proteus Dynamo!"
	Scale 0.17
	States
	{
	Spawn:
		R050 A -1
		Loop
	Pickup:
		TNT1 A 0 A_JumpIfInventory("AEoDProteusDynamo",1,"Ammo")
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",9) <= 0,"Nothing")
		TNT1 A 0 A_GiveInventory("Weapon9Count",1)
		TNT1 A 0 A_GiveInventory("ProteusDynamoDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDProteusDynamo",1)
		TNT1 A 0 	
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDProteusDynamo",1,"Ammo")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		TNT1 A 0 ACS_NamedExecute("s798",0,9,0,0)
		Fail
	Ammo:
		TNT1 A 0 A_GiveInventory("AEoDProteusDynamo",1)
		Stop
	}
}

Actor AEoDProteusDynamo : Weapon // 6109	// AEoDThunderstorm
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL
	+WEAPON.CHEATNOTWEAPON
	Weapon.AmmoType1 "AECell"
	Weapon.AmmoType2 "AECell"
	Weapon.AmmoGive1 60
	Weapon.AmmoUse1 10
	Weapon.AmmoUse2 30
	Weapon.SelectionOrder 14987
	Inventory.PickupMessage "You pilfered a Proteus Dynamo!"
	Inventory.PickupSound "reilsss/weappickup/ligthinggun"
	Weapon.upsound "weapons/plasma/draw"
	Scale 0.17
	Tag "Proteus Dynamo"
	States
	{
	Spawn:
		R050 A -1
		Loop
	Deselect:
		TNT1 A 0 A_StopSound(6)
		TNT1 A 0 	
		R050 B 1 A_Lower
		TNT1 AA 0 A_Lower
		Goto Deselect+1
	Select:
		R050 B 1 A_Raise
		TNT1 A 0 	
		TNT1 AA 0 A_Raise
		Loop
	Ready:
		TNT1 A 0 A_PlaySound("reilsss/weapons/electricidle2", 6, 0.7, 1)
		R050 B 1 A_WeaponReady
		Loop
	Fire:
		TNT1 A 0 A_PlaySound("reilsss/weapons/electroidles", 8, 1.0, 0)
		R050 B 0 A_SetPitch(pitch+0.3) R050 B 2 A_SetAngle(angle+frandom(-0.4,0.4))
		R050 B 0 A_SetPitch(pitch-0.3) R050 B 2 A_SetAngle(angle+frandom(-0.4,0.4))
		TNT1 A 0 A_PlaySound("reilsss/weapons/ligthingcannonthunder", 7, 1.0, 0)
		R050 B 0 A_SetPitch(pitch+0.3) R050 B 2 A_SetAngle(angle+frandom(-0.4,0.4))
		R050 B 0 A_SetPitch(pitch-0.3) R050 B 2 A_SetAngle(angle+frandom(-0.4,0.4))
		R050 C 0 A_SetPitch(pitch+0.3) R050 C 2 A_SetAngle(angle+frandom(-0.4,0.4))
		R050 D 0 A_SetPitch(pitch-0.3) R050 D 2 A_SetAngle(angle+frandom(-0.4,0.4))
		TNT1 A 0 A_PlaySound("reilsss/weapons/thundercannonfire", CHAN_WEAPON, 1.0, 0)
		TNT1 A 0 A_Recoil(2.0)
		TNT1 A 0 A_SetBlend("White",0.2,10)
		R050 E 0 Bright A_FireCustomMissile("ChainLightning", 0, 1, 10, 8)
		R050 E 0 Bright A_FireCustomMissile("CheapAlert",0,0)
		R050 E 1 Bright A_SetPitch(pitch-4)
		R050 EE 1 Bright A_SetPitch(pitch+0.5)
		R050 F 0 Bright A_Light1
		R050 FFF 1 Bright A_SetPitch(pitch+0.5)
		R050 G 0 A_Light2
		R050 GGG 1 Bright A_SetPitch(pitch+0.5)
		R050 H 3 A_Light0
		R050 I 3
		R050 B 10
		Goto Ready
	AltFire:
		TNT1 A 0 A_PlaySound("reilsss/weapons/electroidles", 8, 1.0, 0)
		R050 B 0 A_SetPitch(pitch+0.3) R050 B 2 A_SetAngle(angle+frandom(-0.4,0.4))
		R050 B 0 A_SetPitch(pitch-0.3) R050 B 2 A_SetAngle(angle+frandom(-0.4,0.4))
		R050 B 0 A_SetPitch(pitch+0.3) R050 B 2 A_SetAngle(angle+frandom(-0.4,0.4))
		R050 B 0 A_SetPitch(pitch-0.3) R050 B 2 A_SetAngle(angle+frandom(-0.4,0.4))
		TNT1 A 0 A_PlaySound("reilsss/weapons/ligthingcannonthunder", 7, 1.0, 0)
		R050 B 0 A_SetPitch(pitch+0.3) R050 B 2 A_SetAngle(angle+frandom(-0.4,0.4))
		R050 B 0 A_SetPitch(pitch-0.3) R050 B 2 A_SetAngle(angle+frandom(-0.4,0.4))
		R050 B 0 A_SetPitch(pitch+0.3) R050 C 2 A_SetAngle(angle+frandom(-0.4,0.4))
		R050 B 0 A_SetPitch(pitch-0.3) R050 D 2 A_SetAngle(angle+frandom(-0.4,0.4))
		TNT1 A 0 A_PlaySound("reilsss/weapons/thundercannonaltfire", CHAN_WEAPON, 1.0, 0)
		TNT1 A 0 A_Recoil(2.5)
		TNT1 A 0 A_SetBlend("White",0.2,10)
		R050 E 0 Bright A_FireCustomMissile("Thunderlightning", 0, 1, 10, 8)
		R050 E 0 Bright A_FireCustomMissile("CheapAlert",0,0)
		R050 E 1 Bright A_SetPitch(pitch-4)
		R050 EE 1 Bright A_SetPitch(pitch+0.5)
		R050 F 0 Bright A_Light1
		R050 FFF 1 Bright A_SetPitch(pitch+0.5)
		R050 G 0 A_Light2
		R050 GGG 1 Bright A_SetPitch(pitch+0.5)
		R050 H 3 A_Light0
		R050 I 3
		R050 B 10
		Goto Ready
	}
}



Actor ChainLightning
{
	var int user_life;
	var int user_x;
	Projectile
	+SEEKERMISSILE
	+FORCERADIUSDMG
	+DONTREFLECT
	+SKYEXPLODE
	+CANBOUNCEWATER
	BounceCount 30
	BounceFactor 1
	WallBounceFactor 1
	Radius 4
	Height 8
	Speed 40
	Damage 8
	DamageType "Electric"
	States
	{
	Spawn:
		TNT1 A 0
	Seek:
		TNT1 A 0 A_JumpIf(user_life>=35,"Death")
		TNT1 A 0 A_SeekerMissile(90,90,1,256)
		TNT1 A 0 A_FaceTracer
		TNT1 A 1 A_SpawnItemEx("ProteusDynamoMainTrail",0,0,0,0,0,0,0,32)
		TNT1 A 0 A_JumpIfTargetInLOS("AllowBounce",0,JLOSF_PROJECTILE|JLOSF_DEADNOJUMP|JLOSF_NOSIGHT)
		TNT1 A 0 A_ChangeFlag("BOUNCEONFLOORS",0)
		TNT1 A 0 A_ChangeFlag("BOUNCEONWALLS",0)
		TNT1 A 0 A_ChangeFlag("BOUNCEONCEILINGS",0)
		TNT1 A 0 A_ChangeFlag("CANBOUNCEWATER",0)
		TNT1 A 0 A_ChangeFlag("SKYEXPLODE",0)
		TNT1 A 0 A_ChangeFlag("ALLOWBOUNCEONACTORS",0)
		TNT1 A 0 A_ChangeFlag("BOUNCEONACTORS",0)
		Loop
	AllowBounce:
		TNT1 A 0 A_JumpIfTracerCloser(256,1)
		Goto AllowBounce+1
		TNT1 A 0 A_SetUserVar("user_life",user_life+1)
		TNT1 A 0 A_ChangeFlag("BOUNCEONFLOORS",1)
		TNT1 A 0 A_ChangeFlag("BOUNCEONWALLS",1)
		TNT1 A 0 A_ChangeFlag("BOUNCEONCEILINGS",1)
		TNT1 A 0 A_ChangeFlag("CANBOUNCEWATER",1)
		TNT1 A 0 A_ChangeFlag("SKYEXPLODE",1)
		TNT1 A 0 A_ChangeFlag("ALLOWBOUNCEONACTORS",1)
		TNT1 A 0 A_ChangeFlag("BOUNCEONACTORS",1)
		Goto Seek
	Death:
		TNT1 A 0 A_Stop
		WRPW A 1 Bright
		Stop
	}
}

Actor ChainLCheck : Inventory { Inventory.MaxAmount 30 } 

Actor Thunderlightning
{
	Projectile
	Speed 46
	Damage 40
	Radius 4
	Height 5
	DeathSound "reilsss/weapons/thunderexplosion"
	DamageType "Electric"
	States
	{
	Spawn:
		TNT1 A 1 A_SpawnItem("ProteusDynamoMainTrail",1)
		Loop
	Death:
		TNT1 AAAAA 0 A_SpawnItemEx("TBRailShooter",0,0,0,1,1,1,random(1,360),33)
		TNT1 AAAAAAAAAAAA 0 A_CustomRailgun(random(60,340),0,none,"FF FF FF",1,0,3,"ElectricPuff",100,100,0, 10,1.0,0.0)
		ZAP7 AABBCCDDEE 1 Bright A_FadeOut
		ZAP7 AABBCCDDEE 1 Bright A_FadeOut
		ZAP7 AABBCCDDEE 1 Bright A_FadeOut
		ZAP7 AABBCCDDEE 1 Bright A_FadeOut
		ZAP7 E 1 A_FadeOut
		Stop
	}
}

Actor ProteusDynamoMainTrail
{
	Projectile
	Speed 0
	Damage 0
	Radius 1
	Height 1
	Scale 0.35
	+NOCLIP
	RenderStyle Add
	Translation "0:255=%[0,0,0]:[0.7,0.7,1.3]"
	States
	{
	Spawn:
		TNT1 A 0 
		TNT1 A 0 A_Jump(220,2,3,4,5,6,7)
	Looper:
		TNT1 A 0 A_SpawnItemEx("PsychLightningSpark",0,0,0,frandom(0.3,2.0),0,frandom(1.5,-1.5),random(0,359),32,128)
		HSPL ABCDE 2 Bright A_FadeOut(0.07)
		TNT1 A 0 A_SpawnItemEx("PsychLightningSpark",0,0,0,frandom(0.3,2.0),0,frandom(1.5,-1.5),random(0,359),32,128)
		HSPL FGHI 2 Bright A_FadeOut(0.07)
		Loop
	}
}

Actor ThunderBoldSecondFireTrail
{
	Projectile
	Speed 0
	Damage 0
	Radius 1
	Height 1
	Scale 0.4
	DamageType "Electric"
	+NOCLIP
	States
	{
	Spawn:
		TNT1 A 0 A_Jump(170,8)
		ZAP6 ABCABC 3 Bright
		ZAP6 A 1 Bright A_FadeOut
		Wait
		
		TNT1 A 0 A_Jump(128,8)
		ZAP6 BCABCA 3 Bright
		ZAP6 B 1 Bright A_FadeOut
		Wait
		
		ZAP6 CABCAB 3 Bright
		ZAP6 C 1 Bright A_FadeOut
		Wait
	Death:
		TNT1 A 1
		Stop
	}
}

Actor TBRailShooter
{ 
	+FRIENDLY
	MONSTER
	Radius 1
	Height 1
	Speed 0
	+NOGRAVITY
	+NOCLIP
	+LOOKALLAROUND
	+MISSILEMORE
	+MISSILEEVENMORE
	+NOTARGET
	-SOLID
	-SHOOTABLE
	-COUNTKILL
	DamageType "Electric"
	MinMissileChance 0
	RenderStyle None
	ReactionTime 25
	States
	{
		Spawn:
		TNT1 A 0 A_CountDown
		PLAY A 1 A_Look
	See:
		PLAY A 0 A_Chase
	Missile:
		PLAY A 0 A_FaceTarget
		PLAY A 0 A_CustomRailgun(random(60,340),0,none,"FF FF FF",1,10,3,"ElectricPuff")
		Stop
	}
}

Actor ProteusDynamoDrop : CustomInventory
{
	Inventory.MaxAmount 1
	States
	{
	Use:
		TNT1 A 0
		TNT1 A 0 A_StopSound(6)
		TNT1 A 0 A_SpawnItemEx("DroppedProteusDynamo",0,0,32,8,0,0,0,32,0)
		Stop
	}
}

Actor DroppedProteusDynamo
{
	Radius 16
	Height 20
	Scale 0.17
	States
	{
	Spawn:
		R050 A 15
		TNT1 A 0 A_SpawnItemEx("AEoDProteusDynamoNoAmmo",0,0,0,0,0,0,0,48,0)
		Stop
	}
}

Actor AEoDProteusDynamoNoAmmo : AEoDProteusDynamoItem
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL
	Inventory.Amount 1
	Inventory.PickupSound "reilsss/weappickup/ligthinggun"
	Inventory.PickupMessage "You pilfered a Proteus Dynamo!"
	Scale 0.17
	States
	{
	Spawn:
		R050 A -1
		Loop
	Pickup:
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",9) <= 0,"Nothing")
		TNT1 A 0 A_JumpIfInventory("AECell",40,"Ammo")
		TNT1 A 0 A_GiveInventory("Weapon9Count",1)
		TNT1 A 0 A_GiveInventory("ProteusDynamoDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDProteusDynamo",1)
		TNT1 A 0 A_TakeInventory("AECell",40)
		TNT1 A 0 	
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDProteusDynamo",1,"Ammo")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		TNT1 A 0 ACS_NamedExecute("s798",0,9,0,0)
		Fail
	Ammo:
		TNT1 A 0 A_TakeInventory("AECell",40)
		TNT1 A 0 A_JumpIfInventory("AEoDProteusDynamo",1,2)
		TNT1 A 0 A_GiveInventory("Weapon9Count",1)
		TNT1 A 0 A_GiveInventory("ProteusDynamoDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDProteusDynamo",1)
		Stop
	}
}

//==================================================================================
//==================================================================================

//==================================================================================
//==================================================================================

Actor AEoDHellRootItem : CustomInventory 6057
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL
	Inventory.Amount 1
	Inventory.PickupSound "weaponbuild"
	Inventory.PickupMessage "You got the Hellroot gun."
	States
	{
	Spawn:
		INCG Z -1
		Loop
	Pickup:
		TNT1 A 0 A_JumpIfInventory("AEoDHellRoot",1,"Ammo")
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",9) <= 0,"Nothing")
		TNT1 A 0 A_GiveInventory("Weapon9Count",1)
		TNT1 A 0 A_GiveInventory("HellRootDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDHellRoot",1)
		TNT1 A 0 	
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDHellRoot",1,"Ammo")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		TNT1 A 0 ACS_NamedExecute("s798",0,9,0,0)
		Fail
	Ammo:
		TNT1 A 0 A_GiveInventory("AEoDHellRoot",1)
		Stop
	}
}

Actor AEoDHellRoot : Weapon // 6057
{
	Inventory.PickupSound "weaponbuild"
	Inventory.PickupMessage "You got the Hellroot gun."
	weapon.upsound "weapons/draw"
	Obituary "%o was roasted by %k's HellRoot."
	+WEAPON.AMMO_OPTIONAL
	Weapon.AmmoType "GreenMana"
	Weapon.AmmoType2 "RedMana"
	Weapon.AmmoGive1 40
	Weapon.AmmoGive2 10
	Weapon.AmmoUse 15
	Weapon.AmmoUse2 0
	Weapon.SelectionOrder 11800
	+INVENTORY.IGNORESKILL
	+WEAPON.CHEATNOTWEAPON
	+WEAPON.NOALERT
	Tag "Hellroot"
	States
	{
	Spawn:
		INCG Z -1
		Loop
	Deselect:
		TNT1 A 0 	
		INCG A 1 A_Lower
		TNT1 AA 0 A_Lower
		Loop
	Select:
		TNT1 A 0 	
		INCG A 1 A_Raise
		TNT1 AA 0 A_Raise
		Loop
	Ready:
		INCG A 0 A_JumpIfInventory("HellRootCheck",1,"Ready2")
		INCG BCDEDC 3 A_weaponReady
		Goto Ready
	Ready2:
		INCG JKLM 3 A_WeaponReady
		Loop
	AltFire:
		TNT1 A 0 A_JumpIfInventory("HellRootCheck",1,7)
		TNT1 A 0 A_GiveInventory("HellRootCheck",1)
		TNT1 A 0 A_PlayWeaponSound("diablo2/necromancercast/posioncast")
		INCG FGHI 3 
		Goto Ready
		
		TNT1 A 0 A_TakeInventory("HellRootCheck",1)
		TNT1 A 0 A_PlayWeaponSound("diablo2/necromancercast/confuse")
		INCG IHGF 3
		Goto Ready
	Fire:
		TNT1 A 0 A_JumpIfInventory("HellRootCheck",1,"Fire2")
		TNT1 A 0 A_JumpIfInventory("GreenMana",8,"FireSuccesful")
		INCG B 1 A_JumpIfInventory("RedMana",5,"NoMana")
		INCG N 2
		TNT1 A 0 //ACS_NamedExecute("s851",0,50,random(-4,4),0)
		TNT1 A 0 A_SetBlend("Orange",0.3,6)
		TNT1 A 0 A_AlertMonsters
		INCG O 2 A_FireCustomMissile("HellRootNoAmmoShot",0,0,0,0)
		TNT1 A 0 //ACS_NamedExecute("s851",0,-50,random(-4,4),0)
		INCG P 2
		INCG BCDEDC 3
		Goto Ready
	NoMana:
		TNT1 A 0
		Goto AltFire
	FireSuccesful:
		INCG N 2
		TNT1 A 0 
		TNT1 A 0 A_SetBlend("Gray",0.0,18)
		TNT1 A 0 A_PlayWeaponSound("praevus/shot")
		TNT1 A 0 A_FireCustomMissile("HellRootShot1",0,1,0,0)
		INCG O 1 A_SetPitch(pitch-2.5)
		INCG P 2 A_AlertMonsters
		INCG BC 2 A_SetPitch(pitch+1.25)
		INCG C 2
		INCG BCDE 3
		Goto Ready
	Fire2:
		TNT1 A 0 A_JumpIfInventory("RedMana",5,"Fire2Succesful")
		TNT1 A 0 A_TakeInventory("HellRootCheck",1)
		TNT1 A 0 A_PlayWeaponSound("diablo2/necromancercast/confuse")
		INCG IHGF 3
		Goto Ready
	Fire2Succesful:
		INCG QR 3
		TNT1 A 0 A_JumpIfInventory("PowerEconomizer",1,3)
		TNT1 A 0 A_JumpIfInventory("InfiniteAmmo",1,2)
		TNT1 A 0 A_TakeInventory("RedMana",5,1)
		TNT1 A 0 A_SetBlend("Orange",0.3,10)
		TNT1 A 0 A_PlayWeaponSound("ediolon/fireballbig")
		TNT1 A 0 A_AlertMonsters
		TNT1 A 0 A_FireCustomMissile("HellRootShot2",0,0,0,0)
		INCG S 3 A_SetPitch(pitch-6)
		INCG TTTUUU 1 A_SetPitch(pitch+1)
		INCG JKLMJKLM 3
		Goto Ready
	}
}

Actor HellRootCheck : Inventory {}

Actor HellRootShot1
{
	PROJECTILE
	+SEEKERMISSILE
	+FORCERADIUSDMG
	Speed 25
	Damage 30
	Scale 0.35
	Radius 6
	Height 12
	Seesound "whiteballbsee"
	Deathsound "whiteballbdeth"
	RENDERSTYLE ADD
	Alpha 0.75
	DamageType "Holy"
	States
	{
	Spawn:
		PSMM A 1 Bright A_SeekerMissile(25,10,1)	TNT1 A 0 A_SpawnItemEx("HellRootWhiteMainTrailSpawner",0,0,0,0,0,0,0,32)
		PSMM A 1 Bright A_SeekerMissile(25,10,1)	TNT1 A 0 A_SpawnItemEx("HellRootWhiteMainTrailSpawner",0,0,0,0,0,0,0,32)
		PSMM A 1 Bright A_SeekerMissile(25,10,1)	TNT1 A 0 A_SpawnItemEx("HellRootWhiteMainTrailSpawner",0,0,0,0,0,0,0,32)
		PSMM A 1 Bright A_SeekerMissile(25,10,1)	TNT1 A 0 A_SpawnItemEx("HellRootWhiteMainTrailSpawner",0,0,0,0,0,0,0,32)
		PSMM B 1 Bright A_SeekerMissile(25,10,1)	TNT1 A 0 A_SpawnItemEx("HellRootWhiteMainTrailSpawner",0,0,0,0,0,0,0,32)
		PSMM B 1 Bright A_SeekerMissile(25,10,1)	TNT1 A 0 A_SpawnItemEx("HellRootWhiteMainTrailSpawner",0,0,0,0,0,0,0,32)
		PSMM B 1 Bright A_SeekerMissile(25,10,1)	TNT1 A 0 A_SpawnItemEx("HellRootWhiteMainTrailSpawner",0,0,0,0,0,0,0,32)
		PSMM B 1 Bright A_SeekerMissile(25,10,1)	TNT1 A 0 A_SpawnItemEx("HellRootWhiteMainTrailSpawner",0,0,0,0,0,0,0,32)
		PSMM C 1 Bright A_SeekerMissile(25,10,1)	TNT1 A 0 A_SpawnItemEx("HellRootWhiteMainTrailSpawner",0,0,0,0,0,0,0,32)
		PSMM C 1 Bright A_SeekerMissile(25,10,1)	TNT1 A 0 A_SpawnItemEx("HellRootWhiteMainTrailSpawner",0,0,0,0,0,0,0,32)
		PSMM C 1 Bright A_SeekerMissile(25,10,1)	TNT1 A 0 A_SpawnItemEx("HellRootWhiteMainTrailSpawner",0,0,0,0,0,0,0,32)
		PSMM C 1 Bright A_SeekerMissile(25,10,1)	TNT1 A 0 A_SpawnItemEx("HellRootWhiteMainTrailSpawner",0,0,0,0,0,0,0,32)
	Regular:
		PSMM D 1 Bright A_SeekerMissile(25,10,1)	TNT1 A 0 A_SpawnItemEx("HellRootWhiteMainTrailSpawner",0,0,0,0,0,0,0,32)
		PSMM D 1 Bright A_SeekerMissile(25,10,1)	TNT1 A 0 A_SpawnItemEx("HellRootWhiteMainTrailSpawner",0,0,0,0,0,0,0,32)
		PSMM E 1 Bright A_SeekerMissile(25,10,1)	TNT1 A 0 A_SpawnItemEx("HellRootWhiteMainTrailSpawner",0,0,0,0,0,0,0,32)
		PSMM E 1 Bright A_SeekerMissile(25,10,1)	TNT1 A 0 A_SpawnItemEx("HellRootWhiteMainTrailSpawner",0,0,0,0,0,0,0,32)
		PSMM F 1 Bright A_SeekerMissile(25,10,1)	TNT1 A 0 A_SpawnItemEx("HellRootWhiteMainTrailSpawner",0,0,0,0,0,0,0,32)
		PSMM F 1 Bright A_SeekerMissile(25,10,1)	TNT1 A 0 A_SpawnItemEx("HellRootWhiteMainTrailSpawner",0,0,0,0,0,0,0,32)
		Loop
	Death:
		TNT1 A 0 A_Explode(318,192,0)
		TNT1 A 0 A_SpawnItemEx("HellRootShot1Explo",0,0,0,0,0,0,0,0)
		TNT1 A 0 A_SpawnItemEx("HRWhiteFX",0,0,0,0,0,0,0,32)
		PSMM GGHHIIJJKKLLMM 2 Bright A_FadeOut(0.05)
		Stop
	}
}

Actor HellRootWhiteMainTrailSpawner
{
	+NOINTERACTION
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_CustomMissile("HellRootShot1Trail",0,0,0)
		TNT1 AAA 0 A_SpawnItemEx("HellRootShot1Trail2",random(15,-15),random(15,-15),random(15,-15),0,0,0,0,0)
		TNT1 A 1
		Stop
	}
}

//============================================
//New Hell Root FX - Major Cooke
Actor HRWhiteFX
{
	var int user_count;
	var int user_angle;
	+NOINTERACTION
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 AAAAAAAA 0 A_SpawnItemEx("HellRootWhiteCloud",0,0,0,frandom(0.2,1),0,frandom(1,-1),random(0,359),32)
		TNT1 A 0 A_SetUserVar("user_count",0)
		TNT1 A 0 A_SetUserVar("user_angle",0)
	Setup1:
		TNT1 A 0 A_SpawnItemEx("HRWhiteCloud",0,0,0,6,0,0,user_angle,32)
		TNT1 A 0 A_SpawnItemEx("HRWhiteCloud",0,0,0,3,0,3,user_angle,32)
		TNT1 A 0 A_SpawnItemEx("HRWhiteCloud",0,0,0,3,0,-3,user_angle,32)
		TNT1 A 0 A_SetUserVar("user_angle",user_angle+30)
		TNT1 A 0 A_JumpIf(user_angle>=359,1)
		Loop
		
		TNT1 A 0
		Stop
	}
}

Actor HellRootWhiteCloud
{
	+NOINTERACTION
	RenderStyle Add
	Scale 1.0
	Alpha 0.0
	States
	{
	Spawn:
		X110 A 0 NoDelay A_SetScale(ScaleX*randompick(-1,1),ScaleY*randompick(-1,1))
		X110 A 0 A_SetScale(ScaleX+frandom(-0.5,0.5))
		X110 ABCD 1 A_Fadeto(0.4,0.04)
		"####" "#" 0 A_ScaleVelocity(0.85)
		X110 EFGHI 1 A_Fadeto(0.4,0.04)
		TNT1 A 0 A_ScaleVelocity(0.85)
		X110 JKLMNOP 1 A_Fadeto(0.4,0.04)
		TNT1 A 0 A_ScaleVelocity(0.8)
		X110 QRSTUVWXY 1 A_FadeOut(0.02)
		TNT1 A 0 A_ScaleVelocity(0.8)
		X110 ABCDEFGHIJK 1 A_FadeOut(0.02)
		TNT1 A 0 A_ScaleVelocity(0.8)
		X110 LMNOPQRSTUVWXY 1 A_FadeOut(0.02)
	Outer:
		X110 ABCDEFGHIJKLMNOPQRSTUVWXY 1 A_FadeOut(0.03)
		Loop
	}
}

Actor HRWhiteCloud
{
	var int user_scale;
	+NOINTERACTION
	Translation "0:255=%[0,0,0]:[1,1,1]"
	Scale 0.09
	Alpha 0.75
	RenderStyle Add
	States
	{
	Spawn:
		X048 A 0
		X048 A 0 A_SetUserVar("user_scale",scaleX*100)
	Playoff:
		X048 A 1 A_SetScale((user_scale*0.015))
		X048 A 0 A_SetUserVar("user_scale",user_scale+2)
		X048 A 0 A_FadeOut(0.03)
		Loop
	}
}


Actor HellRootShot1Explo
{
	Projectile
	+NOINTERACTION
	Speed 0
	Damage 0
	RenderStyle Add
	Scale 1.0
	States
	{
	Spawn:
		SRBA FGHI 4 Bright A_FadeOut
		SRBA J 1 Bright A_FadeOut
		Wait
	}
}

Actor HellRootShot1Trail
{
	+NOINTERACTION
	Scale 0.15
	RenderStyle Add
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_Jump(250,4,8,12)
		X101 ABCDEFGHIJKLMNOP 1 A_FadeOut(0.03)
		Goto Spawn+2
	}
}

Actor HellRootShot1Trail2
	{
	Projectile
	+NOCLIP
	Damage 0
	RenderStyle Add
	Alpha 0.45
	Scale 0.1
	States
	{
	Spawn:
		TNT1 A 1
		X033 ABCDEFGHIJKLMNOPQR 2 Bright A_FadeOut(0.03)
		Stop
	}
}

Actor SLGas
{
	PROJECTILE
	Mass 1
	Radius 8
	Height 6
	Speed 3
	Damage 0
	RenderStyle Add
	Translation "112:127=80:111", "224:231=80:82", "208:215=80:82", "160:166=80:84"
	Alpha 0.7
	Scale 0.7
	States
	{
	Spawn:
		CFIR ABCDEFGHIJKLMOP 2 Bright 
		Stop
	}
}


//************************************************************************
Actor HellRootShot2
{
	+FORCERADIUSDMG
	PROJECTILE
	+SEEKERMISSILE
	+EXTREMEDEATH
	Radius 13
	Height 8
	Speed 20
	Damage 90
	SeeSound "greatwraith/active"
	DeathSound "greatwraith/death"
	Scale 0.3
	DamageType "Unholy"
	States
	{
	Spawn:
		PARS A 1 A_SeekerMissile(45,45,SMF_LOOK,200)
		TNT1 AAA 0 A_SpawnItemEx("HellRootS2T2",0,0,-5,0,frandom(2,-2),frandom(0.5,1.2),0,0)
		PARS A 0 Bright A_SpawnItem("HellRootShot2Trail",-2)
		PARS A 1 Bright A_CStaffMissileSlither
		TNT1 AAA 0 A_SpawnItemEx("HellRootS2T2",0,0,-5,0,frandom(2,-2),frandom(0.5,1.2),0,0)
		PARS A 0 Bright A_SpawnItem("HellRootShot2Trail",-2)
		Loop
	Death:
		TNT1 A 0 A_Explode(768,512,0)
		TNT1 AAAAAAAAA 0 A_SpawnItemEx("PBShockwaveSmoke",0,0,0,random(3,-3),random(3,-3),random(3,-3),0,0)
		TNT1 A 0 A_SpawnItemEx("HellRootShot2ExtraMissiles",0,0,0,12,0,0,  0+random(20,20),0)
		TNT1 A 0 A_SpawnItemEx("HellRootShot2ExtraMissiles",0,0,0,12,0,0, 45+random(20,20),0)
		TNT1 A 0 A_SpawnItemEx("HellRootShot2ExtraMissiles",0,0,0,12,0,0, 90+random(20,20),0)
		TNT1 A 0 A_SpawnItemEx("HellRootShot2ExtraMissiles",0,0,0,12,0,0,135+random(20,20),0)
		TNT1 A 0 A_SpawnItemEx("HellRootShot2ExtraMissiles",0,0,0,12,0,0,180+random(20,20),0)
		TNT1 A 0 A_SpawnItemEx("HellRootShot2ExtraMissiles",0,0,0,12,0,0,225+random(20,20),0)
		TNT1 A 0 A_SpawnItemEx("HellRootShot2ExtraMissiles",0,0,0,12,0,0,270+random(20,20),0)
		TNT1 A 0 A_SpawnItemEx("HellRootShot2ExtraMissiles",0,0,0,12,0,0,315+random(20,20),0)
		TNT1 A 1 A_SpawnItemEx("DBTSGExplo",0,0,0,0,0,0,0,32)
		Stop
	}
}

Actor HellRootShot2Trail
{
	+NOINTERACTION
	RenderStyle Add
	Alpha 0.6
	Scale 0.3
	States
	{
	Spawn:
		PARS A 10 Bright
		PARS A 2 Bright A_FadeOut
		Wait
	}
}

Actor HellRootShot2ExtraMissiles
{
	Projectile
	+EXTREMEDEATH
	+FORCERADIUSDMG
	Speed 25
	Damage 15
	Radius 10
	Height 15
	RenderStyle Add
	Scale 0.4
	DeathSound "monster/disht1"
	DamageType "Unholy"
	States
	{
	Spawn:
		IFX1 A 1 Bright A_SpawnItemEx("HellRootS2T2",0,0,-5,0,random(2,-2),random(2,-2),0,0) TNT1 A 0 A_SpawnItemEx("PBDebrisSmokeHalf",0,0,0,0,frandom(1,-1),frandom(0,1),random(0,360),32,64)	//See GenericFX.AED
		IFX1 A 1 Bright A_SpawnItemEx("HellRootS2T2",0,0,-5,0,random(2,-2),random(2,-2),0,0) TNT1 A 0 A_SpawnItemEx("PBDebrisSmokeHalf",0,0,0,0,frandom(1,-1),frandom(0,1),random(0,360),32,64)
		IFX1 B 1 Bright A_SpawnItemEx("HellRootS2T2",0,0,-5,0,random(2,-2),random(2,-2),0,0) TNT1 A 0 A_SpawnItemEx("PBDebrisSmokeHalf",0,0,0,0,frandom(1,-1),frandom(0,1),random(0,360),32,64)
		IFX1 B 1 Bright A_SpawnItemEx("HellRootS2T2",0,0,-5,0,random(2,-2),random(2,-2),0,0) TNT1 A 0 A_SpawnItemEx("PBDebrisSmokeHalf",0,0,0,0,frandom(1,-1),frandom(0,1),random(0,360),32,64)
		Loop
	Death:
		TNT1 A 0 A_Explode(160,160,0)
		TNT1 A 0 A_SpawnItemEx("HellRootExtramissileExp",0,0,0,0,0,0,0,0)
		TNT1 AAAAAAA 0 A_SpawnItemEx("PBShockwaveSmokeHalf",frandom(2.5,5),0,4,frandom(7.5,10),0,0,random(0,359),32)
		IFX1 IJKL 4 Bright
		Stop
	}
}

Actor HellRootS2T1	//small SMOKE trail
{
	+NOINTERACTION
	Scale 0.3
	States
	{
	Spawn:
		X124 ABCDEFGHIJKLMNOPR 2 A_FadeOut(0.04)
		Loop
	}
}


Actor HellRootS2T2	//little red flame
{
	+NOINTERACTION
	RenderStyle Add
	Alpha 0.9
	Scale 0.15
	Translation "0:255=%[0,0,0]:[1,0,0]"
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_Jump(190,4,7,10,14)
		X123 ABCDEFGHIJKLMNOPQRSTUVWX 2 A_FadeOut(0.04)
		Goto Spawn+2
	}
}

Actor HellRootExpFX : HellRootS2T1 { Scale 0.6 }

Actor HellRootSmokeExplo : HellRootS2T1 { Scale 0.8 }

Actor HellRootExtramissileExp
{
	Projectile
	+NOCLIP
	Speed 0
	RenderStyle Add
	Scale 0.6
	States
	{
	Spawn:
		FX52 ABCDEFGHIJKLMN 2 Bright A_FadeOut(0.06)
		Stop
	}
}

Actor HellRootNoAmmoShot : HellRootShot2ExtraMissiles
{
	Damage 10
	Speed 17
	SeeSound "fallenangel/deflect"
	DamageType "Fire"
	States
	{
	Death:
		TNT1 A 0 A_Explode(50,50,0)
		TNT1 A 0 A_SpawnItemEx("HellRootExtramissileExp",0,0,0,0,0,0,0,0)
		TNT1 AAAAAAA 0 A_SpawnItemEx("PBShockwaveSmokeHalf",frandom(2.5,5),0,4,frandom(7.5,10),0,0,random(0,359),32)
		IFX1 IJKL 4 Bright
		Stop
	}
}

Actor HellRootDrop : CustomInventory
{
	Inventory.MaxAmount 1
	States
	{
	Use:
		TNT1 A 0
		TNT1 A 0 A_SpawnItemEx("DroppedHellRoot",0,0,32,8,0,0,0,32,0)
		Stop
	}
}

Actor DroppedHellRoot
{
	Radius 16
	Height 20
	States
	{
	Spawn:
		INCG Z 15
		TNT1 A 0 A_SpawnItemEx("AEoDHellRootNoAmmo",0,0,0,0,0,0,0,48,0)
		Stop
	}
}

Actor AEoDHellRootNoAmmo : AEoDHellRootItem
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL
	Inventory.Amount 1
	Inventory.PickupSound "weaponbuild"
	Inventory.PickupMessage "You got the Hellroot gun."
	States
	{
	Spawn:
		INCG Z -1
		Loop
	Pickup:
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",9) <= 0,"Nothing")
		TNT1 A 0 A_JumpIfInventory("GreenMana",40,"Ammo")
		TNT1 A 0 A_JumpIfInventory("RedMana",12,"Ammo3")
		TNT1 A 0 A_GiveInventory("Weapon9Count",1)
		TNT1 A 0 A_GiveInventory("HellRootDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDHellRoot",1)
		TNT1 A 0 A_TakeInventory("GreenMana",40)
		TNT1 A 0 A_TakeInventory("RedMana",12)
		TNT1 A 0 	
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDHellRoot",1,"Ammo")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		
		TNT1 A 0 ACS_NamedExecute("s798",0,9,0,0)
		Fail
	Ammo:
		TNT1 A 0 A_JumpIfInventory("RedMana",12,1)
		Goto Ammo2
		TNT1 A 0 A_TakeInventory("GreenMana",40)
		TNT1 A 0 A_TakeInventory("RedMana",12)
		TNT1 A 0 A_JumpIfInventory("AEoDHellRoot",1,2)
		TNT1 A 0 A_GiveInventory("Weapon9Count",1)
		TNT1 A 0 A_GiveInventory("HellRootDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDHellRoot",1)
		Stop
	Ammo2:
		TNT1 A 0 A_TakeInventory("GreenMana",40)
		TNT1 A 0 A_GiveInventory("Weapon9Count",1)
		TNT1 A 0 A_GiveInventory("HellRootDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDHellRoot",1)
		TNT1 A 0 A_TakeInventory("RedMana",12)
		Stop
	Ammo3:
		TNT1 A 0 A_TakeInventory("RedMana",12)
		TNT1 A 0 A_GiveInventory("Weapon9Count",1)
		TNT1 A 0 A_GiveInventory("HellRootDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDHellRoot",1)
		TNT1 A 0 A_TakeInventory("GreenMana",40)
		Stop
	}
}



//==================================================================================
//==================================================================================

//==================================================================================
//==================================================================================
Actor AEoDDrakanItem : CustomInventory 6024
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL
	+FLOATBOB
	Inventory.Amount 1
	Inventory.PickupMessage "Picked up the Drakan Dragon Blade!!"
	Inventory.PickupSound "pickuppiece"
	States
	{
	Spawn:
		WFR1 A -1
		Loop
	Pickup:
		TNT1 A 0 A_JumpIfInventory("AEoDDrakan",1,"Ammo")
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",9) <= 0,"Nothing")
		TNT1 A 0 A_GiveInventory("Weapon9Count",1)
		TNT1 A 0 A_GiveInventory("DrakanDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDDrakan",1)
		TNT1 A 0 	
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDDrakan",1,"Ammo")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		TNT1 A 0 ACS_NamedExecute("s798",0,9,0,0)
		Fail
	Ammo:
		TNT1 A 0 A_GiveInventory("AEoDDrakan",1)
		Stop
	}
}

Actor AEoDDrakan : Weapon // 6024
{ 
	+FLOORCLIP
	+WEAPON.CHEATNOTWEAPON
	+FLOATBOB
	+WEAPON.NOALERT
	Weapon.AmmoType1 "RedMana"
	Weapon.AmmoType2 "RedMana" 
	Weapon.AmmoGive 20
	Weapon.AmmoUse1 8
	Weapon.AmmoUse2 0
	Weapon.SelectionOrder 12321
	Obituary "%o saw a pretty fire. That was a courtesy of %k."
	Inventory.PickupMessage "Picked up the Drakan Dragon Blade!"
	Inventory.PickupSound "pickuppiece"
	AttackSound "reilsss/weapons/katanahit"
	weapon.upsound "reilsss/weapons/knifeup"
	Tag "Drakan Blade"
	States
	{
	Spawn:
		WFR1 A -1
		Loop
	Select:
		TNT1 A 0 	
		FSD2 A 1 A_Raise
		"----" AA 0 A_Raise
		Loop
	Deselect:
		TNT1 A 0 A_StopSound(6)
		//TNT1 A 0 	
		FSD2 A 1 A_Lower
		"----" AA 0 A_Lower
		Goto Deselect+1
	Flash:
		CRBW W 3 Bright A_Light1
		CRBW W 2 Bright A_Light0
		Stop 

	//Melee
	Ready:
		R037 A 0 A_StopSound(6)
		"----" A 0 A_JumpIfInventory("DrakanModeChecker",1,"Ready2")
		"----" A 0 A_PlaySound("reilsss/weapons/flameidle1", 6, 1.0, 1)
		R037 ABC 6 Bright A_WeaponReady
		Goto Ready+3
	Fire:
		"----" A 0 A_JumpIfInventory("DrakanModeChecker",1,"Fire2")
		R037 A 1 Bright Offset (5, 40)
		R037 B 1 Bright Offset (5, 45)
		R037 C 1 Bright Offset (5, 50)
		R037 A 1 Bright Offset (5, 55)
		R037 B 1 Bright Offset (5, 60)
		Goto Hold
	Hold:
		"----" A 0 A_JumpIfInventory("DrakanModeChecker",1,"Hold2")
		"----" A 0 A_PlaySound("reilsss/weapons/dragonswordswing", 8, 1.0, 0)
		R037 D 3 Bright Offset (5, 36)
		R037 E 3 Bright Offset (5, 36)
		R037 F 2 Bright Offset (5, 36)
		"----" A 0 A_JumpIfCloser(150,"HoldClose")
		"----" A 0 A_PlaySound("weapons/gvaporize", 8, 1.0, 0)
		"----" A 0 A_Recoil(-1)
		"----" A 0 A_Firecustommissile("CheapAlert2",0,0,0,0)
		"----" A 0 Bright A_FireCustomMissile("DrakenFire2", -9, 0, 0, 8)
		"----" A 0 Bright A_FireCustomMissile("DrakenFire2", -4, 0, 0, 6)
		"----" A 0 Bright A_FireCustomMissile("DrakenFire2", 0, 1, 0, 4)
		"----" A 0 Bright A_FireCustomMissile("DrakenFire2", 4, 0, 0, 2)
		"----" A 0 Bright A_FireCustomMissile("DrakenFire2", 9, 0, 0, 0)
		"----" A 0 A_SetBlend("Green",0.5,8)
		R037 G 1 Bright Offset (5, 36) A_SetPitch(pitch+5)
		R037 GHHII 1 Bright Offset (5, 36) A_SetPitch(pitch-1)
		TNT1 A 6 Bright Offset (5, 150)
		TNT1 A 4 A_ReFire
		R037 B 1 Bright Offset (5, 60)
		R037 C 1 Bright Offset (5, 55) 
		R037 A 1 Bright Offset (5, 50)
		R037 B 1 Bright Offset (5, 45)
		R037 C 1 Bright Offset (5, 40)
		Goto Ready
	HoldClose:
		"----" A 0 A_Recoil(-1)
		"----" A 0 A_Firecustommissile("CheapAlert2",0,0,0,0)
		"----" A 0 A_CustomPunch (random(500,1000),1,1,"DrakanPuff",150)
		"----" A 0 A_GiveInventory("DrakanLeech", random(10,15))
		R037 G 1 Bright Offset (5, 36) A_SetPitch(pitch+3)
		R037 GGHHII 1 Bright Offset (5, 36) A_SetPitch(pitch-0.5)
		TNT1 A 6 Bright Offset (5, 150)
		TNT1 A 4 A_ReFire
		R037 B 1 Bright Offset (5, 60) 
		R037 C 1 Bright Offset (5, 55) 
		R037 A 1 Bright Offset (5, 50)
		R037 B 1 Bright Offset (5, 45)
		R037 C 1 Bright Offset (5, 40)
		Goto Ready
	AltFire:
		"----" A 0 A_JumpIfInventory("DrakanModeChecker",1,"AltFire2")
		"----" A 0 A_GiveInventory("DrakanModeChecker",1)
		"----" A 0 A_StopSound(6)
		FSD2 A 4
		R046 A 4 Bright A_PlaySound("reilsss/weapons/firehandaltfire", CHAN_WEAPON, 1.0, 0)
		R046 BC 4 Bright
		Goto Ready
	//Ice / Ligthblue
	Ready2:
		"----" A 0 A_StopSound(6)
		"----" A 0 A_JumpIfInventory("DrakanModeChecker",2,"Ready3")
		"----" A 0 A_PlaySound("reilsss/weapons/flameidle1", 6, 0.2, 1)
		R046 ABC 6 Bright A_WeaponReady
		Goto Ready2+3
	Fire2:
		"----" A 0 A_JumpIfInventory("DrakanModeChecker",2,"Fire3")
		R046 A 1 Bright Offset (5, 40)
		R046 B 1 Bright Offset (5, 45)
		R046 C 1 Bright Offset (5, 50)
		R046 A 1 Bright Offset (5, 55)
		R046 B 1 Bright Offset (5, 60)
		Goto Hold2
	Hold2:
		"----" A 0 A_JumpIfInventory("DrakanModeChecker",2,"Hold3")
		TNT1 A 0 A_PlaySound("reilsss/weapons/dragonswordswing", 8, 1.0, 0)
		R037 D 3 Bright Offset (5, 36)
		R046 E 3 Bright Offset (5, 36)
		R046 F 2 Bright Offset (5, 36)
		"----" A 0 A_JumpIfCloser(150,"Hold2Close")
		"----" A 0 A_PlaySound("weapons/gvaporize", 8, 1.0, 0)
		"----" A 0 A_Recoil(1)
		"----" A 0 A_Firecustommissile("CheapAlert2",0,0,0,0)
		"----" A 0 Bright A_FireCustomMissile("DrakenFire3", -9, 0, 0, 8)
		"----" A 0 Bright A_FireCustomMissile("DrakenFire3", -4, 0, 0, 6)
		"----" A 0 Bright A_FireCustomMissile("DrakenFire3", 0, 1, 0, 4)
		"----" A 0 Bright A_FireCustomMissile("DrakenFire3", 4, 0, 0, 2)
		"----" A 0 Bright A_FireCustomMissile("DrakenFire3", 9, 0, 0, 0)
		"----" A 0 A_SetBlend("Cyan1",0.5,8)
		R046 G 1 Bright Offset (5, 36) A_SetPitch(pitch+3)
		R046 GGHHII 1 Bright Offset (5, 36) A_SetPitch(pitch-0.5)
		TNT1 A 6
		TNT1 A 4 A_ReFire
		R046 B 1 Bright Offset (5, 60)
		R046 C 1 Bright Offset (5, 55) 
		R046 A 1 Bright Offset (5, 50)
		R046 B 1 Bright Offset (5, 45)
		R046 C 1 Bright Offset (5, 40)
		Goto Ready
	Hold2Close:
		"----" A 0 A_Recoil(-1)
		"----" A 0 A_Firecustommissile("CheapAlert2",0,0,0,0)
		"----" A 0 A_CustomPunch (random(500,1000),1,1,"DrakanPuffIce",150)
		"----" A 0 A_GiveInventory("DrakanLeech", random(10,15))
		R046 G 1 Bright Offset (5, 36) A_SetPitch(pitch+3)
		R046 GGHHII 1 Bright Offset (5, 36) A_SetPitch(pitch-0.5)
		TNT1 A 6
		TNT1 A 4 A_ReFire
		R046 B 1 Bright Offset (5, 60) 
		R046 C 1 Bright Offset (5, 55) 
		R046 A 1 Bright Offset (5, 50)
		R046 B 1 Bright Offset (5, 45)
		R046 C 1 Bright Offset (5, 40)
		Goto Ready
	AltFire2:
		TNT1 A 0 A_JumpIfInventory("DrakanModeChecker",2,"AltFire3")
		TNT1 A 0 A_GiveInventory("DrakanModeChecker",1)
		TNT1 A 0 A_StopSound(6)
		FSD2 A 4
		R038 A 4 Bright A_PlaySound("reilsss/weapons/firehandaltfire", CHAN_WEAPON, 1.0, 0)
		R038 BC 4 Bright
		Goto Ready
	//Wind / White
	Ready3:
		"----" A 0 A_StopSound(6)
		"----" A 0 A_JumpIfInventory("DrakanModeChecker",3,"Ready4")
		"----" A 0 A_PlaySound("reilsss/weapons/flameidle1", 6, 0.2, 1)
		R038 ABC 6 Bright A_WeaponReady
		Goto Ready3+3
	Fire3:
		"----" A 0 A_JumpIfInventory("DrakanModeChecker",3,"Fire4")
		R038 A 1 Bright Offset (5, 40)
		R038 B 1 Bright Offset (5, 45)
		R038 C 1 Bright Offset (5, 50)
		R038 A 1 Bright Offset (5, 55)
		R038 B 1 Bright Offset (5, 60)
		Goto Hold3
	Hold3:
		"----" A 0 A_JumpIfInventory("DrakanModeChecker",3,"Hold4")
		"----" A 0 A_PlaySound("reilsss/weapons/dragonswordswing", 8, 1.0, 0)
		R037 D 3 Bright Offset (5, 36)
		R038 E 3 Bright Offset (5, 36)
		R038 F 2 Bright Offset (5, 36)
		"----" A 0 A_JumpIfCloser(150,"Hold3Close")
		"----" A 0 A_PlaySound("weapons/gvaporize", 8, 1.0, 0)
		"----" A 0 A_Recoil(1)
		"----" A 0 A_Firecustommissile("CheapAlert2",0,0,0,0)
		"----" A 0 Bright A_FireCustomMissile("DrakenFire8", -9, 0, 0, 8)
		"----" A 0 Bright A_FireCustomMissile("DrakenFire8", -4, 0, 0, 6)
		"----" A 0 Bright A_FireCustomMissile("DrakenFire8", 0, 1, 0, 4)
		"----" A 0 Bright A_FireCustomMissile("DrakenFire8", 4, 0, 0, 2)
		"----" A 0 Bright A_FireCustomMissile("DrakenFire8", 9, 0, 0, 0)
		"----" A 0 A_SetBlend("DarkViolet",0.5,8)
		R038 G 1 Bright Offset (5, 36) A_SetPitch(pitch+3)
		R038 GGHHII 1 Bright Offset (5, 36) A_SetPitch(pitch-0.5)
		"----" A 6 Bright Offset (5, 150)
		"----" A 4 A_ReFire
		R038 B 1 Bright Offset (5, 60)
		R038 C 1 Bright Offset (5, 55) 
		R038 A 1 Bright Offset (5, 50)
		R038 B 1 Bright Offset (5, 45)
		R038 C 1 Bright Offset (5, 40)
		Goto Ready
	Hold3Close:
		"----" A 0 A_Recoil(-1)
		"----" A 0 A_Firecustommissile("CheapAlert2",0,0,0,0)
		"----" A 0 A_CustomPunch (random(500,1000),1,1,"DrakanPuffMagic",150)
		"----" A 0 A_GiveInventory("DrakanLeech", random(10,15))
		R038 G 1 Bright Offset (5, 36) A_SetPitch(pitch+3)
		R038 GGHHII 1 Bright Offset (5, 36) A_SetPitch(pitch-0.5)
		"----" A 6 Bright Offset (5, 150)
		"----" A 4 A_ReFire
		R038 B 1 Bright Offset (5, 60) 
		R038 C 1 Bright Offset (5, 55) 
		R038 A 1 Bright Offset (5, 50)
		R038 B 1 Bright Offset (5, 45)
		R038 C 1 Bright Offset (5, 40)
		Goto Ready
	AltFire3:
		"----" A 0 A_JumpIfInventory("DrakanModeChecker",3,"AltFire4")
		"----" A 0 A_GiveInventory("DrakanModeChecker",1)
		"----" A 0 A_StopSound(6)
		FSD2 A 4
		R040 A 4 Bright A_PlaySound("reilsss/weapons/firehandaltfire", CHAN_WEAPON, 1.0, 0)
		R040 BC 4 Bright
		Goto Ready
	//Dragon / (Gold/Yellow)
	Ready4:
		"----" A 0 A_StopSound(6)
		"----" A 0 A_JumpIfInventory("DrakanModeChecker",4,"Ready5")
		"----" A 0 A_PlaySound("reilsss/weapons/flameidle1", 6, 0.2, 1)
		R040 ABC 6 Bright A_WeaponReady
		Goto Ready4+3
	Fire4:
		"----" A 0 A_JumpIfInventory("DrakanModeChecker",4,"Fire5")
		R040 A 1 Bright Offset (5, 40)
		R040 B 1 Bright Offset (5, 45)
		R040 C 1 Bright Offset (5, 50)
		R040 A 1 Bright Offset (5, 55)
		R040 B 1 Bright Offset (5, 60)
		Goto Hold4
	Hold4:
		"----" A 0 A_JumpIfInventory("DrakanModeChecker",4,"Hold5")
		"----" A 0 A_PlaySound("reilsss/weapons/dragonswordswing", 8, 1.0, 0)
		R037 D 3 Bright Offset (5, 36)
		R040 E 3 Bright Offset (5, 36)
		R040 F 2 Bright Offset (5, 36)
		"----" A 0 A_JumpIfInventory("RedMana",12,"Hold4Cont")	 //if not enough to summon the dragon, will do melee
		Goto "Hold4Close"
	Hold4Cont:
		"----" A 0 A_PlaySound("weapons/gvaporize", 8, 0.2, 0)
		"----" A 0 A_Recoil(1)
		"----" AA 0 A_Firecustommissile("CheapAlert2",0,1,0,0)	 //ammo waster
		"----" A 0 Bright A_FireCustomMissile("DrakenFire9", 0, 1, 0, 4)
		"----" A 0 A_SetBlend("Gold",0.5,8)
		R040 G 1 Bright Offset (5, 36) A_SetPitch(pitch+3)
		R040 GGHHII 1 Bright Offset (5, 36) A_SetPitch(pitch-0.5)
		TNT1 A 6 Bright Offset (5, 150)
		TNT1 A 4 A_ReFire
		R040 B 1 Bright Offset (5, 60) 
		R040 C 1 Bright Offset (5, 55)
		R040 A 1 Bright Offset (5, 50)
		R040 B 1 Bright Offset (5, 45)
		R040 C 1 Bright Offset (5, 40)
		Goto Ready
	Hold4Close:
		"----" A 0 A_Recoil(-1)
		"----" A 0 A_Firecustommissile("CheapAlert2",0,0,0,0)
		"----" A 0 A_CustomPunch(random(400,1000),1,1,"DrakanPuffFire",150)
		"----" A 0 A_GiveInventory("DrakanLeech", random(10,15))
		R040 G 1 Bright Offset (5, 36) A_SetPitch(pitch+3)
		R040 GGHHII 1 Bright Offset (5, 36) A_SetPitch(pitch-0.5)
		TNT1 A 6 Bright Offset (5, 150)
		TNT1 A 4 A_ReFire
		R040 B 1 Bright Offset (5, 60)
		R040 C 1 Bright Offset (5, 55)
		R040 A 1 Bright Offset (5, 50)
		R040 B 1 Bright Offset (5, 45)
		R040 C 1 Bright Offset (5, 40)
		Goto Ready
	AltFire4:
		"----" A 0 A_JumpIfInventory("DrakanModeChecker",4,"AltFire5")
		"----" A 0 A_GiveInventory("DrakanModeChecker",1)
		"----" A 0 A_StopSound(6)
		FSD2 A 4
		R044 A 4 Bright A_PlaySound("reilsss/weapons/firehandaltfire", CHAN_WEAPON, 1.0, 0)
		R044 BC 4 Bright
		Goto Ready
	//Black Vortex
	Ready5:
		"----" A 0 A_StopSound(6)
		"----" A 0 A_PlaySound("reilsss/weapons/flameidle1", 6, 0.2, 1)
		R044 ABC 6 Bright A_WeaponReady
		Goto Ready5+2
	Fire5:
		R044 A 1 Bright Offset (5, 40)
		R044 B 1 Bright Offset (5, 45)
		R044 C 1 Bright Offset (5, 50)
		R044 A 1 Bright Offset (5, 55)
		R044 B 1 Bright Offset (5, 60)
		Goto Hold5
	Hold5:
		"----" A 0 A_PlaySound("reilsss/weapons/dragonswordswing", 8, 1.0, 0)
		R037 D 3 Bright Offset (5, 36)
		R044 E 3 Bright Offset (5, 36)
		R044 F 2 Bright Offset (5, 36)
		"----" A 0 A_JumpIfCloser(150,"Hold5Close")
		"----" A 0 A_PlaySound("weapons/gvaporize", 8, 1.0, 0)
		"----" A 0 A_Recoil(1)
		"----" A 0 A_Firecustommissile("CheapAlert2",0,0,0,0)
		"----" A 0 Bright A_FireCustomMissile("DrakKESSmall", -9, 0, 0, 8)
		"----" A 0 Bright A_FireCustomMissile("DrakKESSmall", -4, 0, 0, 6)
		"----" A 0 Bright A_FireCustomMissile("DrakKESSmall", 0, 1, 0, 4)
		"----" A 0 Bright A_FireCustomMissile("DrakKESSmall", 4, 0, 0, 2)
		"----" A 0 Bright A_FireCustomMissile("DrakKESSmall", 9, 0, 0, 0)
		"----" A 0 A_SetBlend("Black",0.5,8)
		R044 G 1 Bright Offset (5, 36) A_SetPitch(pitch+3)
		R044 GGHHII 1 Bright Offset (5, 36) A_SetPitch(pitch-0.5)
		TNT1 A 6 Bright Offset (5, 150)
		TNT1 A 8 A_ReFire
		R044 B 1 Bright Offset (5, 60) 
		R044 C 1 Bright Offset (5, 55) 
		R044 A 1 Bright Offset (5, 50)
		R044 B 1 Bright Offset (5, 45)
		R044 C 1 Bright Offset (5, 40)
		Goto Ready
	Hold5Close:
		"----" A 0 A_Recoil(-1)
		"----" A 0 A_Firecustommissile("CheapAlert2",0,0,0,0)
		"----" A 0 A_CustomPunch(random(500,1000),1,1,"DrakanPuffVorpal",150)
		"----" A 0 A_GiveInventory("DrakanLeech", random(10,15))
		R044 G 1 Bright Offset (5, 36) A_SetPitch(pitch+3)
		R044 GGHHII 1 Bright Offset (5, 36) A_SetPitch(pitch-0.5)
		TNT1 A 6 Bright Offset (5, 150)
		TNT1 A 4 A_ReFire
		R044 B 1 Bright Offset (5, 60) 
		R044 C 1 Bright Offset (5, 55) 
		R044 A 1 Bright Offset (5, 50)
		R044 B 1 Bright Offset (5, 45)
		R044 C 1 Bright Offset (5, 40)
		Goto Ready
	AltFire5:
		"----" A 0 A_TakeInventory("DrakanModeChecker",9999)
		"----" A 0 A_StopSound(6)
		FSD2 A 4
		R037 A 4 Bright A_PlaySound("reilsss/weapons/firehandaltfire", CHAN_WEAPON, 1.0, 0)
		R037 BC 4 Bright
		Goto Ready
	}
}

Actor DrakanModeChecker : Inventory
{
	Inventory.Amount 0
	Inventory.MaxAmount 20
}

Actor DrakanPuff : KatanaPuff
{
	-NOEXTREMEDEATH
	+EXTREMEDEATH
	DamageType "AEPoison"
}

Actor DrakanPuffIce : DrakanPuff { DamageType "Ice" }

Actor DrakanPuffMagic : DrakanPuff { DamageType "AEMagic" }

Actor DrakanPuffFire : DrakanPuff { DamageType "Fire" }

Actor DrakanPuffVorpal : DrakanPuff
{
	DamageType Disintegrate
	+FOILINVUL
}


Actor DrakKESSmall
{
	PROJECTILE
	+EXTREMEDEATH
	+NODAMAGETHRUST
	+DONTSPLASH
	+RIPPER
	RipperLevel 2
	+NOTIMEFREEZE
	Mass 500
	Radius 10
	Height 10
	Speed 15
	Damage 3
	DamageType "UnholyDisint"
	DeathSound "SorcererBigBallExplode"
	Scale 0.25
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_PlaySound("DarkFireSmall/Active",5,0.4,1)
		DKFX A 1 Bright A_Explode(random(10,20),40,0)
		TNT1 A 0 A_SpawnItemEx("KESBoltTrail",0,random(7,-7),random(5,-5),random(1,2),random(1,2),random(-2,2),random(1,360),32)
		DKFX BB 1 Bright A_Explode(random(10,20),40,0)
		TNT1 A 0 A_SpawnItemEx("KESBoltTrail",0,random(7,-7),random(5,-5),random(1,2),random(1,2),random(-2,2),random(1,360),32)
		DKFX CC 1 Bright A_Explode(random(10,20),40,0)
		TNT1 A 0 A_SpawnItemEx("KESBoltTrail",0,random(7,-7),random(5,-5),random(1,2),random(1,2),random(-2,2),random(1,360),32)
		DKFX DD 1 Bright A_Explode(random(10,20),40,0)
		TNT1 A 0 A_SpawnItemEx("KESBoltTrail",0,random(7,-7),random(5,-5),random(1,2),random(1,2),random(-2,2),random(1,360),32)
		DKFX EE 1 Bright A_Explode(random(10,20),40,0)
		TNT1 A 0 A_SpawnItemEx("KESBoltTrail",0,random(7,-7),random(5,-5),random(1,2),random(1,2),random(-2,2),random(1,360),32)
		DKFX FF 1 Bright A_Explode(random(10,20),40,0)
		TNT1 A 0 A_SpawnItemEx("KESBoltTrail",0,random(7,-7),random(5,-5),random(1,2),random(1,2),random(-2,2),random(1,360),32)
		Loop
	Death:
		TNT1 AAAAAAAAA 0 A_SpawnItemEx("KESExplosionSpritesSmall",0,0,0,random(3,-3)/(2*1.95),random(3,-3)/(2*1.95),random(3,-3)/(2*1.95),0,32)
		TNT1 A 1 A_Explode(64,96,0)
		TNT1 A 0 A_SpawnItemEx("KESSmallExplosion",0,0,0,0,0,0,0,0,0)
		Stop
	}
}

//--------------------------------------

//Drakan Fire1 Melee / Healing
Actor DrakanLeech : HealthBonus
{
	+NOGRAVITY
	+SEEKERMISSILE
	+MISSILE
	+DROPOFF
	+NOBLOCKMONST
	+CANPASS
	-COUNTITEM
	Radius 1
	Height 1
	Speed 40
	Damage 0
	Inventory.Amount 2
	States
	{
	Spawn:
		TNT1 A 1
		Loop
		Death:
		TNT1 A 0
		Stop
	}
}

//--------------------------------------

//Drakan Fire2 Poison
Actor DrakenFire2
{
	+EXTREMEDEATH
	+FORCERADIUSDMG
	Projectile
	Radius 12
	Height 8
	Speed 35
	Damage 12
	DeathSound "fighterswordexplode"
	DamageType "AEPoison"
	States
	{
	Spawn:
		FSFX ABC 2 Bright A_SpawnItemEx("SwordFireTrail2",0,0,0,0,0,frandom(0.001,0.001),0,48)
		Loop
	Death:
		FSFX D 2 Bright A_Explode(160,64,0)//A_Explode(80,64,0)
		FSFX E 2 Bright 
		FSFX FGHIJKLM 2 Bright
		Stop
	}
}

Actor SwordFireTrail2
{
	Radius 4
	Height 0
	Speed 0
	Damage 5
	Projectile
	DeathSound "q2weapon/laserhit"
	+RIPPER	RipperLevel 1
	+DONTSPLASH
	+EXTREMEDEATH
	+DONTREFLECT
	+FORCERADIUSDMG
	-NOGRAVITY
	DamageType "AEPoison"
	Gravity 0.125
	RenderStyle Add
	States
	{
	Spawn:
		FSFX N 0 A_JumpIf(waterlevel>=1,"Death")
		FSFX NOPQRST 4 Bright //A_LowGravity
		Loop
	Death:
		FSFX U 4 Bright A_Explode(12,12,0)
		FSFX VW 4 Bright
		Stop
	}
}

//--------------------------------------

//Drakan Fire3 Ice
Actor DrakenFire3
{
	PROJECTILE
	+SEEKERMISSILE
	DamageType "Ice"
	Radius 4
	Height 5
	Speed 20
	Damage 16 //12
	DeathSound "weapons/crbreak"
	RENDERSTYLE ADD
	ALPHA 9.5
	States
	{
	Spawn:
		ICPR A 0
		ICPR A 2 Bright A_SeekerMissile (1, 2)
		TNT1 AA 0 Bright A_SpawnItemEx("CrystalSmoke",random(3,-3),random(3,-3),random(3,-3),0,0,frandom(0.1,0.4),0,32)	//see wepclass4.aed
		ICPR B 2 Bright A_SeekerMissile (1, 2)
		TNT1 AA 0 Bright A_SpawnItemEx("CrystalSmoke",random(3,-3),random(3,-3),random(3,-3),0,0,frandom(0.1,0.4),0,32)
		ICPR C 2 Bright A_SeekerMissile (1, 2)
		TNT1 AA 0 Bright A_SpawnItemEx("CrystalSmoke",random(3,-3),random(3,-3),random(3,-3),0,0,frandom(0.1,0.4),0,32)
		Loop
	Death:
		TNT1 AAAAAAAA 0 A_CustomMissile("DrakenFire3Extra",0,0,random(0,359))
		ICPR A 3 Bright A_Explode(80,20,0)
		ICPR EFGH 3 Bright
		Stop
	}
}

Actor DrakenFire3Trail
{
	Projectile
	+NOGRAVITY
	Radius 4
	Height 3
	Speed 0
	RenderStyle Add
	Alpha 0.5
	Scale 0.6
	States
	{
	Spawn:
		CRYT A 1 Bright
		CRYT A 3 Bright A_PlaySound("weapons/crtrail")
		CRYT BC 3 Bright
		CRYT D 2 Bright
		Stop 
	}
}

Actor DrakenFire3Extra
{
	PROJECTILE
	+NOCLIP
	-NOGRAVITY
	+DONTSPLASH
	Height 4
	Radius 4
	Speed 3
	Gravity 0.4
	RenderStyle Add
	Translation "168:191=192:207"
	Scale 0.15
	States
	{
	Spawn:
		FX22 GG 0
		FX22 GG 1 Bright ThrustThingZ(0,random(2,6),0,1)
		FX22 GGGGGGGG 1 Bright
		FX22 G 1 Bright A_FadeOut
		Wait
	}
}

//--------------------------------------

//Drakan Fire8 Mental
Actor DrakenFire8 //: MageStaffFX2
{
	Projectile
	+SEEKERMISSILE
	+FORCERADIUSDMG
	+NODAMAGETHRUST
	DamageType "AEMagic"
	Damage 7
	Radius 4
	Height 6
	Speed 15
	Scale 0.35
	RenderStyle Add
	DeathSound "SorcererBallExplode"
	States
	{
	Spawn:
		X024 A 0
		X024 A 1 Bright A_SeekerMissile(10,10,SMF_LOOK,256)
		TNT1 A 0 A_SpawnItemEx("DrakenFire8Trail",0,0,0,0,0,0,0,32)
		X024 B 1 Bright A_SeekerMissile(10,10,SMF_LOOK,256)
		TNT1 A 0 A_SpawnItemEx("DrakenFire8Trail",0,0,0,0,0,0,0,32)
		X024 C 1 Bright A_SeekerMissile(10,10,SMF_LOOK,256)
		TNT1 A 0 A_SpawnItemEx("DrakenFire8Trail",0,0,0,0,0,0,0,32)
		X024 D 1 Bright A_SeekerMissile(10,10,SMF_LOOK,256)
		TNT1 A 0 A_SpawnItemEx("DrakenFire8Trail",0,0,0,0,0,0,0,32)
		X024 E 1 Bright A_SeekerMissile(10,10,SMF_LOOK,256)
		TNT1 A 0 A_SpawnItemEx("DrakenFire8Trail",0,0,0,0,0,0,0,32)
		X024 F 1 Bright A_SeekerMissile(10,10,SMF_LOOK,256)
		TNT1 A 0 A_SpawnItemEx("DrakenFire8Trail",0,0,0,0,0,0,0,32)
		X024 G 1 Bright A_SeekerMissile(10,10,SMF_LOOK,256)
		TNT1 A 0 A_SpawnItemEx("DrakenFire8Trail",0,0,0,0,0,0,0,32)
		X024 H 1 Bright A_SeekerMissile(10,10,SMF_LOOK,256)
		TNT1 A 0 A_SpawnItemEx("DrakenFire8Trail",0,0,0,0,0,0,0,32)
		X024 I 1 Bright A_SeekerMissile(10,10,SMF_LOOK,256)
		TNT1 A 0 A_SpawnItemEx("DrakenFire8Trail",0,0,0,0,0,0,0,32)
		X024 J 1 Bright A_SeekerMissile(10,10,SMF_LOOK,256)
		TNT1 A 0 A_SpawnItemEx("DrakenFire8Trail",0,0,0,0,0,0,0,32)
		X024 K 1 Bright A_SeekerMissile(10,10,SMF_LOOK,256)
		TNT1 A 0 A_SpawnItemEx("DrakenFire8Trail",0,0,0,0,0,0,0,32)
		Loop
	Death:
		TNT1 AAAAAAAAA 0 A_SpawnItemEx("Drakan8ExploPart",0,0,0,frandom(1.0,-1.0),frandom(1.0,-1.0),frandom(1.0,-1.0),random(0,259),32)
		TNT1 A 4 Bright A_Explode(100,192,0)
		Stop
	}
}

Actor Drakan8ExploPart
{
	+NOINTERACTION
	RenderStyle Add
	Alpha 0.8
	Scale 0.1
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_Jump(255,1,3,5,7,9)
		X024 ABCDEFGHIJK 1 Bright A_FadeOut(0.04)
		Goto Spawn+2
	}
}


Actor DrakenFire8Trail
{
	Projectile
	+NOINTERACTION
	Radius 4
	Height 3
	Speed 5
	RenderStyle Add
	Alpha 0.8
	Scale 0.25
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_Jump(255,1,3,5,7,9)
		X024 ABCDEFGHIJK 1 Bright A_FadeOut(0.04)
		Goto Spawn+2
	}
}

//--------------------------------------

//Drakan Fire9 Summon Dragon
Actor DrakenFire9 //: DrakenFire7
{
	PROJECTILE
	+FLOORHUGGER
	Radius 12
	Height 24
	Speed 20
	States
	{
	Spawn:
		TNT1 A 3
		TNT1 A 0 A_PlaySound("FireDemonSpawn")
		TNT1 A 0 A_SpawnItem("MinotaurSmoke",0)
		TNT1 A 0 A_SpawnItem("DrakanBlackDragon",0)
		Stop
	Death:
		TNT1 A 0
		Goto Spawn+1
	}
}

Actor DrakanBlackDragon
{
	Health 400
	Painchance 32
	Speed 14
	Radius 16
	Height 48
	Mass 0x7FFFFFFFF
	Scale 0.375
	BloodColor Coral
	DamageFactor "Fire", 0.5
	MONSTER 
	+FLOAT
	+NOGRAVITY
	+DROPOFF
	+NOBLOCKMONST
	+DONTMORPH
	+NOFEAR
	+FRIENDLY
	+NOICEDEATH
	+MISSILEMORE
	+NORADIUSDMG
	-SHOOTABLE
	MaxTargetRange 200
	SeeSound "FireDemonActive"
	PainSound "FireDemonPain"
	DeathSound "FireDemonDeath"
	ActiveSound "FireDemonActive"
	Obituary "%o found himself a crispy critter due to dragon fire."
	States
	{
	Spawn:
		RDAG A 8
		RDAG A 0 A_SetShootable
		RDAG A 0 A_SentinelBob
		RDAG ABCDEF 3 A_Look
		RDAG A 0 A_SentinelBob
		TNT1 A 0 A_PlaySound("DragonWingFlap")
		RDAG GHIJK 3 A_Look
		RDAG K 0 A_GiveInventory("SummonLimit",1)
		RDAG K 0 A_JumpIfInventory("SummonLimit",40,"Death")
		Goto Spawn+2
	See:
		RDAG A 0 A_SentinelBob
		RDAG ABCDEF 3 A_Chase
		RDAG A 0 A_SentinelBob
		TNT1 A 0 A_PlaySound("DragonWingFlap")
		RDAG GHIJK 3 A_Chase
		RDAG K 0 A_GiveInventory("SummonLimit",1)
		RDAG K 0 A_JumpIfInventory("SummonLimit",40,"Death")
		Loop
	Missile:
		RDAG A 0 A_FaceTarget
		RDAG A 4 Bright A_CustomMissile("DrakanDragonFireball", 48, 0, 0)
		RDAG B 0 A_FaceTarget
		RDAG B 4 Bright A_CustomMissile("DrakanDragonFireball", 48, 0, 0)
		RDAG C 0 A_FaceTarget
		RDAG C 4 Bright A_CustomMissile("DrakanDragonFireball", 48, 0, 0)
		RDAG D 0 A_FaceTarget
		RDAG D 4 Bright A_CustomMissile("DrakanDragonFireball", 48, 0, 0)
		RDAG E 0 A_FaceTarget
		RDAG E 4 Bright A_CustomMissile("DrakanDragonFireball", 48, 0, 0)
		RDAG F 0 A_FaceTarget
		RDAG F 4 Bright A_CustomMissile("DrakanDragonFireball", 48, 0, 0)
		RDAG G 0 A_FaceTarget
		RDAG G 4 Bright A_CustomMissile("DrakanDragonFireball", 48, 0, 0)
		RDAG H 0 A_FaceTarget
		RDAG H 4 Bright A_CustomMissile("DrakanDragonFireball", 48, 0, 0)
		RDAG I 0 A_FaceTarget
		RDAG I 4 Bright A_CustomMissile("DrakanDragonFireball", 48, 0, 0)
		RDAG J 0 A_FaceTarget
		RDAG J 4 Bright A_CustomMissile("DrakanDragonFireball", 48, 0, 0)
		RDAG K 0 A_FaceTarget
		RDAG K 4 Bright A_CustomMissile("DrakanDragonFireball", 48, 0, 0)
		Goto See
	Pain:
		RDAG V 3
		RDAG W 3 A_Pain
		RDAG V 3
		Goto See
	Death:
		TNT1 A 0 A_PlaySound("FireDemonSpawn")
		TNT1 A 0 A_SpawnItem("MinotaurSmoke",0)
		TNT1 A 0 A_ChangeFlag("FLOATBOB",0)
		TNT1 A 0 A_Fall
		TNT1 A 4 A_SetFloorClip
		TNT1 A 5 A_FadeOut
		Wait
	Crash:
		TNT1 A 7 A_SetFloorClip
		TNT1 A 7
		TNT1 AA 7
		TNT1 M -1
		Stop
	}
}

Actor DrakanDragonFireball
{
	PROJECTILE
	DamageType "Fire"
	Speed 24
	Radius 12
	Height 10
	Damage 8
	Renderstyle Add
	SeeSound "vile/firecrkl"
	DeathSound "DemonMissileExplode"
	States
	{
	Spawn:
		DRFX ABCDEF 4 Bright
		Loop
	Death:
		DRFX G 4 Bright
		DRFX HIJKL 4 Bright
		TNT1 A 5 Bright A_SpawnItemEx("WHExplosion2",random(-20,20),random(-20,20),random(-20,20),0,0,0,0,40,0)
		TNT1 A 5 Bright A_SpawnItemEx("WHExplosion2",random(-20,20),random(-20,20),random(-20,20),0,0,0,0,40,0)
		TNT1 A 0 Bright A_Jump(127,6)
		TNT1 A 5 Bright A_SpawnItemEx("WHExplosion2",random(-20,20),random(-20,20),random(-20,20),0,0,0,0,40,0)
		TNT1 A 0 Bright A_Jump(127,4)
		TNT1 A 5 Bright A_SpawnItemEx("WHExplosion2",random(-20,20),random(-20,20),random(-20,20),0,0,0,0,40,0)
		TNT1 A 0 Bright A_Jump(127,2)
		TNT1 A 5 Bright A_SpawnItemEx("WHExplosion2",random(-20,20),random(-20,20),random(-20,20),0,0,0,0,40,0)
		TNT1 A 0
		Stop
	}
}

Actor WHExplosion2 : WHExplosion
{
	-FORCERADIUSDMG
	States
	{
	Spawn:
		CFCF Q 4 Bright
		CFCF R 3 Bright
		CFCF S 4 Bright A_Scream
		CFCF T 3 Bright A_Explode(40,80,0)
		CFCF U 4 Bright
		CFCF V 3 Bright
		CFCF W 4 Bright
		CFCF X 3 Bright
		CFCF Y 4 Bright
		CFCF Z 3 Bright
		Stop
	}
}

Actor DrakanDrop : CustomInventory
{
	Inventory.MaxAmount 1
	States
	{
	Use:
		TNT1 A 0
		TNT1 A 0 A_StopSound(6)
		TNT1 A 0 A_SpawnItemEx("DroppedDrakan",0,0,32,8,0,0,0,32,0)
		Stop
	}
}

Actor DroppedDrakan
{
	Radius 16
	Height 20
	States
	{
	Spawn:
		WFR1 A 15
		TNT1 A 0 A_SpawnItemEx("AEoDDrakanNoAmmo",0,0,0,0,0,0,0,48,0)
		Stop
	}
}

Actor AEoDDrakanNoAmmo : AEoDDrakanItem
{
	+FLOORCLIP
	+FLOATBOB
	+INVENTORY.IGNORESKILL
	Inventory.Amount 1
	Inventory.PickupMessage "Picked up the Drakan Dragon Blade!!"
	Inventory.PickupSound "pickuppiece"
	States
	{
	Spawn:
		WFR1 A -1
		Loop
	Pickup:
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",9) <= 0,"Nothing")
		TNT1 A 0 A_JumpIfInventory("RedMana",20,"Ammo")
		TNT1 A 0 A_GiveInventory("Weapon9Count",1)
		TNT1 A 0 A_GiveInventory("DrakanDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDDrakan",1)
		TNT1 A 0 A_TakeInventory("RedMana",20)
		TNT1 A 0 	
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDDrakan",1,"Ammo")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		TNT1 A 0 ACS_NamedExecute("s798",0,9,0,0)
		Fail
	Ammo:
		TNT1 A 0 A_TakeInventory("RedMana",20)
		TNT1 A 0 A_JumpIfInventory("AEoDDrakan",1,2)
		TNT1 A 0 A_GiveInventory("Weapon9Count",1)
		TNT1 A 0 A_GiveInventory("DrakanDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDDrakan",1)
		Stop
	}
}

//==================================================================================
//==================================================================================
//SBC Cannon
//Made by Major Cooke
//Graphics by Major Cooke, sounds from Serious Sam 3
//==================================================================================
//==================================================================================
 
 
Actor AEoDHandCannonItem : CustomInventory 6118
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL
	Scale 0.075
	Inventory.Amount 1
	Inventory.PickupMessage "You found the S.B.C. Cannon! LET'S GO BOWLING!!!"
	Inventory.PickupSound "MajorCooke/Weapons/CannonPickup"
	States
	{
	Spawn:
		HC01 Z -1
		Loop
	Pickup:
		TNT1 A 0 A_JumpIfInventory("AEoDHandCannon",1,"Ammo")
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",9) <= 0,"Nothing")
		TNT1 A 0 A_GiveInventory("Weapon9Count",1)
		TNT1 A 0 A_GiveInventory("HandCannonDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDHandCannon",1)
		TNT1 A 0 	
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDHandCannon",1,"Ammo")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		TNT1 A 0 ACS_NamedExecute("s798",0,9,0,0)
		Fail
	Ammo:
		TNT1 A 0 A_GiveInventory("AEoDHandCannon",1)
		Stop
	}
}
 
Actor AEoDHandCannon : Weapon
{
	+INVENTORY.IGNORESKILL
	+WEAPON.CHEATNOTWEAPON
	+FLOORCLIP
	Weapon.AmmoType1 "AERocket"
	Weapon.AmmoType2 "AECell"
	Weapon.AmmoGive1 5
	Weapon.AmmoGive2 50
	Weapon.AmmoUse1 10
	Weapon.AmmoUse2 150
	Weapon.SelectionOrder 11400
	Weapon.UpSound "weapons/draw"
	Inventory.PickupMessage "You found the S.B.C. Cannon! LET'S GO BOWLING!!!"
	Inventory.PickupSound "MajorCooke/Weapons/CannonPickup"
	Scale 0.1
	Tag "Hand Cannon"
	States
	{
	Spawn:
		HC01 Z -1
		Loop
	Select:
		HC02 A 1 A_Raise
		HC02 AA 0 A_Raise
		Loop
	Deselect:
		HC02 A 1 A_Lower
		HC02 AA 0 A_Lower
		Loop
	Ready:
		HC02 A 1 A_WeaponReady
		Loop
	Fire:
		HC02 A 0 A_JumpIfInventory("ThrustCounter",32,2)
		HC02 A 0 A_GiveInventory("ThrustCounter",1)
		HC02 A 0 A_TakeInventory("CannonAltChecker",999)
		HC02 A 1 A_GunFlash
		HC02 A 0 A_ReFire("Fire")
		HC02 A 0 A_JumpIfInventory("ThrustCounter",32,"F5")
		HC02 A 0 A_JumpIfInventory("ThrustCounter",24,"F4")
		HC02 A 0 A_JumpIfInventory("ThrustCounter",16,"F3")
		HC02 A 0 A_JumpIfInventory("ThrustCounter",8,"F2")
	F1:
		HC02 A 0 A_FireCustomMissile("CannonBall1",0,1,9,0)
		Goto FCont
	F2:
		HC02 A 0 A_FireCustomMissile("CannonBall2",0,1,9,0)
		Goto FCont
	F3:
		HC02 A 0 A_FireCustomMissile("CannonBall3",0,1,9,0)
		Goto FCont
	F4:
		HC02 A 0 A_FireCustomMissile("CannonBall4",0,1,9,0)
		Goto FCont
	F5:
		HC02 A 0 A_FireCustomMissile("CannonBall5",0,1,9,0)
		Goto FCont
	FCont:
		HC02 A 0 Bright A_PlayWeaponSound("MajorCooke/Weapons/CannonFire")
		HC02 A 0 A_TakeInventory("ThrustCounter",9999)
		HC02 A 0 A_GunFlash
		HC02 BB 1 A_SetPitch(pitch-5)
		HC02 CCCCCBBBBA 1 A_SetPitch(pitch+1)
		HC02 A 5
		Goto Ready
	AltFire:
		HC03 A 0 A_JumpIfInventory("AERocket",5,"Continue")
	NotEnough:
		HC03 A 5 
		Goto Ready
	Continue:
		HC03 A 0 A_PlayWeaponSound("Weapons/MajorCooke/CannonAltCharge")
		HC03 AAABBBCCCDDDEEEFFFGGGHHHIIIJJJ 1 Bright A_SpawnItemEx("CannonPrepBeam",0,10,23,cos(-pitch)*10,0,sin(-pitch)*10,0,32|SXF_TRANSFERPITCH)
		HC03 KKLLMMNNOO 1 Bright A_SpawnItemEx("CannonPrepBeam",0,10,23,cos(-pitch)*10,0,sin(-pitch)*10,0,32|SXF_TRANSFERPITCH)
		HC03 PQRST 1 Bright A_SpawnItemEx("CannonPrepBeam",0,10,23,cos(-pitch)*10,0,sin(-pitch)*10,0,32|SXF_TRANSFERPITCH)
		HC03 A 0 A_PlayWeaponSound("Weapons/MajorCooke/CannonAltFire")
		HC02 A 0 A_FireCustomMissile("DarkMatterSuperShot",0,1,5,0)
		HC02 A 0 A_TakeInventory("AERocket",5,1)
		HC02 A 0 A_SetBlend("DarkGrey",0.5,15) //I hope dark
		HC02 BB 1 A_SetPitch(pitch-5)
		HC02 CCCCCBBBBA 1 A_SetPitch(pitch+1)
		HC02 A 5
		Goto Ready
	Flash:
		DYNG A 0 A_JumpIfInventory("ThrustCounter",32,"Fl5")
		DYNG A 0 A_JumpIfInventory("ThrustCounter",24,"Fl4")
		DYNG A 0 A_JumpIfInventory("ThrustCounter",16,"Fl3")
		DYNG A 0 A_JumpIfInventory("ThrustCounter",8,"Fl2")
		DYNG A 0 A_JumpIfInventory("ThrustCounter",1,"Fl1")
		DYNG A 0
		Stop
	Fl1:
		DYNG C 8 bright
		Goto Flash
	Fl2:
		DYNG F 8 bright
		Goto Flash
	Fl3:
		DYNG I 8 bright
		Goto Flash
	Fl4:
		DYNG L 8 bright
		Goto Flash
	Fl5:
		DYNG P 8 bright
		Goto Flash
	}
}
 
Actor CannonPrepBeam
{
	var int user_limit;
	Radius 2
	Height 2
	Speed 10
	Damage 0
	Projectile
	+BLOODLESSIMPACT
	+PAINLESS
	+DONTREFLECT
	States
	{
	Spawn:
		TNT1 A 0
	Moving:
		TNT1 A 0 A_SetUserVar("user_limit",user_limit+1)
		TNT1 A 0 A_SpawnItemEx("CannonLaserTrail",0,0,0,0,0,0,0,32)
		TNT1 A 0 A_JumpIf(user_limit>=6000,"Death") //Manual override.
		TNT1 A 0 A_Warp(AAPTR_DEFAULT,cos(-pitch)*15,0,sin(-pitch)*15,0,0,"Moving")
	Death:
		TNT1 A 1
		Stop
	}
}
 
Actor DarkMatterSuperShot
{
	Projectile
	RenderStyle Add
	Speed 35
	Radius 6
	Height 8
	Damage 200
	Scale 0.35
	DamageType "PlasmaDisint"
	Projectile
	+DONTREFLECT
	+FORCERADIUSDMG
	+EXTREMEDEATH
	+SKYEXPLODE
	+ALLOWBOUNCEONACTORS
	States
	{
	Spawn:
		TNT1 A 0
	TravelLoop1:
		X043 AA 0 A_SpawnItemEx("DMSSParticles",0,0,0,5,0,0,random(0,359),32)
		X043 A 1 bright
		X043 A 0 A_SpawnItemEx("DMSSTrail",0,0,64/2,0,0,0,0,32)
		X043 A 0 A_SpawnItemEx("DMSSTrail",0,0,-64/2,0,0,0,0,32)
		X043 AA 0 A_SpawnItemEx("DMSSParticles",0,0,0,5,0,0,random(0,359),32)
		X043 A 1 bright
		X043 A 0 A_SpawnItemEx("DMSSTrail",0,12/2,63/2,0,0,0,0,32)
		X043 A 0 A_SpawnItemEx("DMSSTrail",0,-12/2,-63/2,0,0,0,0,32)
		X043 AA 0 A_SpawnItemEx("DMSSParticles",0,0,0,5,0,0,random(0,359),32)
		X043 A 1 bright
		X043 A 0 A_SpawnItemEx("DMSSTrail",0,23/2,60/2,0,0,0,0,32)
		X043 A 0 A_SpawnItemEx("DMSSTrail",0,-23/2,-60/2,0,0,0,0,32)
		X043 AA 0 A_SpawnItemEx("DMSSParticles",0,0,0,5,0,0,random(0,359),32)
		X043 A 1 bright
		X043 A 0 A_SpawnItemEx("DMSSTrail",0,34/2,54/2,0,0,0,0,32)
		X043 A 0 A_SpawnItemEx("DMSSTrail",0,-34/2,-54/2,0,0,0,0,32)
		X043 AA 0 A_SpawnItemEx("DMSSParticles",0,0,0,5,0,0,random(0,359),32)
		X043 A 1 bright
		X043 A 0 A_SpawnItemEx("DMSSTrail",0,43/2,47/2,0,0,0,0,32)
		X043 A 0 A_SpawnItemEx("DMSSTrail",0,-43/2,-47/2,0,0,0,0,32)
		X043 AA 0 A_SpawnItemEx("DMSSParticles",0,0,0,5,0,0,random(0,359),32)
		X043 A 1 bright
		X043 A 0 A_SpawnItemEx("DMSSTrail",0,51/2,39/2,0,0,0,0,32)
		X043 A 0 A_SpawnItemEx("DMSSTrail",0,-51/2,-39/2,0,0,0,0,32)
		X043 AA 0 A_SpawnItemEx("DMSSParticles",0,0,0,5,0,0,random(0,359),32)
		X043 A 1 bright
		X043 A 0 A_SpawnItemEx("DMSSTrail",0,57/2,29/2,0,0,0,0,32)
		X043 A 0 A_SpawnItemEx("DMSSTrail",0,-57/2,-29/2,0,0,0,0,32)
		X043 AA 0 A_SpawnItemEx("DMSSParticles",0,0,0,5,0,0,random(0,359),32)
		X043 A 1 bright
		X043 A 0 A_SpawnItemEx("DMSSTrail",0,62/2,18/2,0,0,0,0,32)
		X043 A 0 A_SpawnItemEx("DMSSTrail",0,-62/2,-18/2,0,0,0,0,32)
		X043 AA 0 A_SpawnItemEx("DMSSParticles",0,0,0,5,0,0,random(0,359),32)
		X043 A 1 bright
		X043 A 0 A_SpawnItemEx("DMSSTrail",0,64/2,0,0,0,0,0,32)
		X043 A 0 A_SpawnItemEx("DMSSTrail",0,-64/2,0,0,0,0,0,32)
		X043 AA 0 A_SpawnItemEx("DMSSParticles",0,0,0,5,0,0,random(0,359),32)
		//--------------------------------------------------------------------REVERSE!
		X043 A 1 bright
		X043 A 0 A_SpawnItemEx("DMSSTrail",0,62/2,-18/2,0,0,0,0,32)
		X043 A 0 A_SpawnItemEx("DMSSTrail",0,-62/2,18/2,0,0,0,0,32)
		X043 AA 0 A_SpawnItemEx("DMSSParticles",0,0,0,5,0,0,random(0,359),32)
		X043 A 1 bright
		X043 A 0 A_SpawnItemEx("DMSSTrail",0,57/2,-29/2,0,0,0,0,32)
		X043 A 0 A_SpawnItemEx("DMSSTrail",0,-57/2,29/2,0,0,0,0,32)
		X043 AA 0 A_SpawnItemEx("DMSSParticles",0,0,0,5,0,0,random(0,359),32)
		X043 A 1 bright
		X043 A 0 A_SpawnItemEx("DMSSTrail",0,51/2,-39/2,0,0,0,0,32)
		X043 A 0 A_SpawnItemEx("DMSSTrail",0,-51/2,39/2,0,0,0,0,32)
		X043 AA 0 A_SpawnItemEx("DMSSParticles",0,0,0,5,0,0,random(0,359),32)
		X043 A 1 bright
		X043 A 0 A_SpawnItemEx("DMSSTrail",0,43/2,-47/2,0,0,0,0,32)
		X043 A 0 A_SpawnItemEx("DMSSTrail",0,-43/2,47/2,0,0,0,0,32)
		X043 AA 0 A_SpawnItemEx("DMSSParticles",0,0,0,5,0,0,random(0,359),32)
		X043 A 1 bright
		X043 A 0 A_SpawnItemEx("DMSSTrail",0,34/2,-54/2,0,0,0,0,32)
		X043 A 0 A_SpawnItemEx("DMSSTrail",0,-34/2,54/2,0,0,0,0,32)
		X043 AA 0 A_SpawnItemEx("DMSSParticles",0,0,0,5,0,0,random(0,359),32)
		X043 A 1 bright
		X043 A 0 A_SpawnItemEx("DMSSTrail",0,23/2,-60/2,0,0,0,0,32)
		X043 A 0 A_SpawnItemEx("DMSSTrail",0,-23/2,60/2,0,0,0,0,32)
		X043 AA 0 A_SpawnItemEx("DMSSParticles",0,0,0,5,0,0,random(0,359),32)
		X043 A 1 bright
		X043 A 0 A_SpawnItemEx("DMSSTrail",0,12/2,-63/2,0,0,0,0,32)
		X043 A 0 A_SpawnItemEx("DMSSTrail",0,-12/2,63/2,0,0,0,0,32)
		X043 AA 0 A_SpawnItemEx("DMSSParticles",0,0,0,5,0,0,random(0,359),32)
		X043 A 1 bright
		X043 A 0 A_SpawnItemEx("DMSSTrail",0,0,64/2,0,0,0,0,32)
		X043 A 0 A_SpawnItemEx("DMSSTrail",0,0,-64/2,0,0,0,0,32)
		X043 AA 0 A_SpawnItemEx("DMSSParticles",0,0,0,5,0,0,random(0,359),32)
		Loop
	Death:
		TNT1 A 0 A_Explode(random(1024,2048),512,0)
		TNT1 A 0 A_PlayWeaponSound("weapons/infinitydispel")
		TNT1 A 0 A_SpawnItemEx("SBCShadowBig",0,0,0,0,0,0,0,32)
		TNT1 AAAAA 4 A_Explode(random(128,512),256,0)
		TNT1 AAA 8 A_Explode(random(64,128),512,0)
		Stop
	}
}
 
Actor DMSSParticles
{
	+NOINTERACTION
	Scale 0.45
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_Jump(255,1,"t2","t3","t4","t5","t6","t7","t8")
		X047 A 1 A_FadeOut(0.05)
		Wait
	t2:
		X047 B 1 A_FadeOut(0.05)
		Wait
	t3:
		X047 C 1 A_FadeOut(0.05)
		Wait
	t4:
		X047 D 1 A_FadeOut(0.05)
		Wait
	t5:
		X047 E 1 A_FadeOut(0.05)
		Wait
	t6:
		X047 F 1 A_FadeOut(0.05)
		Wait
	t7:
		X047 G 1 A_FadeOut(0.05)
		Wait
	t8:
		X047 H 1 A_FadeOut(0.05)
		Wait
	}
}
 
Actor DMSSTrail
{
	+NOINTERACTION
	Translation "0:255=%[0,0,0]:[1,1,1]"
	RenderStyle Add
	Scale 0.35
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_Jump(255,1,"T2","T3","T4")
		X042 DDDDDDDDDD 1 A_FadeOut(0.01)
		X042 D 1 A_FadeOut(0.05)
		Wait
	T2:
		X042 EEEEEEEEEE 1 A_FadeOut(0.01)
		X042 E 1 A_FadeOut(0.05)
		Wait
	T3:
		X042 FFFFFFFFFF 1 A_FadeOut(0.01)
		X042 F 1 A_FadeOut(0.05)
		Wait
	T4:
		X042 GGGGGGGGGG 1 A_FadeOut(0.01)
		X042 G 1 A_FadeOut(0.05)
		Wait
	}
}
 
Actor DisintegrationWaveSpawner
{
	var int user_wavecount;
	var int user_x;
	+NOINTERACTION
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_SetUserVar("user_wavecount",0)
		TNT1 A 0 A_SetUserVar("user_x",0)
		WaveLoop:
		TNT1 A 0 A_SetUserVar("user_x",user_x+random(10,40))
		TNT1 AA 0 A_SpawnItemEx("DisintegrateShadowMedium",user_x,0,random(-30,30),0,0,0,random(0,359),32)
		TNT1 AAAAAAAA 0 A_SpawnItemEx("DisintegrateShadowMedium",user_x,0,random(-30,30),0,0,0,random(0,359),32,128)
		TNT1 A 4 A_SetUserVar("user_wavecount",user_wavecount+1)
		TNT1 A 0 A_JumpIf(user_wavecount>=15,1)
		Loop
		TNT1 A 0
		Stop
	}
}
			   
 
Actor CannonLaserTrail
{
	+NOINTERACTION
	Speed 0
	Scale 0.75
	RenderStyle Add
	States
	{
	Spawn:
		TNT1 A 0
		X046 A 1
		Stop
	}
}
 
Actor ThrustCounter : Inventory
{
	Inventory.Amount 1
	Inventory.MaxAmount 500
}
 
Actor CannonAltChecker : Inventory {}
 
Actor CannonBall1
{
	Projectile
	+FORCERADIUSDMG
	+EXTREMEDEATH
	+BLOODLESSIMPACT
	+DONTREFLECT
	-NOGRAVITY
	+FORCEXYBILLBOARD
	+CANBOUNCEWATER
	+DONTSPLASH
	+RIPPER
	RipperLevel 2
	+BOUNCEAUTOOFFFLOORONLY
	-BOUNCEAUTOOFF
	BounceSound "dune/bounce"
	Obituary "%o now knows what it's like to be a bowling pin, thanks to %k."
	ReactionTime 150
	BounceType "Doom"
	BounceFactor 0.5
	Radius 5
	Height 5
	Damage 60
	Speed 35
	Scale 0.05
	States
	{
	Spawn:
		CB01 A 0
		CB01 A 0 ThrustThingZ(0,7,0,1)
		CB01 A 0 A_Explode(100,80,0)
		CB01 A 0 A_RadiusThrust(1200,80,RTF_NOIMPACTDAMAGE)
		CB01 A 1 A_SpawnItemEx("FTFlameTrailMini",random(-4,4),random(-2,2),random(-3,0),0,0,frandom(0,3),0,32)
		Goto Spawn+2
	Death:
		TNT1 A 0
		TNT1 A 0 A_PlaySound("MajorCooke/Weapons/CannonBallBoom")
		TNT1 A 10 A_SpawnItemEx("CBExplosion",0,0,4,0,0,0,0,48)
		Stop
	}
}
 
Actor CannonBall2 : CannonBall1
{
	Speed 45
	Damage 70
	States
	{
	Spawn:
		CB01 A 0
		CB01 A 0 ThrustThingZ(0,7,0,1)
		CB01 A 0 A_Explode(125,80,0)
		CB01 A 0 A_RadiusThrust(2000,100,RTF_NOIMPACTDAMAGE)
		CB01 A 1 A_SpawnItemEx("FTFlameTrailMini",random(-4,4),random(-2,2),random(-3,0),0,0,frandom(0,3),0,32)
		Goto Spawn+2
	}
}
 
Actor CannonBall3 : CannonBall1
{
	Speed 55
	Damage 80
	States
	{
	Spawn:
		CB01 A 0
		CB01 A 0 ThrustThingZ(0,7,0,1)
		CB01 A 0 A_Explode(150,80,0)
		CB01 A 0 A_RadiusThrust(3600,110,RTF_NOIMPACTDAMAGE)
		CB01 A 1 A_SpawnItemEx("FTFlameTrailMini",random(-4,4),random(-2,2),random(-3,0),0,0,frandom(0,3),0,32)
		Goto Spawn+2
	}
}
 
Actor CannonBall4 : CannonBall1
{
	Speed 65
	Damage 90
	States
	{
	Spawn:
		CB01 A 0
		CB01 A 0 ThrustThingZ(0,7,0,1)
		CB01 A 0 A_Explode(175,100,0)
		CB01 A 0 A_RadiusThrust(8400,120,RTF_NOIMPACTDAMAGE)
		CB01 A 1 A_SpawnItemEx("FTFlameTrailMini",random(-4,4),random(-2,2),random(-3,0),0,0,frandom(0,3),0,32)
		Goto Spawn+2
	}
}
 
Actor CannonBall5 : CannonBall1
{
	Speed 80
	Damage 100
	ReactionTime 80
	BounceFactor 0.7
	States
	{
	Spawn:
		CB01 A 0
		CB01 A 0 ThrustThingZ(0,7,0,1)
		CB01 A 0 A_Explode(200,120,0)
		CB01 A 0 A_RadiusThrust(20000,180,RTF_NOIMPACTDAMAGE)
		CB01 A 1 A_SpawnItemEx("FTFlameTrailMini",random(-4,4),random(-2,2),random(-3,0),0,0,frandom(0,3),0,32)
		Goto Spawn+2
	}
}
 
Actor CBExplosion
{
	Speed 0
	Scale 0.65
	Projectile
	+NOINTERACTION
	+EXTREMEDEATH
	RenderStyle Add
	Alpha .85
	States
	{
	Spawn:
		CB02 A 0
		CB02 C 0 Bright A_SpawnItemEx("NewExplosionBig",0,0,0,0,0,0,0,48)
		CB02 A 0 A_Explode(512,256,0)
		CB02 AB 2 bright
		CB02 CDEFG 2 bright
		CB02 HIJKL 3 bright
		CB02 MNOPQRS 1 bright
		Stop
	}
}
 
Actor HandCannonDrop : CustomInventory
{
	Inventory.MaxAmount 1
	States
	{
	Use:
		TNT1 A 0
		TNT1 A 0 A_SpawnItemEx("DroppedHandCannon",0,0,32,8,0,0,0,32,0)
		Stop
	}
}
 
Actor DroppedHandCannon
{
	Radius 16
	Height 20
	Scale 0.075
	States
	{
	Spawn:
		HC01 Z 15
		TNT1 A 0 A_SpawnItemEx("AEoDHandCannonNoAmmo",0,0,0,0,0,0,0,48,0)
		Stop
	}
}
 
Actor AEoDHandCannonNoAmmo : AEoDHandCannonItem
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL
	Scale 0.075
	Inventory.Amount 1
	Inventory.PickupMessage "You found the S.B.C. Cannon! LET'S GO BOWLING!!!"
	Inventory.PickupSound "MajorCooke/Weapons/CannonPickup"
	States
	{
	Spawn:
		HC01 Z -1
		Loop
	Pickup:
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",9) <= 0,"Nothing")
		TNT1 A 0 A_JumpIfInventory("AERocket",3,"Ammo")
		TNT1 A 0 A_GiveInventory("Weapon9Count",1)
		TNT1 A 0 A_GiveInventory("HandCannonDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDHandCannon",1)
		TNT1 A 0 A_TakeInventory("AERocket",3)
		TNT1 A 0 	
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDHandCannon",1,"Ammo")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		TNT1 A 0 ACS_NamedExecute("s798",0,9,0,0)
		Fail
	Ammo:
		TNT1 A 0 A_TakeInventory("AERocket",3)
		TNT1 A 0 A_JumpIfInventory("AEoDHandCannon",1,2)
		TNT1 A 0 A_GiveInventory("Weapon9Count",1)
		TNT1 A 0 A_GiveInventory("HandCannonDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDHandCannon",1)
		Stop
	}
}




//=====================================================================================
//=====================================================================================
// CrossBow (Necross Bow or something)
// by DBThanatos
// Alt-fire by Major Cooke
//=====================================================================================
/*
Primary is simple enough, shoots three powerful darts that impact enemies and deal
quite incredible damage.

Secondary attack throws a mortified head which stops in midair, then proceeds to
chuck up a large gib storm that seek to shred everything down to chunky chicken
soup bits. Sounds delicious! -M.C.

Ripped from Painkiller
*/
//=====================================================================================
Actor AEoDNecrossbowItem : CustomInventory
{
	Scale 0.15
	+FLOORCLIP
	+INVENTORY.IGNORESKILL
	Inventory.Amount 1
	Inventory.PickupMessage "You got a nasty looking crossbow."
	Inventory.PickupSound "painkiller/weapon/boltgun/PickWeapon"
	States
	{
	Spawn:
		D010 Z -1
		Loop
	Pickup:
		TNT1 A 0 A_JumpIfInventory("AEoDNecrossbow",1,"Ammo")
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",9) <= 0,"Nothing")
		TNT1 A 0 A_GiveInventory("Weapon9Count",1)
		TNT1 A 0 A_GiveInventory("NecrossbowDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDNecrossbow",1)
		TNT1 A 0 	
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDNecrossbow",1,"Ammo")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		TNT1 A 0 ACS_NamedExecute("s798",0,9,0,0)
		Fail
	Ammo:
		TNT1 A 0 A_GiveInventory("AEoDNecrossbow",1)
		Stop
	}
}


Actor NecrossbowDrop : CustomInventory
{
	Inventory.MaxAmount 1
	States
	{
	Use:
		TNT1 A 0
		TNT1 A 0 A_SpawnItemEx("DroppedNecrossbow",0,0,32,8,0,0,0,32,0)
		Stop
	}
}


Actor DroppedNecrossbow
{
	Radius 16
	Height 20
	Scale 0.15
	States
	{
	Spawn:
		D010 Z 15
		TNT1 A 0 A_SpawnItemEx("AEoDNecrossbowNoAmmo",0,0,0,0,0,0,0,48,0)
		Stop
	}
}

Actor AEoDNecrossbowNoAmmo : AEoDNecrossbowItem
{
	+INVENTORY.IGNORESKILL
	States
	{
	Spawn:
		D010 Z -1
		Loop
	Pickup:
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",9) <= 0,"Nothing")
		TNT1 A 0 A_JumpIfInventory("AENails",60,"Ammo")
		TNT1 A 0 A_JumpIfInventory("DarkMana",10,"Ammo3")
		TNT1 A 0 A_GiveInventory("Weapon9Count",1)
		TNT1 A 0 A_GiveInventory("NecrossbowDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDNecrossbow",1)
		TNT1 A 0 A_TakeInventory("AENails",60)
		TNT1 A 0 A_TakeInventory("DarkMana",10)
		TNT1 A 0 	
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDNecrossbow",1,"Ammo")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		TNT1 A 0 ACS_NamedExecute("s798",0,9,0,0)
		Fail
	Ammo:
		TNT1 A 0 A_JumpIfInventory("DarkMana",10,1)
		Goto Ammo2
		TNT1 A 0 A_TakeInventory("AENails",60)
		TNT1 A 0 A_TakeInventory("DarkMana",10)
		TNT1 A 0 A_JumpIfInventory("AEoDNecrossbow",1,2)
		TNT1 A 0 A_GiveInventory("Weapon9Count",1)
		TNT1 A 0 A_GiveInventory("NecrossbowDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDNecrossbow",1)
		Stop
	Ammo2:
		TNT1 A 0 A_TakeInventory("AENails",60)
		TNT1 A 0 A_GiveInventory("Weapon9Count",1)
		TNT1 A 0 A_GiveInventory("NecrossbowDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDNecrossbow",1)
		TNT1 A 0 A_TakeInventory("DarkMana",10)
		Stop
	Ammo3:
		TNT1 A 0 A_TakeInventory("DarkMana",10)
		TNT1 A 0 A_GiveInventory("Weapon9Count",1)
		TNT1 A 0 A_GiveInventory("NecrossbowDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDNecrossbow",1)
		TNT1 A 0 A_TakeInventory("AENails",60)
		Stop
	}
}




Actor AEoDNecrossbow : Weapon
{
	Scale 0.15
	Weapon.AmmoType "AENails"
	Weapon.AmmoUse 14
	Weapon.AmmoGive 60
	Weapon.AmmoType2 "DarkMana"
	Weapon.AmmoUse2 10
	Weapon.AmmoGive2 10
	Weapon.SelectionOrder 11650
	Inventory.PickupSound "painkiller/weapon/boltgun/PickWeapon"
	weapon.upsound "weapons/draw"
	Tag "Necrossbow"
	States
	{
	Spawn:
		D010 Z -1
		Stop
	Ready:
		D010 A 1 A_WeaponReady
		Loop
	Deselect:
		TNT1 A 0 	
		D010 A 1 A_Lower
		D010 AA 0 A_Lower
		Loop
	Select:
		TNT1 A 0 	
		D010 A 1 A_Raise
		D010 AA 0 A_Raise
		Loop
	Fire:
		TNT1 A 0 A_PlaySound("painkiller/weapon/crossbow/BoltsShoot",6)
		TNT1 A 0 A_FireCustomMissile("NecrossbowArrow",0,1,6)
		TNT1 A 0 A_FireCustomMissile("NecrossbowArrow",0,0,4)
		TNT1 A 0 A_FireCustomMissile("NecrossbowArrow",0,0,8)
		D010 B 2 A_SetPitch(pitch-5)
		D010 C 6
		D010 DDDDEEEEFF 1 A_SetPitch(pitch+0.5)
		D010 F 2 
		D010 GH 4
		Goto Ready
	AltFire:
		TNT1 A 0 A_PlaySound("painkiller/weapon/crossbow/HeadsShoot",6)
		TNT1 A 0 A_FireCustomMissile("NecrossbowHead",0,1,6)
		TNT1 A 0 A_SetBlend("60 10 10",0.8,35)
		D010 I 8 A_SetPitch(pitch-8)
		D010 JJJJJJJJ 1 A_SetPitch(pitch+1)
		TNT1 A 0 A_PlaySound("painkiller/weapon/crossbow/HeadsReload",6)
		D010 KLMNAAA 4
		Goto Ready
	}
}

Actor NecrossbowArrow : FastProjectile
{
	Projectile
	Speed 55
	SeeSound ""
	DeathSound ""
	Radius 4
	Height 7
	Damage 4
	+RIPPER
	RipperLevel 3
	PoisonDamage 20
	MissileType "BoltTrail2"
	MissileHeight 8
	Scale 0.3
	Translation "0:255=80:111"
	States
	{
	Spawn:
		ARWP A 1
		Loop
	XDeath:
	Crash:
		TNT1 A 1 
		Stop
	Death:
		ARWP A 300
		ARWP A 1 A_FadeOut
		Wait
	}
}
Actor BoltTrail2
{
	+NOINTERACTION
	Scale 0.07
	RenderStyle Translucent
	Alpha 0.7
	States
	{
	Spawn:
		FX04 D 1 Bright A_FadeOut(0.12)
		Wait
	}
}

//********************************************************
Actor NecrossbowHead
{
	var int user_gibcount;
	var int user_explolimit;
	var int user_stopped;
	Radius 8
	Height 12
	Speed 12
	Scale 0.37
	Projectile
	+ALLOWBOUNCEONACTORS
	+BOUNCEONACTORS
	+CANBOUNCEWATER
	+DONTREFLECT
	+FORCERADIUSDMG
	+EXTREMEDEATH
	+FOILINVUL
	BounceType "Hexen"
	BounceFactor 0
	WallBounceFactor 1
	States
	{
	Spawn:
		Q99A KKKKKKKK 2
		Q99A K 0 A_SetUserVar(user_stopped,1)
		Q99A K 0 A_Stop
		Q99A K 0 A_CheckFloor("FloorBump")
		Q99A K 0 A_CheckCeiling("CeilingBump")
		Goto GibHomer
	FloorBump:
		Q99A K 15 ThrustThingZ(0,5,0,1)
		Q99A K 0 A_Stop
		Goto GibHomer
	CeilingBump:
		Q99A K 15 ThrustThingZ(0,-5,0,1)
		Q99A K 0 A_Stop
		Goto GibHomer
	GibHomer:
		Q99A K 0 A_ChangeFlag("FLOATBOB",1)
		Q99A K 0 A_SetUserVar("user_explolimit",0)
		Q99A K 5 A_SetUserVar("user_gibcount",0)
	GibStaging:
		Q99A K 0 A_CustomMissile("GibTargeter",0,0,random(0,360),6,random(-90,90))
		Q99A K 0 A_Explode(20,128,0)
		Q99A K 0 A_SetUserVar("user_gibcount",user_gibcount+1)
		Q99A K 8 A_JumpIf(user_gibcount>20,1)
		Loop
		Q99A K 70 A_SetUserVar("user_gibcount",0)
	GibExplodeSet:
		Q99A K 0 A_SpawnItemEx("QuakeGibDropper",0,0,0,0,0,0,0,32,0,19999) //A_CustomMissile("GibNade",20,0,random(0,360),6,random(-35,85))
		Q99A K 0 A_Explode(200,256,0)
		Q99A K 0 A_SetUserVar("user_explolimit",user_explolimit+1)
		Q99A K 4 A_JumpIf(user_explolimit>=3,"Death")
		Goto GibExplodeSet
	Death:
		Q99A K 0 A_JumpIf(user_stopped != 0,2)
		TNT1 A 0 A_Explode(random(3200,6400),512,0) //What? It does the same amount of damage as the Popcorn Bomb! For ten dark mana, it fucking better!
		TNT1 A 0 A_SpawnItemEx("SpecialExploSpawner",0,0,0,0,0,0,0,32)
		TNT1 AAA 0 A_SpawnItemEx("QuakeGibDropper",0,0,0,0,0,0,0,32,0,19999)
		TNT1 A 1 A_PlaySound("other/gibdeath")
		Stop
	}
}

Actor GibTargeter
{
	Speed 2
	Radius 8
	Height 6
	Scale 0.6
	Projectile
	+SEEKERMISSILE
	+THRUACTORS
	+DONTREFLECT
	+ALLOWBOUNCEONACTORS
	+BOUNCEONACTORS
	+CANBOUNCEWATER
	+FLOORCLIP
	BounceType "Hexen"
	BounceFactor 0
	WallBounceFactor 0
	States
	{
	Spawn:
		TNT1 A 0
		GIB1 AABBCCD 2
		GIB1 D 0 A_Stop
		GIB1 D 2 A_ChangeFlag("FLOATBOB",1)
		GIB1 EEFFGGAABBCCDDEEFFGG 2
		GIB1 A 0 A_SeekerMissile(90,90,SMF_LOOK|SMF_PRECISE,256)
		GIB1 A 0 A_FaceTracer
		GIB1 A 0 A_CustomMissile("GibSeeker",0,0,0,6)
		Stop
	}
}

Actor GibSeeker
{
	Projectile
	Speed 30
	Radius 12
	Height 10
	Damage 20
	Scale 0.6
	DamageType "Unholy"
	+SEEKERMISSILE
	+DONTREFLECT
	+SKYEXPLODE
	+FORCERADIUSDMG
	+EXTREMEDEATH
	+FOILINVUL
	States
	{
	Spawn:
		TNT1 A 0
		GIB1 ABCDEFG 4 A_SeekerMissile(30,30,3,256)
		Loop
	Death:
		TNT1 A 0 A_Explode(128,256,0,0,128)
		TNT1 A 0 A_SpawnItemEx("QuakeGibDropper",0,0,random(10,20),0,0,0,0,32,0,19999)
		TNT1 A 0 A_PlaySound("other/gibdeath")
		TNT1 A 1
		Stop
	}
}

Actor GibSeekerTrail
{
	+NOINTERACTION
	Scale 0.2
	RenderStyle Add
	Alpha 0.5
	States
	{
	Spawn:
		TNT1 A 0
		GIB1 F 2 A_FadeOut(0.02)
		Wait
	}
}


Actor Zomblood
{
	Projectile
	Speed 0
	-NOGRAVITY
	Scale 0.3
	Gravity 0.4
	+DONTSPLASH
	+DONTBLAST
	States
	{
	Spawn:
		BLD1 ABCD 6
		Stop
	}
}








//==============================================================================
//==============================================================================
//									Popcorn Gun
//==============================================================================
//==============================================================================

Actor AEoDPopcornGunItem : CustomInventory 
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL
	Inventory.Amount 1
	Inventory.PickupMessage "You got the Popcorn Gun! Don't eat the popcorn..." 
	Inventory.PickupSound "weaponbuild" 
	Scale 0.75
	States
	{
	Spawn:
		M004 z -1
		Loop
	Pickup:
		TNT1 A 0 A_JumpIfInventory("AEoDPopcornGun",1,"Ammo")
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",9) <= 0,"Nothing")
		TNT1 A 0 A_GiveInventory("Weapon9Count",1)
		TNT1 A 0 A_GiveInventory("PopcornGunDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDPopcornGun",1)
		TNT1 A 0 	
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDPopcornGun",1,"Ammo")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		TNT1 A 0 ACS_NamedExecute("s798",0,9,0,0)
		Fail
	Ammo:
		TNT1 A 0 A_GiveInventory("AEoDPopcornGun",1)
		Stop
	}
}

Actor PopcornGunDrop : CustomInventory
{
	Inventory.MaxAmount 1
	States
	{
	Use:
		TNT1 A 0
		TNT1 A 0 A_SpawnItemEx("DroppedPopcornGun",0,0,32,8,0,0,0,32,0)
		Stop
	}
}

Actor DroppedPopcornGun
{
	Radius 16
	Height 20
	Scale 0.75
	States
	{
	Spawn:
		M004 z 15
		TNT1 A 0 A_SpawnItemEx("AEoDPopcornGunNoAmmo",0,0,0,0,0,0,0,48,0)
		Stop
	}
}

Actor AEoDPopcornGunNoAmmo : AEoDPopcornGunItem
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL
	Inventory.Amount 1
	Inventory.PickupMessage "You got the Popcorn Gun! Don't eat the popcorn..." 
	Inventory.PickupSound "weaponbuild" 
	Scale 0.75
	States
	{
	Spawn:
		M004 z -1
		Loop
	Pickup:
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",9) <= 0,"Nothing")
		TNT1 A 0 A_JumpIfInventory("ASTF",50,"Ammo")
		TNT1 A 0 A_GiveInventory("Weapon9Count",1)
		TNT1 A 0 A_GiveInventory("PopcornGunDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDPopcornGun",1)
		TNT1 A 0 A_TakeInventory("ASTF",50)
		TNT1 A 0 	
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDPopcornGun",1,"Ammo")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		TNT1 A 0 ACS_NamedExecute("s798",0,9,0,0)
		Fail
	Ammo:
		TNT1 A 0 A_TakeInventory("ASTF",50)
		TNT1 A 0 A_JumpIfInventory("AEoDPopcornGun",1,2)
		TNT1 A 0 A_GiveInventory("Weapon9Count",1)
		TNT1 A 0 A_GiveInventory("PopcornGunDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDPopcornGun",1)
		Stop
	}
}

Actor AEoDPopcornGun : Weapon
{
	Weapon.SelectionOrder 100
	Inventory.PickupSound "POPFIRE" 
	Weapon.AmmoType "ASTF" 
	Weapon.AmmoType2 "ASTF" 
	Weapon.AmmoGive 50 
	Weapon.AmmoUse 1
	Weapon.AmmoUse2 70
	Weapon.SelectionOrder 9250
	Inventory.PickupMessage "You got the Popcorn Gun! Don't eat the popcorn..." 
	Obituary "%o ate some of %k's popcorn."
	Weapon.UpSound "weapons/draw"
	AttackSound "" 
	Scale 0.75
	Tag "Popcorn gun"
	States 
	{ 
	Spawn: 
		M004 z -1 
		Loop 
	Ready: 
		M004 AAACCCDDDEEEFFFGGG 1 A_WeaponReady 
		Loop 
	Deselect: 
		TNT1 A 0 	
		M004 A 1 A_Lower
		M004 AA 0 A_Lower
		Loop 
	Select: 
		TNT1 A 0 	
		M004 A 1 A_Raise 
		M004 AA 0 A_Raise
		Loop 
	Fire:
		M004 A 0 A_PlaySound("POPFIRE")
		M004 A 0 A_FireCustomMissile("Popcorn1", frandom(-2.0,2.0), 1, 6, frandom(-2,2),0,frandom(-2.0,2.0))
		TNT1 A 0 A_Jump(128,3)
		M004 AAAA 1 A_FireCustomMissile("Popcorn1", frandom(-2.0,2.0), 0, frandom(3,6), frandom(-2,2),0,frandom(-2.0,2.0))
		TNT1 A 0 A_Jump(128,3)
		M004 BBBB 1 A_FireCustomMissile("Popcorn1", frandom(-2.0,2.0), 0, frandom(3,6), frandom(-2,2),0,frandom(-2.0,2.0))
		M004 A 0 A_Jump(8,"CorruptCorn")
		Goto Ready
	CorruptCorn:
		M004 A 0 A_PlaySound("POPFIRE")
		M004 A 0 A_FireCustomMissile("CorruptPopcorn", frandom(-2.0,2.0),0,frandom(3,6),frandom(-2,2))
		Goto Ready
	AltFire:
		M004 ABABA 3 A_PlaySound("POPFIRE")
		M004 B 0 A_FireCustomMissile("PopcornBomb",2,1,6)
		M004 B 1 A_SetPitch(pitch-5)
		M004 AAAAA 1 A_SetPitch(pitch+1)
		M004 A 30
		Goto Ready 
	} 
}
//-------------------------------------------------------------------
// Primary fire
Actor Popcorn1
{
	var int user_dmgtype;
	Radius 8
	Height 6
	Speed 25
	Damage 2
	Scale 0.25
	Projectile
	+EXTREMEDEATH
	+FORCERADIUSDMG
	+NODAMAGETHRUST
	+DONTREFLECT
	+RANDOMIZE
	+FOILINVUL
	+INVULNERABLE
	+HITTRACER
	Alpha 0.8
	SeeSound ""
	DeathSound "" 
	DamageType "Normal"
	DeathType "Extreme"
	States
	{
	Spawn:
		TNT1 A 0 NoDelay Thing_SetTranslation(0,random(47,98)) //Maybe this will help...
		TNT1 A 0 A_Jump(96,2)
		TNT1 A 0 A_ChangeFlag("PAINLESS",1)
	DmgSetter:
		TNT1 A 0 A_Jump(256,"DmgFire","DmgIce","DmgPlasma","DmgElectric","DmgHoly",
			"DmgUnholy","DmgMagic","DmgNormal")
	DmgFire:
		TNT1 A 0 A_SetDamageType("Fire")
		TNT1 A 0 A_SetUserVar("user_dmgtype",1)
		TNT1 A 0 Thing_SetTranslation(0,randompick(random(58,62),random(73,74)))
		Goto AnimChoice
	DmgIce:
		TNT1 A 0 A_SetDamageType("Ice")
		TNT1 A 0 A_SetUserVar("user_dmgtype",2)
		TNT1 A 0 Thing_SetTranslation(0,randompick(random(68,72),random(92,93)))
		Goto AnimChoice
	DmgPlasma:
		TNT1 A 0 A_SetDamageType("Plasma")
		TNT1 A 0 A_SetUserVar("user_dmgtype",3)
		TNT1 A 0 A_Jump(128,2)
		TNT1 A 0 Thing_SetTranslation(0,randompick(random(63,67),random(81,82)))
		Goto AnimChoice
	DmgElectric:
		TNT1 A 0 A_SetDamageType("Electric")
		TNT1 A 0 A_SetUserVar("user_dmgtype",4)
		TNT1 A 0 Thing_SetTranslation(0,randompick(random(75,76),random(83,84)))
		Goto AnimChoice
	DmgHoly:
		TNT1 A 0 A_SetDamageType("Holy")
		TNT1 A 0 A_SetUserVar("user_dmgtype",5)
		TNT1 A 0 Thing_SetTranslation(0,random(95,98))
		Goto AnimChoice
	DmgUnholy:
		TNT1 A 0 A_SetDamageType("Unholy")
		TNT1 A 0 A_SetUserVar("user_dmgtype",6)
		TNT1 A 0 Thing_SetTranslation(0,random(47,50))
		Goto AnimChoice
	DmgMagic:
		TNT1 A 0 A_SetDamageType("AEMagic")
		TNT1 A 0 A_SetUserVar("user_dmgtype",7)
		TNT1 A 0 Thing_SetTranslation(0,random(77,94))
		Goto AnimChoice
	DmgNormal:
		TNT1 A 0 Thing_SetTranslation(0,random(47,98))
	AnimChoice:
		TNT1 A 0 A_Jump(256,"Type1","Type2","Type3","Type4")
	Type1:
		X140 IJKLMNOP random(1,3) 
		Loop
	Type2:
		X140 HGFEDCBA random(1,3) 
		Loop
	Type3:
		X140 ABCDEFGH random(1,3)
		Loop
	Type4:
		X140 QRSTUVWX random(1,3)
		Loop
	Crash:
	XDeath:
		X140 A 0 A_CheckFlag("SHOOTABLE",1,AAPTR_TRACER)
		Goto Death
		X140 A 0 A_JumpIf(	CheckClass("HTC2Fluffy",AAPTR_TRACER,1) ||
							CheckClass("HTC2MiniFluffy",AAPTR_TRACER,1) ||
							CheckClass("HTC2JumpingSkull",AAPTR_TRACER,1) ||
							CheckClass("HTC2GhostSkull",AAPTR_TRACER,1) ||
							CheckClass("HTC2Bingo",AAPTR_TRACER,1) ||
							CheckClass("HTC2TinyBingo",AAPTR_TRACER,1) ||
							CheckClass("HTC2DraedicClownGhost",AAPTR_TRACER,1) ||
							CheckClass("HTC2VileClownGhost",AAPTR_TRACER,1) ||
							CheckClass("HTC2Bulby",AAPTR_TRACER,1) ||
							CheckClass("HTC2MegaBulby",AAPTR_TRACER,1) ||
							CheckClass("HTC2Beefy",AAPTR_TRACER,1) ||
							CheckClass("HTC2BlackBear",AAPTR_TRACER,1) ||
							CheckClass("BerthaBear",AAPTR_TRACER,1) ||
							CheckClass("BlackBear",AAPTR_TRACER,1) ||
							CheckClass("HTC2BigBertha",AAPTR_TRACER,1) ||
							CheckClass("HTC2PossessedBalloon",AAPTR_TRACER,1) ||
							CheckClass("HTC2EvilDeadHand",AAPTR_TRACER,1) ||
							CheckClass("HTC2PennywiseHead",AAPTR_TRACER,1) ||
							CheckClass("HTC2PennywiseTDC",AAPTR_TRACER,1) ||
							CheckClass("HTC2SuperBertha",AAPTR_TRACER,1) ||
							CheckClass("HTC2BouncingClown",AAPTR_TRACER,1) ||
							CheckClass("HTC2BabyClown",AAPTR_TRACER,1),1)
		Goto Death
		X140 A 0 A_DamageTracer(666,None,DMSS_FOILINVUL)
	Death:
		X140 A 0 A_Explode(random(4,10),64,0)
		TNT1 A 0 A_JumpIf(user_dmgtype > 0, 2)
		TNT1 A 0 Thing_SetTranslation(0,random(47,98))
		TNT1 A 0 A_SpawnItemEx("TinyExplo",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION)
		Stop
	}
}

Actor CorruptPopcorn
{
	Projectile
	-NOGRAVITY
	+BOUNCEONWALLS
	+BOUNCEONCEILINGS
	+SKYEXPLODE
	+THRUACTORS
	Gravity 0.75
	Scale 0.25
	Alpha 0.9
	Speed 35
	Radius 16
	Height 8
	States
	{
	Spawn:
		X140 A 1 A_RearrangePointers(AAPTR_NULL,AAPTR_NULL,AAPTR_NULL,3) 
		Loop
	Death:
		N026 O 4
		N026 PQ 3
		N026 Q 0 A_Jump(192,"S2")
	S1:
		N026 Q 0 A_SpawnItemEx("HostileBabyClown",0,0,0,0,0,0,0,SXF_NOPOINTERS|SXF_SETTARGET)	//See MonHTC2.AED
		Stop
	S2:
		N026 Q 0 A_SpawnItemEx("HostileBlackBear",random(-5,5),random(-5,5),0,0,0,0,random(0,359),32|SXF_NOPOINTERS|SXF_SETTARGET)	//See MonHTC2.AED
		N026 Q 0 A_SpawnItemEx("HostileBlackBear",random(-5,5),random(-5,5),0,0,0,0,random(0,359),32|SXF_NOPOINTERS|SXF_SETTARGET,164)
		Stop
	}
}


//-------------------------------------------------------------------
// Secondary fire
Actor PopcornBomb
{
	var int user_popcount;
	var int user_explolimit;
	var int user_engaged;
	Radius 16
	Height 12
	Speed 12
	Projectile
	+ALLOWBOUNCEONACTORS
	+BOUNCEONACTORS
	+CANBOUNCEWATER
	+DONTREFLECT
	+FORCERADIUSDMG
	+EXTREMEDEATH
	+FOILINVUL
	+INVULNERABLE
	PainType "AntiClown"
	BounceType "Hexen"
	BounceFactor 0
	WallBounceFactor 1
	+PAINLESS
	States
	{
	Spawn:
		X140 ABCDEFGH 2
		X140 A 0 A_Stop
		X140 A 0 A_CheckFloor("FloorBump")
		X140 A 0 A_CheckCeiling("CeilingBump")
		Goto PopcornHomer
	FloorBump:
		X140 A 15 ThrustThingZ(0,10,0,1)
		X140 A 0 A_Stop
		Goto PopcornHomer
	CeilingBump:
		X140 A 15 ThrustThingZ(0,-10,0,1)
		X140 A 0 A_Stop
		Goto PopcornHomer
	PopcornHomer:
		X140 A 0 A_SetUserVar("user_engaged",1)
		X140 A 0 A_ChangeFlag("FLOATBOB",1)
	PopcornStaging:
		X140 A 0 A_CustomMissile("PopcornTargeter",0,0,random(0,360),6,random(-90,90))
		X140 A 0 A_Explode(2,128,0,0)
		X140 A 0 A_SetUserVar("user_popcount",user_popcount+1)
		X140 A 1 A_JumpIf(user_popcount>400,1)
		Loop
		X140 A 140 A_SetUserVar("user_popcount",0)
	PopcornExplodeSet:
		X140 AAAAAAAAAA 0 A_CustomMissile("PopcornNade",20,0,random(0,360),6,random(-35,85))
		X140 A 0 A_Explode(50,256,0,0)
		X140 A 0 A_SetUserVar("user_popcount",user_popcount+1)
		X140 A 0 A_JumpIf(user_popcount>=10,1)
		Loop
		X140 A 0 A_SetUserVar("user_explolimit",user_explolimit+1)
		X140 A 0 A_SetUserVar("user_popcount",0)
		X140 A 4 A_JumpIf(user_explolimit>=3,"Death")
		Goto PopcornExplodeSet
	Death:
		TNT1 A 0 A_JumpIf(user_engaged==1,2)
		TNT1 A 0 A_Explode(random(3200,6400),512,0)
		TNT1 A 1 A_SpawnItemEx("specialexplospawner",0,0,0,0,0,0,0,32)
		Stop
	}
}

Actor PopcornTargeter
{
	var int user_vel[3];
	Speed 3
	Radius 8
	Height 6
	Scale 0.2
	Projectile
	+SEEKERMISSILE
	+THRUACTORS
	+DONTREFLECT
	+ALLOWBOUNCEONACTORS
	+BOUNCEONACTORS
	+BOUNCEONFLOORS
	+CANBOUNCEWATER
	+FLOORCLIP
	+INVULNERABLE
	PainType "AntiClown"
	BounceType "Hexen"
	BounceFactor 1.0
	WallBounceFactor 0
	States
	{
	Spawn:
		X140 A 0 NoDelay A_SetUserArray("user_vel",0,velx)
		X140 A 0 A_SetUserArray("user_vel",1,vely)
		X140 A 0 A_SetUserArray("user_vel",2,velz)
		X140 A 10
		X140 A 0 A_JumpIf(z-floorz<=6,"CorrectFloor")
	CorrectFloor:
		"####" "#" 0 A_Warp(AAPTR_DEFAULT,0,0,7,0,WARPF_NOCHECKPOSITION|WARPF_INTERPOLATE|WARPF_STOP)
		Goto Continue
	Continue:
		X140 A 0 A_Stop
		//X140 A 0 A_ScaleVelocity(0.0)
		X140 A 0 A_ChangeFlag("FLOATBOB",1)
		X140 AAAAAAAAAAAAAAAA 5 //A_SeekerMissile(90,90,SMF_LOOK,256)
		X140 AAAAA 0 A_SeekerMissile(90,90,SMF_LOOK|SMF_PRECISE,256)
		//X140 A 0 A_CustomMissile("PopcornSeeker",0,0,0,6)
		X140 A 0 A_SpawnItemEx("PopcornSeeker",0,0,0,user_vel[0],user_vel[1],user_vel[2],0,32|SXF_ABSOLUTEMOMENTUM|SXF_TRANSFERPOINTERS|SXF_TRANSFERPITCH)
		Stop
	}
}

Actor PopcornNade
{
	var int user_explopicker;
	Radius 8
	Height 6
	Speed 35
	Damage 2
	Scale 0.25
	Projectile
	-NOGRAVITY
	+EXTREMEDEATH
	+FORCERADIUSDMG
	+NODAMAGETHRUST
	+DONTREFLECT
	+FOILINVUL
	+INVULNERABLE
	+HITTRACER
	PainType "AntiClown"
	BounceType "Doom"
	ReactionTime 30
	Gravity 1
	Alpha 0.8
	SeeSound ""
	DeathSound ""
	States
	{
	Spawn:
		X140 ABCDEFGH 2 //A_SeekerMissile(5,10,1)
		X140 A 0 A_CountDown
		Goto Spawn
	Crash:
	XDeath:
		X140 A 0 A_CheckFlag("SHOOTABLE",1,AAPTR_TRACER)
		Goto Death
		X140 A 0 A_JumpIf(	CheckClass("HTC2Fluffy",AAPTR_TRACER,1) ||
							CheckClass("HTC2MiniFluffy",AAPTR_TRACER,1) ||
							CheckClass("HTC2JumpingSkull",AAPTR_TRACER,1) ||
							CheckClass("HTC2GhostSkull",AAPTR_TRACER,1) ||
							CheckClass("HTC2Bingo",AAPTR_TRACER,1) ||
							CheckClass("HTC2TinyBingo",AAPTR_TRACER,1) ||
							CheckClass("HTC2DraedicClownGhost",AAPTR_TRACER,1) ||
							CheckClass("HTC2VileClownGhost",AAPTR_TRACER,1) ||
							CheckClass("HTC2Bulby",AAPTR_TRACER,1) ||
							CheckClass("HTC2MegaBulby",AAPTR_TRACER,1) ||
							CheckClass("HTC2Beefy",AAPTR_TRACER,1) ||
							CheckClass("HTC2BlackBear",AAPTR_TRACER,1) ||
							CheckClass("BerthaBear",AAPTR_TRACER,1) ||
							CheckClass("BlackBear",AAPTR_TRACER,1) ||
							CheckClass("HTC2BigBertha",AAPTR_TRACER,1) ||
							CheckClass("HTC2PossessedBalloon",AAPTR_TRACER,1) ||
							CheckClass("HTC2EvilDeadHand",AAPTR_TRACER,1) ||
							CheckClass("HTC2PennywiseHead",AAPTR_TRACER,1) ||
							CheckClass("HTC2PennywiseTDC",AAPTR_TRACER,1) ||
							CheckClass("HTC2SuperBertha",AAPTR_TRACER,1) ||
							CheckClass("HTC2BouncingClown",AAPTR_TRACER,1) ||
							CheckClass("HTC2BabyClown",AAPTR_TRACER,1),1)
		Goto Death
		X140 A 0 A_DamageTracer(666,None,DMSS_FOILINVUL)
	Death:
		X140 A 0 A_Explode(random(7,35),64,0)
		TNT1 A 0 Thing_SetTranslation(0,random(47,98))
		TNT1 A 0 A_SpawnItemEx("TinyExplo",0,0,0,0,0,0,0,32|SXF_TRANSFERTRANSLATION)
		Stop
	}
}


Actor PopcornSeeker : Popcorn1
{
	Damage 2
	BounceFactor 1.0
	+SEEKERMISSILE
	+BOUNCEONFLOORS
	+INVULNERABLE
	PainType "AntiClown"
	States
	{
	Type1:
		X140 IJKLMNOP 2 A_SeekerMissile(2,10,3,256,10)
		X140 I 0 A_ChangeFlag("BOUNCEONFLOORS",0)
		Loop
	Type2:
		X140 HGFEDCBA 2 A_SeekerMissile(2,10,3,256,10)
		X140 A 0 A_ChangeFlag("BOUNCEONFLOORS",0)
		Loop
	Type3:
		X140 ABCDEFGH 2 A_SeekerMissile(2,10,3,256,10)
		X140 H 0 A_ChangeFlag("BOUNCEONFLOORS",0)
		Loop
	Type4:
		X140 QRSTUVWX 2 A_SeekerMissile(2,10,3,256,10)
		X140 X 0 A_ChangeFlag("BOUNCEONFLOORS",0)
		Loop
	Crash:
	XDeath:
		X140 A 0 A_CheckFlag("SHOOTABLE",1,AAPTR_TRACER)
		Goto Death
		X140 A 0 A_JumpIf(	CheckClass("HTC2Fluffy",AAPTR_TRACER,1) ||
							CheckClass("HTC2MiniFluffy",AAPTR_TRACER,1) ||
							CheckClass("HTC2JumpingSkull",AAPTR_TRACER,1) ||
							CheckClass("HTC2GhostSkull",AAPTR_TRACER,1) ||
							CheckClass("HTC2Bingo",AAPTR_TRACER,1) ||
							CheckClass("HTC2TinyBingo",AAPTR_TRACER,1) ||
							CheckClass("HTC2DraedicClownGhost",AAPTR_TRACER,1) ||
							CheckClass("HTC2VileClownGhost",AAPTR_TRACER,1) ||
							CheckClass("HTC2Bulby",AAPTR_TRACER,1) ||
							CheckClass("HTC2MegaBulby",AAPTR_TRACER,1) ||
							CheckClass("HTC2Beefy",AAPTR_TRACER,1) ||
							CheckClass("HTC2BlackBear",AAPTR_TRACER,1) ||
							CheckClass("BerthaBear",AAPTR_TRACER,1) ||
							CheckClass("BlackBear",AAPTR_TRACER,1) ||
							CheckClass("HTC2BigBertha",AAPTR_TRACER,1) ||
							CheckClass("HTC2PossessedBalloon",AAPTR_TRACER,1) ||
							CheckClass("HTC2EvilDeadHand",AAPTR_TRACER,1) ||
							CheckClass("HTC2PennywiseHead",AAPTR_TRACER,1) ||
							CheckClass("HTC2PennywiseTDC",AAPTR_TRACER,1) ||
							CheckClass("HTC2SuperBertha",AAPTR_TRACER,1) ||
							CheckClass("HTC2BouncingClown",AAPTR_TRACER,1) ||
							CheckClass("HTC2BabyClown",AAPTR_TRACER,1),1)
		Goto Death
		X140 A 0 A_DamageTracer(666,None,DMSS_FOILINVUL)
	Death:
		TNT1 A 0 A_SpawnItemEx("TinyExplo",0,0,0,0,0,0,0,32|SXF_TRANSFERTRANSLATION)
		Stop
	}
}


Actor CrazyFlash
{
	+Nogravity
	States
	{
	Spawn:	
		X095 BCDEF 3 Bright
		Stop
	}
}

Actor CrazyBits // Unused actor
{
	Radius 5
	Height 5
	Speed 4
	Scale .6
	States
	{
	Spawn:	
		TNT1 A 0 NoDelay A_Jump(256,1,2,3,4,5,6,7,8,9,10)
		CRZY EFGHIJKLMN 0 A_JumpIf(1 > 0, "Idle")
	Idle:
		"####" "#" 15 A_Jump (3,1)
		Goto Spawn
		
		"####" "#" 15
		Stop
	}
}	

Actor CrazyBalls
{
	
	Radius 8
	Height 6
	Speed 3
	Damage 9
	Scale 0.6
	PROJECTILE
	+EXTREMEDEATH
	+BOUNCEONFLOORS
	Alpha 0.8
	SeeSound ""
	DeathSound ""
	States
	{
	Spawn:
		CRZY P 0 Bright A_SetAngle(angle+random(-5,5))
		CRZY P 2 Bright A_ChangeVelocity(random(-15,15),random(-2,2),random(-1,1),1)
		CRZY Q 0 Bright A_SetAngle(angle+random(-5,5))
		CRZY Q 2 Bright A_ChangeVelocity(random(-15,15),random(-2,2),random(-1,1),1)
		CRZY R 0 Bright A_SetAngle(angle+random(-5,5))
		CRZY R 2 Bright A_ChangeVelocity(random(-15,15),random(-2,2),random(-1,1),1)
		CRZY S 0 Bright A_SetAngle(angle+random(-5,5))
		CRZY S 2 Bright A_ChangeVelocity(random(-15,15),random(-2,2),random(-1,1),1)
		Goto Spawn
	Death:
		X129 B 3 Bright 
		X129 A 3 Bright A_Scream
		X129 H 3 Bright A_Fall
		Stop
	}
}

Actor TinyExplo
{
	Projectile
	+NOINTERACTION
	Scale 0.2
	DeathSound "weapons/plasmax"
	States
	{
	Spawn:
		TNT1 A 0
		GRNE A 2
		GRNE BCDE 3
		GRNE FGH 2
		GRNE JKL 1 A_FadeOut(0.1)
		Wait
	}
}
//======================================================================================
//======================================================================================

//======================================================================================
//======================================================================================
Actor AEoDBouncerItem : CustomInventory
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL
	Scale 0.19
	Inventory.Amount 1
	Inventory.PickupSound "BS/Bouncer/Pickup"
	Inventory.PickupMessage "You bagged the Bouncer Launcher! Boing boing KaBOOM, baby!"
	States
	{
	Spawn:
		D011 L -1
		Loop
	Pickup:
		TNT1 A 0 A_JumpIfInventory("AEoDBouncer",1,"Ammo")
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",9) <= 0,"Nothing")
		TNT1 A 0 A_GiveInventory("Weapon9Count",1)
		TNT1 A 0 A_GiveInventory("BouncerDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDBouncer",1)
		TNT1 A 0 	
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDBouncer",1,"Ammo")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		TNT1 A 0 ACS_NamedExecute("s798",0,9,0,0)
		Fail
	Ammo:
		TNT1 A 0 A_GiveInventory("AEoDBouncer",1)
		Stop
	}
}


Actor BouncerDrop : CustomInventory
{
	Inventory.MaxAmount 1
	States
	{
	Use:
		TNT1 A 0
		TNT1 A 0 A_SpawnItemEx("DroppedBouncer",0,0,32,8,0,0,0,32,0)
		Stop
	}
}


Actor DroppedBouncer
{
	Radius 16
	Height 20
	Scale 0.19
	States
	{
	Spawn:
		D011 L 15
		TNT1 A 0 A_SpawnItemEx("AEoDBouncerNoAmmo",0,0,0,0,0,0,0,48,0)
		Stop
	}
} 



Actor AEoDBouncerNoAmmo : AEoDBouncerItem
{
	+INVENTORY.IGNORESKILL
	States
	{
	Spawn:
		D011 L -1
		Loop
	Pickup:
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",9) <= 0,"Nothing")
		TNT1 A 0 A_JumpIfInventory("AEGrenade",5,"Ammo")
		TNT1 A 0 A_JumpIfInventory("AECell",25,"Ammo3")
		TNT1 A 0 A_GiveInventory("Weapon9Count",1)
		TNT1 A 0 A_GiveInventory("BouncerDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDBouncer",1)
		TNT1 A 0 A_TakeInventory("AEGrenade",5)
		TNT1 A 0 A_TakeInventory("AECell",25)
		TNT1 A 0 	
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDBouncer",1,"Ammo")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		TNT1 A 0 ACS_NamedExecute("s798",0,9,0,0)
		Fail
	Ammo:
		TNT1 A 0 A_JumpIfInventory("AECell",25,1)
		Goto Ammo2
		TNT1 A 0 A_TakeInventory("AEGrenade",5)
		TNT1 A 0 A_TakeInventory("AECell",25)
		TNT1 A 0 A_JumpIfInventory("AEoDBouncer",1,2)
		TNT1 A 0 A_GiveInventory("Weapon9Count",1)
		TNT1 A 0 A_GiveInventory("BouncerDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDBouncer",1)
		Stop
	Ammo2:
		TNT1 A 0 A_TakeInventory("AEGrenade",5)
		TNT1 A 0 A_GiveInventory("Weapon9Count",1)
		TNT1 A 0 A_GiveInventory("BouncerDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDBouncer",1)
		TNT1 A 0 A_TakeInventory("AECell",25)
		Stop
	Ammo3:
		TNT1 A 0 A_TakeInventory("AECell",25)
		TNT1 A 0 A_GiveInventory("Weapon9Count",1)
		TNT1 A 0 A_GiveInventory("BouncerDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDBouncer",1)
		TNT1 A 0 A_TakeInventory("AEGrenade",5)
		Stop
	}
}

Actor AEoDBouncer : weapon
{
	+WEAPON.AMMO_OPTIONAL
	+WEAPON.ALT_AMMO_OPTIONAL
	+WEAPON.PRIMARY_USES_BOTH
	Weapon.AmmoType1 "AEGrenade"
	Weapon.AmmoType2 "AECell"
	Weapon.AmmoUse1 5
	Weapon.AmmoUse2 20
	Weapon.AmmoGive1 5
	Weapon.AmmoGive2 25
	Weapon.SelectionOrder 14960
	Inventory.PickupSound "BS/Bouncer/Pickup"
	Inventory.PickupMessage "You bagged the Bouncer Launcher! Boing boing KaBOOM, baby!"
	Weapon.UpSound "BS/Bouncer/Raise"
	Tag "Bouncer"
	Scale 0.19
	States
	{
	Spawn: 
		D011 L -1
		Stop
	Ready:
		D011 A 1 A_WeaponReady
		Loop
	Select:
		D011 A 0 	
		D011 A 1 A_Raise
		D011 AA 0 A_Raise
		Loop
	Deselect:
		D011 A 0 	
		D011 A 1 A_Lower
		D011 AA 0 A_Lower
		Loop
	Fire:
		D011 A 0 A_JumpIfInventory("PowerEconomizer",1,"FireOK")
		D011 A 0 A_JumpIfInventory("InfiniteAmmo",1,"FireOK")
		D011 A 1 A_JumpIfInventory("AEGrenade",5,3)
		D011 A 0 A_PlaySound("rgp/no",CHAN_WEAPON,1,0)
		D011 A 10 A_WeaponReady(WRF_NOFIRE)
		Goto Ready
		D011 A 1 A_JumpIfInventory("AECell",20,3)
		D011 A 0 A_PlaySound("rgp/no",CHAN_WEAPON,1,0)
		D011 A 10 A_WeaponReady(WRF_NOFIRE)
		Goto Ready
	FireOK:
		D011 A 0 A_GunFlash
		D011 G 0 A_GiveInventory("BouncerToken",1)
		D011 G 0 A_FireCustomMissile("BouncerBall1",0,1,6)
		D011 G 0 A_PlaySound("BS/Bouncer/Fire",CHAN_WEAPON,1,0)
		Goto FireShared
	AltFire:
		D011 A 0 A_JumpIfInventory("PowerEconomizer",1,"AltFireOK")
		D011 A 0 A_JumpIfInventory("InfiniteAmmo",1,"AltFireOK")
		D011 A 1 A_JumpIfInventory("AEGrenade",25,3)
		D011 A 0 A_PlaySound("rgp/no",CHAN_WEAPON,1,0)
		D011 A 10 A_WeaponReady(WRF_NOFIRE)
		Goto Ready
		D011 A 1 A_JumpIfInventory("AECell",150,3)
		D011 A 0 A_PlaySound("rgp/no",CHAN_WEAPON,1,0)
		D011 A 10 A_WeaponReady(WRF_NOFIRE)
		Goto Ready
		D011 A 0 A_TakeInventory("AEGrenade",25,1)
		D011 A 0 A_TakeInventory("AECell",150,1)
	AltFireOK:
		D011 A 0 A_GunFlash
		D011 G 0 A_GiveInventory("BouncerToken",1)
		D011 G 0 A_FireCustomMissile("BouncerBall2",0,0,6)
		D011 G 0 A_PlaySound("BS/Bouncer/AltFire",CHAN_WEAPON,1,0)
		D011 G 0 A_ReFire
	AltHold:
	FireShared:
		D011 G 1 Bright A_SetPitch(pitch-5)
		D011 H 1 Bright A_SetPitch(pitch-5)
		D011 IJK 1 Bright A_SetPitch(pitch+1) //this is the flash, but it should be "behind" the gun
		D011 CCCCCCC 1 A_SetPitch(pitch+1)
		D011 C 1	
		D011 C 0 A_ReFire(1)
		Goto FinishFire
		D011 C 1	
		D011 C 0 A_ReFire(1)
		Goto FinishFire+1
		D011 D 1	
		D011 D 0 A_ReFire(1)
		Goto FinishFire+2
		D011 D 1	
		D011 D 0 A_ReFire(1)
		Goto FinishFire+3
		D011 D 1	
		D011 D 0 A_ReFire(1)
		Goto FinishFire+4
		D011 D 1	
		D011 D 0 A_ReFire(1)
		Goto FinishFire+5
		D011 D 1	
		D011 D 0 A_ReFire(1)
		Goto FinishFire+6
		D011 E 1	
		D011 D 0 A_ReFire(1)
		Goto FinishFire+7
		D011 E 1	
		D011 D 0 A_ReFire(1)
		Goto FinishFire+8
		D011 E 1	
		D011 D 0 A_ReFire(1)
		Goto FinishFire+9
		D011 E 1	
		D011 D 0 A_ReFire(1)
		Goto FinishFire+10
		D011 E 1	
		D011 D 0 A_ReFire(1)
		Goto FinishFire+11
		D011 F 1	
		D011 D 0 A_ReFire(1)
		Goto FinishFire+12
		D011 F 1	
		D011 D 0 A_ReFire(1)
		Goto FinishFire+13
		D011 F 1	
		D011 D 0 A_ReFire(1)
		Goto FinishFire+14
		D011 F 1	
		D011 D 0 A_ReFire(1)
		Goto FinishFire+15
		D011 F 1	
		D011 D 0 A_ReFire("Holding")
		D011 F 0 A_TakeInventory("BouncerToken",10000)
		Goto Ready
	Holding:
		D011 A 1
		D011 A 0 A_ReFire("Holding")
		D011 A 0 A_TakeInventory("BouncerToken",10000)
		D011 A 0 A_ReFire("Fire")
		Goto Ready
	FinishFire:
		D011 CC 1 A_TakeInventory("BouncerToken",1)	//+1-2
		D011 DDDDDEEEEEFFFFF 1 A_TakeInventory("BouncerToken",1) //+3-4-5-6-7-8-9-10-11-12-13-14-15-16-17
		D011 FFFFF 0 A_TakeInventory("BouncerToken",1)	//just to be safe. It'll go fuck-all otherwise.
		Goto Ready
	Flash:
		D011 BC 3
		Stop
	}
}

Actor BouncerBall1
{
	Projectile
	-NOGRAVITY
	+BOUNCEONWALLS
	+BOUNCEONFLOORS
	+BOUNCEONCEILINGS
	+CANBOUNCEWATER
	+SKYEXPLODE
	+DONTREFLECT
	+ALLOWBOUNCEONACTORS
	+PUSHABLE			//Yup!
	+FORCERADIUSDMG
	PushFactor 0.20
	BounceFactor 0.85
	WallBounceFactor 0.85
	BounceSound "BS/Bouncer/Bounce"
	Speed 30
	Height 12
	Radius 8
	Damage 30
	Scale 0.07
	States
	{
	Spawn:
		CB01 A 0
	Waiting:
		CB01 A 1 A_SpawnItemEx("PBDebrisPuff",random(-8,8),random(-8,8),random(-8,8),0,0,0,random(0,359),32)
		CB01 A 0 A_JumpIfInventory("BouncerToken",1,"Waiting",AAPTR_TARGET)
	Desist:
		CB01 A 0 A_ChangeFlag("BOUNCEONWALLS",0)
		CB01 A 0 A_ChangeFlag("BOUNCEONFLOORS",0)
		CB01 A 0 A_ChangeFlag("BOUNCEONCEILINGS",0)
		CB01 A 0 A_ChangeFlag("ALLOWBOUNCEONACTORS",0)
		CB01 A 0 A_ChangeFlag("BOUNCEONACTORS",0)
	Waiting2:
		CB01 A 0 A_CheckFloor("Death")
		CB01 A 0 A_CheckCeiling("Death")
		CB01 A 1 A_SpawnItemEx("PBDebrisPuff",random(-8,8),random(-8,8),random(-8,8),0,0,0,random(0,359),32)
		Loop
	Death:
		TNT1 A 0 A_ChangeFlag("PAINLESS",1)
		TNT1 A 0 A_Explode(random(200,600),150,0)
		TNT1 A 0 A_ChangeFlag("PAINLESS",0)
		TNT1 A 0 A_Explode(250,150,1)
		TNT1 A 0 A_PlaySound("BS/Bouncer/Explode")
		TNT1 A 1 A_SpawnItemEx("PBExplosionDebrisless",0,0,0,0,0,0,0,32)//A_SpawnItemEx("BouncerBallExplosionBig",0,0,0,0,0,0,0,32)
		Stop
	}
}

Actor BouncerBall2
{
	var int user_bouncecount;
	var int user_crashed;
	Projectile
	-NOGRAVITY
	+BOUNCEONWALLS
	+BOUNCEONFLOORS
	+BOUNCEONCEILINGS
	+CANBOUNCEWATER
	+SKYEXPLODE
	+DONTREFLECT
	+ALLOWBOUNCEONACTORS
	+PUSHABLE			//Yup!
	+FORCERADIUSDMG
	PushFactor 0.20
	BounceFactor 0.85
	WallBounceFactor 0.85
	BounceSound "BS/Bouncer/Bounce"
	Speed 30
	Height 12
	Radius 8
	Damage 30
	Scale 0.07
	States
	{
	Spawn:
		CB01 A 0
	Waiting:
		CB01 A 1 A_SpawnItemEx("PBDebrisPuff",random(-8,8),random(-8,8),random(-8,8),0,0,0,random(0,359),32)
		CB01 A 0 A_JumpIfInventory("BouncerToken",1,"Waiting",AAPTR_PLAYER1)
	Desist:
		CB01 A 0 A_ChangeFlag("BOUNCEONWALLS",0)
		CB01 A 0 A_ChangeFlag("BOUNCEONFLOORS",0)
		CB01 A 0 A_ChangeFlag("BOUNCEONCEILINGS",0)
		CB01 A 0 A_ChangeFlag("ALLOWBOUNCEONACTORS",0)
		CB01 A 0 A_ChangeFlag("BOUNCEONACTORS",0)
	Waiting2:
		CB01 A 0 A_CheckFloor("Death")
		CB01 A 0 A_CheckCeiling("Death")
		CB01 A 1 A_SpawnItemEx("PBDebrisPuff",random(-8,8),random(-8,8),random(-8,8),0,0,0,random(0,359),32)
		Loop
	Death:
		CB01 A 0 A_ChangeFlag("BOUNCEONWALLS",1)
		CB01 A 0 A_ChangeFlag("BOUNCEONFLOORS",1)
		CB01 A 0 A_ChangeFlag("BOUNCEONCEILINGS",1)
		CB01 A 0 A_ChangeFlag("ALLOWBOUNCEONACTORS",1)
	Splode:
		TNT1 A 0 A_SetUserVar("user_bouncecount",user_bouncecount+1)
		TNT1 A 0 A_ChangeFlag("PAINLESS",1)
		TNT1 A 0 A_Explode(random(200,600),150,0)
		TNT1 A 0 A_ChangeFlag("PAINLESS",0)
		TNT1 A 0 A_Explode(250,150,1)
		TNT1 A 0 A_PlaySound("BS/Bouncer/Explode")
		TNT1 A 0 A_SpawnItemEx("PBExplosionDebrisless",0,0,0,0,0,0,0,32)
		TNT1 A 0 A_JumpIf(user_bouncecount>=15,"End")
		Goto Fling
	Crash:
	XDeath:
		TNT1 A 0 A_SetUserVar("user_bouncecount",user_bouncecount+1)
		CB01 A 0 A_ChangeFlag("BOUNCEONWALLS",1)
		CB01 A 0 A_ChangeFlag("BOUNCEONFLOORS",1)
		CB01 A 0 A_ChangeFlag("BOUNCEONCEILINGS",1)
		CB01 A 0 A_ChangeFlag("ALLOWBOUNCEONACTORS",1)
		TNT1 A 0 A_ChangeFlag("PAINLESS",1)
		TNT1 A 0 A_Explode(random(200,600),150,0)
		TNT1 A 0 A_ChangeFlag("PAINLESS",0)
		TNT1 A 0 A_Explode(250,150,1)
		TNT1 A 0 A_PlaySound("BS/Bouncer/Explode")
		TNT1 A 0 A_SpawnItemEx("PBExplosionDebrisless",0,0,0,0,0,0,0,32)
		TNT1 A 0 A_JumpIf(user_bouncecount>=15,"End")
		Goto Waiting3
	Fling:
		CB01 A 0 A_Warp(AAPTR_DEFAULT,0,0,5,0)
		CB01 A 0 A_CheckCeiling(2)
		CB01 A 1 A_ChangeVelocity(0,0,16,1)
	Waiting3:
		CB01 A 0 A_SpawnItemEx("PBDebrisPuff",random(-8,8),random(-8,8),random(-8,8),0,0,0,random(0,359),32)
		CB01 A 1 A_CheckFloor("Splode")
		Loop
	End:
		TNT1 A 0
		Stop
	}
}
	

//Actor BouncerBallExplosionBig

Actor BouncerToken : Inventory
{	Inventory.MaxAmount 1	Inventory.InterhubAmount 0	}