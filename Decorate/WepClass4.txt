//================================================================================================================
//================================================================================================================
//
//
//					AEons Of Death v6: Class 4 weapons
//
//
//================================================================================================================
//================================================================================================================


//--------------------------------------------------------------------

//Original by Alexander from Realm667
//Recoded by Major Cooke
//To be implemented as the most rare Super Shotgun replacement for AEONS of Death.
//New graphics from Blood2

Actor AEoDAWPItem : CustomInventory 6126
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL	+DONTGIB
	Scale 0.24
	Inventory.Amount 1
	Inventory.PickupMessage "You got the AWP!"
	Inventory.PickupSound "Weapon/SniperCharge"
	States
	{
	Spawn:
		WAWP A -1
		Loop
	Pickup:
		TNT1 A 0 A_JumpIfInventory("AEoDAWP",1,"Ammo")
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",4) <= 0,"Nothing")
		TNT1 A 0 A_GiveInventory("Weapon4Count",1)
		TNT1 A 0 A_GiveInventory("AWPDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDAWP",1)
		TNT1 A 0 	
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDAWP",1,"Ammo")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		TNT1 A 0 ACS_NamedExecute("s798",0,4,52,0)
		Fail
	Ammo:
		TNT1 A 0 A_GiveInventory("AEoDAWP",1)
		Stop
	}
}

Actor AEoDAWP: Weapon // 6126
{
	Obituary "%o was shredded unto thine void by %k's AWP"
	Inventory.PickupMessage "You got the AWP!"
	Inventory.PickupSound "Weapon/SniperCharge"
	+WEAPON.CHEATNOTWEAPON
	+INVENTORY.IGNORESKILL	+DONTGIB
	+WEAPON.NOAUTOFIRE
	+WEAPON.NOALERT
	Weapon.AmmoUse 30
	Weapon.AmmoUse2 30
	Weapon.AmmoGive1 30
	Weapon.AmmoType "AENails"
	Weapon.AmmoType2 "AENails"
	Weapon.SelectionOrder 16000
	Weapon.upsound "Weapon/SniperCharge"
	Scale 0.24
	Tag "AWP rifle"
	States
	{
	Spawn:
		WAWP A -1
		Loop
	Ready:
		AWP1 A 1 A_WeaponReady
		Loop
	Deselect:
		TNT1 A 0 A_TakeInventory("ZoomToken",3)
		TNT1 A 0 A_ZoomFactor(1.0,1)
		TNT1 A 0 	
		AWP1 A 1 A_Lower
		TNT1 AA 0 A_Lower
		Goto Deselect+2
	Select:
		TNT1 A 0 	
		AWP1 A 1 A_Raise
		TNT1 AA 0 A_Raise
		Loop
	Fire:
		TNT1 A 0 A_JumpIfInventory("ZoomToken",1,"ZoomFire")
		AWP1 A 0 A_PlaySound("Weapon/SniperFire", CHAN_WEAPON, 1.0)
		TNT1 A 0 A_FireCustomMissile("GunSmokeSpawner",0,0,4,8)
		AWP1 A 0 A_GunFlash
		AWP1 A 0 A_FireCustomMissile("AWPFlasher",0,0,0)
		TNT1 A 0 A_AlertMonsters
		AWP1 A 0 Bright A_RailAttack(random(750,1250),0,1,none,none,RGF_SILENT,0,"ExtremeBulletPuff")
		AWP1 A 0 Bright A_FireBullets(0,0,10,1,"ExtremeBulletPuff",FBF_EXPLICITANGLE)
		AWP1 A 0 Bright A_FireCustomMissile("AWPTrailSpawner",0,0,8)
		AWP1 AB 1 A_Recoil(5)
		AWP1 CD 1 A_SetPitch(pitch-3)
		AWP1 EFFGGH 1 A_SetPitch(pitch+1)
		AWP1 H 1
		AWP1 I 2 A_FireCustomMissile("RevolverCasingSpawnerInverted",-30,0, 0,0)
		AWP1 JJK 1
		AWP1 K 0 A_PlaySound("Weapon/SniperCharge", CHAN_AUTO, 1.0)
		AWP1 LMN 1
		AWP1 OPQRSTUVWXYZ 1
		AWP2 ABCDEFGH 1
		AWP2 H 0 A_Refire
		Goto Ready
	AltFire:
	ZoomPhase1:
		TNT1 A 0 A_JumpIfInventory("ZoomToken",1,"DeZoom")
		AWP1 A 0 A_PlayWeaponSound("weapons/AWP/zoom")
		AWP1 A 1 A_GiveInventory("ZoomToken",1)
		R016 N 1 A_ZoomFactor(8.0,0)
		Goto "Zoomed"
	DeZoom:
		AWP1 A 0 A_PlayWeaponSound("weapons/AWP/zoom")
		R016 N 0 A_TakeInventory("ZoomToken",3)
		AWP1 A 1 A_ZoomFactor(1.0,1)
		AWP1 A 1
		Goto Ready
	Zoomed:
		R016 N 1 A_WeaponReady
		Loop
	ZoomFire:
		TNT1 A 0 A_Light2
		R016 A 0 A_PlaySound("Weapon/SniperFire", CHAN_WEAPON, 1.0)
		TNT1 A 0 A_FireCustomMissile("GunSmokeSpawner",0,0,5,3)
		TNT1 A 0 A_AlertMonsters
		R016 N 0 Bright A_RailAttack(random(750,1250),0,1,none,none,RGF_SILENT,0,"ExtremeBulletPuff")
		AWP1 A 0 Bright A_FireBullets(0,0,10,1,"ExtremeBulletPuff",0)
		AWP1 A 0 Bright A_FireCustomMissile("AWPTrailSpawner",0,0,0)
		TNT1 A 0 A_Light0
		R016 A 0 A_Recoil(3.5)
		R016 A 0 A_ZoomFactor(1.0,1)
		AWP1 CD 1 A_SetPitch(pitch-3)
		AWP1 EFFGGH 1 A_SetPitch(pitch+1)
		AWP1 H 1
		AWP1 I 2 A_FireCustomMissile("RevolverCasingSpawnerInverted",-30,0, 0,0)
		AWP1 JK 2
		AWP1 K 0 A_PlaySound("Weapon/SniperCharge", CHAN_AUTO, 1.0)
		AWP1 LMN 1
		AWP1 OPQRSTUVWXYZ 1
		AWP2 ABCDE 1
	ZoomResume1:
		R016 N 3 A_ZoomFactor(8.0,1)
		R016 N 0 A_ReFire("ZoomFire")
		Goto "Zoomed"
	Flash:
		AWPF A 1 Bright Light("AWPShotLight") A_Light2
		TNT1 A 1 Bright Light("AWPShotLight") A_Light1
		TNT1 A 1 Bright A_Light0
		Stop
	AltFlash:
		TNT1 A 1 Bright Light("AWPShotLight") A_Light2
		TNT1 A 1 Bright Light("AWPShotLight") A_Light1
		TNT1 A 1 Bright Light("AWPShotLight") A_Light0
		Stop
	}
}

Actor ZoomToken : Inventory {}

Actor AWPFlasher
{
	+NOINTERACTION
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 3 Light("AWPShotLight")
		Stop
	}
}

Actor AWPTrailSpawner : FastProjectile
{
	Projectile
	+THRUACTORS
	Speed 250
	Radius 4
	Height 6
	MissileType "AWPTrail"
	States
	{
	Spawn:
		TNT1 AA 1
		Loop
	Death:
		TNT1 A 0
		Stop
	}
}

Actor AWPTrail
{
	+NOINTERACTION
	RenderStyle None
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_SpawnItemEx("AWPTrailSmoke",0,frandom(-2,2),frandom(-2,2),0,frandom(-1,1),frandom(-1,1),0,SXF_NOCHECKPOSITION)
		Stop
	}
}

Actor AWPTrailSmoke
{
	Projectile
	+NOINTERACTION
	Scale 0.15
	Alpha 0.4
	RenderStyle Add
	Translation "0:255=%[0,0,0]:[1,1,1]"
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_Jump(128,"Two","Three")
	One:
		X006 ABCDEFGHIJKLMNOP 1 //bright 
		X006 P 1 Bright A_FadeOut(0.35)
		Wait
	Two:
		X007 ABCDEFGHIJ 1 //bright
		X007 J 1 A_FadeOut(0.02) 
		Wait
	Three:
		X033 ABCDEFGHIJKLMNOPQR 1
		X033 R 1 A_FadeOut(0.04)
		Wait
	}
}

Actor BulletCasing
{
	Height 12
	Radius 8
	Speed 4
	BounceFactor 0.4
	PROJECTILE
	-NOGRAVITY
	+LOWGRAVITY
	+NOTELEPORT
	+DONTSPLASH
	-NOBLOCKMAP
	States
	{
	Spawn:
		BULL ABCDEF 3 
		Loop
	Death:
		BULL C 100
		Stop
	}
}

Actor ExtremeBulletPuff : NewPuff1
{
	+EXTREMEDEATH
	DamageType "AEBullet"
}

Actor AWPDrop : CustomInventory
{
	Inventory.MaxAmount 1
	States
	{
	Use:
		TNT1 A 0
		TNT1 A 0 A_SpawnItemEx("DroppedAWP",0,0,32,8,0,0,0,SXF_NOCHECKPOSITION,0)
		TNT1 A 0 A_TakeInventory("AWPDrop",1)
		Stop
	}
}

Actor DroppedAWP
{
	Radius 16
	Height 20
	Scale 0.24
	States
	{
	Spawn:
		WAWP A 15
		TNT1 A 0 A_SpawnItemEx("AEoDAWPNoAmmo",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER,0)
		Stop
	}
}

Actor AEoDAWPNoAmmo : AEoDAWPItem
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL	+DONTGIB
	Scale 0.24
	Inventory.Amount 1
	Inventory.PickupMessage "You got the AWP!"
	Inventory.PickupSound "Weapon/SniperCharge"
	States
	{
	Spawn:
		WAWP A -1
		Loop
	Pickup:
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",4) <= 0,"Nothing")
		TNT1 A 0 A_JumpIfInventory("AENails",30,"Ammo")
		TNT1 A 0 A_GiveInventory("Weapon4Count",1)
		TNT1 A 0 A_GiveInventory("AWPDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDAWP",1)
		TNT1 A 0 A_TakeInventory("AENails",30)
		TNT1 A 0 	
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDAWP",1,"Ammo")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		TNT1 A 0 ACS_NamedExecute("s798",0,4,52,0)
		Fail
	Ammo:
		TNT1 A 0 A_TakeInventory("AENails",30)
		TNT1 A 0 A_JumpIfInventory("AEoDAWP",1,2)
		TNT1 A 0 A_GiveInventory("Weapon4Count",1)
		TNT1 A 0 A_GiveInventory("AWPDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDAWP",1)
		Stop
	}
}

//==================================================================================
//==================================================================================

//==================================================================================
//==================================================================================

Actor AEoDCMRifleItem : CustomInventory 6034
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL	+DONTGIB
	Scale 0.65
	Inventory.Amount 1
	Inventory.PickupMessage "You got the Combat Manual Rifle!"
	Inventory.PickupSound "reilsss/weappickup/copgun"
	States
	{
	Spawn:
		COPP A -1
		Loop
	Pickup:
		TNT1 A 0 A_JumpIfInventory("AEoDCMRifle",1,"Ammo")
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",4) <= 0,"Nothing")
		TNT1 A 0 A_GiveInventory("Weapon4Count",1)
		TNT1 A 0 A_GiveInventory("COPgunInClip",12)
		TNT1 A 0 A_GiveInventory("CMRifleDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDCMRifle",1)
		TNT1 A 0 	
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDCMRifle",1,"Ammo")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		TNT1 A 0 ACS_NamedExecute("s798",0,4,48,0)
		Fail
	Ammo:
		TNT1 A 0 A_GiveInventory("AEoDCMRifle",1)
		Stop
	}
}

Actor AEoDCMRifle : Weapon // 6034
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL	+DONTGIB
	+WEAPON.AMMO_OPTIONAL
	+STRIFEDAMAGE
	+WEAPON.NOAUTOFIRE
	Weapon.Kickback 20
	Weapon.AmmoType1 "COPgunInClip"
	Weapon.AmmoType2 "AEShell"
	Weapon.AmmoGive1 0
	Weapon.AmmoGive2 16
	Weapon.AmmoUse1 0
	Weapon.SelectionOrder 22222
	Inventory.PickupMessage "You got the Combat Manual Rifle!"
	Inventory.PickupSound "reilsss/weappickup/copgun"
	AttackSound "reilsss/weapons/copgunfire"
	weapon.upsound "weapons/draw"
	Scale 0.65
	Tag "Combat Manual rifle"
	States
	{
	Spawn:
		COPP A -1
		Loop
	Ready:
		COPG A 1 A_WeaponReady(WRF_ALLOWRELOAD)
		Loop
	Deselect:
		COPG A 1 A_Lower
		TNT1 AA 0 A_Lower
		Loop
	Select:
		COPG A 1 A_Raise
		TNT1 AA 0 A_Raise
		Loop
	Fire:
		TNT1 A 0 A_JumpIfInventory("COPgunInClip", 1, 4)
		TNT1 A 0 A_JumpIfInventory("AEShell", 1, 2)
		TNT1 A 0
		Goto Ready
		TNT1 A 0
		Goto AltFire
		TNT1 A 0 A_GunFlash
		TNT1 A 0 A_FireCustomMissile("CheapAlert",0,0,0,0)
		TNT1 A 0 A_JumpIfInventory("PowerEconomizer",1,2)
		TNT1 A 0 A_TakeInventory("COPgunInClip",1)
		TNT1 A 0 A_FireCustomMissile("GunSmallSmokeSpawner",0,0,5,7)
		TNT1 A 0 A_FireCustomMissile("RevolverCasingSpawnerInverted",-30,0, 0,0)
		COPG B 0 Bright A_FireBullets(2,2,1,70,"BulletDamagePuff",0)
		COPG B 1 Bright A_SetPitch(pitch-2)
		COPG CD 1 Bright A_SetPitch(pitch+1)
		Goto Ready
	AltFire:
	Reload:
		D3SG A 0 A_JumpIfInventory("COPgunInClip", 12, "Ready")
		D3SG A 0 A_JumpIfInventory("AEShell", 1, 1)
		Goto Ready
	Reload1:
		COPR AAABBBCC 1 A_WeaponReady(WRF_NOFIRE)
		COPR D 0 A_PlaySound("reilsss/weapons/copgunreload1", 6, 1.0, 0)
		COPR DDEEFFFGGGHHHIII 1 A_WeaponReady(WRF_NOFIRE)
		COPR J 0 A_PlaySound("reilsss/weapons/copgunreload2", 7, 1.0, 0)
		COPR JJKKLLMM 1 A_WeaponReady(WRF_NOFIRE)
	Reload2:
		COPR NOPQRST 1 A_WeaponReady(WRF_NOFIRE)
		COPR U 0 A_PlaySound("reilsss/weapons/copgunreload3", 6, 1.0, 0)
		COPR UVWXYZ 1 A_WeaponReady(WRF_NOFIRE)
	Reload2Check:
		TNT1 A 0
		TNT1 A 0 A_JumpIfInventory("InfiniteAmmo",1,2) 
		TNT1 A 0 A_TakeInventory("AEShell",1) 
		TNT1 A 0 A_GiveInventory("COPgunInClip",1)
		TNT1 A 0 A_JumpIfInventory("COPgunInClip",12,"Ready") 
		TNT1 A 0 A_JumpIfInventory("AEShell",1,"Reload2Check")
		TNT1 A 0
		Goto Ready
	Flash:
		TNT1 A 1 Bright A_Light2
		TNT1 A 1 Bright A_Light1
		TNT1 A 1 Bright A_Light0
		Stop
	}
}

Actor COPgunInClip : Ammo
{
	+INVENTORY.IGNORESKILL	+DONTGIB
	Inventory.Amount 0
	Inventory.MaxAmount 12
	Ammo.BackpackMaxAmount 8
	Ammo.BackpackAmount 0
	Inventory.Icon "IESCA0"
	States
	{
	Spawn:
		TNT1 A 4
		Loop
	}
}

Actor CheapAlert
{
	PROJECTILE
	+NOCLIP
	Health 1000
	Radius 1
	Height 1
	Speed  0
	Damage 0
	Mass   1
	States
	{
	Spawn:
		TNT1 A 0 
		TNT1 A 1 A_AlertMonsters
		Stop
	}
}

Actor CMRifleDrop : CustomInventory
{
	States
	{
	Use:
		TNT1 A 0
		TNT1 A 0 A_SpawnItemEx("DroppedCMRifle",0,0,32,8,0,0,0,SXF_NOCHECKPOSITION,0)
		Stop
	}
}

Actor DroppedCMRifle
{
	Radius 16
	Height 20
	Scale 0.65
	States
	{
	Spawn:
		COPP A 15
		TNT1 A 0 A_SpawnItemEx("AEoDCMRifleNoAmmo",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER,0)
		Stop
	}
}

Actor AEoDCMRifleNoAmmo : AEoDCMRifleItem
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL	+DONTGIB
	Scale 0.65
	Inventory.Amount 1
	Inventory.PickupMessage "You got the Combat Manual Rifle!"
	Inventory.PickupSound "reilsss/weappickup/copgun"
	States
	{
	Spawn:
		COPP A -1
		Loop
	Pickup:
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",4) <= 0,"Nothing")
		TNT1 A 0 A_JumpIfInventory("AEShell",16,"Ammo")
		TNT1 A 0 A_GiveInventory("Weapon4Count",1)
		TNT1 A 0 A_GiveInventory("CMRifleDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDCMRifle",1)
		TNT1 A 0 A_TakeInventory("AEShell",16)
		TNT1 A 0 	
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDCMRifle",1,"Ammo")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		TNT1 A 0 ACS_NamedExecute("s798",0,4,48,0)
		Fail
	Ammo:
		TNT1 A 0 A_TakeInventory("AEShell",16)
		TNT1 A 0 A_JumpIfInventory("AEoDCMRifle",1,2)
		TNT1 A 0 A_GiveInventory("Weapon4Count",1)
		TNT1 A 0 A_GiveInventory("CMRifleDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDCMRifle",1)
		Stop
	}
}

//==================================================================================
//==================================================================================

//==================================================================================
//==================================================================================

Actor AEoDCombatShotgunItem : CustomInventory 6060
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL	+DONTGIB
	Scale 0.7
	Inventory.Amount 1
	Inventory.PickupMessage "You found the Combat Shotgun."
	Inventory.PickupSound "reilsss/weappickup/supershotgun"
	States
	{
	Spawn:
		Q2SS K -1
		Loop
	Pickup:
		TNT1 A 0 A_JumpIfInventory("AEoDCombatShotgun",1,"Ammo")
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",4) <= 0,"Nothing")
		TNT1 A 0 A_GiveInventory("Weapon4Count",1)
		TNT1 A 0 A_GiveInventory("CombatShotgunDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDCombatShotgun",1)
		TNT1 A 0 	
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDCombatShotgun",1,"Ammo")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		TNT1 A 0 ACS_NamedExecute("s798",0,4,39,0)
		Fail
	Ammo:
		TNT1 A 0 A_GiveInventory("AEoDCombatShotgun",1)
		Stop
	}
}

Actor AEoDCombatShotgun : Weapon // 6060
{ 
	+FLOORCLIP
	+INVENTORY.IGNORESKILL	+DONTGIB
	Weapon.AmmoType1 "AEShell"
	Weapon.AmmoType2 "AEShell"
	Weapon.AmmoGive1 8
	Weapon.AmmoUse1 2
	Weapon.AmmoUse2 4
	Weapon.SelectionOrder 7500
	+WEAPON.CHEATNOTWEAPON
	Obituary "%o felt the %k's combat shotgun."
	Inventory.PickupMessage "You found the Combat Shotgun."
	Inventory.PickupSound "reilsss/weappickup/supershotgun"
	AttackSound "reilsss/weapons/sawedshotgunfire"
	weapon.upsound "weapons/draw"
	Tag "Combat Shotgun"
	Scale 0.7
	States 
	{ 
	Spawn: 
		Q2SS K 3
		Loop
	Ready: 
		Q2SS A 1 A_WeaponReady 
		Loop 
	Deselect: 
		Q2SS A 1 A_Lower
		TNT1 AA 0 A_Lower 
		Loop 
	Select: 
		Q2SS A 1 A_Raise
		TNT1 AA 0 A_Raise 
		Loop
	Fire: 
		Q2SS A 0 A_Light2
		Q2SS A 0 A_Recoil(2)
		TNT1 A 0 //ACS_NamedExecute("s851",0,75,random(-5,5),0)
		TNT1 A 0 A_FireCustomMissile("GunSmokeSpawner",0,0,3.5,8)
		TNT1 A 0 A_FireCustomMissile("GunSmokeSpawner",0,0,6,8)
		Q2SS I 3 Bright A_FireBullets(6, 6, 20, 5, "BulletDamagePuff", 1)
		TNT1 A 0 A_Light1
		Q2SS JJJ 1 //ACS_NamedExecute("s851",0,-25,0,0)
		Q2SS B 3 A_Light0
		Q2SS C 3
		Q2SS D 3
		Q2SS E 5 
		Q2SS F 5 A_PlaySound("reilsss/weapons/riflereload1", 7, 1.0, 0)
		Q2SS G 0 A_FireCustomMissile("ShotgunCasingSpawner",-45,0, 0,0)
		Q2SS G 7 A_FireCustomMissile("ShotgunCasingSpawner",-45,0, 0,0)
		Q2SS H 7
		Goto Ready
	AltFire:
		Q2SS A 0 A_Light2
		Q2SS A 0 A_Recoil(2)
		TNT1 A 0 //ACS_NamedExecute("s851",0,75,random(-5,5),0)
		TNT1 A 0 A_FireCustomMissile("GunSmokeSpawner",0,0,3.5,8)
		TNT1 A 0 A_FireCustomMissile("GunSmokeSpawner",0,0,6,8)
		Q2SS I 3 Bright A_FireBullets(10, 10, 18, 1, "ExploPuff", 1)
		TNT1 A 0 A_Light1
		Q2SS JJJ 1 //ACS_NamedExecute("s851",0,-25,0,0)
		Q2SS B 3 A_Light0
		Q2SS C 3
		Q2SS D 3
		Q2SS E 5 
		Q2SS F 5 A_PlaySound("reilsss/weapons/riflereload1", 7, 1.0, 0)
		Q2SS G 0 A_FireCustomMissile("ShotgunCasingSpawner",-45,0, 0,0)
		Q2SS G 7 A_FireCustomMissile("ShotgunCasingSpawner",-45,0, 0,0)
		Q2SS H 7
		Goto Ready
	}
} 

Actor ExploPuff
{
	+PUFFONACTORS
	+NOINTERACTION
	+FORCERADIUSDMG
	DamageType "AEBullet"
	RenderStyle None
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_Jump(255,"One","Two","Three")
	One:
		TNT1 A 0 A_SpawnItemEx("SSExploSmallBack1",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		Goto "ExploSpawner"
	Two:
		TNT1 A 0 A_SpawnItemEx("SSExploSmallBack2",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		Goto "ExploSpawner"
	Three:
		TNT1 A 0 A_SpawnItemEx("SSExploSmallBack3",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		Goto "ExploSpawner"
	ExploSpawner:
		TNT1 AA 0 A_SpawnItemEx("NewExploSmallSmoke",0,0,0,frandom(-0.3,0.3),frandom(-0.3,0.3),frandom(-0.3,0.3),random(1,359),SXF_NOCHECKPOSITION)
		TNT1 A 10 A_Explode(20,32)
		Stop
	}
}


Actor SSExploSmallBack1
{
	+NOINTERACTION
	RenderStyle Add
	Scale 0.15
	States
	{
	Spawn:
		X004 ABCDEFGHIJKLMNOPQ 2 Bright A_FadeOut(0.03)
		Stop
	}
}

Actor SSExploSmallBack2 : SSExploSmallBack1
{
	Scale 0.12
	States
	{
	Spawn:
		X005 ABCDEFGHI 1 Bright A_FadeOut(0.015)
		X005 JKLMNOPQRSTUVWX 2 Bright A_FadeOut(0.03)
		Stop
	}
}

Actor SSExploSmallBack3 : SSExploSmallBack1
{
	States
	{
	Spawn:
		X006 ABCDEFGHIJKLMNOP 2 Bright A_FadeOut(0.03)
		Stop
	}
}


Actor ExplosivPuff
{
	+NOCLIP
	+NOGRAVITY
	+PUFFONACTORS
	Damage 1
	DamageType Fire
	RenderStyle Translucent
	Alpha 0.8
	Scale 0.20
	States
	{
	Spawn:
		EXPL B 2 Bright A_Pain
		EXPL C 1 A_PlaySound("weapons/rockexplo")
		EXPL DEFGHIJKLMNOPQRSTU 1 Bright
		Stop
	}
}

Actor CombatShotgunDrop : CustomInventory
{
	Inventory.MaxAmount 1
	States
	{
	Use:
		TNT1 A 0
		TNT1 A 0 A_SpawnItemEx("DroppedCombatShotgun",0,0,32,8,0,0,0,SXF_NOCHECKPOSITION,0)
		Stop
	}
}

Actor DroppedCombatShotgun
{
	Radius 16
	Height 20
	Scale 0.7
	States
	{
	Spawn:
		Q2SS K 15
		TNT1 A 0 A_SpawnItemEx("AEoDCombatShotgunNoAmmo",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER,0)
		Stop
	}
}

Actor AEoDCombatShotgunNoAmmo : AEoDCombatShotgunItem
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL	+DONTGIB
	Scale 0.7
	Inventory.Amount 1
	Inventory.PickupMessage "You found the Combat Shotgun."
	Inventory.PickupSound "reilsss/weappickup/supershotgun"
	States
	{
	Spawn:
		Q2SS K -1
		Loop
	Pickup:
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",4) <= 0,"Nothing")
		TNT1 A 0 A_JumpIfInventory("AEShell",8,"Ammo")
		TNT1 A 0 A_GiveInventory("Weapon4Count",1)
		TNT1 A 0 A_GiveInventory("CombatShotgunDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDCombatShotgun",1)
		TNT1 A 0 A_TakeInventory("AEShell",8)
		TNT1 A 0 	
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDCombatShotgun",1,"Ammo")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		TNT1 A 0 ACS_NamedExecute("s798",0,4,39,0)
		Fail
	Ammo:
		TNT1 A 0 A_TakeInventory("AEShell",8)
		TNT1 A 0 A_JumpIfInventory("AEoDCombatShotgun",1,2)
		TNT1 A 0 A_GiveInventory("Weapon4Count",1)
		TNT1 A 0 A_GiveInventory("CombatShotgunDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDCombatShotgun",1)
		Stop
	}
}

//==================================================================================
//==================================================================================

//==================================================================================
//==================================================================================

Actor AEoDCrystalGunItem : CustomInventory 6039
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL	+DONTGIB
	Inventory.Amount 1
	Inventory.PickupMessage "You got the Crystal Gun!"
	Inventory.PickupSound "reilsss/weappickup/crystalgun"
	States
	{
	Spawn:
		CRST A -1
		Loop
	Pickup:
		TNT1 A 0 A_JumpIfInventory("AEoDCrystalGun",1,"Ammo")
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",4) <= 0,"Nothing")
		TNT1 A 0 A_GiveInventory("Weapon4Count",1)
		TNT1 A 0 A_GiveInventory("CrystalGunDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDCrystalGun",1)
		TNT1 A 0 	
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDCrystalGun",1,"Ammo")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		TNT1 A 0 ACS_NamedExecute("s798",0,4,40,0)
		Fail
	Ammo:
		TNT1 A 0 A_GiveInventory("AEoDCrystalGun",1)
		Stop
	}
}

Actor AEoDCrystalGun : Weapon // 6039
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL	+DONTGIB
	+WEAPON.CHEATNOTWEAPON
	Weapon.AmmoType1 "AECell"
	Weapon.AmmoType2 "AECell"
	Weapon.AmmoGive1 45
	Weapon.AmmoUse1 5
	Weapon.AmmoUse2 20
	Weapon.SelectionOrder 9777
	Inventory.PickupMessage "You got the Crystal Gun!"
	Inventory.PickupSound "reilsss/weappickup/crystalgun"
	weapon.upsound "weapons/draw"
	Tag "Crystal Gun"
	States
	{
	Spawn:
		CRST A -1
		Loop
	Ready:
		CRYG A 1 A_WeaponReady
		Loop
	Deselect:
		TNT1 A 0 	
		CRYG A 1 A_Lower
		TNT1 AA 0 A_Lower
		Loop
	Select:
		TNT1 A 0 	
		CRYG A 1 A_Raise
		TNT1 AA 0 A_Raise
		Loop
	Fire:
		CRYG F 1
		CRYG B 2
		CRYG C 2
		TNT1 A 0 //ACS_NamedExecute("s851",0,25,random(-3,3),0)
		TNT1 A 0 A_SetBlend("SkyBlue",0.2,5)
		CRYG D 0 A_PlaySound("reilsss/weapons/crystalgunfire", CHAN_WEAPON, 1.0, 0)
		CRYG D 3 A_FireCustomMissile("CrystalShot",0,1,2,3)
		TNT1 A 0 //ACS_NamedExecute("s851",0,-25,random(-3,3),0)
		CRYG E 2
		CRYG F 3
		CRYG A 1 A_ReFire
		Goto Ready
	AltFire:
		CRYG F 1
		CRYG B 2
		CRYG C 2
		TNT1 A 0 //ACS_NamedExecute("s851",0,25,random(-3,3),0)
		TNT1 A 0 A_SetBlend("SkyBlue",0.2,5)
		CRYG D 0 A_PlaySound("reilsss/weapons/crystalgunfire", CHAN_WEAPON, 1.0, 0)
		CRYG D 3 A_FireCustomMissile("IceStaffShot2",0,1,5,6)
		TNT1 A 0 //ACS_NamedExecute("s851",0,-25,random(-3,3),0)
		CRYG E 4
		CRYG F 5
		CRYG A 15
		CRYG A 1 A_ReFire
		Goto Ready
	}
}

Actor CrystalShot
{
	PROJECTILE
	+SEEKERMISSILE
	DamageType "Ice"
	Radius 4
	Height 5
	Speed 20
	Damage 12
	DeathSound "weapons/crbreak"
	RenderStyle Add
	Alpha 9.5
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_SpawnItemEx("CrystalSmoke",0,0,0,0,0,0.25,0,0)
		CRYS A 2 Bright A_SeekerMissile (1, 2)
		CRYS A 0 Bright A_CustomMissile("CrystalShotTrail",0,0,0)
		TNT1 A 0 A_SpawnItemEx("CrystalSmoke",0,0,0,0,0,0.3,0,0)
		CRYS A 2 Bright A_SeekerMissile (1, 2)
		TNT1 A 0 A_SpawnItemEx("CrystalSmoke",0,0,0,0,0,0.4,0,0)
		CRYS A 2 Bright A_SeekerMissile (1, 2)
		TNT1 A 0 A_SpawnItemEx("CrystalSmoke",0,0,0,0,0,0.2,0,0)
		CRYS A 2 Bright A_SeekerMissile (1, 2)
		CRYS A 0 Bright A_CustomMissile("CrystalShotTrail",0,0,0)
		TNT1 A 0 A_SpawnItemEx("CrystalSmoke",0,0,0,0,0,0.45,0,0)
		CRYS A 2 Bright A_SeekerMissile (1, 2)
		TNT1 A 0 A_SpawnItemEx("CrystalSmoke",0,0,0,0,0,0.33,0,0)
		CRYS A 2 Bright A_SeekerMissile (1, 2)
		TNT1 A 0 A_SpawnItemEx("CrystalSmoke",0,0,0,0,0,0.29,0,0)
		CRYS A 2 Bright A_SeekerMissile (1, 2)
		CRYS A 0 Bright A_CustomMissile("CrystalShotTrail",0,0,0)
		TNT1 A 0 A_SpawnItemEx("CrystalSmoke",0,0,0,0,0,0.35,0,0)
		CRYS A 2 Bright A_SeekerMissile (1, 2)
		TNT1 A 0 A_SpawnItemEx("CrystalSmoke",0,0,0,0,0,0.28,0,0)
		CRYS A 2 Bright A_SeekerMissile (1, 2)
		TNT1 A 0 A_SpawnItemEx("CrystalSmoke",0,0,0,0,0,0.21,0,0)
		CRYS A 2 Bright A_SeekerMissile (1, 2)
		CRYS A 0 Bright A_CustomMissile("CrystalShotTrail",0,0,0)
		TNT1 A 0 A_SpawnItemEx("CrystalSmoke",0,0,0,0,0,0.32,0,0)
		CRYS A 2 Bright A_SeekerMissile (1, 2)
		TNT1 A 0 A_SpawnItemEx("CrystalSmoke",0,0,0,0,0,0.43,0,0)
		CRYS A 2 Bright A_SeekerMissile (1, 2)
		Loop
	Death:
		TNT1 AAAAAAAA 0 A_CustomMissile("CrytalShotExtra",0,0,random(0,359))
		CRYE A 3 Bright A_Explode(80,20,1)
		CRYE BC 3 Bright
		CRYE DEF 2 Bright
		Stop
	}
}

Actor CrystalSmoke
{
	+NOINTERACTION
	RenderStyle Add
	Alpha 0.6
	Scale 0.15
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_Jump(255,2,5,8,12)
		PLSS CCCDEFGHIJKLMNOPQRSTUVWXYZ 1
		PLSZ ABC 1 A_FadeOut(0.08)
		Wait
	}
}

Actor CrystalShotTrail
{
	+NOGRAVITY
	Radius 4
	Height 3
	Speed 5
	RenderStyle Add
	+NOTELEPORT
	Alpha 0.5
	Scale 0.6
	States
	{
	Spawn:
		CRYT A 1 Bright
		CRYT A 3 Bright A_PlaySound("weapons/crtrail")
		CRYT BC 3 Bright
		CRYT D 2 Bright
		Stop 
	}
}

Actor CrytalShotExtra
{
	PROJECTILE
	+NOCLIP
	-NOGRAVITY
	+DONTSPLASH
	Height 4
	Radius 4
	Speed 3
	Gravity 0.4
	RenderStyle Add
	Translation "168:191=192:207"
	Scale 0.15
	States
	{
	Spawn:
		FX22 GG 0
		FX22 GG 1 Bright ThrustThingZ(0,random(2,6),0,1)
		FX22 GGGGGGGG 1 Bright
		FX22 G 1 Bright A_FadeOut
		Wait
	}
}

Actor IceStaffShot2
{
	PROJECTILE
	Radius 5
	Height 8
	Speed 18
	Scale 1
	Damage 4
	DamageType "Ice"
	-NOGRAVITY
	Gravity 0.4
	+DONTSPLASH
	SeeSound "mageshardsfire"
	DeathSound "mageshardsexplode"
	States
	{
	Spawn:
		TNT1 A  0
		SHRD A 1 Bright A_CustomMissile("IceStaffShot2Trail",0,0,0)
		Loop
	Death:
		PLSE A 0 Bright A_SpawnItemEx("IceShot2Xtra1",0,0,0,15,0,0,0,SXF_NOCHECKPOSITION|SXF_TRANSFERPOINTERS)
		PLSE A 0 Bright A_SpawnItemEx("IceShot2Xtra1",0,0,0,15,0,0,45,SXF_NOCHECKPOSITION|SXF_TRANSFERPOINTERS)
		PLSE A 0 Bright A_SpawnItemEx("IceShot2Xtra1",0,0,0,15,0,0,90,SXF_NOCHECKPOSITION|SXF_TRANSFERPOINTERS)
		PLSE A 0 Bright A_SpawnItemEx("IceShot2Xtra1",0,0,0,15,0,0,135,SXF_NOCHECKPOSITION|SXF_TRANSFERPOINTERS)
		PLSE A 0 Bright A_SpawnItemEx("IceShot2Xtra1",0,0,0,15,0,0,180,SXF_NOCHECKPOSITION|SXF_TRANSFERPOINTERS)
		PLSE A 0 Bright A_SpawnItemEx("IceShot2Xtra1",0,0,0,15,0,0,225,SXF_NOCHECKPOSITION|SXF_TRANSFERPOINTERS)
		PLSE A 0 Bright A_SpawnItemEx("IceShot2Xtra1",0,0,0,15,0,0,270,SXF_NOCHECKPOSITION|SXF_TRANSFERPOINTERS)
		PLSE A 0 Bright A_SpawnItemEx("IceShot2Xtra1",0,0,0,15,0,0,315,SXF_NOCHECKPOSITION|SXF_TRANSFERPOINTERS)
		SHEX ABCDE 4 BRIGHT
		Stop
	}
}

Actor IceStaffShot2Trail
{
	Radius 1
	Height 1
	Speed 0
	Damage 0
	RenderStyle Add
	Alpha 0.5
	Scale 0.7
	+NOGRAVITY
	+DONTSPLASH
	States
	{
	Spawn:
		SHEX ABCDE 3 BRIGHT
		Stop
	}
}

ACTOR	IceShot2Xtra1
{
	Radius 13
	Height 8
	Speed 14
	Damage 1
	Mass 5000
	PROJECTILE
	DamageType "Ice"
	+RIPPER	RipperLevel 1
	+FLOORHUGGER
	+SEEKERMISSILE
	+DONTSPLASH
	+NODAMAGETHRUST +CANNOTPUSH
	RenderStyle None
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_PlaySound("mealstrom/boltcrackle",5,1,1)
		TNT1 AAAAAAAAAAAAAAAAAA 2 A_SpawnitemEx("IceShot2Xtra2",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_TRANSFERPOINTERS)
		Stop
	Death: 
		TNT1 A 0
		Stop
	}
}


ACTOR	IceShot2Xtra2
{
	Radius 13
	Height 8
	Speed 0
	Damage 1
	+NOGRAVITY
	+FLOORCLIP
	+STRIFEDAMAGE
	DamageType "Ice"
	+RIPPER	RipperLevel 1
	+FLOORHUGGER
	+DONTSPLASH
	+FORCERADIUSDMG
	RenderStyle Add
	Translation "0:255=%[0,0,0]:[0.8,0.8,2.0]"
	Alpha 0.0
	Scale 0.3
	States
	{
	Spawn:
		TNT1 A 0 
		TNT1 AA 0 A_SpawnItemEx("IceShot2Xtra2Trail",random(15,-15),random(15,-15),random(3,20),0,0,frandom(0.3,0.8),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION)
		TNT1 A 0 A_Explode(12,64,0)
		X123 ABCD 2 A_FadeTo(1.0,0.25)
		TNT1 A 0 A_Explode(12,64,0)
		X123 EFGH 2
		TNT1 A 0 A_Explode(12,64,0)
		X123 IJKL 2
		TNT1 A 0 A_Explode(12,64,0)
		X123 MNOPQRSTUVWX 2 A_FadeOut
		Stop
	}
}

Actor IceShot2Xtra2Trail
{
	+NOINTERACTION
	RenderStyle Add
	Alpha 0.9
	Scale 0.2
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_Jump(190,4,7,10,14)
		X123 ABCDEFGHIJKLMNOPQRSTUVWX 2 A_FadeOut(0.04)
		Goto Spawn+2
	}
}

Actor CrystalGunDrop : CustomInventory
{
	Inventory.MaxAmount 1
	States
	{
	Use:
		TNT1 A 0
		TNT1 A 0 A_SpawnItemEx("DroppedCrystalGun",0,0,32,8,0,0,0,SXF_NOCHECKPOSITION,0)
		Stop
	}
}

Actor DroppedCrystalGun
{
	Radius 16
	Height 20
	States
	{
	Spawn:
		CRST A 15
		TNT1 A 0 A_SpawnItemEx("AEoDCrystalGunNoAmmo",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER,0)
		Stop
	}
}

Actor AEoDCrystalGunNoAmmo : AEoDCrystalGunItem
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL	+DONTGIB
	Inventory.Amount 1
	Inventory.PickupMessage "You got the Crystal Gun!"
	Inventory.PickupSound "reilsss/weappickup/crystalgun"
	States
	{
	Spawn:
		CRST A -1
		Loop
	Pickup:
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",4) <= 0,"Nothing")
		TNT1 A 0 A_JumpIfInventory("AECell",45,"Ammo")
		TNT1 A 0 A_GiveInventory("Weapon4Count",1)
		TNT1 A 0 A_GiveInventory("CrystalGunDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDCrystalGun",1)
		TNT1 A 0 A_TakeInventory("AECell",45)
		TNT1 A 0 	
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDCrystalGun",1,"Ammo")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		TNT1 A 0 ACS_NamedExecute("s798",0,4,40,0)
		Fail
	Ammo:
		TNT1 A 0 A_TakeInventory("AECell",45)
		TNT1 A 0 A_JumpIfInventory("AEoDCrystalGun",1,2)
		TNT1 A 0 A_GiveInventory("Weapon4Count",1)
		TNT1 A 0 A_GiveInventory("CrystalGunDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDCrystalGun",1)
		Stop
	}
}

//==================================================================================
//==================================================================================

//==================================================================================
//==================================================================================

Actor AEoDDemonOrbItem : CustomInventory 6044
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL	+DONTGIB
	Scale 0.7
	Inventory.Amount 1
	Inventory.PickupMessage "You found the DemonOrb!"
	Inventory.PickupSound "reilsss/weapons/demoncalleridlebio"
	States
	{
	Spawn:
		UNHW A -1
		Loop
	Pickup:
		TNT1 A 0 A_JumpIfInventory("AEoDDemonOrb",1,"Ammo")
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",4) <= 0,"Nothing")
		TNT1 A 0 A_GiveInventory("Weapon4Count",1)
		TNT1 A 0 A_GiveInventory("DemonOrbDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDDemonOrb",1)
		TNT1 A 0 	
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDDemonOrb",1,"Ammo")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		TNT1 A 0 ACS_NamedExecute("s798",0,4,37,0)
		Fail
	Ammo:
		TNT1 A 0 A_GiveInventory("AEoDDemonOrb",1)
		Stop
	}
}

Actor AEoDDemonOrb : Weapon // 6044
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL	+DONTGIB
	+INVENTORY.FANCYPICKUPSOUND
	+WEAPON.CHEATNOTWEAPON
	+WEAPON.NOAUTOFIRE
	+FLOATBOB
	Scale 0.7
	Weapon.AmmoType1 "RedMana"
	Weapon.AmmoType2 "RedMana"
	Weapon.AmmoGive1 25
	Weapon.AmmoUse1 5
	Weapon.AmmoUse2 10
	Weapon.SelectionOrder 19000
	Weapon.UpSound "weapons/draw"
	Inventory.PickupMessage "You found the DemonOrb!"
	Inventory.PickupSound "reilsss/weapons/demoncalleridlebio"
	Tag "Demon Orb"
	States
	{
	Spawn:
		UNHW A -1
		Stop
	Ready:
		UNHG A 0 A_Jump(8,56)
		UNHG AAABBBCCCCCBBBAAAA 1 A_WeaponReady
		UNHG A 0 A_Jump(16,1)
		Loop
		UNHG AAAAAA 1 A_WeaponReady
		Loop
		UNHG AAAAAABBBCCCCCBBBAAABBBCCCBBBA 1 A_WeaponReady
		Goto Ready
		UNHG A 0 A_PlaySound("reilsss/weapons/demoncalleridlebio", CHAN_AUTO, 0.05, 0)
		UNHG ADDDEEEFFFFFFEEEDDDA 1 A_WeaponReady
		Goto Ready
	Deselect:
		UNHG A 0 A_Light0
		UNHG A 1 A_Lower
		TNT1 AA 0 A_Lower
		Goto Deselect+1
	Select:
		UNHG A 1 A_Raise
		TNT1 AA 0 A_Raise
		Loop
	Fire:
		UNHG D 3 A_PlaySound("reilsss/weapons/demoncallerfirebio", CHAN_WEAPON, 1.0, 0)
		UNHG EF 2
		UNHG GH 3
		UNHG I 4 A_Light1
		UNHG J 0 A_Light2
		UNHG J 0 A_SetBlend("red",0.2,15)
		UNHG J 8 A_FireCustomMissile("MonsterDropper",0,1,0,1)
		UNHG I 4 A_Light1
		UNHG HGFE 2
		UNHG D 2 A_Light0
		UNHG A 0 A_ReFire
		Goto Ready+26
	AltFire:
		UNHG D 3 A_PlaySound("reilsss/weapons/demoncalleraltfirebio", CHAN_WEAPON, 1.0, 0)
		UNHG EF 2
		UNHG GH 3
		UNHG I 4 A_Light1
		UNHG J 0 A_Light2
		UNHG J 0 A_SetBlend("red",0.2,30)
		UNHG J 10 A_FireCustomMissile("MonsterDropper2",0,1,0,1)
		UNHG I 6 A_Light1
		UNHG HGFE 2
		UNHG D 2 A_Light0
		Goto Ready+26
	}
}

Actor MonsterDropper
{
	PROJECTILE
	+NOTARGET
	+FRIENDLY
	+FLOORCLIP
	+DONTSPLASH
	-NOGRAVITY
	Gravity 0.1
	Radius 20
	Height 8
	Speed 16
	DeathSound "reilsss/weapons/demoncallerfirebio"
	Scale 0.4
	States
	{
	Spawn:
		UNHA ABCD 2 Bright A_SpawnItemEx("DemonCallerTrailSimple",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		Loop
	Death:
		TNT1 A 0
		TNT1 A 0 A_SpawnItemEx("MonsterCallerFog",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		UNHA E 2 Bright A_PlaySound("weapons/monspwnx")
		TNT1 A 0 A_SpawnItemEx("MSPWNR1",0,0,0,0,0,0,0,SXF_SETMASTER)
		UNHA FGH 2 Bright 
		TNT1 A -1
		Stop
	} 
}

Actor DemonCallerTrailSimple
{
	+NOINTERACTION
	Translation "0:255=%[0,0,0]:[1.4,0.0,0.0]"
	States
	{
	Spawn:
		TNT1 A 0 
		TNT1 AAA 0 A_SpawnItemEx("SkullRodBallExploSparkRed",random(4,-4),random(4,-4),random(4,-4),0,0,0,0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION)	//see WepClass5.AED
		TNT1 A 0 A_SpawnItemEx("ScarExpTrailSmoke",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		TNT1 A 1
		Stop
	}
}

//------------------------------------------------------------------------------------

Actor MonsterDropper2 : MonsterDropper
{
	Radius 24
	Gravity 0.15
	DeathSound "reilsss/weapons/demoncalleraltfirebio"
	Scale 0.9
	States
	{
	Spawn:
		UNHA AABBCCDD 1 Bright A_SpawnItemEx("DemonCallerTrailBigger",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		Loop
	Death:
		TNT1 A 0
		TNT1 AA 0 A_SpawnItemEx("MonsterCallerFog",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		UNHA E 2 Bright A_PlaySound("weapons/monspwnx")
		TNT1 A 0 A_SpawnItemEx("MSPWNR2",0,0,0,0,0,0,0,SXF_SETMASTER)
		UNHA FGH 2 Bright 
		TNT1 A -1
		Stop
	} 
}

Actor DemonCallerTrailBigger
{
	+NOINTERACTION
	Translation "0:255=%[0,0,0]:[1.4,0.0,0.0]"
	States
	{
	Spawn:
		TNT1 A 0 
		TNT1 AAA 0 A_SpawnItemEx("DemCallParticle1",random(4,-4),random(4,-4),random(4,-4),0,0,0,0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION)
		TNT1 A 0 A_SpawnItemEx("ScarExpTrailSmoke",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		TNT1 A 1
		Stop
	}
}

//------------------------------------------------------------------------------------

Actor MonsterCallerFog : TeleportFog
{
	RenderStyle None
	Translation "0:255=%[0,0,0]:[0.8,0,0]"
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_SpawnItemEx("MonsterCallerFogMain",0,0,32,0,0,0,0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION)
		TNT1 A 0 A_Jump(256,"SpawnParticles")
		
	SpawnParticles:
		PLAY AA 0 A_SpawnItemEx("DemCallParticle1",6,30,32,0,0,frandom(0.2,3),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION)
		PLAY AA 0 A_SpawnItemEx("DemCallParticle1",12,24,32,0,0,frandom(0.2,3),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION)
		PLAY AA 0 A_SpawnItemEx("DemCallParticle1",18,18,32,0,0,frandom(0.2,3),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION)
		PLAY AA 0 A_SpawnItemEx("DemCallParticle1",24,12,32,0,0,frandom(0.2,3),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION)
		PLAY AA 0 A_SpawnItemEx("DemCallParticle1",30,6,32,0,0,frandom(0.2,3),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION)

		PLAY AA 0 A_SpawnItemEx("DemCallParticle1",-6,30,32,0,0,frandom(0.2,3),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION)
		PLAY AA 0 A_SpawnItemEx("DemCallParticle1",-12,24,32,0,0,frandom(0.2,3),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION)
		PLAY AA 0 A_SpawnItemEx("DemCallParticle1",-18,18,32,0,0,frandom(0.2,3),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION)
		PLAY AA 0 A_SpawnItemEx("DemCallParticle1",-24,12,32,0,0,frandom(0.2,3),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION)
		PLAY AA 0 A_SpawnItemEx("DemCallParticle1",-30,6,32,0,0,frandom(0.2,3),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION)

		PLAY AA 0 A_SpawnItemEx("DemCallParticle1",6,-30,32,0,0,frandom(0.2,3),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION)
		PLAY AA 0 A_SpawnItemEx("DemCallParticle1",12,-24,32,0,0,frandom(0.2,3),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION)
		PLAY AA 0 A_SpawnItemEx("DemCallParticle1",18,-18,32,0,0,frandom(0.2,3),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION)
		PLAY AA 0 A_SpawnItemEx("DemCallParticle1",24,-12,32,0,0,frandom(0.2,3),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION)
		PLAY AA 0 A_SpawnItemEx("DemCallParticle1",30,-6,32,0,0,frandom(0.2,3),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION)

		PLAY AA 0 A_SpawnItemEx("DemCallParticle1",-6,-30,32,0,0,frandom(0.2,3),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION)
		PLAY AA 0 A_SpawnItemEx("DemCallParticle1",-12,-24,32,0,0,frandom(0.2,3),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION)
		PLAY AA 0 A_SpawnItemEx("DemCallParticle1",-18,-18,32,0,0,frandom(0.2,3),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION)
		PLAY AA 0 A_SpawnItemEx("DemCallParticle1",-24,-12,32,0,0,frandom(0.2,3),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION)
		PLAY AA 0 A_SpawnItemEx("DemCallParticle1",-30,-6,32,0,0,frandom(0.2,3),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION)


		PLAY AA 0 A_SpawnItemEx("DemCallParticle1",6,30,32,0,0,frandom(-0.2,-3),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION)
		PLAY AA 0 A_SpawnItemEx("DemCallParticle1",12,24,32,0,0,frandom(-0.2,-3),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION)
		PLAY AA 0 A_SpawnItemEx("DemCallParticle1",18,18,32,0,0,frandom(-0.2,-3),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION)
		PLAY AA 0 A_SpawnItemEx("DemCallParticle1",24,12,32,0,0,frandom(-0.2,-3),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION)
		PLAY AA 0 A_SpawnItemEx("DemCallParticle1",30,6,32,0,0,frandom(-0.2,-3),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION)

		PLAY AA 0 A_SpawnItemEx("DemCallParticle1",-6,30,32,0,0,frandom(-0.2,-3),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION)
		PLAY AA 0 A_SpawnItemEx("DemCallParticle1",-12,24,32,0,0,frandom(-0.2,-3),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION)
		PLAY AA 0 A_SpawnItemEx("DemCallParticle1",-18,18,32,0,0,frandom(-0.2,-3),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION)
		PLAY AA 0 A_SpawnItemEx("DemCallParticle1",-24,12,32,0,0,frandom(-0.2,-3),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION)
		PLAY AA 0 A_SpawnItemEx("DemCallParticle1",-30,6,32,0,0,frandom(-0.2,-3),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION)

		PLAY AA 0 A_SpawnItemEx("DemCallParticle1",6,-30,32,0,0,frandom(-0.2,-3),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION)
		PLAY AA 0 A_SpawnItemEx("DemCallParticle1",12,-24,32,0,0,frandom(-0.2,-3),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION)
		PLAY AA 0 A_SpawnItemEx("DemCallParticle1",18,-18,32,0,0,frandom(-0.2,-3),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION)
		PLAY AA 0 A_SpawnItemEx("DemCallParticle1",24,-12,32,0,0,frandom(-0.2,-3),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION)
		PLAY AA 0 A_SpawnItemEx("DemCallParticle1",30,-6,32,0,0,frandom(-0.2,-3),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION)

		PLAY AA 0 A_SpawnItemEx("DemCallParticle1",-6,-30,32,0,0,frandom(-0.2,-3),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION)
		PLAY AA 0 A_SpawnItemEx("DemCallParticle1",-12,-24,32,0,0,frandom(-0.2,-3),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION)
		PLAY AA 0 A_SpawnItemEx("DemCallParticle1",-18,-18,32,0,0,frandom(-0.2,-3),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION)
		PLAY AA 0 A_SpawnItemEx("DemCallParticle1",-24,-12,32,0,0,frandom(-0.2,-3),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION)
		PLAY AA 0 A_SpawnItemEx("DemCallParticle1",-30,-6,32,0,0,frandom(-0.2,-3),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION)

		PLAY A 1
		Stop
	}
}

Actor MonsterCallerFogMain
{
	+NOINTERACTION
	RenderStyle Add
	Scale 0.8
	States
	{
	Spawn:
		VORT ABCDEFGHIJKLMNOPQRSTUVWXY 2 Bright A_FadeOut(0.02)
		Stop
	}
}

Actor DemCallParticle1
{
	+NOINTERACTION
	Scale 0.16
	RenderStyle Add
	States
	{
	Spawn:
		R019 K 3 Bright A_FadeOut(0.08)
		Loop
	}
}


Actor DemonOrbDrop : CustomInventory
{
	Inventory.MaxAmount 1
	States
	{
	Use:
		TNT1 A 0
		TNT1 A 0 A_SpawnItemEx("DroppedDemonOrb",0,0,32,8,0,0,0,SXF_NOCHECKPOSITION,0)
		Stop
	}
}

Actor DroppedDemonOrb
{
	Radius 16
	Height 20
	Scale 0.7
	States
	{
	Spawn:
		UNHW A 15
		TNT1 A 0 A_SpawnItemEx("AEoDDemonOrbNoAmmo",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER,0)
		Stop
	}
}

Actor AEoDDemonOrbNoAmmo : AEoDDemonOrbItem
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL	+DONTGIB
	Scale 0.7
	Inventory.Amount 1
	Inventory.PickupMessage "You found the DemonOrb!"
	Inventory.PickupSound "reilsss/weapons/demoncalleridlebio"
	States
	{
	Spawn:
		UNHW A -1
		Loop
	Pickup:
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",4) <= 0,"Nothing")
		TNT1 A 0 A_JumpIfInventory("RedMana",25,"Ammo")
		TNT1 A 0 A_GiveInventory("Weapon4Count",1)
		TNT1 A 0 A_GiveInventory("DemonOrbDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDDemonOrb",1)
		TNT1 A 0 A_TakeInventory("RedMana",25)
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDDemonOrb",1,"Ammo")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		TNT1 A 0 ACS_NamedExecute("s798",0,4,37,0)
		Fail
	Ammo:
		TNT1 A 0 A_TakeInventory("RedMana",25)
		TNT1 A 0 A_JumpIfInventory("AEoDDemonOrb",1,2)
		TNT1 A 0 A_GiveInventory("Weapon4Count",1)
		TNT1 A 0 A_GiveInventory("DemonOrbDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDDemonOrb",1)
		Stop
	}
}

Actor SpentShell : PuzzleItem
{
	-INVBAR
	Inventory.Icon TNT1A0
	States
	{
	Spawn:
		TNT1 A 4
		Loop
	}
}

//==================================================================================
//==================================================================================

//==================================================================================
//==================================================================================

Actor AEoDSerpentStaffItem : CustomInventory 6016
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL	+DONTGIB
	Scale 0.6
	Inventory.Amount 1
	Inventory.PickupMessage "You found the Serpent Staff!"
	Inventory.PickupSound "weaponbuild" 
	States
	{
	Spawn:
		WCSS A -1
		Loop
	Pickup:
		TNT1 A 0 A_JumpIfInventory("AEoDSerpentStaff",1,"Ammo")
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",4) <= 0,"Nothing")
		TNT1 A 0 A_GiveInventory("Weapon4Count",1)
		TNT1 A 0 A_GiveInventory("SerpentStaffDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDSerpentStaff",1)
		TNT1 A 0 	
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDSerpentStaff",1,"Ammo")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		TNT1 A 0 ACS_NamedExecute("s798",0,4,34,0)
		Fail
	Ammo:
		TNT1 A 0 A_GiveInventory("AEoDSerpentStaff",1)
		Stop
	}
}

Actor AEoDSerpentStaff : CWeapStaff // 6016
{ 
	+FLOORCLIP
	+INVENTORY.IGNORESKILL	+DONTGIB
	+FLOATBOB
	//+WEAPON.CHEATNOTWEAPON
	Weapon.AmmoType1 "BlueMana" 
	Weapon.AmmoType2 "BlueMana" 
	Weapon.AmmoGive1 40
	Weapon.AmmoUse1 2
	Weapon.AmmoUse2 1
	Weapon.SelectionOrder 11000
	Obituary "%o saw the %k's serpent eye."
	Inventory.PickupMessage "You found the Serpent Staff!"
	Inventory.PickupSound "weaponbuild" 
	weapon.upsound "weapons/draw"
	Tag "Serpent staff"
	Scale 0.6
	States 
	{
	Spawn:
		WCSS A 1
		Loop
	Ready:
		CSSF A 1 A_WeaponReady
		CSSF A 0 A_Jump(254, 12)
		CSSF BBB 1 A_WeaponReady
		CSSF CCCCC 1 A_WeaponReady
		CSSF BBB 1 A_WeaponReady
		CSSF A 0 A_WeaponReady
		Loop
	Deselect: 
		CSSF A 1 A_Lower 
		TNT1 AA 0 A_Lower
		Loop 
	Select: 
		CSSF A 1 A_Raise
		TNT1 AA 0 A_Raise 
		Loop
	Fire:
		CSSF A 0 A_JumpIfCloser(120, 12)
		CSSF A 1 offset (0, 45)
		CSSF J 1 offset (0, 45)
		CSSF K 1 offset (0, 45)
		CSSF L 0 offset (0, 50)
		CSSF L 0 offset (0, 50) A_CStaffAttack
		CSSF L 1 offset (0, 50) A_PlaySound("reilsss/weapons/serpentstafffire", CHAN_WEAPON, 1.0, 0)
		CSSF L 1 offset (0, 50)
		CSSF K 2 offset (0, 45)
		CSSF J 2 offset (0, 40)
		CSSF J 1 offset (0, 36)
		CSSF A 0 A_ReFire
		Goto Ready
		CSSF O 0 A_PlaySound("reilsss/weapons/serpentstaffaltfire", CHAN_WEAPON, 1.0, 0)
		CSSF O 2 A_CustomPunch(10, 0, 1, "SilentPuff", 120)
		CSSF O 8 A_GiveInventory("SerpentLeech", random(6,10))
		CSSF O 0 A_ReFire
		Goto Ready
	AltFire: 
		CSSF J 4 Bright
		CSSF K 2 Bright
		CSSF L 2 Bright
		CSSF M 0 A_PlaySound("reilsss/weapons/serpentstaffaltfire", CHAN_WEAPON, 1.0, 0)
		TNT1 AAA 0 Bright A_FireCustomMissile("GreenGasFake", random(15,-15), 0, 0, 0) 
		CSSF M 1 Bright A_FireCustomMissile("GreenGas", 0, 1, 0, 0) 
		TNT1 AAA 0 Bright A_FireCustomMissile("GreenGasFake", random(15,-15), 0, 0, 0) 
		CSSF M 1 Bright A_FireCustomMissile("GreenGas", 0, 0, 0, 0) 
		TNT1 AAA 0 Bright A_FireCustomMissile("GreenGasFake", random(15,-15), 0, 0, 0) 
		CSSF M 1 Bright A_FireCustomMissile("GreenGas", 0, 1, 0, 0) 
		TNT1 AAA 0 Bright A_FireCustomMissile("GreenGasFake", random(15,-15), 0, 0, 0) 
		CSSF M 1 Bright A_FireCustomMissile("GreenGas", 0, 0, 0, 0) 
		TNT1 AAA 0 Bright A_FireCustomMissile("GreenGasFake", random(15,-15), 0, 0, 0) 
		CSSF M 1 Bright A_FireCustomMissile("GreenGas", 0, 1, 0, 0) 
		TNT1 AAA 0 Bright A_FireCustomMissile("GreenGasFake", random(15,-15), 0, 0, 0) 
		CSSF M 1 Bright A_FireCustomMissile("GreenGas", 0, 0, 0, 0) 
		TNT1 AAA 0 Bright A_FireCustomMissile("GreenGasFake", random(15,-15), 0, 0, 0) 
		CSSF M 1 Bright A_FireCustomMissile("GreenGas", 0, 1, 0, 0) 
		TNT1 AAA 0 Bright A_FireCustomMissile("GreenGasFake", random(15,-15), 0, 0, 0) 
		CSSF M 1 Bright A_FireCustomMissile("GreenGas", 0, 0, 0, 0) 
		TNT1 AAA 0 Bright A_FireCustomMissile("GreenGasFake", random(15,-15), 0, 0, 0) 
		CSSF M 1 Bright A_FireCustomMissile("GreenGas", 0, 1, 0, 0) 
		TNT1 AAA 0 Bright A_FireCustomMissile("GreenGasFake", random(15,-15), 0, 0, 0) 
		CSSF M 1 Bright A_FireCustomMissile("GreenGas", 0, 0, 0, 0) 
		CSSF NKJ 2 Bright
		CSSF A 0 A_ReFire
		Goto Ready
	} 
} 

Actor SerpentLeech : HealthBonus
{
	+NOGRAVITY
	+SEEKERMISSILE
	+MISSILE
	+DROPOFF
	+NOBLOCKMONST
	+CANPASS
	-COUNTITEM
	Radius 1
	Height 1
	Speed 40
	Damage 0
	Inventory.Amount 1
	Inventory.MaxAmount 250
	States
	{
	Spawn:
		TNT1 A 1
		Loop
		Death:
		TNT1 A 0
		Stop
	}
}
//----------------------------------------------------------------------------

Actor GreenGas : RandomSpawner
{
	Radius 3
	Height 3
	DropItem "GreenGas1"
	DropItem "GreenGas2"
}

Actor GreenGas1
{
	PROJECTILE
	+RIPPER	RipperLevel 1
	+BLOODLESSIMPACT
	+NODAMAGETHRUST +CANNOTPUSH
	DamageType "AEPoison"
	Mass 1
	Radius 8
	Height 8
	Speed 8
	Damage 1
	RenderStyle Add
	Scale 0.04
	Translation "0:255=%[0,0,0]:[0.50,1.4,0.2]"
	States
	{
	Spawn:
		TNT1 A 0 
		TNT1 A 0 A_Jump(250,2,4,6,8,10,12,14,16,18,20,22)
		X101 A 1 Bright A_FadeOut(0.032)	TNT1 A 0 A_SetScale(scalex+0.035,scaley+0.035)
		X101 B 1 Bright A_FadeOut(0.032)	TNT1 A 0 A_SetScale(scalex+0.035,scaley+0.035)
		X101 C 1 Bright A_FadeOut(0.032)	TNT1 A 0 A_SetScale(scalex+0.035,scaley+0.035)
		X101 D 1 Bright A_FadeOut(0.032)	TNT1 A 0 A_SetScale(scalex+0.035,scaley+0.035)
		X101 E 1 Bright A_FadeOut(0.032)	TNT1 A 0 A_SetScale(scalex+0.035,scaley+0.035)
		X101 F 1 Bright A_FadeOut(0.032)	TNT1 A 0 A_SetScale(scalex+0.035,scaley+0.035)
		X101 G 1 Bright A_FadeOut(0.032)	TNT1 A 0 A_SetScale(scalex+0.035,scaley+0.035)
		X101 H 1 Bright A_FadeOut(0.032)	TNT1 A 0 A_SetScale(scalex+0.035,scaley+0.035)
		X101 I 1 Bright A_FadeOut(0.032)	TNT1 A 0 A_SetScale(scalex+0.035,scaley+0.035)
		X101 J 1 Bright A_FadeOut(0.032)	TNT1 A 0 A_SetScale(scalex+0.035,scaley+0.035)
		X101 K 1 Bright A_FadeOut(0.032)	TNT1 A 0 A_SetScale(scalex+0.035,scaley+0.035)
		X101 L 1 Bright A_FadeOut(0.032)	TNT1 A 0 A_SetScale(scalex+0.035,scaley+0.035)
		X101 M 1 Bright A_FadeOut(0.032)	TNT1 A 0 A_SetScale(scalex+0.035,scaley+0.035)
		X101 N 1 Bright A_FadeOut(0.032)	TNT1 A 0 A_SetScale(scalex+0.035,scaley+0.035)
		X101 O 1 Bright A_FadeOut(0.032)	TNT1 A 0 A_SetScale(scalex+0.035,scaley+0.035)
		X101 P 1 Bright A_FadeOut(0.032)	TNT1 A 0 A_SetScale(scalex+0.035,scaley+0.035)
		Goto Spawn+2
	}
}
Actor GreenGas2 : GreenGas1
{
	Scale 0.05
	States
	{
	Spawn:
		TNT1 A 0 
		TNT1 A 0 A_Jump(250,2,4,6,8,10,12,14,16,18,20,22,24,26,28,30,32,34,36,38)
		X102 A 1 Bright A_FadeOut(0.032)	TNT1 A 0 A_SetScale(scalex+0.035,scaley+0.035)
		X102 B 1 Bright A_FadeOut(0.032)	TNT1 A 0 A_SetScale(scalex+0.035,scaley+0.035)
		X102 C 1 Bright A_FadeOut(0.032)	TNT1 A 0 A_SetScale(scalex+0.035,scaley+0.035)
		X102 D 1 Bright A_FadeOut(0.032)	TNT1 A 0 A_SetScale(scalex+0.035,scaley+0.035)
		X102 E 1 Bright A_FadeOut(0.032)	TNT1 A 0 A_SetScale(scalex+0.035,scaley+0.035)
		X102 F 1 Bright A_FadeOut(0.032)	TNT1 A 0 A_SetScale(scalex+0.035,scaley+0.035)
		X102 G 1 Bright A_FadeOut(0.032)	TNT1 A 0 A_SetScale(scalex+0.035,scaley+0.035)
		X102 H 1 Bright A_FadeOut(0.032)	TNT1 A 0 A_SetScale(scalex+0.035,scaley+0.035)
		X102 I 1 Bright A_FadeOut(0.032)	TNT1 A 0 A_SetScale(scalex+0.035,scaley+0.035)
		X102 J 1 Bright A_FadeOut(0.032)	TNT1 A 0 A_SetScale(scalex+0.035,scaley+0.035)
		X102 K 1 Bright A_FadeOut(0.032)	TNT1 A 0 A_SetScale(scalex+0.035,scaley+0.035)
		X102 L 1 Bright A_FadeOut(0.032)	TNT1 A 0 A_SetScale(scalex+0.035,scaley+0.035)
		X102 M 1 Bright A_FadeOut(0.032)	TNT1 A 0 A_SetScale(scalex+0.035,scaley+0.035)
		X102 N 1 Bright A_FadeOut(0.032)	TNT1 A 0 A_SetScale(scalex+0.035,scaley+0.035)
		X102 O 1 Bright A_FadeOut(0.032)	TNT1 A 0 A_SetScale(scalex+0.035,scaley+0.035)
		X102 P 1 Bright A_FadeOut(0.032)	TNT1 A 0 A_SetScale(scalex+0.035,scaley+0.035)
		X102 Q 1 Bright A_FadeOut(0.032)	TNT1 A 0 A_SetScale(scalex+0.035,scaley+0.035)
		X102 R 1 Bright A_FadeOut(0.032)	TNT1 A 0 A_SetScale(scalex+0.035,scaley+0.035)
		X102 S 1 Bright A_FadeOut(0.032)	TNT1 A 0 A_SetScale(scalex+0.035,scaley+0.035)
		X102 T 1 Bright A_FadeOut(0.032)	TNT1 A 0 A_SetScale(scalex+0.035,scaley+0.035)
		X102 U 1 Bright A_FadeOut(0.032)	TNT1 A 0 A_SetScale(scalex+0.035,scaley+0.035)
		X102 V 1 Bright A_FadeOut(0.032)	TNT1 A 0 A_SetScale(scalex+0.035,scaley+0.035)
		Goto Spawn+2
	}
}



Actor GreenGasFake : RandomSpawner
{
	DropItem "GreenGas1Fake"
	DropItem "GreenGas2Fake"
}
Actor GreenGas1Fake :  GreenGas1
{
	Damage 0
	+THRUACTORS
	Alpha 0.6
	Scale 0.04
}
Actor GreenGas2Fake :  GreenGas2
{
	Damage 0
	+THRUACTORS
	Alpha 0.6
	Scale 0.05
}

//----------------------------------------------------------------------------
Actor FCStaffMissile : CStaffMissile replaces CStaffMissile
{
	Damage 8
	DamageType "AEPoison"
	Scale 0.4
	Translation "0:255=%[0,0,0]:[0.37,0.88,0.1]"
	States
	{
	Spawn:
		CSSF D 0
		CSSF D 0 A_SpawnItemEx("KBT",-3,0,0,0,0.6,frandom(0.5,-0.5),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION)
		CSSF D 0 A_SpawnItemEx("KBT",-3,0,0,0,-0.6,frandom(0.5,-0.5),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION)
		X022 A 1 A_CStaffMissileSlither
		CSSF E 0 A_SpawnItemEx("Barbtrail",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION)
		X022 A 1 A_CStaffMissileSlither
		CSSF D 0 A_SpawnItemEx("KBT",-3,0,0,0,0.6,frandom(0.5,-0.5),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION)
		CSSF D 0 A_SpawnItemEx("KBT",-3,0,0,0,-0.6,frandom(0.5,-0.5),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION)
		X022 B 1 A_CStaffMissileSlither
		CSSF E 0 A_SpawnItemEx("Barbtrail",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION)
		X022 B 1 A_CStaffMissileSlither
		
		CSSF D 0 A_SpawnItemEx("KBT",-3,0,0,0,0.6,frandom(0.5,-0.5),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION)
		CSSF D 0 A_SpawnItemEx("KBT",-3,0,0,0,-0.6,frandom(0.5,-0.5),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION)
		X022 C 1 A_CStaffMissileSlither
		CSSF E 0 A_SpawnItemEx("Barbtrail",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION)
		X022 C 1 A_CStaffMissileSlither
		CSSF D 0 A_SpawnItemEx("KBT",-3,0,0,0,0.6,frandom(0.5,-0.5),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION)
		CSSF D 0 A_SpawnItemEx("KBT",-3,0,0,0,-0.6,frandom(0.5,-0.5),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION)
		X022 D 1 A_CStaffMissileSlither
		CSSF E 0 A_SpawnItemEx("Barbtrail",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION)
		X022 D 1 A_CStaffMissileSlither
		Loop
	Death:
		TNT1 A 0 A_SetScale(1.0)
		TNT1 AAAAAA 0 A_SpawnItemEx("KBT",0,0,0,frandom(0.3,0.9),0,frandom(0.8,-0.8),random(0,359),SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION)
		CSSF FG 4 Bright
		CSSF HI 3 Bright
		Stop
	}
}

Actor SerptStaffTrail1
{
	+NOINTERACTION
	RenderStyle Add
	Scale 0.18
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_Jump(230,2,3,4,5,6,7,8,9)
		X105 ABCDEFGHIJKLMNOPQRSTUVWX 1 Bright A_FadeOut(0.03)
		Goto Spawn+2
	}
}

Actor SerpentStaffDrop : CustomInventory
{
	Inventory.MaxAmount 1
	States
	{
	Use:
		TNT1 A 0
		TNT1 A 0 A_SpawnItemEx("DroppedSerpentStaff",0,0,32,8,0,0,0,SXF_NOCHECKPOSITION,0)
		Stop
	}
}

Actor DroppedSerpentStaff
{
	Radius 16
	Height 20
	Scale 0.6
	States
	{
	Spawn:
		WCSS A 15
		TNT1 A 0 A_SpawnItemEx("AEoDSerpentStaffNoAmmo",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER,0)
		Stop
	}
}

Actor AEoDSerpentStaffNoAmmo : AEoDSerpentStaffItem
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL	+DONTGIB
	Scale 0.6
	Inventory.Amount 1
	Inventory.PickupMessage "You found the Serpent Staff!"
	Inventory.PickupSound "weaponbuild"
	States
	{
	Spawn:
		WCSS A -1
		Loop
	Pickup:
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",4) <= 0,"Nothing")
		TNT1 A 0 A_JumpIfInventory("RedMana",40,"Ammo")
		TNT1 A 0 A_GiveInventory("Weapon4Count",1)
		TNT1 A 0 A_GiveInventory("SerpentStaffDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDSerpentStaff",1)
		TNT1 A 0 A_TakeInventory("BlueMana",40)
		TNT1 A 0 	
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDSerpentStaff",1,"Ammo")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		TNT1 A 0 ACS_NamedExecute("s798",0,4,34,0)
		Fail
	Ammo:
		TNT1 A 0 A_TakeInventory("BlueMana",40)
		TNT1 A 0 A_JumpIfInventory("AEoDSerpentStaff",1,2)
		TNT1 A 0 A_GiveInventory("Weapon4Count",1)
		TNT1 A 0 A_GiveInventory("SerpentStaffDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDSerpentStaff",1)
		Stop
	}
}

//==================================================================================
//==================================================================================

//==================================================================================
//==================================================================================

Actor AEoDBiorifleItem : CustomInventory 6040
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL	+DONTGIB
	Scale 0.7
	Inventory.Amount 1
	Inventory.PickupMessage "You got the GES Biorifle!"
	Inventory.PickupSound "reilsss/weappickup/biorifle"
	States
	{
	Spawn:
		R010 J -1
		Loop
	Pickup:
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",4) <= 0,"Nothing")
		TNT1 A 0 A_JumpIfInventory("AEoDBiorifleCount",2,"Ammo")
		TNT1 A 0 A_JumpIfInventory("AEoDBiorifleCount",1,"Pickup2")
		TNT1 A 0 A_GiveInventory("Weapon4Count",1)
		TNT1 A 0 A_GiveInventory("BiorifleDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDBiorifle",1)
		TNT1 A 0 A_GiveInventory("AEoDBiorifleCount",1)
		TNT1 A 0 	
		TNT1 A 0 A_JumpIfInventory("NoWeaponSwitch",1,2)
		TNT1 A 0 A_SelectWeapon("AEoDBiorifle")
		TNT1 A 0
		Stop
	Pickup2:
		TNT1 A 0 A_GiveInventory("BiorifleDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDBiorifle",1)
		TNT1 A 0 A_GiveInventory("AEoDBiorifleCount",1)
		TNT1 A 0 	
		TNT1 A 0 A_JumpIfInventory("NoWeaponSwitch",1,2)
		TNT1 A 0 A_SelectWeapon("AEoDBiorifle")
		TNT1 A 0
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDBiorifleCount",2,"Ammo")
		TNT1 A 0 A_JumpIfInventory("AEoDBiorifleCount",1,"Pickup2")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		TNT1 A 0 ACS_NamedExecute("s798",0,4,43,0)
		Fail
	Ammo:
		TNT1 A 0 A_GiveInventory("AEoDBiorifle",1)
		Stop
	}
}

Actor AEoDBiorifle : Weapon // 6040
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL	+DONTGIB
	+WEAPON.CHEATNOTWEAPON
	Radius 20
	Height 16
	Weapon.AmmoType1 "PlasmaRod"
	Weapon.AmmoType2 "PlasmaRod"
	Weapon.AmmoGive1 30
	Weapon.AmmoUse1 1
	Weapon.AmmoUse2 2
	Weapon.SelectionOrder 10500
	Obituary "%o drank a glass of %k's dripping green load."
	Inventory.PickupMessage "You got the GES Biorifle!"
	Inventory.PickupSound "reilsss/weappickup/biorifle"
	Weapon.Upsound "weapons/draw"
	Scale 0.7
	Tag "Bio rifle"
	States
	{
	Spawn:
		R010 J 0
		TNT1 A 0 A_SpawnItemEx("AEoDBioriflePickup",0,0,0,0,0,0,0,0)
		Stop
	Ready:
		TNT1 A 0 A_TakeInventory("BiorifleDropCheck",1)
		TNT1 A 0 A_JumpIfInventory("AEoDBiorifleCount",2,"Ready2")
		TNT1 A 0 A_PlaySound("reilsss/weapons/magicidle2", 6, 0.8, 1)
		R010 AAAA 1 A_WeaponReady
		Loop
	Ready2:
		TNT1 A 0 A_JumpIfInventory("BiorifleDropCheck",1,"Ready")
		TNT1 A 0 A_PlaySound("reilsss/weapons/magicidle2", 6, 0.8, 1)
		R102 AAAA 1 A_WeaponReady
		Loop
	Deselect:
		TNT1 A 0 A_StopSound(6)
		TNT1 A 0 	
		TNT1 A 0 A_JumpIfInventory("AEoDBiorifleCount",2,"Deselect2")
		R010 A 1 A_Lower
		TNT1 AA 0 A_Lower
		Goto Deselect+1
	Deselect2:
		TNT1 A 0 	
		R102 A 1 A_Lower
		TNT1 AA 0 A_Lower
		Loop
	Select:
		TNT1 A 0 	
		TNT1 A 0 A_JumpIfInventory("AEoDBiorifleCount",2,"Select2")
		R010 A 1 A_Raise
		TNT1 AA 0 A_Raise
		Loop
	Select2:
		TNT1 A 0 	
		R102 A 1 A_Raise
		TNT1 AA 0 A_Raise
		Loop
	Fire:
		TNT1 A 0 A_JumpIfInventory("AEoDBiorifleCount",2,"Fire2")
		R010 C 3
		TNT1 A 0 A_GunFlash
		TNT1 A 0 A_PlaySound("reilsss/weapons/bioriflefire", CHAN_WEAPON, 1.0, 0)
		R010 F 4 A_FireCustomMissile("BioSlug", 0, 1, 7, 3)
		R010 C 3
		R010 B 2
		Goto Ready
	Fire2:
		R102 B 2
		TNT1 A 0 A_GunFlash
		TNT1 A 0 A_PlaySound("reilsss/weapons/bioriflefire", CHAN_WEAPON, 1.0, 0)
		R102 C 3 A_FireCustomMissile("BioSlug", 0, 1, 7, 3)
		R102 D 2
		TNT1 A 0 A_GunFlash
		TNT1 A 0 A_PlaySound("reilsss/weapons/bioriflefire", CHAN_WEAPON, 1.0, 0)
		R102 E 3 A_FireCustomMissile("BioSlug", 0, 1, -7, 3)
		R102 F 2
		R102 G 2
		Goto Ready
	Altfire:
		TNT1 A 0 A_JumpIfInventory("AEoDBiorifleCount",2,"2AltFire")
		TNT1 A 0 A_JumpIfInventory("BioRifleCounter",6,16)
		TNT1 A 0 A_JumpIfInventory("BioRifleCounter",5,12)
		TNT1 A 0 A_JumpIfInventory("BioRifleCounter",4,11)
		TNT1 A 0 A_JumpIfInventory("BioRifleCounter",3,7)
		TNT1 A 0 A_JumpIfInventory("BioRifleCounter",2,6)
		TNT1 A 0 A_JumpIfInventory("BioRifleCounter",1,3)
		TNT1 A 0
		TNT1 A 0 A_PlaySound("reilsss/weapons/bioriflealtfire", 7, 1.0, 0)
		R010 B 5 A_GiveInventory("BioRifleCounter",1)
		TNT1 A 0 A_Refire
		Goto AltFire1
		TNT1 A 0
		R010 C 5 A_GiveInventory("BioRifleCounter",1)
		TNT1 A 0 A_Refire
		Goto AltFire2
		TNT1 A 0
		R010 D 5 A_GiveInventory("BioRifleCounter",1)
		TNT1 A 0 A_Refire
		Goto AltFire3
		TNT1 A 0
		R010 E 5 A_GiveInventory("BioRifleCounter",1)
		Goto AltFire4
	Altfire1:
		TNT1 A 0 A_StopSound(7)
		TNT1 A 0 A_GunFlash
		TNT1 A 0 A_PlaySound("reilsss/weapons/bioriflefire", CHAN_WEAPON, 1.0, 0)
		TNT1 A 0 A_TakeInventory("BioRifleCounter",6)
		TNT1 A 0 //Move up
		TNT1 A 0
		R010 F 4 A_FireCustomMissile("BioSlug", 0, 1, 7, 3) //tiny
		R010 CB 4
		R010 B 2
		Goto Ready
	Altfire2:
		TNT1 A 0 A_StopSound(7)
		TNT1 A 0 A_GunFlash
		TNT1 A 0 A_PlaySound("reilsss/weapons/bioriflefire", CHAN_WEAPON, 1.0, 0)
		TNT1 A 0 A_TakeInventory("BioRifleCounter",6)
		TNT1 A 0 //Move up
		TNT1 A 0
		R010 F 0 A_FireCustomMissile("AmmoUser", 0, 1, 0, 0)
		R010 F 4 A_FireCustomMissile("BioSlug2", 0, 1, 7, 3) //small
		R010 ICB 4
		Goto Ready
	Altfire3:
		TNT1 A 0 A_StopSound(7)
		TNT1 A 0 A_GunFlash
		TNT1 A 0 A_PlaySound("reilsss/weapons/bioriflefire", CHAN_WEAPON, 1.0, 0)
		TNT1 A 0 A_TakeInventory("BioRifleCounter",6)
		TNT1 A 0 //Move up
		TNT1 A 0
		R010 F 0 A_FireCustomMissile("AmmoUser", 0, 1, 0, 0)
		R010 F 0 A_FireCustomMissile("AmmoUser", 0, 1, 0, 0)
		R010 F 4 A_FireCustomMissile("BioSlug3", 0, 1, 7, 3) //medium
		R010 HICB 4
		Goto Ready
	Altfire4:
		TNT1 A 0 A_StopSound(7)
		TNT1 A 0 A_GunFlash
		TNT1 A 0 A_PlaySound("reilsss/weapons/bioriflefire", CHAN_WEAPON, 1.0, 0)
		TNT1 A 0 A_TakeInventory("BioRifleCounter",6)
		TNT1 A 0 //Move up
		TNT1 A 0
		R010 F 0 A_FireCustomMissile("AmmoUser", 0, 1, 0, 0)
		R010 F 0 A_FireCustomMissile("AmmoUser", 0, 1, 0, 0)
		R010 F 0 A_FireCustomMissile("AmmoUser", 0, 1, 0, 0)
		R010 F 0 A_FireCustomMissile("BioSlug4", 0, 1, 7, 3) //large
		R010 GHICB 4
		Goto Ready
	2AltFire:
		TNT1 A 0 A_JumpIfInventory("BioRifleCounter",6,16)
		TNT1 A 0 A_JumpIfInventory("BioRifleCounter",5,12)
		TNT1 A 0 A_JumpIfInventory("BioRifleCounter",4,11)
		TNT1 A 0 A_JumpIfInventory("BioRifleCounter",3,7)
		TNT1 A 0 A_JumpIfInventory("BioRifleCounter",2,6)
		TNT1 A 0 A_JumpIfInventory("BioRifleCounter",1,3)
		TNT1 A 0
		TNT1 A 0 A_PlaySound("reilsss/weapons/bioriflealtfire", 7, 1.0, 0)
		R102 H 5 A_GiveInventory("BioRifleCounter",1)
		TNT1 A 0 A_Refire
		Goto 2AltFire1
		TNT1 A 0
		R102 I 5 A_GiveInventory("BioRifleCounter",1)
		TNT1 A 0 A_Refire
		Goto 2AltFire2
		TNT1 A 0
		R102 J 5 A_GiveInventory("BioRifleCounter",1)
		TNT1 A 0 A_Refire
		Goto 2AltFire3
		TNT1 A 0
		R102 K 5 A_GiveInventory("BioRifleCounter",1)
		Goto 2AltFire4
	2Altfire1:
		TNT1 A 0 A_StopSound(7)
		TNT1 A 0 A_GunFlash
		TNT1 A 0 A_PlaySound("reilsss/weapons/bioriflefire", CHAN_WEAPON, 1.0, 0)
		TNT1 A 0 A_TakeInventory("BioRifleCounter",6)
		TNT1 A 0 //Move up
		TNT1 A 0
		R102 L 0 A_FireCustomMissile("BioSlug", 0, 1, 7, 3) //tiny
		R102 L 4 A_FireCustomMissile("BioSlug", 0, 1, -7, 3) //tiny
		R102 OH 4
		R102 H 2
		Goto Ready
	2Altfire2:
		TNT1 A 0 A_StopSound(7)
		TNT1 A 0 A_GunFlash
		TNT1 A 0 A_PlaySound("reilsss/weapons/bioriflefire", CHAN_WEAPON, 1.0, 0)
		TNT1 A 0 A_TakeInventory("BioRifleCounter",6)
		TNT1 A 0 //Move up
		TNT1 A 0
		R102 LL 0 A_FireCustomMissile("AmmoUser", 0, 1, 0, 0)
		R102 L 0 A_FireCustomMissile("BioSlug2", 0, 1, 7, 3) //small
		R102 L 4 A_FireCustomMissile("BioSlug2", 0, 1, -7, 3) //small
		R102 OIH 4
		Goto Ready
	2Altfire3:
		TNT1 A 0 A_StopSound(7)
		TNT1 A 0 A_GunFlash
		TNT1 A 0 A_PlaySound("reilsss/weapons/bioriflefire", CHAN_WEAPON, 1.0, 0)
		TNT1 A 0 A_TakeInventory("BioRifleCounter",6)
		TNT1 A 0 //Move up
		TNT1 A 0
		R102 LLLL 0 A_FireCustomMissile("AmmoUser", 0, 1, 0, 0)
		R102 L 0 A_FireCustomMissile("BioSlug3", 0, 1, 7, 3) //medium
		R102 L 4 A_FireCustomMissile("BioSlug3", 0, 1, -7, 3) //medium
		R102 NOIH 4
		Goto Ready
	2Altfire4:
		TNT1 A 0 A_StopSound(7)
		TNT1 A 0 A_GunFlash
		TNT1 A 0 A_PlaySound("reilsss/weapons/bioriflefire", CHAN_WEAPON, 1.0, 0)
		TNT1 A 0 A_TakeInventory("BioRifleCounter",6)
		TNT1 A 0 //Move up
		TNT1 A 0
		R102 LLLLLL 0 A_FireCustomMissile("AmmoUser", 0, 1, 0, 0)
		R102 L 0 A_FireCustomMissile("BioSlug4", 0, 1, 7, 3) //large
		R102 L 0 A_FireCustomMissile("BioSlug4", 0, 1, -7, 3) //large
		R102 MNOIH 4
		Goto Ready
	Flash:
		TNT1 A 1 Bright A_Light1
		TNT1 A 1 Bright A_Light0
		Stop
	}
}

Actor BioRifleCounter : Inventory
{
	Inventory.Amount 0
	Inventory.MaxAmount 7
}

Actor BioSlug
{
	Projectile
	+Shootable //So alt fire works.
	+SeekerMissile //So A_Fire works.
	+DontSplash
	+ForceRadiusDmg
	+DontFall //Stops it from falling after sticking to targets.
	-NOGRAVITY
	Gravity 0.4
	Health 1
	Radius 5
	Height 5
	Speed 30
	Damage 5
	DamageType Poison
	Decal "BioDecal"
	RenderStyle Add
	Translation "0:255=%[0,0.3,0]:[0,1.5,0]"
	Alpha 0.7
	Scale 0.3
	States
	{
	Spawn:
		R010 KL 3 Bright A_SpawnItemEx("NoPuff",0,0,0,0,0,0,0,SXF_CLIENTSIDE)
		Loop
		TNT1 A 0 A_Stop
		TNT1 A 0 A_SeekerMissile(0,0,1,256,0)
		R010 K 1 Bright A_Warp(AAPTR_TRACER,0,0,35,WARPF_INTERPOLATE|WARPF_NOCHECKPOSITION)
		TNT1 A 0 A_SeekerMissile(0,0,1,256,0)
		R010 K 1 Bright A_Warp(AAPTR_TRACER,0,0,35,WARPF_INTERPOLATE|WARPF_NOCHECKPOSITION)
		TNT1 A 0 A_SeekerMissile(0,0,1,256,0)
		R010 K 1 Bright A_Warp(AAPTR_TRACER,0,0,35,WARPF_INTERPOLATE|WARPF_NOCHECKPOSITION)
		TNT1 A 0 A_Explode(1,16)
		R010 LLL 1 Bright A_Warp(AAPTR_TRACER,0,0,35,WARPF_INTERPOLATE|WARPF_NOCHECKPOSITION)
		TNT1 A 0 A_SpawnDebris("LittleBioSlug")
		TNT1 A 0 A_Explode(1,16)
		R010 KKK 1 Bright A_Warp(AAPTR_TRACER,0,0,35,WARPF_INTERPOLATE|WARPF_NOCHECKPOSITION)
		TNT1 A 0 A_Explode(1,16)
		R010 LLL 1 Bright A_Warp(AAPTR_TRACER,0,0,35,WARPF_INTERPOLATE|WARPF_NOCHECKPOSITION)
		TNT1 A 0 A_SpawnDebris("LittleBioSlug")
		TNT1 A 0 A_Explode(1,16)
		R010 KKK 1 Bright A_Warp(AAPTR_TRACER,0,0,35,WARPF_INTERPOLATE|WARPF_NOCHECKPOSITION)
		TNT1 A 0 A_Explode(1,16)
		R010 LLL 1 Bright A_Warp(AAPTR_TRACER,0,0,35,WARPF_INTERPOLATE|WARPF_NOCHECKPOSITION)
		TNT1 A 0 A_SpawnDebris("LittleBioSlug")
		TNT1 A 0 A_Explode(1,16)
		R010 KKK 1 Bright A_Warp(AAPTR_TRACER,0,0,35,WARPF_INTERPOLATE|WARPF_NOCHECKPOSITION)
		TNT1 A 0 A_Explode(1,16)
		R010 LLL 1 Bright A_Warp(AAPTR_TRACER,0,0,35,WARPF_INTERPOLATE|WARPF_NOCHECKPOSITION)
		TNT1 A 0 A_SpawnDebris("LittleBioSlug")
		TNT1 A 0 A_Explode(1,16)
		R010 KKK 1 Bright A_Warp(AAPTR_TRACER,0,0,35,WARPF_INTERPOLATE|WARPF_NOCHECKPOSITION)
		TNT1 A 0 A_Explode(1,16)
		R010 LLL 1 Bright A_Warp(AAPTR_TRACER,0,0,35,WARPF_INTERPOLATE|WARPF_NOCHECKPOSITION)
		TNT1 A 0 A_SpawnDebris("LittleBioSlug")
		TNT1 A 0 A_Explode(1,16)
		Goto BioSlugOnEnemy
	Death:
		R010 K 1 Bright
		TNT1 A 1 A_SpawnItemEx("BioSlugOnWall",0,0,0,0,0,0,0,SXF_CLIENTSIDE)
		Stop
	XDeath:
		TNT1 A 0 A_Stop
		Goto Spawn+3
	BioSlugOnEnemy:
		TNT1 A 0 A_PlaySound("reilsss/weapons/biorifleexplosion")
		TNT1 A 0 A_Explode(50,100,1)
		TNT1 A 1 A_SpawnItemEx("BioSlugBoom",0,0,0,0,0,0,0,SXF_CLIENTSIDE)
		TNT1 A 0 A_SpawnDebris("LittleBioSlug")
		TNT1 A 0 A_SpawnDebris("LittleBioSlug")
		TNT1 A 0 A_SpawnDebris("LittleBioSlug")
		TNT1 A 0 A_SpawnDebris("LittleBioSlug")
		Stop
	}
}

Actor BioSlugOnWall
{
	Projectile
	+Shootable //So alt fire works.
	+DontSplash
	+SeekerMissile //So A_Fire works.
	+ForceRadiusDmg
	+DontFall //Stops it from falling after sticking to targets.
	Radius 5
	Height 5
	Speed 0
	Damage 5
	DamageType Poison
	Decal "BioDecal"
	+NOGRAVITY
	RenderStyle Add
	Translation "0:255=%[0,0.3,0]:[0,1.5,0]"
	Alpha 0.7
	Scale 0.3
	States
	{
	Spawn:
		R010 KKKKKKKKKKKKKKKLLLLLLLLLLLLLLL 1 Bright A_Explode(1,16)
		TNT1 A 0 A_PlaySound("reilsss/weapons/biorifleexplosion")
		TNT1 A 0 A_Explode(50,100,1)
		TNT1 A 1 A_SpawnItemEx("BioSlugBoom",0,0,0,0,0,0,0,SXF_CLIENTSIDE)
		TNT1 A 0 A_SpawnDebris("LittleBioSlug")
		TNT1 A 0 A_SpawnDebris("LittleBioSlug")
		TNT1 A 0 A_SpawnDebris("LittleBioSlug")
		TNT1 A 0 A_SpawnDebris("LittleBioSlug")
		Stop
	}
}

Actor LittleBioSlug
{
	+MISSILE
	+CORPSE
	+HEXENBOUNCE
	Health 1
	BounceFactor 0
	Alpha 0.4
	Scale 0.1
	RenderStyle Add
	+DONTSPLASH
	Translation "0:255=%[0,0.3,0]:[0,1.5,0]"
	States
	{
	Spawn:
		R010 KL 4 bright
		Loop
	Death:
		TNT1 A 1
		Stop
	Crash:
		TNT1 A 1
		Stop
	}
}

Actor BioSlug2
{
	Projectile
	+Shootable //So alt fire works.
	+SeekerMissile //So A_Fire works.
	+DontSplash
	+ForceRadiusDmg
	+DontFall //Stops it from falling after sticking to targets.
	-NOGRAVITY
	Gravity 0.4
	Health 1
	Radius 5
	Height 5
	Speed 30
	Damage 6
	DamageType Poison
	Decal "BioDecal"
	RenderStyle Add
	Translation "0:255=%[0,0.3,0]:[0,1.5,0]"
	Alpha 0.7
	Scale 0.45
	States
	{
	Spawn:
		R010 KL 3 Bright A_SpawnItemEx("NoPuff",0,0,0,0,0,0,0,SXF_CLIENTSIDE)
		Loop
		TNT1 A 0 A_Stop
		TNT1 A 0 A_SeekerMissile(0,0,1,256,0)
		R010 K 1 Bright A_Warp(AAPTR_TRACER,0,0,35,WARPF_INTERPOLATE|WARPF_NOCHECKPOSITION)
		TNT1 A 0 A_SeekerMissile(0,0,1,256,0)
		R010 K 1 Bright A_Warp(AAPTR_TRACER,0,0,35,WARPF_INTERPOLATE|WARPF_NOCHECKPOSITION)
		TNT1 A 0 A_SeekerMissile(0,0,1,256,0)
		R010 K 1 Bright A_Warp(AAPTR_TRACER,0,0,35,WARPF_INTERPOLATE|WARPF_NOCHECKPOSITION)
		TNT1 A 0 A_Explode(1,16)
		R010 LLL 1 Bright A_Warp(AAPTR_TRACER,0,0,35,WARPF_INTERPOLATE|WARPF_NOCHECKPOSITION)
		TNT1 A 0 A_SpawnDebris("LittleBioSlug")
		TNT1 A 0 A_Explode(1,16)
		R010 KKK 1 Bright A_Warp(AAPTR_TRACER,0,0,35,WARPF_INTERPOLATE|WARPF_NOCHECKPOSITION)
		TNT1 A 0 A_Explode(1,16)
		R010 LLL 1 Bright A_Warp(AAPTR_TRACER,0,0,35,WARPF_INTERPOLATE|WARPF_NOCHECKPOSITION)
		TNT1 A 0 A_SpawnDebris("LittleBioSlug")
		TNT1 A 0 A_Explode(1,16)
		R010 KKK 1 Bright A_Warp(AAPTR_TRACER,0,0,35,WARPF_INTERPOLATE|WARPF_NOCHECKPOSITION)
		TNT1 A 0 A_Explode(1,16)
		R010 LLL 1 Bright A_Warp(AAPTR_TRACER,0,0,35,WARPF_INTERPOLATE|WARPF_NOCHECKPOSITION)
		TNT1 A 0 A_SpawnDebris("LittleBioSlug")
		TNT1 A 0 A_Explode(1,16)
		R010 KKK 1 Bright A_Warp(AAPTR_TRACER,0,0,35,WARPF_INTERPOLATE|WARPF_NOCHECKPOSITION)
		TNT1 A 0 A_Explode(1,16)
		R010 LLL 1 Bright A_Warp(AAPTR_TRACER,0,0,35,WARPF_INTERPOLATE|WARPF_NOCHECKPOSITION)
		TNT1 A 0 A_SpawnDebris("LittleBioSlug")
		TNT1 A 0 A_Explode(1,16)
		R010 KKK 1 Bright A_Warp(AAPTR_TRACER,0,0,35,WARPF_INTERPOLATE|WARPF_NOCHECKPOSITION)
		TNT1 A 0 A_Explode(1,16)
		R010 LLL 1 Bright A_Warp(AAPTR_TRACER,0,0,35,WARPF_INTERPOLATE|WARPF_NOCHECKPOSITION)
		TNT1 A 0 A_SpawnDebris("LittleBioSlug")
		TNT1 A 0 A_Explode(1,16)
		Goto BioSlugOnEnemy
	Death:
		R010 K 1 Bright
		TNT1 A 1 A_SpawnItemEx("BioSlugOnWall2",0,0,0,0,0,0,0,SXF_CLIENTSIDE)
		Stop
	XDeath:
		TNT1 A 0 A_Stop
		Goto Spawn+3
	BioSlugOnEnemy:
		TNT1 A 0 A_PlaySound("reilsss/weapons/biorifleexplosion")
		TNT1 A 0 A_Explode(55,192,1)
		TNT1 A 1 A_SpawnItemEx("BioSlugBoom2",0,0,0,0,0,0,0,SXF_CLIENTSIDE)
		TNT1 A 0 A_SpawnDebris("LittleBioSlug")
		TNT1 A 0 A_SpawnDebris("LittleBioSlug")
		TNT1 A 0 A_SpawnDebris("LittleBioSlug")
		TNT1 A 0 A_SpawnDebris("BioSlugExplode3")
		TNT1 A 0 A_SpawnItemEx("BioSlug",0,0,0,random(-6,6),0,random(3,6),random(0,359),SXF_NOCHECKPOSITION)
		Stop
	}
}

Actor BioSlugOnWall2
{
	Projectile
	+Shootable //So alt fire works.
	+DontSplash
	+SeekerMissile //So A_Fire works.
	+ForceRadiusDmg
	+DontFall //Stops it from falling after sticking to targets.
	Radius 5
	Height 5
	Speed 0
	Damage 6
	DamageType Poison
	Decal "BioDecal"
	RenderStyle Add
	Translation "0:255=%[0,0.3,0]:[0,1.5,0]"
	Alpha 0.7
	Scale 0.45
	States
	{
	Spawn:
		R010 KKKKKKKKKKKKKKKLLLLLLLLLLLLLLL 1 Bright A_Explode(1,16)
		TNT1 A 0 A_PlaySound("reilsss/weapons/biorifleexplosion")
		TNT1 A 0 A_Explode(55,192,1)
		TNT1 A 1 A_SpawnItemEx("BioSlugBoom2",0,0,0,0,0,0,0,SXF_CLIENTSIDE)
		TNT1 A 0 A_SpawnDebris("LittleBioSlug")
		TNT1 A 0 A_SpawnDebris("LittleBioSlug")
		TNT1 A 0 A_SpawnDebris("LittleBioSlug")
		TNT1 A 0 A_SpawnDebris("BioSlugExplode3")
		TNT1 AA 0 A_SpawnItemEx("BioSlug",0,0,0,random(-6,6),0,random(3,6),random(0,359),SXF_NOCHECKPOSITION)
		Stop
	}
}

Actor BioSlug3
{
	Projectile
	+Shootable //So alt fire works.
	+SeekerMissile //So A_Fire works.
	+DontSplash
	+ForceRadiusDmg
	+DontFall //Stops it from falling after sticking to targets.
	-NOGRAVITY
	Gravity 0.4
	Health 1
	Radius 5
	Height 5
	Speed 30
	Damage 6
	DamageType Poison
	Decal "BioDecal"
	RenderStyle Add
	Translation "0:255=%[0,0.3,0]:[0,1.5,0]"
	Alpha 0.7
	Scale 0.60
	States
	{
	Spawn:
		R010 KL 3 Bright A_SpawnItemEx("NoPuff",0,0,0,0,0,0,0,SXF_CLIENTSIDE)
		Loop
		TNT1 A 0 A_Stop
		TNT1 A 0 A_SeekerMissile(0,0,1,256,0)
		R010 K 1 Bright A_Warp(AAPTR_TRACER,0,0,35,WARPF_INTERPOLATE|WARPF_NOCHECKPOSITION)
		TNT1 A 0 A_SeekerMissile(0,0,1,256,0)
		R010 K 1 Bright A_Warp(AAPTR_TRACER,0,0,35,WARPF_INTERPOLATE|WARPF_NOCHECKPOSITION)
		TNT1 A 0 A_SeekerMissile(0,0,1,256,0)
		R010 K 1 Bright A_Warp(AAPTR_TRACER,0,0,35,WARPF_INTERPOLATE|WARPF_NOCHECKPOSITION)
		TNT1 A 0 A_Explode(1,16)
		R010 LLL 1 Bright A_Warp(AAPTR_TRACER,0,0,35,WARPF_INTERPOLATE|WARPF_NOCHECKPOSITION)
		TNT1 A 0 A_SpawnDebris("LittleBioSlug")
		TNT1 A 0 A_Explode(1,16)
		R010 KKK 1 Bright A_Warp(AAPTR_TRACER,0,0,35,WARPF_INTERPOLATE|WARPF_NOCHECKPOSITION)
		TNT1 A 0 A_Explode(1,16)
		R010 LLL 1 Bright A_Warp(AAPTR_TRACER,0,0,35,WARPF_INTERPOLATE|WARPF_NOCHECKPOSITION)
		TNT1 A 0 A_SpawnDebris("LittleBioSlug")
		TNT1 A 0 A_Explode(1,16)
		R010 KKK 1 Bright A_Warp(AAPTR_TRACER,0,0,35,WARPF_INTERPOLATE|WARPF_NOCHECKPOSITION)
		TNT1 A 0 A_Explode(1,16)
		R010 LLL 1 Bright A_Warp(AAPTR_TRACER,0,0,35,WARPF_INTERPOLATE|WARPF_NOCHECKPOSITION)
		TNT1 A 0 A_SpawnDebris("LittleBioSlug")
		TNT1 A 0 A_Explode(1,16)
		R010 KKK 1 Bright A_Warp(AAPTR_TRACER,0,0,35,WARPF_INTERPOLATE|WARPF_NOCHECKPOSITION)
		TNT1 A 0 A_Explode(1,16)
		R010 LLL 1 Bright A_Warp(AAPTR_TRACER,0,0,35,WARPF_INTERPOLATE|WARPF_NOCHECKPOSITION)
		TNT1 A 0 A_SpawnDebris("LittleBioSlug")
		TNT1 A 0 A_Explode(1,16)
		R010 KKK 1 Bright A_Warp(AAPTR_TRACER,0,0,35,WARPF_INTERPOLATE|WARPF_NOCHECKPOSITION)
		TNT1 A 0 A_Explode(1,16)
		R010 LLL 1 Bright A_Warp(AAPTR_TRACER,0,0,35,WARPF_INTERPOLATE|WARPF_NOCHECKPOSITION)
		TNT1 A 0 A_SpawnDebris("LittleBioSlug")
		TNT1 A 0 A_Explode(1,16)
		Goto BioSlugOnEnemy
	Death:
		R010 K 1 Bright
		TNT1 A 1 A_SpawnItemEx("BioSlugOnWall3",0,0,0,0,0,0,0,SXF_CLIENTSIDE)
		Stop
	XDeath:
		TNT1 A 0 A_Stop
		Goto Spawn+3
	BioSlugOnEnemy:
		TNT1 A 0 A_PlaySound("reilsss/weapons/biorifleexplosion")
		TNT1 A 0 A_Explode(75,192,1)
		TNT1 A 1 A_SpawnItemEx("BioSlugBoom3",0,0,0,0,0,0,0,SXF_CLIENTSIDE)
		TNT1 A 0 A_SpawnDebris("LittleBioSlug")
		TNT1 A 0 A_SpawnDebris("LittleBioSlug")
		TNT1 A 0 A_SpawnDebris("LittleBioSlug")
		TNT1 A 0 A_SpawnDebris("BioSlugExplode2")
		TNT1 AAA 0 A_SpawnItemEx("BioSlug",0,0,0,random(-6,6),0,random(3,6),random(0,359),SXF_NOCHECKPOSITION)
		Stop
	}
}

Actor BioSlugOnWall3
{
	Projectile
	+Shootable //So alt fire works.
	+DontSplash
	+SeekerMissile //So A_Fire works.
	+ForceRadiusDmg
	+DontFall //Stops it from falling after sticking to targets.
	Radius 5
	Height 5
	Speed 0
	Damage 6
	DamageType Poison
	Decal "BioDecal"
	RenderStyle Add
	Translation "0:255=%[0,0.3,0]:[0,1.5,0]"
	Alpha 0.7
	Scale 0.60
	States
	{
	Spawn:
		R010 KKKKKKKKKKKKKKKLLLLLLLLLLLLLLL 1 Bright A_Explode(1,16)
		TNT1 A 0 A_PlaySound("reilsss/weapons/biorifleexplosion")
		TNT1 A 0 A_Explode(75,192,1)
		TNT1 A 1 A_SpawnItemEx("BioSlugBoom3",0,0,0,0,0,0,0,SXF_CLIENTSIDE)
		TNT1 A 0 A_SpawnDebris("LittleBioSlug")
		TNT1 A 0 A_SpawnDebris("LittleBioSlug")
		TNT1 A 0 A_SpawnDebris("LittleBioSlug")
		TNT1 A 0 A_SpawnDebris("BioSlugExplode2")
		TNT1 AAA 0 A_SpawnItemEx("BioSlug",0,0,0,random(-6,6),0,random(3,6),random(0,359),SXF_NOCHECKPOSITION)
		Stop
	}
}

Actor BioSlug4
{
	Projectile
	+Shootable //So alt fire works.
	+SeekerMissile //So A_Fire works.
	+DontSplash
	+ForceRadiusDmg
	+DontFall //Stops it from falling after sticking to targets.
	-NOGRAVITY
	Gravity 0.4
	Health 1
	Radius 5
	Height 5
	Speed 30
	Damage 6
	DamageType Poison
	Decal "BioDecal"
	RenderStyle Add
	Translation "0:255=%[0,0.3,0]:[0,1.5,0]"
	Alpha 0.7
	Scale 0.80
	States
	{
	Spawn:
		R010 KL 3 Bright A_SpawnItemEx("NoPuff",0,0,0,0,0,0,0,SXF_CLIENTSIDE)
		Loop
		TNT1 A 0 A_Stop
		TNT1 A 0 A_SeekerMissile(0,0,1,256,0)
		R010 K 1 Bright A_Warp(AAPTR_TRACER,0,0,35,WARPF_INTERPOLATE|WARPF_NOCHECKPOSITION)
		TNT1 A 0 A_SeekerMissile(0,0,1,256,0)
		R010 K 1 Bright A_Warp(AAPTR_TRACER,0,0,35,WARPF_INTERPOLATE|WARPF_NOCHECKPOSITION)
		TNT1 A 0 A_SeekerMissile(0,0,1,256,0)
		R010 K 1 Bright A_Warp(AAPTR_TRACER,0,0,35,WARPF_INTERPOLATE|WARPF_NOCHECKPOSITION)
		TNT1 A 0 A_Explode(1,16)
		R010 LLL 1 Bright A_Warp(AAPTR_TRACER,0,0,35,WARPF_INTERPOLATE|WARPF_NOCHECKPOSITION)
		TNT1 A 0 A_SpawnDebris("LittleBioSlug")
		TNT1 A 0 A_Explode(1,16)
		R010 KKK 1 Bright A_Warp(AAPTR_TRACER,0,0,35,WARPF_INTERPOLATE|WARPF_NOCHECKPOSITION)
		TNT1 A 0 A_Explode(1,16)
		R010 LLL 1 Bright A_Warp(AAPTR_TRACER,0,0,35,WARPF_INTERPOLATE|WARPF_NOCHECKPOSITION)
		TNT1 A 0 A_SpawnDebris("LittleBioSlug")
		TNT1 A 0 A_Explode(1,16)
		R010 KKK 1 Bright A_Warp(AAPTR_TRACER,0,0,35,WARPF_INTERPOLATE|WARPF_NOCHECKPOSITION)
		TNT1 A 0 A_Explode(1,16)
		R010 LLL 1 Bright A_Warp(AAPTR_TRACER,0,0,35,WARPF_INTERPOLATE|WARPF_NOCHECKPOSITION)
		TNT1 A 0 A_SpawnDebris("LittleBioSlug")
		TNT1 A 0 A_Explode(1,16)
		R010 KKK 1 Bright A_Warp(AAPTR_TRACER,0,0,35,WARPF_INTERPOLATE|WARPF_NOCHECKPOSITION)
		TNT1 A 0 A_Explode(1,16)
		R010 LLL 1 Bright A_Warp(AAPTR_TRACER,0,0,35,WARPF_INTERPOLATE|WARPF_NOCHECKPOSITION)
		TNT1 A 0 A_SpawnDebris("LittleBioSlug")
		TNT1 A 0 A_Explode(1,16)
		R010 KKK 1 Bright A_Warp(AAPTR_TRACER,0,0,35,WARPF_INTERPOLATE|WARPF_NOCHECKPOSITION)
		TNT1 A 0 A_Explode(1,16)
		R010 LLL 1 Bright A_Warp(AAPTR_TRACER,0,0,35,WARPF_INTERPOLATE|WARPF_NOCHECKPOSITION)
		TNT1 A 0 A_SpawnDebris("LittleBioSlug")
		TNT1 A 0 A_Explode(1,16)
		Goto BioSlugOnEnemy
	Death:
		R010 K 1 Bright
		TNT1 A 1 A_SpawnItemEx("BioSlugOnWall4",0,0,0,0,0,0,0,SXF_CLIENTSIDE)
		Stop
	XDeath:
		TNT1 A 0 A_Stop
		Goto Spawn+3
	BioSlugOnEnemy:
		TNT1 A 0 A_PlaySound("reilsss/weapons/biorifleexplosion")
		TNT1 A 0 A_Explode(100,192,1)
		TNT1 A 1 A_SpawnItemEx("BioSlugBoom4",0,0,0,0,0,0,0,SXF_CLIENTSIDE)
		TNT1 A 0 A_SpawnDebris("LittleBioSlug")
		TNT1 A 0 A_SpawnDebris("LittleBioSlug")
		TNT1 A 0 A_SpawnDebris("BioSlugExplode")
		TNT1 A 0 A_SpawnDebris("BioSlugExplode")
		TNT1 AAAAAA 0 A_SpawnItemEx("BioSlug",0,0,0,random(-6,6),0,random(3,6),random(0,359),SXF_NOCHECKPOSITION)
		Stop
	}
}

Actor BioSlugOnWall4
{
	Projectile
	+Shootable //So alt fire works.
	+DontSplash
	+SeekerMissile //So A_Fire works.
	+ForceRadiusDmg
	+DontFall //Stops it from falling after sticking to targets.
	Radius 5
	Height 5
	Speed 0
	Damage 6
	DamageType Poison
	Decal "BioDecal"
	RenderStyle Add
	Translation "0:255=%[0,0.3,0]:[0,1.5,0]"
	Alpha 0.7
	Scale 0.80
	States
	{
	Spawn:
		R010 KKKKKKKKKKKKKKKLLLLLLLLLLLLLLL 1 Bright A_Explode(1,16)
		TNT1 A 0 A_PlaySound("reilsss/weapons/biorifleexplosion")
		TNT1 A 0 A_Explode(100,192,1)
		TNT1 A 1 A_SpawnItemEx("BioSlugBoom4",0,0,0,0,0,0,0,SXF_CLIENTSIDE)
		TNT1 A 0 A_SpawnDebris("LittleBioSlug")
		TNT1 A 0 A_SpawnDebris("LittleBioSlug")
		TNT1 A 0 A_SpawnDebris("BioSlugExplode")
		TNT1 A 0 A_SpawnDebris("BioSlugExplode")
		TNT1 AAAAAAA 0 A_SpawnItemEx("BioSlug",0,0,0,random(-6,6),0,random(3,6),random(0,359),SXF_NOCHECKPOSITION)
		Stop
	}
}

Actor BioSlugExplode : PlasmaBall
{ 
	-NOGRAVITY
	+NOCLIP
	+DONTSPLASH
	+FORCEXYBILLBOARD
	Gravity 0.25
	Translation "208:223=112:127", "48:79=112:127", "232:235=124:127", "160:167=112:127"
	Health 5
	Damage 0
	Speed 0
	Scale 0.25
	States
	{
	Spawn:
		D3BF B 1 BRIGHT
		D3BF C 1 BRIGHT
		D3BF DE 1 BRIGHT
		D3BF F 1 Bright A_SpawnDebris("BioSlugExplode2")
		D3BF GHIJKLMNOPQRSTU 1 BRIGHT
		Stop
	}
}

Actor BioSlugExplode2 : BioSlugExplode
{ 
	Scale 0.125
	States
	{
	Spawn:
		D3BF B 1 BRIGHT
		D3BF C 1 BRIGHT
		D3BF DE 1 BRIGHT
		D3BF F 1 Bright A_SpawnDebris("BioSlugExplode3")
		D3BF GHIJKLMNOPQRSTU 1 BRIGHT
		Stop
	}
}

Actor BioSlugExplode3 : BioSlugExplode
{ 
	-NOGRAVITY
	Gravity 0.25
	Scale 0.05
	States
	{
	Spawn:
		D3BF B 1 BRIGHT
		D3BF C 1 BRIGHT
		D3BF DEFGGHIJKLMNOPQRSTU 1 BRIGHT
		Stop
	}
}

Actor BioSlugBoom : PlasmaBall
{ 
	+NOGRAVITY
	+NOCLIP
	+DONTSPLASH
	+FORCEXYBILLBOARD
	Health 5
	Damage 0
	Speed 0
	Scale 0.2
	States
	{
	Spawn:
		R011 ABCDEFGHIJKLMNO 1 BRIGHT
		Stop
	}
}

Actor BioSlugBoom2 : BioSlugBoom	{ Scale 0.4 }
Actor BioSlugBoom3 : BioSlugBoom	{ Scale 0.6 }
Actor BioSlugBoom4 : BioSlugBoom	{ Scale 0.8 }

Actor AEoDBioriflePickup : CustomInventory //6042
{
	Inventory.PickupMessage "You got the GES Biorifle!"
	Inventory.PickupSound "reilsss/weappickup/biorifle"
	Scale 0.7
	States
	{
	Spawn:
		R010 J -1
		Loop
	Pickup:
		TNT1 A 0 A_JumpIfInventory("AEoDBiorifleCount",2,4)
		TNT1 A 0 A_GiveInventory("AEoDBiorifleCount",1)
		TNT1 A 0 A_JumpIfInventory("NoWeaponSwitch",1,2)
		TNT1 A 0 A_SelectWeapon("AEoDBiorifle")
		TNT1 A 0 A_GiveInventory("AEoDBiorifle",1)
		TNT1 A 0
		Stop
	}
}

Actor AEoDBiorifleCount : Inventory { Inventory.MaxAmount 2 }

Actor BiorifleDropCheck : Inventory {}

Actor BioRifleDrop : CustomInventory
{
	Inventory.MaxAmount 2
	States
	{
	Use:
		TNT1 A 0
		TNT1 A 0 A_StopSound(6)
		TNT1 A 0 A_SpawnItemEx("DroppedBioRifle",0,0,32,8,0,0,0,SXF_NOCHECKPOSITION,0)
		TNT1 A 0 A_TakeInventory("AEoDBiorifleCount",1)
		Stop
	}
}

Actor DroppedBioRifle
{
	Radius 16
	Height 20
	Scale 0.7
	States
	{
	Spawn:
		R010 J 15
		TNT1 A 0 A_SpawnItemEx("AEoDBioRifleNoAmmo",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER,0)
		Stop
	}
}

Actor AEoDBioRifleNoAmmo : AEoDBioRifleItem
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL	+DONTGIB
	Scale 0.7
	Inventory.Amount 1
	Inventory.PickupMessage "You got the GES Biorifle!"
	Inventory.PickupSound "reilsss/weappickup/biorifle"
	States
	{
	Spawn:
		R010 J -1
		Loop
	Pickup:
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",4) <= 0,"Nothing")
		TNT1 A 0 A_JumpIfInventory("PlasmaRod",30,"Ammo")
		TNT1 A 0 A_JumpIfInventory("AEoDBioRifleCount",2,"Ammo")
		TNT1 A 0 A_JumpIfInventory("AEoDBioRifleCount",1,"Pickup2")
		TNT1 A 0 A_GiveInventory("Weapon4Count",1)
		TNT1 A 0 A_GiveInventory("BioRifleDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDBioRifle",1)
		TNT1 A 0 A_GiveInventory("AEoDBioRifleCount",1)
		TNT1 A 0 A_TakeInventory("PlasmaRod",30)
		TNT1 A 0 	
		TNT1 A 0 A_JumpIfInventory("NoWeaponSwitch",1,2)
		TNT1 A 0 A_SelectWeapon("AEoDBioRifle")
		TNT1 A 0
		Stop
	Pickup2:
		TNT1 A 0 A_JumpIfInventory("PlasmaRod",32,"Ammo")
		TNT1 A 0 A_GiveInventory("BioRifleDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDBioRifle",1)
		TNT1 A 0 A_GiveInventory("AEoDBioRifleCount",1)
		TNT1 A 0 A_TakeInventory("PlasmaRod",30)
		TNT1 A 0 	
		TNT1 A 0 A_JumpIfInventory("NoWeaponSwitch",1,2)
		TNT1 A 0 A_SelectWeapon("AEoDBioRifle")
		TNT1 A 0
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDBioRifleCount",2,"Ammo")
		TNT1 A 0 A_JumpIfInventory("AEoDBioRifleCount",1,"Pickup2")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		TNT1 A 0 ACS_NamedExecute("s798",0,4,43,0)
		Fail
	Ammo:
		TNT1 A 0 A_TakeInventory("PlasmaRod",30)
		TNT1 A 0 A_JumpIfInventory("AEoDBioRifleCount",1,2)
		TNT1 A 0 A_GiveInventory("Weapon4Count",1)
		TNT1 A 0 A_GiveInventory("AEoDBioRifleCount",1)
		TNT1 A 0 A_GiveInventory("BioRifleDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDBioRifle",1)
		Stop
	}
}

//==================================================================================
//==================================================================================

//==================================================================================
//==================================================================================

Actor AEoDDisruptorItem : CustomInventory 6202
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL	+DONTGIB
	Inventory.Amount 1
	Inventory.PickupMessage "You got the Dispersion Gun!"
	Inventory.PickupSound "reilsss/weappickup/plasmagun"
	Scale 0.24
	States
	{
	Spawn:
		Q4HY A -1
		Loop
	Pickup:
		TNT1 A 0 A_JumpIfInventory("AEoDDisruptor",1,"Ammo")
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",4) <= 0,"Nothing")
		TNT1 A 0 A_GiveInventory("Weapon4Count",1)
		TNT1 A 0 A_GiveInventory("DisruptorDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDDisruptor",1)
		TNT1 A 0 	
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDDisruptor",1,"Ammo")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		TNT1 A 0 ACS_NamedExecute("s798",0,4,36,0)
		Fail
	Ammo:
		TNT1 A 0 A_GiveInventory("AEoDDisruptor",1)
		Stop
	}
}

Actor AEoDDisruptor : Weapon // new dispersion gun
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL	+DONTGIB
	+WEAPON.CHEATNOTWEAPON
	Weapon.AmmoType1 "AECell"
	Weapon.AmmoType2 "AECell"
	Weapon.AmmoGive1 30
	Weapon.AmmoUse1 2
	Weapon.AmmoUse2 15
	Weapon.SelectionOrder 5500
	Inventory.PickupMessage "You got the Disruptor!"
	Inventory.PickupSound "weapons/stroggarmsaw/pickup"
	Weapon.upsound "disruptor/select"
	Tag "Disruptor"
	Scale 0.24
	States
	{
	Spawn:
		Q4HY A -1
		Loop
	Ready:
		TNT1 A 0 A_PlaySound("reilsss/weapons/electricidle4", 6, 0.4, 1)
		R086 A 1 A_WeaponReady
		Goto Ready+1
	Deselect:
		TNT1 A 0 A_StopSound(6)
		TNT1 A 0 	
		R086 A 1 A_Lower
		TNT1 AA 0 A_Lower
		Goto Deselect+1
	Select:
		TNT1 A 0 	
		R086 A 1 A_Raise
		TNT1 AA 0 A_Raise
		Loop
	Fire:
		TNT1 A 0 A_StopSound(6)
	Hold:
		TNT1 A 0 A_GunFlash
		TNT1 A 0 A_PlaySound("halflife/weapons/combriflefire", CHAN_WEAPON, 1.0, 0)
		Goto "PhaseCheck"
	ResumeAttack:
		R086 B 2 Bright A_FireCustomMissile("DisruptorShotNew", frandom(1.5,-1.5), 1, 8, 2,0,frandom(2.0,-2.0))
		R086 C 1
		TNT1 A 0 A_FireCustomMissile("GunSmallSmokeSpawner",0,0,5,8)
		TNT1 A 0 A_GiveInventory("Counter",1)
		TNT1 A 0 A_ReFire("Hold")
// End of attack
		TNT1 A 0 A_TakeInventory("Counter",255)
		TNT1 A 0 A_PlaySound("disruptor/powerdown", CHAN_WEAPON, 1.0, 0)
		R086 DDEEAA 1 A_ReFire
		R086 AAA 2 A_ReFire
		Goto Ready
 
	PhaseCheck:
		TNT1 A 0 A_JumpIfInventory("Counter",65,"Phase13")
		TNT1 A 0 A_JumpIfInventory("Counter",60,"Phase12")
		TNT1 A 0 A_JumpIfInventory("Counter",55,"Phase11")
		TNT1 A 0 A_JumpIfInventory("Counter",45,"Phase10")
		TNT1 A 0 A_JumpIfInventory("Counter",40,"Phase9")
		TNT1 A 0 A_JumpIfInventory("Counter",35,"Phase8")
		TNT1 A 0 A_JumpIfInventory("Counter",30,"Phase7")
		TNT1 A 0 A_JumpIfInventory("Counter",25,"Phase6")
		TNT1 A 0 A_JumpIfInventory("Counter",20,"Phase5")
		TNT1 A 0 A_JumpIfInventory("Counter",15,"Phase4")
		TNT1 A 0 A_JumpIfInventory("Counter",10,"Phase3")
		TNT1 A 0 A_JumpIfInventory("Counter",5,"Phase2")
	Phase1:
		TNT1 A 0 A_SetPitch(pitch+frandom(-1.0,1.0))	TNT1 A 0 A_SetAngle(angle+frandom(-1.0,1.0))
		Goto "ResumeAttack"
	Phase2:
		TNT1 A 0 A_SetPitch(pitch+frandom(-2.0,2.0))	TNT1 A 0 A_SetAngle(angle+frandom(-2.0,2.0))
		Goto "ResumeAttack"
	Phase3:
		TNT1 A 0 A_SetPitch(pitch+frandom(-3.0,3.0))	TNT1 A 0 A_SetAngle(angle+frandom(-3.0,3.0))
		Goto "ResumeAttack"
	Phase4:
		TNT1 A 0 A_SetPitch(pitch+frandom(-4.0,4.0))	TNT1 A 0 A_SetAngle(angle+frandom(-4.0,4.0))
		Goto "ResumeAttack"
	Phase5:
		TNT1 A 0 A_SetPitch(pitch+frandom(-5.0,5.0))	TNT1 A 0 A_SetAngle(angle+frandom(-5.0,5.0))
		Goto "ResumeAttack"
	Phase6:
		TNT1 A 0 A_SetPitch(pitch+frandom(-6.0,6.0))	TNT1 A 0 A_SetAngle(angle+frandom(-6.0,6.0))
		Goto "ResumeAttack"
	Phase7:
		TNT1 A 0 A_SetPitch(pitch+frandom(-7.0,7.0))	TNT1 A 0 A_SetAngle(angle+frandom(-7.0,7.0))
		Goto "ResumeAttack"
	Phase8:
		TNT1 A 0 A_SetPitch(pitch+frandom(-8.0,8.0))	TNT1 A 0 A_SetAngle(angle+frandom(-8.0,8.0))
		Goto "ResumeAttack"
	Phase9:
		TNT1 A 0 A_SetPitch(pitch+frandom(-9.0,9.0))	TNT1 A 0 A_SetAngle(angle+frandom(-9.0,9.0))
		Goto "ResumeAttack"
	Phase10:
		TNT1 A 0 A_DamageSelf(1)
		TNT1 A 0 A_SetPitch(pitch+frandom(-10.0,10.0))	TNT1 A 0 A_SetAngle(angle+frandom(-10.0,10.0))
		Goto "ResumeAttack"
	Phase11:
		TNT1 A 0 A_DamageSelf(random(1,2),"Normal",DMSS_AFFECTARMOR)
		TNT1 A 0 A_SetPitch(pitch+frandom(-10.0,10.0))	TNT1 A 0 A_SetAngle(angle+frandom(-10.0,10.0))
		Goto "ResumeAttack"
	Phase12:
		TNT1 A 0 A_DamageSelf(random(2,4),"Normal",DMSS_AFFECTARMOR)
		TNT1 A 0 A_SetPitch(pitch+frandom(-10.0,10.0))	TNT1 A 0 A_SetAngle(angle+frandom(-10.0,10.0))
		Goto "ResumeAttack"
	Phase13:
		TNT1 A 0 A_DamageSelf(random(3,6),"Normal",DMSS_AFFECTARMOR)
		TNT1 A 0 A_SetPitch(pitch+frandom(-10.0,10.0))	TNT1 A 0 A_SetAngle(angle+frandom(-10.0,10.0))
		Goto "ResumeAttack"
	AltFire:
		TNT1 A 0 A_StopSound(6)
		R086 A 37 A_PlaySound("hl2/weapons/energyfilecharge",CHAN_WEAPON,1.0,0)
		TNT1 A 0 A_GunFlash
		TNT1 A 0 A_PlaySound("halflife/weapons/combriflealtfire", CHAN_WEAPON, 1.0, 0)
		TNT1 A 0 //ACS_NamedExecute("s851",0,80,random(-10,10),random(-10,10))
		R086 B 2 Bright A_FireCustomMissile("DisruptorEnergyPellet", 0, 1, 8, 1)
		R086 CD 1 //ACS_NamedExecute("s851",0,-20,0,0)
		TNT1 A 0 A_FireCustomMissile("GunSmallSmokeSpawner",0,0,4,9)
		R086 E 0 A_PlaySound("disruptor/powerdown", CHAN_WEAPON, 1.0, 0)
		R086 EA 1 //ACS_NamedExecute("s851",0,-20,0,0)
		R086 AAAA 1
		R086 AAA 2
		Goto Ready
	Flash:
		TNT1 A 1 Bright A_Light1
		TNT1 A 1 Bright A_Light2
		TNT1 A 2 Bright A_Light0
		Stop
	}
} 


Actor DisruptorShot : FastProjectile
{
	Speed 250
	Radius 2
	Height 4
	Damage 10
	Scale 0.1
	+BLOODSPLATTER
	DamageType "Plasma"
//	Translation "0:255=%[0.1,0.1,0.1]:[0.01,0.01,0.01]","112:127=192:231"
	States
	{
	Spawn:
		MS02 A 3 BRIGHT
		Loop
	Death:
		TNT1 A 0 A_SpawnItemEx("DisruptorShotPuff",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		TNT1 A 3
		Stop
	}
}
 
Actor DisruptorShotNew : DisruptorShot //replaces DisruptorShot
{
	Scale 0.10
	MissileType DisruptorShotTrail
	RenderStyle Add
	States
	{
	Spawn:
		NB02 A 1 bright
		Loop
	Death:
		TNT1 A 0 A_SpawnItemEx("DisruptorShotPuff",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		TNT1 A 3
		Stop
	}
}
 
Actor DisruptorShotTrail
{
	+NOINTERACTION
	RenderStyle Add
	Scale 0.75
	States
	{
	Spawn:
		X044 A 2 bright
		Stop
	}
}
 
Actor DisruptorShotPuff
{
	+NOINTERACTION
	RenderStyle Add
	Scale 0.08
	States
	{
	Spawn:
		X010 ACEGIKMOQSUWY 1 Bright A_FadeOut(0.04)
		Wait
	}
}
 
Actor DisruptorEnergyPellet
{
	var int user_angle;
	var int user_lifetick;
	Projectile
	Speed 25
	Radius 8
	Height 16
	Damage 12
	+RIPPER	RipperLevel 1
	+NOBOSSRIP
	+FORCERADIUSDMG
	+SEEKERMISSILE
	BounceType "Doom"
	BounceFactor 1.0
	WallBounceFactor 1.0
	Scale 0.2
	RenderStyle Add
	//  DeathSound "hl2/weapons/energypelletxplo"
	BounceSound "hl2/weapons/energypelletbounce"
	DamageType "PlasmaDisint"
	Alpha 0.7
	States
	{
	Spawn:
		Preset:
		X042 A 0
		X042 A 0 A_SetUserVar("user_lifetick",140)
	MovementLoop:
		X042 A 0 Bright A_SpawnItemEx("DEPLightGlow",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		X042 A 0 Bright A_SpawnItemEx("DEPTrail",0,frandom(-2,2),frandom(-2,2),0,0,0,0,SXF_NOCHECKPOSITION)
		X042 A 1 Bright A_SpawnItemEx("DEPTrail",0,frandom(-2,2),frandom(-2,2),0,0,0,0,SXF_NOCHECKPOSITION)
		X042 A 0 A_Warp(AAPTR_DEFAULT,0,0,10,0,WARPF_TESTONLY,1)
		Goto Seekage
		X042 A 0 A_Warp(AAPTR_DEFAULT,0,0,-10,0,WARPF_TESTONLY,1)
		Goto Seekage
		X042 A 0 A_Warp(AAPTR_DEFAULT,10,0,0,0,WARPF_TESTONLY,"MovementSuccess")
	Seekage:
		X042 A 0 A_SeekerMissile(90,90,3,256)
		X042 A 0 A_FaceTracer
	MovementSuccess:
		X042 A 0 A_SetUserVar("user_lifetick",user_lifetick-1)
		X042 A 0 A_JumpIf(user_lifetick<=0,"Expire")
		Goto MovementLoop
	Expire:
		TNT1 A 0 A_StopSound
		TNT1 A 0 A_PlaySound("hl2/weapons/energypelletxplo",CHAN_AUTO)
		TNT1 A 0 A_Explode(192,192)
		TNT1 A 0 A_SetUserVar("user_angle",0)
		Goto "FXloop"
	Death:
		TNT1 A 0 A_StopSound
		TNT1 A 0 A_PlaySound("hl2/weapons/energypelletxplo",CHAN_AUTO)
		TNT1 A 0 A_Explode(random(300,800),192)
		TNT1 A 0 A_SetUserVar("user_angle",0)
	FXloop:
		TNT1 A 0 A_SpawnItemEx("DEPFX",0,0,0,15,0,0,user_angle,0)
		TNT1 A 0 A_SetUserVar("user_angle",user_angle+10)
		TNT1 A 0 A_JumpIf(user_angle>=360,"Ender")
		Loop
	Ender:
		TNT1 A 3
		Stop
	}
} 

Actor DEPFX
{
	Radius 1
	Height 1
	RenderStyle Add
	Alpha 1
	+NOINTERACTION
	Scale 0.3
	States
	{
	Spawn:
		X042 B 1 A_FadeOut //HSHK ABC 4
		Wait
	}
}
 
Actor DEPTrail
{
	+NOINTERACTION
	Scale 0.35
	RenderStyle Add
	Alpha 1
	States
	{
	Spawn:
		X042 B 1 A_FadeOut(0.07)
		Wait
	}
}
 
Actor DEPLightGlow
{
	+NOINTERACTION
	Scale 0.3
	RenderStyle Add
	States
	{
	Spawn:
		X042 C 1
		Stop
	}
}


Actor IonBullet1
{
	PROJECTILE
	+CANBOUNCEWATER
	+NOGRAVITY 
	+DOOMBOUNCE
	+RIPPER	RipperLevel 1
	+WINDTHRUST
	+NOEXTREMEDEATH
	+FORCEXYBILLBOARD
	+BLOODLESSIMPACT
	DamageType "PlasmaDisint"
	Reactiontime 64
	WallBounceFactor 1
	BounceFactor 1
	Bouncecount 10
	Radius 6
	Height 12
	Speed 30
	Damage 2
	Scale 0.10
	Obituary "%o was ripped apart by an Ion shot."
	SeeSound "DSEMPTY"
	DeathSound "HYPBL0"
	RenderStyle Add
	Alpha 0.35
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_Countdown
		R087 A 1 Bright A_SpawnItem("IonFX1")
		Loop
	Death:
		TNT1 A 0 A_Scream
		R087 A 1 Bright  
		Stop
	}
}

Actor IonBullet1Hit
{
	PROJECTILE
	+NOGRAVITY 
	+RIPPER	RipperLevel 1
	+WINDTHRUST
	+NOEXTREMEDEATH
	+FORCEXYBILLBOARD
	DamageType "PlasmaDisint"
	ReactionTime 64
	Radius 6
	Height 12
	Speed 30
	Damage 0
	Deathsound "reilsss/weapons/dispersiongunexplosion"
	Scale 0.40
	RenderStyle Add
	Alpha 0.50
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_CountDown
		TNT1 A 1
		Loop
	Death:
		TNT1 A 0 A_Scream
		R088 CDEFGHIJKLMNO 3 Bright 
		Stop
	}
}

Actor IonFX1
{
	+FORCEXYBILLBOARD
	+NOINTERACTION
	RenderStyle Add
	Alpha 0.35
	Scale 0.075
	States
	{
	Spawn:
		TNT1 A 0
		R087 B 10 Bright 
		R087 CDEF 1 A_FadeOut(0.04)
		Wait
	}
}

Actor IonBullet2
{
	PROJECTILE
	+NOGRAVITY 
	+CANBOUNCEWATER
	+WINDTHRUST
	+NOEXTREMEDEATH
	+FORCEXYBILLBOARD
	DamageType "PlasmaDisint"
	Radius 6
	Height 12
	Speed 25
	Damage 30
	Obituary "%o was ripped apart by a Ion shot."
	Seesound "reilsss/weapons/dispersionexplosion"
	Deathsound "reilsss/weapons/dispersiongunexplosion"
	RenderStyle Add
	Alpha 0.35
	Scale 0.45
	States
	{
	Spawn:
		TNT1 A 0
		R088 A 1 Bright A_SpawnItem("IonFX2") 
		Loop
	Death:
		TNT1 A 0 A_CustomMissile ("IonBullet3",0,0,45,1)
		TNT1 A 0 A_CustomMissile ("IonBullet3",0,0,130,1)	
		TNT1 A 0 A_CustomMissile ("IonBullet3",0,0,220,1)
		TNT1 A 0 A_CustomMissile ("IonBullet3",0,0,315,1)
		TNT1 A 0 A_Scream
		R088 CDEFGHIJKLMNO 3 Bright  
		Stop
	}
}

Actor IonBullet2Hit
{
	PROJECTILE
	+NOGRAVITY 
	+RIPPER	RipperLevel 1
	+WINDTHRUST
	+NOEXTREMEDEATH
	+FORCEXYBILLBOARD
	DamageType "PlasmaDisint"
	Radius 6
	Height 12
	Speed 25
	Damage 0
	Deathsound "reilsss/weapons/dispersiongunexplosion"
	Scale 0.45
	RenderStyle Add
	Alpha 0.50
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0
		TNT1 A 1
		Loop
	Death:
		TNT1 A 0 A_Scream
		R088 CDEFGHIJKLMNO 3 Bright 
		Stop
	}
}

Actor IonFX2
{
	+FORCEXYBILLBOARD
	+NOINTERACTION
	RenderStyle Add
	Alpha 0.35
	Scale 0.2
	States
	{
	Spawn:
		TNT1 A 0
		R088 B 10 Bright 
		R088 B 1 A_FadeOut(0.04)
		Wait
	}
}

Actor IonBullet3
{
	PROJECTILE
	-NOGRAVITY
	+HEXENBOUNCE
	+BOUNCEONACTORS 
	+WINDTHRUST
	+NOEXTREMEDEATH
	+FORCEXYBILLBOARD
	+CANBOUNCEWATER
	Bouncecount 5
	BounceFactor 1
	DamageType "PlasmaDisint"
	Radius 6
	Height 12
	Speed 25
	Damage 10
	Obituary "%o was ripped apart by a shredder shot."
	Seesound "reilsss/weapons/dispersionexplosion"
	Deathsound "reilsss/weapons/dispersiongunexplosion"
	RenderStyle Add
	Alpha 0.35
	Scale 0.1
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 ThrustThingZ(0,30,0,1)
		R087 A 1 Bright A_SpawnItem("IonFX1") 
		Wait
	Death:
		TNT1 A 0 A_Scream
		R087 A 1 Bright  
		Stop
	}
}


Actor DisruptorDrop : CustomInventory
{
	Inventory.MaxAmount 1
	States
	{
	Use:
		TNT1 A 0
		TNT1 A 0 A_StopSound(6)
		TNT1 A 0 A_SpawnItemEx("DroppedDisruptor",0,0,32,8,0,0,0,SXF_NOCHECKPOSITION,0)
		Stop
	}
}


Actor DroppedDisruptor
{
	Radius 16
	Height 20
	Scale 0.24
	States
	{
	Spawn:
		Q4HY A 15
		TNT1 A 0 A_SpawnItemEx("AEoDDisruptorNoAmmo",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER,0)
		Stop
	}
}

Actor AEoDDisruptorNoAmmo : AEoDDisruptorItem
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL	+DONTGIB
	Inventory.Amount 1
	Inventory.PickupMessage "You got the Dispersion Gun!"
	Inventory.PickupSound "reilsss/weappickup/plasmagun"
	Scale 0.24
	States
	{
	Spawn:
		Q4HY A -1
		Loop
	Pickup:
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",4) <= 0,"Nothing")
		TNT1 A 0 A_JumpIfInventory("AECell",30,"Ammo")
		TNT1 A 0 A_GiveInventory("Weapon4Count",1)
		TNT1 A 0 A_GiveInventory("DisruptorDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDDisruptor",1)
		TNT1 A 0 A_TakeInventory("AECell",30)
		TNT1 A 0 	
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDDisruptor",1,"Ammo")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		TNT1 A 0 ACS_NamedExecute("s798",0,4,36,0)
		Fail
	Ammo:
		TNT1 A 0 A_TakeInventory("AECell",30)
		TNT1 A 0 A_JumpIfInventory("AEoDDisruptor",1,2)
		TNT1 A 0 A_GiveInventory("Weapon4Count",1)
		TNT1 A 0 A_GiveInventory("DisruptorDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDDisruptor",1)
		Stop
	}
}


//==================================================================================
//==================================================================================

//==================================================================================
//==================================================================================

Actor AEoDRiotgunItem : CustomInventory 6004
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL	+DONTGIB
	Inventory.Amount 1
	Inventory.PickupMessage "You found a Riotgun."
	Inventory.PickupSound "weapons/rifleup"
	States
	{
	Spawn:
		SHOT A -1
		Loop
	Pickup:
		TNT1 A 0 A_JumpIfInventory("AEoDRiotgun",1,"Ammo")
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",4) <= 0,"Nothing")
		TNT1 A 0 A_GiveInventory("Weapon4Count",1)
		TNT1 A 0 A_GiveInventory("RiotgunDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDRiotgun",1)
		TNT1 A 0 	
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDRiotgun",1,"Ammo")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		TNT1 A 0 ACS_NamedExecute("s798",0,4,35,0)
		Fail
	Ammo:
		TNT1 A 0 A_GiveInventory("AEoDRiotgun",1)
		Stop
	}
}

Actor AEoDRiotgun : Weapon // 6004
{ 
	+FLOORCLIP
	+INVENTORY.IGNORESKILL	+DONTGIB
	+WEAPON.AMMO_OPTIONAL
	+STRIFEDAMAGE
	+WEAPON.CHEATNOTWEAPON
	Weapon.AmmoType1 "RiotgunClip"
	Weapon.AmmoType2 "AEShell"
	Weapon.AmmoGive2 12
	Weapon.AmmoUse1 0
	Weapon.AmmoUse2 0
	Weapon.KickBack 35
	Weapon.SelectionOrder 8250
	Obituary "%o understand why %k likes that Riotgun."
	Inventory.PickupMessage "You found a Riotgun."
	Inventory.PickupSound "weapons/rifleup" 
	weapon.upsound "weapons/draw"
	Tag "Riotgun"
	States
	{
	Spawn:
		SHOT A -1
		Loop
	ReadyWait:
		REMG A 1
		Goto Ready
	Ready:
		REMG A 1 A_WeaponReady(WRF_ALLOWRELOAD)
		Loop
	ReadyNoAmmo:
		REMG A 1 A_WeaponReady(WRF_NOFIRE|WRF_ALLOWRELOAD)
		REMG A 0 A_JumpIfInventory("AEShell",1,"Ready")
		REMG A 0 A_JumpIfInventory("RiotgunClip",1,"Ready")
		Loop
	Deselect:
		TNT1 A 0 	
		REMG A 1 A_Lower
		TNT1 AA 0 A_Lower
		Loop
	Select:
		TNT1 A 0 	
		REMG A 1 A_Raise
		TNT1 AA 0 A_Raise
		Loop
	Fire:
		TNT1 A 0 A_JumpIfInventory("RiotgunClip", 1, "FireSuccess")
		TNT1 A 0 A_JumpIfInventory("AEShell", 1, "Reload")
	FireSuccess:
		TNT1 A 0
		TNT1 A 0 A_JumpIfInventory("Riotgunfiremode", 2, 20)
		TNT1 A 0 A_JumpIfInventory("PowerEconomizer",1,2)
		TNT1 A 0 A_TakeInventory("RiotgunClip",1)
		TNT1 A 0 A_GunFlash
		TNT1 A 0 A_FireCustomMissile("GunSmokeSpawner",0,0,6,7)
		TNT1 A 0 A_PlaySound("reilsss/weapons/riotgunfire2", CHAN_WEAPON, 1.0, 0)
		REMG E 0 Bright A_FireBullets(3, 3, 10, 7, "BulletDamagePuff", 0)
		REMG E 2 Bright A_SetPitch(pitch-2)
		REMG FFF 1 Bright A_SetPitch(pitch+0.5)
		REMG G 0 A_FireCustomMissile("ShotgunCasingSpawner",-50,0, 0,0)
		REMG G 3 A_SetPitch(pitch+0.5)
		REMG HI 3
		REMG A 2 
		REMG A 0 A_JumpIfInventory("RiotgunClip",1,"Ready")
	Reload:
		TNT1 A 0 A_JumpIfInventory("RiotgunClip",4,"ReadyWait")
		TNT1 A 0 A_JumpIfInventory("AEShell",1,1)
		Goto ReadyNoAmmo
	ReloadLoop:
		TNT1 A 0 A_GiveInventory("RiotgunClip",1)
		TNT1 A 0 A_JumpIfInventory("InfiniteAmmo",1,2)
		TNT1 A 0 A_TakeInventory("AEShell",1)
		TNT1 A 0 A_JumpIfInventory("RiotgunClip",4,"ReloadEnd")
		TNT1 A 0 A_JumpIfInventory("AEShell",1,"ReloadLoop")
	ReloadEnd:
		REMG JK 2 
		TNT1 A 0 A_PlaySound("reilsss/weapons/doublebarreledreload1", 6, 1.0, 0)
		REMG LMNML 2
		TNT1 A 0 A_PlaySound("reilsss/weapons/doublebarreledreload2", 7, 1.0, 0)
		REMG KJ 2
		Goto Ready
	AltFire:
		TNT1 A 0 A_JumpIfInventory("RiotgunClip", 1, "AltFireSuccess")
		Goto Reload
		TNT1 A 0 A_JumpIfInventory("AEShell", 1, "Reload")
		Goto ReadyNoAmmo
	AltFireSuccess:
		TNT1 A 0
		TNT1 A 0 A_TakeInventory("Riotgunfiremode",2)
		TNT1 A 0 A_JumpIfInventory("PowerEconomizer",1,2)
		TNT1 A 0 A_TakeInventory("RiotgunClip",1)
		TNT1 A 0 A_GunFlash
		TNT1 A 0 A_FireCustomMissile("GunSmokeSpawner",0,0,6,7)
		TNT1 A 0 A_PlaySound("reilsss/weapons/riotgunfire2", CHAN_WEAPON, 1.0, 0)
		REMG B 0 A_FireBullets(6, 6, 10, 4, "BulletDamagePuff", 0)
		REMG B 1 Bright A_SetPitch(pitch-2)
		REMG C 1 Bright 
		REMG C 1 Bright A_SetPitch(pitch+0.5)
		REMG D 0 A_FireCustomMissile("ShotgunCasingSpawner",-50,0, 0,0)
		REMG DHI 1 A_SetPitch(pitch+0.5)
		REMG A 0 A_ReFire
		REMG A 0 A_JumpIfInventory("RiotgunClip",1,"Ready")
		Goto Reload
	Flash:
		TNT1 A 1 Bright A_Light2
		TNT1 A 1 Bright A_Light1
		TNT1 A 1 Bright A_Light0
		Stop
	}
}

Actor RiotgunClip : Ammo
{
	+INVENTORY.IGNORESKILL	+DONTGIB
	Inventory.Amount 1
	Inventory.MaxAmount 4
	Ammo.BackpackMaxAmount 4
	Ammo.BackpackAmount 0
	Inventory.Icon "IESCA0"
	States
	{
	Spawn:
		TNT1 A 4
		Loop
	}
}

Actor Shotgun2Clip : Ammo
{
	+INVENTORY.IGNORESKILL	+DONTGIB
	Inventory.Amount 0
	Inventory.MaxAmount 4
	Ammo.BackpackMaxAmount 4
	Ammo.BackpackAmount 0
	Inventory.Icon "IESCA0"
	States
	{
	Spawn:
		TNT1 A 4
		Loop
	}
}

Actor Riotgunfiremode : PuzzleItem
{
	-INVBAR
	Inventory.MaxAmount 2
	Inventory.Icon TNT1A0
	States
	{
	Spawn:
		TNT1 A 4
		Loop
	}
}

Actor RiotgunDrop : CustomInventory
{
	Inventory.MaxAmount 1
	States
	{
	Use:
		TNT1 A 0
		TNT1 A 0 A_SpawnItemEx("DroppedRiotgun",0,0,32,8,0,0,0,SXF_NOCHECKPOSITION,0)
		Stop
	}
}

Actor DroppedRiotGun
{
	Radius 16
	Height 20
	States
	{
	Spawn:
		SHOT A 15
		TNT1 A 0 A_SpawnItemEx("AEoDRiotgunNoAmmo",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER,0)
		Stop
	}
}

Actor AEoDRiotGunNoAmmo : AEoDRiotGunItem
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL	+DONTGIB
	Inventory.Amount 1
	Inventory.PickupMessage "You found a Riotgun."
	Inventory.PickupSound "weapons/rifleup"
	States
	{
	Spawn:
		SHOT A -1
		Loop
	Pickup:
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",4) <= 0,"Nothing")
		TNT1 A 0 A_JumpIfInventory("AEShell",12,"Ammo")
		TNT1 A 0 A_GiveInventory("Weapon4Count",1)
		TNT1 A 0 A_GiveInventory("RiotGunDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDRiotGun",1)
		TNT1 A 0 A_TakeInventory("AEShell",12)
		TNT1 A 0 	
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDRiotGun",1,"Ammo")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		TNT1 A 0 ACS_NamedExecute("s798",0,4,35,0)
		Fail
	Ammo:
		TNT1 A 0 A_TakeInventory("AEShell",12)
		TNT1 A 0 A_JumpIfInventory("AEoDRiotGun",1,2)
		TNT1 A 0 A_GiveInventory("Weapon4Count",1)
		TNT1 A 0 A_GiveInventory("RiotGunDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDRiotGun",1)
		Stop
	}
}

//==================================================================================
//==================================================================================

//==================================================================================
//==================================================================================

Actor AEoDShockRifleItem : CustomInventory 6102
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL	+DONTGIB
	Scale 0.2
	Inventory.Amount 1
	Inventory.PickupMessage "You got the ASMD shock rifle!"
	Inventory.PickupSound "reilsss/weappickup/blasterrifle"
	States
	{
	Spawn:
		R018 P -1
		Loop
	Pickup:
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",4) <= 0,"Nothing")
		TNT1 A 0 A_JumpIfInventory("AEoDShockRifleCount",2,"Ammo")
		TNT1 A 0 A_JumpIfInventory("AEoDShockRifleCount",1,"Pickup2")
		TNT1 A 0 A_GiveInventory("Weapon4Count",1)
		TNT1 A 0 A_GiveInventory("ShockRifleDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDShockRifle",1)
		TNT1 A 0 A_GiveInventory("AEoDShockRifleCount",1)
		TNT1 A 0 	
		TNT1 A 0 A_JumpIfInventory("NoWeaponSwitch",1,2)
		TNT1 A 0 A_SelectWeapon("AEoDShockRifle")
		TNT1 A 0
		Stop
	Pickup2:
		TNT1 A 0 A_GiveInventory("ShockRifleDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDShockRifle",1)
		TNT1 A 0 A_GiveInventory("AEoDShockRifleCount",1)
		TNT1 A 0 	
		TNT1 A 0 A_JumpIfInventory("NoWeaponSwitch",1,2)
		TNT1 A 0 A_SelectWeapon("AEoDShockRifle")
		TNT1 A 0
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDShockRifleCount",2,"Ammo")
		TNT1 A 0 A_JumpIfInventory("AEoDShockRifleCount",1,"Pickup2")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		TNT1 A 0 ACS_NamedExecute("s798",0,4,46,0)
		Fail
	Ammo:
		TNT1 A 0 A_GiveInventory("AEoDShockRifle",1)
		Stop
	}
}

Actor AEoDShockRifle : Weapon // 6102
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL	+DONTGIB
	+WEAPON.CHEATNOTWEAPON
	Weapon.AmmoType1 "AECell"
	Weapon.AmmoType2 "AECell"
	Weapon.AmmoGive1 20
	Weapon.AmmoUse1 3
	Weapon.AmmoUse2 6
	Weapon.SelectionOrder 20500
	Obituary "%k inflicted mortal damage upon %o with the shock rifle."
	Inventory.PickupMessage "You got the ASMD shock rifle!"
	Inventory.PickupSound "reilsss/weappickup/blasterrifle"
	Weapon.upsound "weapons/plasma/draw"
	Scale 0.2
	Tag "Shock Rifle"
	States
	{ 
	Spawn:  
		TNT1 A 0 NoDelay A_SpawnItemEx("AEoDShockRiflePickup",0,0,0,0,0,0,0,0)
		Stop
	Ready:
		R018 A 0 A_PlaySound("reilsss/weapons/electricidle4", 6, 0.6, 1)
	ReadyLoop:
		R018 A 0 A_TakeInventory("ShockRifleDropCheck",1)
		R018 A 0 A_JumpIfInventory("AEoDShockRifleCount",2,"Ready2")
		R018 A 1 A_WeaponReady
		Loop
	Ready2:
		R018 Q 0 A_JumpIfInventory("ShockRifleDropCheck",1,"Ready")
		R018 Q 1 A_WeaponReady
		Loop
	//We don't need two deselect loops when you have the use last frame option.
	Deselect: 
		"----" A 0 A_StopSound(6)
	DesLoop:
		"----" A 1 A_Lower
		"----" AA 0 A_Lower
		Loop
	//SURPRISE! You can do the same thing here too. Just a matter of using the
	//right jumps at the right frames, and the right times. :D
	Select:
		R018 Q 0 A_JumpIfInventory("AEoDShockRifleCount",2,"SelLoop")
		R018 A 0 A_Jump(256,"SelLoop")
	SelLoop:
		"----" A 1 A_Raise
		"----" AA 0 A_Raise
		Loop
	Fire:
		R018 A 0 A_JumpIfInventory("AEoDShockRifleCount",2,"Fire21")
		"####" A 0 A_StopSound(6)
		"####" A 0 A_GunFlash
		"####" A 0 A_PlaySound("reilsss/weapons/shockriflefire", CHAN_WEAPON, 1.0, 0)
		"####" C 2 
		"####" D 0 A_FireBullets(2,2,10,(1),"ShockExploderPuff",0)
		"####" D 0 Bright A_RailAttack(random(50,120),5,1,"none","Blue",RGF_SILENT,0,"ShockRiflePuff")
		"####" "#" 0 Bright A_SetPitch(pitch-1)
		"####" "####" 1 bright A_SetPitch(pitch+0.25)
		"####" E 4 Bright
		"####" F 4 Bright A_FireCustomMissile("GunSmallSmokeSpawner",0,0,5,7)
		"####" GA 4
		Goto Ready
	Fire21:
		R018 Q 0 A_JumpIfInventory("ShockRifleAltToken",1,"Fire22")
		R018 Q 0 A_GiveInventory("ShockRifleAltToken",1)
		"----" A 0 A_StopSound(6)
		"----" A 0 A_GunFlash
		"----" A 0 A_PlaySound("reilsss/weapons/shockriflefire", CHAN_WEAPON, 1.0, 0)
		"####" T 0 bright A_FireBullets(2,2,10,(1),"ShockExploderPuff",0)
		"####" T 0 Bright A_RailAttack(random(50,120),5,1,"none","Blue",RGF_SILENT,0,"ShockRiflePuff")
		"####" T 0 A_SetPitch(pitch-1)
		"####" TTTT 1 A_SetPitch(pitch+0.25)
		"####" Q 8 A_FireCustomMissile("GunSmallSmokeSpawner",0,0,5,7)
		"####" Q 0 A_Refire("Fire22")
		Goto Ready
	Fire22:
		"####" V 0 A_TakeInventory("ShockRifleAltToken",1000)
		"####" V 0 A_StopSound(6)
		"####" V 0 A_GunFlash
		"----" V 0 A_PlaySound("reilsss/weapons/shockriflefire", CHAN_WEAPON, 1.0, 0)
		"####" V 0 bright A_FireBullets(2,2,10,(1),"ShockExploderPuff",0)
		"####" V 0 Bright A_RailAttack(random(50,120),-5,1,"none","Blue",RGF_SILENT,0,"ShockRiflePuff")
		"####" V 0 A_SetPitch(pitch-1)
		"####" VVVV 1 A_SetPitch(pitch+0.25)
		"####" Q 8 A_FireCustomMissile("GunSmallSmokeSpawner",0,0,-5,7)
		"####" Q 0 A_Refire("Fire21")
		Goto Ready
	AltFire:
		R018 C 0 A_JumpIfInventory("AEoDShockRifleCount",2,"AltFire21")
		"####" C 0 A_StopSound(6)
		"####" C 0 A_GunFlash
		"####" C 2 A_PlaySound("reilsss/weapons/shockriflealtfire", CHAN_WEAPON, 1.0, 0) 
		"####" D 0 Bright A_FireCustomMissile("ShockBolt", 0, 1, 6, 0)
		"####" "#" 0 Bright A_SetPitch(pitch-1)
		"####" "####" 1 bright A_SetPitch(pitch+0.25)
		"####" E 4 Bright
		"####" F 4 A_FireCustomMissile("GunSmallSmokeSpawner",0,0,5,7)
		"####" GA 4
		Goto Ready
	AltFire21:
		R018 Q 0 A_JumpIfInventory("ShockRifleAltToken",1,"AltFire22")
		R018 Q 0 A_GiveInventory("ShockRifleAltToken",1)
		"----" A 0 A_StopSound(6)
		"----" A 0 A_GunFlash
		"----" A 0 A_PlaySound("reilsss/weapons/shockriflealtfire", CHAN_WEAPON, 1.0, 0)
		"####" T 0 Bright A_FireCustomMissile("ShockBolt", 0, 1, 6, 0)
		"####" T 0 A_SetPitch(pitch-2)
		"####" TTTT 1 A_SetPitch(pitch+0.5)
		"####" Q 8 A_FireCustomMissile("GunSmallSmokeSpawner",0,0,5,7)
		"####" Q 0 A_Refire("AltFire22")
		Goto Ready
	AltFire22:
		"####" V 0 A_TakeInventory("ShockRifleAltToken",1000)
		"####" V 0 A_StopSound(6)
		"####" V 0 A_GunFlash
		"----" V 0 A_PlaySound("reilsss/weapons/shockriflealtfire", CHAN_WEAPON, 1.0, 0)
		"####" V 0 Bright A_FireCustomMissile("ShockBolt", 0, 1, -6, 0)
		"####" V 0 A_SetPitch(pitch-2)
		"####" VVVV 1 A_SetPitch(pitch+0.5)
		"####" Q 8 A_FireCustomMissile("GunSmallSmokeSpawner",0,0,-5,7)
		"####" Q 0 A_Refire("AltFire21")
		Goto Ready
		/*
	Fire2:
		TNT1 A 0 A_StopSound(6)
		TNT1 A 0 A_GunFlash
		TNT1 A 0 A_PlaySound("reilsss/weapons/shockriflefire", CHAN_WEAPON, 1.0, 0)
		R018 R 2
		TNT1 A 0 //ACS_NamedExecute("s851",0,50,0,0)
		TNT1 A 0 A_FireBullets(2,2,10,(1),"ShockExploderPuff",0)
		R018 S 4 Bright A_RailAttack(random(50,120),5,1,"none","Blue",RGF_SILENT,0,"ShockRiflePuff")
		TNT1 A 0 A_PlaySound("reilsss/weapons/shockriflefire", CHAN_WEAPON, 1.0, 0)
		R018 TT 1 Bright //ACS_NamedExecute("s851",0,-25,0,0)
		R018 T 2 Bright
		TNT1 A 0 A_FireCustomMissile("GunSmallSmokeSpawner",0,0,5,7)
		TNT1 A 0 //ACS_NamedExecute("s851",0,50,0,0)
		TNT1 A 0 A_FireBullets(2,2,10,(1),"ShockExploderPuff",0)
		R018 U 4 Bright A_RailAttack(random(50,120),-5,1,"none","Blue",2,0,"ShockRiflePuff")
		R018 VV 1 Bright //ACS_NamedExecute("s851",0,-25,0,0)
		R018 V 2 Bright
		TNT1 A 0 A_FireCustomMissile("GunSmallSmokeSpawner",0,0,-5,7)
		R018 W 2 Bright
		R018 Q 2
		Goto Ready*/
	Flash: 
		TNT1 A 1 Bright A_Light1 
		TNT1 A 1 Bright A_Light2
		TNT1 A 2 Bright A_Light0
		Stop 
	} 
}

Actor ShockRifleAltToken : Inventory { }

Actor ShockExploderPuff
{
	+NOINTERACTION
	+PAINLESS
	+BLOODLESSIMPACT
	+DONTSPLASH 
	DamageType "ShkRflDmg"
	Scale 0.2
	States
	{
	Spawn:
		TNT1 A 20
		Stop
	}
}

Actor ShockRiflePuff
{
	DamageType "ShkRflDmg"
	Projectile
	Speed 0
	+NOCLIP
	States
	{
	Spawn:
		TNT1 A 10
		Stop
	}
}

Actor ShockBeam : FastProjectile
{
	+FOILINVUL
	PROJECTILE
	Radius 10
	Height 10
	Speed 200
	Damage 13
	DamageType "ShkRflDmg"
	RenderStyle Add
	States
	{
	Spawn:
		TNT1 A 0
		R018 HH 1 Bright A_SpawnItem("ShockBeamTrail",0,0)
		Loop
	Death:
		TNT1 A 0 A_RadiusThrust(2048,1024,RTF_NOIMPACTDAMAGE)
		TNT1 A 0 A_Playsound("reilsss/weapons/shockrifleexplosion")
		R018 KLMN 4
		Stop
	}
}

Actor ShockBeamTrail
{
	+NOGRAVITY
	RenderStyle Add
	Alpha 0.85
	Scale 0.75
	States
	{
	Spawn:
		R018 HHHHHIIIII 2 Bright A_FadeOut(0.1)
		Stop
	}
}

Actor ShockBolt
{
	PROJECTILE
	+SHOOTABLE
	+NOBLOOD
	+DONTREFLECT
	+DONTTHRUST
	+LAXTELEFRAGDMG
	+FORCERADIUSDMG
	DamageFactor "Normal" , 0.0
	DamageFactor "ShkRflDmg", 1.1
	-NOBLOCKMAP
	Health 10000
	WoundHealth 9999
	RipLevelMin 999 //[MC] No more, no less. I have my reasons.
	Radius 12
	Height 24
	Damage 25
	Speed 14
	RenderStyle translucent
	DamageType "Disintegrate"
	Alpha 0.6
	Scale 0.4
	States
	{
	Spawn:
		TNT1 A 0
		VOIZ A 1 Bright A_SpawnItem("ShockBoltTrail",0,0)
		VOIZ B 1 Bright
		VOIZ C 1 Bright A_SpawnItem("ShockBoltTrail",0,0)
		VOIZ D 1 Bright
		VOIZ E 1 Bright A_SpawnItem("ShockBoltTrail",0,0)
		VOIZ F 1 Bright
		VOIZ G 1 Bright A_SpawnItem("ShockBoltTrail",0,0)
		VOIZ H 1 Bright
		VOIZ I 1 Bright A_SpawnItem("ShockBoltTrail",0,0)
		VOIZ J 1 Bright
		VOIZ K 1 Bright A_SpawnItem("ShockBoltTrail",0,0)
		VOIZ L 1 Bright
		Loop
	Death:
		TNT1 A 1 A_SpawnItemEx("ShockBeamDie",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_TRANSFERPOINTERS)
		Stop
	Wound:
	//KaBoom:
		TNT1 A 0 A_SetInvulnerable
		TNT1 A 0 A_ChangeFlag("NODAMAGE",1)
		TNT1 A 0 A_Explode(400,350,0)
		TNT1 A 0 A_RadiusThrust(4096,2048,RTF_NOIMPACTDAMAGE)
		TNT1 A 10 A_SpawnItemEx("ShockBoltExploSpawner",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		Stop
	}
}

Actor ShockBoltExploSpawner 
{
	Translation "0:255=%[0,0,0]:[0.5,0.5,1.5]"
	+NOINTERACTION
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_SpawnItemEx("ShockBoltExplode",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION)
		TNT1 A 0 A_SpawnItemEx("ShockBoltExplodeNew",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		TNT1 A 5 A_SpawnItemEx("ShockBoltExplode2",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION)
		TNT1 A 0 A_SpawnItemEx("ShockBoltExplode",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		TNT1 A 5 A_SpawnItemEx("ShockBoltExplode2",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		Stop
	}
}
Actor ShockBoltExplodeNew
{
	var int user_angle;
	+NOINTERACTION
	RenderStyle Add
	Translation "0:255=%[0,0,0]:[0.3,0.3,1.0]"
	Alpha 0.2
	Scale 1.34
	States
	{
	Spawn:
		TNT1 A 0
		Q27A IJ 1 Bright Light("ShockBoltShadowExplo1") A_FadeIn(0.2)	TNT1 A 0 A_SetScale(1.3)
		Q27A KL 1 Bright Light("ShockBoltShadowExplo1") A_FadeIn(0.2)	TNT1 A 0 A_SetScale(1.24)
		Q27B MN 1 Bright Light("ShockBoltShadowExplo1") A_GetHurt		TNT1 A 0 A_SetScale(1.20)
		Q27B OP 1 Bright Light("ShockBoltShadowExplo1") A_GetHurt		TNT1 A 0 A_SetScale(1.16)
		Q27B QR 1 Bright Light("ShockBoltShadowExplo1") A_GetHurt		TNT1 A 0 A_SetScale(1.12)
		Q27B ST 1 Bright Light("ShockBoltShadowExplo1") A_GetHurt		TNT1 A 0 A_SetScale(1.08)
		Q27B UV 1 Bright Light("ShockBoltShadowExplo1") A_GetHurt		TNT1 A 0 A_SetScale(1.04)
		Q27B WX 1 Bright Light("ShockBoltShadowExplo1") A_GetHurt		TNT1 A 0 A_SetScale(1.0)
		Q27A AB 1 Bright Light("ShockBoltShadowExplo1") A_GetHurt		TNT1 A 0 A_SetScale(0.96)
		Q27A CD 1 Bright Light("ShockBoltShadowExplo1") A_GetHurt		TNT1 A 0 A_SetScale(0.92)
		Q27A EF 1 Bright Light("ShockBoltShadowExplo1") A_GetHurt		TNT1 A 0 A_SetScale(0.88)
		Q27A GH 1 Bright Light("ShockBoltShadowExplo1") A_GetHurt		TNT1 A 0 A_SetScale(0.84)
		Q27A IJ 1 Bright Light("ShockBoltShadowExplo1") A_GetHurt		TNT1 A 0 A_SetScale(0.80)
		Q27A KL 1 Bright Light("ShockBoltShadowExplo1") A_GetHurt		TNT1 A 0 A_SetScale(0.76)
		Q27A MN 1 Bright Light("ShockBoltShadowExplo1") A_GetHurt		TNT1 A 0 A_SetScale(0.72)
		Q27A OP 1 Bright Light("ShockBoltShadowExplo1") A_GetHurt		TNT1 A 0 A_SetScale(0.68)
		Q27A QR 1 Bright Light("ShockBoltShadowExplo1") A_GetHurt		TNT1 A 0 A_SetScale(0.64)
		Q27A ST 1 Bright Light("ShockBoltShadowExplo1") A_GetHurt		TNT1 A 0 A_SetScale(0.60)
		Q27A UV 1 Bright Light("ShockBoltShadowExplo1") A_GetHurt		TNT1 A 0 A_SetScale(0.56)
		Q27A WX 1 Bright Light("ShockBoltShadowExplo1") A_GetHurt		TNT1 A 0 A_SetScale(0.52)
		Q27A YZ 1 Bright Light("ShockBoltShadowExplo1") A_GetHurt		TNT1 A 0 A_SetScale(0.48)
		Q27B AB 1 Bright Light("ShockBoltShadowExplo1") A_GetHurt		TNT1 A 0 A_SetScale(0.44)
		Q27B CD 1 Bright Light("ShockBoltShadowExplo1") A_GetHurt		TNT1 A 0 A_SetScale(0.40)
		Q27B EF 1 Bright Light("ShockBoltShadowExplo1") A_GetHurt		TNT1 A 0 A_SetScale(0.36)
		Q27B GH 1 Bright Light("ShockBoltShadowExplo2") A_GetHurt		TNT1 A 0 A_SetScale(0.32)
		Q27B IJ 1 Bright Light("ShockBoltShadowExplo3") A_GetHurt		TNT1 A 0 A_SetScale(0.28)
		Q27B KL 1 Bright Light("ShockBoltShadowExplo4") A_GetHurt		TNT1 A 0 A_SetScale(0.24)
		Q27B MN 1 Bright Light("ShockBoltShadowExplo5") A_GetHurt		TNT1 A 0 A_SetScale(0.20)
		Q27B OP 1 Bright Light("ShockBoltShadowExplo6") A_GetHurt		TNT1 A 0 A_SetScale(0.16)
		Q27B QR 1 Bright Light("ShockBoltShadowExplo7") A_GetHurt		TNT1 A 0 A_SetScale(0.12)
		Q27B ST 1 Bright Light("ShockBoltShadowExplo8") A_GetHurt		TNT1 A 0 A_SetScale(0.08)
		Q27B UV 1 Bright Light("ShockBoltShadowExplo9") A_GetHurt		TNT1 A 0 A_SetScale(0.04)
		Q27B WX 1 Bright Light("ShockBoltShadowExplo10") A_GetHurt
		Stop
	}
}

Actor ShockBoltTrail
{
	+NOGRAVITY
	RenderStyle Add
	//Alpha 0.8
	Scale 0.3
	States
	{
	Spawn:
		VOIZ ABCDEFGHIJKL 1 Bright A_FadeOut(0.04)
		Loop
	}
}

Actor ShockBeamDie
{
	+NOGRAVITY
	+FORCERADIUSDMG
	RenderStyle translucent
	Alpha 0.55
	DamageType "Disintegrate"
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_Explode(128,250,0)
		TNT1 A 0 A_RadiusThrust(2048,1024,RTF_NOIMPACTDAMAGE)
		TNT1 A 0 A_Playsound("reilsss/weapons/shockrifleexplosion2")
		VORY ABCDEFGHI 2 Light("ShockBoltShadowExplo1") Bright A_FadeOut(0.03)
		VORY J 2 Light("ShockBoltShadowExplo2") Bright A_FadeOut(0.03)
		VORY K 2 Light("ShockBoltShadowExplo3") Bright A_FadeOut(0.03)
		VORY L 2 Light("ShockBoltShadowExplo4") Bright A_FadeOut(0.03)
		VORY M 2 Light("ShockBoltShadowExplo5") Bright A_FadeOut(0.03)
		VORY N 2 Light("ShockBoltShadowExplo6") Bright A_FadeOut(0.03)
		VORY O 2 Light("ShockBoltShadowExplo7") Bright A_FadeOut(0.03)
		VORY P 2 Light("ShockBoltShadowExplo8") Bright A_FadeOut(0.03)
		Stop
	}
}

Actor ShockBoltExplode
{
	+FORCEXYBILLBOARD
	+NOGRAVITY
	+FORCERADIUSDMG
	Radius 11
	Height 8
	Damage 15
	RenderStyle Add
	Scale 1
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_Playsound("reilsss/weapons/shockriflecombo")
		LEXP A 3 A_FadeOut(0.05)
		LEXP BCDEFGHI 3
		LEXP J 1 A_FadeOut(0.25)
		Wait
	}
}

Actor ShockBoltExplode2
{
	+FORCERADIUSDMG
	+FORCEXYBILLBOARD
	+NOINTERACTION
	RenderStyle Add
	DamageType "Plasma"
	Scale 1.7
	States
	{
	Spawn:
		TNT1 A 0
		X010 ABCDEFGHIJKLMNOPQRSTUVWXY 2 Bright
		Stop
	}
}

Actor ShockBoltExplode3
{
	+FORCEXYBILLBOARD
	+NOINTERACTION
	RenderStyle Translucent
	Alpha 0.6
	States
	{
	Spawn:
		VOIP FGHIJKLMNOPQPONMLKJIHGF 2 Bright
		Stop
	}
}

Actor AEoDShockRiflePickup : CustomInventory //6042
{
	Inventory.PickupMessage "You got the ASMD shock rifle!"
	Inventory.PickupSound "reilsss/weappickup/blasterrifle"
	Scale 0.2
	States
	{
	Spawn:
		R018 P -1
		Loop
	Pickup:
		TNT1 A 0 A_JumpIfInventory("AEoDShockRifleCount",2,4)
		TNT1 A 0 A_GiveInventory("AEoDShockRifleCount",1)
		TNT1 A 0 A_JumpIfInventory("NoWeaponSwitch",1,2)
		TNT1 A 0 A_SelectWeapon("AEoDShockRifle")
		TNT1 A 0 A_GiveInventory("AEoDShockRifle",1)
		TNT1 A 0
		Stop
	}
}

Actor AEoDShockRifleCount : Inventory { Inventory.MaxAmount 2 }
Actor ShockRifleDropCheck : Inventory {}

Actor ShockRifleDrop : CustomInventory
{
	Inventory.MaxAmount 2
	States
	{
	Use:
		TNT1 A 0
		TNT1 A 0 A_StopSound(6)
		TNT1 A 0 A_SpawnItemEx("DroppedShockRifle",0,0,32,8,0,0,0,SXF_NOCHECKPOSITION,0)
		TNT1 A 0 A_TakeInventory("AEoDShockRifleCount",1)
		Stop
	}
}

Actor DroppedShockRifle
{
	Radius 16
	Height 20
	Scale 0.2
	States
	{
	Spawn:
		R018 P 15
		TNT1 A 0 A_SpawnItemEx("AEoDShockRifleNoAmmo",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER,0)
		Stop
	}
}

Actor AEoDShockRifleNoAmmo : AEoDShockRifleItem
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL	+DONTGIB
	Scale 0.2
	Inventory.Amount 1
	Inventory.PickupMessage "You got the ASMD shock rifle!"
	Inventory.PickupSound "reilsss/weappickup/blasterrifle"
	States
	{
	Spawn:
		R018 P -1
		Loop
	Pickup:
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",4) <= 0,"Nothing")
		TNT1 A 0 A_JumpIfInventory("AECell",20,"Ammo")
		TNT1 A 0 A_JumpIfInventory("AEoDShockRifleCount",2,"Ammo")
		TNT1 A 0 A_JumpIfInventory("AEoDShockRifleCount",1,"Pickup2")
		TNT1 A 0 A_GiveInventory("Weapon4Count",1)
		TNT1 A 0 A_GiveInventory("ShockRifleDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDShockRifle",1)
		TNT1 A 0 A_GiveInventory("AEoDShockRifleCount",1)
		TNT1 A 0 A_TakeInventory("AECell",20)
		TNT1 A 0 	
		TNT1 A 0 A_JumpIfInventory("NoWeaponSwitch",1,2)
		TNT1 A 0 A_SelectWeapon("AEoDShockRifle")
		TNT1 A 0
		Stop
	Pickup2:
		TNT1 A 0 A_JumpIfInventory("AECell",20,"Ammo")
		TNT1 A 0 A_GiveInventory("ShockRifleDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDShockRifle",1)
		TNT1 A 0 A_GiveInventory("AEoDShockRifleCount",1)
		TNT1 A 0 A_TakeInventory("AECell",20)
		TNT1 A 0 	
		TNT1 A 0 A_JumpIfInventory("NoWeaponSwitch",1,2)
		TNT1 A 0 A_SelectWeapon("AEoDShockRifle")
		TNT1 A 0
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDShockRifleCount",2,"Ammo")
		TNT1 A 0 A_JumpIfInventory("AEoDShockRifleCount",1,"Pickup2")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		TNT1 A 0 ACS_NamedExecute("s798",0,4,46,0)
		Fail
	Ammo:
		TNT1 A 0 A_TakeInventory("AECell",20)
		TNT1 A 0 A_JumpIfInventory("AEoDShockRifleCount",1,2)
		TNT1 A 0 A_GiveInventory("Weapon4Count",1)
		TNT1 A 0 A_GiveInventory("AEoDShockRifleCount",1)
		TNT1 A 0 A_GiveInventory("ShockRifleDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDShockRifle",1)
		Stop
	}
}

//==================================================================================
//==================================================================================

//==================================================================================
//==================================================================================

Actor AEoDDragonClawItem : CustomInventory 6008
{
	+FLOORCLIP
	+FLOATBOB
	+INVENTORY.IGNORESKILL	+DONTGIB
	Inventory.Amount 1
	Inventory.PickupMessage "You got the Dragon Claw!"
	Inventory.PickupSound "weaponbuild"
	States
	{
	Spawn:
		R015 J -1
		Loop
	Pickup:
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",4) <= 0,"Nothing")
		TNT1 A 0 A_JumpIfInventory("AEoDDragonClawCount",2,"Ammo")
		TNT1 A 0 A_JumpIfInventory("AEoDDragonClawCount",1,"Pickup2")
		TNT1 A 0 A_GiveInventory("Weapon4Count",1)
		TNT1 A 0 A_GiveInventory("DragonClawDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDDragonClaw",1)
		TNT1 A 0 A_GiveInventory("AEoDDragonClawCount",1)
		TNT1 A 0 	
		TNT1 A 0 A_JumpIfInventory("NoWeaponSwitch",1,2)
		TNT1 A 0 A_SelectWeapon("AEoDDragonClaw")
		TNT1 A 0
		Stop
	Pickup2:
		TNT1 A 0 A_GiveInventory("DragonClawDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDDragonClaw",1)
		TNT1 A 0 A_GiveInventory("AEoDDragonClawCount",1)
		TNT1 A 0 	
		TNT1 A 0 A_JumpIfInventory("NoWeaponSwitch",1,2)
		TNT1 A 0 A_SelectWeapon("AEoDDragonClaw")
		TNT1 A 0
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDDragonClawCount",2,"Ammo")
		TNT1 A 0 A_JumpIfInventory("AEoDDragonClawCount",1,"Pickup2")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		TNT1 A 0 ACS_NamedExecute("s798",0,4,44,0)
		Fail
	Ammo:
		TNT1 A 0 A_GiveInventory("AEoDDragonClaw",1)
		Stop
	}
}

Actor AEoDDragonClaw : Weapon // Blaster 6008
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL	+DONTGIB
	+WEAPON.CHEATNOTWEAPON
	+FLOATBOB
	Weapon.AmmoType1 "BlueMana"
	Weapon.AmmoType2 "BlueMana"
	Weapon.AmmoGive1 25
	Weapon.AmmoUse1 1
	Weapon.AmmoUse2 4
	Weapon.YAdjust 10
	Weapon.SelectionOrder 7250
	Inventory.PickupMessage "You got the Dragon Claw!"
	Inventory.PickupSound "weaponbuild"
	weapon.upsound "weapons/draw"
	Tag "Dragon Claw"
	States
	{
	Spawn:
		R015 J 0
		TNT1 A 0 A_SpawnItemEx("AEoDDragonClawPickup",0,0,0,0,0,0,0,0)
		Stop
	Ready:
		TNT1 A 0 A_TakeInventory("DragonClawDropCheck",1)
		TNT1 A 0 A_JumpIfInventory("AEoDDragonClawCount",2,"Ready2")
		R015 A 1 A_WeaponReady
		Loop
	Ready2:
		TNT1 A 0 A_JumpIfInventory("DragonClawDropCheck",1,"Ready")
		R015 K 1 A_WeaponReady
		Loop
	Deselect:
		TNT1 A 0 	
		TNT1 A 0 A_JumpIfInventory("AEoDDragonClawCount",2,"Deselect2")
		R015 A 1 A_Lower
		TNT1 AA 0 A_Lower
		Loop
	Deselect2:
		TNT1 A 0 	
		R015 K 1 A_Lower
		TNT1 AA 0 A_Lower
		Loop
	Select:
		TNT1 A 0 	
		TNT1 A 0 A_JumpIfInventory("AEoDDragonClawCount",2,"Select2")
		R015 A 1 A_Raise
		TNT1 AA 0 A_Raise
		Loop
	Select2:
		TNT1 A 0 	
		R015 K 1 A_Raise
		TNT1 AA 0 A_Raise
		Loop
	Fire:
		TNT1 A 0 A_JumpIfInventory("AEoDDragonClawCount",2,"Fire2")
		R015 BCD 1
	Hold:
		TNT1 A 0 A_JumpIfInventory("AEoDDragonClawCount",2,"Hold2")
		TNT1 A 0 //ACS_NamedExecute("s851",0,10,random(-8,8),0)
		TNT1 A 0 A_PlaySound("weapons/blastershoot", CHAN_WEAPON, 1.0, 0)
		TNT1 A 0 A_FireCustomMissile("DragClawSmokeSpawner",0,0,0,5)
		R015 E 2 A_FireBullets(2,2,1,5*(random(1,8)),"BlasterPuff",1) //A_FireBlasterPL1
		TNT1 A 0 A_Recoil(0.04)
		R015 DD 1 Bright //ACS_NamedExecute("s851",0,-5,0,0)
		R015 C 1
		TNT1 A 0 A_ReFire
		Goto Ready
	Fire2:
		R015 LMN 1
	Hold2:
		TNT1 A 0 //ACS_NamedExecute("s851",0,16,random(-8,8),0)
		TNT1 A 0 A_PlaySound("weapons/blastershoot", CHAN_WEAPON, 1.0, 0)
		TNT1 A 0 A_FireCustomMissile("DragClawSmokeSpawner",0,0,10,5)
		TNT1 A 0 A_FireCustomMissile("DragClawSmokeSpawner",0,0,-10,5)
		R015 O 0 A_FireBullets(2,2,1,5*(random(1,8)),"BlasterPuff",1) //A_FireBlasterPL1
		R015 O 2 A_FireBullets(2,2,1,5*(random(1,8)),"BlasterPuff",1) //A_FireBlasterPL1
		TNT1 A 0 A_Recoil(0.08)
		R015 NN 1 Bright //ACS_NamedExecute("s851",0,-8,0,0)
		R015 M 1
		TNT1 A 0 A_ReFire("Hold2")
		Goto Ready
	AltFire:
		TNT1 A 0 A_JumpIfInventory("AEoDDragonClawCount",2,"AltFire2")
		TNT1 A 0
	AltHold:
		TNT1 A 0 A_JumpIfInventory("AEoDDragonClawCount",2,"AltHold2")
		TNT1 A 0 //ACS_NamedExecute("s851",0,24,random(-8,8),0)
		TNT1 A 0 A_FireCustomMissile("DragClawSmokeSpawner",0,0,0,5)
		R015 E 3 Bright A_FireCustomMissile("BlasterFX1")
		TNT1 A 0 A_Recoil(0.08)
		R015 DD 1 Bright //ACS_NamedExecute("s851",0,-12,0,0)
		R015 D 2
		R015 CB 4
		TNT1 A 0 A_ReFire
		Goto Ready
	AltFire2:
		TNT1 A 0
	AltHold2:
		TNT1 A 0 //ACS_NamedExecute("s851",0,30,random(-8,8),0)
		TNT1 A 0 A_FireCustomMissile("DragClawSmokeSpawner",0,0,10,5)
		R015 P 2 Bright A_FireCustomMissile("BlasterFX1",0,1,12,3)
		TNT1 A 0 A_Recoil(0.08)
		R015 QQ 1 Bright //ACS_NamedExecute("s851",0,-15,0,0)
		R015 RS 2
		TNT1 A 0 //ACS_NamedExecute("s851",0,30,random(-8,8),0)
		TNT1 A 0 A_FireCustomMissile("DragClawSmokeSpawner",0,0,-10,5)
		R015 T 2 Bright A_FireCustomMissile("BlasterFX1",0,1,-12,3)
		TNT1 A 0 A_Recoil(0.08)
		R015 UU 1 Bright //ACS_NamedExecute("s851",0,-15,0,0)
		R015 VW 2
		TNT1 A 0 A_ReFire("AltHold2")
		Goto Ready	
	}
}
//****************************************************
Actor DragClawSmokeSpawner
{
	Radius 1
	Height 1
	Speed 14
	PROJECTILE
//	+NOCLIP
	+NOTIMEFREEZE
	States
	{
	Spawn:
		TNT1 A 1
		TNT1 A 0 A_Die
		Goto Death
	Death:
		TNT1 A 0 A_CustomMissile("DragClawSmoke",-2,0,0)
		Stop
	}
}
Actor DragClawSmoke
{
	+NOINTERACTION
	RenderStyle Add 
	Translation "0:255=%[0,0,0]:[0.6,0.6,2.0]"
	Scale 0.14
	Alpha 0.7
	States
	{
	Spawn:
		TNT1 A 0 
		TNT1 A 0 A_Jump(256,3,6,9,12,15,18,21,24,27,30,33,36)
		X103 ABCDEFGHIJKLMNOPRSTUVWXYZ 2 Bright A_FadeOut(0.07)
		X104 ABCDEFGHIJKLMNOPQRSTUV 2 Bright A_FadeOut(0.08)
		Goto Spawn+2
	}
}

//****************************************************
Actor BlasterPuffDMG : BlasterPuff replaces BlasterPuff
{
	DamageType "AEMagic"
	+NOBLOCKMAP
	+NOGRAVITY
	+PUFFONACTORS
	RenderStyle Add
	Scale 0.5
	States
	{
	Crash:
		TNT1 A 0 A_SpawnItemEx("TeslaFXv6",random(3,-3),0,random(2,-2),0,0,frandom(0.2,0.5),0,SXF_NOCHECKPOSITION)	//see WeapClass7.AED
		TNT1 AAAAAAA 0 A_SpawnItemEx("BlasterPuffParticle",0,0,0,frandom(5,-5),frandom(5,-5),frandom(5,-5),random(0,359),SXF_NOCHECKPOSITION,128)
		CTFX BCDEF 4 BRIGHT
		Stop
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_SpawnItemEx("TeslaFXv6",random(3,-3),0,random(2,-2),0,0,frandom(0.2,0.5),0,SXF_NOCHECKPOSITION)
		TNT1 AAAAAAA 0 A_SpawnItemEx("BlasterPuffParticle",0,0,0,frandom(5,-5),frandom(5,-5),frandom(5,-5),random(0,359),SXF_NOCHECKPOSITION,128)
		CTFX BCDEF 4 BRIGHT
		Stop
	}
}

Actor BlasterPuffParticle
{
	Scale 0.4
	RenderStyle Add
	+NOINTERACTION
	States
	{
	Spawn:
		RFX1 B 2 Bright
		RFX1 B 0 A_Jump(180,1)
		Loop
		RFX1 B 2 Bright
		RFX1 B 1 Bright A_FadeOut//(0.05)
		Wait
	Death:
		TNT1 A 1
		Stop
	}
}

//****************************************************
Actor AEoDBlasterFX1 : BlasterFX1 replaces BlasterFX1
{
	Radius 4
	DamageType "AEMagic"
	RenderStyle Add
	MissileType "TeslaFXv6"
	MissileHeight 8
	States
	{
	Spawn:
		ACLO E 1
		Loop
	Death:
		TNT1 AAAAA 0 A_SpawnItemEx("TeslaFXv6",random(12,-12),0,random(12,-12),0,0,frandom(0.5,1),0,SXF_NOCHECKPOSITION)
		TNT1 AAAAAAAAAAAAAA 0 A_SpawnItemEx("BlasterPuffParticle",0,0,0,frandom(5,-5),frandom(5,-5),frandom(5,-5),random(0,359),SXF_NOCHECKPOSITION)
		FX18 A 3 Bright A_SpawnRippers
		FX18 B 3 BRIGHT
		FX18 CDEFG 4 BRIGHT
		Stop
	}
}

Actor AEoDRipperDragonClawshot : Ripper replaces Ripper
{
	Radius 8
	Height 6
	Speed 14
	Damage 4
	Projectile
	+NOBOSSRIP
	Scale 0.7
	DamageType "AEMagic"
	+RIPPER	RipperLevel 1
	DeathSound "reilsss/weapons/dragonclawexplosion"
	States
	{
	Spawn:
		FX18 MN 3 A_SpawnItemEx("DragClawSmokeSmall",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		Loop
	Death:
		TNT1 A 0 A_SetTranslucent(0.9,1)
		TNT1 A 0 A_SpawnItemEx("TeslaFXv6",random(3,-3),0,random(2,-2),0,0,frandom(0.2,0.5),0,SXF_NOCHECKPOSITION)
		TNT1 AAAAAAA 0 A_SpawnItemEx("BlasterPuffParticle",0,0,0,frandom(5,-5),frandom(5,-5),frandom(5,-5),random(0,359),SXF_NOCHECKPOSITION,128)
		FX18 OPQRS 4 BRIGHT
		Stop
	}
}

Actor DragClawSmokeSmall
{
	+NOINTERACTION
	RenderStyle Add 
	Translation "0:255=%[0,0,0]:[0.6,0.6,2.0]"
	Scale 0.2
	
	Alpha 0.7
	States
	{
	Spawn:
		TNT1 A 0 
		TNT1 A 0 A_Jump(256,3,6,9,12,15,18,21,24,27,30,33,36)
		X103 ABCDEFGHIJKLMNOPRSTUVWXYZ 2 Bright A_FadeOut(0.07)
		X104 ABCDEFGHIJKLMNOPQRSTUV 2 Bright A_FadeOut(0.08)
		Goto Spawn+2
	}
}


Actor AEoDDragonClawPickup : CustomInventory //6042
{
	Inventory.PickupMessage "You got the Dragon Claw!"
	Inventory.PickupSound "weaponbuild"
	+FLOATBOB
	States
	{
	Spawn:
		R015 J -1
		Loop
	Pickup:
		TNT1 A 0 A_JumpIfInventory("AEoDDragonClawCount",2,4)
		TNT1 A 0 A_GiveInventory("AEoDDragonClawCount",1)
		TNT1 A 0 A_JumpIfInventory("NoWeaponSwitch",1,2)
		TNT1 A 0 A_SelectWeapon("AEoDDragonClaw")
		TNT1 A 0 A_GiveInventory("AEoDDragonClaw",1)
		TNT1 A 0
		Stop
	}
}

Actor AEoDDragonClawCount : Inventory { Inventory.MaxAmount 2 }
Actor DragonClawDropCheck : Inventory {}

Actor DragonClawDrop : CustomInventory
{
	Inventory.MaxAmount 2
	States
	{
	Use:
		TNT1 A 0
		TNT1 A 0 A_SpawnItemEx("DroppedDragonClaw",0,0,32,8,0,0,0,SXF_NOCHECKPOSITION,0)
		TNT1 A 0 A_TakeInventory("AEoDDragonClawCount",1)
		Stop
	}
}

Actor DroppedDragonClaw
{
	Radius 16
	Height 20
	States
	{
	Spawn:
		R015 J 15
		TNT1 A 0 A_SpawnItemEx("AEoDDragonClawNoAmmo",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER,0)
		Stop
	}
}

Actor AEoDDragonClawNoAmmo : AEoDDragonClawItem
{
	+FLOATBOB
	+FLOORCLIP
	+INVENTORY.IGNORESKILL	+DONTGIB
	Inventory.PickupMessage "You got the Dragon Claw!"
	Inventory.PickupSound "weaponbuild"
	States
	{
	Spawn:
		R015 J -1
		Loop
	Pickup:
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",4) <= 0,"Nothing")
		TNT1 A 0 A_JumpIfInventory("BlueMana",25,"Ammo")
		TNT1 A 0 A_JumpIfInventory("AEoDDragonClawCount",2,"Ammo")
		TNT1 A 0 A_JumpIfInventory("AEoDDragonClawCount",1,"Pickup2")
		TNT1 A 0 A_GiveInventory("Weapon4Count",1)
		TNT1 A 0 A_GiveInventory("DragonClawDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDDragonClaw",1)
		TNT1 A 0 A_GiveInventory("AEoDDragonClawCount",1)
		TNT1 A 0 A_TakeInventory("BlueMana",25)
		TNT1 A 0 	
		TNT1 A 0 A_JumpIfInventory("NoWeaponSwitch",1,2)
		TNT1 A 0 A_SelectWeapon("AEoDDragonClaw")
		TNT1 A 0
		Stop
	Pickup2:
		TNT1 A 0 A_JumpIfInventory("BlueMana",25,"Ammo")
		TNT1 A 0 A_GiveInventory("DragonClawDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDDragonClaw",1)
		TNT1 A 0 A_GiveInventory("AEoDDragonClawCount",1)
		TNT1 A 0 A_TakeInventory("BlueMana",25)
		TNT1 A 0 	
		TNT1 A 0 A_JumpIfInventory("NoWeaponSwitch",1,2)
		TNT1 A 0 A_SelectWeapon("AEoDDragonClaw")
		TNT1 A 0
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDDragonClawCount",2,"Ammo")
		TNT1 A 0 A_JumpIfInventory("AEoDDragonClawCount",1,"Pickup2")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		TNT1 A 0 ACS_NamedExecute("s798",0,4,44,0)
		Fail
	Ammo:
		TNT1 A 0 A_TakeInventory("BlueMana",25)
		TNT1 A 0 A_JumpIfInventory("AEoDDragonClawCount",1,2)
		TNT1 A 0 A_GiveInventory("Weapon4Count",1)
		TNT1 A 0 A_GiveInventory("AEoDDragonClawCount",1)
		TNT1 A 0 A_GiveInventory("DragonClawDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDDragonClaw",1)
		Stop
	}
}

//==================================================================================
//==================================================================================

//==================================================================================
//==================================================================================

Actor AEoDVoodooDollItem : CustomInventory 6091
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL	+DONTGIB
	Scale 0.8
	Inventory.Amount 1
	Inventory.PickupMessage "Picked up a Voodoo Doll"
	Inventory.PickupSound "BloodShotgun/Pickup"
	States
	{
	Spawn:
		VDDL A -1
		Loop
	Pickup:
		TNT1 A 0 A_JumpIfInventory("AEoDVoodooDoll",1,"Ammo")
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",4) <= 0,"Nothing")
		TNT1 A 0 A_GiveInventory("Weapon4Count",1)
		TNT1 A 0 A_GiveInventory("VoodooDollDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDVoodooDoll",1)
		TNT1 A 0 A_GiveInventory("Mojo",200)
		TNT1 A 0 	
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDVoodooDoll",1,"Ammo")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		TNT1 A 0 ACS_NamedExecute("s798",0,4,41,0)
		Fail
	Ammo:
		TNT1 A 0 A_GiveInventory("Mojo",200)
		Stop
	}
}

Actor AEoDVoodooDoll : Weapon // 6091
{ 
	+WEAPON.CHEATNOTWEAPON
	+INVENTORY.IGNORESKILL	+DONTGIB
	Weapon.AmmoType1 "Mojo"
	Weapon.AmmoGive1 80
	Weapon.AmmoUse1 1
	Weapon.AmmoType2 "Mojo"
	Weapon.AmmoUse2 20
	Weapon.SelectionOrder 10250
	Scale 0.8
	Inventory.PickupMessage "Picked up a Voodoo Doll"
	Inventory.PickupSound "BloodShotgun/Pickup"
	weapon.upsound "weapons/draw"
	Tag "Voodoo doll"
	States
	{
		Spawn: 
		VDDL A 0
		VDDL A 0 A_SpawnItem("VoodooPickup")
		Stop 
	Ready:
		VOOD A 1 A_WeaponReady
		Loop 
	Deselect:
		TNT1 A 0 	
		VOOD A 1 A_Lower
		TNT1 AA 0 A_Lower
		Loop 
	Select:
		TNT1 A 0 	
		VOOD A 1 A_Raise
		TNT1 AA 0 A_Raise 
		Loop 
	Fire:
		VOOD A 0 A_Jump(64,20,42)
		VOOD BC 2
		VOOD C 0 A_Jump(127,5)
		VOOD C 0
		VOOD D 0 A_PlaySound("Voodoo/Stab", CHAN_WEAPON, 1.0, 0)
		VOOD D 6 A_FireBullets(1,1,1,45,"VoodooPuff",1)
		VOOD D 0 A_Jump(256,5)
		VOOD E 0 A_PlaySound("Voodoo/Stab", CHAN_WEAPON, 1.0, 0)
		VOOD E 6 A_FireBullets(1,1,1,45,"VoodooPuff",1)
		VOOD E 0 A_Jump(256,2)
		VOOD R 10 DamageThing(random(20,50))
		VOOD CBA 2
		VOOD A 0 A_JumpIfInventory("Mojo",1,4)
		VOOD A 0 A_TakeInventory("Weapon4Count",1)
		VOOD A 0 A_TakeInventory("VoodooDollDrop",1)
		VOOD A 0 A_TakeInventory("AEoDVoodooDoll",1)
		VOOD A 0
		Goto Ready
		VOOD FG 2
		VOOD G 0 A_Jump(50,4)
		VOOD H 0 A_PlaySound("Voodoo/Stab", CHAN_WEAPON, 1.0, 0)
		VOOD H 6 A_FireBullets(1,1,1,55,"VoodooPuff",1)
		VOOD H 0 A_Jump(256,8)
		VOOD I 0 A_PlaySound("Voodoo/Stab", CHAN_WEAPON, 1.0, 0)
		VOOD I 3 A_FireBullets(1,1,1,55,"VoodooPuff",1)
		VOOD JKLKJ 4
		VOOD GFA 2
		VOOD A 0 A_JumpIfInventory("Mojo",1,4)
		VOOD A 0 A_TakeInventory("Weapon4Count",1)
		VOOD A 0 A_TakeInventory("VoodooDollDrop",1)
		VOOD A 0 A_TakeInventory("AEoDVoodooDoll",1)
		VOOD A 0
		Goto Ready
		VOOD MN 2
		VOOD M 0 A_Jump(50,4)
		VOOD O 0 A_PlaySound("Voodoo/Stab", CHAN_WEAPON, 1.0, 0)
		VOOD O 6 A_FireBullets(1,1,1,110,"VoodooPuff",1)
		VOOD O 0 A_Jump(256,7)
		VOOD P 0 A_PlaySound("Voodoo/Stab", CHAN_WEAPON, 1.0, 0)
		VOOD P 4 A_FireBullets(1,1,1,35,"VoodooPuff",1)
		VOOD QPQP 4
		VOOD NMA 2
		VOOD A 0 A_JumpIfInventory("Mojo",1,4)
		VOOD A 0 A_TakeInventory("Weapon4Count",1)
		VOOD A 0 A_TakeInventory("VoodooDollDrop",1)
		VOOD A 0 A_TakeInventory("AEoDVoodooDoll",1)
		VOOD A 0
		Goto Ready
	AltFire:
		VOO2 A 0 A_PlaySound("Voodoo/Magic", CHAN_WEAPON, 1.0, 0)
		VOO2 ABCDEF 4
		VOO2 G 4 A_FireCustomMissile("VoodooAttack",0,1,0,0)
		VOO2 HI 4
		VOO2 J 8
		VOO2 KLMN 1
		VOOD A 4
		VOOD A 0 A_JumpIfInventory("Mojo",1,4)
		VOOD A 0 A_TakeInventory("Weapon4Count",1)
		VOOD A 0 A_TakeInventory("VoodooDollDrop",1)
		VOOD A 0 A_TakeInventory("AEoDVoodooDoll",1)
		VOOD A 0
		Goto Ready
	}
}

Actor VoodooPickup : CustomInventory
{
	Inventory.PickupMessage "Picked up a voodoo doll"
	Inventory.PickupSound "BloodShotgun/Pickup"
	Scale 0.7
	States
	{
	Spawn:
		VDDL A -1
		Loop
	Pickup:
		TNT1 A 0
		TNT1 A 0 A_GiveInventory("AEoDVoodooDoll",1)
		Stop
	}
}

Actor VoodooPuff
{
	+DONTSPLASH
	+EXTREMEDEATH
	DamageType "Unholy"
	States
	{
	Spawn:
		TNT1 A 0
		Stop
	}
}

Actor VoodooAttack
{
	DONTHURTSHOOTER
	PROJECTILE
	Radius 1
	Height 1
	Speed 0
	States
	{
	Spawn:
		TNT1 A 1
		Goto Death
	Death:
		TNT1 A 1 A_BFGSpray("VoodooAttack2",50)
		Stop
	}
}

Actor VoodooAttack2
{
	+NOBLOCKMAP
	+NOGRAVITY
	+NOTELEPORT
	+DROPOFF
	DamageType "Unholy"
	Radius 1
	Height 1
	Damage 0
	Speed 0
	States
	{
	Spawn:
		TNT1 A 0
		Stop
	}
}

Actor VoodooDollDrop : CustomInventory
{
	Inventory.MaxAmount 1
	States
	{
	Use:
		TNT1 A 0
		TNT1 A 0 A_SpawnItemEx("DroppedVoodooDoll",0,0,32,8,0,0,0,SXF_NOCHECKPOSITION,0)
		Stop
	}
}

Actor DroppedVoodooDoll
{
	Radius 16
	Height 20
	Scale 0.8
	States
	{
	Spawn:
		VDDL A 15
		TNT1 A 0 A_SpawnItemEx("AEoDVoodooDollNoAmmo",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER,0)
		Stop
	}
}

Actor AEoDVoodooDollNoAmmo : AEoDVoodooDollItem
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL	+DONTGIB
	Scale 0.8
	Inventory.Amount 1
	Inventory.PickupMessage "Picked up a Voodoo Doll"
	Inventory.PickupSound "BloodShotgun/Pickup"
	States
	{
	Spawn:
		VDDL A -1
		Loop
	Pickup:
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",4) <= 0,"Nothing")
		TNT1 A 0 A_JumpIfInventory("Mojo",120,"Ammo")
		TNT1 A 0 A_GiveInventory("Weapon4Count",1)
		TNT1 A 0 A_GiveInventory("VoodooDollDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDVoodooDoll",1)
		TNT1 A 0 A_TakeInventory("Mojo",80)
		TNT1 A 0 	
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDVoodooDoll",1,"Ammo")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		TNT1 A 0 ACS_NamedExecute("s798",0,4,41,0)
		Fail
	Ammo:
		TNT1 A 0 A_TakeInventory("Mojo",80)
		TNT1 A 0 A_JumpIfInventory("AEoDVoodooDoll",1,2)
		TNT1 A 0 A_GiveInventory("Weapon4Count",1)
		TNT1 A 0 A_GiveInventory("VoodooDollDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDVoodooDoll",1)
		Stop
	}
}

//==================================================================================
//==================================================================================

//==================================================================================
//==================================================================================

Actor AEoDBloodShotgunItem : CustomInventory 6186
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL	+DONTGIB
	Scale 0.195
	Inventory.Amount 1
	Inventory.PickupMessage "Picked up a sawed-off"
	Inventory.PickupSound "BloodShotgun/Pickup"
	States
	{
	Spawn:
		WB2S A -1
		Loop
	Pickup:
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",4) <= 0,"Nothing")
		TNT1 A 0 A_JumpIfInventory("AEoDBloodShotgunCount",2,"Ammo")
		TNT1 A 0 A_JumpIfInventory("AEoDBloodShotgunCount",1,"Pickup2")
		TNT1 A 0 A_GiveInventory("Weapon4Count",1)
		TNT1 A 0 A_GiveInventory("BloodShotgunDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDBloodShotgun",1)
		TNT1 A 0 A_GiveInventory("AEoDBloodShotgunCount",1)
		TNT1 A 0 	
		TNT1 A 0 A_JumpIfInventory("NoWeaponSwitch",1,2)
		TNT1 A 0 A_SelectWeapon("AEoDBloodShotgun")
		TNT1 A 0
		Stop
	Pickup2:
		TNT1 A 0 A_GiveInventory("BloodShotgunDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDBloodShotgun",1)
		TNT1 A 0 A_GiveInventory("AEoDBloodShotgunCount",1)
		TNT1 A 0 	
		TNT1 A 0 A_JumpIfInventory("NoWeaponSwitch",1,2)
		TNT1 A 0 A_SelectWeapon("AEoDBloodShotgun")
		TNT1 A 0
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDBloodShotgunCount",2,"Ammo")
		TNT1 A 0 A_JumpIfInventory("AEoDBloodShotgunCount",1,"Pickup2")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		TNT1 A 0 ACS_NamedExecute("s798",0,4,42,0)
		Fail
	Ammo:
		TNT1 A 0 A_GiveInventory("AEoDBloodShotgun",1)
		Stop
	}
}

Actor AEoDBloodShotgunCount : Inventory { Inventory.MaxAmount 2 }
Actor BloodShotgunDropCheck : Inventory {}

Actor BloodShotgunDrop : CustomInventory
{
	Inventory.MaxAmount 2
	States
	{
	Use:
		TNT1 A 0
		TNT1 A 0 A_StopSound(6)
		TNT1 A 0 A_SpawnItemEx("DroppedBloodShotgun",0,0,32,8,0,0,0,SXF_NOCHECKPOSITION,0)
		TNT1 A 0 A_TakeInventory("AEoDBloodShotgunCount",1)
		Stop
	}
}

Actor DroppedBloodShotgun
{
	Radius 16
	Height 20
	Scale 0.195
	States
	{
	Spawn:
		WB2S A 15
		TNT1 A 0 A_SpawnItemEx("AEoDBloodShotgunNoAmmo",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER,0)
		Stop
	}
}

Actor AEoDBloodShotgunNoAmmo : AEoDBloodShotgunItem
{
	States
	{
	Pickup:
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",4) <= 0,"Nothing")
		TNT1 A 0 A_JumpIfInventory("AEShell",8,"Ammo")
		TNT1 A 0 A_JumpIfInventory("AEoDBloodShotgunCount",2,"Ammo")
		TNT1 A 0 A_JumpIfInventory("AEoDBloodShotgunCount",1,"Pickup2")
		TNT1 A 0 A_GiveInventory("Weapon4Count",1)
		TNT1 A 0 A_GiveInventory("BloodShotgunDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDBloodShotgun",1)
		TNT1 A 0 A_GiveInventory("AEoDBloodShotgunCount",1)
		TNT1 A 0 A_TakeInventory("AEShell",8)
		TNT1 A 0 	
		TNT1 A 0 A_JumpIfInventory("NoWeaponSwitch",1,2)
		TNT1 A 0 A_SelectWeapon("AEoDBloodShotgun")
		TNT1 A 0
		Stop
	Pickup2:
		TNT1 A 0 A_JumpIfInventory("AEShell",8,"Ammo")
		TNT1 A 0 A_GiveInventory("BloodShotgunDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDBloodShotgun",1)
		TNT1 A 0 A_GiveInventory("AEoDBloodShotgunCount",1)
		TNT1 A 0 A_TakeInventory("AEShell",8)
		TNT1 A 0 	
		TNT1 A 0 A_JumpIfInventory("NoWeaponSwitch",1,2)
		TNT1 A 0 A_SelectWeapon("AEoDBloodShotgun")
		TNT1 A 0
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDBloodShotgunCount",2,"Ammo")
		TNT1 A 0 A_JumpIfInventory("AEoDBloodShotgunCount",1,"Pickup2")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		TNT1 A 0 ACS_NamedExecute("s798",0,4,42,0)
		Fail
	Ammo:
		TNT1 A 0 A_TakeInventory("AEShell",8)
		TNT1 A 0 A_JumpIfInventory("AEoDBloodShotgunCount",1,2)
		TNT1 A 0 A_GiveInventory("Weapon4Count",1)
		TNT1 A 0 A_GiveInventory("AEoDBloodShotgunCount",1)
		TNT1 A 0 A_GiveInventory("BloodShotgunDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDBloodShotgun",1)
		Stop
	}
}

Actor AEoDBloodShotgun : Weapon
{
	+FLOORCLIP
	+WEAPON.CHEATNOTWEAPON
	+INVENTORY.IGNORESKILL	+DONTGIB
	+WEAPON.NOAUTOFIRE
	Weapon.AmmoType "AEShell"
	Weapon.AmmoType2 "AEShell"
	Weapon.AmmoGive1 8
	Weapon.AmmoUse 1
	Weapon.AmmoUse2 1
	Weapon.KickBack 50
	Weapon.SelectionOrder 10750
	Scale 0.195
	Inventory.PickupSound "BloodShotgun/Pickup"
	Inventory.PickupMessage "Picked up a sawed-off"
	Weapon.UpSound "weapons/draw"
	Tag "Blood shotgun"
	States
	{
	Spawn:
		WB2S A 0
		WB2S A 0 A_SpawnItem("AEoDBloodShotgunItem")
		Stop
	Ready:
		TNT1 A 0 A_TakeInventory("BloodShotgunDropCheck",1)
		TNT1 A 0 A_JumpIfInventory("AEoDBloodShotgunCount",2,"Ready2")
		BSG1 A 1 A_WeaponReady
		Loop
	Ready2:
		TNT1 A 0 A_JumpIfInventory("BloodShotgunDropCheck",1,"Ready")
		B2SG A 1 A_WeaponReady
		Loop
	ReadyNoAmmo:
	Deselect:
		TNT1 A 0 	
		TNT1 A 0 A_JumpIfInventory("AEoDBloodShotgunCount",2,"Deselect2")
		BSG1 A 1 A_Lower
		TNT1 AA 0 A_Lower
		Loop
	Select:
		TNT1 A 0 	
		TNT1 A 0 A_JumpIfInventory("AEoDBloodShotgunCount",2,"Select2")
		BSG1 A 1 A_Raise
		TNT1 AA 0 A_Raise
		Loop
	Deselect2:
		TNT1 A 0 A_TakeInventory("BloodShotgunToken",2)
	DesLoop2:
		TNT1 A 0 	
		B2SG A 1 A_Lower
		TNT1 A 0 A_Lower
		Loop
	Select2:
		TNT1 A 0 A_GiveInventory("BloodShotgunToken",2)
	SelLoop2:
		TNT1 A 0 	
		B2SG A 1 A_Raise
		TNT1 A 0 A_Raise
		Loop
	Fire:
		TNT1 A 0 A_JumpIfInventory("AEoDBloodShotgunCount",2,"Fire2")
		BSG1 A 0 
		BSG1 A 0 A_JumpIfInventory("SpentShellI", 1, 13)
		BSG1 A 0 A_GiveInventory("SpentShellI", 1)
		BSG1 A 1 A_GunFlash
		TNT1 A 0 
		TNT1 A 0 A_FireCustomMissile("GunSmallSmokeSpawner",0,0,8,6)
		BSG1 B 0 A_PlayWeaponSound("Blood2Shotgun/Fire1")
		BSG1 B 2 Bright A_FireBullets(5, 5, 10, 4, "BulletDamagePuff", 1)
		BSG1 CD 2
		BSG1 HI 2
		BSG1 I 0 A_ReFire
		Goto Ready
		BSG1 A 0 
		BSG1 A 0 A_TakeInventory("SpentShellI", 1)
		BSG1 A 1 A_GunFlash
		BSG1 E 0 A_PlayWeaponSound("Blood2Shotgun/Fire1")
		TNT1 A 0 
		TNT1 A 0 A_FireCustomMissile("GunSmallSmokeSpawner",0,0,10,6)
		BSG1 E 2 Bright A_FireBullets(5, 5, 10, 4, "BulletDamagePuff", 1)
		BSG1 FG 2
		BSG1 HI 2
		BSG1 O 0 A_JumpIfNoAmmo("Ready")
		BSG1 OP 2
		BSG1 Q 0 A_FireCustomMissile("ShotgunCasingSpawner",-50,0, 0,0)
		BSG1 Q 2 A_FireCustomMissile("ShotgunCasingSpawner",-50,0, 0,0)
		TNT1 A 4
		BSG1 R 2
		BSG1 S 2 A_PlaySound("Blood2Shotgun/Reload")
		BSG1 TU 2
		BSG1 VWX 2
		BSG1 X 0 A_ReFire
		Goto Ready
		BSG1 AAAAAA 0 A_CheckReload
		Goto Deselect
	AltFire:
		TNT1 A 0 A_JumpIfInventory("AEoDBloodShotgunCount",2,"AltFire2")
		BSG1 A 0 A_JumpIfNoAmmo(1)
		BSG1 A 0 A_JumpIfInventory("AEShell", 2, 1)
		Goto Fire
		BSG1 A 0 A_JumpIfInventory("SpentShellI", 1, 28)
		BSG1 A 1 A_GunFlash
		BSG1 J 0 A_PlayWeaponSound("Blood2Shotgun/Fire2")
		TNT1 A 0
		TNT1 A 0 A_FireCustomMissile("GunSmallSmokeSpawner",0,0,8,6)
		TNT1 A 0 A_FireCustomMissile("GunSmallSmokeSpawner",0,0,10,6)
		BSG1 J 0 Bright A_FireBullets(12, 12, 15, 4, "BulletDamagePuff", 1)
		BSG1 J 2 Bright A_FireBullets(12, 12, 15, 4, "BulletDamagePuff", 1)
		BSG1 KLM 2
		BSG1 N 3
		BSG1 HI 2
		BSG1 O 0 A_JumpIfNoAmmo(15)
		BSG1 OP 2
		BSG1 Q 0 A_FireCustomMissile("ShotgunCasingSpawner",-50,0, 0,0)
		BSG1 Q 2 A_FireCustomMissile("ShotgunCasingSpawner",-50,0, -2,0)
		TNT1 A 4
		BSG1 R 2
		BSG1 S 2 A_PlaySound("Blood2Shotgun/Reload")
		BSG1 TU 2
		BSG1 VWX 2
		BSG1 X 0 A_ReFire
		Goto Ready
		BSG1 A 0
		Goto Fire+14
		BSG1 AAAAAA 0 A_CheckReload
		Goto Deselect
	Flash:
		TNT1 A 2 A_Light2
		TNT1 A 1 A_Light1
		TNT1 A 0 A_Light0
		Stop
	Fire2:
		B2SG A 0 
		B2SG A 0 A_JumpIfInventory("AEShell",3,3)
		B2SG A 0 A_JumpIfInventory("AEShell",2,5)
		B2SG A 0 A_JumpIfInventory("AEShell",1,6)
		B2SG A 0 A_TakeInventory("OneShellLeft",1)
		B2SG A 0 A_TakeInventory("TwoShellsLeft",1)
		B2SG A 0 A_Jump(256,4)
		B2SG A 0 A_GiveInventory("TwoShellsLeft",1)
		B2SG A 0 A_Jump(256,2)
		B2SG A 0 A_GiveInventory("OneShellLeft",1)
		B2SG A 0 A_JumpIfInventory("FirstRound",1,20)		 // Determines what barrels will fire
		B2SG A 0 A_JumpIfInventory("OneShellInRightGun",1,68)
		B2SG A 0 A_GunFlash				  // Fire left gun left barrel
		TNT1 A 0 A_FireCustomMissile("GunSmallSmokeSpawner",0,0,-10,6)
		B2SG K 0 A_PlayWeaponSound("Blood2Shotgun/Fire1")
		B2SG K 3 Bright A_FireBullets(5,5,10,4,"BulletDamagePuff",1)
		B2SG LM 2	
		B2SG A 0 A_JumpIfInventory("OneShellLeft",1,52)
		B2SG A 0 A_GunFlash				  // Fire right gun left barrel
		TNT1 A 0
		TNT1 A 0 A_FireCustomMissile("GunSmallSmokeSpawner",0,0,8,6)
		B2SG Q 0 A_PlayWeaponSound("Blood2Shotgun/Fire1")
		B2SG Q 3 Bright A_FireBullets(5,5,10,4,"BulletDamagePuff",1)
		B2SG Q 0 A_GiveInventory("FirstRound",1)
		B2SG RS 2 
		B2SG Y 2
		B2SG Z 2 A_JumpIfNoAmmo(42)
		B2SG Z 0 A_ReFire
		Goto Ready2
		B2SG A 0 A_JumpIfNoAmmo(1)
		B2SG A 0 A_GunFlash				  // Fire left gun right barrel
		TNT1 A 0 
		TNT1 A 0 A_FireCustomMissile("GunSmallSmokeSpawner",0,0,-8,6)
		B2SG N 0 A_PlayWeaponSound("Blood2Shotgun/Fire1")
		B2SG N 3 Bright A_FireBullets(5,5,10,4,"BulletDamagePuff",1)
		B2SG OP 2 
		B2SG A 0 A_JumpIfInventory("TwoShellsLeft",1,23)
		B2SG A 0 A_JumpIfInventory("OneShellLeft",1,32)
		B2SG A 0 A_GunFlash				  // Fire right gun right barrel, prepares to reload
		TNT1 A 0 
		TNT1 A 0 A_FireCustomMissile("GunSmallSmokeSpawner",0,0,10,6)
		B2SR A 0 A_PlayWeaponSound("Blood2Shotgun/Fire1")
		B2SR A 3 Bright A_FireBullets(5,5,10,4,"BulletDamagePuff",1)
		B2SR BC 2 
		B2SR D 2 A_TakeInventory("FirstRound",1)
		TNT1 AA 0 A_FireCustomMissile("ShotgunCasing",-45+random(-4,4),0,0,0)
		TNT1 AA 0 A_FireCustomMissile("ShotgunCasing",45+random(-4,4),0,0,0)
		TNT1 A 8
		B2SR E 2					 // Reload
		BS2R F 2 A_PlaySound("Blood2Shotgun/Reload")
		B2SR GHIJK 2
		B2SG A 2
		B2SG A 3 A_ReFire
		Goto Ready2
		B2SG A 0 A_GunFlash				  // Fire right gun right barrel, no reload
		TNT1 A 0 
		TNT1 A 0 A_FireCustomMissile("GunSmallSmokeSpawner",0,0,10,6)
		B2SR A 0 A_PlayWeaponSound("Blood2Shotgun/Fire1")
		B2SR A 3 Bright A_FireBullets(5,5,10,4,"BulletDamagePuff",1)
		B2SG TU 2 
		B2SG V 2 A_TakeInventory("FirstRound",1)
		B2SG Y 2
		B2SG Z 2 A_JumpIfNoAmmo(1)
		B2SG Z 0 A_ReFire
		Goto Ready2
		B2SG WX 2
		B2SG AAAAAA 0 A_CheckReload
		Goto Deselect2
		B2SG A 0 A_GunFlash				  // One shell remaining in right gun
		TNT1 A 0 
		TNT1 A 0 A_FireCustomMissile("GunSmallSmokeSpawner",0,0,8,6)
		B2SG A 0 A_PlayWeaponSound("Blood2Shotgun/Fire1")
		B2SG "[" 3 Bright A_FireBullets(5,5,10,4,"BulletDamagePuff",1)
		B2SG "\" 2 
		B2SG "]" 2	
		B2SG Y 2 A_TakeInventory("OneShellInRightGun",1)
		B2SG Z 2 A_JumpIfNoAmmo(1)
		B2SG AAAAAA 0 A_CheckReload
		Goto Deselect2
	AltFire2:
		B2SG A 0 A_JumpIfNoAmmo(1)
		B2SG A 0 A_JumpIfInventory("AEShell",4,4)
		B2SG A 0 A_JumpIfInventory("AEShell",3,7)
		B2SG A 0 A_JumpIfInventory("AEShell",2,8)
		B2SG A 0 A_JumpIfInventory("AEShell",1,9)
		B2SG A 0 A_TakeInventory("OneShellLeft",1)
		B2SG A 0 A_TakeInventory("TwoShellsLeft",1)
		B2SG A 0 A_TakeInventory("ThreeShellsLeft",1)
		B2SG A 0 A_Jump(256,6)
		B2SG A 0 A_GiveInventory("ThreeShellsLeft",1)
		B2SG A 0 A_Jump(256,4)
		B2SG A 0 A_GiveInventory("TwoShellsLeft",1)
		B2SG A 0 A_Jump(256,2)
		B2SG A 0 A_GiveInventory("OneShellLeft",1)
		B2SG A 0 A_JumpIfInventory("FirstRound",1,50)
		B2SG A 0 A_JumpIfInventory("OneShellInRightGun",1,53)	  // Used alt-fire with only three shells remaining
		B2SG A 0 A_JumpIfNoAmmo(1)
		B2SG A 0 A_JumpIfInventory("OneShellLeft",1,58)
		B2SG A 0 A_GunFlash				  // Fire left gun both barrels
		B2SG B 0 A_PlayWeaponSound("Blood2Shotgun/Fire2")
		TNT1 A 0 
		TNT1 A 0 A_FireCustomMissile("GunSmallSmokeSpawner",0,0,-10,6)
		TNT1 A 0 A_FireCustomMissile("GunSmallSmokeSpawner",0,0,-8,6)
		B2SG B 0 Bright A_FireBullets(12,12,15,4,"BulletDamagePuff",1)
		B2SG B 3 Bright A_FireBullets(12,12,15,4,"BulletDamagePuff",1)
		B2SG CDH 2 
		B2SG H 1
		B2SG A 0 A_JumpIfInventory("ThreeShellsLeft",1,36)
		B2SG A 0 A_JumpIfNoAmmo(1)
		B2SG A 0 A_JumpIfInventory("ThreeShellsLeft",1,35)
		B2SG A 0 A_JumpIfInventory("TwoShellsLeft",1,24)
		B2SG A 0 A_GunFlash				  // Fire right gun both barrels
		B2SG E 0 A_PlayWeaponSound("Blood2Shotgun/Fire2")
		TNT1 A 0 
		TNT1 A 0 A_FireCustomMissile("GunSmallSmokeSpawner",0,0,8,6)
		TNT1 A 0 A_FireCustomMissile("GunSmallSmokeSpawner",0,0,10,6)
		B2SG E 0 Bright A_FireBullets(12,12,15,4,"BulletDamagePuff",1)
		B2SG E 3 Bright A_FireBullets(12,12,15,4,"BulletDamagePuff",1)
		B2SG FG 2 
		TNT1 A 2 
		TNT1 AA 0 A_FireCustomMissile("ShotgunCasing",-45+random(-4,4),0,0,0)
		TNT1 AA 0 A_FireCustomMissile("ShotgunCasing",45+random(-4,4),0,0,0)
		TNT1 A 6 A_JumpIfNoAmmo(29)
		B2SR E 2					 // Reload
		B2SR F 2 A_PlaySound("Blood2Shotgun/Reload")
		B2SR GHIJK 2
		B2SG A 5
		B2SG A 3 A_ReFire
		Goto Ready2
		B2SG WX 2					 // Two shells left
		B2SG AAAAAA 0 A_CheckReload
		Goto Deselect2
		B2SG A 0					 // Used alt-fire after using primary fire once
		Goto Fire2+30
		B2SG W 2 A_GiveInventory("OneShellInRightGun",1)	  // Three shells left
		B2SG X 2 A_ReFire
		Goto Ready2
		B2SG A 0					 // One shell remaining in right gun
		Goto Fire2+79
		B2SG AAAAAA 0 A_CheckReload
		Goto Deselect2
		TNT1 A 0					 // One shell left
		Goto Fire2+12
		B2SG AAAAAAAA 0 A_CheckReload
		Goto Deselect2+3

	}
}


Actor SpentShellI : PuzzleItem
{
	-INVBAR
	Inventory.MaxAmount 1
	Inventory.Icon TNT1A0
	States
	{
	Spawn:
		TNT1 A 4
		Loop
	}
}

//--------------------------------------------------------------------

Actor FirstRound 		: Inventory {}
Actor ThreeShellsLeft 	: Inventory {}
Actor TwoShellsLeft 	: Inventory {}
Actor OneShellLeft 		: Inventory {}
Actor OneShellInRightGun: Inventory {}

Actor BloodShotgunToken : Inventory
{
	Inventory.MaxAmount 2
	Inventory.InterHubAmount 2
}

//==================================================================================
//==================================================================================

//==================================================================================
//==================================================================================

Actor AEoDCarbineItem : CustomInventory 6160
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL	+DONTGIB
	Scale 0.23
	Inventory.Amount 1
	Inventory.PickupMessage "You found a 9A-91 Carbine Rifle!"
	Inventory.PickupSound "weapons/stroggarmsaw/pickup"
	Scale 0.18
	States
	{
	Spawn:
		Q4MG F -1
		Loop
	Pickup:
		TNT1 A 0 A_JumpIfInventory("AEoDCarbine",1,"Ammo")
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",4) <= 0,"Nothing")
		TNT1 A 0 A_GiveInventory("Weapon4Count",1)
		TNT1 A 0 A_GiveInventory("CarbineDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDCarbine",1)
		TNT1 A 0 	
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDCarbine",1,"Ammo")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		TNT1 A 0 ACS_NamedExecute("s798",0,4,38,0)
		Fail
	Ammo:
		TNT1 A 0 A_GiveInventory("AEoDCarbine",1)
		Stop
	}
}

Actor AEoDCarbine : Weapon
{
	+FLOORCLIP
	+NOEXTREMEDEATH
	+INVENTORY.IGNORESKILL	+DONTGIB
	Weapon.AmmoType1 "AEClip"
	Weapon.AmmoType2 "AEClip"
	Weapon.AmmoGive1 20
	Weapon.AmmoUse1 1
	Weapon.AmmoUse2 1
	Weapon.SelectionOrder 10375
	Obituary "%o thought %g was safe from %k."
	Inventory.PickupMessage "You found a 9A-91 Carbine Rifle!"
	Inventory.PickupSound "weapons/stroggarmsaw/pickup"
	weapon.upsound "machinegun/select"
	Scale 0.18
	Tag "Carbine"
	States
	{
	Spawn:
		Q4MG F -1
		Loop
	Select:
		TNT1 A 0 //ACS_NamedExecute("s799",0,17,0,0)
		Q4MG A 1 A_Raise
		TNT1 AA 0 A_Raise
		Loop
	Deselect:
		TNT1 A 0 A_JumpIfInventory("MachinegunAutomatic", 1, "ZoomDeselect")
		TNT1 A 0 A_TakeInventory("MachinegunAutomatic",1)
		TNT1 A 0 //ACS_NamedExecute("s799",0,0,0,0)
		TNT1 A 0 A_StopSound(6)
		Q4MG A 1 A_Lower
		TNT1 AA 0 A_Lower
		Goto Deselect+3
	ZoomDeselect:
		TNT1 A 0 //ACS_NamedExecute("s799",0,0,0,0)
		TNT1 A 0 A_TakeInventory("MachinegunAutomatic",1)
		//Zoom Out
		TNT1 A 0 A_ZoomFactor(1.0)
		TNT1 A 0 A_PlaySound("machinegun/zoomout", 8, 1.0, 0)
		Q4MG A 5
		Goto Deselect+3
	Ready:
		TNT1 A 0 A_JumpIfInventory("MachinegunAutomatic", 1, "ZoomReady")
		TNT1 A 0 A_StopSound(6)
		Q4MG A 1 A_WeaponReady
		Goto Ready+2
	ZoomReady:
		TNT1 A 0 A_JumpIfTargetInLOS("ZoomReadyLockedOn")
		//TNT1 A 0 A_FireCustomMissile("LaserSightSpawner", 0, 0, 0, 4)
		TNT1 A 0 A_FireBullets(0,0,1,0,"LaserSight",0)
		R016 N 1 A_WeaponReady
		Goto Ready
	ZoomReadyLockedOn:
		//TNT1 A 0 A_FireCustomMissile("LaserSightSpawner", 0, 0, 0, 4)
		TNT1 A 0 A_FireBullets(0,0,1,0,"LaserSight",0)
		R016 O 1 A_WeaponReady
		Goto Ready
	Fire:
		TNT1 A 0 A_JumpIfInventory("MachinegunAutomatic", 1, "ZoomFire")
		TNT1 A 0 A_Light1
		TNT1 A 0 //ACS_NamedExecute("s851",0,12,random(-8,8),0)
		TNT1 A 0 A_FireCustomMissile("GunSmallSmokeSpawner",0,0,4,8)
		TNT1 A 0 A_FireCustomMissile("PistolCasingSpawnerInvertedLow",-30,0, 0,2)
		TNT1 A 0 A_PlaySound("machinegun/fire", CHAN_WEAPON, 1.0)
		Q4MG B 1 Bright A_FireBullets(2,2,1,13,"BulletDamagePuff",1)
		TNT1 A 0 A_Light0
		Q4MG BC 1 Bright //ACS_NamedExecute("s851",0,-6,0,0)
		Q4MG C 1
		Q4MG CC 1 A_ReFire
		Goto Ready
	ZoomFire:
		TNT1 A 0 A_JumpIfTargetInLOS("ZoomFireLockedOn")
		TNT1 A 0 A_Light1
		TNT1 A 0 //ACS_NamedExecute("s851",0,12,random(-8,8),0)
		TNT1 A 0 A_FireCustomMissile("GunSmallSmokeSpawner",0,0,4,8)
		TNT1 A 0 A_FireCustomMissile("PistolCasingSpawnerInvertedLow",-30,0, 0,2)
		TNT1 A 0 A_PlaySound("machinegun/fire", CHAN_WEAPON, 1.0)
		R016 N 1 Bright A_FireBullets(0,0,1,13,"BulletDamagePuff",1)
		TNT1 A 0 A_Light0
		R016 NN 1 Bright //ACS_NamedExecute("s851",0,-6,0,0) 
		R016 N 1
		R016 NN 1 A_ReFire
		Goto Ready
	ZoomFireLockedOn:
		TNT1 A 0 A_Light1
		TNT1 A 0 //ACS_NamedExecute("s851",0,12,random(-8,8),0)
		TNT1 A 0 A_FireCustomMissile("GunSmallSmokeSpawner",0,0,4,8)
		TNT1 A 0 A_FireCustomMissile("PistolCasingSpawnerInvertedLow",-30,0, 0,2)
		TNT1 A 0 A_PlaySound("machinegun/fire", CHAN_WEAPON, 1.0)
		R016 O 1 Bright A_FireBullets(0,0,1,13,"BulletDamagePuff",1)
		TNT1 A 0 A_Light0
		R016 OO 1 Bright //ACS_NamedExecute("s851",0,-6,0,0) 
		R016 O 1
		R016 OO 1 A_ReFire
		Goto Ready	
	AltFire:  //scopes the weapon and fires on release
		//Zoom In
		TNT1 A 0 A_JumpIfInventory("MachinegunAutomatic", 1, "ZoomOut")
		Q4MG A 3
		TNT1 A 0 A_ZoomFactor(2.5)
		TNT1 A 0 A_PlaySound("machinegun/zoomin", 8, 1.0, 0)
		TNT1 A 0 A_GiveInventory("MachinegunAutomatic",1)
		TNT1 A 0 A_GiveInventory("Aiming",1)
		R016 N 9
		//TNT1 A 0 A_PlaySound("reilsss/weapons/sniperzoomidle", 6, 0.6, 1)	
		Goto Ready
	ZoomOut:
		//Zoom Out
		TNT1 A 0 A_ZoomFactor(1.0)
		TNT1 A 0 A_StopSound(6)
		TNT1 A 0 A_PlaySound("machinegun/zoomout", 8, 1.0, 0)
		TNT1 A 0 A_TakeInventory("MachinegunAutomatic",1)
		TNT1 A 0 A_FireCustomMissile("GunSmallSmokeSpawner",0,0,6,7)
		Q4MG A 12
		Goto Ready
	}
}

Actor MachinegunAutomatic : Inventory { Inventory.Amount 0 }

Actor CarbineDrop : CustomInventory
{
	States
	{
	Use:
		TNT1 AA 0 A_SpawnItemEx("DroppedCarbine",0,0,32,8,0,0,0,SXF_NOCHECKPOSITION,0)
		Stop
	}
}

Actor DroppedCarbine
{
	Radius 16
	Height 20
	Scale 0.18
	States
	{
	Spawn:
		Q4MG F 15
		TNT1 A 0 A_SpawnItemEx("AEoDCarbineNoAmmo",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER,0)
		Stop
	}
}

Actor AEoDCarbineNoAmmo : AEoDCarbineItem
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL	+DONTGIB
	Inventory.Amount 1
	Scale 0.18
	Inventory.PickupMessage "You found a 9A-91 Carbine Rifle!"
	Inventory.PickupSound "weapons/stroggarmsaw/pickup"
	States
	{
	Spawn:
		Q4MG F -1
		Loop
	Pickup:
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",4) <= 0,"Nothing")
		TNT1 A 0 A_JumpIfInventory("AEClip",20,"Ammo")
		TNT1 A 0 A_GiveInventory("Weapon4Count",1)
		TNT1 A 0 A_GiveInventory("CarbineDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDCarbine",1)
		TNT1 A 0 A_TakeInventory("AEClip",20)
		TNT1 A 0 	
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDCarbine",1,"Ammo")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		TNT1 A 0 ACS_NamedExecute("s798",0,4,38,0)
		Fail
	Ammo:
		TNT1 A 0 A_TakeInventory("AEClip",20)
		TNT1 A 0 A_JumpIfInventory("AEoDCarbine",1,2)
		TNT1 A 0 A_GiveInventory("Weapon4Count",1)
		TNT1 A 0 A_GiveInventory("CarbineDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDCarbine",1)
		Stop
	}
}


//=====================================================================================
//=====================================================================================
//	BoltGun
// A crossbow like thing. Yeah. Alt fire uses one grenade only since each ball is quite
// though they can hurt you.
// Slot 4 (shotgun like)
//=====================================================================================
//=====================================================================================
Actor AEoDBoltGunItem : CustomInventory
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL	+DONTGIB
	Scale 0.2
	Inventory.Amount 1
	Inventory.PickupMessage "You bagged the Bolt Gun! Show'em how it's done!"
	Inventory.PickupSound "painkiller/weapon/boltgun/PickWeapon"
	States
	{
	Spawn:
		D004 Z -1
		Loop
	Pickup:
		TNT1 A 0 A_JumpIfInventory("AEoDBoltGun",1,"Ammo")
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",4) <= 0,"Nothing")
		TNT1 A 0 A_GiveInventory("Weapon4Count",1)
		TNT1 A 0 A_GiveInventory("BoltGunDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDBoltGun",1)
		TNT1 A 0 	
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDBoltGun",1,"Ammo")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		TNT1 A 0 ACS_NamedExecute("s798",0,4,45,0)
		Fail
	Ammo:
		TNT1 A 0 A_GiveInventory("AEoDBoltGun",1)
		Stop
	}
}

Actor BoltGunDrop : CustomInventory
{
	States
	{
	Use:
		TNT1 AA 0 A_SpawnItemEx("DroppedBoltGun",0,0,32,8,0,0,0,SXF_NOCHECKPOSITION,0)
		Stop
	}
}


Actor DroppedBoltGun
{
	Radius 16
	Height 20
	Scale 0.2
	States
	{
	Spawn:
		D004 Z 15
		TNT1 A 0 A_SpawnItemEx("AEoDBoltGunNoAmmo",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER,0)
		Stop
	}
}

Actor AEoDBoltGunNoAmmo : AEoDBoltGunItem
{
	+INVENTORY.IGNORESKILL	+DONTGIB
	States
	{
	Spawn:
		D004 Z -1
		Loop
	Pickup:
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",4) <= 0,"Nothing")
		TNT1 A 0 A_JumpIfInventory("AENails",30,"Ammo")
		TNT1 A 0 A_JumpIfInventory("AEGrenade",5,"Ammo3")
		TNT1 A 0 A_GiveInventory("Weapon4Count",1)
		TNT1 A 0 A_GiveInventory("BoltGunDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDBoltGun",1)
		TNT1 A 0 A_TakeInventory("AENails",30)
		TNT1 A 0 A_TakeInventory("AEGrenade",5)
		TNT1 A 0 	
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDBoltGun",1,"Ammo")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		TNT1 A 0 ACS_NamedExecute("s798",0,4,45,0)
		Fail
	Ammo:
		TNT1 A 0 A_JumpIfInventory("AEGrenade",5,1)
		Goto Ammo2
		TNT1 A 0 A_TakeInventory("AENails",30)
		TNT1 A 0 A_TakeInventory("AEGrenade",5)
		TNT1 A 0 A_JumpIfInventory("AEoDBoltGun",1,2)
		TNT1 A 0 A_GiveInventory("Weapon4Count",1)
		TNT1 A 0 A_GiveInventory("BoltGunDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDBoltGun",1)
		Stop
	Ammo2:
		TNT1 A 0 A_TakeInventory("AENails",30)
		TNT1 A 0 A_GiveInventory("Weapon4Count",1)
		TNT1 A 0 A_GiveInventory("BoltGunDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDBoltGun",1)
		TNT1 A 0 A_TakeInventory("AEGrenade",5)
		Stop
	Ammo3:
		TNT1 A 0 A_TakeInventory("AEGrenade",5)
		TNT1 A 0 A_GiveInventory("Weapon4Count",1)
		TNT1 A 0 A_GiveInventory("BoltGunDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDBoltGun",1)
		TNT1 A 0 A_TakeInventory("AENails",30)
		Stop
	}
}









Actor AEoDBoltGun : Weapon
{
	Scale 0.2
	Weapon.AmmoType "AENails"
	Weapon.AmmoUse 5
	Weapon.AmmoGive 30
	Weapon.AmmoType2 "AEGrenade"
	Weapon.AmmoUse2 1
	Weapon.AmmoGive2 5
	Weapon.SelectionOrder 11750
	Inventory.PickupSound "painkiller/weapon/boltgun/PickWeapon"
	weapon.upsound "weapons/draw"
	Inventory.PickupMessage "You bagged the Bolt Gun! Show'em how it's done!"
	Tag "Boltgun"
	States
	{
	Spawn:
		D004 Z -1
		Stop
	Ready:
		D004 N 1 A_WeaponReady
		Loop
	Deselect:
		TNT1 A 0 	
		D004 N 1 A_Lower
		TNT1 AA 0 A_Lower
		Loop
	Select:
		TNT1 A 0 	
		D004 N 1 A_Raise
		TNT1 AA 0 A_Raise
		Loop
	Fire:
		D004 A 0 A_PlaySound("painkiller/weapon/boltgun/ShootBolt",5)
		D004 A 4 A_FireCustomMissile("BoltGunBolt",0,1,6,2)
		TNT1 A 0 A_Recoil(0.6)
		D004 B 0 A_PlaySound("painkiller/weapon/boltgun/ShootBolt",6)
		D004 B 0 A_FireCustomMissile("BoltGunBolt",0,0,5,1)
		D004 B 4 A_FireCustomMissile("BoltGunBolt",0,0,7,1)
		TNT1 A 0 A_Recoil(0.6)
		D004 C 0 A_PlaySound("painkiller/weapon/boltgun/ShootBolt",5)
		D004 C 0 A_FireCustomMissile("BoltGunBolt",0,0,8,0)
		D004 C 4 A_FireCustomMissile("BoltGunBolt",0,0,4,0)
		TNT1 A 0 A_Recoil(0.6)
		TNT1 A 0 A_PlaySound("painkiller/weapon/boltgun/ReloadAfterBolt",6)
		D004 DEFGHHHIJKLM 3
		Goto Ready
	AltFire:
		TNT1 A 0 A_PlayWeaponSound("painkiller/weapon/boltgun/GrenadeLaunch")
		TNT1 A 0 A_FireCustomMissile("BouncingGren",frandom(5,-5),1,6)
		TNT1 AAAAAAA 0 A_FireCustomMissile("BouncingGren",frandom(5,-5),0,6)
		TNT1 A 0 A_SetPitch(pitch-4.8)
		D004 O 4
		D004 PPPQQQ 2 A_SetPitch(pitch+0.8)
		D004 RS 6
		Goto Ready
	}
}

//*******************************************************************
Actor BoltGunBolt : FastProjectile
{
	Projectile
	Speed 40
	SeeSound ""
	DeathSound ""
	Radius 4
	Height 7
	Damage 9
	+BLOODSPLATTER
	MissileType "BoltTrail"
	//DamageType "AEBullet" //removed because is kinda piercing weapon
	MissileHeight 8
	States
	{
	Spawn:
		D004 U 1
		Loop
	XDeath:
	Crash:
		TNT1 A 1 
		Stop
	Death:
		D004 U 100
		D004 U 1 A_FadeOut
		Wait
	}
}

Actor BoltTrail
{
	+NOINTERACTION
	Scale 0.07
	RenderStyle Translucent
	Alpha 0.7
	States
	{
	Spawn:
		FX04 D 1 Bright A_FadeOut(0.09)
		Wait
	}
}


//*******************************************************************
Actor BouncingGren
{
	Projectile
	Speed 12
	Damage 0
	Radius 8
	Height 12
	-NOGRAVITY
	+EXTREMEDEATH
	+CANBOUNCEWATER
	Gravity 0.3
	BounceType "Doom"
	BounceSound "painkiller/weapon/boltgun/GrenadeBounce"
	SeeSound ""
	DeathSound "painkiller/weapon/boltgun/GrenExplo"
	Scale 0.3
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 ThrustThingZ(0,random(1,6),0,1)
		D004 T 1 A_SpawnItemEx("StakeTrail",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		Wait
	Death:
		TNT1 A 0 A_Explode(40,40)
		TNT1 A 3 A_SpawnItemEx("NewExplosionSmallLittleBigger",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		Stop
	}
}





//=====================================================================================
//=====================================================================================
// Shotgun
// Primary should be the same as a regular SSG.
// Secondary fires a couple freezing sparkling projectiles that deal a lot of damage.
// Slot 4 (SSG)
//=====================================================================================
//=====================================================================================

Actor AEoDPKShotgunItem : CustomInventory 
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL	+DONTGIB
	Scale 0.2
	Inventory.Amount 1
	Inventory.PickupMessage "You picked a PK shotgun. It feels like it has some kick!"
	//Inventory.PickupSound "weapons/stroggarmsaw/pickup"
	Inventory.PickupSound "painkiller/weapon/shotgun/PickWeapon"
	States
	{
	Spawn:
		D009 Z -1
		Loop
	Pickup:
		TNT1 A 0 A_JumpIfInventory("AEoDPKShotgun",1,"Ammo")
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",4) <= 0,"Nothing")
		TNT1 A 0 A_GiveInventory("Weapon4Count",1)
		TNT1 A 0 A_GiveInventory("PKShotgunDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDPKShotgun",1)
		TNT1 A 0 
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDPKShotgun",1,"Ammo")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		TNT1 A 0 ACS_NamedExecute("s798",0,4,47,0)	//prints slot "4" full
		Fail
	Ammo:
		TNT1 A 0 A_GiveInventory("AEoDPKShotgun",1)
		Stop
	}
}

Actor PKShotgunDrop : CustomInventory
{
	States
	{
	Use:
		TNT1 AA 0 A_SpawnItemEx("DroppedPKShotgun",0,0,32,8,0,0,0,SXF_NOCHECKPOSITION,0)
		Stop
	}
}


Actor DroppedPKShotgun
{
	Radius 16
	Height 20
	Scale 0.2
	States
	{
	Spawn:
		D009 Z 15
		TNT1 A 0 A_SpawnItemEx("AEoDPKShotgunNoAmmo",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER,0)
		Stop
	}
}

Actor AEoDPKShotgunNoAmmo : AEoDPKShotgunItem
{
	+INVENTORY.IGNORESKILL	+DONTGIB
	States
	{
	Spawn:
		D009 Z -1
		Loop
	Pickup:
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",4) <= 0,"Nothing")
		TNT1 A 0 A_JumpIfInventory("AEShell",20,"Ammo")
		TNT1 A 0 A_JumpIfInventory("PlasmaRod",40,"Ammo3")
		TNT1 A 0 A_GiveInventory("Weapon4Count",1)
		TNT1 A 0 A_GiveInventory("PKShotgunDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDPKShotgun",1)
		TNT1 A 0 A_TakeInventory("AEShell",20)
		TNT1 A 0 A_TakeInventory("PlasmaRod",40)
		TNT1 A 0 	
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDPKShotgun",1,"Ammo")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		TNT1 A 0 ACS_NamedExecute("s798",0,4,47,0)
		Fail
	Ammo:
		TNT1 A 0 A_JumpIfInventory("PlasmaRod",40,1)
		Goto Ammo2
		TNT1 A 0 A_TakeInventory("AEShell",20)
		TNT1 A 0 A_TakeInventory("PlasmaRod",40)
		TNT1 A 0 A_JumpIfInventory("AEoDPKShotgun",1,2)
		TNT1 A 0 A_GiveInventory("Weapon4Count",1)
		TNT1 A 0 A_GiveInventory("PKShotgunDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDPKShotgun",1)
		Stop
	Ammo2:
		TNT1 A 0 A_TakeInventory("AEShell",20)
		TNT1 A 0 A_GiveInventory("Weapon4Count",1)
		TNT1 A 0 A_GiveInventory("PKShotgunDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDPKShotgun",1)
		TNT1 A 0 A_TakeInventory("PlasmaRod",40)
		Stop
	Ammo3:
		TNT1 A 0 A_TakeInventory("PlasmaRod",40)
		TNT1 A 0 A_GiveInventory("Weapon4Count",1)
		TNT1 A 0 A_GiveInventory("PKShotgunDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDPKShotgun",1)
		TNT1 A 0 A_TakeInventory("AEShell",20)
		Stop
	}
}



Actor AEoDPKShotgun : Weapon
{
	Weapon.AmmoType "AEShell"
	Weapon.AmmoUse 2
	Weapon.AmmoGive 20
	Weapon.AmmoType2 "PlasmaRod"
	Weapon.AmmoUse2 5
	Weapon.AmmoGive2 40
	Weapon.KickBack 20
	Weapon.SelectionOrder 7750
	Scale 0.2
	Inventory.PickupSound "painkiller/weapon/shotgun/PickWeapon"
	weapon.upsound "weapons/draw"
	Inventory.PickupMessage "You picked a PK shotgun. It feels like it has some kick!"
	Tag "PK shotgun"
	States
	{
	Spawn:
		D009 Z -1
		Stop
	Ready:
		D009 F 1 A_WeaponReady
		Loop
	Deselect:
		TNT1 A 0 	
		D009 F 1 A_Lower
		TNT1 AA 0 A_Lower
		Loop
	Select:
		TNT1 A 0 	
		D009 F 1 A_Raise
		TNT1 AA 0 A_Raise
		Loop
	Fire:
		D009 A 0 A_PlaySound("painkiller/weapon/shotgun/BulletShoot",6)
		D009 A 0 A_FireBullets(8,8,24,6,"BulletDamagePuff")
		//D009 A 0 A_FireBullets(8,8,24,6,"BDPuff2")
		//D009 A 0 A_FireBullets(8,8,24,0,"PKSPuff") //DO NOT modify the damage here! Modify the PKSPuff below!
		D009 A 2 BRIGHT A_SetPitch(pitch-2.5)
		D009 ABBB 1 A_SetPitch(pitch+0.5)
		TNT1 A 0 A_FireCustomMissile("ShotgunCasingSpawner",-55,0, 0,0)
		TNT1 A 0 A_FireCustomMissile("ShotgunCasingSpawner",-55,0, 4,0)
		D009 B 1 A_SetPitch(pitch+0.5)
		D009 CDDE 2 
		D009 E 3
		D009 F 4
		Goto Ready
	AltFire:
		TNT1 A 0 A_PlaySound("painkiller/weapon/shotgun/FreezeShoot",6)
		TNT1 A 0 A_FireCustomMissile("MuzzleFlashBlue",0,0,3,5)
		TNT1 A 0 A_FireCustomMissile("ShotgunFreezer",0,1,9)
		TNT1 A 0 A_FireCustomMissile("ShotgunFreezer",0,1,3)
		D009 G 3 A_SetPitch(pitch-5)
		D009 HHHHHHIIIIIIJJJJJJKK 1 A_SetPitch(pitch+0.25)
		D009 K 3
		D009 LFFF 5
		Goto Ready
	}
}

Actor PKSPuff
{
	const int Dmg = 6;
	Projectile
	+NOINTERACTION
	+PUFFONACTORS
	+HITTRACER
	+PUFFGETSOWNER
	+NOTIMEFREEZE
	+EXTREMEDEATH
	VSpeed 0
	Speed 0
	Scale 0.2
	RenderStyle Add
	Damage 0
	DamageType "AEBullet"
	SeeSound ""
	States
	{
	Spawn:
		TNT1 A 0 NoDelay A_CheckSight("Simple")
		Goto Death
	Dmg:
		TNT1 A 0 A_JumpIfCloser(128,2)
		TNT1 A 0 A_ChangeFlag("EXTREMEDEATH",0)
		TNT1 A 0 A_DamageTracer(Dmg*random(1,3),"AEBullet",DMSS_AFFECTARMOR)
		Goto DeathCont
	Crash:
	Death:	//structure
		TNT1 A 0 A_CheckFlag("SHOOTABLE","Dmg",AAPTR_TRACER)
	DeathCont:
		TNT1 A 0 A_ChangeFlag("NOTIMEFREEZE",0)
		TNT1 A 0 A_JumpIf(z > floorz,2)
		TNT1 A 0 A_SpawnItemEx("PuffFloorSmoke",0,0,0,0,0,0,0,32)
		//If we have a tracer, skip the smoke spawning.
		TNT1 A 0 A_JumpIf(!IsPointerEqual(AAPTR_TRACER,AAPTR_NULL),2)
		TNT1 A 0 A_SpawnItemEx("PuffWallSmoke",0,0,0,0,0,0,0,32)
		TNT1 A 0 A_Jump(128,2)
		TNT1 A 0 A_PlaySound("postal2/weapons/bullet_hit_ricochet")
		TNT1 A 0 A_SpawnItemEx("Puff2FlareBig",0,0,0,0,0,0,0,32)
		TNT1 A 0 A_SpawnItemEx("Puff2Spark",2,0,0,frandom(3,9),0,frandom(-6,6),random(0,359),32)
		TNT1 AAA 0 A_SpawnItemEx("Puff2Spark",2,0,0,frandom(3,9),0,frandom(-6,6),random(0,359),32,128)
		TNT1 A 0 A_Jump(64,2)
		TNT1 A 1
		Stop
		TNT1 A 3 Light("Puff2Light")
		Stop
	
	XDeath:
		TNT1 A 0 A_CheckFlag("INVULNERABLE","Death",AAPTR_TRACER)
		TNT1 A 0 A_CheckFlag("NOBLOOD","Death",AAPTR_TRACER)
		TNT1 A 0 A_CheckFlag("DORMANT","Death",AAPTR_TRACER)
		TNT1 A 0 A_JumpIfCloser(128,2)
		TNT1 A 0 A_ChangeFlag("EXTREMEDEATH",0)
		TNT1 A 0 A_DamageTracer(Dmg*random(1,3),"AEBullet",DMSS_AFFECTARMOR)
	XEnd:
		TNT1 A 0 A_PlaySound("postal2/weapons/bullet_hitflesh",5,0.5)
		Stop
	Simple:
		TNT1 A 0 A_Jump(128,1)
		Stop
		TNT1 A 1 A_PlaySound("postal2/weapons/bullet_hit_ricochet")
		Stop
	}
}

Actor ShotgunFreezer
{
	Projectile
	Radius 5
	Height 9
	Speed 30
	Damage 22
	Scale 0.3
	+ICESHATTER
	RenderStyle Add
	DamageType "Ice"
	Translation "112:127=192:198"
	States
	{
	Spawn: 
		LPRJ ABCDEFGHIJKL 1 Bright A_SpawnItemEx("SSGFreezerShard1",0,0,0,frandom(0.5,4.0),0,frandom(0.5,4.0),random(0,359),SXF_NOCHECKPOSITION)
		Loop
	Death:
		TNT1 AAAAAAA 0 A_SpawnItemEx("SSGFreezerShard1",0,0,0,frandom(0.5,4.0),0,frandom(0.5,4.0),random(0,359),SXF_NOCHECKPOSITION)
		TNT1 AAAAAAA 0 A_SpawnItemEx("SSGFreezerShard2",0,0,0,frandom(0.5,4.0),0,frandom(0.5,4.0),random(0,359),SXF_NOCHECKPOSITION)
		TNT1 A 1 A_SpawnItemEx("SSGFreezerExplo",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		Stop
	}
}

Actor SSGFreezerExplo
{
	+NOINTERACTION
	RenderStyle Add
	Scale 0.1
	States
	{
	Spawn:
		LTRL A 1 
		LTRL A 1 A_SetScale(0.05)
		LTRL A 1 A_SetScale(0.1)
		LTRL A 1 A_SetScale(0.15)
		LTRL A 1 A_SetScale(0.2)
		LTRL A 1 A_SetScale(0.25)
		LTRL A 1 A_SetScale(0.3)
		LTRL A 1 A_SetScale(0.35)
		LTRL A 1 A_SetScale(0.4)
		LTRL A 1 A_SetScale(0.45)
		TNT1 A 0 A_FadeOut(0.1)
		LTRL A 1 A_SetScale(0.5)
		TNT1 A 0 A_FadeOut(0.1)
		LTRL A 1 A_SetScale(0.55)
		TNT1 A 0 A_FadeOut(0.1)
		LTRL A 1 A_SetScale(0.6)
		TNT1 A 0 A_FadeOut(0.1)
		LTRL A 1 A_SetScale(0.65)
		TNT1 A 0 A_FadeOut(0.1)
		LTRL A 1 A_SetScale(0.7)
		TNT1 A 0 A_FadeOut(0.1)
		LTRL A 1 A_SetScale(0.75)
		TNT1 A 0 A_FadeOut(0.1)
		LTRL A 1 A_SetScale(0.8)
		TNT1 A 0 A_FadeOut(0.1)
		LTRL A 1 A_SetScale(0.85)
		TNT1 A 0 A_FadeOut(0.1)
		LTRL A 1 A_SetScale(0.9)
		TNT1 A 0 A_FadeOut(0.1)
		LTRL A 1 A_SetScale(0.95)
		Stop
	}
}

Actor SSGFreezerShard1
{
	Projectile
	Radius 4
	Height 6
	Damage 2
	-NOGRAVITY
	+DONTSPLASH
	+ICESHATTER
	DamageType Ice
	Gravity 0.15
	Scale 0.2
	RenderStyle Add
	States
	{
	Spawn:
		SHRD ABC 3 Bright A_SpawnItemEx("MiniShardTrail",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		Loop
	Death:
		ICPR DEFGH 3 Bright
		Stop
	}
}
Actor MiniShardTrail
{
	+NOINTERACTION
	Scale 0.1
	RenderStyle Add
	States
	{
	Spawn:
		ICPR D 2 Bright A_FadeOut
		Wait
	}
}

Actor SSGFreezerShard2 : SSGFreezerShard1 { DamageType "Ice" }




//==============================================================================
//==============================================================================
//									Gas Launcher
//==============================================================================
//==============================================================================
Actor AEoDGasLauncherItem : CustomInventory 
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL	+DONTGIB
	Scale 0.75
	Inventory.Amount 1
	Inventory.PickupMessage "You grabbed the Gas Rocket Launcher! Laugh until you drop!" 
	Inventory.PickupSound "reilsss/weappickup/SniperRifle"
	States
	{
	Spawn:
		M010 Z 1
		Loop
	Pickup:
		TNT1 A 0 A_JumpIfInventory("AEoDGasLauncher",1,"Ammo")
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",4) <= 0,"Nothing")
		TNT1 A 0 A_GiveInventory("Weapon4Count",1)
		TNT1 A 0 A_GiveInventory("GasLauncherDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDGasLauncher",1)
		TNT1 A 0 	
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDGasLauncher",1,"Ammo")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		TNT1 A 0 ACS_NamedExecute("s798",0,4,49,0)
		Fail
	Ammo:
		TNT1 A 0 A_GiveInventory("AEoDGasLauncher",1)
		Stop
	}
}


Actor GasLauncherDrop : CustomInventory
{
	States
	{
	Use:
		TNT1 A 0
		TNT1 A 0 A_SpawnItemEx("DroppedGasLauncher",0,0,32,8,0,0,0,SXF_NOCHECKPOSITION,0)
		Stop
	}
}

Actor DroppedGasLauncher
{
	Radius 16
	Height 20
	Scale 0.75
	States
	{
	Spawn:
		M010 Z 15
		TNT1 A 0 A_SpawnItemEx("AEoDGasLauncherNoAmmo",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER,0)
		Stop
	}
}


Actor AEoDGasLauncherNoAmmo : AEoDGasLauncherItem
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL	+DONTGIB
	Scale 0.75
	Inventory.PickupMessage "You grabbed the Gas Rocket Launcher! Laugh until you drop!" 
	Inventory.PickupSound "reilsss/weappickup/SniperRifle"
	States
	{
	Spawn:
		M010 Z 1
		Loop
	Pickup:
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",4) <= 0,"Nothing")
		TNT1 A 0 A_JumpIfInventory("ASTF",20,"Ammo")
		TNT1 A 0 A_GiveInventory("Weapon4Count",1)
		TNT1 A 0 A_GiveInventory("GasLauncherDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDGasLauncher",1)
		TNT1 A 0 A_TakeInventory("ASTF",20)
		TNT1 A 0 	
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDGasLauncher",1,"Ammo")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		TNT1 A 0 ACS_NamedExecute("s798",0,4,49,0)
		Fail
	Ammo:
		TNT1 A 0 A_TakeInventory("ASTF",20)
		TNT1 A 0 A_JumpIfInventory("AEoDGasLauncher",1,2)
		TNT1 A 0 A_GiveInventory("Weapon4Count",1)
		TNT1 A 0 A_GiveInventory("GasLauncherDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDGasLauncher",1)
		Stop
	}
}







Actor AEoDGasLauncher : Weapon
{
	Inventory.PickupSound "misc/w_pkup" 
	Weapon.AmmoType "ASTF" 
	Weapon.AmmoType2 "ASTF"
	Weapon.AmmoGive 20 
	Weapon.AmmoUse 5
	Weapon.AmmoUse2 1
	Weapon.SelectionOrder 10450
	Inventory.PickupMessage "You grabbed the Gas Rocket Launcher! Laugh until you drop!" 
	Obituary "%o choked on %k's gas."
	Weapon.UpSound "weapons/draw"
	AttackSound "" 
	Tag "Gas Rocket Launcher"
	Scale 0.75
	States 
	{ 
	Spawn: 
		M010 Z -1 
		Loop 
	Ready: 
		M010 G 1 A_WeaponReady 
		Loop 
	Deselect: 
		TNT1 A 0 	
		M010 G 1 A_Lower 
		M010 GG 0 A_Lower
		Loop 
	 Select: 
		TNT1 A 0 	
		M010 D 1 A_Raise
		M010 DD 0 A_Raise
		Loop 
	Fire: 
		M010 A 0 A_FireCustomMissile("RevRocket2", 0, 1, 4, 1)
		M010 H 1 Offset(4,36) Bright A_SetPitch(pitch-2)
		M010 H 1 Offset(2,34) Bright A_SetPitch(pitch+1)
		M010 H 1 Offset(1,33) Bright A_SetPitch(pitch+0.5)
		M010 H 1 Offset(0,32) Bright A_SetPitch(pitch+0.5)
		M010 A 4 A_PlaySound("RRELOAD",CHAN_WEAPON,1,0)
		M010 BCDEFG 4
		Goto Ready 
	AltFire:
		M010 G 0 A_JumpIfInventory("PowerEconomizer",1,"AltFireSuccess")
		M010 G 0 A_JumpIfInventory("InfiniteAmmo",1,"AltFireSuccess")
		M010 G 0 A_JumpIfInventory("ASTF",1,1)
		Goto Ready
	AltFireSuccess:
		M010 G 2 A_PlaySound("RRELOAD",CHAN_WEAPON,1,0)
		M010 FEDCBA 2
		M010 H 0 A_PlaySound("REVRCK",7,1,0)
		M010 H 0 A_PlaySound("HISS",CHAN_WEAPON,1,1)
	AltFireLoop:		
		M010 H 1 Offset(4,36) Bright A_FireCustomMissile("HappyCloud3",frandom(-4.0,4.0),1,4,1,0,frandom(-4.0,4.0))
		M010 H 1 Offset(2,34) Bright A_FireCustomMissile("HappyCloud3",frandom(-4.0,4.0),0,4,1,0,frandom(-4.0,4.0))
		M010 H 1 Offset(1,33) Bright A_FireCustomMissile("HappyCloud3",frandom(-4.0,4.0),0,4,1,0,frandom(-4.0,4.0))
		M010 H 1 Offset(0,32) Bright A_FireCustomMissile("HappyCloud3",frandom(-4.0,4.0),0,4,1,0,frandom(-4.0,4.0))
		M010 HHHHHHHH 1 Bright A_FireCustomMissile("HappyCloud3",frandom(-4.0,4.0),0,4,0,0,frandom(-4.0,4.0))
		M010 H 0 A_ReFire("AltFireLoop")
		M010 H 0 A_StopSound(7)
		M010 H 0 A_PlaySound("RRELOAD",CHAN_WEAPON,1,0)
		M010 ABCDEF 2
		Goto Ready
	} 
}
Actor RevRocket
{
	Radius 8
	Height 6
	Speed 12
	Damage 5
	Scale .55
	+SEEKERMISSILE
	PROJECTILE
	SeeSound "REVRCK"
	DeathSound "EXPLODE"
	States
	{
	Spawn:
		X085 A 1 A_SeekerMissile (30,40)
		X085 A 1 A_CustomMissile("RevTrail",0, 0, 0)
		X085 A 1 A_PlaySound("HISS")
		X085 A 0 A_custommissile("ClownSpark", 8, 0, random(-180, 180), 2, random(-180, 180))
		X085 A 1 A_CustomMissile("RevTrail", 0, 0, 0, 1)  
		X085 A 1 A_CustomMissile("RevTrail", 0, 0, 0, 1)
		X085 A 0 A_custommissile("ClownSpark", 8, 0, random(-180, 180), 2, random(-180, 180))
		X085 A 1 A_CustomMissile("RevTrail", 0, 0, 0, 1)  
		X085 A 1 A_CustomMissile("RevTrail", 0, 0, 0, 1) 
		X085 A 0 A_custommissile("ClownSpark", 8, 0, random(-180, 180), 2, random(-180, 180))
		X085 A 1 A_CustomMissile("RevTrail", 0, 0, 0, 1)  
		X085 A 1 A_CustomMissile("RevTrail", 0, 0, 0, 1)  
		X085 A 1 A_CustomMissile("RevTrail", 0, 0, 0, 1)
		X085 A 0 A_custommissile("ClownSpark", 8, 0, random(-180, 180), 2, random(-180, 180))
		X085 A 1 A_CustomMissile("RevTrail", 0, 0, 0, 1)
		X085 A 0 A_custommissile("ClownSpark", 8, 0, random(-180, 180), 2, random(-180, 180))
		X085 A 1 A_CustomMissile("RevTrail", 0, 0, 0, 1)  
		Loop
	Death:
		X129 B 0 Bright A_Explode(12,96,0)
		X129 B 0 Bright A_CustomMissile(HappyCloud, 16, 8, 135,6) 
		X129 BBBBBBB 0 A_CustomMissile("Sparkles", 4,4, random(-180, 180), 2, random(-180, 180))
		X129 B 0 Bright A_CustomMissile(HappyCloud, 12, 0, 90,6) 
		X129 B 0 Bright A_CustomMissile(HappyCloud, 16, -8, -135,6) 
		X129 C 0 Bright A_CustomMissile(HappyCloud, 16, 0, -200,6) 
		X129 CCCCCCC 0 A_CustomMissile("Sparkles", 4, 4, random(-180, 180), 2, random(-180, 180))
		X129 D 0 Bright A_CustomMissile(HappyCloud, 18, 0, 45,6) 
		X129 E 0 Bright A_CustomMissile(HappyCloud, 16, 8, 300,6) 
		X129 E 0 Bright A_CustomMissile(HappyCloud, 16, 0, 200,6)
		X129 EEEEEEE 0 A_CustomMissile("Sparkles", 4, 4, random(-180, 180), 2, random(-180, 180))
		X129 F 0 Bright A_CustomMissile(HappyCloud, 22, -8, 315,6) 
		X129 G 0 Bright A_CustomMissile(HappyCloud, 16, 0, 270,6) 
		X129 G 0 Bright A_CustomMissile(HappyCloud, 12, 8, 180,6) 
		X129 AABBCCDDEEFFGGHH 2 bright
		Stop
	}
}
Actor RevRocket2 : RevRocket
{
	Speed 18
	Damage 20
	+NODAMAGETHRUST +CANNOTPUSH
	+FORCERADIUSDMG
	+DONTREFLECT
	DamageType "AEPoison"
	States
	{
	Spawn:
		X085 A 0
		X085 A 0 A_PlaySound("HISS",CHAN_BODY,1,1)
	Movement:
		X085 A 1 A_SeekerMissile (4,10,SMF_LOOK,256)
		X085 A 1 A_CustomMissile("RevTrail",0, 0, 0)
		X085 A 0 A_custommissile("ClownSpark", 8, 0, random(-180, 180), 2, random(-180, 180))
		Loop
	Death:
		X129 A 0 A_StopSound(CHAN_BODY)
		X129 B 0 Bright A_Explode(150,96,0)
		X129 BB 0 A_SpawnItemEx("HappyCloud2",0,0,0,3,0,0,135+random(-30,30),SXF_NOCHECKPOSITION)
		X129 BBBBBBB 0 A_CustomMissile("Sparkles", 4,4, random(-180,180), 2, random(-180, 180))
		X129 BB 0 Bright A_SpawnItemEx("HappyCloud2",0,0,0,3,0,0,90+random(-30,30),SXF_NOCHECKPOSITION)
		X129 BB 0 Bright A_SpawnItemEx("HappyCloud2",0,0,0,3,0,0,-135+random(-30,30),SXF_NOCHECKPOSITION)
		X129 CC 0 Bright A_SpawnItemEx("HappyCloud2",0,0,0,3,0,0,-200+random(-30,30),SXF_NOCHECKPOSITION)
		X129 CCCCCCC 0 A_CustomMissile("Sparkles", 4, 4, random(-180,180), 2, random(-180, 180))
		X129 DD 0 Bright A_SpawnItemEx("HappyCloud2",0,0,0,3,0,0,45+random(-30,30),SXF_NOCHECKPOSITION) 
		X129 EE 0 Bright A_SpawnItemEx("HappyCloud2",0,0,0,3,0,0,300+random(-30,30),SXF_NOCHECKPOSITION)
		X129 EE 0 Bright A_SpawnItemEx("HappyCloud2",0,0,0,3,0,0,200+random(-30,30),SXF_NOCHECKPOSITION)
		X129 EEEEEEE 0 A_CustomMissile("Sparkles", 4, 4, random(-180,180), 2, random(-180, 180))
		X129 FF 0 Bright A_SpawnItemEx("HappyCloud2",0,0,0,3,0,0,315+random(-30,30),SXF_NOCHECKPOSITION)
		X129 GG 0 Bright A_SpawnItemEx("HappyCloud2",0,0,0,3,0,0,270+random(-30,30),SXF_NOCHECKPOSITION) 
		X129 GG 0 Bright A_SpawnItemEx("HappyCloud2",0,0,0,3,0,0,180+random(-30,30),SXF_NOCHECKPOSITION)
		X129 AABBCCDDEEFFGGHH 2 bright
		Stop
	Crash:
	XDeath:
		X129 A 0 A_StopSound(CHAN_BODY)
		X129 B 0 Bright A_Explode(150,96,0)
		X129 BB 0 A_SpawnItemEx("HappyCloud2",0,0,0,3,0,0,135+random(-30,30),SXF_NOCHECKPOSITION)
		X129 BBBBBBB 0 A_CustomMissile("Sparkles", 4,4, random(-180,180), 2, random(-180, 180))
		X129 BB 0 Bright A_SpawnItemEx("HappyCloud2",0,0,0,3,0,0,90+random(-30,30),SXF_NOCHECKPOSITION)
		X129 BB 0 Bright A_SpawnItemEx("HappyCloud2",0,0,0,3,0,0,-135+random(-30,30),SXF_NOCHECKPOSITION)
		X129 CC 0 Bright A_SpawnItemEx("HappyCloud2",0,0,0,3,0,0,-200+random(-30,30),SXF_NOCHECKPOSITION)
		X129 CCCCCCC 0 A_CustomMissile("Sparkles", 4, 4, random(-180,180), 2, random(-180, 180))
		X129 DD 0 Bright A_SpawnItemEx("HappyCloud2",0,0,0,3,0,0,45+random(-30,30),SXF_NOCHECKPOSITION) 
		X129 EE 0 Bright A_SpawnItemEx("HappyCloud2",0,0,0,3,0,0,300+random(-30,30),SXF_NOCHECKPOSITION)
		X129 EE 0 Bright A_SpawnItemEx("HappyCloud2",0,0,0,3,0,0,200+random(-30,30),SXF_NOCHECKPOSITION)
		X129 EEEEEEE 0 A_CustomMissile("Sparkles", 4, 4, random(-180,180), 2, random(-180, 180))
		X129 FF 0 Bright A_SpawnItemEx("HappyCloud2",0,0,0,3,0,0,315+random(-30,30),SXF_NOCHECKPOSITION)
		X129 GG 0 Bright A_SpawnItemEx("HappyCloud2",0,0,0,3,0,0,270+random(-30,30),SXF_NOCHECKPOSITION) 
		X129 GG 0 Bright A_SpawnItemEx("HappyCloud2",0,0,0,3,0,0,180+random(-30,30),SXF_NOCHECKPOSITION)
		X129 AABBCCDDEEFFGGHH 2 bright
		Stop
	}
}


Actor HappyCloud2
{
	var int user_count;
	Radius 8 
	Height 8 
	Speed 3 
	Damage (random(1,3))
	+BLOODLESSIMPACT
	+RIPPER
	RipperLevel 2
	+DONTREFLECT
	+NOEXTREMEDEATH
	BounceType "Doom"
	BounceCount 3
	BounceFactor 1
	WallBounceFactor 1
	DamageType "AEPoison"
	PROJECTILE  
	RenderStyle Translucent 
	Alpha 0.3
	Scale 0
	States 
	{ 
	Spawn: 
		X132 A 0
		X132 AAAAAAAAAAAAAAAAAA 1 A_SetScale((ScaleX+0.03))
	Moving:
		X132 AAA 1 A_SetScale((ScaleX+0.02))
		X132 AA 1 A_SetScale((ScaleX+0.01))
		X132 A 15
		X132 AA 1 A_SetScale((ScaleX-0.01))
		X132 AAA 1 A_SetScale((ScaleX-0.02))
		X132 AAAAAAAA 1 A_SetScale((ScaleX-0.03))
		X132 AAA 1 A_SetScale((ScaleX-0.02))
		X132 AA 1 A_SetScale((ScaleX-0.01))
		X132 A 15
		X132 AA 1 A_SetScale((ScaleX+0.01))
		X132 AAA 1 A_SetScale((ScaleX+0.02))
		X132 AAAAAAAA 1 A_SetScale((ScaleX+0.03))
		X132 A 0 A_SetUserVar("user_count",user_count+1)
		X132 A 0 A_JumpIf(user_count>=random(5,8),"End")
		Loop
	Death:
	End:
		X132 AAAAAAAAAA 1 A_SetScale((ScaleX-0.01))
		X132 AAAAA 1 A_SetScale((ScaleX-0.02))
	Shrink:
		X132 A 1 A_SetScale((ScaleX-0.04))
		X132 A 0 A_JumpIf(ScaleX<=(0.00),1)
		Loop
		TNT1 A 0
		Stop
	} 
}

Actor HappyCloud3
{
	var int user_count;
	Radius 8 
	Height 8 
	Speed 9 
	Damage (random(2,4))
	+BLOODLESSIMPACT
	+RIPPER
	RipperLevel 2
	+DONTREFLECT
	+NOEXTREMEDEATH
	BounceType "Doom"
	BounceCount 3
	BounceFactor 1
	WallBounceFactor 1
	DamageType "AEPoison"
	PROJECTILE  
	RenderStyle Translucent 
	Alpha 0.3
	Scale 0
	States 
	{ 
	Spawn: 
		X132 A 0
		X132 AAAAAAAAAAAAAAAAAA 1 A_SetScale((ScaleX+0.03))
	Moving:
		X132 AAA 1 A_SetScale((ScaleX+0.02))
		X132 AA 1 A_SetScale((ScaleX+0.01))
		X132 A 15
		X132 AA 1 A_SetScale((ScaleX-0.01))
		X132 AAA 1 A_SetScale((ScaleX-0.02))
		X132 AAAAAAAA 1 A_SetScale((ScaleX-0.03))
		X132 AAA 1 A_SetScale((ScaleX-0.02))
		X132 AA 1 A_SetScale((ScaleX-0.01))
		X132 A 15
		X132 AA 1 A_SetScale((ScaleX+0.01))
		X132 AAA 1 A_SetScale((ScaleX+0.02))
		X132 AAAAAAAA 1 A_SetScale((ScaleX+0.03))
		X132 A 0 A_SetUserVar("user_count",user_count+1)
		X132 A 0 A_JumpIf(user_count>=random(5,8),"End")
		Loop
	Death:
	End:
		X132 AAAAAAAAAA 1 A_SetScale((ScaleX-0.01))
		X132 AAAAA 1 A_SetScale((ScaleX-0.02))
	Shrink:
		X132 A 1 A_SetScale((ScaleX-0.04))
		X132 A 0 A_JumpIf(ScaleX<=(0.00),1)
		Loop
		TNT1 A 0
		Stop
	} 
}


//======================================================================================
//======================================================================================

//======================================================================================
//======================================================================================
Actor AEoDHeadHunterItem : CustomInventory
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL	+DONTGIB
	Inventory.Amount 1
	Inventory.PickupMessage "You picked up the Head hunter!"
	Inventory.PickupSound "weapons/mephistopickup"
	Scale 0.2
	States
	{
	Spawn:
		D016 Q -1
		Loop
	Pickup:
		TNT1 A 0 A_JumpIfInventory("AEoDHeadHunter",1,"Ammo")
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",4) <= 0,"Nothing")
		TNT1 A 0 A_GiveInventory("Weapon4Count",1)
		TNT1 A 0 A_GiveInventory("HeadHunterDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDHeadHunter",1)
		TNT1 A 0 	
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDHeadHunter",1,"Ammo")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		TNT1 A 0 ACS_NamedExecute("s798",0,4,51,0)
		Fail
	Ammo:
		TNT1 A 0 A_GiveInventory("AEoDHeadHunter",1)
		Stop
	}
}

Actor HeadHunterDrop : CustomInventory
{
	States
	{
	Use:
		TNT1 A 0
		TNT1 A 0 A_SpawnItemEx("DroppedHeadHunter",0,0,32,8,0,0,0,SXF_NOCHECKPOSITION,0)
		Stop
	}
}

Actor DroppedHeadHunter
{
	Radius 16
	Height 20
	Scale 0.2
	States
	{
	Spawn:
		D016 Q 15
		TNT1 A 0 A_SpawnItemEx("AEoDHeadHunterNoAmmo",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER,0)
		Stop
	}
}

Actor AEoDHeadHunterNoAmmo : AEoDHeadHunterItem
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL	+DONTGIB
	Inventory.Amount 1
	Inventory.PickupMessage "You picked up the Head hunter!"
	Inventory.PickupSound "weapons/mephistopickup"
	Scale 0.2
	States
	{
	Spawn:
		D016 Q -1
		Loop
	Pickup:
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",4) <= 0,"Nothing")
		TNT1 A 0 A_JumpIfInventory("AENails",40,"Ammo")
		TNT1 A 0 A_GiveInventory("Weapon4Count",1)
		TNT1 A 0 A_GiveInventory("HeadHunterDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDHeadHunter",1)
		TNT1 A 0 A_TakeInventory("AENails",40)
		TNT1 A 0 	
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDHeadHunter",1,"Ammo")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		TNT1 A 0 ACS_NamedExecute("s798",0,4,51,0)
		Fail
	Ammo:
		TNT1 A 0 A_TakeInventory("AENails",40)
		TNT1 A 0 A_JumpIfInventory("AEoDHeadHunter",1,2)
		TNT1 A 0 A_GiveInventory("Weapon4Count",1)
		TNT1 A 0 A_GiveInventory("HeadHunterDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDHeadHunter",1)
		Stop
	}
}



Actor AEoDHeadHunter : weapon
{
	+WEAPON.CHEATNOTWEAPON
	+INVENTORY.IGNORESKILL	+DONTGIB
	Inventory.PickupMessage "You picked up the Head hunter!"
	Inventory.PickupSound "weapons/mephistopickup"
	Weapon.upsound "weapons/draw"
	Weapon.Kickback 400
	Weapon.AmmoType1 "AENails"
	Weapon.AmmoUse1 20
	Weapon.AmmoGive1 40
	Weapon.SelectionOrder 15950
	Tag "Head Hunter"
	+WEAPON.AMMO_OPTIONAL
	+WEAPON.NOALERT
	+WEAPON.NOAUTOFIRE
	Scale 0.2
	States
	{
	Spawn: 
		D016 Q 10
		Loop
	Ready:
		D016 A 4 A_WeaponReady
		Loop
	Select:
		D016 A 0 	
		D016 A 1 A_Raise
		D016 AA 0 A_Raise
		Loop
	Deselect:
		D016 A 0 	
		D016 A 1 A_Lower
		D016 AA 0 A_Lower
		Loop
	Fire:
		TNT1 A 0 A_JumpIfInventory("cammin",1,"DetonateBullet")		// if so, "fire" was pressed while in bullet time
		TNT1 A 0 A_JumpIfInventory("HHZoomToken",1,"FireZoomed")		// if so, "fire" was while zoomed in, therefore, bullet time occurs
		TNT1 A 0 A_JumpIfInventory("AENails",20,"FireSuccesful")		// Makes sure there's enough ammo for primary
		D016 A 5 A_WeaponReady(WRF_NOSWITCH|WRF_NOFIRE)				// if the condition above wasnt met, it lies here for a few tics doing nothing
		Goto Ready
	FireSuccesful:
		TNT1 A 0 A_GunFlash
		TNT1 A 0 A_AlertMonsters
		TNT1 A 0 A_PlaySound("BS/Headhunter/Fire",CHAN_WEAPON)
		TNT1 A 0 A_FireCustomMissile("HHBulletPrimary",0,1,8)
		TNT1 A 0 A_SetPitch(pitch-8)
		TNT1 AAA 0 A_FireCustomMissile("GunSmokeSpawner",0,0,random(3,5),8)
		D016 LMNOP 1 Bright	
		D016 CCCCCCDD 2 A_SetPitch(pitch+1)
		TNT1 A 0 A_FireCustomMissile("RevolverCasingSpawnerInverted",-30,0, 0,0)
		TNT1 A 0 A_PlaySound("BS/Headhunter/Gas",5)
		D016 EFGHIJK 4
		Goto Ready
	Flash:
		D016 B 5
		Stop
		
	FireZoomed:
		TNT1 A 0 A_JumpIfInventory("PowerEconomizer",1,"FireZoomedSuccesful")
		TNT1 A 0 A_JumpIfInventory("InfiniteAmmo",1,"FireZoomedSuccesful")
		TNT1 A 0 A_JumpIfInventory("AENails",40,"FireZoomedSuccesful")
		R016 N 5 
		Goto ReadyZoomed
	FireZoomedSuccesful:
		TNT1 A 0 SetPlayerProperty(0,1,PROP_FROZEN)
		TNT1 A 0 A_AlertMonsters
		R016 N 0 A_TakeInventory("HHZoomToken",1000)
		R016 A 0 A_ZoomFactor(1.0,1)	//restores the zoom since player will see from this point through the bullet
		TNT1 A 0 A_SetInvulnerable
		TNT1 A 0 A_JumpIfInventory("PowerEconomizer",1,3)
		TNT1 A 0 A_JumpIfInventory("InfiniteAmmo",1,2)
		TNT1 A 0 A_TakeInventory("AENails",20,1)
		R016 N 1 A_FireCustomMissile("HeadHunterBullet")
		TNT1 A 0 A_GiveInventory("HeadHunterTime",1)
		Goto Waiting
	Waiting:
		D016 A 1	//it needs this delay for the ACS to kick in when the thing is shot
		D016 A 1 A_JumpIfInventory("cammin",1,"KeepWaiting")	//if has this item, means the bullet is flying still
		//if it reaches this part is because the bullet died and player needs to be restored
		D016 A 0 SetPlayerProperty(0,0,PROP_FROZEN)
		D016 A 0 A_JumpIfInventory("PowerInvulBase",1,"Ready",AAPTR_PLAYER1)
		D016 A 0 A_JumpIfInventory("Invulnerability",1,"Ready",AAPTR_PLAYER1)
		D016 A 0 A_JumpIfInventory("PentagramIsOn",1,"Ready",AAPTR_PLAYER1)
		D016 A 0 A_UnSetInvulnerable
		D016 A 0
		Goto Ready		
	KeepWaiting:
		D016 A 1 A_WeaponReady(WRF_NOSWITCH|WRF_NOSECONDARY)
		Goto Waiting+1
		
	DetonateBullet:
		D016 A 70 ACS_NamedExecute("s963",0,0,0,0)
		Goto Waiting+2
		
		
	AltFire:
		TNT1 A 0 A_JumpIfInventory("HHZoomToken",1,"Dezoom")
		TNT1 A 0 A_PlaySound("BS/Headhunter/ZoomIn",5)
		D016 A 1 A_GiveInventory("HHZoomToken",1)
		R016 N 1 A_ZoomFactor(5.0)
		Goto ReadyZoomed
	ReadyZoomed:
		R016 N 1 A_WeaponReady
		Loop
	Dezoom:
		D016 A 0 A_PlaySound("BS/Headhunter/ZoomOut",5)
		D016 A 0 A_TakeInventory("HHZoomToken",1)
		D016 A 1 A_ZoomFactor(1.0,1)
		D016 A 1
		Goto Ready
	}
}

Actor HHZoomToken 	: Inventory {}
Actor DieToken 		: Inventory {}
Actor cammin 		: Inventory {}


Actor HHBulletPrimary : FastProjectile
{
	Projectile
	Speed 400
	Radius 2
	Height 2
	Damage 250
	+BLOODSPLATTER
	MissileType "AWPTrail"
	MissileHeight 8
	DamageType "AEBullet"
	Decal "BulletChip"
	States
	{
	Spawn:
		TRCR AA 1 Bright
		Loop
	XDeath:
		TNT1 A 10
		Stop
	Death:
		TNT1 A 10 A_SpawnItemEx("BulletPuff",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		Stop
	}
}

Actor PowerHeadHunterTimefreeze : PowerTimeFreezer
{
	Inventory.Icon "ARTRUN4H"
}

Actor HeadHunterTime : PowerupGiver
{
	Inventory.MaxAmount 0
	+INVENTORY.AUTOACTIVATE
	powerup.type "HeadHunterTimefreeze"
	powerup.duration 10000
	States
	{
	Spawn:
		TNT1 A -1
		Stop
	}
}

Actor HeadHunterBullet
{
	+NOTIMEFREEZE
	+EXTREMEDEATH
	Obituary "%o's head is gone thanks to %k's guided bullets."
	Radius 2
	Height 4
	Speed 10
	damage 0
	seesound ""
	deathsound ""
	PROJECTILE
	ReactionTime 560
	+SKYEXPLODE
	Decal "BulletChip"
	+FORCERADIUSDMG
	States
	{
	Spawn:
		TRCR A 0 
		TRCR A 0 A_PlaySound("BS/Headhunter/BulletTimeInit",5|CHAN_NOPAUSE,1,0,ATTN_NONE)
		TRCR A 0 A_PlaySound("BS/Headhunter/BulletTimeLoop",6|CHAN_NOPAUSE,0.6,1,ATTN_NONE)
		TRCR A 0 Bright acs_Namedexecute ("s962", 0, 0, 0, 0)
		TRCR A 1 Bright acs_Namedexecute ("s960", 0, 0, 0, 0)
	Looper:
		TNT1 A 0 A_JumpIfInventory("DieToken",1,"DieTime")
		TRCR A 1 Bright A_CountDown
		Loop
	DieTime:
		TNT1 A 0 A_Die
		TNT1 A 0 A_PlaySound("BS/Headhunter/BulletExplode1",5|CHAN_NOPAUSE,1,0,ATTN_NONE)
		TNT1 A 0 A_ChangeFlag("Missile",0)
		TNT1 A 0 A_ChangeFlag("NOGRAVITY",1)
		Goto Death
	Death:
		TNT1 A 0 A_PlaySound("BS/Headhunter/BulletExplode1",5|CHAN_NOPAUSE,1,0,ATTN_NONE)
		TRCR A 0 Bright ACS_NamedTerminate ("s962",0)		//end the black screen effect
		TRCR A 0 Bright acs_Namedexecute ("s964", 0, 0, 0, 0)	//fov back to 90 in the camera
		TNT1 A 0 A_StopSound(6)
		//TNT1 A 0 A_CheckFloor("MoveUp")
		TNT1 A 0 A_TakeInventory("PowerHeadHunterTimefreeze",1,0,AAPTR_PLAYER1)
		TNT1 A 0 Bright acs_Namedexecute ("s961", 0, 0, 0, 0)	//to set the ACS var flyin to 0, which means the bullet died
		TNT1 A 0 A_Recoil((cos(pitch)*50))
		TNT1 A 0 A_ChangeVelocity(0,0,(sin(pitch)*50),1)
		TNT1 A 0 A_Explode(random(1,8)*100,128)
		TNT1 A 0 A_Explode(256,256)
		TNT1 A 10 A_SpawnItemEx("NewExplosionMediumConcentrated",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		TNT1 A 60 A_Stop
		Stop
	MoveUp:
		TNT1 A 0 ThrustThingZ(0,20,0,1)
		Goto Death+5
	}
}





//==============================================================================
//==============================================================================
//							The Righteous Bison Pistol
//==============================================================================
//==============================================================================
Actor AEoDBisonItem : CustomInventory
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL	+DONTGIB
	Inventory.Amount 1
	Inventory.PickupMessage "You bagged the Righteous Bison! Make them jealous!"
	Inventory.PickupSound "weapons/mephistopickup"
	Scale 0.25
	States
	{
	Spawn:
		M007 Z -1
		Loop
	Pickup:
		TNT1 A 0 A_JumpIfInventory("AEoDBison",1,"Ammo")
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",4) <= 0,"Nothing")
		TNT1 A 0 A_GiveInventory("Weapon4Count",1)
		TNT1 A 0 A_GiveInventory("BisonDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDBison",1)
		TNT1 A 0 	
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDBison",1,"Ammo")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		TNT1 A 0 ACS_NamedExecute("s798",0,4,50,0)
		Fail
	Ammo:
		TNT1 A 0 A_GiveInventory("AEoDBison",1)
		Stop
	}
}

Actor BisonDrop : CustomInventory
{
	Inventory.MaxAmount 1
	States
	{
	Use:
		TNT1 A 0
		TNT1 A 0 A_SpawnItemEx("DroppedBison",0,0,32,8,0,0,0,SXF_NOCHECKPOSITION,0)
		Stop
	}
}

Actor DroppedBison
{
	Radius 16
	Height 20
	Scale 0.25
	States
	{
	Spawn:
		M007 Z 15
		TNT1 A 0 A_SpawnItemEx("AEoDBisonNoAmmo",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER,0)
		Stop
	}
}

Actor AEoDBisonNoAmmo : AEoDBisonItem
{
	+FLOORCLIP
	+INVENTORY.IGNORESKILL	+DONTGIB
	Inventory.Amount 1
	Inventory.PickupMessage "You bagged the Righteous Bison! Make them jealous!"
	Inventory.PickupSound "weapons/mephistopickup"
	Scale 0.25
	States
	{
	Spawn:
		M007 Z -1
		Loop
	Pickup:
		TNT1 A 0 A_JumpIf(CallACS("WeaponSlotLimitCheck",4) <= 0,"Nothing")
		TNT1 A 0 A_JumpIfInventory("AECell",25,"Ammo")
		TNT1 A 0 A_GiveInventory("Weapon4Count",1)
		TNT1 A 0 A_GiveInventory("BisonDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDBison",1)
		TNT1 A 0 A_TakeInventory("AECell",25)
		TNT1 A 0 	
		Stop
	Nothing:
		TNT1 A 0 A_JumpIfInventory("AEoDBison",1,"Ammo")
		TNT1 A 0 A_JumpIfInventory("LimitScriptActive",1,1)
		Goto Pickup+2
		TNT1 A 0 ACS_NamedExecute("s798",0,4,50,0)
		Fail
	Ammo:
		TNT1 A 0 A_TakeInventory("AECell",25)
		TNT1 A 0 A_JumpIfInventory("AEoDBison",1,2)
		TNT1 A 0 A_GiveInventory("Weapon4Count",1)
		TNT1 A 0 A_GiveInventory("BisonDrop",1)
		TNT1 A 0 A_GiveInventory("AEoDBison",1)
		Stop
	}
}

Actor AEoDBison : Weapon
{
	+WEAPON.AMMO_OPTIONAL
	Weapon.AmmoType1 "AECell"
	Weapon.AmmoUse1 15
	Weapon.AmmoGive1 25
	Weapon.SelectionOrder 8375
	Scale 0.25
	Inventory.PickupMessage "You bagged the Righteous Bison! Make them jealous!"
	Tag "Righteous Bison"
	Weapon.upsound "weapons/draw"
	States
	{
	Spawn:
		M007 Z 0
		M007 Z -1
		Stop
	Select:	
		TNT1 A 0 	
		M007 A 1 A_Raise
		M007 AA 0 A_Raise
		Loop
	Deselect:
		TNT1 A 0 	
		M007 A 1 A_Lower
		M007 AA 0 A_Lower
		Loop
	Ready:
		M007 A 0 A_JumpIfInventory("PowerEconomizer",1,"ReadyAmmo")
		M007 A 0 A_JumpIfInventory("InfiniteAmmo",1,"ReadyAmmo")
		M007 A 0 A_JumpIfInventory("AECell",15,"ReadyAmmo")
		Goto ReadyNoFire
	ReadyAmmo:
		M007 AA 1 A_WeaponReady
		Goto Ready
	ReadyNoFire:
		M007 AA 1 A_WeaponReady(WRF_NOFIRE)
		Goto Ready
	Fire:
		M007 A 0 A_JumpIfInventory("PowerEconomizer",1,"FireOK")
		M007 A 0 A_JumpIfInventory("InfiniteAmmo",1,"FireOK")
		M007 A 0 A_TakeInventory("AECell",15,1)
	FireOK:
		M007 A 0 A_PlaySound("Bison/Fire",CHAN_WEAPON,1,0)
		M007 A 0 A_SpawnItemEx("BisonPlasma",cos(-pitch)*16,10,33+(sin(-pitch)*15),cos(-pitch)*15,0,sin(-pitch)*15,0,SXF_NOCHECKPOSITION|SXF_TRANSFERPITCH)//A_FireCustomMissile("BisonPlasma",0,1,8)
		M007 A 2 Bright A_SetPitch(pitch-3)
		M007 BBBBBB 1 Bright A_SetPitch(pitch+0.2)
		M007 CCCC 1 Bright A_SetPitch(pitch+0.2)
		M007 AAAAAAAAAA 1 Bright A_SetPitch(pitch+0.1)
		M007 A 10
		Goto Ready
	}
}

Actor BisonPlasma
{
	var int user_count;
	Projectile
	+THRUACTORS
	+FORCERADIUSDMG
	+NODAMAGETHRUST +CANNOTPUSH
	DamageType "Plasma"
	DeathType "Disintegrate"
	Radius 2
	Height 2
	Speed 15
	States
	{
	Spawn:
		TNT1 A 0
	Ringer:
		TNT1 A 0 A_SpawnItemEx("BisonRing",cos(-pitch)*15,0,0+(sin(-pitch)*15),cos(-pitch)*15,0,sin(-pitch)*15,0,SXF_NOCHECKPOSITION|SXF_TRANSFERPITCH)
		TNT1 A 0 A_SetUserVar("user_count",0)
	Moving1:
		TNT1 AA 0 A_SpawnItemEx("BisonCloud",frandom(-6,6),0,frandom(-6,6),0,0,0,random(0,359),SXF_NOCHECKPOSITION)
		TNT1 AAAAAAAA 0 A_SpawnItemEx("BisonCloud",frandom(-6,6),0,frandom(-6,6),0,0,0,random(0,359),SXF_NOCHECKPOSITION,192)
		TNT1 AAAAA 0 A_SpawnItemEx("BisonSpark",0,0,0,0,frandom(-1,1),frandom(-3,3),0,SXF_NOCHECKPOSITION,128)
		TNT1 A 0 A_Explode(random(7,15),64,0,0,32)
		TNT1 A 1 Light("RedBigFlicker2") A_SpawnItemEx("BisonRipperEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_TRANSFERPOINTERS)
		TNT1 A 0 A_SetUserVar("user_count",user_count+1)
		TNT1 A 0 A_JumpIf(user_count>=6,"Ringer")
		Loop
	Death:
		TNT1 A 0
		Stop
	}
}

Actor BisonPlasmaSeeker
{
	var int user_count;
	var int user_life;
	var int user_x;
	var int user_y;
	var int user_z;
	Projectile
	+THRUACTORS
	+FORCERADIUSDMG
	+NODAMAGETHRUST +CANNOTPUSH
	+SEEKERMISSILE
	+CANBOUNCEWATER
	+SKYEXPLODE
	BounceType "Doom"
	DamageType "Plasma"
	DeathType "Disintegrate"
	BounceFactor 1
	WallBounceFactor 1
	Radius 2
	Height 2
	Speed 20
	States
	{
	Spawn:
		TNT1 A 0
	Ringer:
		TNT1 A 0 A_SetUserVar("user_x",velx)
		TNT1 A 0 A_SetUserVar("user_y",vely)
		TNT1 A 0 A_SetUserVar("user_z",velz)
		TNT1 A 0 A_SpawnItemEx("BisonRing",0,0,0,velx,vely,velz,0,SXF_NOCHECKPOSITION|SXF_TRANSFERPITCH|SXF_ABSOLUTEMOMENTUM)
		//A_SpawnItemEx("BisonRing",0,0,0,cos(-pitch)*velx,0,sin(-pitch)*velz,0,SXF_NOCHECKPOSITION|SXF_TRANSFERPITCH)
		TNT1 A 0 A_SetUserVar("user_count",0)
	Moving1:
		TNT1 AA 0 A_SpawnItemEx("BisonCloud",frandom(-6,6),0,frandom(-6,6),0,0,0,random(0,359),SXF_NOCHECKPOSITION)
		TNT1 AAAAAAAA 0 A_SpawnItemEx("BisonCloud",frandom(-6,6),0,frandom(-6,6),0,0,0,random(0,359),SXF_NOCHECKPOSITION,192)
		TNT1 AAAAA 0 A_SpawnItemEx("BisonSpark",0,0,0,0,frandom(-1,1),frandom(-3,3),0,SXF_NOCHECKPOSITION,128)
		TNT1 A 0 A_Explode(random(5,13),64,0,0,32)
		TNT1 A 0 A_SeekerMissile(2,10,3,256)
		TNT1 A 0 A_JumpIfTargetInLOS(2,0,JLOSF_PROJECTILE)
		TNT1 A 0 A_RearrangePointers(AAPTR_DEFAULT,AAPTR_DEFAULT,AAPTR_NULL,PTROP_NOSAFEGUARDS)
		TNT1 A 1 Light("RedBigFlicker2") A_SpawnItemEx("BisonRipperEffect2",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_TRANSFERPOINTERS)
		TNT1 A 0 A_SetUserVar("user_life",user_life+1)
		TNT1 A 0 A_SetUserVar("user_count",user_count+1)
		TNT1 A 0 A_JumpIf(user_life>=(35*10),"Death")
		TNT1 A 0 A_JumpIf(user_count>=4,"Ringer")
		Loop
	Death:
		TNT1 A 0
		Stop
	}
}

Actor BisonCloud
{
	+NOINTERACTION
	RenderStyle Add
	Alpha 0.35
	Scale 0.5
	States
	{
	Spawn:
		NB02 O 0
	Effect:
		NB02 O 1 A_SetScale(ScaleX-0.02)
		NB02 O 0 A_JumpIf(ScaleX<=0,1)
		Loop
		TNT1 A 0
		Stop
	}
}

Actor BisonSpark
{
	+NOINTERACTION
	Translation "0:255=%[0,0,0]:[1,0.1,0]"
	Scale 0.3
	RenderStyle Add
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_SetScale(frandom(0.15,0.55))
		TNT1 A 0 A_Jump(256,"S1","S2","S3","S4","S5","S6","S7","S8")
	S1:	X079 A 0	
	Goto Perform
	S2:	X079 B 0	
	Goto Perform
	S3:	X079 C 0	
	Goto Perform
	S4:	X079 D 0	
	Goto Perform
	S5:	X079 E 0	
	Goto Perform
	S6:	X079 F 0	
	Goto Perform
	S7:	X079 G 0	
	Goto Perform
	S8: X079 H 0	
	Goto Perform
	Perform:
		"####" "#" 1 A_SetScale(ScaleX+0.01)
		"####" "#" 0 A_ScaleVelocity(0.98)
		"####" "#" 0 A_FadeOut(0.05)
		Loop
	}
}

Actor BisonRing
{
	var int user_count;
	var int user_scale;
	+NOINTERACTION
	Translation "0:255=%[0,0,0]:[1,0.1,0]"
	RenderStyle Add
	Scale 0//0.15
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_Jump(256,"S1","S2","S3","S4")
	S1:	X077 A 0
		Goto Perform
	S2:	X077 B 0
		Goto Perform
	S3:	X078 A 0
		Goto Perform
	S4:	X078 B 0
		Goto Perform
	Perform:
		"####" "##" 1 A_SetScale(ScaleX+0.05)
		//"####" "##" 1 A_SetScale(ScaleX+0.04)
		"####" "##" 1 A_SetScale(ScaleX+0.03)
		//"####" "###" 1 A_SetScale(ScaleX+0.02)
		"####" "#" 0 A_Stop
		"####" "####" 1 A_SetScale(ScaleX+0.01)
		"####" "#" 0 A_FadeOut(0.05)	"####" "#" 1 A_SetScale(ScaleX-0.01)
		"####" "#" 0 A_FadeOut(0.05)	"####" "#" 1 A_SetScale(ScaleX-0.01)
	Outer:
		"####" "#" 1 A_SetScale(ScaleX-0.01)
		"####" "#" 0 A_FadeOut(0.05)
		Loop
	}
}
	
	Actor BisonRipperEffect
	{
	Projectile
	+RIPPER	RipperLevel 1
	+DONTREFLECT
	+PAINLESS
	+NODAMAGETHRUST +CANNOTPUSH
	Damage (random(2,4))
	Speed 0
	Radius 1
	Height 1
	RenderStyle None
	DamageType "Plasma"
	DeathType "Disintegrate"
	States
	{
	Spawn:
		TNT1 A 0 A_Jump(220,2)
		TNT1 A 0 A_ChangeFlag("PAINLESS",0)
		TNT1 A 20
		Stop
	}
}

Actor BisonRipperEffect2 : BisonRipperEffect
{
	+FOILINVUL
	States
	{
	Spawn:
		TNT1 A 0 A_Jump(220,2)
		TNT1 A 0 A_ChangeFlag("PAINLESS",0)
		TNT1 A 10
		Stop
	}
}

Actor BisonRegenToken : Inventory {}