DamageType Portal1
{	Factor 0	}

DamageType Portal2
{	Factor 0	}

DamageType SoulReaperPull
{	Factor 0	}

Actor BaronNoType : BaronOfHell
{}
 
//===============================================================================
//===============================================================================
//
//	MISC.
//
//===============================================================================
//===============================================================================

Actor AEoDToken : Inventory
{	Inventory.MaxAmount 1	}

Actor NotATrueMapToken : Inventory
{	Inventory.MaxAmount 1	}

Actor PFirstTimeToken : Inventory
{	Inventory.MaxAmount 1	}

Actor PFirstTimeToken2 : Inventory
{	Inventory.MaxAmount 1	}

Actor JokeToken : Inventory
{	Inventory.MaxAmount 1	}

Actor L4DDirToken : Inventory
{
	Inventory.Amount 1
	Inventory.MaxAmount 1
}

Actor L4DModeToken : Inventory
{
	Inventory.Amount 1
	Inventory.MaxAmount 1
}

Actor PlayerToken : Inventory
{
	Inventory.Amount 1
	Inventory.MaxAmount 1
}

Actor Counter : inventory		//general purpose couter
{	Inventory.MaxAmount 255 }

Actor DisintegrateToken : inventory		//specific to handle crash states on monsters + disintegrate deaths
{	Inventory.MaxAmount 1 }

Actor OldFog : TeleportFog // 4.0 - 5.25
{
	+NOTIMEFREEZE
	RenderStyle None
	States
	{
	Spawn:
		PLAY AA 0 A_SpawnItemEx("TelFogXtra",6,30,32,0,0,random(1,3),0,0)
		PLAY AA 0 A_SpawnItemEx("TelFogXtra",12,24,32,0,0,random(1,3),0,0)
		PLAY AA 0 A_SpawnItemEx("TelFogXtra",18,18,32,0,0,random(1,3),0,0)
		PLAY AA 0 A_SpawnItemEx("TelFogXtra",24,12,32,0,0,random(1,3),0,0)
		PLAY AA 0 A_SpawnItemEx("TelFogXtra",30,6,32,0,0,random(1,3),0,0)

		PLAY AA 0 A_SpawnItemEx("TelFogXtra",-6,30,32,0,0,random(1,3),0,0)
		PLAY AA 0 A_SpawnItemEx("TelFogXtra",-12,24,32,0,0,random(1,3),0,0)
		PLAY AA 0 A_SpawnItemEx("TelFogXtra",-18,18,32,0,0,random(1,3),0,0)
		PLAY AA 0 A_SpawnItemEx("TelFogXtra",-24,12,32,0,0,random(1,3),0,0)
		PLAY AA 0 A_SpawnItemEx("TelFogXtra",-30,6,32,0,0,random(1,3),0,0)

		PLAY AA 0 A_SpawnItemEx("TelFogXtra",6,-30,32,0,0,random(1,3),0,0)
		PLAY AA 0 A_SpawnItemEx("TelFogXtra",12,-24,32,0,0,random(1,3),0,0)
		PLAY AA 0 A_SpawnItemEx("TelFogXtra",18,-18,32,0,0,random(1,3),0,0)
		PLAY AA 0 A_SpawnItemEx("TelFogXtra",24,-12,32,0,0,random(1,3),0,0)
		PLAY AA 0 A_SpawnItemEx("TelFogXtra",30,-6,32,0,0,random(1,3),0,0)

		PLAY AA 0 A_SpawnItemEx("TelFogXtra",-6,-30,32,0,0,random(1,3),0,0)
		PLAY AA 0 A_SpawnItemEx("TelFogXtra",-12,-24,32,0,0,random(1,3),0,0)
		PLAY AA 0 A_SpawnItemEx("TelFogXtra",-18,-18,32,0,0,random(1,3),0,0)
		PLAY AA 0 A_SpawnItemEx("TelFogXtra",-24,-12,32,0,0,random(1,3),0,0)
		PLAY AA 0 A_SpawnItemEx("TelFogXtra",-30,-6,32,0,0,random(1,3),0,0)


		PLAY AA 0 A_SpawnItemEx("TelFogXtra",6,30,32,0,0,random(-1,-3),0,0)
		PLAY AA 0 A_SpawnItemEx("TelFogXtra",12,24,32,0,0,random(-1,-3),0,0)
		PLAY AA 0 A_SpawnItemEx("TelFogXtra",18,18,32,0,0,random(-1,-3),0,0)
		PLAY AA 0 A_SpawnItemEx("TelFogXtra",24,12,32,0,0,random(-1,-3),0,0)
		PLAY AA 0 A_SpawnItemEx("TelFogXtra",30,6,32,0,0,random(-1,-3),0,0)

		PLAY AA 0 A_SpawnItemEx("TelFogXtra",-6,30,32,0,0,random(-1,-3),0,0)
		PLAY AA 0 A_SpawnItemEx("TelFogXtra",-12,24,32,0,0,random(-1,-3),0,0)
		PLAY AA 0 A_SpawnItemEx("TelFogXtra",-18,18,32,0,0,random(-1,-3),0,0)
		PLAY AA 0 A_SpawnItemEx("TelFogXtra",-24,12,32,0,0,random(-1,-3),0,0)
		PLAY AA 0 A_SpawnItemEx("TelFogXtra",-30,6,32,0,0,random(-1,-3),0,0)

		PLAY AA 0 A_SpawnItemEx("TelFogXtra",6,-30,32,0,0,random(-1,-3),0,0)
		PLAY AA 0 A_SpawnItemEx("TelFogXtra",12,-24,32,0,0,random(-1,-3),0,0)
		PLAY AA 0 A_SpawnItemEx("TelFogXtra",18,-18,32,0,0,random(-1,-3),0,0)
		PLAY AA 0 A_SpawnItemEx("TelFogXtra",24,-12,32,0,0,random(-1,-3),0,0)
		PLAY AA 0 A_SpawnItemEx("TelFogXtra",30,-6,32,0,0,random(-1,-3),0,0)

		PLAY AA 0 A_SpawnItemEx("TelFogXtra",-6,-30,32,0,0,random(-1,-3),0,0)
		PLAY AA 0 A_SpawnItemEx("TelFogXtra",-12,-24,32,0,0,random(-1,-3),0,0)
		PLAY AA 0 A_SpawnItemEx("TelFogXtra",-18,-18,32,0,0,random(-1,-3),0,0)
		PLAY AA 0 A_SpawnItemEx("TelFogXtra",-24,-12,32,0,0,random(-1,-3),0,0)
		PLAY AA 0 A_SpawnItemEx("TelFogXtra",-30,-6,32,0,0,random(-1,-3),0,0)

		PLAY A 1
		Stop
	}
}

Actor NewFog replaces TeleportFog
{
	Projectile
	+NOINTERACTION
	-TELESTOMP
	//+NOTIMEFREEZE
	RenderStyle Add
	Scale 0.30
	Alpha 0
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_PlaySound("misc/teleport")
		X051 A 0 A_ChangeVelocity(0,0,3,3)
		X051 AAAA 1 Bright A_FadeIn(0.18)
	FadingLoop:
		X051 A 0 A_CheckSight("NoSight")
		X051 A 0 A_SpawnItemEx("TeleSpark",0,0,0,random(8,16),0,random(-9,9),random(0,359),32,64)
	NoSight:
		X051 A 1 Bright A_FadeOut(0.02)
		Goto "FadingLoop"
	}
}

Actor TeleSpark
{
	Projectile
	+NOINTERACTION
	MissileType "TeleSparkTrail"
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_SpawnItemEx("TeleSparkTrail",0,0,0,0,0,0,0,32)
		TNT1 A 1 A_ChangeVelocity(random(0,10),0,random(-9,9),3)
		TNT1 A 0 A_SetAngle(angle+random(-70,70))
		TNT1 A 1 A_SpawnItemEx("TeleSparkTrail",0,0,0,0,0,0,0,32)
		TNT1 A 1 A_SpawnItemEx("TeleSparkTrail",0,0,0,0,0,0,0,32)

		TNT1 A 1 A_ChangeVelocity(random(0,10),0,random(-9,9),3)
		TNT1 A 0 A_SetAngle(angle+random(-70,70))
		TNT1 A 1 A_SpawnItemEx("TeleSparkTrail",0,0,0,0,0,0,0,32)
		TNT1 A 1 A_SpawnItemEx("TeleSparkTrail",0,0,0,0,0,0,0,32)

		TNT1 A 0 A_SpawnItemEx("TeleSparkTrail",0,0,0,0,0,0,0,32)
		TNT1 A 1 A_ChangeVelocity(random(0,10),0,random(-9,9),3)
		TNT1 A 0 A_SetAngle(angle+random(-70,70))
		TNT1 A 1 A_SpawnItemEx("TeleSparkTrail",0,0,0,0,0,0,0,32)
		TNT1 A 1 A_SpawnItemEx("TeleSparkTrail",0,0,0,0,0,0,0,32)

		TNT1 A 0 A_SpawnItemEx("TeleSparkTrail",0,0,0,0,0,0,0,32)
		TNT1 A 1 A_ChangeVelocity(random(0,10),0,random(-9,9),3)
		TNT1 A 1 A_SpawnItemEx("TeleSparkTrail",0,0,0,0,0,0,0,32)
		TNT1 A 1 A_SpawnItemEx("TeleSparkTrail",0,0,0,0,0,0,0,32)
		Stop
	}
}
 
Actor TeleSparkTrail
{
	+NOINTERACTION
	RenderStyle Add
	Alpha 0.5
	Scale 0.07
	States
	{
	Spawn:
		X051 A 4 bright
		Stop
	}
}

Actor TelFogXtra
{
	+NOTIMEFREEZE
	+NOINTERACTION
	Radius 1
	Height 1
	Scale 0.3
	RenderStyle Add
	Alpha 0.7
//	Translation "80:111=112:127"
	States
	{
	Spawn:
		PUF2 AA 1 Bright
		TNT1 A 0 A_Jump(128,1)
		Loop
		PUF2 AAAA 1 Bright
		PUF2 A 1 Bright A_FadeOut
		Wait
	Death:
		TNT1 A 1
		Stop
	}
}



//***************************************************************

//Stop actors with "BloodType NoBloodPuff" from translating this.

Actor NoBloodPuff
{
	+NOINTERACTION
	States
	{
	Spawn:
		TNT1 A 0 NoDelay A_SpawnItemEx("NewPuff1",0,0,0,0,0,0,0,32,32)
		Stop
	}
}

Actor NewPuff1
{
	Projectile
	+NOINTERACTION
	+PUFFONACTORS
	VSpeed 0
	Speed 0
	Scale 0.2
	RenderStyle Add
	Damage 0
	DamageType "AEBullet"
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_CheckSight("Simple")
	Crash:
	Death:	//structure
		TNT1 A 0 A_CheckFloor("SpawnFloorSmoke")
		TNT1 A 0 A_SpawnItemEx("PuffWallSmoke",0,0,0,0,0,0,0,32)
		TNT1 A 0 A_Jump(128,2)
		TNT1 A 0 A_PlaySound("postal2/weapons/bullet_hit_ricochet")
		TNT1 A 0 A_SpawnItemEx("Puff2FlareBig",0,0,0,0,0,0,0,32)
		TNT1 A 0 A_SpawnItemEx("Puff2Spark",2,0,0,frandom(3,9),0,frandom(-6,6),random(0,359),32)
		TNT1 AAA 0 A_SpawnItemEx("Puff2Spark",2,0,0,frandom(3,9),0,frandom(-6,6),random(0,359),32,128)
		TNT1 A 0 A_Jump(64,2)
		TNT1 A 1
		Stop
		TNT1 A 3 Light("Puff2Light")
		Stop
	SpawnFloorSmoke:
		TNT1 A 0 A_SpawnItemEx("PuffFloorSmoke",0,0,0,0,0,0,0,32)
		Goto Death+2
	XDeath:
		TNT1 A 0 A_PlaySound("postal2/weapons/bullet_hitflesh",5,0.5)
		Stop
	Simple:
		TNT1 A 0 A_Jump(128,2)
		TNT1 A 0 A_PlaySound("postal2/weapons/bullet_hit_ricochet")
		TNT1 A 0
		Stop
	}
}

Actor NewPuff1Silent : NewPuff1
{
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_CheckSight("Simple")
		//TNT1 A 0 A_SpawnItemEx("TT5",1,0,0,0,0,frandom(0.1,0.3),random(0,359),32)
		TNT1 AA 0 A_SpawnItemEx("Puff2FlareBig",0,0,0,0,0,0,0,32)
		TNT1 A 0 A_SpawnItemEx("Puff2Spark",2,0,0,frandom(3,9),0,frandom(-6,6),random(0,359),32)
		TNT1 AAA 0 A_SpawnItemEx("Puff2Spark",2,0,0,frandom(3,9),0,frandom(-6,6),random(0,359),32,128)
		TNT1 A 0 A_Jump(64,1)
		Stop
		TNT1 A 3 Light("Puff2Light")
		//TNT1 A 0 A_Jump(128,11)
		//FX57 ABCDEFGHIJ 2 Bright A_FadeOut
		Stop
	Simple:
		TNT1 A 0
		Stop
	}
}


Actor PuffWallSmoke
{
	+NOINTERACTION
	RenderStyle Add
	Scale 0.13
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_SetTranslucent(frandom(0.5,1.0),1)
		TNT1 A 0 A_SetScale(frandom(0.05,0.13))
		X116 ABCDE 1
		X116 FGHIJKLMNOPQRSTUVWXYZ 1 A_FadeOut(0.035)
		Stop
	}
}

Actor PuffFloorSmoke
{
	+NOINTERACTION
	RenderStyle Add
	States
	{
	Spawn:
		TNT1 A 0 
		TNT1 A 0 A_SetTranslucent(frandom(0.5,1.0),1)
		TNT1 A 0 A_Jump(256,"Type1","Type2","Type3")
	Type1:
		TNT1 A 0 A_SetScale(frandom(0.07,0.16))
		X113 ABCDEFG 1
		X113 HIJKLMNOPQRSTUVWX 2 A_FadeOut(0.03)
		Wait
	Type2:
		TNT1 A 0 A_SetScale(frandom(0.07,0.16))
		X115 ABCDEFG 1
		X115 HIJKLMNOPQRSTUVWXYZ 2 A_FadeOut(0.03)
		Wait
	Type3:
		TNT1 A 0 A_SetScale(frandom(0.07,0.16))
		X117 ABCDEFG 1
		X117 HIJKLMNOPQRSTUVWXYZ 2 A_FadeOut(0.03)
		Wait
	}
}




Actor Puff2Spark : FastProjectile
{
	Projectile
	+THRUACTORS
	BounceType "Doom"
	Radius 1
	Height 1
	BounceFActor 1
	WallBounceFActor 1
	MissileType "Puff2Flare"
	MissileHeight 7
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_Jump(8,"LongerLife")
		TNT1 AAA 1 A_Jump(85,"Stopper")
	Stopper:
		TNT1 A 0
		Stop
	LongerLife:
		TNT1 AAAAAAAAAAAA 1 A_Jump(16,"Stopper")
		Stop
	}
}

Actor Puff2Flare
{
	+NOINTERACTION
	RenderStyle Add
	Scale 0.03
	Alpha 0.7
	States
	{
	Spawn:
		NB02 A 1 A_FadeOut(0.2) //x051
		Wait
	}
}

Actor Puff2FlareBig
{
	+NOINTERACTION
	RenderStyle Add
	Scale 0.02
	Alpha 1
	States
	{
	Spawn:
		X051 A 3 bright
		Stop
	}
}

Actor BulletDamagePuff : NewPuff1 replaces BulletPuff
{
	DamageType "AEBullet"
}

Actor PuffSmoke //: TT1
{
	Projectile
	+NOINTERACTION
	Scale 0.02
	RenderStyle Translucent
	Alpha 0.67
	States
	{
	Spawn:
		TNT1 A 0
		PUF2 A 2 //ThrustThingZ(0,random(1,4),0,1)
		PUF2 CEGIKMOQSUWYZ 2 A_FadeOut
		Wait
	}
}

//****************************************************************
//****************************************************************
//
//	6.0 New Blood Effects
//
//****************************************************************
//****************************************************************

Actor MCBloodFXMain replaces Blood
{
	//+MISSILE
	+NOBLOCKMAP
	+THRUACTORS
	+NOTIMEFREEZE
	+DONTSPLASH
	+NOTELESTOMP
	Radius 1
	Height 1
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 2 A_SpawnItemEx("MCBloodParticle",frandom(0,2),0,random(1,4),frandom(0,1.5),0,frandom(0.1,2.0),random(0,359),33|SXF_USEBLOODCOLOR)
		TNT1 AA 0 A_SpawnItemEx("MCBloodParticle",frandom(0,2),0,random(1,4),frandom(0,1.5),0,frandom(0.1,2.0),random(0,359),33|SXF_USEBLOODCOLOR,128)
		Stop
	}
}

Actor MCBloodParticle : Blood //replaces BloodSplatter
{
	Projectile
	+THRUACTORS
	+DONTSPLASH
	+NOTIMEFREEZE
	+DONTBLAST
	+NOTELESTOMP
	+NOBLOCKMAP
	//Translation "0:255=%[0,0,0]:[1,0,0]"
	RenderStyle Translucent
	Radius 1
	Height 1
	Gravity 0.20
	Scale 0.3
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_Jump(256,"B11","B12","B13","B14","B21","B22","B23","B24","B31","B32","B33","B34")
	B11:
		X057 ABCDEF 2 A_FadeOut(0.05)
		X057 GHIJK 1 A_FadeOut(0.05)
		X057 LMNOPQRS 1 A_FadeOut(0.03)
		Wait
	B12:
		XA57 ABCDEF 2 A_FadeOut(0.05)
		XA57 GHIJK 1 A_FadeOut(0.05)
		XA57 LMNOPQRS 1 A_FadeOut(0.03)
		Wait
	B13:
		XB57 ABCDEF 2 A_FadeOut(0.05)
		XB57 GHIJK 1 A_FadeOut(0.05)
		XB57 LMNOPQRS 1 A_FadeOut(0.03)
		Wait
	B14:
		XC57 ABCDEF 2 A_FadeOut(0.05)
		XC57 GHIJK 1 A_FadeOut(0.05)
		XC57 LMNOPQRS 1 A_FadeOut(0.03)
		Wait
	B21:
		X058 ABCDEF 2 A_FadeOut(0.05)
		X058 GHIJK 1 A_FadeOut(0.05)
		X058 LMNOPQR 1 A_FadeOut(0.03)
		Wait
	B22:
		XA58 ABCDEF 2 A_FadeOut(0.05)
		XA58 GHIJK 1 A_FadeOut(0.05)
		XA58 LMNOPQR 1 A_FadeOut(0.03)
		Wait
	B23:
		XB58 ABCDEF 2 A_FadeOut(0.05)
		XB58 GHIJK 1 A_FadeOut(0.05)
		XB58 LMNOPQR 1 A_FadeOut(0.03)
		Wait
	B24:
		XC58 ABCDEF 2 A_FadeOut(0.05)
		XC58 GHIJK 1 A_FadeOut(0.05)
		XC58 LMNOPQR 1 A_FadeOut(0.03)
		Wait
	B31:
		X059 ABCD 2 A_FadeOut(0.03)
		X059 EFGHIJ 1 A_FadeOut(0.04)
		X059 KLM 1 A_FadeOut(0.05)
		Wait
	B32:
		XA59 ABCD 2 A_FadeOut(0.03)
		XA59 EFGHIJ 1 A_FadeOut(0.04)
		XA59 KLM 1 A_FadeOut(0.05)
		Wait
	B33:
		XB59 ABCD 2 A_FadeOut(0.03)
		XB59 EFGHIJ 1 A_FadeOut(0.04)
		XB59 KLM 1 A_FadeOut(0.05)
		Wait
	B34:
		XC59 ABCD 2 A_FadeOut(0.03)
		XC59 EFGHIJ 1 A_FadeOut(0.04)
		XC59 KLM 1 A_FadeOut(0.05)
		Wait
	}
}

Actor MCBloodSplatter : MCBloodParticle replaces BloodSplatter
{ }

//****************************************************************
//****************************************************************
//
//	v6 New Blood Effects
//
//****************************************************************
//****************************************************************


Actor NewBlood : Blood //replaces Blood  //Blood as in v5.03, kept for compatability
{
	+DONTSPLASH
	+DONTBLAST
	Scale 0.15
	Gravity 0.44
	States
	{
	Spawn:
		BLD1 A 1
//		TNT1 AAA 0 A_SpawnItemEx("ExtraBlood",random(3,-3),random(3,-3),random(3,-3),0,0,0,0,1)
		TNT1 AAA 0 A_SpawnItemEx("ExtraBlood",random(3,-3),random(3,-3),random(3,-3),1,0,0,random(1,359),1|SXF_USEBLOODCOLOR)
		BLD1 ABCD 6
		Stop
	}
}

Actor ExtraBlood : NewBlood
{
	Scale 0.09
	States
	{
	Spawn:
		TNT1 A 0
		BLD1 A 1 ThrustThingZ(0,random(5,12),0,1)
		BLD1 A 5
		BLD1 ABCD 6
		Stop
	}
}


//*************************************************************************

//*************************************************************************

Actor GenericHumanBurn
{
	-SOLID
	-COUNTKILL
	+DONTSPLASH
	+FLOORCLIP
	Radius 20
	Height 56
	Speed 10
	PainChance 0
	DamageType Fire
	HitObituary "%o melted."
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_Jump(160,"Burn2")
		TNT1 A 0 A_SpawnItemEx("GenericHumanBurn1",0,0,0,0,0,0,0,32)
		Stop
	Burn2:
		TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(20,-20),random(20,-20),random(45,55),0,0,frandom(0.5,3.0),0,32)
		BURN A 3 Bright A_PlaySound("bcultist/burned")
		TNT1 A 0 A_Explode(8,32)
		TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(20,-20),random(20,-20),random(45,55),0,0,frandom(0.5,3.0),0,32)
		BURN B 3 Bright
		TNT1 A 0 A_Explode(8,32)
		TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(20,-20),random(20,-20),random(45,55),0,0,frandom(0.5,3.0),0,32)
		BURN C 3 Bright
		TNT1 A 0 A_Explode(7,32)
		TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(20,-20),random(20,-20),random(45,55),0,0,frandom(0.5,3.0),0,32)
		BURN D 3 Bright
		TNT1 A 0 A_Explode(7,32)
		TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(20,-20),random(20,-20),random(45,55),0,0,frandom(0.5,3.0),0,32)
		BURN E 3 Bright
		TNT1 A 0 A_Explode(7,32)
		TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(20,-20),random(20,-20),random(45,55),0,0,frandom(0.5,3.0),0,32)
		BURN F 3 Bright
		TNT1 A 0 A_Explode(7,32)
		TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(20,-20),random(20,-20),random(45,55),0,0,frandom(0.5,3.0),0,32)
		BURN G 3 Bright
		TNT1 A 0 A_Explode(7,32)
		TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(20,-20),random(20,-20),random(45,55),0,0,frandom(0.5,3.0),0,32)
		BURN H 3 Bright
		TNT1 A 0 A_Explode(7,32)
		TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(20,-20),random(20,-20),random(45,55),0,0,frandom(0.5,3.0),0,32)
		BURN I 3 Bright
		TNT1 A 0 A_Explode(7,32)
		TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(20,-20),random(20,-20),random(45,55),0,0,frandom(0.5,3.0),0,32)
		BURN J 3 Bright
		TNT1 A 0 A_Explode(7,32)
		TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(20,-20),random(20,-20),random(45,55),0,0,frandom(0.5,3.0),0,32)
		BURN K 3 Bright
		TNT1 A 0 A_Explode(7,32)
		TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(20,-20),random(20,-20),random(45,55),0,0,frandom(0.5,3.0),0,32)
		BURN L 3 Bright
		TNT1 A 0 A_Explode(7,32)
		TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(20,-20),random(20,-20),random(45,55),0,0,frandom(0.5,3.0),0,32)
		BURN M 3 Bright
		TNT1 A 0 A_Explode(6,32)
		TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(20,-20),random(20,-20),random(45,55),0,0,frandom(0.5,3.0),0,32)
		BURN N 3 Bright
		TNT1 A 0 A_Explode(5,32)
		TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(20,-20),random(20,-20),random(20,55),0,0,frandom(0.5,3.0),0,32)
		BURN O 3 Bright
		TNT1 A 0 A_Explode(5,32)
		TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(20,-20),random(20,-20),random(20,45),0,0,frandom(0.5,3.0),0,32)
		BURN P 3 Bright
		TNT1 A 0 A_Explode(4,32)
		TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(20,-20),random(20,-20),random(20,45),0,0,frandom(0.5,3.0),0,32)
		BURN Q 3 Bright
		TNT1 A 0 A_Explode(3,32)
		TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(20,-20),random(20,-20),random(10,35),0,0,frandom(0.5,3.0),0,32)
		BURN R 3 Bright
		TNT1 A 0 A_Explode(3,32)
		TNT1 A 0 A_SpawnItemEx("BurnSmoke",random(20,-20),random(20,-20),random(10,35),0,0,frandom(0.5,3.0),0,32)
		BURN S 3 Bright
		TNT1 A 0 A_Explode(2,32)
		TNT1 A 0 A_SpawnItemEx("BurnSmoke",random(20,-20),random(20,-20),random(10,35),0,0,frandom(0.5,3.0),0,32)
		BURN T 3 BrighT
		TNT1 A 0 A_Explode(2,32)
		TNT1 A 0 A_SpawnItemEx("BurnSmoke",random(20,-20),random(20,-20),random(10,25),0,0,frandom(0.5,3.0),0,32)
		BURN U 3 BrighT
		TNT1 A 0 A_Explode(2,32)

		BURN V -1
		Stop
	}
}	

Actor GenericHumanBurn1
{
	-SOLID
	-COUNTKILL
	+DONTSPLASH
	+FLOORCLIP
	Radius 20
	Height 56
	Speed 10
	PainChance 0
	Scale 0.45
	DamageType Fire
	HitObituary "%o melted."
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_PlaySound("bcultist/burned")

		TNT1 A 0 A_JumpIfInventory("Counter",5,"ScreamandDecide")
		E16W A 2 Bright A_Wander
		TNT1 A 0 A_Explode(5,32)
//		TNT1 A 0 A_SpawnItemEx("BurnMiniFlame",random(20,-20),random(20,-20),random(30,50),0,0,frandom(1.0,3.0),0,32)
		TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(20,-20),random(20,-20),random(45,55),0,0,frandom(0.5,3.0),0,32)
		E16W A 2 Bright A_Wander
		TNT1 A 0 A_Explode(5,32)
		TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(20,-20),random(20,-20),random(45,55),0,0,frandom(0.5,3.0),0,32)
		E16W B 2 Bright A_Wander
		TNT1 A 0 A_Explode(5,32)
		TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(20,-20),random(20,-20),random(45,55),0,0,frandom(0.5,3.0),0,32)
		E16W B 2 Bright A_Wander
		TNT1 A 0 A_Explode(5,32)
		TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(20,-20),random(20,-20),random(45,55),0,0,frandom(0.5,3.0),0,32)
		E16W C 2 Bright A_Wander
		TNT1 A 0 A_Explode(5,32)
		TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(20,-20),random(20,-20),random(45,55),0,0,frandom(0.5,3.0),0,32)
		E16W C 2 Bright A_Wander
		TNT1 A 0 A_Explode(5,32)
		TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(20,-20),random(20,-20),random(45,55),0,0,frandom(0.5,3.0),0,32)
		E16W D 2 Bright A_Wander
		TNT1 A 0 A_Explode(5,32)
		TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(20,-20),random(20,-20),random(45,55),0,0,frandom(0.5,3.0),0,32)
		E16W D 2 Bright A_Wander
		TNT1 A 0 A_Explode(5,32)
		TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(20,-20),random(20,-20),random(45,55),0,0,frandom(0.5,3.0),0,32)
		E16W E 2 Bright A_Wander
		TNT1 A 0 A_Explode(5,32)
		TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(20,-20),random(20,-20),random(45,55),0,0,frandom(0.5,3.0),0,32)
		E16W E 2 Bright A_Wander
		TNT1 A 0 A_Explode(5,32)
		TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(20,-20),random(20,-20),random(45,55),0,0,frandom(0.5,3.0),0,32)
		E16W F 2 Bright A_Wander
		TNT1 A 0 A_Explode(5,32)
		TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(20,-20),random(20,-20),random(45,55),0,0,frandom(0.5,3.0),0,32)
		E16W F 2 Bright A_Wander
		TNT1 A 0 A_Explode(5,32)
		TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(20,-20),random(20,-20),random(45,55),0,0,frandom(0.5,3.0),0,32)
		TNT1 A 0 A_GiveInventory("Counter",1)
		Goto Spawn+2

	ScreamandDecide:
		TNT1 A 0 A_Jump(200,"Burn1Fallen")
		TNT1 A 0 A_TakeInventory("Counter",255)
		Goto Spawn+2

	Burn1Fallen:
		E16D A 2 Bright
		TNT1 A 0 A_Explode(5,32)
		TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(20,-20),random(20,-20),random(45,55),0,0,frandom(0.5,3.0),0,32)
		E16D A 2 Bright
		TNT1 A 0 A_Explode(5,32)
		TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(20,-20),random(20,-20),random(45,55),0,0,frandom(0.5,3.0),0,32)
		E16D B 2 Bright
		TNT1 A 0 A_Explode(5,32)
		TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(20,-20),random(20,-20),random(45,55),0,0,frandom(0.5,3.0),0,32)
		E16D B 2 Bright
		TNT1 A 0 A_Explode(5,32)
		TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(20,-20),random(20,-20),random(45,55),0,0,frandom(0.5,3.0),0,32)

		E16D C 3 Bright
		TNT1 A 0 A_Explode(5,32)
		TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(15,-15),random(15,-15),random(20,25),0,0,frandom(0.5,3.0),0,32)
		E16D D 3 Bright
		TNT1 A 0 A_Explode(5,32)
		TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(15,-15),random(15,-15),random(20,25),0,0,frandom(0.5,3.0),0,32)
		E16D E 3 Bright
		TNT1 A 0 A_Explode(5,32)
		TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(15,-15),random(15,-15),random(20,25),0,0,frandom(0.5,3.0),0,32)
		E16D F 3 Bright
		TNT1 A 0 A_Explode(5,32)
		TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(15,-15),random(15,-15),random(20,25),0,0,frandom(0.5,3.0),0,32)
		E16D G 3 Bright
		TNT1 A 0 A_Explode(5,32)
		TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(15,-15),random(15,-15),random(20,25),0,0,frandom(0.5,3.0),0,32)
		E16D H 3 Bright
		TNT1 A 0 A_Explode(5,32)
		TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(15,-15),random(15,-15),random(20,25),0,0,frandom(0.5,3.0),0,32)

		TNT1 A 0 A_Jump(90,"Burn1End")
		E16D C 3 Bright
		TNT1 A 0 A_Explode(5,32)
		TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(15,-15),random(15,-15),random(20,25),0,0,frandom(0.5,3.0),0,32)
		E16D D 3 Bright
		TNT1 A 0 A_Explode(5,32)
		TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(15,-15),random(15,-15),random(20,25),0,0,frandom(0.5,3.0),0,32)
		E16D E 3 Bright
		TNT1 A 0 A_Explode(5,32)
		TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(15,-15),random(15,-15),random(20,25),0,0,frandom(0.5,3.0),0,32)
		E16D F 3 Bright
		TNT1 A 0 A_Explode(5,32)
		TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(15,-15),random(15,-15),random(20,25),0,0,frandom(0.5,3.0),0,32)
		E16D G 3 Bright
		TNT1 A 0 A_Explode(5,32)
		TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(15,-15),random(15,-15),random(20,25),0,0,frandom(0.5,3.0),0,32)
		E16D H 3 Bright
		TNT1 A 0 A_Explode(5,32)
		TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(15,-15),random(15,-15),random(20,25),0,0,frandom(0.5,3.0),0,32)
		Goto Burn1Fallen+16	//was 12
	Burn1End:
		E16D I 3 
		TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(10,-10),random(10,-10),random(20,25),0,0,frandom(0.5,3.0),0,32)
		E16D J 3 
		TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(10,-10),random(10,-10),random(20,25),0,0,frandom(0.5,3.0),0,32)
		E16D K 3 Bright 
		TNT1 A 0 A_SpawnItemEx("BurnSmoke",random(10,-10),random(10,-10),random(20,25),0,0,frandom(0.5,3.0),0,32)
		E16D L 4 
		E16D M -1
		Stop
	}
}

Actor HexenHumanBurn
{
	-SOLID
	-COUNTKILL
	+DONTSPLASH
	+FLOORCLIP
	Radius 20
	Height 56
	Speed 10
	PainChance 0
	Scale 0.8
	Scale 0.95
	DamageType Fire
	HitObituary "%o melted."
	States
	{
	Spawn:
		TNT1 A 0
		FDTH G 4 Bright A_Explode(5,32)	TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(15,-15),random(15,-15),random(20,25),0,0,frandom(0.5,3.0),0,32)
		FDTH H 4 Bright A_Explode(5,32)	TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(15,-15),random(15,-15),random(20,25),0,0,frandom(0.5,3.0),0,32)
		FDTH I 4 Bright A_Explode(5,32)	TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(15,-15),random(15,-15),random(20,25),0,0,frandom(0.5,3.0),0,32)
		FDTH J 4 Bright A_Explode(5,32)	TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(15,-15),random(15,-15),random(20,25),0,0,frandom(0.5,3.0),0,32)
		FDTH K 4 Bright A_Explode(5,32)	TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(15,-15),random(15,-15),random(20,25),0,0,frandom(0.5,3.0),0,32)
		FDTH L 4 Bright A_Explode(5,32)	TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(15,-15),random(15,-15),random(20,25),0,0,frandom(0.5,3.0),0,32)
		FDTH M 4 Bright A_Explode(5,32)	TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(15,-15),random(15,-15),random(20,25),0,0,frandom(0.5,3.0),0,32)
		FDTH N 4 Bright A_Explode(5,32)	TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(15,-15),random(15,-15),random(20,25),0,0,frandom(0.5,3.0),0,32)
		FDTH O 4 Bright A_Explode(5,32)	TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(15,-15),random(15,-15),random(20,25),0,0,frandom(0.5,3.0),0,32)
		FDTH P 4 Bright A_Explode(5,32)	TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(15,-15),random(15,-15),random(20,25),0,0,frandom(0.5,3.0),0,32)
		FDTH Q 4 Bright A_Explode(5,32)	TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(15,-15),random(15,-15),random(20,25),0,0,frandom(0.5,3.0),0,32)
		FDTH R 4 Bright A_Explode(5,32)	TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(15,-15),random(15,-15),random(20,25),0,0,frandom(0.5,3.0),0,32)
		FDTH S 4 Bright A_Explode(5,32)	TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(15,-15),random(15,-15),random(20,25),0,0,frandom(0.5,3.0),0,32)
		FDTH T 4 Bright A_Explode(5,32)	TNT1 A 0 A_SpawnItemEx("BurnSmoke",random(15,-15),random(15,-15),random(20,25),0,0,frandom(0.5,3.0),0,32)
		FDTH U 4 Bright A_Explode(5,32)	TNT1 A 0 A_SpawnItemEx("BurnSmoke",random(15,-15),random(15,-15),random(20,25),0,0,frandom(0.5,3.0),0,32)
		FDTH V 4 Bright A_Explode(5,32) 	TNT1 A 0 A_SpawnItemEx("BurnSmoke",random(15,-15),random(15,-15),random(20,25),0,0,frandom(0.5,3.0),0,32)
		Stop
	}
}

Actor BurnSmoke
{
	+NOINTERACTION
	Scale 0.3
	Radius 2
	Height 2
	RenderStyle Translucent
	Alpha 0.6
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_Jump(255,"One","Two","Three","Four")
	One:
		X037 A 3 A_FadeOut(0.04)
		TNT1 A 0 A_ScaleVelocity(0.95)
		Loop
	Two:
		X037 B 3 A_FadeOut(0.04)
		TNT1 A 0 A_ScaleVelocity(0.95)
		Loop
	Three:
		X037 C 3 A_FadeOut(0.04)
		TNT1 A 0 A_ScaleVelocity(0.95)
		Loop
	Four:
		X037 D 3 A_FadeOut(0.04)
		TNT1 A 0 A_ScaleVelocity(0.95)
		Loop
	}
}
Actor BurnSmokeSmall : BurnSmoke
{
	Scale 0.15
}

Actor SmallHumanBurn : GenericHumanBurn1
{
	Scale 0.2
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_PlaySound("lilcaleb/burn")

		TNT1 A 0 A_JumpIfInventory("Counter",4,"ScreamandDecide")
		TNT1 A 0 A_SpawnItemEx("BurnSmokeSmall",random(8,-8),random(8,-8),random(10,25),0,0,frandom(0.2,1.5),0,32)
		E16W A 2 Bright A_Wander
		TNT1 A 0 A_Explode(3,20)
		TNT1 A 0 A_SpawnItemEx("BurnSmokeSmall",random(8,-8),random(8,-8),random(10,25),0,0,frandom(0.2,1.5),0,32)
		E16W A 2 Bright A_Wander
		TNT1 A 0 A_Explode(3,20)
		TNT1 A 0 A_SpawnItemEx("BurnSmokeSmall",random(8,-8),random(8,-8),random(10,25),0,0,frandom(0.2,1.5),0,32)
		E16W B 2 Bright A_Wander
		TNT1 A 0 A_Explode(3,20)
		TNT1 A 0 A_SpawnItemEx("BurnSmokeSmall",random(8,-8),random(8,-8),random(10,25),0,0,frandom(0.2,1.5),0,32)
		E16W B 2 Bright A_Wander
		TNT1 A 0 A_Explode(3,20)
		TNT1 A 0 A_SpawnItemEx("BurnSmokeSmall",random(8,-8),random(8,-8),random(10,25),0,0,frandom(0.2,1.5),0,32)
		E16W C 2 Bright A_Wander
		TNT1 A 0 A_Explode(3,20)
		TNT1 A 0 A_SpawnItemEx("BurnSmokeSmall",random(8,-8),random(8,-8),random(10,25),0,0,frandom(0.2,1.5),0,32)
		E16W C 2 Bright A_Wander
		TNT1 A 0 A_Explode(3,20)
		TNT1 A 0 A_SpawnItemEx("BurnSmokeSmall",random(8,-8),random(8,-8),random(10,25),0,0,frandom(0.2,1.5),0,32)
		E16W D 2 Bright A_Wander
		TNT1 A 0 A_Explode(3,20)
		TNT1 A 0 A_SpawnItemEx("BurnSmokeSmall",random(8,-8),random(8,-8),random(10,25),0,0,frandom(0.2,1.5),0,32)
		E16W D 2 Bright A_Wander
		TNT1 A 0 A_Explode(3,20)
		TNT1 A 0 A_SpawnItemEx("BurnSmokeSmall",random(8,-8),random(8,-8),random(10,25),0,0,frandom(0.2,1.5),0,32)
		E16W E 2 Bright A_Wander
		TNT1 A 0 A_Explode(3,20)
		TNT1 A 0 A_SpawnItemEx("BurnSmokeSmall",random(8,-8),random(8,-8),random(10,25),0,0,frandom(0.2,1.5),0,32)
		E16W E 2 Bright A_Wander
		TNT1 A 0 A_Explode(3,20)
		TNT1 A 0 A_SpawnItemEx("BurnSmokeSmall",random(8,-8),random(8,-8),random(10,25),0,0,frandom(0.2,1.5),0,32)
		E16W F 2 Bright A_Wander
		TNT1 A 0 A_Explode(3,20)
		TNT1 A 0 A_GiveInventory("Counter",1)
		Goto Spawn+2


	ScreamandDecide:
		TNT1 A 0 A_Jump(200,"Burn1Fallen")
		TNT1 A 0 A_TakeInventory("Counter",255)
		Goto Spawn+2

	Burn1Fallen:
		E16D A 2 Bright
		TNT1 A 0 A_Explode(3,20)
		TNT1 A 0 A_SpawnItemEx("BurnSmokeSmall",random(8,-8),random(8,-8),random(10,25),0,0,frandom(0.2,1.5),0,32)
		E16D A 2 Bright
		TNT1 A 0 A_Explode(3,20)
		TNT1 A 0 A_SpawnItemEx("BurnSmokeSmall",random(8,-8),random(8,-8),random(10,25),0,0,frandom(0.2,1.5),0,32)
		E16D B 2 Bright
		TNT1 A 0 A_Explode(3,20)
		TNT1 A 0 A_SpawnItemEx("BurnSmokeSmall",random(8,-8),random(8,-8),random(10,25),0,0,frandom(0.2,1.5),0,32)
		E16D B 2 Bright
		TNT1 A 0 A_Explode(3,20)
		TNT1 A 0 A_SpawnItemEx("BurnSmokeSmall",random(8,-8),random(8,-8),random(10,25),0,0,frandom(0.2,1.5),0,32)

		E16D C 3 Bright
		TNT1 A 0 A_Explode(3,20)
		TNT1 A 0 A_SpawnItemEx("BurnSmokeSmall",random(8,-8),random(8,-8),random(10,25),0,0,frandom(0.2,1.5),0,32)
		E16D D 3 Bright
		TNT1 A 0 A_Explode(3,20)
		TNT1 A 0 A_SpawnItemEx("BurnSmokeSmall",random(8,-8),random(8,-8),random(10,25),0,0,frandom(0.2,1.5),0,32)
		E16D E 3 Bright
		TNT1 A 0 A_Explode(3,20)
		TNT1 A 0 A_SpawnItemEx("BurnSmokeSmall",random(8,-8),random(8,-8),random(10,25),0,0,frandom(0.2,1.5),0,32)
		E16D F 3 Bright
		TNT1 A 0 A_Explode(3,20)
		TNT1 A 0 A_SpawnItemEx("BurnSmokeSmall",random(8,-8),random(8,-8),random(10,25),0,0,frandom(0.2,1.5),0,32)
		E16D G 3 Bright
		TNT1 A 0 A_Explode(3,20)
		TNT1 A 0 A_SpawnItemEx("BurnSmokeSmall",random(8,-8),random(8,-8),random(10,25),0,0,frandom(0.2,1.5),0,32)
		E16D H 3 Bright
		TNT1 A 0 A_Explode(3,20)
		TNT1 A 0 A_SpawnItemEx("BurnSmokeSmall",random(8,-8),random(8,-8),random(10,25),0,0,frandom(0.2,1.5),0,32)

		TNT1 A 0 A_Jump(190,"Burn1End")
		E16D C 3 Bright
		TNT1 A 0 A_Explode(3,20)
		TNT1 A 0 A_SpawnItemEx("BurnSmokeSmall",random(8,-8),random(8,-8),random(10,25),0,0,frandom(0.2,1.5),0,32)
		E16D D 3 Bright
		TNT1 A 0 A_Explode(3,20)
		TNT1 A 0 A_SpawnItemEx("BurnSmokeSmall",random(8,-8),random(8,-8),random(10,25),0,0,frandom(0.2,1.5),0,32)
		E16D E 3 Bright
		TNT1 A 0 A_Explode(3,20)
		TNT1 A 0 A_SpawnItemEx("BurnSmokeSmall",random(8,-8),random(8,-8),random(10,25),0,0,frandom(0.2,1.5),0,32)
		E16D F 3 Bright
		TNT1 A 0 A_Explode(3,20)
		TNT1 A 0 A_SpawnItemEx("BurnSmokeSmall",random(8,-8),random(8,-8),random(10,25),0,0,frandom(0.2,1.5),0,32)
		E16D G 3 Bright
		TNT1 A 0 A_Explode(3,20)
		TNT1 A 0 A_SpawnItemEx("BurnSmokeSmall",random(8,-8),random(8,-8),random(10,25),0,0,frandom(0.2,1.5),0,32)
		E16D H 3 Bright
		TNT1 A 0 A_Explode(3,20)
		TNT1 A 0 A_SpawnItemEx("BurnSmokeSmall",random(8,-8),random(8,-8),random(10,25),0,0,frandom(0.2,1.5),0,32)
		Goto Burn1Fallen+12
	Burn1End:
		E16D I 3 
		TNT1 A 0 A_SpawnItemEx("BurnSmokeSmall",random(8,-8),random(8,-8),random(8,15),0,0,frandom(0.2,1.5),0,32)
		E16D J 3 
		TNT1 A 0 A_SpawnItemEx("BurnSmokeSmall",random(8,-8),random(8,-8),random(8,15),0,0,frandom(0.2,1.5),0,32)
		E16D K 3 Bright 
		TNT1 A 0 A_SpawnItemEx("BurnSmokeSmall",random(8,-8),random(8,-8),random(8,15),0,0,frandom(0.2,1.5),0,32)
		E16D L 4 
		E16D M -1
		Stop
	}
}

Actor BastetBurn : GenericHumanBurn1
{
	-SOLID
	-COUNTKILL
	+DONTSPLASH
	+FLOORCLIP
	Radius 20
	Height 56
	Speed 10
	PainChance 0
	Scale 0.45
	DamageType Fire
	HitObituary "%o melted."
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_PlaySound("monster/bastet/death")

		TNT1 A 0 A_JumpIfInventory("Counter",5,"ScreamandDecide")
		E16W A 2 Bright A_Wander
		TNT1 A 0 A_Explode(5,32)
//		TNT1 A 0 A_SpawnItemEx("BurnMiniFlame",random(20,-20),random(20,-20),random(30,50),0,0,frandom(1.0,3.0),0,32)
		TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(20,-20),random(20,-20),random(45,55),0,0,frandom(0.5,3.0),0,32)
		E16W A 2 Bright A_Wander
		TNT1 A 0 A_Explode(5,32)
		TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(20,-20),random(20,-20),random(45,55),0,0,frandom(0.5,3.0),0,32)
		E16W B 2 Bright A_Wander
		TNT1 A 0 A_Explode(5,32)
		TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(20,-20),random(20,-20),random(45,55),0,0,frandom(0.5,3.0),0,32)
		E16W B 2 Bright A_Wander
		TNT1 A 0 A_Explode(5,32)
		TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(20,-20),random(20,-20),random(45,55),0,0,frandom(0.5,3.0),0,32)
		E16W C 2 Bright A_Wander
		TNT1 A 0 A_Explode(5,32)
		TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(20,-20),random(20,-20),random(45,55),0,0,frandom(0.5,3.0),0,32)
		E16W C 2 Bright A_Wander
		TNT1 A 0 A_Explode(5,32)
		TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(20,-20),random(20,-20),random(45,55),0,0,frandom(0.5,3.0),0,32)
		E16W D 2 Bright A_Wander
		TNT1 A 0 A_Explode(5,32)
		TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(20,-20),random(20,-20),random(45,55),0,0,frandom(0.5,3.0),0,32)
		E16W D 2 Bright A_Wander
		TNT1 A 0 A_Explode(5,32)
		TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(20,-20),random(20,-20),random(45,55),0,0,frandom(0.5,3.0),0,32)
		E16W E 2 Bright A_Wander
		TNT1 A 0 A_Explode(5,32)
		TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(20,-20),random(20,-20),random(45,55),0,0,frandom(0.5,3.0),0,32)
		E16W E 2 Bright A_Wander
		TNT1 A 0 A_Explode(5,32)
		TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(20,-20),random(20,-20),random(45,55),0,0,frandom(0.5,3.0),0,32)
		E16W F 2 Bright A_Wander
		TNT1 A 0 A_Explode(5,32)
		TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(20,-20),random(20,-20),random(45,55),0,0,frandom(0.5,3.0),0,32)
		E16W F 2 Bright A_Wander
		TNT1 A 0 A_Explode(5,32)
		TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(20,-20),random(20,-20),random(45,55),0,0,frandom(0.5,3.0),0,32)
		TNT1 A 0 A_GiveInventory("Counter",1)
		Goto Spawn+2

	ScreamandDecide:
		TNT1 A 0 A_Jump(200,"Burn1Fallen")
		TNT1 A 0 A_TakeInventory("Counter",255)
		Goto Spawn+2

	Burn1Fallen:
		E16D A 2 Bright
		TNT1 A 0 A_Explode(5,32)
		TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(20,-20),random(20,-20),random(45,55),0,0,frandom(0.5,3.0),0,32)
		E16D A 2 Bright
		TNT1 A 0 A_Explode(5,32)
		TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(20,-20),random(20,-20),random(45,55),0,0,frandom(0.5,3.0),0,32)
		E16D B 2 Bright
		TNT1 A 0 A_Explode(5,32)
		TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(20,-20),random(20,-20),random(45,55),0,0,frandom(0.5,3.0),0,32)
		E16D B 2 Bright
		TNT1 A 0 A_Explode(5,32)
		TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(20,-20),random(20,-20),random(45,55),0,0,frandom(0.5,3.0),0,32)

		E16D C 3 Bright
		TNT1 A 0 A_Explode(5,32)
		TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(15,-15),random(15,-15),random(20,25),0,0,frandom(0.5,3.0),0,32)
		E16D D 3 Bright
		TNT1 A 0 A_Explode(5,32)
		TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(15,-15),random(15,-15),random(20,25),0,0,frandom(0.5,3.0),0,32)
		E16D E 3 Bright
		TNT1 A 0 A_Explode(5,32)
		TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(15,-15),random(15,-15),random(20,25),0,0,frandom(0.5,3.0),0,32)
		E16D F 3 Bright
		TNT1 A 0 A_Explode(5,32)
		TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(15,-15),random(15,-15),random(20,25),0,0,frandom(0.5,3.0),0,32)
		E16D G 3 Bright
		TNT1 A 0 A_Explode(5,32)
		TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(15,-15),random(15,-15),random(20,25),0,0,frandom(0.5,3.0),0,32)
		E16D H 3 Bright
		TNT1 A 0 A_Explode(5,32)
		TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(15,-15),random(15,-15),random(20,25),0,0,frandom(0.5,3.0),0,32)

		TNT1 A 0 A_Jump(90,"Burn1End")
		E16D C 3 Bright
		TNT1 A 0 A_Explode(5,32)
		TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(15,-15),random(15,-15),random(20,25),0,0,frandom(0.5,3.0),0,32)
		E16D D 3 Bright
		TNT1 A 0 A_Explode(5,32)
		TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(15,-15),random(15,-15),random(20,25),0,0,frandom(0.5,3.0),0,32)
		E16D E 3 Bright
		TNT1 A 0 A_Explode(5,32)
		TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(15,-15),random(15,-15),random(20,25),0,0,frandom(0.5,3.0),0,32)
		E16D F 3 Bright
		TNT1 A 0 A_Explode(5,32)
		TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(15,-15),random(15,-15),random(20,25),0,0,frandom(0.5,3.0),0,32)
		E16D G 3 Bright
		TNT1 A 0 A_Explode(5,32)
		TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(15,-15),random(15,-15),random(20,25),0,0,frandom(0.5,3.0),0,32)
		E16D H 3 Bright
		TNT1 A 0 A_Explode(5,32)
		TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(15,-15),random(15,-15),random(20,25),0,0,frandom(0.5,3.0),0,32)
		Goto Burn1Fallen+16	//was 12
	Burn1End:
		E16D I 3 
		TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(10,-10),random(10,-10),random(20,25),0,0,frandom(0.5,3.0),0,32)
		E16D J 3 
		TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(10,-10),random(10,-10),random(20,25),0,0,frandom(0.5,3.0),0,32)
		E16D K 3 Bright 
		TNT1 A 0 A_SpawnItemEx("BurnSmoke",random(10,-10),random(10,-10),random(20,25),0,0,frandom(0.5,3.0),0,32)
		E16D L 4 
		E16D M -1
		Stop
	}
}




Actor GenericHumanoidBurn : GenericHumanBurn
{
	-SOLID
	-COUNTKILL
	+DONTSPLASH
	+FLOORCLIP
	Radius 20
	Height 56
	Speed 10
	PainChance 0
	DamageType Fire
	HitObituary "%o melted."
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_Jump(160,"Burn2")
		TNT1 A 0 A_SpawnItemEx("GenericHumanBurn1",0,0,0,0,0,0,0,32)
		Stop
	Burn2:
		TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(20,-20),random(20,-20),random(45,55),0,0,frandom(0.5,3.0),0,32)
		BURN A 3 Bright
		TNT1 A 0 A_Explode(8,32)
		TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(20,-20),random(20,-20),random(45,55),0,0,frandom(0.5,3.0),0,32)
		BURN B 3 Bright
		TNT1 A 0 A_Explode(8,32)
		TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(20,-20),random(20,-20),random(45,55),0,0,frandom(0.5,3.0),0,32)
		BURN C 3 Bright
		TNT1 A 0 A_Explode(7,32)
		TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(20,-20),random(20,-20),random(45,55),0,0,frandom(0.5,3.0),0,32)
		BURN D 3 Bright
		TNT1 A 0 A_Explode(7,32)
		TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(20,-20),random(20,-20),random(45,55),0,0,frandom(0.5,3.0),0,32)
		BURN E 3 Bright
		TNT1 A 0 A_Explode(7,32)
		TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(20,-20),random(20,-20),random(45,55),0,0,frandom(0.5,3.0),0,32)
		BURN F 3 Bright
		TNT1 A 0 A_Explode(7,32)
		TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(20,-20),random(20,-20),random(45,55),0,0,frandom(0.5,3.0),0,32)
		BURN G 3 Bright
		TNT1 A 0 A_Explode(7,32)
		TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(20,-20),random(20,-20),random(45,55),0,0,frandom(0.5,3.0),0,32)
		BURN H 3 Bright
		TNT1 A 0 A_Explode(7,32)
		TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(20,-20),random(20,-20),random(45,55),0,0,frandom(0.5,3.0),0,32)
		BURN I 3 Bright
		TNT1 A 0 A_Explode(7,32)
		TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(20,-20),random(20,-20),random(45,55),0,0,frandom(0.5,3.0),0,32)
		BURN J 3 Bright
		TNT1 A 0 A_Explode(7,32)
		TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(20,-20),random(20,-20),random(45,55),0,0,frandom(0.5,3.0),0,32)
		BURN K 3 Bright
		TNT1 A 0 A_Explode(7,32)
		TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(20,-20),random(20,-20),random(45,55),0,0,frandom(0.5,3.0),0,32)
		BURN L 3 Bright
		TNT1 A 0 A_Explode(7,32)
		TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(20,-20),random(20,-20),random(45,55),0,0,frandom(0.5,3.0),0,32)
		BURN M 3 Bright
		TNT1 A 0 A_Explode(6,32)
		TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(20,-20),random(20,-20),random(45,55),0,0,frandom(0.5,3.0),0,32)
		BURN N 3 Bright
		TNT1 A 0 A_Explode(5,32)
		TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(20,-20),random(20,-20),random(20,55),0,0,frandom(0.5,3.0),0,32)
		BURN O 3 Bright
		TNT1 A 0 A_Explode(5,32)
		TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(20,-20),random(20,-20),random(20,45),0,0,frandom(0.5,3.0),0,32)
		BURN P 3 Bright
		TNT1 A 0 A_Explode(4,32)
		TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(20,-20),random(20,-20),random(20,45),0,0,frandom(0.5,3.0),0,32)
		BURN Q 3 Bright
		TNT1 A 0 A_Explode(3,32)
		TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(20,-20),random(20,-20),random(10,35),0,0,frandom(0.5,3.0),0,32)
		BURN R 3 Bright
		TNT1 A 0 A_Explode(3,32)
		TNT1 A 0 A_SpawnItemEx("BurnSmoke",random(20,-20),random(20,-20),random(10,35),0,0,frandom(0.5,3.0),0,32)
		BURN S 3 Bright
		TNT1 A 0 A_Explode(2,32)
		TNT1 A 0 A_SpawnItemEx("BurnSmoke",random(20,-20),random(20,-20),random(10,35),0,0,frandom(0.5,3.0),0,32)
		BURN T 3 BrighT
		TNT1 A 0 A_Explode(2,32)
		TNT1 A 0 A_SpawnItemEx("BurnSmoke",random(20,-20),random(20,-20),random(10,25),0,0,frandom(0.5,3.0),0,32)
		BURN U 3 BrighT
		TNT1 A 0 A_Explode(2,32)

		BURN V -1
		Stop
	}
}			

Actor SpycrabBurn : GenericHumanBurn1
{
	-SOLID
	-COUNTKILL
	+DONTSPLASH
	+FLOORCLIP
	Radius 20
	Height 56
	Speed 10
	PainChance 0
	Scale 0.45
	DamageType Fire
	HitObituary "%o melted."
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_PlaySound("spycrab/fire")

		TNT1 A 0 A_JumpIfInventory("Counter",5,"ScreamandDecide")
		E16W A 2 Bright A_Wander
		TNT1 A 0 A_Explode(5,32)
//		TNT1 A 0 A_SpawnItemEx("BurnMiniFlame",random(20,-20),random(20,-20),random(30,50),0,0,frandom(1.0,3.0),0,32)
		TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(20,-20),random(20,-20),random(45,55),0,0,frandom(0.5,3.0),0,32)
		E16W A 2 Bright A_Wander
		TNT1 A 0 A_Explode(5,32)
		TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(20,-20),random(20,-20),random(45,55),0,0,frandom(0.5,3.0),0,32)
		E16W B 2 Bright A_Wander
		TNT1 A 0 A_Explode(5,32)
		TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(20,-20),random(20,-20),random(45,55),0,0,frandom(0.5,3.0),0,32)
		E16W B 2 Bright A_Wander
		TNT1 A 0 A_Explode(5,32)
		TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(20,-20),random(20,-20),random(45,55),0,0,frandom(0.5,3.0),0,32)
		E16W C 2 Bright A_Wander
		TNT1 A 0 A_Explode(5,32)
		TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(20,-20),random(20,-20),random(45,55),0,0,frandom(0.5,3.0),0,32)
		E16W C 2 Bright A_Wander
		TNT1 A 0 A_Explode(5,32)
		TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(20,-20),random(20,-20),random(45,55),0,0,frandom(0.5,3.0),0,32)
		E16W D 2 Bright A_Wander
		TNT1 A 0 A_Explode(5,32)
		TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(20,-20),random(20,-20),random(45,55),0,0,frandom(0.5,3.0),0,32)
		E16W D 2 Bright A_Wander
		TNT1 A 0 A_Explode(5,32)
		TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(20,-20),random(20,-20),random(45,55),0,0,frandom(0.5,3.0),0,32)
		E16W E 2 Bright A_Wander
		TNT1 A 0 A_Explode(5,32)
		TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(20,-20),random(20,-20),random(45,55),0,0,frandom(0.5,3.0),0,32)
		E16W E 2 Bright A_Wander
		TNT1 A 0 A_Explode(5,32)
		TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(20,-20),random(20,-20),random(45,55),0,0,frandom(0.5,3.0),0,32)
		E16W F 2 Bright A_Wander
		TNT1 A 0 A_Explode(5,32)
		TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(20,-20),random(20,-20),random(45,55),0,0,frandom(0.5,3.0),0,32)
		E16W F 2 Bright A_Wander
		TNT1 A 0 A_Explode(5,32)
		TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(20,-20),random(20,-20),random(45,55),0,0,frandom(0.5,3.0),0,32)
		TNT1 A 0 A_GiveInventory("Counter",1)
		Goto Spawn+2

	ScreamandDecide:
		TNT1 A 0 A_Jump(200,"Burn1Fallen")
		TNT1 A 0 A_TakeInventory("Counter",255)
		Goto Spawn+2

	Burn1Fallen:
		E16D A 2 Bright
		TNT1 A 0 A_Explode(5,32)
		TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(20,-20),random(20,-20),random(45,55),0,0,frandom(0.5,3.0),0,32)
		E16D A 2 Bright
		TNT1 A 0 A_Explode(5,32)
		TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(20,-20),random(20,-20),random(45,55),0,0,frandom(0.5,3.0),0,32)
		E16D B 2 Bright
		TNT1 A 0 A_Explode(5,32)
		TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(20,-20),random(20,-20),random(45,55),0,0,frandom(0.5,3.0),0,32)
		E16D B 2 Bright
		TNT1 A 0 A_Explode(5,32)
		TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(20,-20),random(20,-20),random(45,55),0,0,frandom(0.5,3.0),0,32)

		E16D C 3 Bright
		TNT1 A 0 A_Explode(5,32)
		TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(15,-15),random(15,-15),random(20,25),0,0,frandom(0.5,3.0),0,32)
		E16D D 3 Bright
		TNT1 A 0 A_Explode(5,32)
		TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(15,-15),random(15,-15),random(20,25),0,0,frandom(0.5,3.0),0,32)
		E16D E 3 Bright
		TNT1 A 0 A_Explode(5,32)
		TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(15,-15),random(15,-15),random(20,25),0,0,frandom(0.5,3.0),0,32)
		E16D F 3 Bright
		TNT1 A 0 A_Explode(5,32)
		TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(15,-15),random(15,-15),random(20,25),0,0,frandom(0.5,3.0),0,32)
		E16D G 3 Bright
		TNT1 A 0 A_Explode(5,32)
		TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(15,-15),random(15,-15),random(20,25),0,0,frandom(0.5,3.0),0,32)
		E16D H 3 Bright
		TNT1 A 0 A_Explode(5,32)
		TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(15,-15),random(15,-15),random(20,25),0,0,frandom(0.5,3.0),0,32)

		TNT1 A 0 A_Jump(90,"Burn1End")
		E16D C 3 Bright
		TNT1 A 0 A_Explode(5,32)
		TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(15,-15),random(15,-15),random(20,25),0,0,frandom(0.5,3.0),0,32)
		E16D D 3 Bright
		TNT1 A 0 A_Explode(5,32)
		TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(15,-15),random(15,-15),random(20,25),0,0,frandom(0.5,3.0),0,32)
		E16D E 3 Bright
		TNT1 A 0 A_Explode(5,32)
		TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(15,-15),random(15,-15),random(20,25),0,0,frandom(0.5,3.0),0,32)
		E16D F 3 Bright
		TNT1 A 0 A_Explode(5,32)
		TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(15,-15),random(15,-15),random(20,25),0,0,frandom(0.5,3.0),0,32)
		E16D G 3 Bright
		TNT1 A 0 A_Explode(5,32)
		TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(15,-15),random(15,-15),random(20,25),0,0,frandom(0.5,3.0),0,32)
		E16D H 3 Bright
		TNT1 A 0 A_Explode(5,32)
		TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(15,-15),random(15,-15),random(20,25),0,0,frandom(0.5,3.0),0,32)
		Goto Burn1Fallen+16	//was 12
	Burn1End:
		E16D I 3 
		TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(10,-10),random(10,-10),random(20,25),0,0,frandom(0.5,3.0),0,32)
		E16D J 3 
		TNT1 AA 0 A_SpawnItemEx("BurnSmoke",random(10,-10),random(10,-10),random(20,25),0,0,frandom(0.5,3.0),0,32)
		E16D K 3 Bright 
		TNT1 A 0 A_SpawnItemEx("BurnSmoke",random(10,-10),random(10,-10),random(20,25),0,0,frandom(0.5,3.0),0,32)
		E16D L 4 
		E16D M -1
		Stop
	}
}


//===============================================================================
//===============================================================================
//
//	A_TossGib with blood trails
//
//===============================================================================
//===============================================================================

Actor NewMeat replaces Meat
{
	var int user_t;
	+THRUACTORS
	-NOLIFTDROP
	-SOLID
	+DROPOFF
	+NOTELEPORT
	+CORPSE
	+NOTELESTOMP
	Radius 6
	Height 5
	States
	{
	Spawn:
		TNT1 A 0 NoDelay A_SetUserVar(user_t,tid)
		TNT1 A 0 Thing_ChangeTID(0,0)
		TNT1 A 0 A_Jump(256,"m1","m2","m3","m4","m5","m6","m7","m8","m9","m10","m11","m12","m13","m14","m15","m16","m17","m18","m19","m20")
		Stop
	m1:
		MEAT AA 2 A_SpawnItemEx("GibBloodTrailMediumSize",random(3,-3),random(3,-3),random(3,-3),0,0,0,0,1|SXF_USEBLOODCOLOR)
		"####" "#" 0 A_CheckFloor("md1")
		Loop
	m2:
		MEAT BB 2 A_SpawnItemEx("GibBloodTrailMediumSize",random(3,-3),random(3,-3),random(3,-3),0,0,0,0,1|SXF_USEBLOODCOLOR)
		"####" "#" 0 A_CheckFloor("md1")
		Loop
	m3:
		MEAT CC 2 A_SpawnItemEx("GibBloodTrailMediumSize",random(3,-3),random(3,-3),random(3,-3),0,0,0,0,1|SXF_USEBLOODCOLOR)
		"####" "#" 0 A_CheckFloor("md1")
		Loop
	m4:
		MEAT DD 2 A_SpawnItemEx("GibBloodTrailMediumSize",random(3,-3),random(3,-3),random(3,-3),0,0,0,0,1|SXF_USEBLOODCOLOR)
		"####" "#" 0 A_CheckFloor("md1")
		Loop
	m5:
		MEAT EE 2 A_SpawnItemEx("GibBloodTrailMediumSize",random(3,-3),random(3,-3),random(3,-3),0,0,0,0,1|SXF_USEBLOODCOLOR)
		"####" "#" 0 A_CheckFloor("md1")
		Loop
	m6:
		MEAT FF 2 A_SpawnItemEx("GibBloodTrailMediumSize",random(3,-3),random(3,-3),random(3,-3),0,0,0,0,1|SXF_USEBLOODCOLOR)
		"####" "#" 0 A_CheckFloor("md1")
		Loop
	m7:
		MEAT GG 2 A_SpawnItemEx("GibBloodTrailMediumSize",random(3,-3),random(3,-3),random(3,-3),0,0,0,0,1|SXF_USEBLOODCOLOR)
		"####" "#" 0 A_CheckFloor("md1")
		Loop
	m8:
		MEAT HH 2 A_SpawnItemEx("GibBloodTrailMediumSize",random(3,-3),random(3,-3),random(3,-3),0,0,0,0,1|SXF_USEBLOODCOLOR)
		"####" "#" 0 A_CheckFloor("md1")
		Loop
	m9:
		MEAT II 2 A_SpawnItemEx("GibBloodTrailMediumSize",random(3,-3),random(3,-3),random(3,-3),0,0,0,0,1|SXF_USEBLOODCOLOR)
		"####" "#" 0 A_CheckFloor("md1")
		Loop
	m10:
		MEAT JJ 2 A_SpawnItemEx("GibBloodTrailMediumSize",random(3,-3),random(3,-3),random(3,-3),0,0,0,0,1|SXF_USEBLOODCOLOR)
		"####" "#" 0 A_CheckFloor("md1")
		Loop
	m11:
		MEAT KK 2 A_SpawnItemEx("GibBloodTrailMediumSize",random(3,-3),random(3,-3),random(3,-3),0,0,0,0,1|SXF_USEBLOODCOLOR)
		"####" "#" 0 A_CheckFloor("md1")
		Loop
	m12:
		MEAT LL 2 A_SpawnItemEx("GibBloodTrailMediumSize",random(3,-3),random(3,-3),random(3,-3),0,0,0,0,1|SXF_USEBLOODCOLOR)
		"####" "#" 0 A_CheckFloor("md1")
		Loop
	m13:
		MEAT MM 2 A_SpawnItemEx("GibBloodTrailMediumSize",random(3,-3),random(3,-3),random(3,-3),0,0,0,0,1|SXF_USEBLOODCOLOR)
		"####" "#" 0 A_CheckFloor("md1")
		Loop
	m14:
		MEAT NN 2 A_SpawnItemEx("GibBloodTrailMediumSize",random(3,-3),random(3,-3),random(3,-3),0,0,0,0,1|SXF_USEBLOODCOLOR)
		"####" "#" 0 A_CheckFloor("md1")
		Loop
	m15:
		MEAT OO 2 A_SpawnItemEx("GibBloodTrailMediumSize",random(3,-3),random(3,-3),random(3,-3),0,0,0,0,1|SXF_USEBLOODCOLOR)
		"####" "#" 0 A_CheckFloor("md1")
		Loop
	m16:
		MEAT PP 2 A_SpawnItemEx("GibBloodTrailMediumSize",random(3,-3),random(3,-3),random(3,-3),0,0,0,0,1|SXF_USEBLOODCOLOR)
		"####" "#" 0 A_CheckFloor("md1")
		Loop
	m17:
		MEAT QQ 2 A_SpawnItemEx("GibBloodTrailMediumSize",random(3,-3),random(3,-3),random(3,-3),0,0,0,0,1|SXF_USEBLOODCOLOR)
		"####" "#" 0 A_CheckFloor("md1")
		Loop
	m18:
		MEAT RR 2 A_SpawnItemEx("GibBloodTrailMediumSize",random(3,-3),random(3,-3),random(3,-3),0,0,0,0,1|SXF_USEBLOODCOLOR)
		"####" "#" 0 A_CheckFloor("md1")
		Loop
	m19:
		MEAT SS 2 A_SpawnItemEx("GibBloodTrailMediumSize",random(3,-3),random(3,-3),random(3,-3),0,0,0,0,1|SXF_USEBLOODCOLOR)
		"####" "#" 0 A_CheckFloor("md1")
		Loop
	m20:
		MEAT TT 2 A_SpawnItemEx("GibBloodTrailMediumSize",random(3,-3),random(3,-3),random(3,-3),0,0,0,0,1|SXF_USEBLOODCOLOR)
		"####" "#" 0 A_CheckFloor("md1")
		Loop

// when the gib crashes:
	md1:
		"####" "#" 350
		"####" "#" 1 A_FadeOut
		Wait
	}
}

Actor NewJunk : Junk replaces Junk
{
	+NOTELESTOMP
	+THRUACTORS
}


//***********************************
Actor GreenGib
{
	+NOCLIP
	RenderStyle None
	Radius 1
	Height 1
	Translation "32:47=123:127", "169:191=112:127"
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_CheckSight("Spawn2")
		TNT1 AA 0 A_SpawnItemEx("NewMeat",0,0,random(10,40),random(-7,7),random(-7,7),random(1,16),random(1,359),1,0,tid)
		TNT1 A 1
		Stop
	Spawn2:
		TNT1 A 0 A_TossGib
		TNT1 A 1
		Stop
	}
}

Actor GreenGibSp : GreenGib
{
	Translation "32:47=123:127", "169:191=112:127"
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_CheckSight("Spawn2")
		TNT1 AAAAAAAAAAAAAA 0 A_SpawnItemEx("NewMeat",0,0,random(10,40),random(-7,7),random(-7,7),random(1,16),random(1,359),1,0,tid)
		TNT1 AA 0 A_SpawnItemEx("BloodGib3",0,0,0,random(-7,7),0,0,random(1,359),1,0,tid)
		TNT1 AA 0 A_SpawnItemEx("BloodGib4",0,0,0,random(-7,7),0,0,random(1,359),1,0,tid)
		TNT1 A 1
		Stop
	Spawn2:
		TNT1 A 0
		TNT1 AAAA 0 A_SpawnItemEx("NewMeat",0,0,random(10,40),random(-7,7),random(-7,7),random(1,16),random(1,359),1,0,tid)
		TNT1 A 0 A_SpawnItemEx("BloodGib3",0,0,0,random(-7,7),0,0,random(1,359),1,0,tid)
		TNT1 A 0 A_SpawnItemEx("BloodGib4",0,0,0,random(-7,7),0,0,random(1,359),1,0,tid)
		TNT1 A 1
		Stop
	}
}

//***********************************
Actor BlueGib
{
	+NOCLIP
	RenderStyle None
	Radius 1
	Height 1
	Translation "32:47=204:207", "169:191=196:205"
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_CheckSight("Spawn2")
		TNT1 AA 0 A_SpawnItemEx("NewMeat",0,0,random(10,40),random(-7,7),random(-7,7),random(1,16),random(1,359),1,0,tid)
		TNT1 A 1
		Stop
	Spawn2:
		TNT1 A 0 A_TossGib
		TNT1 A 1
		Stop
	}
}

Actor BlueGibSp : BlueGib
{
	Translation "32:47=204:207", "169:191=196:205"
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_CheckSight("Spawn2")
		TNT1 AAAAAAAAAAAAAA 0 A_SpawnItemEx("NewMeat",0,0,random(10,40),random(-7,7),random(-7,7),random(1,16),random(1,359),1,0,tid)
		TNT1 AA 0 A_SpawnItemEx("BloodGib3",0,0,0,random(-7,7),0,0,random(1,359),1,0,tid)
		TNT1 AA 0 A_SpawnItemEx("BloodGib4",0,0,0,random(-7,7),0,0,random(1,359),1,0,tid)
		TNT1 A 1
		Stop
	Spawn2:
		TNT1 A 0
		TNT1 AAAA 0 A_SpawnItemEx("NewMeat",0,0,random(10,40),random(-7,7),random(-7,7),random(1,16),random(1,359),1,0,tid)
		TNT1 A 0 A_SpawnItemEx("BloodGib3",0,0,0,random(-7,7),0,0,random(1,359),1,0,tid)
		TNT1 A 0 A_SpawnItemEx("BloodGib4",0,0,0,random(-7,7),0,0,random(1,359),1,0,tid)
		TNT1 A 1
		Stop
	}
}


//***********************************
Actor OrangeGib
{
	+NOCLIP
	RenderStyle None
	Radius 1
	Height 1
	Translation "32:47=219:223", "169:191=213:223"
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_CheckSight("Spawn2")
		TNT1 A 0 A_SpawnItemEx("NewMeat",0,0,random(10,40),random(-7,7),random(-7,7),random(1,16),random(1,359),1,0,tid)
		TNT1 A 0 A_TossGib
		TNT1 A 1
		Stop
	Spawn2:
		TNT1 A 0 A_TossGib
		TNT1 A 1
		Stop
	}
}

Actor OrangeGibSp : GreenGib
{
	Translation "32:47=219:223", "169:191=213:223"
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_CheckSight("Spawn2")
		TNT1 AAAAAAAAA 0 A_SpawnItemEx("NewMeat",0,0,random(10,40),random(-7,7),random(-7,7),random(1,16),random(1,359),1,0,tid)
		TNT1 AAAAA 0 A_TossGib
		TNT1 AA 0 A_SpawnItemEx("BloodGib3",0,0,0,random(-7,7),0,0,random(1,359),1,0,tid)
		TNT1 AA 0 A_SpawnItemEx("BloodGib4",0,0,0,random(-7,7),0,0,random(1,359),1,0,tid)
		TNT1 A 1
		Stop
	Spawn2:
		TNT1 A 0
		TNT1 AA 0 A_SpawnItemEx("NewMeat",0,0,random(10,40),random(-7,7),random(-7,7),random(1,16),random(1,359),1,0,tid)
		TMT1 AA 0 A_TossGib
		TNT1 A 0 A_SpawnItemEx("BloodGib3",0,0,0,random(-7,7),0,0,random(1,359),1,0,tid)
		TNT1 A 0 A_SpawnItemEx("BloodGib4",0,0,0,random(-7,7),0,0,random(1,359),1,0,tid)
		TNT1 A 1
		Stop
	}
}


//***********************************
Actor GrayGib
{
	+NOCLIP
	RenderStyle None
	Radius 1
	Height 1
	Translation "32:47=104:111", "169:191=80:106"
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_CheckSight("Spawn2")
		TNT1 AA 0 A_SpawnItemEx("NewMeat",0,0,random(10,40),random(-7,7),random(-7,7),random(1,16),random(1,359),1,0,tid)
		TNT1 A 1
		Stop
	Spawn2:
		TNT1 A 0 A_TossGib
		TNT1 A 1
		Stop
	}
}

Actor GrayGibSp : BlueGib
{
	Translation "32:47=104:111", "169:191=80:106"
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_CheckSight("Spawn2")
		TNT1 AAAAAAAAAAAAA 0 A_SpawnItemEx("NewMeat",0,0,random(10,40),random(-7,7),random(-7,7),random(1,16),random(1,359),1,0,tid)
		TNT1 AAAA 0 A_SpawnItemEx("BloodGib3",0,0,0,random(-7,7),0,0,random(1,359),1,0,tid)
		TNT1 AA 0 A_SpawnItemEx("BloodGib4",0,0,0,random(-7,7),0,0,random(1,359),1,0,tid)
		TNT1 A 1
		Stop
	Spawn2:
		TNT1 A 0
		TNT1 AA 0 A_SpawnItemEx("NewMeat",0,0,random(10,40),random(-7,7),random(-7,7),random(1,16),random(1,359),1,0,tid)
		TMT1 AA 0 A_TossGib
		TNT1 A 0 A_SpawnItemEx("BloodGib3",0,0,0,random(-7,7),0,0,random(1,359),1,0,tid)
		TNT1 A 0 A_SpawnItemEx("BloodGib4",0,0,0,random(-7,7),0,0,random(1,359),1,0,tid)
		TNT1 A 1
		Stop
	}
}

//***********************************
Actor PurpleGib
{
	+NOCLIP
	RenderStyle None
	Radius 1
	Height 1
	Translation "32:47=254:254", "169:191=253:253"
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_CheckSight("Spawn2")
		TNT1 A 0 A_SpawnItemEx("NewMeat",0,0,random(10,40),random(-7,7),random(-7,7),random(1,16),random(1,359),1,0,tid)
		TNT1 A 0 A_TossGib
		TNT1 A 1
		Stop
	Spawn2:
		TNT1 A 0 A_TossGib
		TNT1 A 1
		Stop
	}
}

Actor PurpleGibSp : GreenGib
{
	Translation "32:47=254:254", "169:191=253:253"
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_CheckSight("Spawn2")
		TNT1 AAAAAAAA 0 A_SpawnItemEx("NewMeat",0,0,random(10,40),random(-7,7),random(-7,7),random(1,16),random(1,359),1,0,tid)
		TNT1 AAAAAAAA 0 A_TossGib
		TNT1 A 0 A_SpawnItemEx("BloodGib3",0,0,0,random(-7,7),0,0,random(1,359),1,0,tid)
		TNT1 A 0 A_SpawnItemEx("BloodGib4",0,0,0,random(-7,7),0,0,random(1,359),1,0,tid)
		TNT1 A 0 A_SpawnItemEx("BloodGib3",0,0,0,random(-7,7),0,0,random(1,359),32,0,tid)
		TNT1 A 0 A_SpawnItemEx("BloodGib4",0,0,0,random(-7,7),0,0,random(1,359),32,0,tid)
		TNT1 A 1
		Stop
	Spawn2:
		TNT1 A 0
		TNT1 AA 0 A_SpawnItemEx("NewMeat",0,0,random(10,40),random(-7,7),random(-7,7),random(1,16),random(1,359),1,0,tid)
		TMT1 AA 0 A_TossGib
		TNT1 A 0 A_SpawnItemEx("BloodGib3",0,0,0,random(-7,7),0,0,random(1,359),1,0,tid)
		TNT1 A 0 A_SpawnItemEx("BloodGib4",0,0,0,random(-7,7),0,0,random(1,359),1,0,tid)
		TNT1 A 1
		Stop
	}
}

//===============================================================================
//===============================================================================
//
//	Hexen2 style Gibs
//
//===============================================================================
//===============================================================================

Actor SmallGibDropper
{
	var int user_t;
	Projectile
	+THRUACTORS
	RenderStyle None
	States
	{
	Spawn:
		TNT1 A 0 A_CheckSight("Simple")
		TNT1 A 0 A_Jump(180,"Drop2","Drop3","Drop4")
		TNT1 A 0 A_SpawnItemEx("HGib1Small",0,0,0,random(-8,8),0,0,random(1,359),1|SXF_USEBLOODCOLOR,0,tid)
		TNT1 A 0 A_SpawnItemEx("HGib2Small",0,0,0,random(-8,8),0,0,random(1,359),1|SXF_USEBLOODCOLOR,0,tid)
		TNT1 A 0 A_SpawnItemEx("HGib3Small",0,0,0,random(-8,8),0,0,random(1,359),1|SXF_USEBLOODCOLOR,0,tid)
		TNT1 A 1
		Stop
	Drop2:
		TNT1 A 0 A_SpawnItemEx("HGib1SmallMirr",0,0,0,random(-8,8),0,0,random(1,359),1|SXF_USEBLOODCOLOR,0,tid)
		TNT1 A 0 A_SpawnItemEx("HGib2SmallMirr",0,0,0,random(-8,8),0,0,random(1,359),1|SXF_USEBLOODCOLOR,0,tid)
		TNT1 A 0 A_SpawnItemEx("HGib3SmallMirr",0,0,0,random(-8,8),0,0,random(1,359),1|SXF_USEBLOODCOLOR,0,tid)
		TNT1 A 1
		Stop
	Drop3:
		TNT1 A 0 A_SpawnItemEx("HGib1Small",0,0,0,random(-8,8),0,0,random(1,359),1|SXF_USEBLOODCOLOR,0,tid)
		TNT1 A 0 A_SpawnItemEx("HGib2SmallMirr",0,0,0,random(-8,8),0,0,random(1,359),1|SXF_USEBLOODCOLOR,0,tid)
		TNT1 A 0 A_SpawnItemEx("HGib3Small",0,0,0,random(-8,8),0,0,random(1,359),1|SXF_USEBLOODCOLOR,0,tid)
		TNT1 A 1
		Stop
	Drop4:
		TNT1 A 0 A_SpawnItemEx("HGib1SmallMirr",0,0,0,random(-8,8),0,0,random(1,359),1|SXF_USEBLOODCOLOR,0,tid)
		TNT1 A 0 A_SpawnItemEx("HGib2Small",0,0,0,random(-8,8),0,0,random(1,359),1|SXF_USEBLOODCOLOR,0,tid)
		TNT1 A 0 A_SpawnItemEx("HGib3SmallMirr",0,0,0,random(-8,8),0,0,random(1,359),1|SXF_USEBLOODCOLOR,0,tid)
		TNT1 A 1
		Stop
	Simple:
		TNT1 A 0 A_SpawnItemEx("HGib1Small",0,0,0,random(-8,8),0,0,random(1,359),1|SXF_USEBLOODCOLOR,0,tid)
		Stop
	}
}

Actor HGib1Small
{
	var int user_t;
	Projectile
	+DOOMBOUNCE
	-NOGRAVITY
	-NOBLOCKMAP
	+THRUACTORS
	BounceFActor 0.45
	Speed 4
	Scale 0.07
	States
	{
	Spawn:
		TNT1 A 0 NoDelay A_SetUserVar(user_t,tid)
		TNT1 A 0 Thing_ChangeTID(0,0)
		TNT1 A 1 ThrustThingZ(0,random(10,60),0,1)
		GIB7 AABBCCDDEEFFGGHHIIJJKKLLMM 2 A_SpawnItemEx("GibBloodSmall",0,0,0,0,0,0,0,1|SXF_USEBLOODCOLOR)
		Goto Death
	Death:
		GIB7 M 350 A_JumpIf(user_t != 0,1) //Skip the duration.
		GIB7 M 2 A_FadeOut
		Wait
	}
}


Actor HGib1SmallMirr : HGib1Small
{
	Speed 5
	States
	{
	Spawn:
		TNT1 A 0 NoDelay A_SetUserVar(user_t,tid)
		TNT1 A 0 Thing_ChangeTID(0,0)
		TNT1 A 1 ThrustThingZ(0,random(10,60),0,1)
		GIB7 NNOOPPQQRRSSTTUUVVWWXXYYZZ 2 A_SpawnItemEx("GibBloodSmall",0,0,0,0,0,0,0,1|SXF_USEBLOODCOLOR)
		Goto Death
	Death:
		GIB7 Z 360 A_JumpIf(user_t != 0,1)
		GIB7 Z 2 A_FadeOut
		Wait
	}
}

Actor HGib2Small : HGib1Small
{
	Speed 6
	States
	{
	Spawn:
		TNT1 A 0 NoDelay A_SetUserVar(user_t,tid)
		TNT1 A 0 Thing_ChangeTID(0,0)
		TNT1 A 1 ThrustThingZ(0,random(10,60),0,1)
		GIB8 AABBCCDDEEFFGGHHIIJJKKLLMM 2 A_SpawnItemEx("GibBloodSmall",0,0,0,0,0,0,0,1|SXF_USEBLOODCOLOR)
		Goto Death
	Death:
		GIB8 M 340 A_JumpIf(user_t != 0,1)
		GIB8 M 2 A_FadeOut
		Wait
	}
}

Actor HGib2SmallMirr : HGib1Small
{
	Speed 3
	States
	{
	Spawn:
		TNT1 A 0 NoDelay A_SetUserVar(user_t,tid)
		TNT1 A 0 Thing_ChangeTID(0,0)
		TNT1 A 1 ThrustThingZ(0,random(10,60),0,1)
		GIB8 NNOOPPQQRRSSTTUUVVWWXXYYZZ 2 A_SpawnItemEx("GibBloodSmall",0,0,0,0,0,0,0,1|SXF_USEBLOODCOLOR)
		Goto Death
	Death:
		GIB8 Z 350 A_JumpIf(user_t != 0,1)
		GIB8 Z 2 A_FadeOut
		Wait
	}
}

Actor HGib3Small : HGib1Small
{
	Speed 2
	States
	{
	Spawn:
		TNT1 A 0 NoDelay A_SetUserVar(user_t,tid)
		TNT1 A 0 Thing_ChangeTID(0,0)
		TNT1 A 1 ThrustThingZ(0,random(10,60),0,1)
		GIB9 AABBCCDDEEFFGGHHIIJJKKLL 2 A_SpawnItemEx("GibBloodSmall",0,0,0,0,0,0,0,1|SXF_USEBLOODCOLOR)
		Goto Death
	Death:
		GIB9 L 360 A_JumpIf(user_t != 0,1)
		GIB9 L 2 A_FadeOut
		Wait
	}
}

Actor HGib3SmallMirr : HGib1Small
{
	Speed 4
	States
	{
	Spawn:
		TNT1 A 0 NoDelay A_SetUserVar(user_t,tid)
		TNT1 A 0 Thing_ChangeTID(0,0)
		TNT1 A 1 ThrustThingZ(0,random(10,60),0,1)
		GIB8 NNOOPPQQRRSSTTUUVVWWXXYYZZ 2 A_SpawnItemEx("GibBloodSmall",0,0,0,0,0,0,0,1|SXF_USEBLOODCOLOR)
		Goto Death
	Death:
		GIB9 Z 350 A_JumpIf(user_t != 0,1)
		GIB9 Z 2 A_FadeOut
		Wait
	}
}
   

//***************************************************
//***************************************************
Actor GibDropper
{
	+THRUACTORS
	Projectile
	RenderStyle None
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_CheckSight("Simple")
		TNT1 A 0 A_Jump(180,"Drop2","Drop3","Drop4")
		TNT1 A 0 A_SpawnItemEx("HGib1",0,0,0,random(-8,8),0,0,random(1,359),1|SXF_USEBLOODCOLOR,0,tid)
		TNT1 A 0 A_SpawnItemEx("HGib2",0,0,0,random(-8,8),0,0,random(1,359),1|SXF_USEBLOODCOLOR,0,tid)
		TNT1 A 0 A_SpawnItemEx("HGib3",0,0,0,random(-8,8),0,0,random(1,359),1|SXF_USEBLOODCOLOR,0,tid)
		TNT1 A 1
		Stop
	Drop2:
		TNT1 A 0 A_SpawnItemEx("HGib1Mirr",0,0,0,random(-8,8),0,0,random(1,359),1|SXF_USEBLOODCOLOR,0,tid)
		TNT1 A 0 A_SpawnItemEx("HGib2Mirr",0,0,0,random(-8,8),0,0,random(1,359),1|SXF_USEBLOODCOLOR,0,tid)
		TNT1 A 0 A_SpawnItemEx("HGib3Mirr",0,0,0,random(-8,8),0,0,random(1,359),1|SXF_USEBLOODCOLOR,0,tid)
		TNT1 A 1
		Stop
	Drop3:
		TNT1 A 0 A_SpawnItemEx("HGib1",0,0,0,random(-8,8),0,0,random(1,359),1|SXF_USEBLOODCOLOR,0,tid)
		TNT1 A 0 A_SpawnItemEx("HGib2Mirr",0,0,0,random(-8,8),0,0,random(1,359),1|SXF_USEBLOODCOLOR,0,tid)
		TNT1 A 0 A_SpawnItemEx("HGib3",0,0,0,random(-8,8),0,0,random(1,359),1|SXF_USEBLOODCOLOR,0,tid)
		TNT1 A 1
		Stop
	Drop4:
		TNT1 A 0 A_SpawnItemEx("HGib1Mirr",0,0,0,random(-8,8),0,0,random(1,359),1|SXF_USEBLOODCOLOR,0,tid)
		TNT1 A 0 A_SpawnItemEx("HGib2",0,0,0,random(-8,8),0,0,random(1,359),1|SXF_USEBLOODCOLOR,0,tid)
		TNT1 A 0 A_SpawnItemEx("HGib3Mirr",0,0,0,random(-8,8),0,0,random(1,359),1|SXF_USEBLOODCOLOR,0,tid)
		TNT1 A 1
		Stop
	Simple:
		TNT1 A 0 A_SpawnItemEx("HGib1Small",0,0,0,random(-8,8),0,0,random(1,359),1|SXF_USEBLOODCOLOR,0,tid)
		Stop
	}
}

Actor HGib1
{
	var int user_t;
	Projectile
	-NOGRAVITY
	-NOBLOCKMAP
	+DOOMBOUNCE
	+THRUACTORS
	BounceFActor 0.4
	Speed 4
	Scale 0.1
	States
	{
	Spawn:
		TNT1 A 0 NoDelay A_SetUserVar(user_t,tid)
		TNT1 A 0 Thing_ChangeTID(0,0)
		TNT1 A 1 ThrustThingZ(0,random(10,50),0,1)
		GIB7 AABBCCDDEEFFGGHHIIJJKKLLMM 2 A_SpawnItemEx("GibBloodSmall",0,0,0,0,0,0,0,1|SXF_USEBLOODCOLOR)
		Goto Death
	Death:
		GIB7 M 340 A_JumpIf(user_t != 0,1)
		GIB7 M 2 A_FadeOut
		Wait
	}
}
Actor HGib1Mirr : HGib1
{
	Speed 5
	States
	{
	Spawn:
		TNT1 A 0 NoDelay A_SetUserVar(user_t,tid)
		TNT1 A 0 Thing_ChangeTID(0,0)
		TNT1 A 1 ThrustThingZ(0,random(10,50),0,1)
		GIB7 NNOOPPQQRRSSTTUUVVWWXXYYZZ 2 A_SpawnItemEx("GibBloodSmall",0,0,0,0,0,0,0,1|SXF_USEBLOODCOLOR)
		Goto Death
	Death:
		GIB7 Z 330 A_JumpIf(user_t != 0,1)
		GIB7 Z 2 A_FadeOut
		Wait
	}
}

Actor HGib2 : HGib1
{
	Speed 6
	States
	{
	Spawn:
		TNT1 A 0 NoDelay A_SetUserVar(user_t,tid)
		TNT1 A 0 Thing_ChangeTID(0,0)
		TNT1 A 1 ThrustThingZ(0,random(10,50),0,1)
		GIB8 AABBCCDDEEFFGGHHIIJJKKLLMM 2 A_SpawnItemEx("GibBloodSmall",0,0,0,0,0,0,0,1|SXF_USEBLOODCOLOR)
		Goto Death
	Death:
		GIB8 M 320 A_JumpIf(user_t != 0,1)
		GIB8 M 2 A_FadeOut
		Wait
	}
}


Actor HGib2Mirr : HGib1
{
	Speed 5
	States
	{
	Spawn:
		TNT1 A 0 NoDelay A_SetUserVar(user_t,tid)
		TNT1 A 0 Thing_ChangeTID(0,0)
		TNT1 A 1 ThrustThingZ(0,random(10,50),0,1)
		GIB8 NNOOPPQQRRSSTTUUVVWWXXYYZZ 2 A_SpawnItemEx("GibBloodSmall",0,0,0,0,0,0,0,1|SXF_USEBLOODCOLOR)
		Goto Death
	Death:
		GIB8 Z 350 A_JumpIf(user_t != 0,1)
		GIB8 Z 2 A_FadeOut
		Wait
	}
}

Actor HGib3 : HGib1
{
	Speed 6
	States
	{
	Spawn:
		TNT1 A 0 NoDelay A_SetUserVar(user_t,tid)
		TNT1 A 0 Thing_ChangeTID(0,0)
		TNT1 A 1 ThrustThingZ(0,random(10,50),0,1)
		GIB9 AABBCCDDEEFFGGHHIIJJKKLL 2 A_SpawnItemEx("GibBloodSmall",0,0,0,0,0,0,0,1|SXF_USEBLOODCOLOR)
		Goto Death
	Death:
		GIB9 L 370 A_JumpIf(user_t != 0,1)
		GIB9 L 2 A_FadeOut
		Wait
	}
}

Actor HGib3Mirr : HGib1
{
	Speed 5
	States
	{
	Spawn:
		TNT1 A 0 NoDelay A_SetUserVar(user_t,tid)
		TNT1 A 0 Thing_ChangeTID(0,0)
		TNT1 A 1 ThrustThingZ(0,random(10,50),0,1)
		GIB9 MMNNOOPPQQRRSSTTUUVVWWXX 2 A_SpawnItemEx("GibBloodSmall",0,0,0,0,0,0,0,1|SXF_USEBLOODCOLOR)
		Goto Death
	Death:
		GIB9 X 355 A_JumpIf(user_t != 0,1)
		GIB9 X 2 A_FadeOut
		Wait
	}
}

Actor GibBloodSmall : MCBloodParticle  
{ }



//===============================================================================
//===============================================================================
//
//	Quake gibs
//
//===============================================================================
//===============================================================================

Actor QuakeGibDropper
{
	Projectile
	+THRUACTORS
	RenderStyle None
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_CheckSight("Simple")
		TNT1 AAA 0 A_Jump(180,"Drop2","Drop3","Drop4")
		TNT1 AAA 0 A_SpawnItemEx("Gib1",0,0,0,random(-8,8),0,0,random(1,359),1|SXF_USEBLOODCOLOR,0,tid)
		TNT1 A 0 A_SpawnItemEx("Gib2",0,0,0,random(-8,8),0,0,random(1,359),1|SXF_USEBLOODCOLOR,0,tid)
		TNT1 A 0 A_SpawnItemEx("GibTorso",0,0,0,random(-8,8),0,0,random(1,359),1|SXF_USEBLOODCOLOR,0,tid)
		TNT1 A 1
		Stop
	Drop2:
		TNT1 AAA 0 A_SpawnItemEx("Gib1",0,0,0,random(-8,8),0,0,random(1,359),1|SXF_USEBLOODCOLOR,0,tid)
		TNT1 AA 0 A_SpawnItemEx("Gib2",0,0,0,random(-8,8),0,0,random(1,359),1|SXF_USEBLOODCOLOR,0,tid)
		TNT1 A 0 A_SpawnItemEx("GibTorso",0,0,0,random(-8,8),0,0,random(1,359),1|SXF_USEBLOODCOLOR,0,tid)
		TNT1 A 1
		Stop
	Drop3:
		TNT1 AA 0 A_SpawnItemEx("Gib1",0,0,0,random(-8,8),0,0,random(1,359),1|SXF_USEBLOODCOLOR,0,tid)
		TNT1 AAA 0 A_SpawnItemEx("Gib2",0,0,0,random(-8,8),0,0,random(1,359),1|SXF_USEBLOODCOLOR,0,tid)
		TNT1 A 0 A_SpawnItemEx("GibTorso",0,0,0,random(-8,8),0,0,random(1,359),1|SXF_USEBLOODCOLOR,0,tid)
		TNT1 A 1
		Stop
	Drop4:
		TNT1 AA 0 A_SpawnItemEx("Gib1",0,0,0,random(-8,8),0,0,random(1,359),1|SXF_USEBLOODCOLOR,0,tid)
		TNT1 AA 0 A_SpawnItemEx("Gib2",0,0,0,random(-8,8),0,0,random(1,359),1|SXF_USEBLOODCOLOR,0,tid)
		TNT1 A 0 A_SpawnItemEx("GibTorso",0,0,0,random(-8,8),0,0,random(1,359),1|SXF_USEBLOODCOLOR,0,tid)
		TNT1 A 1
		Stop
	Simple:
		TNT1 A 0 A_SpawnItemEx("Gib1",0,0,0,random(-8,8),0,0,random(1,359),1|SXF_USEBLOODCOLOR,0,tid)
		Stop
	}
}
//***********************************
Actor Gib1
{
	var int user_t;
	Projectile
	-NOGRAVITY
	-NOBLOCKMAP
	-NOLIFTDROP
	-SOLID
	+DROPOFF
	+THRUACTORS
	+DOOMBOUNCE
	BounceFActor 0.45
	Speed 8
	Scale 0.34
	States
	{
	Spawn:
		TNT1 A 0 NoDelay A_SetUserVar(user_t,tid)
		TNT1 A 0 Thing_ChangeTID(0,0)
		TNT1 A 1 ThrustThingZ(0,random(10,60),0,1)
		Q99B BBCCDDEEFFGGHHIIJJKKLLMMNN 2 A_SpawnItemEx("GibBloodSmall",0,0,0,0,0,0,0,1|SXF_USEBLOODCOLOR)
		Goto Death
	Death:
		Q99B N 350 A_JumpIf(user_t != 0,1)
		Q99B N 2 A_FadeOut
		Wait
	}
}

Actor GibTorso : Gib1
{
	Speed 2
	Scale 0.31
	States
	{
	Spawn:
		TNT1 A 0 NoDelay A_SetUserVar(user_t,tid)
		TNT1 A 0 Thing_ChangeTID(0,0)
		TNT1 A 1 ThrustThingZ(0,random(10,50),0,1)
		Q99C AABBCCDDEEFF 2 A_SpawnItemEx("GibBloodSmall",0,0,0,0,0,0,0,1|SXF_USEBLOODCOLOR)
		Goto Death
	Death:
		Q99C F 380 A_JumpIf(user_t > 0,1)
		Q99C F 2 A_FadeOut
		Wait
	}
}

Actor Gib2 : Gib1
{
	Speed 5
	Scale 0.26
	States
	{
	Spawn:
		TNT1 A 0 NoDelay A_SetUserVar(user_t,tid)
		TNT1 A 0 Thing_ChangeTID(0,0)
		TNT1 A 1 ThrustThingZ(0,random(10,60),0,1)
		Q99D AABBCCDDEE 2 A_SpawnItemEx("GibBloodSmall",0,0,0,0,0,0,0,1|SXF_USEBLOODCOLOR)
		Goto Death
	Death:
		Q99D F 366 A_JumpIf(user_t > 0,1)
		Q99D F 2 A_FadeOut
		Wait
	}
}

//==================================================================
Actor QuakeSmallGibDropper
{
	Speed 0
	Projectile
	+THRUACTORS
	+NOINTERACTION
	RenderStyle None
	States
	{
	Spawn:
		TNT1 A 0 NoDelay A_CheckSight("Simple")
		TNT1 AAA 0 A_Jump(180,"Drop2","Drop3","Drop4")
		TNT1 AAA 0 A_SpawnItemEx("SmallGib1",0,0,0,random(-8,8),0,0,random(0,359),1|SXF_USEBLOODCOLOR,0,tid)
		TNT1 A 0 A_SpawnItemEx("SmallGib2",0,0,0,random(-8,8),0,0,random(0,359),1|SXF_USEBLOODCOLOR,0,tid)
		TNT1 A 0 A_SpawnItemEx("SmallGibTorso",0,0,0,random(-8,8),0,0,random(0,359),1|SXF_USEBLOODCOLOR,0,tid)
		TNT1 A 1
		Stop
	Drop2:
		TNT1 AAA 0 A_SpawnItemEx("SmallGib1",0,0,0,random(-8,8),0,0,random(0,359),1|SXF_USEBLOODCOLOR,0,tid)
		TNT1 AA 0 A_SpawnItemEx("SmallGib2",0,0,0,random(-8,8),0,0,random(0,359),1|SXF_USEBLOODCOLOR,0,tid)
		TNT1 A 0 A_SpawnItemEx("SmallGibTorso",0,0,0,random(-8,8),0,0,random(0,359),1|SXF_USEBLOODCOLOR,0,tid)
		TNT1 A 1
		Stop
	Drop3:
		TNT1 AA 0 A_SpawnItemEx("SmallGib1",0,0,0,random(-8,8),0,0,random(0,359),1|SXF_USEBLOODCOLOR,0,tid)
		TNT1 AAA 0 A_SpawnItemEx("SmallGib2",0,0,0,random(-8,8),0,0,random(0,359),1|SXF_USEBLOODCOLOR,0,tid)
		TNT1 A 0 A_SpawnItemEx("SmallGibTorso",0,0,0,random(-8,8),0,0,random(0,359),1|SXF_USEBLOODCOLOR,0,tid)
		TNT1 A 1
		Stop
	Drop4:
		TNT1 AA 0 A_SpawnItemEx("SmallGib1",0,0,0,random(-8,8),0,0,random(0,359),1|SXF_USEBLOODCOLOR,0,tid)
		TNT1 AA 0 A_SpawnItemEx("SmallGib2",0,0,0,random(-8,8),0,0,random(0,359),1|SXF_USEBLOODCOLOR,0,tid)
		TNT1 A 0 A_SpawnItemEx("SmallGibTorso",0,0,0,random(-8,8),0,0,random(0,359),1|SXF_USEBLOODCOLOR,0,tid)
		TNT1 A 1
		Stop
		Stop

	Simple:
		TNT1 A 0 A_SpawnItemEx("Gib1",0,0,0,random(-8,8),0,0,random(1,359),1|SXF_USEBLOODCOLOR,0,tid)
		Stop
	}
}

//***********************************
Actor SmallGib1 : Gib1
{
	Speed 8
	Scale 0.27
	States
	{
	Spawn:
		TNT1 A 0 NoDelay A_SetUserVar(user_t,tid)
		TNT1 A 0 Thing_ChangeTID(0,0)
		TNT1 A 1 ThrustThingZ(0,random(10,60),0,1)
		Q99B BBCCDDEEFFGGHHIIJJKKLLMMNN 2 A_SpawnItemEx("GibBloodSmall",0,0,0,0,0,0,0,1|SXF_USEBLOODCOLOR,128)
		Goto Death
	Death:
		Q99B N 350 A_JumpIf(user_t > 0,1)
		Q99B N 2 A_FadeOut
		Wait
	}
}

Actor SmallGibTorso : SmallGib1 
{
	Speed 2
	Scale 0.23
	States
	{
	Spawn:
		TNT1 A 0 NoDelay A_SetUserVar(user_t,tid)
		TNT1 A 0 Thing_ChangeTID(0,0)
		TNT1 A 1 ThrustThingZ(0,random(10,50),0,1)
		Q99C AABBCCDDEEFF 2 A_SpawnItemEx("GibBloodSmall",0,0,0,0,0,0,0,1|SXF_USEBLOODCOLOR,128)
		Goto Death
	Death:
		Q99C F 380 A_JumpIf(user_t > 0,1)
		Q99C F 2 A_FadeOut
		Wait
	}
}


Actor SmallGib2 : SmallGib1 
{
	Speed 5
	Scale 0.19
	States
	{
	Spawn:
		TNT1 A 0 NoDelay A_SetUserVar(user_t,tid)
		TNT1 A 0 Thing_ChangeTID(0,0)
		TNT1 A 1 ThrustThingZ(0,random(10,60),0,1)
		Q99D AABBCCDDEE 2 A_SpawnItemEx("GibBloodSmall",0,0,0,0,0,0,0,1|SXF_USEBLOODCOLOR)
		Goto Death
	Death:
		Q99D F 366 A_JumpIf(user_t > 0,1)
		Q99D F 2 A_FadeOut
		Wait
	}
}


//===============================================================================
//===============================================================================
//
//	Blood style gibs
//
//===============================================================================
//===============================================================================
Actor GibBloodTrailMediumSize : MCBloodParticle  
{ }

Actor BloodGibDropper
{
	Projectile
	+THRUACTORS
	+NOINTERACTION
	RenderStyle None
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_CheckSight("Simple")
		TNT1 A 0 A_Jump(180,"Drop2","Drop3","Drop4")
		TNT1 AAAAAAAAAAAAAAAA 0 A_SpawnItemEx("NewMeat",0,0,0,random(-7,7),random(-7,7),random(1,14),random(1,359),1|SXF_USEBLOODCOLOR,0,tid)
		TNT1 AA 0 A_SpawnItemEx("BloodGib1",0,0,0,random(-5,5),0,0,random(1,359),1|SXF_USEBLOODCOLOR,0,tid)
		TNT1 AA 0 A_SpawnItemEx("BloodGib2",0,0,0,random(-5,5),0,0,random(1,359),1|SXF_USEBLOODCOLOR,0,tid)
		TNT1 AAA 0 A_SpawnItemEx("BloodGib3",0,0,0,random(-5,5),0,0,random(1,359),1|SXF_USEBLOODCOLOR,0,tid)
		TNT1 A 0 A_SpawnItemEx("BloodGib4",0,0,0,random(-5,5),0,0,random(1,359),1|SXF_USEBLOODCOLOR,0,tid)
		TNT1 A 1
		Stop
	Drop2:
		TNT1 AAAAAAAAAAAAAAAA 0 A_SpawnItemEx("NewMeat",0,0,0,random(-7,7),random(-7,7),random(1,14),random(1,359),1|SXF_USEBLOODCOLOR,0,tid)
		TNT1 AA 0 A_SpawnItemEx("BloodGib1",0,0,0,random(-5,5),0,0,random(1,359),1|SXF_USEBLOODCOLOR,0,tid)
		TNT1 AA 0 A_SpawnItemEx("BloodGib2",0,0,0,random(-5,5),0,0,random(1,359),1|SXF_USEBLOODCOLOR,0,tid)
		TNT1 AA 0 A_SpawnItemEx("BloodGib3",0,0,0,random(-5,5),0,0,random(1,359),1|SXF_USEBLOODCOLOR,0,tid)
		TNT1 AA 0 A_SpawnItemEx("BloodGib4",0,0,0,random(-5,5),0,0,random(1,359),1|SXF_USEBLOODCOLOR,0,tid)
		TNT1 A 1
		Stop
	Drop3:
		TNT1 AAAAAAAAAAAAAAAA 0 A_SpawnItemEx("NewMeat",0,0,0,random(-7,7),random(-7,7),random(1,14),random(1,359),1|SXF_USEBLOODCOLOR,0,tid)
		TNT1 A 0 A_SpawnItemEx("BloodGib1",0,0,0,random(-5,5),0,0,random(1,359),1|SXF_USEBLOODCOLOR,0,tid)
		TNT1 AA 0 A_SpawnItemEx("BloodGib2",0,0,0,random(-5,5),0,0,random(1,359),1|SXF_USEBLOODCOLOR,0,tid)
		TNT1 AAA 0 A_SpawnItemEx("BloodGib3",0,0,0,random(-5,5),0,0,random(1,359),1|SXF_USEBLOODCOLOR,0,tid)
		TNT1 AA 0 A_SpawnItemEx("BloodGib4",0,0,0,random(-5,5),0,0,random(1,359),1|SXF_USEBLOODCOLOR,0,tid)
		TNT1 A 1
		Stop
	Drop4:
		TNT1 AAAAAAAAAAAAAAAA 0 A_SpawnItemEx("NewMeat",0,0,0,random(-7,7),random(-7,7),random(1,14),random(1,359),1|SXF_USEBLOODCOLOR,0,tid)
		TNT1 AA 0 A_SpawnItemEx("BloodGib1",0,0,0,random(-5,5),0,0,random(1,359),1|SXF_USEBLOODCOLOR,0,tid)
		TNT1 A 0 A_SpawnItemEx("BloodGib2",0,0,0,random(-5,5),0,0,random(1,359),1|SXF_USEBLOODCOLOR,0,tid)
		TNT1 AA 0 A_SpawnItemEx("BloodGib3",0,0,0,random(-5,5),0,0,random(1,359),1|SXF_USEBLOODCOLOR,0,tid)
		TNT1 AAA 0 A_SpawnItemEx("BloodGib4",0,0,0,random(-5,5),0,0,random(1,359),1|SXF_USEBLOODCOLOR,0,tid)
		TNT1 A 1
		Stop
	Simple:
		TNT1 AAAA 0 A_SpawnItemEx("NewMeat",0,0,0,random(-7,7),random(-7,7),random(1,14),random(1,359),1|SXF_USEBLOODCOLOR,0,tid)
		TNT1 A 0 A_SpawnItemEx("BloodGib1",0,0,0,random(-5,5),0,0,random(1,359),1|SXF_USEBLOODCOLOR,0,tid)
		TNT1 A 0 A_SpawnItemEx("BloodGib2",0,0,0,random(-5,5),0,0,random(1,359),1|SXF_USEBLOODCOLOR,0,tid)
		TNT1 A 0 A_SpawnItemEx("BloodGib3",0,0,0,random(-5,5),0,0,random(1,359),1|SXF_USEBLOODCOLOR,0,tid)
		TNT1 A 0 A_SpawnItemEx("BloodGib4",0,0,0,random(-5,5),0,0,random(1,359),1|SXF_USEBLOODCOLOR,0,tid)
		TNT1 A 1
		Stop
	}
}

//***************************************
Actor BloodGib1		
{
	var int user_t;
	Projectile
	+THRUACTORS
	Scale 0.6
	Radius 6
	Height 5
	States
	{
	Spawn:
		TNT1 A 0 NoDelay A_SetUserVar(user_t,tid)
		TNT1 A 0 Thing_ChangeTID(0,0)
		ANYG AAAA 1 ThrustThingZ(0,random(3,20),0,1)
		ANYG BBCCDD 2 A_SpawnItemEx("GibBloodTrailMediumSize",random(3,-3),random(3,-3),random(3,-3),0,0,0,0,1|SXF_USEBLOODCOLOR)
		ANYG AABBCCDD 2 A_SpawnItemEx("GibBloodTrailMediumSize",random(3,-3),random(3,-3),random(3,-3),0,0,0,0,1|SXF_USEBLOODCOLOR)
		Goto Spawn+11
	Death:
		ANYG E 450 A_JumpIf(user_t != 0,1)
		ANYG E 1 A_FadeOut
		Wait
	}
}

Actor BloodGib2 : BloodGib1		//eye
{
	Scale 0.4
	Speed 7
	States
	{
	Spawn:
		TNT1 A 0 NoDelay A_SetUserVar(user_t,tid)
		TNT1 A 0 Thing_ChangeTID(0,0)
		ANYG FFFF 1 ThrustThingZ(0,random(3,20),0,1)
		ANYG GGHHII 2 A_SpawnItemEx("GibBloodTrailMediumSize",random(3,-3),random(3,-3),random(3,-3),0,0,0,0,1|SXF_USEBLOODCOLOR)
		ANYG FFGGHHII 2 A_SpawnItemEx("GibBloodTrailMediumSize",random(3,-3),random(3,-3),random(3,-3),0,0,0,0,1|SXF_USEBLOODCOLOR)
		Goto Spawn+11
	Crash:
		ANYG J 560 A_JumpIf(user_t != 0,1)
		ANYG J 1 A_FadeOut
		Wait
	}
}

Actor BloodGib3 : BloodGib1		//liver
{
	Scale 0.6
	Speed 7
	States
	{
	Spawn:
		TNT1 A 0 NoDelay A_SetUserVar(user_t,tid)
		TNT1 A 0 Thing_ChangeTID(0,0)
		ANYG KKKK 1 ThrustThingZ(0,random(3,20),0,1)
		ANYG LLMMNN 2 A_SpawnItemEx("GibBloodTrailMediumSize",random(3,-3),random(3,-3),random(3,-3),0,0,0,0,1|SXF_USEBLOODCOLOR)
		ANYG KKLLMMNN 2 A_SpawnItemEx("GibBloodTrailMediumSize",random(3,-3),random(3,-3),random(3,-3),0,0,0,0,1|SXF_USEBLOODCOLOR)
		Goto Spawn+11
	Crash:
		ANYG O 400 A_JumpIf(user_t != 0,1)
		ANYG O 1 A_FadeOut
		Wait
	}
}

Actor BloodGib4 : BloodGib1		//bloodthing
{
	Scale 0.6
	Speed 7
	States
	{
	Spawn:
		TNT1 A 0 NoDelay A_SetUserVar(user_t,tid)
		TNT1 A 0 Thing_ChangeTID(0,0)
		ANYG PPPP 1 ThrustThingZ(0,random(3,20),0,1)
		ANYG QQRRSS 2 A_SpawnItemEx("GibBloodTrailMediumSize",random(3,-3),random(3,-3),random(3,-3),0,0,0,0,1|SXF_USEBLOODCOLOR)
		ANYG PPQQRRSS 2 A_SpawnItemEx("GibBloodTrailMediumSize",random(3,-3),random(3,-3),random(3,-3),0,0,0,0,1|SXF_USEBLOODCOLOR)
		Goto Spawn+11
	Crash:
		ANYG T 500 A_JumpIf(user_t != 0,1)
		ANYG T 1 A_FadeOut
		Wait
	}
}

Actor ExploSmokeGeneral
{
	Projectile
	+NOCLIP
	Speed 0
	RenderStyle Add
	Alpha 0.8
	Scale 1.3
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 ThrustThingZ(0,4,0,1)
		WPXS JKLMN 1 A_FadeOut(0.03)
		WPXS OQRSTUVWXYZ 2 A_FadeOut(0.03)
		WPXZ ABC 2 A_FadeOut(0.03)
		WPXZ C 1 A_FadeOut
		Wait
	}
}

Actor ExploSmokeGeneralSmall : ExploSmokeGeneral
{
	Scale 0.6
}

Actor ExploSmokeGeneralBig : ExploSmokeGeneral
{
	Scale 2.5
}

Actor GunSmallSmokeSpawner
{
	PROJECTILE
//	+NOCLIP
	+NOTIMEFREEZE
	Radius 1
	Height 1
	Speed 14
	States
	{
	Spawn:
		TNT1 A 1
		TNT1 A 0 A_Die
		Goto Death
	Death:
		TNT1 A 0 A_CustomMissile("GunSmallSmoke",-2,0,0)	
		TNT1 A 2
		Stop
	}
}

Actor GunSmallSmoke
{
	PROJECTILE
	+NOGRAVITY
	+FLOORCLIP
	+NOBLOCKMAP
	+FORCEXYBILLBOARD
	Radius 1
	Height 1
	Alpha 0.33
	Scale 0.16
	Mass 0
	RenderStyle Add
	States
	{
	Spawn:
//	   TNT1 AA 0 ThrustThingZ(0,1,0,1)
	   TNT1 A 0
	   TNT1 A 0 A_Jump(210,4,6,8,10,12)
	   WPXS ABCDEFGHIJKLMNOPQRSTUVWXYZ 1 A_FadeOut(0.01)
 	   WPXZ ABC 1 A_FadeOut(0.01)
	   Stop
	}
}
Actor GunSmallSmoke2
{
	+NOGRAVITY
	+NOBLOCKMAP
	+FLOORCLIP
	+FORCEXYBILLBOARD
	Radius		1
	Height		1
	RenderStyle Add
	Alpha		.6
	Scale		.05
	States
	{
	Spawn:
		SMOK ABCDEFGHIJKLMNOPQ 1 A_FadeOut(0.01)
		Stop
	}
}


Actor GunSmokeSpawner
{
	PROJECTILE
//	+NOCLIP
	+NOTIMEFREEZE
	Radius 1
	Height 1
	Speed 14
	States
	{
	Spawn:
		TNT1 A 1
		TNT1 A 0 A_Die
		Goto Death
	Death:
//		TNT1 A 0 A_CustomMissile("GunSmoke2",-2,0,0)
		TNT1 A 0 A_CustomMissile("GunSmoke",-2,0,0)
		Stop
	}
}

Actor GunSmoke
{
	PROJECTILE
	+NOGRAVITY
	+FLOORCLIP
	+NOBLOCKMAP
	+FORCEXYBILLBOARD
	Radius 1
	Height 1
	Alpha 0.33
	Scale 0.25
	Mass 0
	RenderStyle Add
	States
	{
	Spawn:
//	   TNT1 AA 0 ThrustThingZ(0,1,0,1)
	   TNT1 A 0
	   TNT1 A 0 A_Jump(210,6,8,10,12,14)
	   WPXS ABCDEFGHIJKLMNOPQRSTUVWXYZ 1 A_FadeOut(0.01)
 	   WPXZ ABC 1 A_FadeOut(0.01)
	   Stop
	}
}
Actor GunSmoke2
{
	+NOGRAVITY
	+NOBLOCKMAP
	+FLOORCLIP
	+FORCEXYBILLBOARD
	Radius		1
	Height		1
	RenderStyle Add
	Alpha		.6
	Scale		.09
	States
	{
	Spawn:
		SMOK ABCDEFGHIJKLMNOPQ 1 A_FadeOut(0.01)
		Stop
	}
}

//==========================================================
//==========================================================

Actor FBeggar 8001
{
	Monster
	-ISMONSTER
	+FLOORCLIP
	-COUNTKILL
	-CANUSEWALLS
	Health 20
	Radius 20
	Height 56
	Mass 100
	Speed 5
	PainChance 255
	DeathSound "q2playermale/death"
	PainSound "q2playermale/pain"
	DropItem HealthHeart
	States
	{
	Spawn:
		BEGR A 1 A_Look
		Goto See
	See:
		TNT1 A 0 A_Jump(128,29)
		BEGR AABBCC 5 A_Wander
		BEGR AABBCC 5 A_Wander
		BEGR AABBCC 5 A_Wander
		BEGR AABBCC 6 A_Wander
		BEGR A 0 A_PlaySound("insane/idle")
		BEGR A 7 A_Wander
		BEGR B 8 A_Wander
		BEGR C 40
		Loop
		TNT1 A 0 A_Jump(128,17)
		BEGR AABBCC 5 A_Wander
		BEGR AABBCC 6 A_Wander
		BEGR A 0 A_PlaySound("insane/idle")
		BEGR A 7 A_Wander
		BEGR B 8 A_Wander
		BEGR C 50
		Loop
		BEGR AABBCC 5 A_Wander
		BEGR AABBCC 5 A_Wander
		BEGR AABBCC 5 A_Wander
		BEGR A 0 A_PlaySound("insane/idle")
		BEGR AABBCC 5 A_Wander
		BEGR AABBCC 5 A_Wander
		BEGR AABBCC 6 A_Wander
		BEGR A 7 A_Wander
		BEGR B 8 A_Wander
		BEGR C 60
		Loop
	Pain:
		BEGR A 2
		BEGR A 2 A_Pain
		Goto See
	Death:
		BEGR F 5 A_Scream
		BEGR G 5
		BEGR H 5 A_NoBlocking
		BEGR IJKLM 5
		BEGR N -1
		Stop
	XDeath:
		TNT1 A 0 A_Jump(256,"XDeathBlood")
		GIBS M 5 A_XScream
		GIBS N 5 A_NoBlocking
		TNT1 AAAAAAA 0 A_SpawnItemEx("NewMeat",0,0,0,random(-7,7),random(-7,7),random(1,16),random(1,359),1)
		GIBS OP 5 
		GIBS Q 5
		GIBS RSTU 5 
		GIBS V -1
		Stop
	XDeathBlood:
		TNT1 A 0 A_PlaySound("other/gibdeath")
		TNT1 A 0 A_SpawnItemEx("BloodGibDropper",0,0,random(20,40),0,0,0,0,1|SXF_USEBLOODCOLOR)
		TNT1 A 1 A_Fall
		Stop
	Burn:
		TNT1 A 0 A_Fall
		TNT1 A 0 A_SpawnItemEx("GenericHumanBurn",0,0,0,0,0,0,0,32)
		Stop
	Death.UnholyDisint:
	Death.PlasmaDisint:
	Disintegrate:
		TNT1 A 0 Thing_SetTranslation(0,50)	
		BEGR A 1 A_FadeOut(0.015)
		TNT1 A 0 A_ChangeFlag("NOINTERACTION",1)
		TNT1 A 0 A_Stop	
		TNT1 A 0 A_Fall
		TNT1 A 0 A_SpawnItemEx("DisintegrateShadowMedium",0,0,30,0,0,0,0,32)
		TNT1 A 0 A_SpawnItemEx("DisintegrateSparksMedium",0,0,30,0,0,0,0,32)
		BEGR A 2 A_FadeOut(0.03)
		Goto Disintegrate+6
	}
}
//==========================================================
//==========================================================

Actor FPeasant 8002
{
	Monster
	+FLOORCLIP
	+NOTARGET
	-ISMONSTER
	-COUNTKILL
	-CANUSEWALLS
	Health 20
	Radius 20
	Height 56
	Mass 100
	Speed 7
	MeleeDamage 2
	PainChance 255
	DeathSound "q2playermale/death"
	PainSound "q2playermale/pain"
	HitObituary "%o Must let live in peace the poor civilians."
	DropItem HealthHeart
	States
	{
	Spawn:
		PEAS A 1 A_Look
		Goto See
	See:
		PEAS AABBCCDD 5 A_Wander
		PEAS AABBCCDD 5 A_Wander
		PEAS AABBCCDD 5 A_Wander
		PEAS AABBCCDD 6 A_Wander
		PEAS A 0 A_PlaySound("insane/idle")
		PEAS A 7 A_Wander
		PEAS B 8 A_Wander
		PEAS C 8
		PEAS D 40
		Loop
		PEAS A 0 A_PlaySound("insane/idle")
		PEAS AABBCC 5 A_Wander
		PEAS AABBCC 6 A_Wander
		PEAS A 7 A_Wander
		PEAS B 8 A_Wander
		PEAS C 8
		PEAS D 50
		Loop
		PEAS AABBCCDD 5 A_Wander
		PEAS AABBCCDD 5 A_Wander
		PEAS A 0 A_PlaySound("insane/idle")
		PEAS AABBCCDD 5 A_Wander
		PEAS AABBCCDD 5 A_Wander
		PEAS AABBCCDD 5 A_Wander
		PEAS AABBCCDD 6 A_Wander
		PEAS A 7 A_Wander
		PEAS B 8 A_Wander
		PEAS C 8
		PEAS D 60
		Loop
	Pain:
		PEAS O 2
		PEAS O 2 A_Pain
		Goto See+9
	Death:
		PEAS G 6 A_Scream
		PEAS H 6
		PEAS I 6 A_NoBlocking
		PEAS J 6 
		PEAS K 6
		PEAS L 6 
		PEAS M 6
		PEAS N -1
		Stop
	XDeath:
		TNT1 A 0 A_Jump(256,"XDeathBlood")
		GIBS M 5 A_XScream
		GIBS N 5 A_NoBlocking
		TNT1 A 0 A_TossGib
		TNT1 A 0 A_TossGib
		TNT1 A 0 A_TossGib
		TNT1 A 0 A_TossGib
		GIBS OP 5 
		GIBS Q 5 
		GIBS RSTU 5 
		GIBS V -1
		Stop
	XDeathBlood:
		TNT1 A 0 A_PlaySound("other/gibdeath")
		TNT1 A 0 A_SpawnItemEx("BloodGibDropper",0,0,random(20,40),0,0,0,0,1|SXF_USEBLOODCOLOR)
		TNT1 A 1 A_Fall
		Stop
	Burn:
		TNT1 A 0 A_Fall
		TNT1 A 0 A_SpawnItemEx("GenericHumanBurn",0,0,0,0,0,0,0,32)
		Stop
	Death.UnholyDisint:
	Death.PlasmaDisint:
	Disintegrate:
		TNT1 A 0 Thing_SetTranslation(0,50)	
		PEAS O 1 A_FadeOut(0.015)
		TNT1 A 0 A_ChangeFlag("NOINTERACTION",1)
		TNT1 A 0 A_Stop	
		TNT1 A 0 A_Fall
		TNT1 A 0 A_SpawnItemEx("DisintegrateShadowMedium",0,0,30,0,0,0,0,32)
		TNT1 A 0 A_SpawnItemEx("DisintegrateSparksMedium",0,0,30,0,0,0,0,32)
		PEAS O 2 A_FadeOut(0.03)
		Goto Disintegrate+6
	}
}

//==========================================================
//
// The rare and endangered Spycrab
// TF2 graphics and sounds by Valve
//
//==========================================================

Actor Spycrab 8003
{
	MONSTER
	-ISMONSTER
	+FLOORCLIP
	-COUNTKILL
	-CANUSEWALLS
	+DONTMORPH
	+NOICEDEATH
	Scale 0.166
	Height 56
	Radius 20
	Speed 7
	Health 50
	PainChance 200
	SeeSound "spycrab/see"
	ActiveSound "spycrab/active"
	PainSound "spycrab/pain"
	DropItem HealthHeart
	DropItem Q2BackPack
	DropItem PowerupsSpawnerReal
	DropItem PowerupsSpawnerReal 8
	States
	{
	Spawn:
		SPYC A 0 A_JumpIfInventory("NoDeadRinger",1,6)
		SPYC A 0 A_JumpIfInventory("DeadRinger",1,5)
		SPYC A 0 A_Jump(170,3)
		SPYC A 0 A_GiveInventory("DeadRinger",1)
		SPYC A 0 A_Jump(256,2)
		SPYC A 0 A_GiveInventory("NoDeadRinger",1)
		SPYC AA 1 A_Look
		Goto See
	See:
		SPYC ABCDEFGH 3 A_Wander
		SPYC A 0 A_JumpIfInventory("DeadRinger",1,2)
		SPYC A 0 A_Jump(16,"Cloak")
		SPYC A 0 A_Jump(16,1)
		Loop
		SPYC A 0 A_PlaySound("spycrab/active")
		SPYC ABCDEFGHABCDEFGH 3 A_Wander
		Loop
	SeeCloaked:
		SPYC A 3 A_Wander
		SPYC A 0 A_JumpIfInventory("SpycrabCloakActive",100,"Uncloak")
		SPYC A 0 A_GiveInventory("SpycrabCloakActive",1)
		SPYC B 3 A_Wander
		SPYC A 0 A_JumpIfInventory("SpycrabCloakActive",100,"Uncloak")
		SPYC A 0 A_GiveInventory("SpycrabCloakActive",1)
		SPYC C 3 A_Wander
		SPYC A 0 A_JumpIfInventory("SpycrabCloakActive",100,"Uncloak")
		SPYC A 0 A_GiveInventory("SpycrabCloakActive",1)
		SPYC D 3 A_Wander
		SPYC A 0 A_JumpIfInventory("SpycrabCloakActive",100,"Uncloak")
		SPYC A 0 A_GiveInventory("SpycrabCloakActive",1)
		SPYC E 3 A_Wander
		SPYC A 0 A_JumpIfInventory("SpycrabCloakActive",100,"Uncloak")
		SPYC A 0 A_GiveInventory("SpycrabCloakActive",1)
		SPYC F 3 A_Wander
		SPYC A 0 A_JumpIfInventory("SpycrabCloakActive",100,"Uncloak")
		SPYC A 0 A_GiveInventory("SpycrabCloakActive",1)
		SPYC G 3 A_Wander
		SPYC A 0 A_JumpIfInventory("SpycrabCloakActive",100,"Uncloak")
		SPYC A 0 A_GiveInventory("SpycrabCloakActive",1)
		SPYC H 3 A_Wander
		SPYC A 0 A_JumpIfInventory("SpycrabCloakActive",100,"Uncloak")
		SPYC A 0 A_GiveInventory("SpycrabCloakActive",1)
		Loop
	Cloak:
		SPYC A 0 A_ChangeFlag("NOPAIN",1)
		SPYC A 0 A_ChangeFlag("CANTSEEK",1)
		SPYC A 0 A_PlaySound("spycrab/cloak")
		SPYC A 3 A_Wander
		SPYC A 0 A_FadeOut(0.1,0)
		SPYC B 3 A_Wander
		SPYC B 0 A_FadeOut(0.1,0)
		SPYC C 3 A_Wander
		SPYC C 0 A_FadeOut(0.1,0)
		SPYC D 3 A_Wander
		SPYC D 0 A_FadeOut(0.1,0)
		SPYC E 3 A_Wander
		SPYC E 0 A_FadeOut(0.1,0)
		SPYC F 3 A_Wander
		SPYC F 0 A_FadeOut(0.1,0)
		SPYC G 3 A_Wander
		SPYC G 0 A_FadeOut(0.1,0)
		SPYC H 3 A_Wander
		SPYC H 0 A_FadeOut(0.1,0)
		SPYC A 3 A_Wander
		SPYC A 0 A_FadeOut(0.1,0)
		SPYC B 3 A_Wander
		SPYC B 0 A_FadeOut(0.1,0)
		SPYC A 0 A_GiveInventory("SpycrabCloakCheck",1)
		SPYC A 0 A_ChangeFlag("NOPAIN",0)
		Goto SeeCloaked+6
	Uncloak:
		SPYC A 0 A_ChangeFlag("NOPAIN",1)
		SPYC A 0 A_PlaySound("spycrab/uncloak")
		SPYC A 3 A_Wander
		SPYC A 0 A_FadeIn
		SPYC B 3 A_Wander
		SPYC B 0 A_FadeIn
		SPYC C 3 A_Wander
		SPYC C 0 A_FadeIn
		SPYC D 3 A_Wander
		SPYC D 0 A_FadeIn
		SPYC E 3 A_Wander
		SPYC E 0 A_FadeIn
		SPYC F 3 A_Wander
		SPYC F 0 A_FadeIn
		SPYC G 3 A_Wander
		SPYC G 0 A_FadeIn
		SPYC H 3 A_Wander
		SPYC H 0 A_FadeIn
		SPYC A 3 A_Wander
		SPYC A 0 A_FadeIn
		SPYC B 3 A_Wander
		SPYC B 0 A_FadeIn
		SPYC B 0 A_SetTranslucent(1,0)
		SPYC A 0 A_TakeInventory("SpycrabCloakCheck",1)
		SPYC A 0 A_TakeInventory("SpycrabCloakActive",100)
		SPYC A 0 A_ChangeFlag("CANTSEEK",0)
		SPYC A 0 A_ChangeFlag("NOPAIN",0)
		Goto See+2
	Pain:
		SPYC H 3 A_Pain
		SPYC H 0 A_JumpIfInventory("SpycrabCloakCheck",1,"SeeCloaked")
		Goto See
	Death:
		TNT1 A 0 A_JumpIfInventory("DeadRinger",1,"DeadRinger")
		TNT1 A 0 A_PlaySound("other/gibdeath")
		TNT1 AAAAAA 0 A_TossGib
		TNT1 A 0 A_SpawnItemEx("BloodGibDropper",0,0,random(20,40),0,0,0,0,1|SXF_USEBLOODCOLOR)
		TNT1 A 0 A_Fall
		Stop
	DeadRinger:
		TNT1 A 0 A_SpawnItemEx("DRSpycrab",0,0,0,0,0,0,0,32,0)
		TNT1 A 0 A_PlaySound("other/gibdeath")
		TNT1 AAAAAA 0 A_TossGib
		TNT1 A 0 A_SpawnItemEx("BloodGibDropper",0,0,random(20,40),0,0,0,0,1|SXF_USEBLOODCOLOR)
		Stop
	Burn:
		TNT1 A 0 A_JumpIfInventory("DeadRinger",1,"DRBurn")
		TNT1 A 0 A_Fall
		TNT1 A 0 A_SpawnItemEx("SpycrabBurn",0,0,0,0,0,0,0,32)
		Stop
	DRBurn:
		TNT1 A 0 A_SpawnItemEx("DRSpycrab",0,0,0,0,0,0,0,32,0)
		TNT1 A 0 A_SpawnItemEx("SpycrabBurn",0,0,0,0,0,0,0,32)
		Stop
	Death.UnholyDisint:
	Death.PlasmaDisint:
	Disintegrate:
		TNT1 A 0 A_JumpIfInventory("DeadRinger",1,"DRDisintegrate")
		TNT1 A 0 A_SetTranslucent(1.0,0)
		TNT1 A 0 Thing_SetTranslation(0,50)	
		SPYC H 1 A_FadeOut(0.015)
		TNT1 A 0 A_ChangeFlag("NOINTERACTION",1)
		TNT1 A 0 A_Stop	
		TNT1 A 0 A_Fall
		TNT1 A 0 A_SpawnItemEx("DisintegrateShadowMedium",0,0,30,0,0,0,0,32)
		TNT1 A 0 A_SpawnItemEx("DisintegrateSparksMedium",0,0,30,0,0,0,0,32)
		SPYC HH 2 A_FadeOut(0.03)
		Goto Disintegrate+8
	DRDisintegrate:
		TNT1 A 0 A_SpawnItemEx("DRSpycrab",0,0,0,0,0,0,0,32,0)
		TNT1 A 0 A_SetTranslucent(1.0,0)
		TNT1 A 0 Thing_SetTranslation(0,50)	
		SPYC H 1 A_FadeOut(0.015)
		TNT1 A 0 A_ChangeFlag("NOINTERACTION",1)
		TNT1 A 0 A_Stop	
		TNT1 A 0 A_Fall
		TNT1 A 0 A_SpawnItemEx("DisintegrateShadowMedium",0,0,30,0,0,0,0,32)
		TNT1 A 0 A_SpawnItemEx("DisintegrateSparksMedium",0,0,30,0,0,0,0,32)
		SPYC HH 2 A_FadeOut(0.03)
		Goto DRDisintegrate+8
	}
}

Actor DRSpycrab
{
	MONSTER
	-ISMONSTER
	+FLOORCLIP
	-CANUSEWALLS
	-COUNTKILL
	+DONTMORPH
	+SPECTRAL
	+NONSHOOTABLE
	+CANTSEEK
	+NOBLOOD
	+NOICEDEATH
	Scale 0.166
	Height 56
	Radius 20
	Speed 7
	Health 50
	PainChance 200
	ActiveSound "spycrab/active"
	PainSound "spycrab/pain"
	DropItem HealthHeart
	DropItem Q2BackPack
	DropItem PowerupsSpawnerReal
	DropItem PowerupsSpawnerReal 8
	RenderStyle None
	States
	{
	Spawn:
		SPYC A 0 A_JumpIfInventory("DRSpycrabCheck",1,63)
		SPYC AAAAAAAAAAAAAAA 0 A_Wander
		SPYC AAAAAAAAAAAAAAAAAAAA 5 A_Wander
		SPYC A 0 A_SetTranslucent(0.01,0)
		SPYC A 0 A_PlaySound("spycrab/deadringer")
		SPYC A 3 A_Wander
		SPYC A 0 A_FadeIn
		SPYC B 3 A_Wander
		SPYC B 0 A_FadeIn
		SPYC C 3 A_Wander
		SPYC C 0 A_FadeIn
		SPYC D 3 A_Wander
		SPYC D 0 A_FadeIn
		SPYC E 3 A_Wander
		SPYC E 0 A_FadeIn
		SPYC F 3 A_Wander
		SPYC F 0 A_FadeIn
		SPYC G 3 A_Wander
		SPYC G 0 A_FadeIn
		SPYC H 3 A_Wander
		SPYC H 0 A_FadeIn
		SPYC A 3 A_Wander
		SPYC A 0 A_FadeIn
		SPYC B 3 A_Wander
		SPYC B 0 A_FadeIn
		SPYC B 0 A_SetTranslucent(1,0)
		SPYC B 0 A_SetShootable
		SPYC B 0 A_ChangeFlag("CANTSEEK",0)
		SPYC B 0 A_ChangeFlag("SPECTRAL",0)
		SPYC B 0 A_ChangeFlag("NOBLOOD",0)
		Goto See
		SPYC AA 0 A_Look
		Goto See
	See:
		SPYC ABCDEFGH 3 A_Wander
		SPYC A 0 A_Jump(16,1)
		Loop
		SPYC A 0 A_PlaySound("spycrab/active")
		SPYC ABCDEFGHABCDEFGH 3 A_Wander
		Loop
	Death:
		TNT1 A 0 A_PlaySound("other/gibdeath")
		TNT1 AAAAAA 0 A_TossGib
		TNT1 A 0 A_SpawnItemEx("BloodGibDropper",0,0,random(20,40),0,0,0,0,1|SXF_USEBLOODCOLOR)
		TNT1 A 1 A_Fall
		Stop
	Pain:
		SPYC H 3 A_Pain
		Goto See
	Burn:
		TNT1 A 0 A_Fall
		TNT1 A 0 A_SpawnItemEx("SpycrabBurn",0,0,0,0,0,0,0,32)
		Stop
	Death.UnholyDisint:
	Death.PlasmaDisint:
	Disintegrate:
		TNT1 A 0 Thing_SetTranslation(0,50)	
		TNT1 A 0 A_SetTranslucent(1.0,0)
		SPYC H 1 A_FadeOut(0.015)
		TNT1 A 0 A_ChangeFlag("NOINTERACTION",1)
		TNT1 A 0 A_Stop	
		TNT1 A 0 A_Fall
		TNT1 A 0 A_SpawnItemEx("DisintegrateShadowMedium",0,0,30,0,0,0,0,32)
		TNT1 A 0 A_SpawnItemEx("DisintegrateSparksMedium",0,0,30,0,0,0,0,32)
		SPYC HH 2 A_FadeOut(0.03)
		Goto Disintegrate+7
	}
}

Actor DeadRinger : Inventory
{
	Inventory.Amount 1
	Inventory.MaxAmount 1
}

Actor NoDeadRinger : Inventory
{
	Inventory.Amount 1
	Inventory.MaxAmount 1
}

Actor SpycrabCloakCheck : Inventory
{
	Inventory.Amount 1
	Inventory.MaxAmount 1
}

Actor SpycrabCloakActive : Inventory
{
	Inventory.Amount 1
	Inventory.MaxAmount 100
}

Actor DRSpycrabCheck : Inventory
{
	Inventory.Amount 1
	Inventory.MaxAmount 1
}

//==========================================================
//==========================================================
Actor BVictim
{
	MONSTER
	-ismonster
	+FLOORCLIP
	+FRIGHTENED
	-CANUSEWALLS
	-COUNTKILL
	Scale 0.5
	Height 56
	Radius 20
	Speed 12
	Health 10
	PainChance 255
	SeeSound "bvictim/sight"
	ActiveSound "bvictim/active"
	PainSound "bvictim/pain"
	DeathSound "bvictim/death"
	DropItem HealthHeart
	States
	{
	Spawn:
		LOON AB 6 A_Look
		Loop
	See:
		LOON CCDDEEFFGGHH 2 A_Chase
		Loop
	Pain:
		LOON I 3
		LOON I 3 A_Pain
		Goto See
	Death:
		LOON J 3 A_Scream
		LOON K 3 A_Fall
		LOON LMNOPQ 3
		LOON R -1
		Stop
	XDeath:
		TNT1 A 0 A_PlaySound("other/gibdeath")
		TNT1 A 0 A_SpawnItemEx("BloodGibDropper",0,0,random(20,40),0,0,0,0,1|SXF_USEBLOODCOLOR)
		TNT1 A 1 A_Fall
		Stop
	Burn:
		TNT1 A 0 A_Fall
		TNT1 A 0 A_SpawnItemEx("GenericHumanBurn1",0,0,0,0,0,0,0,32)
		Stop
	Death.UnholyDisint:
	Death.PlasmaDisint:
	Disintegrate:
		TNT1 A 0 Thing_SetTranslation(0,50)	
		LOON I 1 A_FadeOut(0.015)
		TNT1 A 0 A_ChangeFlag("NOINTERACTION",1)
		TNT1 A 0 A_Stop	
		TNT1 A 0 A_Fall
		TNT1 A 0 A_SpawnItemEx("DisintegrateShadowMedium",0,0,30,0,0,0,0,32)
		TNT1 A 0 A_SpawnItemEx("DisintegrateSparksMedium",0,0,30,0,0,0,0,32)
		LOON I 2 A_FadeOut(0.03)
		Goto Disintegrate+6
	}
}






//************************************

Actor AmmoUser
{
	PROJECTILE
	Radius 0
	Height 0
	Speed 0
	RenderStyle None
	States
	{
	Spawn:
		TNT1 A 0
		Stop
	}
}

Actor LimitScriptActive : CustomInventory
{
	-INVENTORY.INVBAR
	Inventory.InterHubAmount 1
	Inventory.Amount 1
	Inventory.MaxAmount 1
	States
	{
	Use:
		TNT1 A 0
		Stop
	}
}

Actor LimitScriptCheck : CustomInventory
{
	-INVENTORY.INVBAR
	Inventory.InterHubAmount 1
	Inventory.Amount 1
	Inventory.MaxAmount 1
	States
	{
	Use:
		TNT1 A 0
		Stop
	}
}

Actor TorchEffects : CustomInventory
{
	-INVENTORY.INVBAR
	Inventory.InterHubAmount 1
	Inventory.Amount 1
	Inventory.MaxAmount 1
	States
	{
	Use:
		TNT1 A 0
		Stop
	}
}

Actor InfiniteAmmo : CustomInventory
{
	-INVENTORY.INVBAR
	Inventory.InterHubAmount 1
	Inventory.Amount 1
	Inventory.MaxAmount 1
	States
	{
	Use:
		TNT1 A 0
		Stop
	}
}

Actor NoWeaponSwitch : CustomInventory
{
	-INVENTORY.INVBAR
	Inventory.InterHubAmount 1
	Inventory.Amount 1
	Inventory.MaxAmount 2
	States
	{
	Use:
		TNT1 A 0
		Stop
	}
}

Actor PowerMakeVisible : PowerInvisibility
{}

Actor MakeVisible : PowerupGiver
{
	-COUNTITEM
	-INVENTORY.INVBAR
	+INVENTORY.AUTOACTIVATE
	Inventory.InterHubAmount 1
	Inventory.Amount 1
	Inventory.MaxAmount 1
	Powerup.Type "MakeVisible"
	Powerup.Duration 1
	States
	{
	Pickup:
		TNT1 A 0
		Stop
	}
}



//------------------------------------------------------------------------
//------------------------------------------------------------------------

//------------------------------------------------------------------------
//------------------------------------------------------------------------

/*Actor DisintegrateSpark	//v5 spark
{
	Translation "112:127=80:111"
	+NOINTERACTION
	Scale 0.3
	RenderStyle Add
	States
	{
	Spawn:
		EBLT ABCDEF 3 Bright
		Stop
	}
}*/

Actor DisintegrateSpark
{
	+NOINTERACTION
	Scale 0.1
	RenderStyle Add 
	Translation "0:255=%[0,0,0]:[1,1,1]"
	States
	{
	Spawn:
		TNT1 A 0 NoDelay A_SetScale(ScaleX*RandomPick(-1,1),ScaleY*RandomPick(-1,1))
		TNT1 A 0 A_Jump(256,"S1","S2","S3","S4","S5","S6","S7","S8")
	S1:	X079 A 0 A_Jump(256,"Perform")
	S2:	X079 B 0 A_Jump(256,"Perform")	
	S3:	X079 C 0 A_Jump(256,"Perform")
	S4:	X079 D 0 A_Jump(256,"Perform")
	S5:	X079 E 0 A_Jump(256,"Perform")
	S6:	X079 F 0 A_Jump(256,"Perform")
	S7:	X079 G 0 A_Jump(256,"Perform")
	S8: X079 H 0 A_Jump(256,"Perform")
	Perform:
		"####" "#" 2 Bright
		"####" "#" 0 A_FadeOut(0.06)
		Loop
	}

}

Actor DisintegrateSparkBig : DisintegrateSpark
{ 	Scale 0.25 }
Actor DisintegrateSparkSmall : DisintegrateSpark
{ 	Scale 0.05 }
Actor DisintegrateSparkMini : DisintegrateSpark
{ 	Scale 0.025 }

// generic disintegrate death  

Actor DisintegrateSparksVerySmall
{
	var int user_vel;
	var int user_p;
	+NOINTERACTION
	RenderStyle None
	Scale 0.025
	States
	{
	Spawn:
		TNT1 A 0 NoDelay A_CheckSight("End")
		TNT1 A 0 A_Stop
		TNT1 A 0 A_SetUserVar(user_p,random(-900,900))
		TNT1 A 0 A_SetUserVar(user_vel,random(10,150))
		TNT1 A 2 A_SpawnItemEx("DisintegrateSpark",random(0,2),0,random(-2,2),
			(cos(-(user_p*0.1))*(user_vel*0.01)),0,
			(sin(-(user_p*0.1))*(user_vel*0.01)),random(0,359),32|SXF_TRANSFERSCALE)
		Stop
	End:
		TNT1 A 0
		Stop
	}
}

Actor DisintegrateSparksSmall
{
	var int user_count;
	var int user_vel;
	var int user_p;
	+NOINTERACTION
	RenderStyle None
	Scale 0.05
	States
	{
	Spawn:
		TNT1 A 0 NoDelay A_CheckSight("End")
		TNT1 A 0 A_Stop
		TNT1 A 0 A_SetUserVar("user_count",tid)
		TNT1 A 0 Thing_ChangeTID(0,0)
	Act:
		TNT1 A 0 A_SetUserVar(user_p,random(-900,900))
		TNT1 A 0 A_SetUserVar(user_vel,random(10,200))
		TNT1 A 2 A_SpawnItemEx("DisintegrateSpark",random(0,7),0,random(-7,7),
			(cos(-(user_p*0.1))*(user_vel*0.01)),0,
			(sin(-(user_p*0.1))*(user_vel*0.01)),random(0,359),32|SXF_TRANSFERSCALE)
		TNT1 A 0 A_SetUserVar("user_count",user_count+1)
		TNT1 A 0 A_JumpIf(user_count <= 2,"Act")
		//TNT1 AA 2 A_SpawnItemEx("DisintegrateSparkSmall",random(0,7),0,random(-7,7),frandom(2.0,-2.0),frandom(2.0,-2.0),frandom(0.7,-0.7),random(15,-15),32)
		Stop
	End:
		TNT1 A 0
		Stop
	}
}


Actor DisintegrateSparksSmallMedium
{
	var int user_count;
	var int user_vel;
	var int user_p;
	+NOINTERACTION
	RenderStyle None
	Scale 0.1
	States
	{
	Spawn:
		TNT1 A 0 NoDelay A_CheckSight("End")
		TNT1 A 0 A_Stop
		TNT1 A 0 A_SetUserVar("user_count",tid)
		TNT1 A 0 Thing_ChangeTID(0,0)
	Act:
		TNT1 A 0 A_SetUserVar(user_p,random(-900,900))
		TNT1 A 0 A_SetUserVar(user_vel,random(10,200))
		TNT1 A 2 A_SpawnItemEx("DisintegrateSpark",random(0,10),0,random(-10,10),
			(cos(-(user_p*0.1))*(user_vel*0.01)),0,
			(sin(-(user_p*0.1))*(user_vel*0.01)),random(0,359),32|SXF_TRANSFERSCALE)
		TNT1 A 0 A_SetUserVar("user_count",user_count+1)
		TNT1 A 0 A_JumpIf(user_count <= 2,"Act")
		//TNT1 AA 2 A_SpawnItemEx("DisintegrateSpark",random(10,-10),random(10,-10),random(10,-10),frandom(2.5,-2.5),frandom(2.5,-2.5),frandom(0.7,-0.7),random(15,-15),32)
		Stop
	End:
		TNT1 A 0
		Stop
	}
}

Actor DisintegrateSparksMedium
{
	var int user_count;
	var int user_vel;
	var int user_p;
	+NOINTERACTION
	RenderStyle None
	Scale 0.1
	States
	{
	Spawn:
		TNT1 A 0 NoDelay A_CheckSight("End")
		TNT1 A 0 A_Stop
		TNT1 A 0 A_SetUserVar("user_count",tid)
		TNT1 A 0 Thing_ChangeTID(0,0)
	Act:
		TNT1 A 0 A_SetUserVar(user_p,random(-900,900))
		TNT1 A 0 A_SetUserVar(user_vel,random(10,300))
		TNT1 A 2 A_SpawnItemEx("DisintegrateSpark",random(0,12),0,random(-12,12),
			(cos(-(user_p*0.1))*(user_vel*0.01)),0,
			(sin(-(user_p*0.1))*(user_vel*0.01)),random(0,359),32|SXF_TRANSFERSCALE)
		TNT1 A 0 A_SetUserVar("user_count",user_count+1)
		TNT1 A 0 A_JumpIf(user_count <= 3,"Act")
		//TNT1 AAA 2 A_SpawnItemEx("DisintegrateSpark",random(12,-12),random(12,-12),random(12,-12),frandom(3.0,-3.0),frandom(3.0,-3.0),frandom(0.7,-0.7),random(15,-15),32)
		Stop
	End:
		TNT1 A 0
		Stop
	}
}

Actor DisintegrateSparksMediumBig
{
	var int user_count;
	var int user_vel;
	var int user_p;
	+NOINTERACTION
	RenderStyle None
	Scale 0.1
	States
	{
	Spawn:
		TNT1 A 0 NoDelay A_CheckSight("End")
		TNT1 A 0 A_Stop
		TNT1 A 0 A_SetUserVar("user_count",tid)
		TNT1 A 0 Thing_ChangeTID(0,0)
	Act:
		TNT1 A 0 A_SetUserVar(user_p,random(-900,900))
		TNT1 A 0 A_SetUserVar(user_vel,random(10,450))
		TNT1 A 2 A_SpawnItemEx("DisintegrateSpark",random(0,22),0,random(-22,22),
			(cos(-(user_p*0.1))*(user_vel*0.01)),0,
			(sin(-(user_p*0.1))*(user_vel*0.01)),random(0,359),32|SXF_TRANSFERSCALE)
		TNT1 A 0 A_SetUserVar("user_count",user_count+1)
		TNT1 A 0 A_JumpIf(user_count <= 3,"Act")
		//TNT1 AAA 2 A_SpawnItemEx("DisintegrateSpark",random(22,-22),random(22,-22),random(22,-22),frandom(4.5,-4.5),frandom(4.5,-4.5),frandom(0.99,-0.99),random(15,-15),32)
		Stop
	End:
		TNT1 A 0
		Stop
	}
}


Actor DisintegrateSparksBig
{
	var int user_count;
	var int user_vel;
	var int user_p;
	+NOINTERACTION
	RenderStyle None
	Scale 0.25
	States
	{
	Spawn:
		TNT1 A 0 NoDelay A_CheckSight("End")
		TNT1 A 0 A_Stop
		TNT1 A 0 A_SetUserVar("user_count",tid)
		TNT1 A 0 Thing_ChangeTID(0,0)
	Act:
		TNT1 A 0 A_SetUserVar(user_p,random(-900,900))
		TNT1 A 0 A_SetUserVar(user_vel,random(10,650))
		TNT1 A 2 A_SpawnItemEx("DisintegrateSpark",random(0,40),0,random(-40,40),
			(cos(-(user_p*0.1))*(user_vel*0.01)),0,
			(sin(-(user_p*0.1))*(user_vel*0.01)),random(0,359),32|SXF_TRANSFERSCALE)
		TNT1 A 0 A_SetUserVar("user_count",user_count+1)
		TNT1 A 0 A_JumpIf(user_count <= 4,"Act")
		//TNT1 AAAA 2 A_SpawnItemEx("DisintegrateSparkBig",random(40,-40),random(40,-40),random(40,-40),frandom(6.5,-6.5),frandom(6.5,-6.5),frandom(1.5,-1.5),random(15,-15),32)
		Stop
	End:
		TNT1 A 0
		Stop
	}
}
//------------------------------------------------------------------------
//------------------------------------------------------------------------
Actor DisintegrateShadowVerySmall 
{
	Scale 0.1
	Height 4
	Radius 2
	+NOINTERACTION
	RenderStyle Add
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_PlaySound("disintegrate/extrasnd/extra",CHAN_BODY)
		VORT ABCDEFGHI 2 Bright A_FadeOut(0.01)
		TNT1 A 0 A_PlaySound("hl2/weapons/disintegrate",CHAN_WEAPON)
		VORT JKLMN 2 Bright A_FadeOut(0.01)
		TNT1 AAAA 0 A_SpawnItemEx("DisintegrateSparksVerySmall",0,0,0,0,0,0,0,32)
		VORT OOPQRSTUVW 2 Bright A_FadeOut(0.01)
		VORT XXYY 1 Bright A_FadeOut
		Wait
	}
}

Actor DisintegrateShadowSmall : DisintegrateShadowVerySmall 
{
	Scale 0.25
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_PlaySound("disintegrate/extrasnd/extra",CHAN_BODY)
		VORT ABCDEFGHI 2 Bright A_FadeOut(0.01)
		TNT1 A 0 A_PlaySound("hl2/weapons/disintegrate",CHAN_WEAPON)
		VORT JKLMN 2 Bright A_FadeOut(0.01)
		TNT1 AAAAAA 0 A_SpawnItemEx("DisintegrateSparkSmall",0,0,0,0,0,0,0,32,0,2)
		VORT OOPQRSTUVW 2 Bright A_FadeOut(0.01)
		VORT XXYY 1 Bright A_FadeOut
		Wait
	}
}

Actor DisintegrateShadowSmallMedium : DisintegrateShadowVerySmall 
{
	Scale 0.4
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_PlaySound("disintegrate/extrasnd/extra",CHAN_BODY)
		VORT ABCDEFGHI 2 Bright A_FadeOut(0.01)
		TNT1 A 0 A_PlaySound("hl2/weapons/disintegrate",CHAN_WEAPON)
		VORT JKLMN 2 Bright A_FadeOut(0.01)
		TNT1 AAAAAA 0 A_SpawnItemEx("DisintegrateSparksSmallMedium",0,0,0,0,0,0,0,32,0,2)
		VORT OOPQRSTUVW 2 Bright A_FadeOut(0.01)
		VORT XXYY 1 Bright A_FadeOut
		Wait
	}
}
Actor DisintegrateShadowMedium : DisintegrateShadowVerySmall 
{
	Scale 0.52
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_PlaySound("disintegrate/extrasnd/extra",CHAN_BODY)
		VORT ABCDEFGHI 2 Bright A_FadeOut(0.01)
		TNT1 A 0 A_PlaySound("hl2/weapons/disintegrate",CHAN_WEAPON)
		VORT JKLMN 2 Bright A_FadeOut(0.01)
		TNT1 AAAAAAAA 0 A_SpawnItemEx("DisintegrateSparksMedium",0,0,0,0,0,0,0,32,0,3)
		VORT OOPQRSTUVW  2 Bright A_FadeOut(0.01)
		VORT XXYY 1 Bright A_FadeOut
		Wait
	}
}

Actor DisintegrateShadowMediumBig : DisintegrateShadowVerySmall 
{
	Scale 0.6
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_PlaySound("disintegrate/extrasnd/extra",CHAN_BODY)
		VORT ABCDEFGHI 2 Bright A_FadeOut(0.01)
		TNT1 A 0 A_PlaySound("hl2/weapons/disintegrate",CHAN_WEAPON)
		VORT JKLMN 2 Bright A_FadeOut(0.01)
		TNT1 AAAAAAAA 0 A_SpawnItemEx("DisintegrateSparksMediumBig",0,0,0,0,0,0,0,32,0,3)
		VORT OOPQRSTUVW 2 Bright A_FadeOut(0.01)
		VORT XXYY 1 Bright A_FadeOut
		Wait
	}
}

Actor DisintegrateShadowBig : DisintegrateShadowMedium
{
	Scale 0.9
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_PlaySound("disintegrate/extrasnd/extra",CHAN_BODY)
		VORT ABCDEFGHI 2 Bright A_FadeOut(0.01)
		TNT1 A 0 A_PlaySound("hl2/weapons/disintegrate",CHAN_WEAPON)
		VORT JKLMN 2 Bright A_FadeOut(0.01)
		TNT1 AAAAAAAAAAAAAAA 0 A_SpawnItemEx("DisintegrateSparksBig",0,0,0,0,0,0,0,32,0,4)
		VORT OOPQRSTUVW 2 Bright A_FadeOut(0.01)
		VORT XXYY 1 Bright A_FadeOut
		Wait
	}
}

//===============================================================================
//===============================================================================
//
//	Cave Johnson sound players
//
//===============================================================================
//===============================================================================

Actor CaveJohnsonSpeaker
{
	+NOINTERACTION
	RenderStyle None
	States
	{
	Spawn:
		TNT1 A 1 NoDelay A_JumpIf(tid != 0, "WaitPrep")
		TNT1 A 0 A_Jump(85,"Speak") // 85/256 = ~1/3
		Goto Waiting
	WaitPrep:
		TNT1 A 0 Thing_ChangeTID(0,0)
	Waiting:
		TNT1 A 35 A_SetTics((35*60)*random(1,3)) //1-3 minutes in between
		TNT1 A 0 A_Jump(128,"Waiting")
	Speak:
		TNT1 A 0 A_PlaySound("CaveJohnsonRandom",CHAN_AUTO,1.0,0,ATTN_NONE)
		Goto Waiting
	}
}

//------------------------------------------------------------------------
//Greeting (there are only 2 options, but still
Actor CaveSaysHi : CustomInventory
{
	+INVENTORY.AUTOACTIVATE
	Inventory.MaxAmount 1
	States
	{
	Spawn:
		PLAY A -1 Bright
		Stop
	Use:
		TNT1 A 0 A_SpawnItemEx("PlayCaveSaysHi",0,0,0,0,0,0,0,32)
		Stop
	}
}

Actor PlayCaveSaysHi
{
	+NOINTERACTION
	Radius 3
	Height 3
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 4 A_PlaySound("CaveJohnsonIntro",CHAN_AUTO,1.0,0,ATTN_NONE)
		Stop
	}
}
//------------------------------------------------------------------------
//Random phrase
Actor CaveSaySomething : CustomInventory
{
	+INVENTORY.AUTOACTIVATE
	Inventory.MaxAmount 0
	States
	{
	Use:
		TNT1 A 0 A_Jump(128,"Nothing")
		TNT1 A 0 A_SpawnItemEx("PlayCaveSays",0,0,0,0,0,0,0,32)
		Stop
	Nothing:
		TNT1 A 0
		Stop
	}
}

//This one is used whenever the map starts, so only like 1/3 of the times it will say something at the beginning
Actor CaveSaySomethingHalfTheTimes : CustomInventory
{
	+INVENTORY.AUTOACTIVATE
	Inventory.MaxAmount 0
	States
	{
	Spawn:
		PLAY A -1 Bright
		Stop
	Use:
		TNT1 A 0 A_Jump(200,"Nothing")
		TNT1 A 0 A_SpawnItemEx("PlayCaveSays",0,0,0,0,0,0,0,32)
		Stop
	Nothing:
		TNT1 A 0 A_SpawnItemEx("Dummy2",0,0,0,0,0,0,0,32)
		Stop
	}
}


Actor Dummy2
{
	+NOINTERACTION
	States
	{
	Spawn:
		TNT1 A 1
		Stop
	}
}

Actor PlayCaveSays
{
	+NOINTERACTION
	Radius 3
	Height 3
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 4 A_PlaySound("CaveJohnsonRandom",CHAN_AUTO,1.0,0,ATTN_NONE)
		Stop
	}
}

//------------------------------------------------------------------------
//Greeting (there are only 2 options, but still
Actor CaveIsPissed : CustomInventory
{
+INVENTORY.AUTOACTIVATE
Inventory.MaxAmount 1
States
{
	Spawn:
		PLAY A -1 Bright
		Stop
	Use:
		TNT1 A 0 A_SpawnItemEx("PlayCaveIsPissed",0,0,0,0,0,0,0,32)
		Stop
	}
}

Actor PlayCaveIsPissed
{
	+NOINTERACTION
	Radius 3
	Height 3
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 4 A_PlaySound("CaveJohnsonFinal",CHAN_AUTO,1.0,0,ATTN_NONE)
		Stop
	}
}


Actor DummyMonster
{
	+NOTARGET
	MONSTER
	//-ISMONSTER
	-COUNTKILL
	-SHOOTABLE
	-SOLID
	+NONSHOOTABLE
	+THRUACTORS
	+NODAMAGE
	//+LOOKALLAROUND
	Radius 12
	Height 56
	Speed 10
	Scale 0.2
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 10 A_Look
		Wait
	See:
		TNT1 A 4 A_Chase("","")
		TNT1 A 0 A_JumpIfTargetInLOS(1,0)
		Loop
		TNT1 A 0 A_ChangeFlag("NODAMAGE",0)
		TNT1 A 0 A_SetShootable
		TNT1 A 0 A_Die
	Death:
		TNT1 A 0 A_SpawnItemEx("L4DSmallMobRunner",0,0,0,0,0,0,random(0,359),32,210)
		TNT1 A 0 A_SpawnItemEx("L4DMediumMobRunner",0,0,0,0,0,0,random(0,359),32,250)
		TNT1 A 10 A_Fall
		Stop	
	}
}

Actor DummyMonsterBoss : DummyMonster
{
	+BOSS
	Height 64
	Radius 64
	States
	{
	Death:
		TNT1 A 0 A_SpawnItemEx("L4DSmallMobRunner",0,0,0,0,0,0,random(0,359),32,190)
		TNT1 A 0 A_SpawnItemEx("L4DMediumMobRunner",0,0,0,0,0,0,random(0,359),32,230)
		TNT1 A 1 A_Fall
		TNT1 A 10 A_KillMaster
		Stop
	}
}

//------------------------------------------------------------------
//	To stop any sounds played by the weapons when they are dropped
Actor WeaponSoundStopper : CustomInventory
{
	Inventory.MaxAmount 1
	+INVENTORY.AUTOACTIVATE
	States
	{
	Use:
		TNT1 A 0
		TNT1 A 0 A_StopSound(3)
		TNT1 A 0 A_StopSound(4)
		TNT1 A 0 A_StopSound(5)
		TNT1 A 0 A_StopSound(6)
		TNT1 A 0 A_StopSound(7)
		Stop
	}
}




//------------------------------------------------------------------
// New ice chunks for the mod :D
Actor AEIceChunk replaces IceChunk
{
	Radius 3
	Height 4
	Mass 5
	Gravity 0.35
	+CORPSE
	+DROPOFF
	+CANNOTPUSH
	+FLOORCLIP
	+NOTELEPORT
	+NOBLOCKMAP
	+MOVEWITHSECTOR
	Scale 0.06
	RenderStyle Add
	//Alpha 0.7
	//Translation "0:255=%[0,0.5,0.75]:[1.0,1.0,1.4]"
	Translation "0:255=%[0.57,0.6,0.84]:[0.9,0.9,0.9]"
	//Translation "Ice"
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_SetTranslucent(0.9,1)
		TNT1 A 0 A_Jump(256,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,
				24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,
				46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,
				68,69,70,71,72,73,74,75)
		GIB7 ABCDEFGHIJKLMNOPQRSTUVWXYZ 1	
		GIB8 ABCDEFGHIJKLMNOPQRSTUVWXYZ 1
		GIB9 ABCDEFGHIJKLMNOPQRSTUVWX 1
		Goto Spawn+3
	Crash:
		"####" "#" 3 A_FadeOut(0.02)
		Loop
	}
}

Actor L4DCountToggler : CustomInventory
{
	+INVENTORY.ALWAYSPICKUP
	States
	{
	Pickup:
		TNT1 A 0 A_JumpIfInventory("L4DMode",1,1,AAPTR_PLAYER1)
		Goto NotApplicable
		TNT1 A 0 A_JumpIfInventory("L4DCountHudToken",1,"SwitchOff",AAPTR_PLAYER1)
		TNT1 A 0 A_GiveInventory("L4DCountHudToken",1,AAPTR_PLAYER1)
		TNT1 A 0 ACS_NamedExecute("L4DCountHudSwitcher",0,0)
		TNT1 A 0 A_SpawnItemEx("L4DHudAnnouncer",0,0,0,0,0,0,0,32)
		Stop
	SwitchOff:
		TNT1 A 0 ACS_NamedExecute("L4DCountHudSwitcher",0,0)
		TNT1 A 0 A_TakeInventory("L4DCountHudToken",9999,0,AAPTR_PLAYER1)
		TNT1 A 0 A_SpawnItemEx("L4DHudAnnouncer",0,0,0,0,0,0,0,32)
		Stop
	NotApplicable:
		TNT1 A 0 A_SpawnItemEx("L4DHudAnnouncer",0,0,0,0,0,0,0,32)
		Stop
	}
}

Actor L4DCountHudToken : Inventory
{	Inventory.MaxAmount 1	}

Actor L4DHudAnnouncer
{
	+NOINTERACTION
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_JumpIfInventory("L4DMode",1,1,AAPTR_PLAYER1)
		Goto Unavailable
		TNT1 A 0 A_JumpIfInventory("L4DCountHudToken",1,"ToggleOn",AAPTR_PLAYER1)
		Goto ToggleOff
	ToggleOn:
		TNT1 A 1 //A_PrintBold("L4D Counter Hud ON")
		Stop
	ToggleOff:
		TNT1 A 1 //A_PrintBold("L4D Count Hud OFF")
		Stop
	Unavailable:
		TNT1 A 1 A_PrintBold("Unavailable")
		Stop
	}
}

Actor L4DMode : Inventory
{	Inventory.MaxAmount 1	}

Actor JokeModeSpawner : RandomSpawner
{
	DropItem "RickCore" 255 10
	DropItem "FactCore" 255 10
	DropItem "SpaceCore" 255 10
	DropItem "TheGman" 255 5
	DropItem "Nyancodemon" 64 1
}

Actor JokeCoreSpawner : RandomSpawner
{
	DropItem "RickCore" 255 10
	DropItem "FactCore" 255 10
	DropItem "SpaceCore" 255 10
}

Actor NoDormantToken : Inventory
{	Inventory.MaxAmount 1	}

//For scripts or start-up monsters that start out as dormant. 
Actor DormantChecker : CustomInventory
{
	+INVENTORY.ALWAYSPICKUP
	+INVENTORY.AUTOACTIVATE
	States
	{
	Use:
		TNT1 A 0 A_JumpIfInventory("NoDormantToken",1,"End")
		TNT1 A 0 A_CheckFlag("DORMANT","SetDormant",AAPTR_MASTER)
		Stop
	SetDormant:
		TNT1 A 0 Thing_Deactivate(0)
		Stop
	End:
		TNT1 A 0
		Stop
	}
}

/*
Actor FancyPlasmaBall : PlasmaBall replaces PlasmaBall
{
   States
   {
   Spawn: //Temporarily save 'target' as 'master' and null the target field
	  TNT1 A 0 NoDelay A_RearrangePointers(AAPTR_NULL, AAPTR_TARGET)
	  TNT1 A 0 A_SpawnItemEx("FancyPlasmaBallEffect", 0,0,0, 0,0,0, 0)
	  TNT1 A 0 A_SpawnItemEx("FancyPlasmaBallEffect", 0,0,0, 0,0,0, 180)
	  TNT1 A 0 A_SpawnItemEx("FancyPlasmaBallEffect", 0,0,0, 0,0,0, 90)
	  TNT1 A 0 A_SpawnItemEx("FancyPlasmaBallEffect", 0,0,0, 0,0,0, -90)
	  TNT1 A 0 A_RearrangePointers(AAPTR_MASTER, AAPTR_NULL)
	  Goto Super::Spawn
   }
}

Actor FancyPlasmaBallEffect
{
   +NOINTERACTION
   Scale 0.5
   States
   {
   Spawn:
	  TNT1 A 0 A_Turn(10)
	  APLS A 1 Bright A_Warp(AAPTR_TARGET, 20,0,0, 0, WARPF_NOCHECKPOSITION|WARPF_INTERPOLATE|WARPF_USECALLERANGLE)
	  APBX A 5 Bright A_CheckFlag("MISSILE", "Spawn", AAPTR_TARGET)//Check if missile hasn't exploded yet
	  APBX BCDE 5 BRIGHT
	  Stop
   }
}*/

//A special item for actors that have multiple stages, to show they're supposed 
//to kill off all versions.

Actor Telefragged : Inventory
{
	Inventory.MaxAmount 1
}

//Made to allow monster bodies to be swallowed up by absorption. We want to 
//ensure that monsters have FALLEN first and dropped their items.

Actor Corpsed : Inventory
{
	Inventory.MaxAmount 1
}

Actor IDied : Inventory
{	Inventory.MaxAmount 20	}

Actor Nothing
{
	+NOINTERACTION
	States
	{
	Spawn:
		TNT1 A 0
		Stop
	}
}

////////////////////
// SPECIAL ACTORS //
////////////////////

actor ClientSpawner 19191
{
  -SOLID
  +NOGRAVITY
  +ALLOWCLIENTSPAWN
  States
   {
   Spawn:
    TNT1 A 1
    Loop
   }
}
